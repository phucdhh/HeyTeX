var p=Object.defineProperty;var l=(t,e,n)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var r=(t,e,n)=>l(t,typeof e!="symbol"?e+"":e,n);class w{constructor(){r(this,"engine");r(this,"texliveEndpoint","")}async initialize(){typeof DvipdfmxEngine>"u"&&(await this.loadScript("/core/swiftlatex/DvipdfmxEngine.js"),await this.loadScript("/core/swiftlatex/TexlyreDvipdfmxEngineSetup.js")),this.engine=new window.DvipdfmxEngine,await this.engine.loadEngine(),this.texliveEndpoint&&this.engine.setTexliveEndpoint(this.texliveEndpoint)}loadScript(e){return new Promise((n,o)=>{const i=document.createElement("script");i.src=e,i.onload=()=>n(),i.onerror=o,document.head.appendChild(i)})}async convertXdvToPdf(e,n="main.xdv",o){const i=new window.DvipdfmxEngine;await i.loadEngine(),this.texliveEndpoint&&i.setTexliveEndpoint(this.texliveEndpoint);try{await i.makeMemFSFolder("/tex")}catch{}if(o)for(const[d,s]of Object.entries(o))await i.writeMemFSFile(d,new Uint8Array(s));await i.writeMemFSFile(`/work/${n}`,e),await i.setEngineMainFile(n);const a=await i.compilePDF();if(a.status===0&&a.pdf)return a.pdf;throw new Error(`PDF conversion failed: ${a.log||"Unknown error"}`)}setTexliveEndpoint(e){this.texliveEndpoint=e,this.engine&&this.engine.setTexliveEndpoint(e)}}export{w as DvipdfmxEngineWrapper};
//# sourceMappingURL=DvipdfmxEngine-Hun86ZVO.js.map
