var JO=Object.defineProperty;var BC=s=>{throw TypeError(s)};var tj=(s,t,e)=>t in s?JO(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var Nt=(s,t,e)=>tj(s,typeof t!="symbol"?t+"":t,e),xw=(s,t,e)=>t.has(s)||BC("Cannot "+e);var p=(s,t,e)=>(xw(s,t,"read from private field"),e?e.call(s):t.get(s)),N=(s,t,e)=>t.has(s)?BC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),k=(s,t,e,n)=>(xw(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),M=(s,t,e)=>(xw(s,t,"access private method"),e);var wi=(s,t,e,n)=>({set _(a){k(s,t,a,e)},get _(){return p(s,t,n)}});function ej(s,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in s)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function $A(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Aw={exports:{}},Vd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC;function nj(){if(UC)return Vd;UC=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:s,type:n,key:c,ref:a!==void 0?a:null,props:o}}return Vd.Fragment=t,Vd.jsx=e,Vd.jsxs=e,Vd}var HC;function ij(){return HC||(HC=1,Aw.exports=nj()),Aw.exports}var x=ij(),_w={exports:{}},Dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC;function sj(){if(VC)return Dt;VC=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=b&&j[b]||j["@@iterator"],typeof j=="function"?j:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,T={};function C(j,G,tt){this.props=j,this.context=G,this.refs=T,this.updater=tt||A}C.prototype.isReactComponent={},C.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function D(){}D.prototype=C.prototype;function L(j,G,tt){this.props=j,this.context=G,this.refs=T,this.updater=tt||A}var z=L.prototype=new D;z.constructor=L,E(z,C.prototype),z.isPureReactComponent=!0;var B=Array.isArray;function U(){}var O={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function W(j,G,tt){var at=tt.ref;return{$$typeof:s,type:j,key:G,ref:at!==void 0?at:null,props:tt}}function Q(j,G){return W(j.type,G,j.props)}function nt(j){return typeof j=="object"&&j!==null&&j.$$typeof===s}function ot(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(tt){return G[tt]})}var ht=/\/+/g;function lt(j,G){return typeof j=="object"&&j!==null&&j.key!=null?ot(""+j.key):G.toString(36)}function J(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(U,U):(j.status="pending",j.then(function(G){j.status==="pending"&&(j.status="fulfilled",j.value=G)},function(G){j.status==="pending"&&(j.status="rejected",j.reason=G)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function F(j,G,tt,at,pt){var At=typeof j;(At==="undefined"||At==="boolean")&&(j=null);var ut=!1;if(j===null)ut=!0;else switch(At){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(j.$$typeof){case s:case t:ut=!0;break;case g:return ut=j._init,F(ut(j._payload),G,tt,at,pt)}}if(ut)return pt=pt(j),ut=at===""?"."+lt(j,0):at,B(pt)?(tt="",ut!=null&&(tt=ut.replace(ht,"$&/")+"/"),F(pt,G,tt,"",function(Xt){return Xt})):pt!=null&&(nt(pt)&&(pt=Q(pt,tt+(pt.key==null||j&&j.key===pt.key?"":(""+pt.key).replace(ht,"$&/")+"/")+ut)),G.push(pt)),1;ut=0;var Gt=at===""?".":at+":";if(B(j))for(var Pt=0;Pt<j.length;Pt++)at=j[Pt],At=Gt+lt(at,Pt),ut+=F(at,G,tt,At,pt);else if(Pt=w(j),typeof Pt=="function")for(j=Pt.call(j),Pt=0;!(at=j.next()).done;)at=at.value,At=Gt+lt(at,Pt++),ut+=F(at,G,tt,At,pt);else if(At==="object"){if(typeof j.then=="function")return F(J(j),G,tt,at,pt);throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ut}function q(j,G,tt){if(j==null)return j;var at=[],pt=0;return F(j,at,"","",function(At){return G.call(tt,At,pt++)}),at}function X(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(tt){(j._status===0||j._status===-1)&&(j._status=1,j._result=tt)},function(tt){(j._status===0||j._status===-1)&&(j._status=2,j._result=tt)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var wt=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ct={map:q,forEach:function(j,G,tt){q(j,function(){G.apply(this,arguments)},tt)},count:function(j){var G=0;return q(j,function(){G++}),G},toArray:function(j){return q(j,function(G){return G})||[]},only:function(j){if(!nt(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Dt.Activity=y,Dt.Children=Ct,Dt.Component=C,Dt.Fragment=e,Dt.Profiler=a,Dt.PureComponent=L,Dt.StrictMode=n,Dt.Suspense=d,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Dt.__COMPILER_RUNTIME={__proto__:null,c:function(j){return O.H.useMemoCache(j)}},Dt.cache=function(j){return function(){return j.apply(null,arguments)}},Dt.cacheSignal=function(){return null},Dt.cloneElement=function(j,G,tt){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var at=E({},j.props),pt=j.key;if(G!=null)for(At in G.key!==void 0&&(pt=""+G.key),G)!H.call(G,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&G.ref===void 0||(at[At]=G[At]);var At=arguments.length-2;if(At===1)at.children=tt;else if(1<At){for(var ut=Array(At),Gt=0;Gt<At;Gt++)ut[Gt]=arguments[Gt+2];at.children=ut}return W(j.type,pt,at)},Dt.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},Dt.createElement=function(j,G,tt){var at,pt={},At=null;if(G!=null)for(at in G.key!==void 0&&(At=""+G.key),G)H.call(G,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(pt[at]=G[at]);var ut=arguments.length-2;if(ut===1)pt.children=tt;else if(1<ut){for(var Gt=Array(ut),Pt=0;Pt<ut;Pt++)Gt[Pt]=arguments[Pt+2];pt.children=Gt}if(j&&j.defaultProps)for(at in ut=j.defaultProps,ut)pt[at]===void 0&&(pt[at]=ut[at]);return W(j,At,pt)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(j){return{$$typeof:u,render:j}},Dt.isValidElement=nt,Dt.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:X}},Dt.memo=function(j,G){return{$$typeof:f,type:j,compare:G===void 0?null:G}},Dt.startTransition=function(j){var G=O.T,tt={};O.T=tt;try{var at=j(),pt=O.S;pt!==null&&pt(tt,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(U,wt)}catch(At){wt(At)}finally{G!==null&&tt.types!==null&&(G.types=tt.types),O.T=G}},Dt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Dt.use=function(j){return O.H.use(j)},Dt.useActionState=function(j,G,tt){return O.H.useActionState(j,G,tt)},Dt.useCallback=function(j,G){return O.H.useCallback(j,G)},Dt.useContext=function(j){return O.H.useContext(j)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(j,G){return O.H.useDeferredValue(j,G)},Dt.useEffect=function(j,G){return O.H.useEffect(j,G)},Dt.useEffectEvent=function(j){return O.H.useEffectEvent(j)},Dt.useId=function(){return O.H.useId()},Dt.useImperativeHandle=function(j,G,tt){return O.H.useImperativeHandle(j,G,tt)},Dt.useInsertionEffect=function(j,G){return O.H.useInsertionEffect(j,G)},Dt.useLayoutEffect=function(j,G){return O.H.useLayoutEffect(j,G)},Dt.useMemo=function(j,G){return O.H.useMemo(j,G)},Dt.useOptimistic=function(j,G){return O.H.useOptimistic(j,G)},Dt.useReducer=function(j,G,tt){return O.H.useReducer(j,G,tt)},Dt.useRef=function(j){return O.H.useRef(j)},Dt.useState=function(j){return O.H.useState(j)},Dt.useSyncExternalStore=function(j,G,tt){return O.H.useSyncExternalStore(j,G,tt)},Dt.useTransition=function(){return O.H.useTransition()},Dt.version="19.2.1",Dt}var qC;function YA(){return qC||(qC=1,_w.exports=sj()),_w.exports}var S=YA();const ks=$A(S),Xk=ej({__proto__:null,default:ks},[S]);var Ew={exports:{}},qd={},Sw={exports:{}},Cw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC;function rj(){return GC||(GC=1,(function(s){function t(F,q){var X=F.length;F.push(q);t:for(;0<X;){var wt=X-1>>>1,Ct=F[wt];if(0<a(Ct,q))F[wt]=q,F[X]=Ct,X=wt;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var q=F[0],X=F.pop();if(X!==q){F[0]=X;t:for(var wt=0,Ct=F.length,j=Ct>>>1;wt<j;){var G=2*(wt+1)-1,tt=F[G],at=G+1,pt=F[at];if(0>a(tt,X))at<Ct&&0>a(pt,tt)?(F[wt]=pt,F[at]=X,wt=at):(F[wt]=tt,F[G]=X,wt=G);else if(at<Ct&&0>a(pt,X))F[wt]=pt,F[at]=X,wt=at;else break t}}return q}function a(F,q){var X=F.sortIndex-q.sortIndex;return X!==0?X:F.id-q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();s.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,b=3,w=!1,A=!1,E=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function z(F){for(var q=e(f);q!==null;){if(q.callback===null)n(f);else if(q.startTime<=F)n(f),q.sortIndex=q.expirationTime,t(d,q);else break;q=e(f)}}function B(F){if(E=!1,z(F),!A)if(e(d)!==null)A=!0,U||(U=!0,ot());else{var q=e(f);q!==null&&J(B,q.startTime-F)}}var U=!1,O=-1,H=5,W=-1;function Q(){return T?!0:!(s.unstable_now()-W<H)}function nt(){if(T=!1,U){var F=s.unstable_now();W=F;var q=!0;try{t:{A=!1,E&&(E=!1,D(O),O=-1),w=!0;var X=b;try{e:{for(z(F),y=e(d);y!==null&&!(y.expirationTime>F&&Q());){var wt=y.callback;if(typeof wt=="function"){y.callback=null,b=y.priorityLevel;var Ct=wt(y.expirationTime<=F);if(F=s.unstable_now(),typeof Ct=="function"){y.callback=Ct,z(F),q=!0;break e}y===e(d)&&n(d),z(F)}else n(d);y=e(d)}if(y!==null)q=!0;else{var j=e(f);j!==null&&J(B,j.startTime-F),q=!1}}break t}finally{y=null,b=X,w=!1}q=void 0}}finally{q?ot():U=!1}}}var ot;if(typeof L=="function")ot=function(){L(nt)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,lt=ht.port2;ht.port1.onmessage=nt,ot=function(){lt.postMessage(null)}}else ot=function(){C(nt,0)};function J(F,q){O=C(function(){F(s.unstable_now())},q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(F){switch(b){case 1:case 2:case 3:var q=3;break;default:q=b}var X=b;b=q;try{return F()}finally{b=X}},s.unstable_requestPaint=function(){T=!0},s.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=b;b=F;try{return q()}finally{b=X}},s.unstable_scheduleCallback=function(F,q,X){var wt=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?wt+X:wt):X=wt,F){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=X+Ct,F={id:g++,callback:q,priorityLevel:F,startTime:X,expirationTime:Ct,sortIndex:-1},X>wt?(F.sortIndex=X,t(f,F),e(d)===null&&F===e(f)&&(E?(D(O),O=-1):E=!0,J(B,X-wt))):(F.sortIndex=Ct,t(d,F),A||w||(A=!0,U||(U=!0,ot()))),F},s.unstable_shouldYield=Q,s.unstable_wrapCallback=function(F){var q=b;return function(){var X=b;b=q;try{return F.apply(this,arguments)}finally{b=X}}}})(Cw)),Cw}var XC;function aj(){return XC||(XC=1,Sw.exports=rj()),Sw.exports}var Tw={exports:{}},Ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C;function oj(){if($C)return Ln;$C=1;var s=YA();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ln.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},Ln.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},Ln.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Ln.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ln.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ln.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Ln.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ln.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Ln.requestFormReset=function(d){n.d.r(d)},Ln.unstable_batchedUpdates=function(d,f){return d(f)},Ln.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},Ln.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ln.version="19.2.1",Ln}var YC;function $k(){if(YC)return Tw.exports;YC=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Tw.exports=oj(),Tw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC;function lj(){if(KC)return qd;KC=1;var s=aj(),t=YA(),e=$k();function n(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function u(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(n(188));return r!==i?null:i}for(var l=i,h=r;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return d(m),i;if(v===h)return d(m),r;v=v.sibling}throw Error(n(188))}if(l.return!==h.return)l=m,h=v;else{for(var _=!1,R=m.child;R;){if(R===l){_=!0,l=m,h=v;break}if(R===h){_=!0,h=m,l=v;break}R=R.sibling}if(!_){for(R=v.child;R;){if(R===l){_=!0,l=v,h=m;break}if(R===h){_=!0,h=v,l=m;break}R=R.sibling}if(!_)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:r}function g(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=g(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),L=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function ot(i){return i===null||typeof i!="object"?null:(i=nt&&i[nt]||i["@@iterator"],typeof i=="function"?i:null)}var ht=Symbol.for("react.client.reference");function lt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ht?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case E:return"Fragment";case C:return"Profiler";case T:return"StrictMode";case B:return"Suspense";case U:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case L:return i.displayName||"Context";case D:return(i._context.displayName||"Context")+".Consumer";case z:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return r=i.displayName||null,r!==null?r:lt(i.type)||"Memo";case H:r=i._payload,i=i._init;try{return lt(i(r))}catch{}}return null}var J=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},wt=[],Ct=-1;function j(i){return{current:i}}function G(i){0>Ct||(i.current=wt[Ct],wt[Ct]=null,Ct--)}function tt(i,r){Ct++,wt[Ct]=i.current,i.current=r}var at=j(null),pt=j(null),At=j(null),ut=j(null);function Gt(i,r){switch(tt(At,r),tt(pt,i),tt(at,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?cC(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=cC(r),i=uC(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(at),tt(at,i)}function Pt(){G(at),G(pt),G(At)}function Xt(i){i.memoizedState!==null&&tt(ut,i);var r=at.current,l=uC(r,i.type);r!==l&&(tt(pt,i),tt(at,l))}function ce(i){pt.current===i&&(G(at),G(pt)),ut.current===i&&(G(ut),Id._currentValue=X)}var cn,re;function le(i){if(cn===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);cn=r&&r[1]||"",re=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cn+i+re}var De=!1;function Re(i,r){if(!i||De)return"";De=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(Z){var K=Z}Reflect.construct(i,[],st)}else{try{st.call()}catch(Z){K=Z}i.call(st.prototype)}}else{try{throw Error()}catch(Z){K=Z}(st=i())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),_=v[0],R=v[1];if(_&&R){var P=_.split(`
`),Y=R.split(`
`);for(m=h=0;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;for(;m<Y.length&&!Y[m].includes("DetermineComponentFrameRoot");)m++;if(h===P.length||m===Y.length)for(h=P.length-1,m=Y.length-1;1<=h&&0<=m&&P[h]!==Y[m];)m--;for(;1<=h&&0<=m;h--,m--)if(P[h]!==Y[m]){if(h!==1||m!==1)do if(h--,m--,0>m||P[h]!==Y[m]){var et=`
`+P[h].replace(" at new "," at ");return i.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",i.displayName)),et}while(1<=h&&0<=m);break}}}finally{De=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?le(l):""}function Un(i,r){switch(i.tag){case 26:case 27:case 5:return le(i.type);case 16:return le("Lazy");case 13:return i.child!==r&&r!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return Re(i.type,!1);case 11:return Re(i.type.render,!1);case 1:return Re(i.type,!0);case 31:return le("Activity");default:return""}}function os(i){try{var r="",l=null;do r+=Un(i,l),l=i,i=i.return;while(i);return r}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ls=Object.prototype.hasOwnProperty,pr=s.unstable_scheduleCallback,di=s.unstable_cancelCallback,Qh=s.unstable_shouldYield,Uo=s.unstable_requestPaint,yn=s.unstable_now,Zh=s.unstable_getCurrentPriorityLevel,Nc=s.unstable_ImmediatePriority,Hn=s.unstable_UserBlockingPriority,ls=s.unstable_NormalPriority,Ca=s.unstable_LowPriority,Ta=s.unstable_IdlePriority,ob=s.log,lb=s.unstable_setDisableYieldValue,Ho=null,Vn=null;function Os(i){if(typeof ob=="function"&&lb(i),Vn&&typeof Vn.setStrictMode=="function")try{Vn.setStrictMode(Ho,i)}catch{}}var qn=Math.clz32?Math.clz32:Jh,Eg=Math.log,cb=Math.LN2;function Jh(i){return i>>>=0,i===0?32:31-(Eg(i)/cb|0)|0}var Vo=256,rt=262144,ct=4194304;function gt(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ot(i,r,l){var h=i.pendingLanes;if(h===0)return 0;var m=0,v=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var R=h&134217727;return R!==0?(h=R&~v,h!==0?m=gt(h):(_&=R,_!==0?m=gt(_):l||(l=R&~i,l!==0&&(m=gt(l))))):(R=h&~v,R!==0?m=gt(R):_!==0?m=gt(_):l||(l=h&~i,l!==0&&(m=gt(l)))),m===0?0:r!==0&&r!==m&&(r&v)===0&&(v=m&-m,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:m}function kt(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Le(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ce(){var i=ct;return ct<<=1,(ct&62914560)===0&&(ct=4194304),i}function Fi(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function gr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Sg(i,r,l,h,m,v){var _=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,P=i.expirationTimes,Y=i.hiddenUpdates;for(l=_&~l;0<l;){var et=31-qn(l),st=1<<et;R[et]=0,P[et]=-1;var K=Y[et];if(K!==null)for(Y[et]=null,et=0;et<K.length;et++){var Z=K[et];Z!==null&&(Z.lane&=-536870913)}l&=~st}h!==0&&G_(i,h,0),v!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=v&~(_&~r))}function G_(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var h=31-qn(r);i.entangledLanes|=r,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function X_(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var h=31-qn(l),m=1<<h;m&r|i[h]&r&&(i[h]|=r),l&=~m}}function $_(i,r){var l=r&-r;return l=(l&42)!==0?1:ub(l),(l&(i.suspendedLanes|r))!==0?0:l}function ub(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function hb(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Y_(){var i=q.p;return i!==0?i:(i=window.event,i===void 0?32:LC(i.type))}function K_(i,r){var l=q.p;try{return q.p=i,r()}finally{q.p=l}}var ka=Math.random().toString(36).slice(2),vn="__reactFiber$"+ka,Zn="__reactProps$"+ka,Dc="__reactContainer$"+ka,db="__reactEvents$"+ka,HD="__reactListeners$"+ka,VD="__reactHandles$"+ka,W_="__reactResources$"+ka,td="__reactMarker$"+ka;function fb(i){delete i[vn],delete i[Zn],delete i[db],delete i[HD],delete i[VD]}function Lc(i){var r=i[vn];if(r)return r;for(var l=i.parentNode;l;){if(r=l[Dc]||l[vn]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=yC(i);i!==null;){if(l=i[vn])return l;i=yC(i)}return r}i=l,l=i.parentNode}return null}function Oc(i){if(i=i[vn]||i[Dc]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function ed(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(n(33))}function jc(i){var r=i[W_];return r||(r=i[W_]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function un(i){i[td]=!0}var Q_=new Set,Z_={};function qo(i,r){Pc(i,r),Pc(i+"Capture",r)}function Pc(i,r){for(Z_[i]=r,i=0;i<r.length;i++)Q_.add(r[i])}var qD=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),J_={},tE={};function GD(i){return Ls.call(tE,i)?!0:Ls.call(J_,i)?!1:qD.test(i)?tE[i]=!0:(J_[i]=!0,!1)}function Cg(i,r,l){if(GD(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function Tg(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function mr(i,r,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+h)}}function zi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function eE(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function XD(i,r,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,v=h.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return m.call(this)},set:function(_){l=""+_,v.call(this,_)}}),Object.defineProperty(i,r,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function pb(i){if(!i._valueTracker){var r=eE(i)?"checked":"value";i._valueTracker=XD(i,r,""+i[r])}}function nE(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),h="";return i&&(h=eE(i)?i.checked?"true":"false":i.value),i=h,i!==l?(r.setValue(i),!0):!1}function kg(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var $D=/[\n"\\]/g;function Ii(i){return i.replace($D,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function gb(i,r,l,h,m,v,_,R){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),r!=null?_==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+zi(r)):i.value!==""+zi(r)&&(i.value=""+zi(r)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),r!=null?mb(i,_,zi(r)):l!=null?mb(i,_,zi(l)):h!=null&&i.removeAttribute("value"),m==null&&v!=null&&(i.defaultChecked=!!v),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+zi(R):i.removeAttribute("name")}function iE(i,r,l,h,m,v,_,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){pb(i);return}l=l!=null?""+zi(l):"",r=r!=null?""+zi(r):l,R||r===i.value||(i.value=r),i.defaultValue=r}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=R?i.checked:!!h,i.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),pb(i)}function mb(i,r,l){r==="number"&&kg(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Fc(i,r,l,h){if(i=i.options,r){r={};for(var m=0;m<l.length;m++)r["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=r.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&h&&(i[l].defaultSelected=!0)}else{for(l=""+zi(l),r=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}r!==null||i[m].disabled||(r=i[m])}r!==null&&(r.selected=!0)}}function sE(i,r,l){if(r!=null&&(r=""+zi(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+zi(l):""}function rE(i,r,l,h){if(r==null){if(h!=null){if(l!=null)throw Error(n(92));if(J(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),r=l}l=zi(r),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),pb(i)}function zc(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var YD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function aE(i,r,l){var h=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":h?i.setProperty(r,l):typeof l!="number"||l===0||YD.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function oE(i,r,l){if(r!=null&&typeof r!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var m in r)h=r[m],r.hasOwnProperty(m)&&l[m]!==h&&aE(i,m,h)}else for(var v in r)r.hasOwnProperty(v)&&aE(i,v,r[v])}function yb(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rg(i){return WD.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function yr(){}var vb=null;function bb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ic=null,Bc=null;function lE(i){var r=Oc(i);if(r&&(i=r.stateNode)){var l=i[Zn]||null;t:switch(i=r.stateNode,r.type){case"input":if(gb(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ii(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var h=l[r];if(h!==i&&h.form===i.form){var m=h[Zn]||null;if(!m)throw Error(n(90));gb(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<l.length;r++)h=l[r],h.form===i.form&&nE(h)}break t;case"textarea":sE(i,l.value,l.defaultValue);break t;case"select":r=l.value,r!=null&&Fc(i,!!l.multiple,r,!1)}}}var wb=!1;function cE(i,r,l){if(wb)return i(r,l);wb=!0;try{var h=i(r);return h}finally{if(wb=!1,(Ic!==null||Bc!==null)&&(mm(),Ic&&(r=Ic,i=Bc,Bc=Ic=null,lE(r),i)))for(r=0;r<i.length;r++)lE(i[r])}}function nd(i,r){var l=i.stateNode;if(l===null)return null;var h=l[Zn]||null;if(h===null)return null;l=h[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,r,typeof l));return l}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xb=!1;if(vr)try{var id={};Object.defineProperty(id,"passive",{get:function(){xb=!0}}),window.addEventListener("test",id,id),window.removeEventListener("test",id,id)}catch{xb=!1}var Ra=null,Ab=null,Mg=null;function uE(){if(Mg)return Mg;var i,r=Ab,l=r.length,h,m="value"in Ra?Ra.value:Ra.textContent,v=m.length;for(i=0;i<l&&r[i]===m[i];i++);var _=l-i;for(h=1;h<=_&&r[l-h]===m[v-h];h++);return Mg=m.slice(i,1<h?1-h:void 0)}function Ng(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Dg(){return!0}function hE(){return!1}function Jn(i){function r(l,h,m,v,_){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Dg:hE,this.isPropagationStopped=hE,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Dg)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Dg)},persist:function(){},isPersistent:Dg}),r}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lg=Jn(Go),sd=y({},Go,{view:0,detail:0}),QD=Jn(sd),_b,Eb,rd,Og=y({},sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cb,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==rd&&(rd&&i.type==="mousemove"?(_b=i.screenX-rd.screenX,Eb=i.screenY-rd.screenY):Eb=_b=0,rd=i),_b)},movementY:function(i){return"movementY"in i?i.movementY:Eb}}),dE=Jn(Og),ZD=y({},Og,{dataTransfer:0}),JD=Jn(ZD),tL=y({},sd,{relatedTarget:0}),Sb=Jn(tL),eL=y({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),nL=Jn(eL),iL=y({},Go,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),sL=Jn(iL),rL=y({},Go,{data:0}),fE=Jn(rL),aL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cL(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=lL[i])?!!r[i]:!1}function Cb(){return cL}var uL=y({},sd,{key:function(i){if(i.key){var r=aL[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Ng(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?oL[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cb,charCode:function(i){return i.type==="keypress"?Ng(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ng(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),hL=Jn(uL),dL=y({},Og,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pE=Jn(dL),fL=y({},sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cb}),pL=Jn(fL),gL=y({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),mL=Jn(gL),yL=y({},Og,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vL=Jn(yL),bL=y({},Go,{newState:0,oldState:0}),wL=Jn(bL),xL=[9,13,27,32],Tb=vr&&"CompositionEvent"in window,ad=null;vr&&"documentMode"in document&&(ad=document.documentMode);var AL=vr&&"TextEvent"in window&&!ad,gE=vr&&(!Tb||ad&&8<ad&&11>=ad),mE=" ",yE=!1;function vE(i,r){switch(i){case"keyup":return xL.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bE(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Uc=!1;function _L(i,r){switch(i){case"compositionend":return bE(r);case"keypress":return r.which!==32?null:(yE=!0,mE);case"textInput":return i=r.data,i===mE&&yE?null:i;default:return null}}function EL(i,r){if(Uc)return i==="compositionend"||!Tb&&vE(i,r)?(i=uE(),Mg=Ab=Ra=null,Uc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return gE&&r.locale!=="ko"?null:r.data;default:return null}}var SL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wE(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!SL[i.type]:r==="textarea"}function xE(i,r,l,h){Ic?Bc?Bc.push(h):Bc=[h]:Ic=h,r=_m(r,"onChange"),0<r.length&&(l=new Lg("onChange","change",null,l,h),i.push({event:l,listeners:r}))}var od=null,ld=null;function CL(i){iC(i,0)}function jg(i){var r=ed(i);if(nE(r))return i}function AE(i,r){if(i==="change")return r}var _E=!1;if(vr){var kb;if(vr){var Rb="oninput"in document;if(!Rb){var EE=document.createElement("div");EE.setAttribute("oninput","return;"),Rb=typeof EE.oninput=="function"}kb=Rb}else kb=!1;_E=kb&&(!document.documentMode||9<document.documentMode)}function SE(){od&&(od.detachEvent("onpropertychange",CE),ld=od=null)}function CE(i){if(i.propertyName==="value"&&jg(ld)){var r=[];xE(r,ld,i,bb(i)),cE(CL,r)}}function TL(i,r,l){i==="focusin"?(SE(),od=r,ld=l,od.attachEvent("onpropertychange",CE)):i==="focusout"&&SE()}function kL(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return jg(ld)}function RL(i,r){if(i==="click")return jg(r)}function ML(i,r){if(i==="input"||i==="change")return jg(r)}function NL(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var fi=typeof Object.is=="function"?Object.is:NL;function cd(i,r){if(fi(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),h=Object.keys(r);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!Ls.call(r,m)||!fi(i[m],r[m]))return!1}return!0}function TE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function kE(i,r){var l=TE(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=r&&h>=r)return{node:l,offset:r-i};i=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=TE(l)}}function RE(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?RE(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function ME(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=kg(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=kg(i.document)}return r}function Mb(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var DL=vr&&"documentMode"in document&&11>=document.documentMode,Hc=null,Nb=null,ud=null,Db=!1;function NE(i,r,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Db||Hc==null||Hc!==kg(h)||(h=Hc,"selectionStart"in h&&Mb(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ud&&cd(ud,h)||(ud=h,h=_m(Nb,"onSelect"),0<h.length&&(r=new Lg("onSelect","select",null,r,l),i.push({event:r,listeners:h}),r.target=Hc)))}function Xo(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var Vc={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionrun:Xo("Transition","TransitionRun"),transitionstart:Xo("Transition","TransitionStart"),transitioncancel:Xo("Transition","TransitionCancel"),transitionend:Xo("Transition","TransitionEnd")},Lb={},DE={};vr&&(DE=document.createElement("div").style,"AnimationEvent"in window||(delete Vc.animationend.animation,delete Vc.animationiteration.animation,delete Vc.animationstart.animation),"TransitionEvent"in window||delete Vc.transitionend.transition);function $o(i){if(Lb[i])return Lb[i];if(!Vc[i])return i;var r=Vc[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in DE)return Lb[i]=r[l];return i}var LE=$o("animationend"),OE=$o("animationiteration"),jE=$o("animationstart"),LL=$o("transitionrun"),OL=$o("transitionstart"),jL=$o("transitioncancel"),PE=$o("transitionend"),FE=new Map,Ob="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ob.push("scrollEnd");function cs(i,r){FE.set(i,r),qo(r,[i])}var Pg=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Bi=[],qc=0,jb=0;function Fg(){for(var i=qc,r=jb=qc=0;r<i;){var l=Bi[r];Bi[r++]=null;var h=Bi[r];Bi[r++]=null;var m=Bi[r];Bi[r++]=null;var v=Bi[r];if(Bi[r++]=null,h!==null&&m!==null){var _=h.pending;_===null?m.next=m:(m.next=_.next,_.next=m),h.pending=m}v!==0&&zE(l,m,v)}}function zg(i,r,l,h){Bi[qc++]=i,Bi[qc++]=r,Bi[qc++]=l,Bi[qc++]=h,jb|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Pb(i,r,l,h){return zg(i,r,l,h),Ig(i)}function Yo(i,r){return zg(i,null,null,r),Ig(i)}function zE(i,r,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var m=!1,v=i.return;v!==null;)v.childLanes|=l,h=v.alternate,h!==null&&(h.childLanes|=l),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(m=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,m&&r!==null&&(m=31-qn(l),i=v.hiddenUpdates,h=i[m],h===null?i[m]=[r]:h.push(r),r.lane=l|536870912),v):null}function Ig(i){if(50<Dd)throw Dd=0,G0=null,Error(n(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Gc={};function PL(i,r,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pi(i,r,l,h){return new PL(i,r,l,h)}function Fb(i){return i=i.prototype,!(!i||!i.isReactComponent)}function br(i,r){var l=i.alternate;return l===null?(l=pi(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function IE(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Bg(i,r,l,h,m,v){var _=0;if(h=i,typeof i=="function")Fb(i)&&(_=1);else if(typeof i=="string")_=UO(i,l,at.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case W:return i=pi(31,l,r,m),i.elementType=W,i.lanes=v,i;case E:return Ko(l.children,m,v,r);case T:_=8,m|=24;break;case C:return i=pi(12,l,r,m|2),i.elementType=C,i.lanes=v,i;case B:return i=pi(13,l,r,m),i.elementType=B,i.lanes=v,i;case U:return i=pi(19,l,r,m),i.elementType=U,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:_=10;break t;case D:_=9;break t;case z:_=11;break t;case O:_=14;break t;case H:_=16,h=null;break t}_=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return r=pi(_,l,r,m),r.elementType=i,r.type=h,r.lanes=v,r}function Ko(i,r,l,h){return i=pi(7,i,h,r),i.lanes=l,i}function zb(i,r,l){return i=pi(6,i,null,r),i.lanes=l,i}function BE(i){var r=pi(18,null,null,0);return r.stateNode=i,r}function Ib(i,r,l){return r=pi(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var UE=new WeakMap;function Ui(i,r){if(typeof i=="object"&&i!==null){var l=UE.get(i);return l!==void 0?l:(r={value:i,source:r,stack:os(r)},UE.set(i,r),r)}return{value:i,source:r,stack:os(r)}}var Xc=[],$c=0,Ug=null,hd=0,Hi=[],Vi=0,Ma=null,js=1,Ps="";function wr(i,r){Xc[$c++]=hd,Xc[$c++]=Ug,Ug=i,hd=r}function HE(i,r,l){Hi[Vi++]=js,Hi[Vi++]=Ps,Hi[Vi++]=Ma,Ma=i;var h=js;i=Ps;var m=32-qn(h)-1;h&=~(1<<m),l+=1;var v=32-qn(r)+m;if(30<v){var _=m-m%5;v=(h&(1<<_)-1).toString(32),h>>=_,m-=_,js=1<<32-qn(r)+m|l<<m|h,Ps=v+i}else js=1<<v|l<<m|h,Ps=i}function Bb(i){i.return!==null&&(wr(i,1),HE(i,1,0))}function Ub(i){for(;i===Ug;)Ug=Xc[--$c],Xc[$c]=null,hd=Xc[--$c],Xc[$c]=null;for(;i===Ma;)Ma=Hi[--Vi],Hi[Vi]=null,Ps=Hi[--Vi],Hi[Vi]=null,js=Hi[--Vi],Hi[Vi]=null}function VE(i,r){Hi[Vi++]=js,Hi[Vi++]=Ps,Hi[Vi++]=Ma,js=r.id,Ps=r.overflow,Ma=i}var bn=null,Te=null,Kt=!1,Na=null,qi=!1,Hb=Error(n(519));function Da(i){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dd(Ui(r,i)),Hb}function qE(i){var r=i.stateNode,l=i.type,h=i.memoizedProps;switch(r[vn]=i,r[Zn]=h,l){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(l=0;l<Od.length;l++)Ht(Od[l],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":Ht("invalid",r),iE(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ht("invalid",r);break;case"textarea":Ht("invalid",r),rE(r,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||h.suppressHydrationWarning===!0||oC(r.textContent,l)?(h.popover!=null&&(Ht("beforetoggle",r),Ht("toggle",r)),h.onScroll!=null&&Ht("scroll",r),h.onScrollEnd!=null&&Ht("scrollend",r),h.onClick!=null&&(r.onclick=yr),r=!0):r=!1,r||Da(i,!0)}function GE(i){for(bn=i.return;bn;)switch(bn.tag){case 5:case 31:case 13:qi=!1;return;case 27:case 3:qi=!0;return;default:bn=bn.return}}function Yc(i){if(i!==bn)return!1;if(!Kt)return GE(i),Kt=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||aw(i.type,i.memoizedProps)),l=!l),l&&Te&&Da(i),GE(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Te=mC(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Te=mC(i)}else r===27?(r=Te,Xa(i.type)?(i=hw,hw=null,Te=i):Te=r):Te=bn?Xi(i.stateNode.nextSibling):null;return!0}function Wo(){Te=bn=null,Kt=!1}function Vb(){var i=Na;return i!==null&&(ii===null?ii=i:ii.push.apply(ii,i),Na=null),i}function dd(i){Na===null?Na=[i]:Na.push(i)}var qb=j(null),Qo=null,xr=null;function La(i,r,l){tt(qb,r._currentValue),r._currentValue=l}function Ar(i){i._currentValue=qb.current,G(qb)}function Gb(i,r,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),i===l)break;i=i.return}}function Xb(i,r,l,h){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var v=m.dependencies;if(v!==null){var _=m.child;v=v.firstContext;t:for(;v!==null;){var R=v;v=m;for(var P=0;P<r.length;P++)if(R.context===r[P]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),Gb(v.return,l,i),h||(_=null);break t}v=R.next}}else if(m.tag===18){if(_=m.return,_===null)throw Error(n(341));_.lanes|=l,v=_.alternate,v!==null&&(v.lanes|=l),Gb(_,l,i),_=null}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===i){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}}function Kc(i,r,l,h){i=null;for(var m=r,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var _=m.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var R=m.type;fi(m.pendingProps.value,_.value)||(i!==null?i.push(R):i=[R])}}else if(m===ut.current){if(_=m.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Id):i=[Id])}m=m.return}i!==null&&Xb(r,i,l,h),r.flags|=262144}function Hg(i){for(i=i.firstContext;i!==null;){if(!fi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Zo(i){Qo=i,xr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function wn(i){return XE(Qo,i)}function Vg(i,r){return Qo===null&&Zo(i),XE(i,r)}function XE(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},xr===null){if(i===null)throw Error(n(308));xr=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else xr=xr.next=r;return l}var FL=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},zL=s.unstable_scheduleCallback,IL=s.unstable_NormalPriority,qe={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $b(){return{controller:new FL,data:new Map,refCount:0}}function fd(i){i.refCount--,i.refCount===0&&zL(IL,function(){i.controller.abort()})}var pd=null,Yb=0,Wc=0,Qc=null;function BL(i,r){if(pd===null){var l=pd=[];Yb=0,Wc=Q0(),Qc={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Yb++,r.then($E,$E),r}function $E(){if(--Yb===0&&pd!==null){Qc!==null&&(Qc.status="fulfilled");var i=pd;pd=null,Wc=0,Qc=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function UL(i,r){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){h.status="fulfilled",h.value=r;for(var m=0;m<l.length;m++)(0,l[m])(r)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var YE=F.S;F.S=function(i,r){N1=yn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&BL(i,r),YE!==null&&YE(i,r)};var Jo=j(null);function Kb(){var i=Jo.current;return i!==null?i:we.pooledCache}function qg(i,r){r===null?tt(Jo,Jo.current):tt(Jo,r.pool)}function KE(){var i=Kb();return i===null?null:{parent:qe._currentValue,pool:i}}var Zc=Error(n(460)),Wb=Error(n(474)),Gg=Error(n(542)),Xg={then:function(){}};function WE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function QE(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(yr,yr),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,JE(i),i;default:if(typeof r.status=="string")r.then(yr,yr);else{if(i=we,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=r,i.status="pending",i.then(function(h){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=h}},function(h){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,JE(i),i}throw el=r,Zc}}function tl(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(el=l,Zc):l}}var el=null;function ZE(){if(el===null)throw Error(n(459));var i=el;return el=null,i}function JE(i){if(i===Zc||i===Gg)throw Error(n(483))}var Jc=null,gd=0;function $g(i){var r=gd;return gd+=1,Jc===null&&(Jc=[]),QE(Jc,i,r)}function md(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Yg(i,r){throw r.$$typeof===b?Error(n(525)):(i=Object.prototype.toString.call(r),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function tS(i){function r(V,I){if(i){var $=V.deletions;$===null?(V.deletions=[I],V.flags|=16):$.push(I)}}function l(V,I){if(!i)return null;for(;I!==null;)r(V,I),I=I.sibling;return null}function h(V){for(var I=new Map;V!==null;)V.key!==null?I.set(V.key,V):I.set(V.index,V),V=V.sibling;return I}function m(V,I){return V=br(V,I),V.index=0,V.sibling=null,V}function v(V,I,$){return V.index=$,i?($=V.alternate,$!==null?($=$.index,$<I?(V.flags|=67108866,I):$):(V.flags|=67108866,I)):(V.flags|=1048576,I)}function _(V){return i&&V.alternate===null&&(V.flags|=67108866),V}function R(V,I,$,it){return I===null||I.tag!==6?(I=zb($,V.mode,it),I.return=V,I):(I=m(I,$),I.return=V,I)}function P(V,I,$,it){var Et=$.type;return Et===E?et(V,I,$.props.children,it,$.key):I!==null&&(I.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===H&&tl(Et)===I.type)?(I=m(I,$.props),md(I,$),I.return=V,I):(I=Bg($.type,$.key,$.props,null,V.mode,it),md(I,$),I.return=V,I)}function Y(V,I,$,it){return I===null||I.tag!==4||I.stateNode.containerInfo!==$.containerInfo||I.stateNode.implementation!==$.implementation?(I=Ib($,V.mode,it),I.return=V,I):(I=m(I,$.children||[]),I.return=V,I)}function et(V,I,$,it,Et){return I===null||I.tag!==7?(I=Ko($,V.mode,it,Et),I.return=V,I):(I=m(I,$),I.return=V,I)}function st(V,I,$){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=zb(""+I,V.mode,$),I.return=V,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case w:return $=Bg(I.type,I.key,I.props,null,V.mode,$),md($,I),$.return=V,$;case A:return I=Ib(I,V.mode,$),I.return=V,I;case H:return I=tl(I),st(V,I,$)}if(J(I)||ot(I))return I=Ko(I,V.mode,$,null),I.return=V,I;if(typeof I.then=="function")return st(V,$g(I),$);if(I.$$typeof===L)return st(V,Vg(V,I),$);Yg(V,I)}return null}function K(V,I,$,it){var Et=I!==null?I.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Et!==null?null:R(V,I,""+$,it);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return $.key===Et?P(V,I,$,it):null;case A:return $.key===Et?Y(V,I,$,it):null;case H:return $=tl($),K(V,I,$,it)}if(J($)||ot($))return Et!==null?null:et(V,I,$,it,null);if(typeof $.then=="function")return K(V,I,$g($),it);if($.$$typeof===L)return K(V,I,Vg(V,$),it);Yg(V,$)}return null}function Z(V,I,$,it,Et){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return V=V.get($)||null,R(I,V,""+it,Et);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case w:return V=V.get(it.key===null?$:it.key)||null,P(I,V,it,Et);case A:return V=V.get(it.key===null?$:it.key)||null,Y(I,V,it,Et);case H:return it=tl(it),Z(V,I,$,it,Et)}if(J(it)||ot(it))return V=V.get($)||null,et(I,V,it,Et,null);if(typeof it.then=="function")return Z(V,I,$,$g(it),Et);if(it.$$typeof===L)return Z(V,I,$,Vg(I,it),Et);Yg(I,it)}return null}function mt(V,I,$,it){for(var Et=null,ne=null,xt=I,jt=I=0,Yt=null;xt!==null&&jt<$.length;jt++){xt.index>jt?(Yt=xt,xt=null):Yt=xt.sibling;var ie=K(V,xt,$[jt],it);if(ie===null){xt===null&&(xt=Yt);break}i&&xt&&ie.alternate===null&&r(V,xt),I=v(ie,I,jt),ne===null?Et=ie:ne.sibling=ie,ne=ie,xt=Yt}if(jt===$.length)return l(V,xt),Kt&&wr(V,jt),Et;if(xt===null){for(;jt<$.length;jt++)xt=st(V,$[jt],it),xt!==null&&(I=v(xt,I,jt),ne===null?Et=xt:ne.sibling=xt,ne=xt);return Kt&&wr(V,jt),Et}for(xt=h(xt);jt<$.length;jt++)Yt=Z(xt,V,jt,$[jt],it),Yt!==null&&(i&&Yt.alternate!==null&&xt.delete(Yt.key===null?jt:Yt.key),I=v(Yt,I,jt),ne===null?Et=Yt:ne.sibling=Yt,ne=Yt);return i&&xt.forEach(function(Qa){return r(V,Qa)}),Kt&&wr(V,jt),Et}function Tt(V,I,$,it){if($==null)throw Error(n(151));for(var Et=null,ne=null,xt=I,jt=I=0,Yt=null,ie=$.next();xt!==null&&!ie.done;jt++,ie=$.next()){xt.index>jt?(Yt=xt,xt=null):Yt=xt.sibling;var Qa=K(V,xt,ie.value,it);if(Qa===null){xt===null&&(xt=Yt);break}i&&xt&&Qa.alternate===null&&r(V,xt),I=v(Qa,I,jt),ne===null?Et=Qa:ne.sibling=Qa,ne=Qa,xt=Yt}if(ie.done)return l(V,xt),Kt&&wr(V,jt),Et;if(xt===null){for(;!ie.done;jt++,ie=$.next())ie=st(V,ie.value,it),ie!==null&&(I=v(ie,I,jt),ne===null?Et=ie:ne.sibling=ie,ne=ie);return Kt&&wr(V,jt),Et}for(xt=h(xt);!ie.done;jt++,ie=$.next())ie=Z(xt,V,jt,ie.value,it),ie!==null&&(i&&ie.alternate!==null&&xt.delete(ie.key===null?jt:ie.key),I=v(ie,I,jt),ne===null?Et=ie:ne.sibling=ie,ne=ie);return i&&xt.forEach(function(ZO){return r(V,ZO)}),Kt&&wr(V,jt),Et}function me(V,I,$,it){if(typeof $=="object"&&$!==null&&$.type===E&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case w:t:{for(var Et=$.key;I!==null;){if(I.key===Et){if(Et=$.type,Et===E){if(I.tag===7){l(V,I.sibling),it=m(I,$.props.children),it.return=V,V=it;break t}}else if(I.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===H&&tl(Et)===I.type){l(V,I.sibling),it=m(I,$.props),md(it,$),it.return=V,V=it;break t}l(V,I);break}else r(V,I);I=I.sibling}$.type===E?(it=Ko($.props.children,V.mode,it,$.key),it.return=V,V=it):(it=Bg($.type,$.key,$.props,null,V.mode,it),md(it,$),it.return=V,V=it)}return _(V);case A:t:{for(Et=$.key;I!==null;){if(I.key===Et)if(I.tag===4&&I.stateNode.containerInfo===$.containerInfo&&I.stateNode.implementation===$.implementation){l(V,I.sibling),it=m(I,$.children||[]),it.return=V,V=it;break t}else{l(V,I);break}else r(V,I);I=I.sibling}it=Ib($,V.mode,it),it.return=V,V=it}return _(V);case H:return $=tl($),me(V,I,$,it)}if(J($))return mt(V,I,$,it);if(ot($)){if(Et=ot($),typeof Et!="function")throw Error(n(150));return $=Et.call($),Tt(V,I,$,it)}if(typeof $.then=="function")return me(V,I,$g($),it);if($.$$typeof===L)return me(V,I,Vg(V,$),it);Yg(V,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,I!==null&&I.tag===6?(l(V,I.sibling),it=m(I,$),it.return=V,V=it):(l(V,I),it=zb($,V.mode,it),it.return=V,V=it),_(V)):l(V,I)}return function(V,I,$,it){try{gd=0;var Et=me(V,I,$,it);return Jc=null,Et}catch(xt){if(xt===Zc||xt===Gg)throw xt;var ne=pi(29,xt,null,V.mode);return ne.lanes=it,ne.return=V,ne}finally{}}}var nl=tS(!0),eS=tS(!1),Oa=!1;function Qb(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zb(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ja(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Pa(i,r,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ae&2)!==0){var m=h.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),h.pending=r,r=Ig(i),zE(i,null,l),r}return zg(i,h,r,l),Ig(i)}function yd(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,X_(i,l)}}function Jb(i,r){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?m=v=_:v=v.next=_,l=l.next}while(l!==null);v===null?m=v=r:v=v.next=r}else m=v=r;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var t0=!1;function vd(){if(t0){var i=Qc;if(i!==null)throw i}}function bd(i,r,l,h){t0=!1;var m=i.updateQueue;Oa=!1;var v=m.firstBaseUpdate,_=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var P=R,Y=P.next;P.next=null,_===null?v=Y:_.next=Y,_=P;var et=i.alternate;et!==null&&(et=et.updateQueue,R=et.lastBaseUpdate,R!==_&&(R===null?et.firstBaseUpdate=Y:R.next=Y,et.lastBaseUpdate=P))}if(v!==null){var st=m.baseState;_=0,et=Y=P=null,R=v;do{var K=R.lane&-536870913,Z=K!==R.lane;if(Z?($t&K)===K:(h&K)===K){K!==0&&K===Wc&&(t0=!0),et!==null&&(et=et.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var mt=i,Tt=R;K=r;var me=l;switch(Tt.tag){case 1:if(mt=Tt.payload,typeof mt=="function"){st=mt.call(me,st,K);break t}st=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=Tt.payload,K=typeof mt=="function"?mt.call(me,st,K):mt,K==null)break t;st=y({},st,K);break t;case 2:Oa=!0}}K=R.callback,K!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=m.callbacks,Z===null?m.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:R.tag,payload:R.payload,callback:R.callback,next:null},et===null?(Y=et=Z,P=st):et=et.next=Z,_|=K;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;Z=R,R=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);et===null&&(P=st),m.baseState=P,m.firstBaseUpdate=Y,m.lastBaseUpdate=et,v===null&&(m.shared.lanes=0),Ua|=_,i.lanes=_,i.memoizedState=st}}function nS(i,r){if(typeof i!="function")throw Error(n(191,i));i.call(r)}function iS(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)nS(l[i],r)}var tu=j(null),Kg=j(0);function sS(i,r){i=Nr,tt(Kg,i),tt(tu,r),Nr=i|r.baseLanes}function e0(){tt(Kg,Nr),tt(tu,tu.current)}function n0(){Nr=Kg.current,G(tu),G(Kg)}var gi=j(null),Gi=null;function Fa(i){var r=i.alternate;tt(Be,Be.current&1),tt(gi,i),Gi===null&&(r===null||tu.current!==null||r.memoizedState!==null)&&(Gi=i)}function i0(i){tt(Be,Be.current),tt(gi,i),Gi===null&&(Gi=i)}function rS(i){i.tag===22?(tt(Be,Be.current),tt(gi,i),Gi===null&&(Gi=i)):za()}function za(){tt(Be,Be.current),tt(gi,gi.current)}function mi(i){G(gi),Gi===i&&(Gi=null),G(Be)}var Be=j(0);function Wg(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||cw(l)||uw(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var _r=0,Lt=null,pe=null,Ge=null,Qg=!1,eu=!1,il=!1,Zg=0,wd=0,nu=null,HL=0;function Pe(){throw Error(n(321))}function s0(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!fi(i[l],r[l]))return!1;return!0}function r0(i,r,l,h,m,v){return _r=v,Lt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,F.H=i===null||i.memoizedState===null?HS:w0,il=!1,v=l(h,m),il=!1,eu&&(v=oS(r,l,h,m)),aS(i),v}function aS(i){F.H=_d;var r=pe!==null&&pe.next!==null;if(_r=0,Ge=pe=Lt=null,Qg=!1,wd=0,nu=null,r)throw Error(n(300));i===null||Xe||(i=i.dependencies,i!==null&&Hg(i)&&(Xe=!0))}function oS(i,r,l,h){Lt=i;var m=0;do{if(eu&&(nu=null),wd=0,eu=!1,25<=m)throw Error(n(301));if(m+=1,Ge=pe=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}F.H=VS,v=r(l,h)}while(eu);return v}function VL(){var i=F.H,r=i.useState()[0];return r=typeof r.then=="function"?xd(r):r,i=i.useState()[0],(pe!==null?pe.memoizedState:null)!==i&&(Lt.flags|=1024),r}function a0(){var i=Zg!==0;return Zg=0,i}function o0(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function l0(i){if(Qg){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Qg=!1}_r=0,Ge=pe=Lt=null,eu=!1,wd=Zg=0,nu=null}function Gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Lt.memoizedState=Ge=i:Ge=Ge.next=i,Ge}function Ue(){if(pe===null){var i=Lt.alternate;i=i!==null?i.memoizedState:null}else i=pe.next;var r=Ge===null?Lt.memoizedState:Ge.next;if(r!==null)Ge=r,pe=i;else{if(i===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));pe=i,i={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},Ge===null?Lt.memoizedState=Ge=i:Ge=Ge.next=i}return Ge}function Jg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xd(i){var r=wd;return wd+=1,nu===null&&(nu=[]),i=QE(nu,i,r),r=Lt,(Ge===null?r.memoizedState:Ge.next)===null&&(r=r.alternate,F.H=r===null||r.memoizedState===null?HS:w0),i}function tm(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return xd(i);if(i.$$typeof===L)return wn(i)}throw Error(n(438,String(i)))}function c0(i){var r=null,l=Lt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var h=Lt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Jg(),Lt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),h=0;h<i;h++)l[h]=Q;return r.index++,l}function Er(i,r){return typeof r=="function"?r(i):r}function em(i){var r=Ue();return u0(r,pe,i)}function u0(i,r,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var m=i.baseQueue,v=h.pending;if(v!==null){if(m!==null){var _=m.next;m.next=v.next,v.next=_}r.baseQueue=m=v,h.pending=null}if(v=i.baseState,m===null)i.memoizedState=v;else{r=m.next;var R=_=null,P=null,Y=r,et=!1;do{var st=Y.lane&-536870913;if(st!==Y.lane?($t&st)===st:(_r&st)===st){var K=Y.revertLane;if(K===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),st===Wc&&(et=!0);else if((_r&K)===K){Y=Y.next,K===Wc&&(et=!0);continue}else st={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(R=P=st,_=v):P=P.next=st,Lt.lanes|=K,Ua|=K;st=Y.action,il&&l(v,st),v=Y.hasEagerState?Y.eagerState:l(v,st)}else K={lane:st,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(R=P=K,_=v):P=P.next=K,Lt.lanes|=st,Ua|=st;Y=Y.next}while(Y!==null&&Y!==r);if(P===null?_=v:P.next=R,!fi(v,i.memoizedState)&&(Xe=!0,et&&(l=Qc,l!==null)))throw l;i.memoizedState=v,i.baseState=_,i.baseQueue=P,h.lastRenderedState=v}return m===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function h0(i){var r=Ue(),l=r.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,m=l.pending,v=r.memoizedState;if(m!==null){l.pending=null;var _=m=m.next;do v=i(v,_.action),_=_.next;while(_!==m);fi(v,r.memoizedState)||(Xe=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,h]}function lS(i,r,l){var h=Lt,m=Ue(),v=Kt;if(v){if(l===void 0)throw Error(n(407));l=l()}else l=r();var _=!fi((pe||m).memoizedState,l);if(_&&(m.memoizedState=l,Xe=!0),m=m.queue,p0(hS.bind(null,h,m,i),[i]),m.getSnapshot!==r||_||Ge!==null&&Ge.memoizedState.tag&1){if(h.flags|=2048,iu(9,{destroy:void 0},uS.bind(null,h,m,l,r),null),we===null)throw Error(n(349));v||(_r&127)!==0||cS(h,r,l)}return l}function cS(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=Lt.updateQueue,r===null?(r=Jg(),Lt.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function uS(i,r,l,h){r.value=l,r.getSnapshot=h,dS(r)&&fS(i)}function hS(i,r,l){return l(function(){dS(r)&&fS(i)})}function dS(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!fi(i,l)}catch{return!0}}function fS(i){var r=Yo(i,2);r!==null&&si(r,i,2)}function d0(i){var r=Gn();if(typeof i=="function"){var l=i;if(i=l(),il){Os(!0);try{l()}finally{Os(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:i},r}function pS(i,r,l,h){return i.baseState=l,u0(i,pe,typeof h=="function"?h:Er)}function qL(i,r,l,h,m){if(sm(i))throw Error(n(485));if(i=r.action,i!==null){var v={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){v.listeners.push(_)}};F.T!==null?l(!0):v.isTransition=!1,h(v),l=r.pending,l===null?(v.next=r.pending=v,gS(r,v)):(v.next=l.next,r.pending=l.next=v)}}function gS(i,r){var l=r.action,h=r.payload,m=i.state;if(r.isTransition){var v=F.T,_={};F.T=_;try{var R=l(m,h),P=F.S;P!==null&&P(_,R),mS(i,r,R)}catch(Y){f0(i,r,Y)}finally{v!==null&&_.types!==null&&(v.types=_.types),F.T=v}}else try{v=l(m,h),mS(i,r,v)}catch(Y){f0(i,r,Y)}}function mS(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){yS(i,r,h)},function(h){return f0(i,r,h)}):yS(i,r,l)}function yS(i,r,l){r.status="fulfilled",r.value=l,vS(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,gS(i,l)))}function f0(i,r,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=l,vS(r),r=r.next;while(r!==h)}i.action=null}function vS(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function bS(i,r){return r}function wS(i,r){if(Kt){var l=we.formState;if(l!==null){t:{var h=Lt;if(Kt){if(Te){e:{for(var m=Te,v=qi;m.nodeType!==8;){if(!v){m=null;break e}if(m=Xi(m.nextSibling),m===null){m=null;break e}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){Te=Xi(m.nextSibling),h=m.data==="F!";break t}}Da(h)}h=!1}h&&(r=l[0])}}return l=Gn(),l.memoizedState=l.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bS,lastRenderedState:r},l.queue=h,l=IS.bind(null,Lt,h),h.dispatch=l,h=d0(!1),v=b0.bind(null,Lt,!1,h.queue),h=Gn(),m={state:r,dispatch:null,action:i,pending:null},h.queue=m,l=qL.bind(null,Lt,m,v,l),m.dispatch=l,h.memoizedState=i,[r,l,!1]}function xS(i){var r=Ue();return AS(r,pe,i)}function AS(i,r,l){if(r=u0(i,r,bS)[0],i=em(Er)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=xd(r)}catch(_){throw _===Zc?Gg:_}else h=r;r=Ue();var m=r.queue,v=m.dispatch;return l!==r.memoizedState&&(Lt.flags|=2048,iu(9,{destroy:void 0},GL.bind(null,m,l),null)),[h,v,i]}function GL(i,r){i.action=r}function _S(i){var r=Ue(),l=pe;if(l!==null)return AS(r,l,i);Ue(),r=r.memoizedState,l=Ue();var h=l.queue.dispatch;return l.memoizedState=i,[r,h,!1]}function iu(i,r,l,h){return i={tag:i,create:l,deps:h,inst:r,next:null},r=Lt.updateQueue,r===null&&(r=Jg(),Lt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,r.lastEffect=i),i}function ES(){return Ue().memoizedState}function nm(i,r,l,h){var m=Gn();Lt.flags|=i,m.memoizedState=iu(1|r,{destroy:void 0},l,h===void 0?null:h)}function im(i,r,l,h){var m=Ue();h=h===void 0?null:h;var v=m.memoizedState.inst;pe!==null&&h!==null&&s0(h,pe.memoizedState.deps)?m.memoizedState=iu(r,v,l,h):(Lt.flags|=i,m.memoizedState=iu(1|r,v,l,h))}function SS(i,r){nm(8390656,8,i,r)}function p0(i,r){im(2048,8,i,r)}function XL(i){Lt.flags|=4;var r=Lt.updateQueue;if(r===null)r=Jg(),Lt.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function CS(i){var r=Ue().memoizedState;return XL({ref:r,nextImpl:i}),function(){if((ae&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function TS(i,r){return im(4,2,i,r)}function kS(i,r){return im(4,4,i,r)}function RS(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function MS(i,r,l){l=l!=null?l.concat([i]):null,im(4,4,RS.bind(null,r,i),l)}function g0(){}function NS(i,r){var l=Ue();r=r===void 0?null:r;var h=l.memoizedState;return r!==null&&s0(r,h[1])?h[0]:(l.memoizedState=[i,r],i)}function DS(i,r){var l=Ue();r=r===void 0?null:r;var h=l.memoizedState;if(r!==null&&s0(r,h[1]))return h[0];if(h=i(),il){Os(!0);try{i()}finally{Os(!1)}}return l.memoizedState=[h,r],h}function m0(i,r,l){return l===void 0||(_r&1073741824)!==0&&($t&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=L1(),Lt.lanes|=i,Ua|=i,l)}function LS(i,r,l,h){return fi(l,r)?l:tu.current!==null?(i=m0(i,l,h),fi(i,r)||(Xe=!0),i):(_r&42)===0||(_r&1073741824)!==0&&($t&261930)===0?(Xe=!0,i.memoizedState=l):(i=L1(),Lt.lanes|=i,Ua|=i,r)}function OS(i,r,l,h,m){var v=q.p;q.p=v!==0&&8>v?v:8;var _=F.T,R={};F.T=R,b0(i,!1,r,l);try{var P=m(),Y=F.S;if(Y!==null&&Y(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var et=UL(P,h);Ad(i,r,et,bi(i))}else Ad(i,r,h,bi(i))}catch(st){Ad(i,r,{then:function(){},status:"rejected",reason:st},bi())}finally{q.p=v,_!==null&&R.types!==null&&(_.types=R.types),F.T=_}}function $L(){}function y0(i,r,l,h){if(i.tag!==5)throw Error(n(476));var m=jS(i).queue;OS(i,m,r,X,l===null?$L:function(){return PS(i),l(h)})}function jS(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:X},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function PS(i){var r=jS(i);r.next===null&&(r=i.alternate.memoizedState),Ad(i,r.next.queue,{},bi())}function v0(){return wn(Id)}function FS(){return Ue().memoizedState}function zS(){return Ue().memoizedState}function YL(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=bi();i=ja(l);var h=Pa(r,i,l);h!==null&&(si(h,r,l),yd(h,r,l)),r={cache:$b()},i.payload=r;return}r=r.return}}function KL(i,r,l){var h=bi();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},sm(i)?BS(r,l):(l=Pb(i,r,l,h),l!==null&&(si(l,i,h),US(l,r,h)))}function IS(i,r,l){var h=bi();Ad(i,r,l,h)}function Ad(i,r,l,h){var m={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(sm(i))BS(r,m);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var _=r.lastRenderedState,R=v(_,l);if(m.hasEagerState=!0,m.eagerState=R,fi(R,_))return zg(i,r,m,0),we===null&&Fg(),!1}catch{}finally{}if(l=Pb(i,r,m,h),l!==null)return si(l,i,h),US(l,r,h),!0}return!1}function b0(i,r,l,h){if(h={lane:2,revertLane:Q0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},sm(i)){if(r)throw Error(n(479))}else r=Pb(i,l,h,2),r!==null&&si(r,i,2)}function sm(i){var r=i.alternate;return i===Lt||r!==null&&r===Lt}function BS(i,r){eu=Qg=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function US(i,r,l){if((l&4194048)!==0){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,X_(i,l)}}var _d={readContext:wn,use:tm,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useLayoutEffect:Pe,useInsertionEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useSyncExternalStore:Pe,useId:Pe,useHostTransitionStatus:Pe,useFormState:Pe,useActionState:Pe,useOptimistic:Pe,useMemoCache:Pe,useCacheRefresh:Pe};_d.useEffectEvent=Pe;var HS={readContext:wn,use:tm,useCallback:function(i,r){return Gn().memoizedState=[i,r===void 0?null:r],i},useContext:wn,useEffect:SS,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,nm(4194308,4,RS.bind(null,r,i),l)},useLayoutEffect:function(i,r){return nm(4194308,4,i,r)},useInsertionEffect:function(i,r){nm(4,2,i,r)},useMemo:function(i,r){var l=Gn();r=r===void 0?null:r;var h=i();if(il){Os(!0);try{i()}finally{Os(!1)}}return l.memoizedState=[h,r],h},useReducer:function(i,r,l){var h=Gn();if(l!==void 0){var m=l(r);if(il){Os(!0);try{l(r)}finally{Os(!1)}}}else m=r;return h.memoizedState=h.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},h.queue=i,i=i.dispatch=KL.bind(null,Lt,i),[h.memoizedState,i]},useRef:function(i){var r=Gn();return i={current:i},r.memoizedState=i},useState:function(i){i=d0(i);var r=i.queue,l=IS.bind(null,Lt,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:g0,useDeferredValue:function(i,r){var l=Gn();return m0(l,i,r)},useTransition:function(){var i=d0(!1);return i=OS.bind(null,Lt,i.queue,!0,!1),Gn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var h=Lt,m=Gn();if(Kt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=r(),we===null)throw Error(n(349));($t&127)!==0||cS(h,r,l)}m.memoizedState=l;var v={value:l,getSnapshot:r};return m.queue=v,SS(hS.bind(null,h,v,i),[i]),h.flags|=2048,iu(9,{destroy:void 0},uS.bind(null,h,v,l,r),null),l},useId:function(){var i=Gn(),r=we.identifierPrefix;if(Kt){var l=Ps,h=js;l=(h&~(1<<32-qn(h)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Zg++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=HL++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:v0,useFormState:wS,useActionState:wS,useOptimistic:function(i){var r=Gn();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=b0.bind(null,Lt,!0,l),l.dispatch=r,[i,r]},useMemoCache:c0,useCacheRefresh:function(){return Gn().memoizedState=YL.bind(null,Lt)},useEffectEvent:function(i){var r=Gn(),l={impl:i};return r.memoizedState=l,function(){if((ae&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},w0={readContext:wn,use:tm,useCallback:NS,useContext:wn,useEffect:p0,useImperativeHandle:MS,useInsertionEffect:TS,useLayoutEffect:kS,useMemo:DS,useReducer:em,useRef:ES,useState:function(){return em(Er)},useDebugValue:g0,useDeferredValue:function(i,r){var l=Ue();return LS(l,pe.memoizedState,i,r)},useTransition:function(){var i=em(Er)[0],r=Ue().memoizedState;return[typeof i=="boolean"?i:xd(i),r]},useSyncExternalStore:lS,useId:FS,useHostTransitionStatus:v0,useFormState:xS,useActionState:xS,useOptimistic:function(i,r){var l=Ue();return pS(l,pe,i,r)},useMemoCache:c0,useCacheRefresh:zS};w0.useEffectEvent=CS;var VS={readContext:wn,use:tm,useCallback:NS,useContext:wn,useEffect:p0,useImperativeHandle:MS,useInsertionEffect:TS,useLayoutEffect:kS,useMemo:DS,useReducer:h0,useRef:ES,useState:function(){return h0(Er)},useDebugValue:g0,useDeferredValue:function(i,r){var l=Ue();return pe===null?m0(l,i,r):LS(l,pe.memoizedState,i,r)},useTransition:function(){var i=h0(Er)[0],r=Ue().memoizedState;return[typeof i=="boolean"?i:xd(i),r]},useSyncExternalStore:lS,useId:FS,useHostTransitionStatus:v0,useFormState:_S,useActionState:_S,useOptimistic:function(i,r){var l=Ue();return pe!==null?pS(l,pe,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:c0,useCacheRefresh:zS};VS.useEffectEvent=CS;function x0(i,r,l,h){r=i.memoizedState,l=l(h,r),l=l==null?r:y({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var A0={enqueueSetState:function(i,r,l){i=i._reactInternals;var h=bi(),m=ja(h);m.payload=r,l!=null&&(m.callback=l),r=Pa(i,m,h),r!==null&&(si(r,i,h),yd(r,i,h))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var h=bi(),m=ja(h);m.tag=1,m.payload=r,l!=null&&(m.callback=l),r=Pa(i,m,h),r!==null&&(si(r,i,h),yd(r,i,h))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=bi(),h=ja(l);h.tag=2,r!=null&&(h.callback=r),r=Pa(i,h,l),r!==null&&(si(r,i,l),yd(r,i,l))}};function qS(i,r,l,h,m,v,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,_):r.prototype&&r.prototype.isPureReactComponent?!cd(l,h)||!cd(m,v):!0}function GS(i,r,l,h){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,h),r.state!==i&&A0.enqueueReplaceState(r,r.state,null)}function sl(i,r){var l=r;if("ref"in r){l={};for(var h in r)h!=="ref"&&(l[h]=r[h])}if(i=i.defaultProps){l===r&&(l=y({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}function XS(i){Pg(i)}function $S(i){console.error(i)}function YS(i){Pg(i)}function rm(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function KS(i,r,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function _0(i,r,l){return l=ja(l),l.tag=3,l.payload={element:null},l.callback=function(){rm(i,r)},l}function WS(i){return i=ja(i),i.tag=3,i}function QS(i,r,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var v=h.value;i.payload=function(){return m(v)},i.callback=function(){KS(r,l,h)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){KS(r,l,h),typeof m!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function WL(i,r,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=l.alternate,r!==null&&Kc(r,l,m,!0),l=gi.current,l!==null){switch(l.tag){case 31:case 13:return Gi===null?ym():l.alternate===null&&Fe===0&&(Fe=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===Xg?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([h]):r.add(h),Y0(i,h,m)),!1;case 22:return l.flags|=65536,h===Xg?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([h]):l.add(h)),Y0(i,h,m)),!1}throw Error(n(435,l.tag))}return Y0(i,h,m),ym(),!1}if(Kt)return r=gi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,h!==Hb&&(i=Error(n(422),{cause:h}),dd(Ui(i,l)))):(h!==Hb&&(r=Error(n(423),{cause:h}),dd(Ui(r,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,h=Ui(h,l),m=_0(i.stateNode,h,m),Jb(i,m),Fe!==4&&(Fe=2)),!1;var v=Error(n(520),{cause:h});if(v=Ui(v,l),Nd===null?Nd=[v]:Nd.push(v),Fe!==4&&(Fe=2),r===null)return!0;h=Ui(h,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=_0(l.stateNode,h,i),Jb(l,i),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ha===null||!Ha.has(v))))return l.flags|=65536,m&=-m,l.lanes|=m,m=WS(m),QS(m,i,l,h),Jb(l,m),!1}l=l.return}while(l!==null);return!1}var E0=Error(n(461)),Xe=!1;function xn(i,r,l,h){r.child=i===null?eS(r,null,l,h):nl(r,i.child,l,h)}function ZS(i,r,l,h,m){l=l.render;var v=r.ref;if("ref"in h){var _={};for(var R in h)R!=="ref"&&(_[R]=h[R])}else _=h;return Zo(r),h=r0(i,r,l,_,v,m),R=a0(),i!==null&&!Xe?(o0(i,r,m),Sr(i,r,m)):(Kt&&R&&Bb(r),r.flags|=1,xn(i,r,h,m),r.child)}function JS(i,r,l,h,m){if(i===null){var v=l.type;return typeof v=="function"&&!Fb(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,t1(i,r,v,h,m)):(i=Bg(l.type,null,h,r,r.mode,m),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!D0(i,m)){var _=v.memoizedProps;if(l=l.compare,l=l!==null?l:cd,l(_,h)&&i.ref===r.ref)return Sr(i,r,m)}return r.flags|=1,i=br(v,h),i.ref=r.ref,i.return=r,r.child=i}function t1(i,r,l,h,m){if(i!==null){var v=i.memoizedProps;if(cd(v,h)&&i.ref===r.ref)if(Xe=!1,r.pendingProps=h=v,D0(i,m))(i.flags&131072)!==0&&(Xe=!0);else return r.lanes=i.lanes,Sr(i,r,m)}return S0(i,r,l,h,m)}function e1(i,r,l,h){var m=h.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,i!==null){for(h=r.child=i.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~v}else h=0,r.child=null;return n1(i,r,v,l,h)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&qg(r,v!==null?v.cachePool:null),v!==null?sS(r,v):e0(),rS(r);else return h=r.lanes=536870912,n1(i,r,v!==null?v.baseLanes|l:l,l,h)}else v!==null?(qg(r,v.cachePool),sS(r,v),za(),r.memoizedState=null):(i!==null&&qg(r,null),e0(),za());return xn(i,r,m,l),r.child}function Ed(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function n1(i,r,l,h,m){var v=Kb();return v=v===null?null:{parent:qe._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},i!==null&&qg(r,null),e0(),rS(r),i!==null&&Kc(i,r,h,!0),r.childLanes=m,null}function am(i,r){return r=lm({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function i1(i,r,l){return nl(r,i.child,null,l),i=am(r,r.pendingProps),i.flags|=2,mi(r),r.memoizedState=null,i}function QL(i,r,l){var h=r.pendingProps,m=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Kt){if(h.mode==="hidden")return i=am(r,h),r.lanes=536870912,Ed(null,i);if(i0(r),(i=Te)?(i=gC(i,qi),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ma!==null?{id:js,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},l=BE(i),l.return=r,r.child=l,bn=r,Te=null)):i=null,i===null)throw Da(r);return r.lanes=536870912,null}return am(r,h)}var v=i.memoizedState;if(v!==null){var _=v.dehydrated;if(i0(r),m)if(r.flags&256)r.flags&=-257,r=i1(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(n(558));else if(Xe||Kc(i,r,l,!1),m=(l&i.childLanes)!==0,Xe||m){if(h=we,h!==null&&(_=$_(h,l),_!==0&&_!==v.retryLane))throw v.retryLane=_,Yo(i,_),si(h,i,_),E0;ym(),r=i1(i,r,l)}else i=v.treeContext,Te=Xi(_.nextSibling),bn=r,Kt=!0,Na=null,qi=!1,i!==null&&VE(r,i),r=am(r,h),r.flags|=4096;return r}return i=br(i.child,{mode:h.mode,children:h.children}),i.ref=r.ref,r.child=i,i.return=r,i}function om(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function S0(i,r,l,h,m){return Zo(r),l=r0(i,r,l,h,void 0,m),h=a0(),i!==null&&!Xe?(o0(i,r,m),Sr(i,r,m)):(Kt&&h&&Bb(r),r.flags|=1,xn(i,r,l,m),r.child)}function s1(i,r,l,h,m,v){return Zo(r),r.updateQueue=null,l=oS(r,h,l,m),aS(i),h=a0(),i!==null&&!Xe?(o0(i,r,v),Sr(i,r,v)):(Kt&&h&&Bb(r),r.flags|=1,xn(i,r,l,v),r.child)}function r1(i,r,l,h,m){if(Zo(r),r.stateNode===null){var v=Gc,_=l.contextType;typeof _=="object"&&_!==null&&(v=wn(_)),v=new l(h,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=A0,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=h,v.state=r.memoizedState,v.refs={},Qb(r),_=l.contextType,v.context=typeof _=="object"&&_!==null?wn(_):Gc,v.state=r.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(x0(r,l,_,h),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(_=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),_!==v.state&&A0.enqueueReplaceState(v,v.state,null),bd(r,h,v,m),vd(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(i===null){v=r.stateNode;var R=r.memoizedProps,P=sl(l,R);v.props=P;var Y=v.context,et=l.contextType;_=Gc,typeof et=="object"&&et!==null&&(_=wn(et));var st=l.getDerivedStateFromProps;et=typeof st=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,et||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||Y!==_)&&GS(r,v,h,_),Oa=!1;var K=r.memoizedState;v.state=K,bd(r,h,v,m),vd(),Y=r.memoizedState,R||K!==Y||Oa?(typeof st=="function"&&(x0(r,l,st,h),Y=r.memoizedState),(P=Oa||qS(r,l,P,h,K,Y,_))?(et||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=Y),v.props=h,v.state=Y,v.context=_,h=P):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{v=r.stateNode,Zb(i,r),_=r.memoizedProps,et=sl(l,_),v.props=et,st=r.pendingProps,K=v.context,Y=l.contextType,P=Gc,typeof Y=="object"&&Y!==null&&(P=wn(Y)),R=l.getDerivedStateFromProps,(Y=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(_!==st||K!==P)&&GS(r,v,h,P),Oa=!1,K=r.memoizedState,v.state=K,bd(r,h,v,m),vd();var Z=r.memoizedState;_!==st||K!==Z||Oa||i!==null&&i.dependencies!==null&&Hg(i.dependencies)?(typeof R=="function"&&(x0(r,l,R,h),Z=r.memoizedState),(et=Oa||qS(r,l,et,h,K,Z,P)||i!==null&&i.dependencies!==null&&Hg(i.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,Z,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,Z,P)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||_===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=Z),v.props=h,v.state=Z,v.context=P,h=et):(typeof v.componentDidUpdate!="function"||_===i.memoizedProps&&K===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&K===i.memoizedState||(r.flags|=1024),h=!1)}return v=h,om(i,r),h=(r.flags&128)!==0,v||h?(v=r.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&h?(r.child=nl(r,i.child,null,m),r.child=nl(r,null,l,m)):xn(i,r,l,m),r.memoizedState=v.state,i=r.child):i=Sr(i,r,m),i}function a1(i,r,l,h){return Wo(),r.flags|=256,xn(i,r,l,h),r.child}var C0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function T0(i){return{baseLanes:i,cachePool:KE()}}function k0(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=vi),i}function o1(i,r,l){var h=r.pendingProps,m=!1,v=(r.flags&128)!==0,_;if((_=v)||(_=i!==null&&i.memoizedState===null?!1:(Be.current&2)!==0),_&&(m=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,i===null){if(Kt){if(m?Fa(r):za(),(i=Te)?(i=gC(i,qi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ma!==null?{id:js,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},l=BE(i),l.return=r,r.child=l,bn=r,Te=null)):i=null,i===null)throw Da(r);return uw(i)?r.lanes=32:r.lanes=536870912,null}var R=h.children;return h=h.fallback,m?(za(),m=r.mode,R=lm({mode:"hidden",children:R},m),h=Ko(h,m,l,null),R.return=r,h.return=r,R.sibling=h,r.child=R,h=r.child,h.memoizedState=T0(l),h.childLanes=k0(i,_,l),r.memoizedState=C0,Ed(null,h)):(Fa(r),R0(r,R))}var P=i.memoizedState;if(P!==null&&(R=P.dehydrated,R!==null)){if(v)r.flags&256?(Fa(r),r.flags&=-257,r=M0(i,r,l)):r.memoizedState!==null?(za(),r.child=i.child,r.flags|=128,r=null):(za(),R=h.fallback,m=r.mode,h=lm({mode:"visible",children:h.children},m),R=Ko(R,m,l,null),R.flags|=2,h.return=r,R.return=r,h.sibling=R,r.child=h,nl(r,i.child,null,l),h=r.child,h.memoizedState=T0(l),h.childLanes=k0(i,_,l),r.memoizedState=C0,r=Ed(null,h));else if(Fa(r),uw(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var Y=_.dgst;_=Y,h=Error(n(419)),h.stack="",h.digest=_,dd({value:h,source:null,stack:null}),r=M0(i,r,l)}else if(Xe||Kc(i,r,l,!1),_=(l&i.childLanes)!==0,Xe||_){if(_=we,_!==null&&(h=$_(_,l),h!==0&&h!==P.retryLane))throw P.retryLane=h,Yo(i,h),si(_,i,h),E0;cw(R)||ym(),r=M0(i,r,l)}else cw(R)?(r.flags|=192,r.child=i.child,r=null):(i=P.treeContext,Te=Xi(R.nextSibling),bn=r,Kt=!0,Na=null,qi=!1,i!==null&&VE(r,i),r=R0(r,h.children),r.flags|=4096);return r}return m?(za(),R=h.fallback,m=r.mode,P=i.child,Y=P.sibling,h=br(P,{mode:"hidden",children:h.children}),h.subtreeFlags=P.subtreeFlags&65011712,Y!==null?R=br(Y,R):(R=Ko(R,m,l,null),R.flags|=2),R.return=r,h.return=r,h.sibling=R,r.child=h,Ed(null,h),h=r.child,R=i.child.memoizedState,R===null?R=T0(l):(m=R.cachePool,m!==null?(P=qe._currentValue,m=m.parent!==P?{parent:P,pool:P}:m):m=KE(),R={baseLanes:R.baseLanes|l,cachePool:m}),h.memoizedState=R,h.childLanes=k0(i,_,l),r.memoizedState=C0,Ed(i.child,h)):(Fa(r),l=i.child,i=l.sibling,l=br(l,{mode:"visible",children:h.children}),l.return=r,l.sibling=null,i!==null&&(_=r.deletions,_===null?(r.deletions=[i],r.flags|=16):_.push(i)),r.child=l,r.memoizedState=null,l)}function R0(i,r){return r=lm({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function lm(i,r){return i=pi(22,i,null,r),i.lanes=0,i}function M0(i,r,l){return nl(r,i.child,null,l),i=R0(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function l1(i,r,l){i.lanes|=r;var h=i.alternate;h!==null&&(h.lanes|=r),Gb(i.return,r,l)}function N0(i,r,l,h,m,v){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m,treeForkCount:v}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=l,_.tailMode=m,_.treeForkCount=v)}function c1(i,r,l){var h=r.pendingProps,m=h.revealOrder,v=h.tail;h=h.children;var _=Be.current,R=(_&2)!==0;if(R?(_=_&1|2,r.flags|=128):_&=1,tt(Be,_),xn(i,r,h,l),h=Kt?hd:0,!R&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&l1(i,l,r);else if(i.tag===19)l1(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(l=r.child,m=null;l!==null;)i=l.alternate,i!==null&&Wg(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=r.child,r.child=null):(m=l.sibling,l.sibling=null),N0(r,!1,m,l,v,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=r.child,r.child=null;m!==null;){if(i=m.alternate,i!==null&&Wg(i)===null){r.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}N0(r,!0,l,null,v,h);break;case"together":N0(r,!1,null,null,void 0,h);break;default:r.memoizedState=null}return r.child}function Sr(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),Ua|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(Kc(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(n(153));if(r.child!==null){for(i=r.child,l=br(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=br(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function D0(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Hg(i)))}function ZL(i,r,l){switch(r.tag){case 3:Gt(r,r.stateNode.containerInfo),La(r,qe,i.memoizedState.cache),Wo();break;case 27:case 5:Xt(r);break;case 4:Gt(r,r.stateNode.containerInfo);break;case 10:La(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,i0(r),null;break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Fa(r),r.flags|=128,null):(l&r.child.childLanes)!==0?o1(i,r,l):(Fa(r),i=Sr(i,r,l),i!==null?i.sibling:null);Fa(r);break;case 19:var m=(i.flags&128)!==0;if(h=(l&r.childLanes)!==0,h||(Kc(i,r,l,!1),h=(l&r.childLanes)!==0),m){if(h)return c1(i,r,l);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),tt(Be,Be.current),h)break;return null;case 22:return r.lanes=0,e1(i,r,l,r.pendingProps);case 24:La(r,qe,i.memoizedState.cache)}return Sr(i,r,l)}function u1(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)Xe=!0;else{if(!D0(i,l)&&(r.flags&128)===0)return Xe=!1,ZL(i,r,l);Xe=(i.flags&131072)!==0}else Xe=!1,Kt&&(r.flags&1048576)!==0&&HE(r,hd,r.index);switch(r.lanes=0,r.tag){case 16:t:{var h=r.pendingProps;if(i=tl(r.elementType),r.type=i,typeof i=="function")Fb(i)?(h=sl(i,h),r.tag=1,r=r1(null,r,i,h,l)):(r.tag=0,r=S0(null,r,i,h,l));else{if(i!=null){var m=i.$$typeof;if(m===z){r.tag=11,r=ZS(null,r,i,h,l);break t}else if(m===O){r.tag=14,r=JS(null,r,i,h,l);break t}}throw r=lt(i)||i,Error(n(306,r,""))}}return r;case 0:return S0(i,r,r.type,r.pendingProps,l);case 1:return h=r.type,m=sl(h,r.pendingProps),r1(i,r,h,m,l);case 3:t:{if(Gt(r,r.stateNode.containerInfo),i===null)throw Error(n(387));h=r.pendingProps;var v=r.memoizedState;m=v.element,Zb(i,r),bd(r,h,null,l);var _=r.memoizedState;if(h=_.cache,La(r,qe,h),h!==v.cache&&Xb(r,[qe],l,!0),vd(),h=_.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=a1(i,r,h,l);break t}else if(h!==m){m=Ui(Error(n(424)),r),dd(m),r=a1(i,r,h,l);break t}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Te=Xi(i.firstChild),bn=r,Kt=!0,Na=null,qi=!0,l=eS(r,null,h,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Wo(),h===m){r=Sr(i,r,l);break t}xn(i,r,h,l)}r=r.child}return r;case 26:return om(i,r),i===null?(l=xC(r.type,null,r.pendingProps,null))?r.memoizedState=l:Kt||(l=r.type,i=r.pendingProps,h=Em(At.current).createElement(l),h[vn]=r,h[Zn]=i,An(h,l,i),un(h),r.stateNode=h):r.memoizedState=xC(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Xt(r),i===null&&Kt&&(h=r.stateNode=vC(r.type,r.pendingProps,At.current),bn=r,qi=!0,m=Te,Xa(r.type)?(hw=m,Te=Xi(h.firstChild)):Te=m),xn(i,r,r.pendingProps.children,l),om(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Kt&&((m=h=Te)&&(h=kO(h,r.type,r.pendingProps,qi),h!==null?(r.stateNode=h,bn=r,Te=Xi(h.firstChild),qi=!1,m=!0):m=!1),m||Da(r)),Xt(r),m=r.type,v=r.pendingProps,_=i!==null?i.memoizedProps:null,h=v.children,aw(m,v)?h=null:_!==null&&aw(m,_)&&(r.flags|=32),r.memoizedState!==null&&(m=r0(i,r,VL,null,null,l),Id._currentValue=m),om(i,r),xn(i,r,h,l),r.child;case 6:return i===null&&Kt&&((i=l=Te)&&(l=RO(l,r.pendingProps,qi),l!==null?(r.stateNode=l,bn=r,Te=null,i=!0):i=!1),i||Da(r)),null;case 13:return o1(i,r,l);case 4:return Gt(r,r.stateNode.containerInfo),h=r.pendingProps,i===null?r.child=nl(r,null,h,l):xn(i,r,h,l),r.child;case 11:return ZS(i,r,r.type,r.pendingProps,l);case 7:return xn(i,r,r.pendingProps,l),r.child;case 8:return xn(i,r,r.pendingProps.children,l),r.child;case 12:return xn(i,r,r.pendingProps.children,l),r.child;case 10:return h=r.pendingProps,La(r,r.type,h.value),xn(i,r,h.children,l),r.child;case 9:return m=r.type._context,h=r.pendingProps.children,Zo(r),m=wn(m),h=h(m),r.flags|=1,xn(i,r,h,l),r.child;case 14:return JS(i,r,r.type,r.pendingProps,l);case 15:return t1(i,r,r.type,r.pendingProps,l);case 19:return c1(i,r,l);case 31:return QL(i,r,l);case 22:return e1(i,r,l,r.pendingProps);case 24:return Zo(r),h=wn(qe),i===null?(m=Kb(),m===null&&(m=we,v=$b(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=l),m=v),r.memoizedState={parent:h,cache:m},Qb(r),La(r,qe,m)):((i.lanes&l)!==0&&(Zb(i,r),bd(r,null,null,l),vd()),m=i.memoizedState,v=r.memoizedState,m.parent!==h?(m={parent:h,cache:h},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),La(r,qe,h)):(h=v.cache,La(r,qe,h),h!==m.cache&&Xb(r,[qe],l,!0))),xn(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function Cr(i){i.flags|=4}function L0(i,r,l,h,m){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(F1())i.flags|=8192;else throw el=Xg,Wb}else i.flags&=-16777217}function h1(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!CC(r))if(F1())i.flags|=8192;else throw el=Xg,Wb}function cm(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Ce():536870912,i.lanes|=r,ou|=r)}function Sd(i,r){if(!Kt)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function ke(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(r)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=l,r}function JL(i,r,l){var h=r.pendingProps;switch(Ub(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(r),null;case 1:return ke(r),null;case 3:return l=r.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Ar(qe),Pt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Yc(r)?Cr(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Vb())),ke(r),null;case 26:var m=r.type,v=r.memoizedState;return i===null?(Cr(r),v!==null?(ke(r),h1(r,v)):(ke(r),L0(r,m,null,h,l))):v?v!==i.memoizedState?(Cr(r),ke(r),h1(r,v)):(ke(r),r.flags&=-16777217):(i=i.memoizedProps,i!==h&&Cr(r),ke(r),L0(r,m,i,h,l)),null;case 27:if(ce(r),l=At.current,m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==h&&Cr(r);else{if(!h){if(r.stateNode===null)throw Error(n(166));return ke(r),null}i=at.current,Yc(r)?qE(r):(i=vC(m,h,l),r.stateNode=i,Cr(r))}return ke(r),null;case 5:if(ce(r),m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==h&&Cr(r);else{if(!h){if(r.stateNode===null)throw Error(n(166));return ke(r),null}if(v=at.current,Yc(r))qE(r);else{var _=Em(At.current);switch(v){case 1:v=_.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:v=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":v=_.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":v=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":v=_.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?v.multiple=!0:h.size&&(v.size=h.size);break;default:v=typeof h.is=="string"?_.createElement(m,{is:h.is}):_.createElement(m)}}v[vn]=r,v[Zn]=h;t:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)v.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break t;for(;_.sibling===null;){if(_.return===null||_.return===r)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=v;t:switch(An(v,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&Cr(r)}}return ke(r),L0(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==h&&Cr(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(n(166));if(i=At.current,Yc(r)){if(i=r.stateNode,l=r.memoizedProps,h=null,m=bn,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}i[vn]=r,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||oC(i.nodeValue,l)),i||Da(r,!0)}else i=Em(i).createTextNode(h),i[vn]=r,r.stateNode=i}return ke(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(h=Yc(r),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[vn]=r}else Wo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ke(r),i=!1}else l=Vb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(mi(r),r):(mi(r),null);if((r.flags&128)!==0)throw Error(n(558))}return ke(r),null;case 13:if(h=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Yc(r),h!==null&&h.dehydrated!==null){if(i===null){if(!m)throw Error(n(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[vn]=r}else Wo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ke(r),m=!1}else m=Vb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(mi(r),r):(mi(r),null)}return mi(r),(r.flags&128)!==0?(r.lanes=l,r):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=r.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),v=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),cm(r,r.updateQueue),ke(r),null);case 4:return Pt(),i===null&&ew(r.stateNode.containerInfo),ke(r),null;case 10:return Ar(r.type),ke(r),null;case 19:if(G(Be),h=r.memoizedState,h===null)return ke(r),null;if(m=(r.flags&128)!==0,v=h.rendering,v===null)if(m)Sd(h,!1);else{if(Fe!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=Wg(i),v!==null){for(r.flags|=128,Sd(h,!1),i=v.updateQueue,r.updateQueue=i,cm(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)IE(l,i),l=l.sibling;return tt(Be,Be.current&1|2),Kt&&wr(r,h.treeForkCount),r.child}i=i.sibling}h.tail!==null&&yn()>pm&&(r.flags|=128,m=!0,Sd(h,!1),r.lanes=4194304)}else{if(!m)if(i=Wg(v),i!==null){if(r.flags|=128,m=!0,i=i.updateQueue,r.updateQueue=i,cm(r,i),Sd(h,!0),h.tail===null&&h.tailMode==="hidden"&&!v.alternate&&!Kt)return ke(r),null}else 2*yn()-h.renderingStartTime>pm&&l!==536870912&&(r.flags|=128,m=!0,Sd(h,!1),r.lanes=4194304);h.isBackwards?(v.sibling=r.child,r.child=v):(i=h.last,i!==null?i.sibling=v:r.child=v,h.last=v)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=yn(),i.sibling=null,l=Be.current,tt(Be,m?l&1|2:l&1),Kt&&wr(r,h.treeForkCount),i):(ke(r),null);case 22:case 23:return mi(r),n0(),h=r.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(l&536870912)!==0&&(r.flags&128)===0&&(ke(r),r.subtreeFlags&6&&(r.flags|=8192)):ke(r),l=r.updateQueue,l!==null&&cm(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==l&&(r.flags|=2048),i!==null&&G(Jo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ar(qe),ke(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function tO(i,r){switch(Ub(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Ar(qe),Pt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return ce(r),null;case 31:if(r.memoizedState!==null){if(mi(r),r.alternate===null)throw Error(n(340));Wo()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(mi(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Wo()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return G(Be),null;case 4:return Pt(),null;case 10:return Ar(r.type),null;case 22:case 23:return mi(r),n0(),i!==null&&G(Jo),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Ar(qe),null;case 25:return null;default:return null}}function d1(i,r){switch(Ub(r),r.tag){case 3:Ar(qe),Pt();break;case 26:case 27:case 5:ce(r);break;case 4:Pt();break;case 31:r.memoizedState!==null&&mi(r);break;case 13:mi(r);break;case 19:G(Be);break;case 10:Ar(r.type);break;case 22:case 23:mi(r),n0(),i!==null&&G(Jo);break;case 24:Ar(qe)}}function Cd(i,r){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&i)===i){h=void 0;var v=l.create,_=l.inst;h=v(),_.destroy=h}l=l.next}while(l!==m)}}catch(R){he(r,r.return,R)}}function Ia(i,r,l){try{var h=r.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var v=m.next;h=v;do{if((h.tag&i)===i){var _=h.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,m=r;var P=l,Y=R;try{Y()}catch(et){he(m,P,et)}}}h=h.next}while(h!==v)}}catch(et){he(r,r.return,et)}}function f1(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{iS(r,l)}catch(h){he(i,i.return,h)}}}function p1(i,r,l){l.props=sl(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){he(i,r,h)}}function Td(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(m){he(i,r,m)}}function Fs(i,r){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){he(i,r,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){he(i,r,m)}else l.current=null}function g1(i){var r=i.type,l=i.memoizedProps,h=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){he(i,i.return,m)}}function O0(i,r,l){try{var h=i.stateNode;AO(h,i.type,l,r),h[Zn]=r}catch(m){he(i,i.return,m)}}function m1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Xa(i.type)||i.tag===4}function j0(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||m1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Xa(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function P0(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=yr));else if(h!==4&&(h===27&&Xa(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(P0(i,r,l),i=i.sibling;i!==null;)P0(i,r,l),i=i.sibling}function um(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(h!==4&&(h===27&&Xa(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(um(i,r,l),i=i.sibling;i!==null;)um(i,r,l),i=i.sibling}function y1(i){var r=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);An(r,h,l),r[vn]=i,r[Zn]=l}catch(v){he(i,i.return,v)}}var Tr=!1,$e=!1,F0=!1,v1=typeof WeakSet=="function"?WeakSet:Set,hn=null;function eO(i,r){if(i=i.containerInfo,sw=Nm,i=ME(i),Mb(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break t}var _=0,R=-1,P=-1,Y=0,et=0,st=i,K=null;e:for(;;){for(var Z;st!==l||m!==0&&st.nodeType!==3||(R=_+m),st!==v||h!==0&&st.nodeType!==3||(P=_+h),st.nodeType===3&&(_+=st.nodeValue.length),(Z=st.firstChild)!==null;)K=st,st=Z;for(;;){if(st===i)break e;if(K===l&&++Y===m&&(R=_),K===v&&++et===h&&(P=_),(Z=st.nextSibling)!==null)break;st=K,K=st.parentNode}st=Z}l=R===-1||P===-1?null:{start:R,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(rw={focusedElem:i,selectionRange:l},Nm=!1,hn=r;hn!==null;)if(r=hn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,hn=i;else for(;hn!==null;){switch(r=hn,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)m=i[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,l=r,m=v.memoizedProps,v=v.memoizedState,h=l.stateNode;try{var mt=sl(l.type,m);i=h.getSnapshotBeforeUpdate(mt,v),h.__reactInternalSnapshotBeforeUpdate=i}catch(Tt){he(l,l.return,Tt)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)lw(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":lw(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=r.sibling,i!==null){i.return=r.return,hn=i;break}hn=r.return}}function b1(i,r,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Rr(i,l),h&4&&Cd(5,l);break;case 1:if(Rr(i,l),h&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(_){he(l,l.return,_)}else{var m=sl(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(m,r,i.__reactInternalSnapshotBeforeUpdate)}catch(_){he(l,l.return,_)}}h&64&&f1(l),h&512&&Td(l,l.return);break;case 3:if(Rr(i,l),h&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{iS(i,r)}catch(_){he(l,l.return,_)}}break;case 27:r===null&&h&4&&y1(l);case 26:case 5:Rr(i,l),r===null&&h&4&&g1(l),h&512&&Td(l,l.return);break;case 12:Rr(i,l);break;case 31:Rr(i,l),h&4&&A1(i,l);break;case 13:Rr(i,l),h&4&&_1(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=uO.bind(null,l),MO(i,l))));break;case 22:if(h=l.memoizedState!==null||Tr,!h){r=r!==null&&r.memoizedState!==null||$e,m=Tr;var v=$e;Tr=h,($e=r)&&!v?Mr(i,l,(l.subtreeFlags&8772)!==0):Rr(i,l),Tr=m,$e=v}break;case 30:break;default:Rr(i,l)}}function w1(i){var r=i.alternate;r!==null&&(i.alternate=null,w1(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&fb(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Me=null,ti=!1;function kr(i,r,l){for(l=l.child;l!==null;)x1(i,r,l),l=l.sibling}function x1(i,r,l){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Ho,l)}catch{}switch(l.tag){case 26:$e||Fs(l,r),kr(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:$e||Fs(l,r);var h=Me,m=ti;Xa(l.type)&&(Me=l.stateNode,ti=!1),kr(i,r,l),Pd(l.stateNode),Me=h,ti=m;break;case 5:$e||Fs(l,r);case 6:if(h=Me,m=ti,Me=null,kr(i,r,l),Me=h,ti=m,Me!==null)if(ti)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(l.stateNode)}catch(v){he(l,r,v)}else try{Me.removeChild(l.stateNode)}catch(v){he(l,r,v)}break;case 18:Me!==null&&(ti?(i=Me,fC(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),gu(i)):fC(Me,l.stateNode));break;case 4:h=Me,m=ti,Me=l.stateNode.containerInfo,ti=!0,kr(i,r,l),Me=h,ti=m;break;case 0:case 11:case 14:case 15:Ia(2,l,r),$e||Ia(4,l,r),kr(i,r,l);break;case 1:$e||(Fs(l,r),h=l.stateNode,typeof h.componentWillUnmount=="function"&&p1(l,r,h)),kr(i,r,l);break;case 21:kr(i,r,l);break;case 22:$e=(h=$e)||l.memoizedState!==null,kr(i,r,l),$e=h;break;default:kr(i,r,l)}}function A1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{gu(i)}catch(l){he(r,r.return,l)}}}function _1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{gu(i)}catch(l){he(r,r.return,l)}}function nO(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new v1),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new v1),r;default:throw Error(n(435,i.tag))}}function hm(i,r){var l=nO(i);r.forEach(function(h){if(!l.has(h)){l.add(h);var m=hO.bind(null,i,h);h.then(m,m)}})}function ei(i,r){var l=r.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],v=i,_=r,R=_;t:for(;R!==null;){switch(R.tag){case 27:if(Xa(R.type)){Me=R.stateNode,ti=!1;break t}break;case 5:Me=R.stateNode,ti=!1;break t;case 3:case 4:Me=R.stateNode.containerInfo,ti=!0;break t}R=R.return}if(Me===null)throw Error(n(160));x1(v,_,m),Me=null,ti=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)E1(r,i),r=r.sibling}var us=null;function E1(i,r){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ei(r,i),ni(i),h&4&&(Ia(3,i,i.return),Cd(3,i),Ia(5,i,i.return));break;case 1:ei(r,i),ni(i),h&512&&($e||l===null||Fs(l,l.return)),h&64&&Tr&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=us;if(ei(r,i),ni(i),h&512&&($e||l===null||Fs(l,l.return)),h&4){var v=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){t:{h=i.type,l=i.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":v=m.getElementsByTagName("title")[0],(!v||v[td]||v[vn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(h),m.head.insertBefore(v,m.querySelector("head > title"))),An(v,h,l),v[vn]=i,un(v),h=v;break t;case"link":var _=EC("link","href",m).get(h+(l.href||""));if(_){for(var R=0;R<_.length;R++)if(v=_[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(R,1);break e}}v=m.createElement(h),An(v,h,l),m.head.appendChild(v);break;case"meta":if(_=EC("meta","content",m).get(h+(l.content||""))){for(R=0;R<_.length;R++)if(v=_[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(R,1);break e}}v=m.createElement(h),An(v,h,l),m.head.appendChild(v);break;default:throw Error(n(468,h))}v[vn]=i,un(v),h=v}i.stateNode=h}else SC(m,i.type,i.stateNode);else i.stateNode=_C(m,h,i.memoizedProps);else v!==h?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,h===null?SC(m,i.type,i.stateNode):_C(m,h,i.memoizedProps)):h===null&&i.stateNode!==null&&O0(i,i.memoizedProps,l.memoizedProps)}break;case 27:ei(r,i),ni(i),h&512&&($e||l===null||Fs(l,l.return)),l!==null&&h&4&&O0(i,i.memoizedProps,l.memoizedProps);break;case 5:if(ei(r,i),ni(i),h&512&&($e||l===null||Fs(l,l.return)),i.flags&32){m=i.stateNode;try{zc(m,"")}catch(mt){he(i,i.return,mt)}}h&4&&i.stateNode!=null&&(m=i.memoizedProps,O0(i,m,l!==null?l.memoizedProps:m)),h&1024&&(F0=!0);break;case 6:if(ei(r,i),ni(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(mt){he(i,i.return,mt)}}break;case 3:if(Tm=null,m=us,us=Sm(r.containerInfo),ei(r,i),us=m,ni(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{gu(r.containerInfo)}catch(mt){he(i,i.return,mt)}F0&&(F0=!1,S1(i));break;case 4:h=us,us=Sm(i.stateNode.containerInfo),ei(r,i),ni(i),us=h;break;case 12:ei(r,i),ni(i);break;case 31:ei(r,i),ni(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,hm(i,h)));break;case 13:ei(r,i),ni(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(fm=yn()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,hm(i,h)));break;case 22:m=i.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,Y=Tr,et=$e;if(Tr=Y||m,$e=et||P,ei(r,i),$e=et,Tr=Y,ni(i),h&8192)t:for(r=i.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(l===null||P||Tr||$e||rl(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){P=l=r;try{if(v=P.stateNode,m)_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=P.stateNode;var st=P.memoizedProps.style,K=st!=null&&st.hasOwnProperty("display")?st.display:null;R.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(mt){he(P,P.return,mt)}}}else if(r.tag===6){if(l===null){P=r;try{P.stateNode.nodeValue=m?"":P.memoizedProps}catch(mt){he(P,P.return,mt)}}}else if(r.tag===18){if(l===null){P=r;try{var Z=P.stateNode;m?pC(Z,!0):pC(P.stateNode,!1)}catch(mt){he(P,P.return,mt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,hm(i,l))));break;case 19:ei(r,i),ni(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,hm(i,h)));break;case 30:break;case 21:break;default:ei(r,i),ni(i)}}function ni(i){var r=i.flags;if(r&2){try{for(var l,h=i.return;h!==null;){if(m1(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var m=l.stateNode,v=j0(i);um(i,v,m);break;case 5:var _=l.stateNode;l.flags&32&&(zc(_,""),l.flags&=-33);var R=j0(i);um(i,R,_);break;case 3:case 4:var P=l.stateNode.containerInfo,Y=j0(i);P0(i,Y,P);break;default:throw Error(n(161))}}catch(et){he(i,i.return,et)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function S1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;S1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Rr(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)b1(i,r.alternate,r),r=r.sibling}function rl(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ia(4,r,r.return),rl(r);break;case 1:Fs(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&p1(r,r.return,l),rl(r);break;case 27:Pd(r.stateNode);case 26:case 5:Fs(r,r.return),rl(r);break;case 22:r.memoizedState===null&&rl(r);break;case 30:rl(r);break;default:rl(r)}i=i.sibling}}function Mr(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,m=i,v=r,_=v.flags;switch(v.tag){case 0:case 11:case 15:Mr(m,v,l),Cd(4,v);break;case 1:if(Mr(m,v,l),h=v,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Y){he(h,h.return,Y)}if(h=v,m=h.updateQueue,m!==null){var R=h.stateNode;try{var P=m.shared.hiddenCallbacks;if(P!==null)for(m.shared.hiddenCallbacks=null,m=0;m<P.length;m++)nS(P[m],R)}catch(Y){he(h,h.return,Y)}}l&&_&64&&f1(v),Td(v,v.return);break;case 27:y1(v);case 26:case 5:Mr(m,v,l),l&&h===null&&_&4&&g1(v),Td(v,v.return);break;case 12:Mr(m,v,l);break;case 31:Mr(m,v,l),l&&_&4&&A1(m,v);break;case 13:Mr(m,v,l),l&&_&4&&_1(m,v);break;case 22:v.memoizedState===null&&Mr(m,v,l),Td(v,v.return);break;case 30:break;default:Mr(m,v,l)}r=r.sibling}}function z0(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&fd(l))}function I0(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&fd(i))}function hs(i,r,l,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)C1(i,r,l,h),r=r.sibling}function C1(i,r,l,h){var m=r.flags;switch(r.tag){case 0:case 11:case 15:hs(i,r,l,h),m&2048&&Cd(9,r);break;case 1:hs(i,r,l,h);break;case 3:hs(i,r,l,h),m&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&fd(i)));break;case 12:if(m&2048){hs(i,r,l,h),i=r.stateNode;try{var v=r.memoizedProps,_=v.id,R=v.onPostCommit;typeof R=="function"&&R(_,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){he(r,r.return,P)}}else hs(i,r,l,h);break;case 31:hs(i,r,l,h);break;case 13:hs(i,r,l,h);break;case 23:break;case 22:v=r.stateNode,_=r.alternate,r.memoizedState!==null?v._visibility&2?hs(i,r,l,h):kd(i,r):v._visibility&2?hs(i,r,l,h):(v._visibility|=2,su(i,r,l,h,(r.subtreeFlags&10256)!==0||!1)),m&2048&&z0(_,r);break;case 24:hs(i,r,l,h),m&2048&&I0(r.alternate,r);break;default:hs(i,r,l,h)}}function su(i,r,l,h,m){for(m=m&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,_=r,R=l,P=h,Y=_.flags;switch(_.tag){case 0:case 11:case 15:su(v,_,R,P,m),Cd(8,_);break;case 23:break;case 22:var et=_.stateNode;_.memoizedState!==null?et._visibility&2?su(v,_,R,P,m):kd(v,_):(et._visibility|=2,su(v,_,R,P,m)),m&&Y&2048&&z0(_.alternate,_);break;case 24:su(v,_,R,P,m),m&&Y&2048&&I0(_.alternate,_);break;default:su(v,_,R,P,m)}r=r.sibling}}function kd(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,h=r,m=h.flags;switch(h.tag){case 22:kd(l,h),m&2048&&z0(h.alternate,h);break;case 24:kd(l,h),m&2048&&I0(h.alternate,h);break;default:kd(l,h)}r=r.sibling}}var Rd=8192;function ru(i,r,l){if(i.subtreeFlags&Rd)for(i=i.child;i!==null;)T1(i,r,l),i=i.sibling}function T1(i,r,l){switch(i.tag){case 26:ru(i,r,l),i.flags&Rd&&i.memoizedState!==null&&HO(l,us,i.memoizedState,i.memoizedProps);break;case 5:ru(i,r,l);break;case 3:case 4:var h=us;us=Sm(i.stateNode.containerInfo),ru(i,r,l),us=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=Rd,Rd=16777216,ru(i,r,l),Rd=h):ru(i,r,l));break;default:ru(i,r,l)}}function k1(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Md(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];hn=h,M1(h,i)}k1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)R1(i),i=i.sibling}function R1(i){switch(i.tag){case 0:case 11:case 15:Md(i),i.flags&2048&&Ia(9,i,i.return);break;case 3:Md(i);break;case 12:Md(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,dm(i)):Md(i);break;default:Md(i)}}function dm(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];hn=h,M1(h,i)}k1(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ia(8,r,r.return),dm(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,dm(r));break;default:dm(r)}i=i.sibling}}function M1(i,r){for(;hn!==null;){var l=hn;switch(l.tag){case 0:case 11:case 15:Ia(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:fd(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,hn=h;else t:for(l=i;hn!==null;){h=hn;var m=h.sibling,v=h.return;if(w1(h),h===l){hn=null;break t}if(m!==null){m.return=v,hn=m;break t}hn=v}}}var iO={getCacheForType:function(i){var r=wn(qe),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return wn(qe).controller.signal}},sO=typeof WeakMap=="function"?WeakMap:Map,ae=0,we=null,Ut=null,$t=0,ue=0,yi=null,Ba=!1,au=!1,B0=!1,Nr=0,Fe=0,Ua=0,al=0,U0=0,vi=0,ou=0,Nd=null,ii=null,H0=!1,fm=0,N1=0,pm=1/0,gm=null,Ha=null,Qe=0,Va=null,lu=null,Dr=0,V0=0,q0=null,D1=null,Dd=0,G0=null;function bi(){return(ae&2)!==0&&$t!==0?$t&-$t:F.T!==null?Q0():Y_()}function L1(){if(vi===0)if(($t&536870912)===0||Kt){var i=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),vi=i}else vi=536870912;return i=gi.current,i!==null&&(i.flags|=32),vi}function si(i,r,l){(i===we&&(ue===2||ue===9)||i.cancelPendingCommit!==null)&&(cu(i,0),qa(i,$t,vi,!1)),gr(i,l),((ae&2)===0||i!==we)&&(i===we&&((ae&2)===0&&(al|=l),Fe===4&&qa(i,$t,vi,!1)),zs(i))}function O1(i,r,l){if((ae&6)!==0)throw Error(n(327));var h=!l&&(r&127)===0&&(r&i.expiredLanes)===0||kt(i,r),m=h?oO(i,r):$0(i,r,!0),v=h;do{if(m===0){au&&!h&&qa(i,r,0,!1);break}else{if(l=i.current.alternate,v&&!rO(l)){m=$0(i,r,!1),v=!1;continue}if(m===2){if(v=r,i.errorRecoveryDisabledLanes&v)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;t:{var R=i;m=Nd;var P=R.current.memoizedState.isDehydrated;if(P&&(cu(R,_).flags|=256),_=$0(R,_,!1),_!==2){if(B0&&!P){R.errorRecoveryDisabledLanes|=v,al|=v,m=4;break t}v=ii,ii=m,v!==null&&(ii===null?ii=v:ii.push.apply(ii,v))}m=_}if(v=!1,m!==2)continue}}if(m===1){cu(i,0),qa(i,r,0,!0);break}t:{switch(h=i,v=m,v){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:qa(h,r,vi,!Ba);break t;case 2:ii=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(m=fm+300-yn(),10<m)){if(qa(h,r,vi,!Ba),Ot(h,0,!0)!==0)break t;Dr=r,h.timeoutHandle=hC(j1.bind(null,h,l,ii,gm,H0,r,vi,al,ou,Ba,v,"Throttled",-0,0),m);break t}j1(h,l,ii,gm,H0,r,vi,al,ou,Ba,v,null,-0,0)}}break}while(!0);zs(i)}function j1(i,r,l,h,m,v,_,R,P,Y,et,st,K,Z){if(i.timeoutHandle=-1,st=r.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:yr},T1(r,v,st);var mt=(v&62914560)===v?fm-yn():(v&4194048)===v?N1-yn():0;if(mt=VO(st,mt),mt!==null){Dr=v,i.cancelPendingCommit=mt(V1.bind(null,i,r,v,l,h,m,_,R,P,et,st,null,K,Z)),qa(i,v,_,!Y);return}}V1(i,r,v,l,h,m,_,R,P)}function rO(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],v=m.getSnapshot;m=m.value;try{if(!fi(v(),m))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qa(i,r,l,h){r&=~U0,r&=~al,i.suspendedLanes|=r,i.pingedLanes&=~r,h&&(i.warmLanes|=r),h=i.expirationTimes;for(var m=r;0<m;){var v=31-qn(m),_=1<<v;h[v]=-1,m&=~_}l!==0&&G_(i,l,r)}function mm(){return(ae&6)===0?(Ld(0),!1):!0}function X0(){if(Ut!==null){if(ue===0)var i=Ut.return;else i=Ut,xr=Qo=null,l0(i),Jc=null,gd=0,i=Ut;for(;i!==null;)d1(i.alternate,i),i=i.return;Ut=null}}function cu(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,SO(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Dr=0,X0(),we=i,Ut=l=br(i.current,null),$t=r,ue=0,yi=null,Ba=!1,au=kt(i,r),B0=!1,ou=vi=U0=al=Ua=Fe=0,ii=Nd=null,H0=!1,(r&8)!==0&&(r|=r&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=r;0<h;){var m=31-qn(h),v=1<<m;r|=i[m],h&=~v}return Nr=r,Fg(),l}function P1(i,r){Lt=null,F.H=_d,r===Zc||r===Gg?(r=ZE(),ue=3):r===Wb?(r=ZE(),ue=4):ue=r===E0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,yi=r,Ut===null&&(Fe=1,rm(i,Ui(r,i.current)))}function F1(){var i=gi.current;return i===null?!0:($t&4194048)===$t?Gi===null:($t&62914560)===$t||($t&536870912)!==0?i===Gi:!1}function z1(){var i=F.H;return F.H=_d,i===null?_d:i}function I1(){var i=F.A;return F.A=iO,i}function ym(){Fe=4,Ba||($t&4194048)!==$t&&gi.current!==null||(au=!0),(Ua&134217727)===0&&(al&134217727)===0||we===null||qa(we,$t,vi,!1)}function $0(i,r,l){var h=ae;ae|=2;var m=z1(),v=I1();(we!==i||$t!==r)&&(gm=null,cu(i,r)),r=!1;var _=Fe;t:do try{if(ue!==0&&Ut!==null){var R=Ut,P=yi;switch(ue){case 8:X0(),_=6;break t;case 3:case 2:case 9:case 6:gi.current===null&&(r=!0);var Y=ue;if(ue=0,yi=null,uu(i,R,P,Y),l&&au){_=0;break t}break;default:Y=ue,ue=0,yi=null,uu(i,R,P,Y)}}aO(),_=Fe;break}catch(et){P1(i,et)}while(!0);return r&&i.shellSuspendCounter++,xr=Qo=null,ae=h,F.H=m,F.A=v,Ut===null&&(we=null,$t=0,Fg()),_}function aO(){for(;Ut!==null;)B1(Ut)}function oO(i,r){var l=ae;ae|=2;var h=z1(),m=I1();we!==i||$t!==r?(gm=null,pm=yn()+500,cu(i,r)):au=kt(i,r);t:do try{if(ue!==0&&Ut!==null){r=Ut;var v=yi;e:switch(ue){case 1:ue=0,yi=null,uu(i,r,v,1);break;case 2:case 9:if(WE(v)){ue=0,yi=null,U1(r);break}r=function(){ue!==2&&ue!==9||we!==i||(ue=7),zs(i)},v.then(r,r);break t;case 3:ue=7;break t;case 4:ue=5;break t;case 7:WE(v)?(ue=0,yi=null,U1(r)):(ue=0,yi=null,uu(i,r,v,7));break;case 5:var _=null;switch(Ut.tag){case 26:_=Ut.memoizedState;case 5:case 27:var R=Ut;if(_?CC(_):R.stateNode.complete){ue=0,yi=null;var P=R.sibling;if(P!==null)Ut=P;else{var Y=R.return;Y!==null?(Ut=Y,vm(Y)):Ut=null}break e}}ue=0,yi=null,uu(i,r,v,5);break;case 6:ue=0,yi=null,uu(i,r,v,6);break;case 8:X0(),Fe=6;break t;default:throw Error(n(462))}}lO();break}catch(et){P1(i,et)}while(!0);return xr=Qo=null,F.H=h,F.A=m,ae=l,Ut!==null?0:(we=null,$t=0,Fg(),Fe)}function lO(){for(;Ut!==null&&!Qh();)B1(Ut)}function B1(i){var r=u1(i.alternate,i,Nr);i.memoizedProps=i.pendingProps,r===null?vm(i):Ut=r}function U1(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=s1(l,r,r.pendingProps,r.type,void 0,$t);break;case 11:r=s1(l,r,r.pendingProps,r.type.render,r.ref,$t);break;case 5:l0(r);default:d1(l,r),r=Ut=IE(r,Nr),r=u1(l,r,Nr)}i.memoizedProps=i.pendingProps,r===null?vm(i):Ut=r}function uu(i,r,l,h){xr=Qo=null,l0(r),Jc=null,gd=0;var m=r.return;try{if(WL(i,m,r,l,$t)){Fe=1,rm(i,Ui(l,i.current)),Ut=null;return}}catch(v){if(m!==null)throw Ut=m,v;Fe=1,rm(i,Ui(l,i.current)),Ut=null;return}r.flags&32768?(Kt||h===1?i=!0:au||($t&536870912)!==0?i=!1:(Ba=i=!0,(h===2||h===9||h===3||h===6)&&(h=gi.current,h!==null&&h.tag===13&&(h.flags|=16384))),H1(r,i)):vm(r)}function vm(i){var r=i;do{if((r.flags&32768)!==0){H1(r,Ba);return}i=r.return;var l=JL(r.alternate,r,Nr);if(l!==null){Ut=l;return}if(r=r.sibling,r!==null){Ut=r;return}Ut=r=i}while(r!==null);Fe===0&&(Fe=5)}function H1(i,r){do{var l=tO(i.alternate,i);if(l!==null){l.flags&=32767,Ut=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){Ut=i;return}Ut=i=l}while(i!==null);Fe=6,Ut=null}function V1(i,r,l,h,m,v,_,R,P){i.cancelPendingCommit=null;do bm();while(Qe!==0);if((ae&6)!==0)throw Error(n(327));if(r!==null){if(r===i.current)throw Error(n(177));if(v=r.lanes|r.childLanes,v|=jb,Sg(i,l,v,_,R,P),i===we&&(Ut=we=null,$t=0),lu=r,Va=i,Dr=l,V0=v,q0=m,D1=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,dO(ls,function(){return Y1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=F.T,F.T=null,m=q.p,q.p=2,_=ae,ae|=4;try{eO(i,r,l)}finally{ae=_,q.p=m,F.T=h}}Qe=1,q1(),G1(),X1()}}function q1(){if(Qe===1){Qe=0;var i=Va,r=lu,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var h=q.p;q.p=2;var m=ae;ae|=4;try{E1(r,i);var v=rw,_=ME(i.containerInfo),R=v.focusedElem,P=v.selectionRange;if(_!==R&&R&&R.ownerDocument&&RE(R.ownerDocument.documentElement,R)){if(P!==null&&Mb(R)){var Y=P.start,et=P.end;if(et===void 0&&(et=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(et,R.value.length);else{var st=R.ownerDocument||document,K=st&&st.defaultView||window;if(K.getSelection){var Z=K.getSelection(),mt=R.textContent.length,Tt=Math.min(P.start,mt),me=P.end===void 0?Tt:Math.min(P.end,mt);!Z.extend&&Tt>me&&(_=me,me=Tt,Tt=_);var V=kE(R,Tt),I=kE(R,me);if(V&&I&&(Z.rangeCount!==1||Z.anchorNode!==V.node||Z.anchorOffset!==V.offset||Z.focusNode!==I.node||Z.focusOffset!==I.offset)){var $=st.createRange();$.setStart(V.node,V.offset),Z.removeAllRanges(),Tt>me?(Z.addRange($),Z.extend(I.node,I.offset)):($.setEnd(I.node,I.offset),Z.addRange($))}}}}for(st=[],Z=R;Z=Z.parentNode;)Z.nodeType===1&&st.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<st.length;R++){var it=st[R];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}Nm=!!sw,rw=sw=null}finally{ae=m,q.p=h,F.T=l}}i.current=r,Qe=2}}function G1(){if(Qe===2){Qe=0;var i=Va,r=lu,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var h=q.p;q.p=2;var m=ae;ae|=4;try{b1(i,r.alternate,r)}finally{ae=m,q.p=h,F.T=l}}Qe=3}}function X1(){if(Qe===4||Qe===3){Qe=0,Uo();var i=Va,r=lu,l=Dr,h=D1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Qe=5:(Qe=0,lu=Va=null,$1(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Ha=null),hb(l),r=r.stateNode,Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Ho,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=F.T,m=q.p,q.p=2,F.T=null;try{for(var v=i.onRecoverableError,_=0;_<h.length;_++){var R=h[_];v(R.value,{componentStack:R.stack})}}finally{F.T=r,q.p=m}}(Dr&3)!==0&&bm(),zs(i),m=i.pendingLanes,(l&261930)!==0&&(m&42)!==0?i===G0?Dd++:(Dd=0,G0=i):Dd=0,Ld(0)}}function $1(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,fd(r)))}function bm(){return q1(),G1(),X1(),Y1()}function Y1(){if(Qe!==5)return!1;var i=Va,r=V0;V0=0;var l=hb(Dr),h=F.T,m=q.p;try{q.p=32>l?32:l,F.T=null,l=q0,q0=null;var v=Va,_=Dr;if(Qe=0,lu=Va=null,Dr=0,(ae&6)!==0)throw Error(n(331));var R=ae;if(ae|=4,R1(v.current),C1(v,v.current,_,l),ae=R,Ld(0,!1),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Ho,v)}catch{}return!0}finally{q.p=m,F.T=h,$1(i,r)}}function K1(i,r,l){r=Ui(l,r),r=_0(i.stateNode,r,2),i=Pa(i,r,2),i!==null&&(gr(i,2),zs(i))}function he(i,r,l){if(i.tag===3)K1(i,i,l);else for(;r!==null;){if(r.tag===3){K1(r,i,l);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ha===null||!Ha.has(h))){i=Ui(l,i),l=WS(2),h=Pa(r,l,2),h!==null&&(QS(l,h,r,i),gr(h,2),zs(h));break}}r=r.return}}function Y0(i,r,l){var h=i.pingCache;if(h===null){h=i.pingCache=new sO;var m=new Set;h.set(r,m)}else m=h.get(r),m===void 0&&(m=new Set,h.set(r,m));m.has(l)||(B0=!0,m.add(l),i=cO.bind(null,i,r,l),r.then(i,i))}function cO(i,r,l){var h=i.pingCache;h!==null&&h.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,we===i&&($t&l)===l&&(Fe===4||Fe===3&&($t&62914560)===$t&&300>yn()-fm?(ae&2)===0&&cu(i,0):U0|=l,ou===$t&&(ou=0)),zs(i)}function W1(i,r){r===0&&(r=Ce()),i=Yo(i,r),i!==null&&(gr(i,r),zs(i))}function uO(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),W1(i,l)}function hO(i,r){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(r),W1(i,l)}function dO(i,r){return pr(i,r)}var wm=null,hu=null,K0=!1,xm=!1,W0=!1,Ga=0;function zs(i){i!==hu&&i.next===null&&(hu===null?wm=hu=i:hu=hu.next=i),xm=!0,K0||(K0=!0,pO())}function Ld(i,r){if(!W0&&xm){W0=!0;do for(var l=!1,h=wm;h!==null;){if(i!==0){var m=h.pendingLanes;if(m===0)var v=0;else{var _=h.suspendedLanes,R=h.pingedLanes;v=(1<<31-qn(42|i)+1)-1,v&=m&~(_&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,tC(h,v))}else v=$t,v=Ot(h,h===we?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||kt(h,v)||(l=!0,tC(h,v));h=h.next}while(l);W0=!1}}function fO(){Q1()}function Q1(){xm=K0=!1;var i=0;Ga!==0&&EO()&&(i=Ga);for(var r=yn(),l=null,h=wm;h!==null;){var m=h.next,v=Z1(h,r);v===0?(h.next=null,l===null?wm=m:l.next=m,m===null&&(hu=l)):(l=h,(i!==0||(v&3)!==0)&&(xm=!0)),h=m}Qe!==0&&Qe!==5||Ld(i),Ga!==0&&(Ga=0)}function Z1(i,r){for(var l=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var _=31-qn(v),R=1<<_,P=m[_];P===-1?((R&l)===0||(R&h)!==0)&&(m[_]=Le(R,r)):P<=r&&(i.expiredLanes|=R),v&=~R}if(r=we,l=$t,l=Ot(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===r&&(ue===2||ue===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&di(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||kt(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(h!==null&&di(h),hb(l)){case 2:case 8:l=Hn;break;case 32:l=ls;break;case 268435456:l=Ta;break;default:l=ls}return h=J1.bind(null,i),l=pr(l,h),i.callbackPriority=r,i.callbackNode=l,r}return h!==null&&h!==null&&di(h),i.callbackPriority=2,i.callbackNode=null,2}function J1(i,r){if(Qe!==0&&Qe!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(bm()&&i.callbackNode!==l)return null;var h=$t;return h=Ot(i,i===we?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(O1(i,h,r),Z1(i,yn()),i.callbackNode!=null&&i.callbackNode===l?J1.bind(null,i):null)}function tC(i,r){if(bm())return null;O1(i,r,!0)}function pO(){CO(function(){(ae&6)!==0?pr(Nc,fO):Q1()})}function Q0(){if(Ga===0){var i=Wc;i===0&&(i=Vo,Vo<<=1,(Vo&261888)===0&&(Vo=256)),Ga=i}return Ga}function eC(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Rg(""+i)}function nC(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function gO(i,r,l,h,m){if(r==="submit"&&l&&l.stateNode===m){var v=eC((m[Zn]||null).action),_=h.submitter;_&&(r=(r=_[Zn]||null)?eC(r.formAction):_.getAttribute("formAction"),r!==null&&(v=r,_=null));var R=new Lg("action","action",null,h,m);i.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ga!==0){var P=_?nC(m,_):new FormData(m);y0(l,{pending:!0,data:P,method:m.method,action:v},null,P)}}else typeof v=="function"&&(R.preventDefault(),P=_?nC(m,_):new FormData(m),y0(l,{pending:!0,data:P,method:m.method,action:v},v,P))},currentTarget:m}]})}}for(var Z0=0;Z0<Ob.length;Z0++){var J0=Ob[Z0],mO=J0.toLowerCase(),yO=J0[0].toUpperCase()+J0.slice(1);cs(mO,"on"+yO)}cs(LE,"onAnimationEnd"),cs(OE,"onAnimationIteration"),cs(jE,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(LL,"onTransitionRun"),cs(OL,"onTransitionStart"),cs(jL,"onTransitionCancel"),cs(PE,"onTransitionEnd"),Pc("onMouseEnter",["mouseout","mouseover"]),Pc("onMouseLeave",["mouseout","mouseover"]),Pc("onPointerEnter",["pointerout","pointerover"]),Pc("onPointerLeave",["pointerout","pointerover"]),qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qo("onBeforeInput",["compositionend","keypress","textInput","paste"]),qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Od));function iC(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],m=h.event;h=h.listeners;t:{var v=void 0;if(r)for(var _=h.length-1;0<=_;_--){var R=h[_],P=R.instance,Y=R.currentTarget;if(R=R.listener,P!==v&&m.isPropagationStopped())break t;v=R,m.currentTarget=Y;try{v(m)}catch(et){Pg(et)}m.currentTarget=null,v=P}else for(_=0;_<h.length;_++){if(R=h[_],P=R.instance,Y=R.currentTarget,R=R.listener,P!==v&&m.isPropagationStopped())break t;v=R,m.currentTarget=Y;try{v(m)}catch(et){Pg(et)}m.currentTarget=null,v=P}}}}function Ht(i,r){var l=r[db];l===void 0&&(l=r[db]=new Set);var h=i+"__bubble";l.has(h)||(sC(r,i,2,!1),l.add(h))}function tw(i,r,l){var h=0;r&&(h|=4),sC(l,i,h,r)}var Am="_reactListening"+Math.random().toString(36).slice(2);function ew(i){if(!i[Am]){i[Am]=!0,Q_.forEach(function(l){l!=="selectionchange"&&(vO.has(l)||tw(l,!1,i),tw(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Am]||(r[Am]=!0,tw("selectionchange",!1,r))}}function sC(i,r,l,h){switch(LC(r)){case 2:var m=XO;break;case 8:m=$O;break;default:m=mw}l=m.bind(null,r,l,i),m=void 0,!xb||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(r,l,{capture:!0,passive:m}):i.addEventListener(r,l,!0):m!==void 0?i.addEventListener(r,l,{passive:m}):i.addEventListener(r,l,!1)}function nw(i,r,l,h,m){var v=h;if((r&1)===0&&(r&2)===0&&h!==null)t:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var R=h.stateNode.containerInfo;if(R===m)break;if(_===4)for(_=h.return;_!==null;){var P=_.tag;if((P===3||P===4)&&_.stateNode.containerInfo===m)return;_=_.return}for(;R!==null;){if(_=Lc(R),_===null)return;if(P=_.tag,P===5||P===6||P===26||P===27){h=v=_;continue t}R=R.parentNode}}h=h.return}cE(function(){var Y=v,et=bb(l),st=[];t:{var K=FE.get(i);if(K!==void 0){var Z=Lg,mt=i;switch(i){case"keypress":if(Ng(l)===0)break t;case"keydown":case"keyup":Z=hL;break;case"focusin":mt="focus",Z=Sb;break;case"focusout":mt="blur",Z=Sb;break;case"beforeblur":case"afterblur":Z=Sb;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=dE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=JD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=pL;break;case LE:case OE:case jE:Z=nL;break;case PE:Z=mL;break;case"scroll":case"scrollend":Z=QD;break;case"wheel":Z=vL;break;case"copy":case"cut":case"paste":Z=sL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=pE;break;case"toggle":case"beforetoggle":Z=wL}var Tt=(r&4)!==0,me=!Tt&&(i==="scroll"||i==="scrollend"),V=Tt?K!==null?K+"Capture":null:K;Tt=[];for(var I=Y,$;I!==null;){var it=I;if($=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||$===null||V===null||(it=nd(I,V),it!=null&&Tt.push(jd(I,it,$))),me)break;I=I.return}0<Tt.length&&(K=new Z(K,mt,null,l,et),st.push({event:K,listeners:Tt}))}}if((r&7)===0){t:{if(K=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",K&&l!==vb&&(mt=l.relatedTarget||l.fromElement)&&(Lc(mt)||mt[Dc]))break t;if((Z||K)&&(K=et.window===et?et:(K=et.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(mt=l.relatedTarget||l.toElement,Z=Y,mt=mt?Lc(mt):null,mt!==null&&(me=o(mt),Tt=mt.tag,mt!==me||Tt!==5&&Tt!==27&&Tt!==6)&&(mt=null)):(Z=null,mt=Y),Z!==mt)){if(Tt=dE,it="onMouseLeave",V="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(Tt=pE,it="onPointerLeave",V="onPointerEnter",I="pointer"),me=Z==null?K:ed(Z),$=mt==null?K:ed(mt),K=new Tt(it,I+"leave",Z,l,et),K.target=me,K.relatedTarget=$,it=null,Lc(et)===Y&&(Tt=new Tt(V,I+"enter",mt,l,et),Tt.target=$,Tt.relatedTarget=me,it=Tt),me=it,Z&&mt)e:{for(Tt=bO,V=Z,I=mt,$=0,it=V;it;it=Tt(it))$++;it=0;for(var Et=I;Et;Et=Tt(Et))it++;for(;0<$-it;)V=Tt(V),$--;for(;0<it-$;)I=Tt(I),it--;for(;$--;){if(V===I||I!==null&&V===I.alternate){Tt=V;break e}V=Tt(V),I=Tt(I)}Tt=null}else Tt=null;Z!==null&&rC(st,K,Z,Tt,!1),mt!==null&&me!==null&&rC(st,me,mt,Tt,!0)}}t:{if(K=Y?ed(Y):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var ne=AE;else if(wE(K))if(_E)ne=ML;else{ne=kL;var xt=TL}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&yb(Y.elementType)&&(ne=AE):ne=RL;if(ne&&(ne=ne(i,Y))){xE(st,ne,l,et);break t}xt&&xt(i,K,Y),i==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&mb(K,"number",K.value)}switch(xt=Y?ed(Y):window,i){case"focusin":(wE(xt)||xt.contentEditable==="true")&&(Hc=xt,Nb=Y,ud=null);break;case"focusout":ud=Nb=Hc=null;break;case"mousedown":Db=!0;break;case"contextmenu":case"mouseup":case"dragend":Db=!1,NE(st,l,et);break;case"selectionchange":if(DL)break;case"keydown":case"keyup":NE(st,l,et)}var jt;if(Tb)t:{switch(i){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else Uc?vE(i,l)&&(Yt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Yt="onCompositionStart");Yt&&(gE&&l.locale!=="ko"&&(Uc||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Uc&&(jt=uE()):(Ra=et,Ab="value"in Ra?Ra.value:Ra.textContent,Uc=!0)),xt=_m(Y,Yt),0<xt.length&&(Yt=new fE(Yt,i,null,l,et),st.push({event:Yt,listeners:xt}),jt?Yt.data=jt:(jt=bE(l),jt!==null&&(Yt.data=jt)))),(jt=AL?_L(i,l):EL(i,l))&&(Yt=_m(Y,"onBeforeInput"),0<Yt.length&&(xt=new fE("onBeforeInput","beforeinput",null,l,et),st.push({event:xt,listeners:Yt}),xt.data=jt)),gO(st,i,Y,l,et)}iC(st,r)})}function jd(i,r,l){return{instance:i,listener:r,currentTarget:l}}function _m(i,r){for(var l=r+"Capture",h=[];i!==null;){var m=i,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=nd(i,l),m!=null&&h.unshift(jd(i,m,v)),m=nd(i,r),m!=null&&h.push(jd(i,m,v))),i.tag===3)return h;i=i.return}return[]}function bO(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function rC(i,r,l,h,m){for(var v=r._reactName,_=[];l!==null&&l!==h;){var R=l,P=R.alternate,Y=R.stateNode;if(R=R.tag,P!==null&&P===h)break;R!==5&&R!==26&&R!==27||Y===null||(P=Y,m?(Y=nd(l,v),Y!=null&&_.unshift(jd(l,Y,P))):m||(Y=nd(l,v),Y!=null&&_.push(jd(l,Y,P)))),l=l.return}_.length!==0&&i.push({event:r,listeners:_})}var wO=/\r\n?/g,xO=/\u0000|\uFFFD/g;function aC(i){return(typeof i=="string"?i:""+i).replace(wO,`
`).replace(xO,"")}function oC(i,r){return r=aC(r),aC(i)===r}function ge(i,r,l,h,m,v){switch(l){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||zc(i,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&zc(i,""+h);break;case"className":Tg(i,"class",h);break;case"tabIndex":Tg(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Tg(i,l,h);break;case"style":oE(i,h,v);break;case"data":if(r!=="object"){Tg(i,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Rg(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&ge(i,r,"name",m.name,m,null),ge(i,r,"formEncType",m.formEncType,m,null),ge(i,r,"formMethod",m.formMethod,m,null),ge(i,r,"formTarget",m.formTarget,m,null)):(ge(i,r,"encType",m.encType,m,null),ge(i,r,"method",m.method,m,null),ge(i,r,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Rg(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=yr);break;case"onScroll":h!=null&&Ht("scroll",i);break;case"onScrollEnd":h!=null&&Ht("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Rg(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Ht("beforetoggle",i),Ht("toggle",i),Cg(i,"popover",h);break;case"xlinkActuate":mr(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":mr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":mr(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":mr(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":mr(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":mr(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":mr(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":mr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":mr(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Cg(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=KD.get(l)||l,Cg(i,l,h))}}function iw(i,r,l,h,m,v){switch(l){case"style":oE(i,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?zc(i,h):(typeof h=="number"||typeof h=="bigint")&&zc(i,""+h);break;case"onScroll":h!=null&&Ht("scroll",i);break;case"onScrollEnd":h!=null&&Ht("scrollend",i);break;case"onClick":h!=null&&(i.onclick=yr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Z_.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),r=l.slice(2,m?l.length-7:void 0),v=i[Zn]||null,v=v!=null?v[l]:null,typeof v=="function"&&i.removeEventListener(r,v,m),typeof h=="function")){typeof v!="function"&&v!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,h,m);break t}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Cg(i,l,h)}}}function An(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",i),Ht("load",i);var h=!1,m=!1,v;for(v in l)if(l.hasOwnProperty(v)){var _=l[v];if(_!=null)switch(v){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ge(i,r,v,_,l,null)}}m&&ge(i,r,"srcSet",l.srcSet,l,null),h&&ge(i,r,"src",l.src,l,null);return;case"input":Ht("invalid",i);var R=v=_=m=null,P=null,Y=null;for(h in l)if(l.hasOwnProperty(h)){var et=l[h];if(et!=null)switch(h){case"name":m=et;break;case"type":_=et;break;case"checked":P=et;break;case"defaultChecked":Y=et;break;case"value":v=et;break;case"defaultValue":R=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,r));break;default:ge(i,r,h,et,l,null)}}iE(i,v,R,P,Y,_,m,!1);return;case"select":Ht("invalid",i),h=_=v=null;for(m in l)if(l.hasOwnProperty(m)&&(R=l[m],R!=null))switch(m){case"value":v=R;break;case"defaultValue":_=R;break;case"multiple":h=R;default:ge(i,r,m,R,l,null)}r=v,l=_,i.multiple=!!h,r!=null?Fc(i,!!h,r,!1):l!=null&&Fc(i,!!h,l,!0);return;case"textarea":Ht("invalid",i),v=m=h=null;for(_ in l)if(l.hasOwnProperty(_)&&(R=l[_],R!=null))switch(_){case"value":h=R;break;case"defaultValue":m=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:ge(i,r,_,R,l,null)}rE(i,h,m,v);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(h=l[P],h!=null))switch(P){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ge(i,r,P,h,l,null)}return;case"dialog":Ht("beforetoggle",i),Ht("toggle",i),Ht("cancel",i),Ht("close",i);break;case"iframe":case"object":Ht("load",i);break;case"video":case"audio":for(h=0;h<Od.length;h++)Ht(Od[h],i);break;case"image":Ht("error",i),Ht("load",i);break;case"details":Ht("toggle",i);break;case"embed":case"source":case"link":Ht("error",i),Ht("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(h=l[Y],h!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ge(i,r,Y,h,l,null)}return;default:if(yb(r)){for(et in l)l.hasOwnProperty(et)&&(h=l[et],h!==void 0&&iw(i,r,et,h,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(h=l[R],h!=null&&ge(i,r,R,h,l,null))}function AO(i,r,l,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,_=null,R=null,P=null,Y=null,et=null;for(Z in l){var st=l[Z];if(l.hasOwnProperty(Z)&&st!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":P=st;default:h.hasOwnProperty(Z)||ge(i,r,Z,null,h,st)}}for(var K in h){var Z=h[K];if(st=l[K],h.hasOwnProperty(K)&&(Z!=null||st!=null))switch(K){case"type":v=Z;break;case"name":m=Z;break;case"checked":Y=Z;break;case"defaultChecked":et=Z;break;case"value":_=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,r));break;default:Z!==st&&ge(i,r,K,Z,h,st)}}gb(i,_,R,P,Y,et,v,m);return;case"select":Z=_=R=K=null;for(v in l)if(P=l[v],l.hasOwnProperty(v)&&P!=null)switch(v){case"value":break;case"multiple":Z=P;default:h.hasOwnProperty(v)||ge(i,r,v,null,h,P)}for(m in h)if(v=h[m],P=l[m],h.hasOwnProperty(m)&&(v!=null||P!=null))switch(m){case"value":K=v;break;case"defaultValue":R=v;break;case"multiple":_=v;default:v!==P&&ge(i,r,m,v,h,P)}r=R,l=_,h=Z,K!=null?Fc(i,!!l,K,!1):!!h!=!!l&&(r!=null?Fc(i,!!l,r,!0):Fc(i,!!l,l?[]:"",!1));return;case"textarea":Z=K=null;for(R in l)if(m=l[R],l.hasOwnProperty(R)&&m!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ge(i,r,R,null,h,m)}for(_ in h)if(m=h[_],v=l[_],h.hasOwnProperty(_)&&(m!=null||v!=null))switch(_){case"value":K=m;break;case"defaultValue":Z=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==v&&ge(i,r,_,m,h,v)}sE(i,K,Z);return;case"option":for(var mt in l)if(K=l[mt],l.hasOwnProperty(mt)&&K!=null&&!h.hasOwnProperty(mt))switch(mt){case"selected":i.selected=!1;break;default:ge(i,r,mt,null,h,K)}for(P in h)if(K=h[P],Z=l[P],h.hasOwnProperty(P)&&K!==Z&&(K!=null||Z!=null))switch(P){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ge(i,r,P,K,h,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in l)K=l[Tt],l.hasOwnProperty(Tt)&&K!=null&&!h.hasOwnProperty(Tt)&&ge(i,r,Tt,null,h,K);for(Y in h)if(K=h[Y],Z=l[Y],h.hasOwnProperty(Y)&&K!==Z&&(K!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,r));break;default:ge(i,r,Y,K,h,Z)}return;default:if(yb(r)){for(var me in l)K=l[me],l.hasOwnProperty(me)&&K!==void 0&&!h.hasOwnProperty(me)&&iw(i,r,me,void 0,h,K);for(et in h)K=h[et],Z=l[et],!h.hasOwnProperty(et)||K===Z||K===void 0&&Z===void 0||iw(i,r,et,K,h,Z);return}}for(var V in l)K=l[V],l.hasOwnProperty(V)&&K!=null&&!h.hasOwnProperty(V)&&ge(i,r,V,null,h,K);for(st in h)K=h[st],Z=l[st],!h.hasOwnProperty(st)||K===Z||K==null&&Z==null||ge(i,r,st,K,h,Z)}function lC(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _O(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var m=l[h],v=m.transferSize,_=m.initiatorType,R=m.duration;if(v&&R&&lC(_)){for(_=0,R=m.responseEnd,h+=1;h<l.length;h++){var P=l[h],Y=P.startTime;if(Y>R)break;var et=P.transferSize,st=P.initiatorType;et&&lC(st)&&(P=P.responseEnd,_+=et*(P<R?1:(R-Y)/(P-Y)))}if(--h,r+=8*(v+_)/(m.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var sw=null,rw=null;function Em(i){return i.nodeType===9?i:i.ownerDocument}function cC(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uC(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function aw(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ow=null;function EO(){var i=window.event;return i&&i.type==="popstate"?i===ow?!1:(ow=i,!0):(ow=null,!1)}var hC=typeof setTimeout=="function"?setTimeout:void 0,SO=typeof clearTimeout=="function"?clearTimeout:void 0,dC=typeof Promise=="function"?Promise:void 0,CO=typeof queueMicrotask=="function"?queueMicrotask:typeof dC<"u"?function(i){return dC.resolve(null).then(i).catch(TO)}:hC;function TO(i){setTimeout(function(){throw i})}function Xa(i){return i==="head"}function fC(i,r){var l=r,h=0;do{var m=l.nextSibling;if(i.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(m),gu(r);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")Pd(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Pd(l);for(var v=l.firstChild;v;){var _=v.nextSibling,R=v.nodeName;v[td]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=_}}else l==="body"&&Pd(i.ownerDocument.body);l=m}while(l);gu(r)}function pC(i,r){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function lw(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":lw(l),fb(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function kO(i,r,l,h){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[td])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Xi(i.nextSibling),i===null)break}return null}function RO(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Xi(i.nextSibling),i===null))return null;return i}function gC(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Xi(i.nextSibling),i===null))return null;return i}function cw(i){return i.data==="$?"||i.data==="$~"}function uw(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function MO(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var h=function(){r(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Xi(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var hw=null;function mC(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return Xi(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function yC(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function vC(i,r,l){switch(r=Em(l),i){case"html":if(i=r.documentElement,!i)throw Error(n(452));return i;case"head":if(i=r.head,!i)throw Error(n(453));return i;case"body":if(i=r.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Pd(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);fb(i)}var $i=new Map,bC=new Set;function Sm(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Lr=q.d;q.d={f:NO,r:DO,D:LO,C:OO,L:jO,m:PO,X:zO,S:FO,M:IO};function NO(){var i=Lr.f(),r=mm();return i||r}function DO(i){var r=Oc(i);r!==null&&r.tag===5&&r.type==="form"?PS(r):Lr.r(i)}var du=typeof document>"u"?null:document;function wC(i,r,l){var h=du;if(h&&typeof r=="string"&&r){var m=Ii(r);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),bC.has(m)||(bC.add(m),i={rel:i,crossOrigin:l,href:r},h.querySelector(m)===null&&(r=h.createElement("link"),An(r,"link",i),un(r),h.head.appendChild(r)))}}function LO(i){Lr.D(i),wC("dns-prefetch",i,null)}function OO(i,r){Lr.C(i,r),wC("preconnect",i,r)}function jO(i,r,l){Lr.L(i,r,l);var h=du;if(h&&i&&r){var m='link[rel="preload"][as="'+Ii(r)+'"]';r==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Ii(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Ii(l.imageSizes)+'"]')):m+='[href="'+Ii(i)+'"]';var v=m;switch(r){case"style":v=fu(i);break;case"script":v=pu(i)}$i.has(v)||(i=y({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),$i.set(v,i),h.querySelector(m)!==null||r==="style"&&h.querySelector(Fd(v))||r==="script"&&h.querySelector(zd(v))||(r=h.createElement("link"),An(r,"link",i),un(r),h.head.appendChild(r)))}}function PO(i,r){Lr.m(i,r);var l=du;if(l&&i){var h=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Ii(h)+'"][href="'+Ii(i)+'"]',v=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=pu(i)}if(!$i.has(v)&&(i=y({rel:"modulepreload",href:i},r),$i.set(v,i),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zd(v)))return}h=l.createElement("link"),An(h,"link",i),un(h),l.head.appendChild(h)}}}function FO(i,r,l){Lr.S(i,r,l);var h=du;if(h&&i){var m=jc(h).hoistableStyles,v=fu(i);r=r||"default";var _=m.get(v);if(!_){var R={loading:0,preload:null};if(_=h.querySelector(Fd(v)))R.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},l),(l=$i.get(v))&&dw(i,l);var P=_=h.createElement("link");un(P),An(P,"link",i),P._p=new Promise(function(Y,et){P.onload=Y,P.onerror=et}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Cm(_,r,h)}_={type:"stylesheet",instance:_,count:1,state:R},m.set(v,_)}}}function zO(i,r){Lr.X(i,r);var l=du;if(l&&i){var h=jc(l).hoistableScripts,m=pu(i),v=h.get(m);v||(v=l.querySelector(zd(m)),v||(i=y({src:i,async:!0},r),(r=$i.get(m))&&fw(i,r),v=l.createElement("script"),un(v),An(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function IO(i,r){Lr.M(i,r);var l=du;if(l&&i){var h=jc(l).hoistableScripts,m=pu(i),v=h.get(m);v||(v=l.querySelector(zd(m)),v||(i=y({src:i,async:!0,type:"module"},r),(r=$i.get(m))&&fw(i,r),v=l.createElement("script"),un(v),An(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function xC(i,r,l,h){var m=(m=At.current)?Sm(m):null;if(!m)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=fu(l.href),l=jc(m).hoistableStyles,h=l.get(r),h||(h={type:"style",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=fu(l.href);var v=jc(m).hoistableStyles,_=v.get(i);if(_||(m=m.ownerDocument||m,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,_),(v=m.querySelector(Fd(i)))&&!v._p&&(_.instance=v,_.state.loading=5),$i.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},$i.set(i,l),v||BO(m,i,l,_.state))),r&&h===null)throw Error(n(528,""));return _}if(r&&h!==null)throw Error(n(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=pu(l),l=jc(m).hoistableScripts,h=l.get(r),h||(h={type:"script",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function fu(i){return'href="'+Ii(i)+'"'}function Fd(i){return'link[rel="stylesheet"]['+i+"]"}function AC(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function BO(i,r,l,h){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=i.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),An(r,"link",l),un(r),i.head.appendChild(r))}function pu(i){return'[src="'+Ii(i)+'"]'}function zd(i){return"script[async]"+i}function _C(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var h=i.querySelector('style[data-href~="'+Ii(l.href)+'"]');if(h)return r.instance=h,un(h),h;var m=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),un(h),An(h,"style",m),Cm(h,l.precedence,i),r.instance=h;case"stylesheet":m=fu(l.href);var v=i.querySelector(Fd(m));if(v)return r.state.loading|=4,r.instance=v,un(v),v;h=AC(l),(m=$i.get(m))&&dw(h,m),v=(i.ownerDocument||i).createElement("link"),un(v);var _=v;return _._p=new Promise(function(R,P){_.onload=R,_.onerror=P}),An(v,"link",h),r.state.loading|=4,Cm(v,l.precedence,i),r.instance=v;case"script":return v=pu(l.src),(m=i.querySelector(zd(v)))?(r.instance=m,un(m),m):(h=l,(m=$i.get(v))&&(h=y({},l),fw(h,m)),i=i.ownerDocument||i,m=i.createElement("script"),un(m),An(m,"link",h),i.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Cm(h,l.precedence,i));return r.instance}function Cm(i,r,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,v=m,_=0;_<h.length;_++){var R=h[_];if(R.dataset.precedence===r)v=R;else if(v!==m)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function dw(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function fw(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Tm=null;function EC(i,r,l){if(Tm===null){var h=new Map,m=Tm=new Map;m.set(l,h)}else m=Tm,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var v=l[m];if(!(v[td]||v[vn]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var _=v.getAttribute(r)||"";_=i+_;var R=h.get(_);R?R.push(v):h.set(_,[v])}}return h}function SC(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function UO(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function CC(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function HO(i,r,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=fu(h.href),v=r.querySelector(Fd(m));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=km.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=v,un(v);return}v=r.ownerDocument||r,h=AC(h),(m=$i.get(m))&&dw(h,m),v=v.createElement("link"),un(v);var _=v;_._p=new Promise(function(R,P){_.onload=R,_.onerror=P}),An(v,"link",h),l.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=km.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var pw=0;function VO(i,r){return i.stylesheets&&i.count===0&&Mm(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&Mm(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&pw===0&&(pw=62500*_O());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Mm(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>pw?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function km(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rm=null;function Mm(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rm=new Map,r.forEach(qO,i),Rm=null,km.call(i))}function qO(i,r){if(!(r.state.loading&4)){var l=Rm.get(i);if(l)var h=l.get(null);else{l=new Map,Rm.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var _=m[v];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),h=_)}h&&l.set(null,h)}m=r.instance,_=m.getAttribute("data-precedence"),v=l.get(_)||h,v===h&&l.set(null,m),l.set(_,m),this.count++,h=km.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),v?v.parentNode.insertBefore(m,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),r.state.loading|=4}}var Id={$$typeof:L,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function GO(i,r,l,h,m,v,_,R,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.hiddenUpdates=Fi(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function TC(i,r,l,h,m,v,_,R,P,Y,et,st){return i=new GO(i,r,l,_,P,Y,et,st,R),r=1,v===!0&&(r|=24),v=pi(3,null,null,r),i.current=v,v.stateNode=i,r=$b(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:h,isDehydrated:l,cache:r},Qb(v),i}function kC(i){return i?(i=Gc,i):Gc}function RC(i,r,l,h,m,v){m=kC(m),h.context===null?h.context=m:h.pendingContext=m,h=ja(r),h.payload={element:l},v=v===void 0?null:v,v!==null&&(h.callback=v),l=Pa(i,h,r),l!==null&&(si(l,i,r),yd(l,i,r))}function MC(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function gw(i,r){MC(i,r),(i=i.alternate)&&MC(i,r)}function NC(i){if(i.tag===13||i.tag===31){var r=Yo(i,67108864);r!==null&&si(r,i,67108864),gw(i,67108864)}}function DC(i){if(i.tag===13||i.tag===31){var r=bi();r=ub(r);var l=Yo(i,r);l!==null&&si(l,i,r),gw(i,r)}}var Nm=!0;function XO(i,r,l,h){var m=F.T;F.T=null;var v=q.p;try{q.p=2,mw(i,r,l,h)}finally{q.p=v,F.T=m}}function $O(i,r,l,h){var m=F.T;F.T=null;var v=q.p;try{q.p=8,mw(i,r,l,h)}finally{q.p=v,F.T=m}}function mw(i,r,l,h){if(Nm){var m=yw(h);if(m===null)nw(i,r,h,Dm,l),OC(i,h);else if(KO(m,i,r,l,h))h.stopPropagation();else if(OC(i,h),r&4&&-1<YO.indexOf(i)){for(;m!==null;){var v=Oc(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var _=gt(v.pendingLanes);if(_!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var P=1<<31-qn(_);R.entanglements[1]|=P,_&=~P}zs(v),(ae&6)===0&&(pm=yn()+500,Ld(0))}}break;case 31:case 13:R=Yo(v,2),R!==null&&si(R,v,2),mm(),gw(v,2)}if(v=yw(h),v===null&&nw(i,r,h,Dm,l),v===m)break;m=v}m!==null&&h.stopPropagation()}else nw(i,r,h,null,l)}}function yw(i){return i=bb(i),vw(i)}var Dm=null;function vw(i){if(Dm=null,i=Lc(i),i!==null){var r=o(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=c(r),i!==null)return i;i=null}else if(l===31){if(i=u(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Dm=i,null}function LC(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zh()){case Nc:return 2;case Hn:return 8;case ls:case Ca:return 32;case Ta:return 268435456;default:return 32}default:return 32}}var bw=!1,$a=null,Ya=null,Ka=null,Bd=new Map,Ud=new Map,Wa=[],YO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OC(i,r){switch(i){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":Bd.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ud.delete(r.pointerId)}}function Hd(i,r,l,h,m,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},r!==null&&(r=Oc(r),r!==null&&NC(r)),i):(i.eventSystemFlags|=h,r=i.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),i)}function KO(i,r,l,h,m){switch(r){case"focusin":return $a=Hd($a,i,r,l,h,m),!0;case"dragenter":return Ya=Hd(Ya,i,r,l,h,m),!0;case"mouseover":return Ka=Hd(Ka,i,r,l,h,m),!0;case"pointerover":var v=m.pointerId;return Bd.set(v,Hd(Bd.get(v)||null,i,r,l,h,m)),!0;case"gotpointercapture":return v=m.pointerId,Ud.set(v,Hd(Ud.get(v)||null,i,r,l,h,m)),!0}return!1}function jC(i){var r=Lc(i.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){i.blockedOn=r,K_(i.priority,function(){DC(l)});return}}else if(r===31){if(r=u(l),r!==null){i.blockedOn=r,K_(i.priority,function(){DC(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Lm(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=yw(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);vb=h,l.target.dispatchEvent(h),vb=null}else return r=Oc(l),r!==null&&NC(r),i.blockedOn=l,!1;r.shift()}return!0}function PC(i,r,l){Lm(i)&&l.delete(r)}function WO(){bw=!1,$a!==null&&Lm($a)&&($a=null),Ya!==null&&Lm(Ya)&&(Ya=null),Ka!==null&&Lm(Ka)&&(Ka=null),Bd.forEach(PC),Ud.forEach(PC)}function Om(i,r){i.blockedOn===r&&(i.blockedOn=null,bw||(bw=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,WO)))}var jm=null;function FC(i){jm!==i&&(jm=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){jm===i&&(jm=null);for(var r=0;r<i.length;r+=3){var l=i[r],h=i[r+1],m=i[r+2];if(typeof h!="function"){if(vw(h||l)===null)continue;break}var v=Oc(l);v!==null&&(i.splice(r,3),r-=3,y0(v,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function gu(i){function r(P){return Om(P,i)}$a!==null&&Om($a,i),Ya!==null&&Om(Ya,i),Ka!==null&&Om(Ka,i),Bd.forEach(r),Ud.forEach(r);for(var l=0;l<Wa.length;l++){var h=Wa[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Wa.length&&(l=Wa[0],l.blockedOn===null);)jC(l),l.blockedOn===null&&Wa.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],v=l[h+1],_=m[Zn]||null;if(typeof v=="function")_||FC(l);else if(_){var R=null;if(v&&v.hasAttribute("formAction")){if(m=v,_=v[Zn]||null)R=_.formAction;else if(vw(m)!==null)continue}else R=_.action;typeof R=="function"?l[h+1]=R:(l.splice(h,3),h-=3),FC(l)}}}function zC(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(_){return m=_})},focusReset:"manual",scroll:"manual"})}function r(){m!==null&&(m(),m=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),m!==null&&(m(),m=null)}}}function ww(i){this._internalRoot=i}Pm.prototype.render=ww.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(n(409));var l=r.current,h=bi();RC(l,h,i,r,null,null)},Pm.prototype.unmount=ww.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;RC(i.current,2,null,i,null,null),mm(),r[Dc]=null}};function Pm(i){this._internalRoot=i}Pm.prototype.unstable_scheduleHydration=function(i){if(i){var r=Y_();i={blockedOn:null,target:i,priority:r};for(var l=0;l<Wa.length&&r!==0&&r<Wa[l].priority;l++);Wa.splice(l,0,i),l===0&&jC(i)}};var IC=t.version;if(IC!=="19.2.1")throw Error(n(527,IC,"19.2.1"));q.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(r),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var QO={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fm.isDisabled&&Fm.supportsFiber)try{Ho=Fm.inject(QO),Vn=Fm}catch{}}return qd.createRoot=function(i,r){if(!a(i))throw Error(n(299));var l=!1,h="",m=XS,v=$S,_=YS;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=TC(i,1,!1,null,null,l,h,null,m,v,_,zC),i[Dc]=r.current,ew(i),new ww(r)},qd.hydrateRoot=function(i,r,l){if(!a(i))throw Error(n(299));var h=!1,m="",v=XS,_=$S,R=YS,P=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),r=TC(i,1,!0,r,l??null,h,m,P,v,_,R,zC),r.context=kC(null),l=r.current,h=bi(),h=ub(h),m=ja(h),m.callback=null,Pa(l,m,h),l=h,r.current.lanes=l,gr(r,l),zs(r),i[Dc]=r.current,ew(i),new Pm(r)},qd.version="19.2.1",qd}var WC;function cj(){if(WC)return Ew.exports;WC=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Ew.exports=lj(),Ew.exports}var uj=cj();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var QC="popstate";function hj(s={}){function t(n,a){let{pathname:o,search:c,hash:u}=n.location;return lx("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:wf(a)}return fj(t,e,null,s)}function Ne(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function rs(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dj(){return Math.random().toString(36).substring(2,10)}function ZC(s,t){return{usr:s.state,key:s.key,idx:t}}function lx(s,t,e=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Bh(t):t,state:e,key:t&&t.key||n||dj()}}function wf({pathname:s="/",search:t="",hash:e=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(s+=e.charAt(0)==="#"?e:"#"+e),s}function Bh(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substring(e),s=s.substring(0,e));let n=s.indexOf("?");n>=0&&(t.search=s.substring(n),s=s.substring(0,n)),s&&(t.pathname=s)}return t}function fj(s,t,e,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let T=g(),C=T==null?null:T-f;f=T,d&&d({action:u,location:E.location,delta:C})}function b(T,C){u="PUSH";let D=lx(E.location,T,C);f=g()+1;let L=ZC(D,f),z=E.createHref(D);try{c.pushState(L,"",z)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(z)}o&&d&&d({action:u,location:E.location,delta:1})}function w(T,C){u="REPLACE";let D=lx(E.location,T,C);f=g();let L=ZC(D,f),z=E.createHref(D);c.replaceState(L,"",z),o&&d&&d({action:u,location:E.location,delta:0})}function A(T){return pj(T)}let E={get action(){return u},get location(){return s(a,c)},listen(T){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(QC,y),d=T,()=>{a.removeEventListener(QC,y),d=null}},createHref(T){return t(a,T)},createURL:A,encodeLocation(T){let C=A(T);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:b,replace:w,go(T){return c.go(T)}};return E}function pj(s,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Ne(e,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:wf(s);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function Yk(s,t,e="/"){return gj(s,t,e,!1)}function gj(s,t,e,n){let a=typeof t=="string"?Bh(t):t,o=ba(a.pathname||"/",e);if(o==null)return null;let c=Kk(s);mj(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=Tj(o);u=Sj(c[d],f,n)}return u}function Kk(s,t=[],e=[],n="",a=!1){let o=(c,u,d=a,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;Ne(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=fa([n,g.relativePath]),b=e.concat(g);c.children&&c.children.length>0&&(Ne(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Kk(c.children,t,b,y,d)),!(c.path==null&&!c.index)&&t.push({path:y,score:_j(y,c.index),routesMeta:b})};return s.forEach((c,u)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))o(c,u);else for(let f of Wk(c.path))o(c,u,!0,f)}),t}function Wk(s){let t=s.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=Wk(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...c),u.map(d=>s.startsWith("/")&&d===""?"/":d)}function mj(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:Ej(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var yj=/^:[\w-]+$/,vj=3,bj=2,wj=1,xj=10,Aj=-2,JC=s=>s==="*";function _j(s,t){let e=s.split("/"),n=e.length;return e.some(JC)&&(n+=Aj),t&&(n+=bj),e.filter(a=>!JC(a)).reduce((a,o)=>a+(yj.test(o)?vj:o===""?wj:xj),n)}function Ej(s,t){return s.length===t.length&&s.slice(0,-1).every((n,a)=>n===t[a])?s[s.length-1]-t[t.length-1]:0}function Sj(s,t,e=!1){let{routesMeta:n}=s,a={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=Vy({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),b=d.route;if(!y&&f&&e&&!n[n.length-1].route.index&&(y=Vy({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:fa([o,y.pathname]),pathnameBase:Dj(fa([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=fa([o,y.pathnameBase]))}return c}function Vy(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,n]=Cj(s.path,s.caseSensitive,s.end),a=t.match(e);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},b)=>{if(g==="*"){let A=u[b]||"";c=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const w=u[b];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:s}}function Cj(s,t=!1,e=!0){rs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Tj(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return rs(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function ba(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=s.charAt(e);return n&&n!=="/"?null:s.slice(e)||"/"}var kj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rj=s=>kj.test(s);function Mj(s,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof s=="string"?Bh(s):s,o;if(e)if(Rj(e))o=e;else{if(e.includes("//")){let c=e;e=e.replace(/\/\/+/g,"/"),rs(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${e}`)}e.startsWith("/")?o=tT(e.substring(1),"/"):o=tT(e,t)}else o=t;return{pathname:o,search:Lj(n),hash:Oj(a)}}function tT(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function kw(s,t,e,n){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Nj(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function KA(s){let t=Nj(s);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function WA(s,t,e,n=!1){let a;typeof s=="string"?a=Bh(s):(a={...s},Ne(!a.pathname||!a.pathname.includes("?"),kw("?","pathname","search",a)),Ne(!a.pathname||!a.pathname.includes("#"),kw("#","pathname","hash",a)),Ne(!a.search||!a.search.includes("#"),kw("#","search","hash",a)));let o=s===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=e;else{let y=t.length-1;if(!n&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=Mj(a,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var fa=s=>s.join("/").replace(/\/\/+/g,"/"),Dj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Lj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Oj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function jj(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Pj(s){return s.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Qk=["POST","PUT","PATCH","DELETE"];new Set(Qk);var Fj=["GET",...Qk];new Set(Fj);var Uh=S.createContext(null);Uh.displayName="DataRouter";var Dv=S.createContext(null);Dv.displayName="DataRouterState";S.createContext(!1);var Zk=S.createContext({isTransitioning:!1});Zk.displayName="ViewTransition";var zj=S.createContext(new Map);zj.displayName="Fetchers";var Ij=S.createContext(null);Ij.displayName="Await";var as=S.createContext(null);as.displayName="Navigation";var hg=S.createContext(null);hg.displayName="Location";var Ns=S.createContext({outlet:null,matches:[],isDataRoute:!1});Ns.displayName="Route";var QA=S.createContext(null);QA.displayName="RouteError";function Bj(s,{relative:t}={}){Ne(Hh(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=S.useContext(as),{hash:a,pathname:o,search:c}=dg(s,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:fa([e,o])),n.createHref({pathname:u,search:c,hash:a})}function Hh(){return S.useContext(hg)!=null}function zo(){return Ne(Hh(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(hg).location}var Jk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tR(s){S.useContext(as).static||S.useLayoutEffect(s)}function _c(){let{isDataRoute:s}=S.useContext(Ns);return s?tP():Uj()}function Uj(){Ne(Hh(),"useNavigate() may be used only in the context of a <Router> component.");let s=S.useContext(Uh),{basename:t,navigator:e}=S.useContext(as),{matches:n}=S.useContext(Ns),{pathname:a}=zo(),o=JSON.stringify(KA(n)),c=S.useRef(!1);return tR(()=>{c.current=!0}),S.useCallback((d,f={})=>{if(rs(c.current,Jk),!c.current)return;if(typeof d=="number"){e.go(d);return}let g=WA(d,JSON.parse(o),a,f.relative==="path");s==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:fa([t,g.pathname])),(f.replace?e.replace:e.push)(g,f.state,f)},[t,e,o,a,s])}S.createContext(null);function Hj(){let{matches:s}=S.useContext(Ns),t=s[s.length-1];return t?t.params:{}}function dg(s,{relative:t}={}){let{matches:e}=S.useContext(Ns),{pathname:n}=zo(),a=JSON.stringify(KA(e));return S.useMemo(()=>WA(s,JSON.parse(a),n,t==="path"),[s,a,n,t])}function Vj(s,t){return eR(s,t)}function eR(s,t,e,n,a){var D;Ne(Hh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=S.useContext(as),{matches:c}=S.useContext(Ns),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let L=y&&y.path||"";nR(f,!y||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let b=zo(),w;if(t){let L=typeof t=="string"?Bh(t):t;Ne(g==="/"||((D=L.pathname)==null?void 0:D.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),w=L}else w=b;let A=w.pathname||"/",E=A;if(g!=="/"){let L=g.replace(/^\//,"").split("/");E="/"+A.replace(/^\//,"").split("/").slice(L.length).join("/")}let T=Yk(s,{pathname:E});rs(y||T!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),rs(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=Yj(T&&T.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:fa([g,o.encodeLocation?o.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:fa([g,o.encodeLocation?o.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),c,e,n,a);return t&&C?S.createElement(hg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function qj(){let s=Jj(),t=jj(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:o},"ErrorBoundary")," or"," ",S.createElement("code",{style:o},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),e?S.createElement("pre",{style:a},e):null,c)}var Gj=S.createElement(qj,null),Xj=class extends S.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.onError?this.props.onError(s,t):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?S.createElement(Ns.Provider,{value:this.props.routeContext},S.createElement(QA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $j({routeContext:s,match:t,children:e}){let n=S.useContext(Uh);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(Ns.Provider,{value:s},e)}function Yj(s,t=[],e=null,n=null,a=null){if(s==null){if(!e)return null;if(e.errors)s=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let o=s,c=e==null?void 0:e.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);Ne(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(e)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:b,errors:w}=e,A=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||A){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=e&&n?(g,y)=>{var b,w;n(g,{location:e.location,params:((w=(b=e.matches)==null?void 0:b[0])==null?void 0:w.params)??{},unstable_pattern:Pj(e.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,b)=>{let w,A=!1,E=null,T=null;e&&(w=c&&y.route.id?c[y.route.id]:void 0,E=y.route.errorElement||Gj,u&&(d<0&&b===0?(nR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,T=null):d===b&&(A=!0,T=y.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,b+1)),D=()=>{let L;return w?L=E:A?L=T:y.route.Component?L=S.createElement(y.route.Component,null):y.route.element?L=y.route.element:L=g,S.createElement($j,{match:y,routeContext:{outlet:g,matches:C,isDataRoute:e!=null},children:L})};return e&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?S.createElement(Xj,{location:e.location,revalidation:e.revalidation,component:E,error:w,children:D(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:f}):D()},null)}function ZA(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kj(s){let t=S.useContext(Uh);return Ne(t,ZA(s)),t}function Wj(s){let t=S.useContext(Dv);return Ne(t,ZA(s)),t}function Qj(s){let t=S.useContext(Ns);return Ne(t,ZA(s)),t}function JA(s){let t=Qj(s),e=t.matches[t.matches.length-1];return Ne(e.route.id,`${s} can only be used on routes that contain a unique "id"`),e.route.id}function Zj(){return JA("useRouteId")}function Jj(){var n;let s=S.useContext(QA),t=Wj("useRouteError"),e=JA("useRouteError");return s!==void 0?s:(n=t.errors)==null?void 0:n[e]}function tP(){let{router:s}=Kj("useNavigate"),t=JA("useNavigate"),e=S.useRef(!1);return tR(()=>{e.current=!0}),S.useCallback(async(a,o={})=>{rs(e.current,Jk),e.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:t,...o}))},[s,t])}var eT={};function nR(s,t,e){!t&&!eT[s]&&(eT[s]=!0,rs(!1,e))}S.memo(eP);function eP({routes:s,future:t,state:e,unstable_onError:n}){return eR(s,void 0,e,n,t)}function qy({to:s,replace:t,state:e,relative:n}){Ne(Hh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=S.useContext(as);rs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=S.useContext(Ns),{pathname:c}=zo(),u=_c(),d=WA(s,KA(o),c,n==="path"),f=JSON.stringify(d);return S.useEffect(()=>{u(JSON.parse(f),{replace:t,state:e,relative:n})},[u,f,n,t,e]),null}function cl(s){Ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nP({basename:s="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:o=!1,unstable_useTransitions:c}){Ne(!Hh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=s.replace(/^\/*/,"/"),d=S.useMemo(()=>({basename:u,navigator:a,static:o,unstable_useTransitions:c,future:{}}),[u,a,o,c]);typeof e=="string"&&(e=Bh(e));let{pathname:f="/",search:g="",hash:y="",state:b=null,key:w="default"}=e,A=S.useMemo(()=>{let E=ba(f,u);return E==null?null:{location:{pathname:E,search:g,hash:y,state:b,key:w},navigationType:n}},[u,f,g,y,b,w,n]);return rs(A!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:S.createElement(as.Provider,{value:d},S.createElement(hg.Provider,{children:t,value:A}))}function iP({children:s,location:t}){return Vj(cx(s),t)}function cx(s,t=[]){let e=[];return S.Children.forEach(s,(n,a)=>{if(!S.isValidElement(n))return;let o=[...t,a];if(n.type===S.Fragment){e.push.apply(e,cx(n.props.children,o));return}Ne(n.type===cl,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ne(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=cx(n.props.children,o)),e.push(c)}),e}var sy="get",ry="application/x-www-form-urlencoded";function Lv(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function sP(s){return Lv(s)&&s.tagName.toLowerCase()==="button"}function rP(s){return Lv(s)&&s.tagName.toLowerCase()==="form"}function aP(s){return Lv(s)&&s.tagName.toLowerCase()==="input"}function oP(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function lP(s,t){return s.button===0&&(!t||t==="_self")&&!oP(s)}var zm=null;function cP(){if(zm===null)try{new FormData(document.createElement("form"),0),zm=!1}catch{zm=!0}return zm}var uP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rw(s){return s!=null&&!uP.has(s)?(rs(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ry}"`),null):s}function hP(s,t){let e,n,a,o,c;if(rP(s)){let u=s.getAttribute("action");n=u?ba(u,t):null,e=s.getAttribute("method")||sy,a=Rw(s.getAttribute("enctype"))||ry,o=new FormData(s)}else if(sP(s)||aP(s)&&(s.type==="submit"||s.type==="image")){let u=s.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||u.getAttribute("action");if(n=d?ba(d,t):null,e=s.getAttribute("formmethod")||u.getAttribute("method")||sy,a=Rw(s.getAttribute("formenctype"))||Rw(u.getAttribute("enctype"))||ry,o=new FormData(u,s),!cP()){let{name:f,type:g,value:y}=s;if(g==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,y)}}else{if(Lv(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=sy,n=null,a=ry,c=s}return o&&a==="text/plain"&&(c=o,o=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function t_(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function dP(s,t,e){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&ba(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function fP(s,t){if(s.id in t)return t[s.id];try{let e=await import(s.module);return t[s.id]=e,e}catch(e){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pP(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function gP(s,t,e){let n=await Promise.all(s.map(async a=>{let o=t.routes[a.route.id];if(o){let c=await fP(o,e);return c.links?c.links():[]}return[]}));return bP(n.flat(1).filter(pP).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function nT(s,t,e,n,a,o){let c=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,u=(d,f)=>{var g;return e[f].pathname!==d.pathname||((g=e[f].route.path)==null?void 0:g.endsWith("*"))&&e[f].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{var y;let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((y=e[0])==null?void 0:y.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function mP(s,t,{includeHydrateFallback:e}={}){return yP(s.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function yP(s){return[...new Set(s)]}function vP(s){let t={},e=Object.keys(s).sort();for(let n of e)t[n]=s[n];return t}function bP(s,t){let e=new Set;return new Set(t),s.reduce((n,a)=>{let o=JSON.stringify(vP(a));return e.has(o)||(e.add(o),n.push({key:o,link:a})),n},[])}function iR(){let s=S.useContext(Uh);return t_(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function wP(){let s=S.useContext(Dv);return t_(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var e_=S.createContext(void 0);e_.displayName="FrameworkContext";function sR(){let s=S.useContext(e_);return t_(s,"You must render this element inside a <HydratedRouter> element"),s}function xP(s,t){let e=S.useContext(e_),[n,a]=S.useState(!1),[o,c]=S.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,b=S.useRef(null);S.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let E=C=>{C.forEach(D=>{c(D.isIntersecting)})},T=new IntersectionObserver(E,{threshold:.5});return b.current&&T.observe(b.current),()=>{T.disconnect()}}},[s]),S.useEffect(()=>{if(n){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[n]);let w=()=>{a(!0)},A=()=>{a(!1),c(!1)};return e?s!=="intent"?[o,b,{}]:[o,b,{onFocus:Gd(u,w),onBlur:Gd(d,A),onMouseEnter:Gd(f,w),onMouseLeave:Gd(g,A),onTouchStart:Gd(y,w)}]:[!1,b,{}]}function Gd(s,t){return e=>{s&&s(e),e.defaultPrevented||t(e)}}function AP({page:s,...t}){let{router:e}=iR(),n=S.useMemo(()=>Yk(e.routes,s,e.basename),[e.routes,s,e.basename]);return n?S.createElement(EP,{page:s,matches:n,...t}):null}function _P(s){let{manifest:t,routeModules:e}=sR(),[n,a]=S.useState([]);return S.useEffect(()=>{let o=!1;return gP(s,t,e).then(c=>{o||a(c)}),()=>{o=!0}},[s,t,e]),n}function EP({page:s,matches:t,...e}){let n=zo(),{manifest:a,routeModules:o}=sR(),{basename:c}=iR(),{loaderData:u,matches:d}=wP(),f=S.useMemo(()=>nT(s,t,d,a,n,"data"),[s,t,d,a,n]),g=S.useMemo(()=>nT(s,t,d,a,n,"assets"),[s,t,d,a,n]),y=S.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let A=new Set,E=!1;if(t.forEach(C=>{var L;let D=a.routes[C.route.id];!D||!D.hasLoader||(!f.some(z=>z.route.id===C.route.id)&&C.route.id in u&&((L=o[C.route.id])!=null&&L.shouldRevalidate)||D.hasClientLoader?E=!0:A.add(C.route.id))}),A.size===0)return[];let T=dP(s,c,"data");return E&&A.size>0&&T.searchParams.set("_routes",t.filter(C=>A.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[c,u,n,a,f,t,s,o]),b=S.useMemo(()=>mP(g,a),[g,a]),w=_P(g);return S.createElement(S.Fragment,null,y.map(A=>S.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...e})),b.map(A=>S.createElement("link",{key:A,rel:"modulepreload",href:A,...e})),w.map(({key:A,link:E})=>S.createElement("link",{key:A,nonce:e.nonce,...E})))}function SP(...s){return t=>{s.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var rR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rR&&(window.__reactRouterVersion="7.10.1")}catch{}function CP({basename:s,children:t,unstable_useTransitions:e,window:n}){let a=S.useRef();a.current==null&&(a.current=hj({window:n,v5Compat:!0}));let o=a.current,[c,u]=S.useState({action:o.action,location:o.location}),d=S.useCallback(f=>{e===!1?u(f):S.startTransition(()=>u(f))},[e]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.createElement(nP,{basename:s,children:t,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:e===!0})}var aR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ov=S.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...b},w){let{basename:A,unstable_useTransitions:E}=S.useContext(as),T=typeof f=="string"&&aR.test(f),C,D=!1;if(typeof f=="string"&&T&&(C=f,rR))try{let Q=new URL(window.location.href),nt=f.startsWith("//")?new URL(Q.protocol+f):new URL(f),ot=ba(nt.pathname,A);nt.origin===Q.origin&&ot!=null?f=ot+nt.search+nt.hash:D=!0}catch{rs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=Bj(f,{relative:a}),[z,B,U]=xP(n,b),O=MP(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:y,unstable_useTransitions:E});function H(Q){t&&t(Q),Q.defaultPrevented||O(Q)}let W=S.createElement("a",{...b,...U,href:C||L,onClick:D||o?t:H,ref:SP(w,B),target:d,"data-discover":!T&&e==="render"?"true":void 0});return z&&!T?S.createElement(S.Fragment,null,W,S.createElement(AP,{page:L})):W});Ov.displayName="Link";var TP=S.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=dg(c,{relative:f.relative}),b=zo(),w=S.useContext(Dv),{navigator:A,basename:E}=S.useContext(as),T=w!=null&&jP(y)&&u===!0,C=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,D=b.pathname,L=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;e||(D=D.toLowerCase(),L=L?L.toLowerCase():null,C=C.toLowerCase()),L&&E&&(L=ba(L,E)||L);const z=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let B=D===C||!a&&D.startsWith(C)&&D.charAt(z)==="/",U=L!=null&&(L===C||!a&&L.startsWith(C)&&L.charAt(C.length)==="/"),O={isActive:B,isPending:U,isTransitioning:T},H=B?t:void 0,W;typeof n=="function"?W=n(O):W=[n,B?"active":null,U?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let Q=typeof o=="function"?o(O):o;return S.createElement(Ov,{...f,"aria-current":H,className:W,ref:g,style:Q,to:c,viewTransition:u},typeof d=="function"?d(O):d)});TP.displayName="NavLink";var kP=S.forwardRef(({discover:s="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:o,method:c=sy,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...b},w)=>{let{unstable_useTransitions:A}=S.useContext(as),E=LP(),T=OP(u,{relative:f}),C=c.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&aR.test(u),L=z=>{if(d&&d(z),z.defaultPrevented)return;z.preventDefault();let B=z.nativeEvent.submitter,U=(B==null?void 0:B.getAttribute("formmethod"))||c,O=()=>E(B||z.currentTarget,{fetcherKey:t,method:U,navigate:e,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:y});A&&e!==!1?S.startTransition(()=>O()):O()};return S.createElement("form",{ref:w,method:C,action:T,onSubmit:n?d:L,...b,"data-discover":!D&&s==="render"?"true":void 0})});kP.displayName="Form";function RP(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oR(s){let t=S.useContext(Uh);return Ne(t,RP(s)),t}function MP(s,{target:t,replace:e,state:n,preventScrollReset:a,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=_c(),f=zo(),g=dg(s,{relative:o});return S.useCallback(y=>{if(lP(y,t)){y.preventDefault();let b=e!==void 0?e:wf(f)===wf(g),w=()=>d(s,{replace:b,state:n,preventScrollReset:a,relative:o,viewTransition:c});u?S.startTransition(()=>w()):w()}},[f,d,g,e,n,t,s,a,o,c,u])}var NP=0,DP=()=>`__${String(++NP)}__`;function LP(){let{router:s}=oR("useSubmit"),{basename:t}=S.useContext(as),e=Zj(),n=s.fetch,a=s.navigate;return S.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=hP(o,t);if(c.navigate===!1){let b=c.fetcherKey||DP();await n(b,e,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,a,t,e])}function OP(s,{relative:t}={}){let{basename:e}=S.useContext(as),n=S.useContext(Ns);Ne(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...dg(s||".",{relative:t})},c=zo();if(s==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!s||s===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:fa([e,o.pathname])),wf(o)}function jP(s,{relative:t}={}){let e=S.useContext(Zk);Ne(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=oR("useViewTransitionState"),a=dg(s,{relative:t});if(!e.isTransitioning)return!1;let o=ba(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=ba(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Vy(a.pathname,c)!=null||Vy(a.pathname,o)!=null}var lR=$k();const PP=$A(lR),iT=s=>{let t;const e=new Set,n=(f,g)=>{const y=typeof f=="function"?f(t):f;if(!Object.is(y,t)){const b=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(w=>w(t,b))}},a=()=>t,u={setState:n,getState:a,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=s(n,a,u);return u},FP=(s=>s?iT(s):iT),zP=s=>s;function IP(s,t=zP){const e=ks.useSyncExternalStore(s.subscribe,ks.useCallback(()=>t(s.getState()),[s,t]),ks.useCallback(()=>t(s.getInitialState()),[s,t]));return ks.useDebugValue(e),e}const sT=s=>{const t=FP(s),e=n=>IP(t,n);return Object.assign(e,t),e},cR=(s=>s?sT(s):sT),BP="/api";class UP{constructor(t){Nt(this,"baseUrl");this.baseUrl=t}getToken(){return localStorage.getItem("heytex_token")}async request(t,e={}){const{method:n="GET",body:a,headers:o={}}=e,c=this.getToken(),u={method:n,headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{},...o}};a&&(u.body=JSON.stringify(a));const d=await fetch(`${this.baseUrl}${t}`,u);if(!d.ok){const f=await d.json().catch(()=>({error:"Unknown error"}));throw new Error(f.error||`HTTP error ${d.status}`)}return e.responseType==="blob"?d.blob():d.json()}async login(t,e){const n=await this.request("/auth/login",{method:"POST",body:{email:t,password:e}});return localStorage.setItem("heytex_token",n.token),n}async register(t,e,n){const a=await this.request("/auth/register",{method:"POST",body:{email:t,password:e,name:n}});return localStorage.setItem("heytex_token",a.token),a}async getMe(){return this.request("/auth/me")}logout(){localStorage.removeItem("heytex_token")}async getProjects(){return this.request("/projects")}async getProject(t){return this.request(`/projects/${t}`)}async createProject(t){return this.request("/projects",{method:"POST",body:t})}async updateProject(t,e){return this.request(`/projects/${t}`,{method:"PATCH",body:e})}async deleteProject(t){return this.request(`/projects/${t}`,{method:"DELETE"})}async addCollaborator(t,e,n){return this.request(`/projects/${t}/collaborators`,{method:"POST",body:{email:e,role:n}})}async removeCollaborator(t,e){return this.request(`/projects/${t}/collaborators/${e}`,{method:"DELETE"})}async getFiles(t){return this.request(`/files/project/${t}`)}async getFile(t){return this.request(`/files/${t}`)}async createFile(t){return this.request("/files",{method:"POST",body:t})}async updateFile(t,e){return this.request(`/files/${t}`,{method:"PATCH",body:e})}async deleteFile(t){return this.request(`/files/${t}`,{method:"DELETE"})}async compile(t){return this.request("/compile/latex",{method:"POST",body:{content:t},responseType:"blob"})}async uploadFile(t){return this.request("/files/upload",{method:"POST",body:t})}}const Mn=new UP(BP),Ec=cR(s=>({user:null,isAuthenticated:!1,isLoading:!0,login:async(t,e)=>{const{user:n}=await Mn.login(t,e);s({user:n,isAuthenticated:!0})},register:async(t,e,n)=>{const{user:a}=await Mn.register(t,e,n);s({user:a,isAuthenticated:!0})},logout:()=>{Mn.logout(),s({user:null,isAuthenticated:!1})},checkAuth:async()=>{try{if(!localStorage.getItem("heytex_token")){s({isLoading:!1});return}const{user:e}=await Mn.getMe();s({user:e,isAuthenticated:!0,isLoading:!1})}catch{localStorage.removeItem("heytex_token"),s({user:null,isAuthenticated:!1,isLoading:!1})}}})),uR=cR((s,t)=>({currentProject:null,currentFile:null,files:[],openFiles:[],isSidebarOpen:!0,isPreviewOpen:!0,theme:localStorage.getItem("heytex_theme")||"light",compilationStatus:"idle",compilationError:null,pdfData:null,setCurrentProject:e=>s({currentProject:e}),setCurrentFile:e=>s({currentFile:e}),setFiles:e=>s({files:e}),addOpenFile:e=>{const{openFiles:n}=t();n.find(a=>a.id===e.id)||s({openFiles:[...n,e]}),s({currentFile:e})},removeOpenFile:e=>{const{openFiles:n,currentFile:a}=t(),o=n.filter(c=>c.id!==e);s({openFiles:o}),(a==null?void 0:a.id)===e&&s({currentFile:o[o.length-1]||null})},toggleSidebar:()=>s(e=>({isSidebarOpen:!e.isSidebarOpen})),togglePreview:()=>s(e=>({isPreviewOpen:!e.isPreviewOpen})),toggleTheme:()=>{const e=t().theme==="light"?"dark":"light";localStorage.setItem("heytex_theme",e),document.documentElement.classList.toggle("dark",e==="dark"),s({theme:e})},setCompilationStatus:(e,n)=>s({compilationStatus:e,compilationError:n||null}),setPdfData:e=>s({pdfData:e}),updateFileContent:(e,n)=>{const{files:a,openFiles:o,currentFile:c}=t(),u=d=>d.id===e?{...d,content:n}:d;s({files:a.map(u),openFiles:o.map(u),currentFile:(c==null?void 0:c.id)===e?{...c,content:n}:c})}}));if(typeof window<"u"){const s=localStorage.getItem("heytex_theme")||"light";document.documentElement.classList.toggle("dark",s==="dark")}function hR(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var a=s.length;for(t=0;t<a;t++)s[t]&&(e=hR(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function Vh(){for(var s,t,e=0,n="",a=arguments.length;e<a;e++)(s=arguments[e])&&(t=hR(s))&&(n&&(n+=" "),n+=t);return n}const HP=(s,t)=>{const e=new Array(s.length+t.length);for(let n=0;n<s.length;n++)e[n]=s[n];for(let n=0;n<t.length;n++)e[s.length+n]=t[n];return e},VP=(s,t)=>({classGroupId:s,validator:t}),dR=(s=new Map,t=null,e)=>({nextPart:s,validators:t,classGroupId:e}),Gy="-",rT=[],qP="arbitrary..",GP=s=>{const t=$P(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return XP(c);const u=c.split(Gy),d=u[0]===""&&u.length>1?1:0;return fR(u,d,t)},getConflictingClassGroupIds:(c,u)=>{if(u){const d=n[c],f=e[c];return d?f?HP(f,d):d:f||rT}return e[c]||rT}}},fR=(s,t,e)=>{if(s.length-t===0)return e.classGroupId;const a=s[t],o=e.nextPart.get(a);if(o){const f=fR(s,t+1,o);if(f)return f}const c=e.validators;if(c===null)return;const u=t===0?s.join(Gy):s.slice(t).join(Gy),d=c.length;for(let f=0;f<d;f++){const g=c[f];if(g.validator(u))return g.classGroupId}},XP=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=s.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?qP+n:void 0})(),$P=s=>{const{theme:t,classGroups:e}=s;return YP(e,t)},YP=(s,t)=>{const e=dR();for(const n in s){const a=s[n];n_(a,e,n,t)}return e},n_=(s,t,e,n)=>{const a=s.length;for(let o=0;o<a;o++){const c=s[o];KP(c,t,e,n)}},KP=(s,t,e,n)=>{if(typeof s=="string"){WP(s,t,e);return}if(typeof s=="function"){QP(s,t,e,n);return}ZP(s,t,e,n)},WP=(s,t,e)=>{const n=s===""?t:pR(t,s);n.classGroupId=e},QP=(s,t,e,n)=>{if(JP(s)){n_(s(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(VP(e,s))},ZP=(s,t,e,n)=>{const a=Object.entries(s),o=a.length;for(let c=0;c<o;c++){const[u,d]=a[c];n_(d,pR(t,u),e,n)}},pR=(s,t)=>{let e=s;const n=t.split(Gy),a=n.length;for(let o=0;o<a;o++){const c=n[o];let u=e.nextPart.get(c);u||(u=dR(),e.nextPart.set(c,u)),e=u}return e},JP=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,t3=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const a=(o,c)=>{e[o]=c,t++,t>s&&(t=0,n=e,e=Object.create(null))};return{get(o){let c=e[o];if(c!==void 0)return c;if((c=n[o])!==void 0)return a(o,c),c},set(o,c){o in e?e[o]=c:a(o,c)}}},ux="!",aT=":",e3=[],oT=(s,t,e,n,a)=>({modifiers:s,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:a}),n3=s=>{const{prefix:t,experimentalParseClassName:e}=s;let n=a=>{const o=[];let c=0,u=0,d=0,f;const g=a.length;for(let E=0;E<g;E++){const T=a[E];if(c===0&&u===0){if(T===aT){o.push(a.slice(d,E)),d=E+1;continue}if(T==="/"){f=E;continue}}T==="["?c++:T==="]"?c--:T==="("?u++:T===")"&&u--}const y=o.length===0?a:a.slice(d);let b=y,w=!1;y.endsWith(ux)?(b=y.slice(0,-1),w=!0):y.startsWith(ux)&&(b=y.slice(1),w=!0);const A=f&&f>d?f-d:void 0;return oT(o,w,b,A)};if(t){const a=t+aT,o=n;n=c=>c.startsWith(a)?o(c.slice(a.length)):oT(e3,!1,c,void 0,!0)}if(e){const a=n;n=o=>e({className:o,parseClassName:a})}return n},i3=s=>{const t=new Map;return s.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let a=[];for(let o=0;o<e.length;o++){const c=e[o],u=c[0]==="[",d=t.has(c);u||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(c)):a.push(c)}return a.length>0&&(a.sort(),n.push(...a)),n}},s3=s=>({cache:t3(s.cacheSize),parseClassName:n3(s),sortModifiers:i3(s),...GP(s)}),r3=/\s+/,a3=(s,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:o}=t,c=[],u=s.trim().split(r3);let d="";for(let f=u.length-1;f>=0;f-=1){const g=u[f],{isExternal:y,modifiers:b,hasImportantModifier:w,baseClassName:A,maybePostfixModifierPosition:E}=e(g);if(y){d=g+(d.length>0?" "+d:d);continue}let T=!!E,C=n(T?A.substring(0,E):A);if(!C){if(!T){d=g+(d.length>0?" "+d:d);continue}if(C=n(A),!C){d=g+(d.length>0?" "+d:d);continue}T=!1}const D=b.length===0?"":b.length===1?b[0]:o(b).join(":"),L=w?D+ux:D,z=L+C;if(c.indexOf(z)>-1)continue;c.push(z);const B=a(C,T);for(let U=0;U<B.length;++U){const O=B[U];c.push(L+O)}d=g+(d.length>0?" "+d:d)}return d},o3=(...s)=>{let t=0,e,n,a="";for(;t<s.length;)(e=s[t++])&&(n=gR(e))&&(a&&(a+=" "),a+=n);return a},gR=s=>{if(typeof s=="string")return s;let t,e="";for(let n=0;n<s.length;n++)s[n]&&(t=gR(s[n]))&&(e&&(e+=" "),e+=t);return e},l3=(s,...t)=>{let e,n,a,o;const c=d=>{const f=t.reduce((g,y)=>y(g),s());return e=s3(f),n=e.cache.get,a=e.cache.set,o=u,u(d)},u=d=>{const f=n(d);if(f)return f;const g=a3(d,e);return a(d,g),g};return o=c,(...d)=>o(o3(...d))},c3=[],Ze=s=>{const t=e=>e[s]||c3;return t.isThemeGetter=!0,t},mR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,yR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,u3=/^\d+\/\d+$/,h3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,f3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,p3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,g3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mu=s=>u3.test(s),zt=s=>!!s&&!Number.isNaN(Number(s)),Za=s=>!!s&&Number.isInteger(Number(s)),Mw=s=>s.endsWith("%")&&zt(s.slice(0,-1)),Or=s=>h3.test(s),m3=()=>!0,y3=s=>d3.test(s)&&!f3.test(s),vR=()=>!1,v3=s=>p3.test(s),b3=s=>g3.test(s),w3=s=>!yt(s)&&!vt(s),x3=s=>qh(s,xR,vR),yt=s=>mR.test(s),ol=s=>qh(s,AR,y3),Nw=s=>qh(s,C3,zt),lT=s=>qh(s,bR,vR),A3=s=>qh(s,wR,b3),Im=s=>qh(s,_R,v3),vt=s=>yR.test(s),Xd=s=>Gh(s,AR),_3=s=>Gh(s,T3),cT=s=>Gh(s,bR),E3=s=>Gh(s,xR),S3=s=>Gh(s,wR),Bm=s=>Gh(s,_R,!0),qh=(s,t,e)=>{const n=mR.exec(s);return n?n[1]?t(n[1]):e(n[2]):!1},Gh=(s,t,e=!1)=>{const n=yR.exec(s);return n?n[1]?t(n[1]):e:!1},bR=s=>s==="position"||s==="percentage",wR=s=>s==="image"||s==="url",xR=s=>s==="length"||s==="size"||s==="bg-size",AR=s=>s==="length",C3=s=>s==="number",T3=s=>s==="family-name",_R=s=>s==="shadow",k3=()=>{const s=Ze("color"),t=Ze("font"),e=Ze("text"),n=Ze("font-weight"),a=Ze("tracking"),o=Ze("leading"),c=Ze("breakpoint"),u=Ze("container"),d=Ze("spacing"),f=Ze("radius"),g=Ze("shadow"),y=Ze("inset-shadow"),b=Ze("text-shadow"),w=Ze("drop-shadow"),A=Ze("blur"),E=Ze("perspective"),T=Ze("aspect"),C=Ze("ease"),D=Ze("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],B=()=>[...z(),vt,yt],U=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],H=()=>[vt,yt,d],W=()=>[mu,"full","auto",...H()],Q=()=>[Za,"none","subgrid",vt,yt],nt=()=>["auto",{span:["full",Za,vt,yt]},Za,vt,yt],ot=()=>[Za,"auto",vt,yt],ht=()=>["auto","min","max","fr",vt,yt],lt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...H()],q=()=>[mu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],X=()=>[s,vt,yt],wt=()=>[...z(),cT,lT,{position:[vt,yt]}],Ct=()=>["no-repeat",{repeat:["","x","y","space","round"]}],j=()=>["auto","cover","contain",E3,x3,{size:[vt,yt]}],G=()=>[Mw,Xd,ol],tt=()=>["","none","full",f,vt,yt],at=()=>["",zt,Xd,ol],pt=()=>["solid","dashed","dotted","double"],At=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ut=()=>[zt,Mw,cT,lT],Gt=()=>["","none",A,vt,yt],Pt=()=>["none",zt,vt,yt],Xt=()=>["none",zt,vt,yt],ce=()=>[zt,vt,yt],cn=()=>[mu,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Or],breakpoint:[Or],color:[m3],container:[Or],"drop-shadow":[Or],ease:["in","out","in-out"],font:[w3],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Or],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Or],shadow:[Or],spacing:["px",zt],text:[Or],"text-shadow":[Or],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",mu,yt,vt,T]}],container:["container"],columns:[{columns:[zt,yt,vt,u]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:B()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:W()}],"inset-x":[{"inset-x":W()}],"inset-y":[{"inset-y":W()}],start:[{start:W()}],end:[{end:W()}],top:[{top:W()}],right:[{right:W()}],bottom:[{bottom:W()}],left:[{left:W()}],visibility:["visible","invisible","collapse"],z:[{z:[Za,"auto",vt,yt]}],basis:[{basis:[mu,"full","auto",u,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[zt,mu,"auto","initial","none",yt]}],grow:[{grow:["",zt,vt,yt]}],shrink:[{shrink:["",zt,vt,yt]}],order:[{order:[Za,"first","last","none",vt,yt]}],"grid-cols":[{"grid-cols":Q()}],"col-start-end":[{col:nt()}],"col-start":[{"col-start":ot()}],"col-end":[{"col-end":ot()}],"grid-rows":[{"grid-rows":Q()}],"row-start-end":[{row:nt()}],"row-start":[{"row-start":ot()}],"row-end":[{"row-end":ot()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ht()}],"auto-rows":[{"auto-rows":ht()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...lt(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...lt()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":lt()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[u,"screen",...q()]}],"min-w":[{"min-w":[u,"screen","none",...q()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",e,Xd,ol]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,vt,Nw]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Mw,yt]}],"font-family":[{font:[_3,yt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,vt,yt]}],"line-clamp":[{"line-clamp":[zt,"none",vt,Nw]}],leading:[{leading:[o,...H()]}],"list-image":[{"list-image":["none",vt,yt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",vt,yt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pt(),"wavy"]}],"text-decoration-thickness":[{decoration:[zt,"from-font","auto",vt,ol]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[zt,"auto",vt,yt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vt,yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vt,yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:wt()}],"bg-repeat":[{bg:Ct()}],"bg-size":[{bg:j()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Za,vt,yt],radial:["",vt,yt],conic:[Za,vt,yt]},S3,A3]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:tt()}],"rounded-s":[{"rounded-s":tt()}],"rounded-e":[{"rounded-e":tt()}],"rounded-t":[{"rounded-t":tt()}],"rounded-r":[{"rounded-r":tt()}],"rounded-b":[{"rounded-b":tt()}],"rounded-l":[{"rounded-l":tt()}],"rounded-ss":[{"rounded-ss":tt()}],"rounded-se":[{"rounded-se":tt()}],"rounded-ee":[{"rounded-ee":tt()}],"rounded-es":[{"rounded-es":tt()}],"rounded-tl":[{"rounded-tl":tt()}],"rounded-tr":[{"rounded-tr":tt()}],"rounded-br":[{"rounded-br":tt()}],"rounded-bl":[{"rounded-bl":tt()}],"border-w":[{border:at()}],"border-w-x":[{"border-x":at()}],"border-w-y":[{"border-y":at()}],"border-w-s":[{"border-s":at()}],"border-w-e":[{"border-e":at()}],"border-w-t":[{"border-t":at()}],"border-w-r":[{"border-r":at()}],"border-w-b":[{"border-b":at()}],"border-w-l":[{"border-l":at()}],"divide-x":[{"divide-x":at()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":at()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pt(),"hidden","none"]}],"divide-style":[{divide:[...pt(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...pt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[zt,vt,yt]}],"outline-w":[{outline:["",zt,Xd,ol]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",g,Bm,Im]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",y,Bm,Im]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:at()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[zt,ol]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":at()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",b,Bm,Im]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[zt,vt,yt]}],"mix-blend":[{"mix-blend":[...At(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":At()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[zt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ut()}],"mask-image-linear-to-pos":[{"mask-linear-to":ut()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":ut()}],"mask-image-t-to-pos":[{"mask-t-to":ut()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":ut()}],"mask-image-r-to-pos":[{"mask-r-to":ut()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":ut()}],"mask-image-b-to-pos":[{"mask-b-to":ut()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":ut()}],"mask-image-l-to-pos":[{"mask-l-to":ut()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":ut()}],"mask-image-x-to-pos":[{"mask-x-to":ut()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":ut()}],"mask-image-y-to-pos":[{"mask-y-to":ut()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[vt,yt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ut()}],"mask-image-radial-to-pos":[{"mask-radial-to":ut()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":z()}],"mask-image-conic-pos":[{"mask-conic":[zt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ut()}],"mask-image-conic-to-pos":[{"mask-conic-to":ut()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:wt()}],"mask-repeat":[{mask:Ct()}],"mask-size":[{mask:j()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",vt,yt]}],filter:[{filter:["","none",vt,yt]}],blur:[{blur:Gt()}],brightness:[{brightness:[zt,vt,yt]}],contrast:[{contrast:[zt,vt,yt]}],"drop-shadow":[{"drop-shadow":["","none",w,Bm,Im]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",zt,vt,yt]}],"hue-rotate":[{"hue-rotate":[zt,vt,yt]}],invert:[{invert:["",zt,vt,yt]}],saturate:[{saturate:[zt,vt,yt]}],sepia:[{sepia:["",zt,vt,yt]}],"backdrop-filter":[{"backdrop-filter":["","none",vt,yt]}],"backdrop-blur":[{"backdrop-blur":Gt()}],"backdrop-brightness":[{"backdrop-brightness":[zt,vt,yt]}],"backdrop-contrast":[{"backdrop-contrast":[zt,vt,yt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",zt,vt,yt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[zt,vt,yt]}],"backdrop-invert":[{"backdrop-invert":["",zt,vt,yt]}],"backdrop-opacity":[{"backdrop-opacity":[zt,vt,yt]}],"backdrop-saturate":[{"backdrop-saturate":[zt,vt,yt]}],"backdrop-sepia":[{"backdrop-sepia":["",zt,vt,yt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",vt,yt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[zt,"initial",vt,yt]}],ease:[{ease:["linear","initial",C,vt,yt]}],delay:[{delay:[zt,vt,yt]}],animate:[{animate:["none",D,vt,yt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,vt,yt]}],"perspective-origin":[{"perspective-origin":B()}],rotate:[{rotate:Pt()}],"rotate-x":[{"rotate-x":Pt()}],"rotate-y":[{"rotate-y":Pt()}],"rotate-z":[{"rotate-z":Pt()}],scale:[{scale:Xt()}],"scale-x":[{"scale-x":Xt()}],"scale-y":[{"scale-y":Xt()}],"scale-z":[{"scale-z":Xt()}],"scale-3d":["scale-3d"],skew:[{skew:ce()}],"skew-x":[{"skew-x":ce()}],"skew-y":[{"skew-y":ce()}],transform:[{transform:[vt,yt,"","none","gpu","cpu"]}],"transform-origin":[{origin:B()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:cn()}],"translate-x":[{"translate-x":cn()}],"translate-y":[{"translate-y":cn()}],"translate-z":[{"translate-z":cn()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vt,yt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vt,yt]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[zt,Xd,ol,Nw]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},R3=l3(k3);function Li(...s){return R3(Vh(s))}function uT(s){return new Date(s).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})}function M3(s){return s.slice(s.lastIndexOf(".")+1).toLowerCase()}function ER(s){const t=M3(s);return{tex:"",typ:"",pdf:"",png:"",jpg:"",jpeg:"",gif:"",svg:"",bib:"",txt:"",md:""}[t]||""}/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D3=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),hT=s=>{const t=D3(s);return t.charAt(0).toUpperCase()+t.slice(1)},SR=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),L3=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=S.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:c,...u},d)=>S.createElement("svg",{ref:d,...O3,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:SR("lucide",a),...!o&&!L3(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>S.createElement(f,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=(s,t)=>{const e=S.forwardRef(({className:n,...a},o)=>S.createElement(j3,{ref:o,iconNode:t,className:SR(`lucide-${N3(hT(s))}`,`lucide-${s}`,n),...a}));return e.displayName=hT(s),e};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],dT=Ft("calendar",P3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],z3=Ft("check",F3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],B3=Ft("chevron-down",I3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],H3=Ft("chevron-left",U3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],q3=Ft("chevron-up",V3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],X3=Ft("circle-alert",G3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Y3=Ft("circle-check-big",$3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fT=Ft("clock",K3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Q3=Ft("copy",W3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xy=Ft("download",Z3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],tF=Ft("eye-off",J3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pT=Ft("eye",eF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],wa=Ft("file-code-corner",nF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],gT=Ft("file-down",iF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ay=Ft("file-text",sF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],aF=Ft("file",rF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],i_=Ft("folder-open",oF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],CR=Ft("folder",lF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],uF=Ft("hard-drive",cF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mT=Ft("info",hF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],fF=Ft("layout-grid",dF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],gF=Ft("list",pF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yF=Ft("loader-circle",mF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],bF=Ft("log-out",vF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],TR=Ft("moon",wF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],AF=Ft("panel-left-close",xF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],EF=Ft("panel-left",_F);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],CF=Ft("play",SF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yT=Ft("plus",TF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],RF=Ft("save",kF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],hx=Ft("share-2",MF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],DF=Ft("sparkles",NF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],kR=Ft("sun",LF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],dx=Ft("trash-2",OF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],PF=Ft("upload",jF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],zF=Ft("user-plus",FF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$y=Ft("users",IF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],s_=Ft("x",BF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],HF=Ft("zoom-in",UF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],qF=Ft("zoom-out",VF);function Rs({className:s,size:t="md"}){const e={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return x.jsx(yF,{className:Li("animate-spin text-primary",e[t],s)})}function RR({message:s="ang ti..."}){return x.jsx("div",{className:"flex h-full w-full items-center justify-center bg-background",children:x.jsxs("div",{className:"flex flex-col items-center gap-4",children:[x.jsx(Rs,{size:"lg"}),x.jsx("p",{className:"text-muted-foreground",children:s})]})})}const vT=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,bT=Vh,GF=(s,t)=>e=>{var n;if((t==null?void 0:t.variants)==null)return bT(s,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:a,defaultVariants:o}=t,c=Object.keys(a).map(f=>{const g=e==null?void 0:e[f],y=o==null?void 0:o[f];if(g===null)return null;const b=vT(g)||vT(y);return a[f][b]}),u=e&&Object.entries(e).reduce((f,g)=>{let[y,b]=g;return b===void 0||(f[y]=b),f},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,g)=>{let{class:y,className:b,...w}=g;return Object.entries(w).every(A=>{let[E,T]=A;return Array.isArray(T)?T.includes({...o,...u}[E]):{...o,...u}[E]===T})?[...f,y,b]:f},[]);return bT(s,c,d,e==null?void 0:e.class,e==null?void 0:e.className)},XF=GF("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ie=S.forwardRef(({className:s,variant:t,size:e,...n},a)=>x.jsx("button",{className:Li(XF({variant:t,size:e,className:s})),ref:a,...n}));Ie.displayName="Button";const To=S.forwardRef(({className:s,type:t,label:e,error:n,...a},o)=>x.jsxs("div",{className:"space-y-1.5",children:[e&&x.jsx("label",{className:"text-sm font-medium text-foreground",children:e}),x.jsx("input",{type:t,className:Li("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",n&&"border-destructive focus-visible:ring-destructive",s),ref:o,...a}),n&&x.jsx("p",{className:"text-sm text-destructive",children:n})]}));To.displayName="Input";function $F(){const s=_c(),{login:t}=Ec(),[e,n]=S.useState(""),[a,o]=S.useState(""),[c,u]=S.useState(""),[d,f]=S.useState(!1),g=async y=>{y.preventDefault(),u(""),f(!0);try{await t(e,a),s("/dashboard")}catch(b){u(b instanceof Error?b.message:"ng nhp tht bi")}finally{f(!1)}};return x.jsxs("div",{className:"flex min-h-screen",children:[x.jsx("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary/20 via-primary/10 to-background items-center justify-center p-12",children:x.jsxs("div",{className:"max-w-md space-y-6",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-3 rounded-xl bg-primary/20",children:x.jsx(wa,{className:"h-10 w-10 text-primary"})}),x.jsx("span",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"HeyTeX"})]}),x.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Bin tp LaTeX & Typst chuyn nghip"}),x.jsx("p",{className:"text-lg text-muted-foreground",children:"Tri nghim giao din ging VS Code, bin dch Wasm siu tc, v cng tc thi gian thc vi ng nghip."}),x.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[x.jsx(DF,{className:"h-5 w-5"}),x.jsx("span",{children:"Powered by WebAssembly"})]})]})}),x.jsx("div",{className:"flex w-full lg:w-1/2 items-center justify-center p-8",children:x.jsxs("div",{className:"w-full max-w-md space-y-8",children:[x.jsxs("div",{className:"text-center lg:text-left",children:[x.jsxs("div",{className:"flex items-center gap-2 justify-center lg:hidden mb-8",children:[x.jsx(wa,{className:"h-8 w-8 text-primary"}),x.jsx("span",{className:"text-2xl font-bold",children:"HeyTeX"})]}),x.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"ng nhp"}),x.jsx("p",{className:"mt-2 text-muted-foreground",children:"Cho mng bn quay li! Vui lng nhp thng tin ng nhp."})]}),x.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c&&x.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:c}),x.jsx(To,{label:"Email",type:"email",placeholder:"email@example.com",value:e,onChange:y=>n(y.target.value),required:!0,autoComplete:"email"}),x.jsx(To,{label:"Mt khu",type:"password",placeholder:"",value:a,onChange:y=>o(y.target.value),required:!0,autoComplete:"current-password"}),x.jsx(Ie,{type:"submit",className:"w-full",disabled:d,children:d?x.jsx(Rs,{size:"sm"}):"ng nhp"})]}),x.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Cha c ti khon?"," ",x.jsx(Ov,{to:"/register",className:"text-primary hover:underline font-medium",children:"ng k ngay"})]})]})})]})}function YF(){const s=_c(),{register:t}=Ec(),[e,n]=S.useState(""),[a,o]=S.useState(""),[c,u]=S.useState(""),[d,f]=S.useState(""),[g,y]=S.useState(""),[b,w]=S.useState(!1),A=async E=>{if(E.preventDefault(),y(""),c!==d){y("Mt khu xc nhn khng khp");return}if(c.length<6){y("Mt khu phi c t nht 6 k t");return}w(!0);try{await t(a,c,e),s("/dashboard")}catch(T){y(T instanceof Error?T.message:"ng k tht bi")}finally{w(!1)}};return x.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-8",children:x.jsxs("div",{className:"w-full max-w-md space-y-8",children:[x.jsxs("div",{className:"text-center",children:[x.jsxs("div",{className:"flex items-center gap-2 justify-center mb-6",children:[x.jsx(wa,{className:"h-10 w-10 text-primary"}),x.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"HeyTeX"})]}),x.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"To ti khon mi"}),x.jsx("p",{className:"mt-2 text-muted-foreground",children:"Bt u hnh trnh bin tp ti liu chuyn nghip"})]}),x.jsx("div",{className:"glass rounded-2xl p-8 shadow-xl",children:x.jsxs("form",{onSubmit:A,className:"space-y-5",children:[g&&x.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:g}),x.jsx(To,{label:"H v tn",type:"text",placeholder:"Nguyn Vn A",value:e,onChange:E=>n(E.target.value),required:!0,autoComplete:"name"}),x.jsx(To,{label:"Email",type:"email",placeholder:"email@example.com",value:a,onChange:E=>o(E.target.value),required:!0,autoComplete:"email"}),x.jsx(To,{label:"Mt khu",type:"password",placeholder:"",value:c,onChange:E=>u(E.target.value),required:!0,autoComplete:"new-password"}),x.jsx(To,{label:"Xc nhn mt khu",type:"password",placeholder:"",value:d,onChange:E=>f(E.target.value),required:!0,autoComplete:"new-password"}),x.jsx(Ie,{type:"submit",className:"w-full",disabled:b,children:b?x.jsx(Rs,{size:"sm"}):"ng k"})]})}),x.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[" c ti khon?"," ",x.jsx(Ov,{to:"/login",className:"text-primary hover:underline font-medium",children:"ng nhp"})]})]})})}function KF({project:s,viewMode:t,onDelete:e,onDownloadZip:n,onDownloadPdf:a,onShowInfo:o}){const c=_c();return t==="list"?x.jsx("div",{className:"group glass rounded-lg p-4 hover:border-primary/50 transition-all",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:`p-3 rounded-lg cursor-pointer ${s.engine==="TYPST"?"bg-cyan-500/20 text-cyan-500":"bg-orange-500/20 text-orange-500"}`,onClick:()=>c(`/editor/${s.id}`),children:x.jsx(wa,{className:"h-5 w-5"})}),x.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>c(`/editor/${s.id}`),children:[x.jsx("h3",{className:"font-semibold text-foreground truncate",title:s.name,children:s.name}),x.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(fT,{className:"h-3 w-3"}),uT(s.updatedAt)]}),x.jsx("span",{className:`px-2 py-0.5 rounded-full ${s.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:s.engine})]})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:u=>{u.stopPropagation(),o(s.id)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Thng tin",children:x.jsx(mT,{className:"h-4 w-4"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),n(s)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Ti ZIP",children:x.jsx(Xy,{className:"h-4 w-4"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),a(s)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Ti PDF",children:x.jsx(gT,{className:"h-4 w-4"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),c(`/editor/${s.id}`)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Chia s",children:x.jsx(hx,{className:"h-4 w-4"})}),x.jsx("div",{className:"w-px h-6 bg-border mx-1"}),x.jsx("button",{onClick:u=>{u.stopPropagation(),e(s.id)},className:"p-2 hover:bg-destructive/20 text-destructive rounded-lg transition-colors",title:"Xa",children:x.jsx(dx,{className:"h-4 w-4"})})]})]})}):x.jsxs("div",{className:"group relative glass rounded-xl p-5 hover:border-primary/50 transition-all",children:[x.jsxs("div",{className:"cursor-pointer",onClick:()=>c(`/editor/${s.id}`),children:[x.jsx("div",{className:"flex items-start justify-between mb-4",children:x.jsx("div",{className:`p-2 rounded-lg ${s.engine==="TYPST"?"bg-cyan-500/20 text-cyan-500":"bg-orange-500/20 text-orange-500"}`,children:x.jsx(wa,{className:"h-5 w-5"})})}),x.jsx("h3",{className:"font-semibold text-foreground mb-1 truncate",title:s.name,children:s.name}),x.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-3",children:[x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(fT,{className:"h-3 w-3"}),uT(s.updatedAt)]}),x.jsx("span",{className:`px-2 py-0.5 rounded-full ${s.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:s.engine})]})]}),x.jsxs("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[x.jsx("button",{onClick:u=>{u.stopPropagation(),o(s.id)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Thng tin",children:x.jsx(mT,{className:"h-3.5 w-3.5"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),n(s)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Ti ZIP",children:x.jsx(Xy,{className:"h-3.5 w-3.5"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),a(s)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Ti PDF",children:x.jsx(gT,{className:"h-3.5 w-3.5"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),c(`/editor/${s.id}`)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Chia s",children:x.jsx(hx,{className:"h-3.5 w-3.5"})}),x.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),x.jsx("button",{onClick:u=>{u.stopPropagation(),e(s.id)},className:"p-1.5 hover:bg-destructive/20 text-destructive rounded-lg transition-colors glass",title:"Xa",children:x.jsx(dx,{className:"h-3.5 w-3.5"})})]})]})}function Ro(s,t,{checkForDefaultPrevented:e=!0}={}){return function(a){if(s==null||s(a),e===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function wT(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function MR(...s){return t=>{let e=!1;const n=s.map(a=>{const o=wT(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():wT(s[a],null)}}}}function Sc(...s){return S.useCallback(MR(...s),s)}function WF(s,t){const e=S.createContext(t),n=o=>{const{children:c,...u}=o,d=S.useMemo(()=>u,Object.values(u));return x.jsx(e.Provider,{value:d,children:c})};n.displayName=s+"Provider";function a(o){const c=S.useContext(e);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${s}\``)}return[n,a]}function QF(s,t=[]){let e=[];function n(o,c){const u=S.createContext(c),d=e.length;e=[...e,c];const f=y=>{var C;const{scope:b,children:w,...A}=y,E=((C=b==null?void 0:b[s])==null?void 0:C[d])||u,T=S.useMemo(()=>A,Object.values(A));return x.jsx(E.Provider,{value:T,children:w})};f.displayName=o+"Provider";function g(y,b){var E;const w=((E=b==null?void 0:b[s])==null?void 0:E[d])||u,A=S.useContext(w);if(A)return A;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[f,g]}const a=()=>{const o=e.map(c=>S.createContext(c));return function(u){const d=(u==null?void 0:u[s])||o;return S.useMemo(()=>({[`__scope${s}`]:{...u,[s]:d}}),[u,d])}};return a.scopeName=s,[n,ZF(a,...t)]}function ZF(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const n=s.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const c=n.reduce((u,{useScope:d,scopeName:f})=>{const y=d(o)[`__scope${f}`];return{...u,...y}},{});return S.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return e.scopeName=t.scopeName,e}var xf=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},JF=Xk[" useId ".trim().toString()]||(()=>{}),t4=0;function Dw(s){const[t,e]=S.useState(JF());return xf(()=>{e(n=>n??String(t4++))},[s]),s||(t?`radix-${t}`:"")}var e4=Xk[" useInsertionEffect ".trim().toString()]||xf;function n4({prop:s,defaultProp:t,onChange:e=()=>{},caller:n}){const[a,o,c]=i4({defaultProp:t,onChange:e}),u=s!==void 0,d=u?s:a;{const g=S.useRef(s!==void 0);S.useEffect(()=>{const y=g.current;y!==u&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,n])}const f=S.useCallback(g=>{var y;if(u){const b=s4(g)?g(s):g;b!==s&&((y=c.current)==null||y.call(c,b))}else o(g)},[u,s,o,c]);return[d,f]}function i4({defaultProp:s,onChange:t}){const[e,n]=S.useState(s),a=S.useRef(e),o=S.useRef(t);return e4(()=>{o.current=t},[t]),S.useEffect(()=>{var c;a.current!==e&&((c=o.current)==null||c.call(o,e),a.current=e)},[e,a]),[e,n,o]}function s4(s){return typeof s=="function"}function NR(s){const t=r4(s),e=S.forwardRef((n,a)=>{const{children:o,...c}=n,u=S.Children.toArray(o),d=u.find(o4);if(d){const f=d.props.children,g=u.map(y=>y===d?S.Children.count(f)>1?S.Children.only(null):S.isValidElement(f)?f.props.children:null:y);return x.jsx(t,{...c,ref:a,children:S.isValidElement(f)?S.cloneElement(f,void 0,g):null})}return x.jsx(t,{...c,ref:a,children:o})});return e.displayName=`${s}.Slot`,e}function r4(s){const t=S.forwardRef((e,n)=>{const{children:a,...o}=e;if(S.isValidElement(a)){const c=c4(a),u=l4(o,a.props);return a.type!==S.Fragment&&(u.ref=n?MR(n,c):c),S.cloneElement(a,u)}return S.Children.count(a)>1?S.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var a4=Symbol("radix.slottable");function o4(s){return S.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===a4}function l4(s,t){const e={...t};for(const n in t){const a=s[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?e[n]=(...u)=>{const d=o(...u);return a(...u),d}:a&&(e[n]=a):n==="style"?e[n]={...a,...o}:n==="className"&&(e[n]=[a,o].filter(Boolean).join(" "))}return{...s,...e}}function c4(s){var n,a;let t=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(a=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:a.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var u4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_a=u4.reduce((s,t)=>{const e=NR(`Primitive.${t}`),n=S.forwardRef((a,o)=>{const{asChild:c,...u}=a,d=c?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(d,{...u,ref:o})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{});function h4(s,t){s&&lR.flushSync(()=>s.dispatchEvent(t))}function Af(s){const t=S.useRef(s);return S.useEffect(()=>{t.current=s}),S.useMemo(()=>(...e)=>{var n;return(n=t.current)==null?void 0:n.call(t,...e)},[])}function d4(s,t=globalThis==null?void 0:globalThis.document){const e=Af(s);S.useEffect(()=>{const n=a=>{a.key==="Escape"&&e(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[e,t])}var f4="DismissableLayer",fx="dismissableLayer.update",p4="dismissableLayer.pointerDownOutside",g4="dismissableLayer.focusOutside",xT,DR=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),LR=S.forwardRef((s,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:c,onDismiss:u,...d}=s,f=S.useContext(DR),[g,y]=S.useState(null),b=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=S.useState({}),A=Sc(t,O=>y(O)),E=Array.from(f.layers),[T]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),C=E.indexOf(T),D=g?E.indexOf(g):-1,L=f.layersWithOutsidePointerEventsDisabled.size>0,z=D>=C,B=v4(O=>{const H=O.target,W=[...f.branches].some(Q=>Q.contains(H));!z||W||(a==null||a(O),c==null||c(O),O.defaultPrevented||u==null||u())},b),U=b4(O=>{const H=O.target;[...f.branches].some(Q=>Q.contains(H))||(o==null||o(O),c==null||c(O),O.defaultPrevented||u==null||u())},b);return d4(O=>{D===f.layers.size-1&&(n==null||n(O),!O.defaultPrevented&&u&&(O.preventDefault(),u()))},b),S.useEffect(()=>{if(g)return e&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(xT=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),AT(),()=>{e&&f.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=xT)}},[g,b,e,f]),S.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),AT())},[g,f]),S.useEffect(()=>{const O=()=>w({});return document.addEventListener(fx,O),()=>document.removeEventListener(fx,O)},[]),x.jsx(_a.div,{...d,ref:A,style:{pointerEvents:L?z?"auto":"none":void 0,...s.style},onFocusCapture:Ro(s.onFocusCapture,U.onFocusCapture),onBlurCapture:Ro(s.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Ro(s.onPointerDownCapture,B.onPointerDownCapture)})});LR.displayName=f4;var m4="DismissableLayerBranch",y4=S.forwardRef((s,t)=>{const e=S.useContext(DR),n=S.useRef(null),a=Sc(t,n);return S.useEffect(()=>{const o=n.current;if(o)return e.branches.add(o),()=>{e.branches.delete(o)}},[e.branches]),x.jsx(_a.div,{...s,ref:a})});y4.displayName=m4;function v4(s,t=globalThis==null?void 0:globalThis.document){const e=Af(s),n=S.useRef(!1),a=S.useRef(()=>{});return S.useEffect(()=>{const o=u=>{if(u.target&&!n.current){let d=function(){OR(p4,e,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,e]),{onPointerDownCapture:()=>n.current=!0}}function b4(s,t=globalThis==null?void 0:globalThis.document){const e=Af(s),n=S.useRef(!1);return S.useEffect(()=>{const a=o=>{o.target&&!n.current&&OR(g4,e,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function AT(){const s=new CustomEvent(fx);document.dispatchEvent(s)}function OR(s,t,e,{discrete:n}){const a=e.originalEvent.target,o=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:e});t&&a.addEventListener(s,t,{once:!0}),n?h4(a,o):a.dispatchEvent(o)}var Lw="focusScope.autoFocusOnMount",Ow="focusScope.autoFocusOnUnmount",_T={bubbles:!1,cancelable:!0},w4="FocusScope",jR=S.forwardRef((s,t)=>{const{loop:e=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...c}=s,[u,d]=S.useState(null),f=Af(a),g=Af(o),y=S.useRef(null),b=Sc(t,E=>d(E)),w=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(n){let E=function(L){if(w.paused||!u)return;const z=L.target;u.contains(z)?y.current=z:Ja(y.current,{select:!0})},T=function(L){if(w.paused||!u)return;const z=L.relatedTarget;z!==null&&(u.contains(z)||Ja(y.current,{select:!0}))},C=function(L){if(document.activeElement===document.body)for(const B of L)B.removedNodes.length>0&&Ja(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",T);const D=new MutationObserver(C);return u&&D.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",T),D.disconnect()}}},[n,u,w.paused]),S.useEffect(()=>{if(u){ST.add(w);const E=document.activeElement;if(!u.contains(E)){const C=new CustomEvent(Lw,_T);u.addEventListener(Lw,f),u.dispatchEvent(C),C.defaultPrevented||(x4(C4(PR(u)),{select:!0}),document.activeElement===E&&Ja(u))}return()=>{u.removeEventListener(Lw,f),setTimeout(()=>{const C=new CustomEvent(Ow,_T);u.addEventListener(Ow,g),u.dispatchEvent(C),C.defaultPrevented||Ja(E??document.body,{select:!0}),u.removeEventListener(Ow,g),ST.remove(w)},0)}}},[u,f,g,w]);const A=S.useCallback(E=>{if(!e&&!n||w.paused)return;const T=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,C=document.activeElement;if(T&&C){const D=E.currentTarget,[L,z]=A4(D);L&&z?!E.shiftKey&&C===z?(E.preventDefault(),e&&Ja(L,{select:!0})):E.shiftKey&&C===L&&(E.preventDefault(),e&&Ja(z,{select:!0})):C===D&&E.preventDefault()}},[e,n,w.paused]);return x.jsx(_a.div,{tabIndex:-1,...c,ref:b,onKeyDown:A})});jR.displayName=w4;function x4(s,{select:t=!1}={}){const e=document.activeElement;for(const n of s)if(Ja(n,{select:t}),document.activeElement!==e)return}function A4(s){const t=PR(s),e=ET(t,s),n=ET(t.reverse(),s);return[e,n]}function PR(s){const t=[],e=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function ET(s,t){for(const e of s)if(!_4(e,{upTo:t}))return e}function _4(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function E4(s){return s instanceof HTMLInputElement&&"select"in s}function Ja(s,{select:t=!1}={}){if(s&&s.focus){const e=document.activeElement;s.focus({preventScroll:!0}),s!==e&&E4(s)&&t&&s.select()}}var ST=S4();function S4(){let s=[];return{add(t){const e=s[0];t!==e&&(e==null||e.pause()),s=CT(s,t),s.unshift(t)},remove(t){var e;s=CT(s,t),(e=s[0])==null||e.resume()}}}function CT(s,t){const e=[...s],n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}function C4(s){return s.filter(t=>t.tagName!=="A")}var T4="Portal",FR=S.forwardRef((s,t)=>{var u;const{container:e,...n}=s,[a,o]=S.useState(!1);xf(()=>o(!0),[]);const c=e||a&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?PP.createPortal(x.jsx(_a.div,{...n,ref:t}),c):null});FR.displayName=T4;function k4(s,t){return S.useReducer((e,n)=>t[e][n]??e,s)}var jv=s=>{const{present:t,children:e}=s,n=R4(t),a=typeof e=="function"?e({present:n.isPresent}):S.Children.only(e),o=Sc(n.ref,M4(a));return typeof e=="function"||n.isPresent?S.cloneElement(a,{ref:o}):null};jv.displayName="Presence";function R4(s){const[t,e]=S.useState(),n=S.useRef(null),a=S.useRef(s),o=S.useRef("none"),c=s?"mounted":"unmounted",[u,d]=k4(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const f=Um(n.current);o.current=u==="mounted"?f:"none"},[u]),xf(()=>{const f=n.current,g=a.current;if(g!==s){const b=o.current,w=Um(f);s?d("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(g&&b!==w?"ANIMATION_OUT":"UNMOUNT"),a.current=s}},[s,d]),xf(()=>{if(t){let f;const g=t.ownerDocument.defaultView??window,y=w=>{const E=Um(n.current).includes(CSS.escape(w.animationName));if(w.target===t&&E&&(d("ANIMATION_END"),!a.current)){const T=t.style.animationFillMode;t.style.animationFillMode="forwards",f=g.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=T)})}},b=w=>{w.target===t&&(o.current=Um(n.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",y),t.addEventListener("animationend",y),()=>{g.clearTimeout(f),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",y),t.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:S.useCallback(f=>{n.current=f?getComputedStyle(f):null,e(f)},[])}}function Um(s){return(s==null?void 0:s.animationName)||"none"}function M4(s){var n,a;let t=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(a=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:a.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var jw=0;function N4(){S.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??TT()),document.body.insertAdjacentElement("beforeend",s[1]??TT()),jw++,()=>{jw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),jw--}},[])}function TT(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var ir=function(){return ir=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ir.apply(this,arguments)};function zR(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(e[n[a]]=s[n[a]]);return e}function D4(s,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return s.concat(o||Array.prototype.slice.call(t))}var oy="right-scroll-bar-position",ly="width-before-scroll-bar",L4="with-scroll-bars-hidden",O4="--removed-body-scroll-bar-size";function Pw(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function j4(s,t){var e=S.useState(function(){return{value:s,callback:t,facade:{get current(){return e.value},set current(n){var a=e.value;a!==n&&(e.value=n,e.callback(n,a))}}}})[0];return e.callback=t,e.facade}var P4=typeof window<"u"?S.useLayoutEffect:S.useEffect,kT=new WeakMap;function F4(s,t){var e=j4(null,function(n){return s.forEach(function(a){return Pw(a,n)})});return P4(function(){var n=kT.get(e);if(n){var a=new Set(n),o=new Set(s),c=e.current;a.forEach(function(u){o.has(u)||Pw(u,null)}),o.forEach(function(u){a.has(u)||Pw(u,c)})}kT.set(e,s)},[s]),e}function z4(s){return s}function I4(s,t){t===void 0&&(t=z4);var e=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:s},useMedium:function(o){var c=t(o,n);return e.push(c),function(){e=e.filter(function(u){return u!==c})}},assignSyncMedium:function(o){for(n=!0;e.length;){var c=e;e=[],c.forEach(o)}e={push:function(u){return o(u)},filter:function(){return e}}},assignMedium:function(o){n=!0;var c=[];if(e.length){var u=e;e=[],u.forEach(o),c=e}var d=function(){var g=c;c=[],g.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),e={push:function(g){c.push(g),f()},filter:function(g){return c=c.filter(g),e}}}};return a}function B4(s){s===void 0&&(s={});var t=I4(null);return t.options=ir({async:!0,ssr:!1},s),t}var IR=function(s){var t=s.sideCar,e=zR(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return S.createElement(n,ir({},e))};IR.isSideCarExport=!0;function U4(s,t){return s.useMedium(t),IR}var BR=B4(),Fw=function(){},Pv=S.forwardRef(function(s,t){var e=S.useRef(null),n=S.useState({onScrollCapture:Fw,onWheelCapture:Fw,onTouchMoveCapture:Fw}),a=n[0],o=n[1],c=s.forwardProps,u=s.children,d=s.className,f=s.removeScrollBar,g=s.enabled,y=s.shards,b=s.sideCar,w=s.noRelative,A=s.noIsolation,E=s.inert,T=s.allowPinchZoom,C=s.as,D=C===void 0?"div":C,L=s.gapMode,z=zR(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),B=b,U=F4([e,t]),O=ir(ir({},z),a);return S.createElement(S.Fragment,null,g&&S.createElement(B,{sideCar:BR,removeScrollBar:f,shards:y,noRelative:w,noIsolation:A,inert:E,setCallbacks:o,allowPinchZoom:!!T,lockRef:e,gapMode:L}),c?S.cloneElement(S.Children.only(u),ir(ir({},O),{ref:U})):S.createElement(D,ir({},O,{className:d,ref:U}),u))});Pv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pv.classNames={fullWidth:ly,zeroRight:oy};var H4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function V4(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=H4();return t&&s.setAttribute("nonce",t),s}function q4(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function G4(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var X4=function(){var s=0,t=null;return{add:function(e){s==0&&(t=V4())&&(q4(t,e),G4(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$4=function(){var s=X4();return function(t,e){S.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&e])}},UR=function(){var s=$4(),t=function(e){var n=e.styles,a=e.dynamic;return s(n,a),null};return t},Y4={left:0,top:0,right:0,gap:0},zw=function(s){return parseInt(s||"",10)||0},K4=function(s){var t=window.getComputedStyle(document.body),e=t[s==="padding"?"paddingLeft":"marginLeft"],n=t[s==="padding"?"paddingTop":"marginTop"],a=t[s==="padding"?"paddingRight":"marginRight"];return[zw(e),zw(n),zw(a)]},W4=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return Y4;var t=K4(s),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}},Q4=UR(),Ru="data-scroll-locked",Z4=function(s,t,e,n){var a=s.left,o=s.top,c=s.right,u=s.gap;return e===void 0&&(e="margin"),`
  .`.concat(L4,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(Ru,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(oy,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(ly,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(oy," .").concat(oy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ly," .").concat(ly,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ru,`] {
    `).concat(O4,": ").concat(u,`px;
  }
`)},RT=function(){var s=parseInt(document.body.getAttribute(Ru)||"0",10);return isFinite(s)?s:0},J4=function(){S.useEffect(function(){return document.body.setAttribute(Ru,(RT()+1).toString()),function(){var s=RT()-1;s<=0?document.body.removeAttribute(Ru):document.body.setAttribute(Ru,s.toString())}},[])},tz=function(s){var t=s.noRelative,e=s.noImportant,n=s.gapMode,a=n===void 0?"margin":n;J4();var o=S.useMemo(function(){return W4(a)},[a]);return S.createElement(Q4,{styles:Z4(o,!t,a,e?"":"!important")})},px=!1;if(typeof window<"u")try{var Hm=Object.defineProperty({},"passive",{get:function(){return px=!0,!0}});window.addEventListener("test",Hm,Hm),window.removeEventListener("test",Hm,Hm)}catch{px=!1}var yu=px?{passive:!1}:!1,ez=function(s){return s.tagName==="TEXTAREA"},HR=function(s,t){if(!(s instanceof Element))return!1;var e=window.getComputedStyle(s);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!ez(s)&&e[t]==="visible")},nz=function(s){return HR(s,"overflowY")},iz=function(s){return HR(s,"overflowX")},MT=function(s,t){var e=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=VR(s,n);if(a){var o=qR(s,n),c=o[1],u=o[2];if(c>u)return!0}n=n.parentNode}while(n&&n!==e.body);return!1},sz=function(s){var t=s.scrollTop,e=s.scrollHeight,n=s.clientHeight;return[t,e,n]},rz=function(s){var t=s.scrollLeft,e=s.scrollWidth,n=s.clientWidth;return[t,e,n]},VR=function(s,t){return s==="v"?nz(t):iz(t)},qR=function(s,t){return s==="v"?sz(t):rz(t)},az=function(s,t){return s==="h"&&t==="rtl"?-1:1},oz=function(s,t,e,n,a){var o=az(s,window.getComputedStyle(t).direction),c=o*n,u=e.target,d=t.contains(u),f=!1,g=c>0,y=0,b=0;do{if(!u)break;var w=qR(s,u),A=w[0],E=w[1],T=w[2],C=E-T-o*A;(A||C)&&VR(s,u)&&(y+=C,b+=A);var D=u.parentNode;u=D&&D.nodeType===Node.DOCUMENT_FRAGMENT_NODE?D.host:D}while(!d&&u!==document.body||d&&(t.contains(u)||t===u));return(g&&Math.abs(y)<1||!g&&Math.abs(b)<1)&&(f=!0),f},Vm=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},NT=function(s){return[s.deltaX,s.deltaY]},DT=function(s){return s&&"current"in s?s.current:s},lz=function(s,t){return s[0]===t[0]&&s[1]===t[1]},cz=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},uz=0,vu=[];function hz(s){var t=S.useRef([]),e=S.useRef([0,0]),n=S.useRef(),a=S.useState(uz++)[0],o=S.useState(UR)[0],c=S.useRef(s);S.useEffect(function(){c.current=s},[s]),S.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(a));var E=D4([s.lockRef.current],(s.shards||[]).map(DT),!0).filter(Boolean);return E.forEach(function(T){return T.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),E.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(a))})}}},[s.inert,s.lockRef.current,s.shards]);var u=S.useCallback(function(E,T){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!c.current.allowPinchZoom;var C=Vm(E),D=e.current,L="deltaX"in E?E.deltaX:D[0]-C[0],z="deltaY"in E?E.deltaY:D[1]-C[1],B,U=E.target,O=Math.abs(L)>Math.abs(z)?"h":"v";if("touches"in E&&O==="h"&&U.type==="range")return!1;var H=window.getSelection(),W=H&&H.anchorNode,Q=W?W===U||W.contains(U):!1;if(Q)return!1;var nt=MT(O,U);if(!nt)return!0;if(nt?B=O:(B=O==="v"?"h":"v",nt=MT(O,U)),!nt)return!1;if(!n.current&&"changedTouches"in E&&(L||z)&&(n.current=B),!B)return!0;var ot=n.current||B;return oz(ot,T,E,ot==="h"?L:z)},[]),d=S.useCallback(function(E){var T=E;if(!(!vu.length||vu[vu.length-1]!==o)){var C="deltaY"in T?NT(T):Vm(T),D=t.current.filter(function(B){return B.name===T.type&&(B.target===T.target||T.target===B.shadowParent)&&lz(B.delta,C)})[0];if(D&&D.should){T.cancelable&&T.preventDefault();return}if(!D){var L=(c.current.shards||[]).map(DT).filter(Boolean).filter(function(B){return B.contains(T.target)}),z=L.length>0?u(T,L[0]):!c.current.noIsolation;z&&T.cancelable&&T.preventDefault()}}},[]),f=S.useCallback(function(E,T,C,D){var L={name:E,delta:T,target:C,should:D,shadowParent:dz(C)};t.current.push(L),setTimeout(function(){t.current=t.current.filter(function(z){return z!==L})},1)},[]),g=S.useCallback(function(E){e.current=Vm(E),n.current=void 0},[]),y=S.useCallback(function(E){f(E.type,NT(E),E.target,u(E,s.lockRef.current))},[]),b=S.useCallback(function(E){f(E.type,Vm(E),E.target,u(E,s.lockRef.current))},[]);S.useEffect(function(){return vu.push(o),s.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:b}),document.addEventListener("wheel",d,yu),document.addEventListener("touchmove",d,yu),document.addEventListener("touchstart",g,yu),function(){vu=vu.filter(function(E){return E!==o}),document.removeEventListener("wheel",d,yu),document.removeEventListener("touchmove",d,yu),document.removeEventListener("touchstart",g,yu)}},[]);var w=s.removeScrollBar,A=s.inert;return S.createElement(S.Fragment,null,A?S.createElement(o,{styles:cz(a)}):null,w?S.createElement(tz,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function dz(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const fz=U4(BR,hz);var GR=S.forwardRef(function(s,t){return S.createElement(Pv,ir({},s,{ref:t,sideCar:fz}))});GR.classNames=Pv.classNames;var pz=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},bu=new WeakMap,qm=new WeakMap,Gm={},Iw=0,XR=function(s){return s&&(s.host||XR(s.parentNode))},gz=function(s,t){return t.map(function(e){if(s.contains(e))return e;var n=XR(e);return n&&s.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",s,". Doing nothing"),null)}).filter(function(e){return!!e})},mz=function(s,t,e,n){var a=gz(t,Array.isArray(s)?s:[s]);Gm[e]||(Gm[e]=new WeakMap);var o=Gm[e],c=[],u=new Set,d=new Set(a),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};a.forEach(f);var g=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(b){if(u.has(b))g(b);else try{var w=b.getAttribute(n),A=w!==null&&w!=="false",E=(bu.get(b)||0)+1,T=(o.get(b)||0)+1;bu.set(b,E),o.set(b,T),c.push(b),E===1&&A&&qm.set(b,!0),T===1&&b.setAttribute(e,"true"),A||b.setAttribute(n,"true")}catch(C){console.error("aria-hidden: cannot operate on ",b,C)}})};return g(t),u.clear(),Iw++,function(){c.forEach(function(y){var b=bu.get(y)-1,w=o.get(y)-1;bu.set(y,b),o.set(y,w),b||(qm.has(y)||y.removeAttribute(n),qm.delete(y)),w||y.removeAttribute(e)}),Iw--,Iw||(bu=new WeakMap,bu=new WeakMap,qm=new WeakMap,Gm={})}},yz=function(s,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),a=pz(s);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),mz(n,a,e,"aria-hidden")):function(){return null}},Fv="Dialog",[$R]=QF(Fv),[vz,Ds]=$R(Fv),YR=s=>{const{__scopeDialog:t,children:e,open:n,defaultOpen:a,onOpenChange:o,modal:c=!0}=s,u=S.useRef(null),d=S.useRef(null),[f,g]=n4({prop:n,defaultProp:a??!1,onChange:o,caller:Fv});return x.jsx(vz,{scope:t,triggerRef:u,contentRef:d,contentId:Dw(),titleId:Dw(),descriptionId:Dw(),open:f,onOpenChange:g,onOpenToggle:S.useCallback(()=>g(y=>!y),[g]),modal:c,children:e})};YR.displayName=Fv;var KR="DialogTrigger",bz=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(KR,e),o=Sc(t,a.triggerRef);return x.jsx(_a.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":o_(a.open),...n,ref:o,onClick:Ro(s.onClick,a.onOpenToggle)})});bz.displayName=KR;var r_="DialogPortal",[wz,WR]=$R(r_,{forceMount:void 0}),QR=s=>{const{__scopeDialog:t,forceMount:e,children:n,container:a}=s,o=Ds(r_,t);return x.jsx(wz,{scope:t,forceMount:e,children:S.Children.map(n,c=>x.jsx(jv,{present:e||o.open,children:x.jsx(FR,{asChild:!0,container:a,children:c})}))})};QR.displayName=r_;var Yy="DialogOverlay",ZR=S.forwardRef((s,t)=>{const e=WR(Yy,s.__scopeDialog),{forceMount:n=e.forceMount,...a}=s,o=Ds(Yy,s.__scopeDialog);return o.modal?x.jsx(jv,{present:n||o.open,children:x.jsx(Az,{...a,ref:t})}):null});ZR.displayName=Yy;var xz=NR("DialogOverlay.RemoveScroll"),Az=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(Yy,e);return x.jsx(GR,{as:xz,allowPinchZoom:!0,shards:[a.contentRef],children:x.jsx(_a.div,{"data-state":o_(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),dc="DialogContent",JR=S.forwardRef((s,t)=>{const e=WR(dc,s.__scopeDialog),{forceMount:n=e.forceMount,...a}=s,o=Ds(dc,s.__scopeDialog);return x.jsx(jv,{present:n||o.open,children:o.modal?x.jsx(_z,{...a,ref:t}):x.jsx(Ez,{...a,ref:t})})});JR.displayName=dc;var _z=S.forwardRef((s,t)=>{const e=Ds(dc,s.__scopeDialog),n=S.useRef(null),a=Sc(t,e.contentRef,n);return S.useEffect(()=>{const o=n.current;if(o)return yz(o)},[]),x.jsx(t2,{...s,ref:a,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ro(s.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=e.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Ro(s.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&o.preventDefault()}),onFocusOutside:Ro(s.onFocusOutside,o=>o.preventDefault())})}),Ez=S.forwardRef((s,t)=>{const e=Ds(dc,s.__scopeDialog),n=S.useRef(!1),a=S.useRef(!1);return x.jsx(t2,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,u;(c=s.onCloseAutoFocus)==null||c.call(s,o),o.defaultPrevented||(n.current||(u=e.triggerRef.current)==null||u.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var d,f;(d=s.onInteractOutside)==null||d.call(s,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((f=e.triggerRef.current)==null?void 0:f.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),t2=S.forwardRef((s,t)=>{const{__scopeDialog:e,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...c}=s,u=Ds(dc,e),d=S.useRef(null),f=Sc(t,d);return N4(),x.jsxs(x.Fragment,{children:[x.jsx(jR,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:x.jsx(LR,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":o_(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),x.jsxs(x.Fragment,{children:[x.jsx(Cz,{titleId:u.titleId}),x.jsx(kz,{contentRef:d,descriptionId:u.descriptionId})]})]})}),a_="DialogTitle",e2=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(a_,e);return x.jsx(_a.h2,{id:a.titleId,...n,ref:t})});e2.displayName=a_;var n2="DialogDescription",Sz=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(n2,e);return x.jsx(_a.p,{id:a.descriptionId,...n,ref:t})});Sz.displayName=n2;var i2="DialogClose",s2=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(i2,e);return x.jsx(_a.button,{type:"button",...n,ref:t,onClick:Ro(s.onClick,()=>a.onOpenChange(!1))})});s2.displayName=i2;function o_(s){return s?"open":"closed"}var r2="DialogTitleWarning",[dq,a2]=WF(r2,{contentName:dc,titleName:a_,docsSlug:"dialog"}),Cz=({titleId:s})=>{const t=a2(r2),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return S.useEffect(()=>{s&&(document.getElementById(s)||console.error(e))},[e,s]),null},Tz="DialogDescriptionWarning",kz=({contentRef:s,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a2(Tz).contentName}}.`;return S.useEffect(()=>{var o;const a=(o=s.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,s,t]),null},Rz=YR,Mz=QR,o2=ZR,l2=JR,c2=e2,Nz=s2;const Dz=Rz,Lz=Mz,u2=S.forwardRef(({className:s,...t},e)=>x.jsx(o2,{ref:e,className:`fixed inset-0 z-50 bg-black/50 backdrop-blur-sm ${s||""}`,...t}));u2.displayName=o2.displayName;const h2=S.forwardRef(({className:s,children:t,...e},n)=>x.jsxs(Lz,{children:[x.jsx(u2,{}),x.jsxs(l2,{ref:n,className:`fixed left-[50%] top-[50%] z-50 w-full max-w-lg translate-x-[-50%] translate-y-[-50%] glass rounded-lg border p-6 shadow-lg ${s||""}`,...e,children:[t,x.jsxs(Nz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[x.jsx(s_,{className:"h-4 w-4"}),x.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));h2.displayName=l2.displayName;const d2=({className:s,...t})=>x.jsx("div",{className:`flex flex-col space-y-1.5 text-center sm:text-left ${s||""}`,...t});d2.displayName="DialogHeader";const f2=S.forwardRef(({className:s,...t},e)=>x.jsx(c2,{ref:e,className:`text-lg font-semibold leading-none tracking-tight ${s||""}`,...t}));f2.displayName=c2.displayName;function Oz({open:s,onOpenChange:t,stats:e}){if(!e)return null;const n=a=>new Date(a).toLocaleString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return x.jsx(Dz,{open:s,onOpenChange:t,children:x.jsxs(h2,{className:"sm:max-w-md",children:[x.jsx(d2,{children:x.jsxs(f2,{className:"flex items-center gap-2",children:[x.jsx(wa,{className:"h-5 w-5"}),"Thng tin d n"]})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-lg",children:e.name}),x.jsx("p",{className:"text-sm text-muted-foreground",children:x.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs ${e.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:e.engine})})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 py-3 border-y",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(aF,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Files"}),x.jsx("p",{className:"font-medium",children:e.fileCount})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(CR,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Folders"}),x.jsx("p",{className:"font-medium",children:e.folderCount})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx($y,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Collaborators"}),x.jsx("p",{className:"font-medium",children:e.collaboratorCount})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(uF,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Dung lng"}),x.jsx("p",{className:"font-medium",children:e.sizeFormatted})]})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx($y,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Ch d n"}),x.jsx("p",{className:"text-sm font-medium",children:e.owner.name}),x.jsx("p",{className:"text-xs text-muted-foreground",children:e.owner.email})]})]}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx(dT,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Ngy to"}),x.jsx("p",{className:"text-sm",children:n(e.createdAt)})]})]}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx(dT,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Truy cp gn nht"}),x.jsx("p",{className:"text-sm",children:n(e.updatedAt)})]})]})]})]})]})})}function jz(){var lt;const s=_c(),{user:t,logout:e}=Ec(),{theme:n,toggleTheme:a}=uR(),[o,c]=S.useState([]),[u,d]=S.useState(!0),[f,g]=S.useState(!1),[y,b]=S.useState(""),[w,A]=S.useState("TYPST"),[E,T]=S.useState(!1),[C,D]=S.useState("grid"),[L,z]=S.useState(!1),[B,U]=S.useState(null);S.useEffect(()=>{O()},[]);const O=async()=>{try{const{projects:J}=await Mn.getProjects();c(J)}catch(J){console.error("Failed to load projects:",J)}finally{d(!1)}},H=async J=>{if(J.preventDefault(),!!y.trim()){T(!0);try{const{project:F}=await Mn.createProject({name:y,engine:w});c([F,...o]),g(!1),b(""),s(`/editor/${F.id}`)}catch(F){console.error("Failed to create project:",F)}finally{T(!1)}}},W=async J=>{if(confirm("Bn c chc mun xa d n ny?"))try{await Mn.deleteProject(J),c(o.filter(F=>F.id!==J))}catch(F){console.error("Failed to delete project:",F)}},Q=async J=>{try{const q=await(await fetch(`/api/projects/${J.id}/download/zip`,{headers:{Authorization:`Bearer ${localStorage.getItem("heytex_token")}`}})).blob(),X=window.URL.createObjectURL(q),wt=document.createElement("a");wt.href=X,wt.download=`${J.name}.zip`,wt.click()}catch(F){console.error("Failed to download ZIP:",F)}},nt=async J=>{try{const F=await fetch(`/api/projects/${J.id}/download/pdf`,{headers:{Authorization:`Bearer ${localStorage.getItem("heytex_token")}`}});if(!F.ok){alert("PDF cha c bin dch. Vui lng m d n v bin dch trc.");return}const q=await F.blob(),X=window.URL.createObjectURL(q),wt=document.createElement("a");wt.href=X,wt.download=`${J.name}.pdf`,wt.click()}catch(F){console.error("Failed to download PDF:",F)}},ot=async J=>{try{const q=await(await fetch(`/api/projects/${J}/stats`,{headers:{Authorization:`Bearer ${localStorage.getItem("heytex_token")}`}})).json();U(q.stats),z(!0)}catch(F){console.error("Failed to load project stats:",F)}},ht=()=>{e(),s("/login")};return u?x.jsx("div",{className:"h-screen flex items-center justify-center",children:x.jsx(Rs,{size:"lg"})}):x.jsxs("div",{className:"min-h-screen bg-background",children:[x.jsx("header",{className:"sticky top-0 z-50 glass border-b",children:x.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(wa,{className:"h-8 w-8 text-primary"}),x.jsx("span",{className:"text-xl font-bold",children:"HeyTeX"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx(Ie,{variant:"ghost",size:"icon",onClick:a,children:n==="dark"?x.jsx(kR,{className:"h-5 w-5"}):x.jsx(TR,{className:"h-5 w-5"})}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:x.jsx("span",{className:"text-sm font-medium text-primary",children:(lt=t==null?void 0:t.name)==null?void 0:lt.charAt(0).toUpperCase()})}),x.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:t==null?void 0:t.name})]}),x.jsx(Ie,{variant:"ghost",size:"icon",onClick:ht,children:x.jsx(bF,{className:"h-5 w-5"})})]})]})}),x.jsxs("main",{className:"container mx-auto px-6 py-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"D n ca ti"}),x.jsxs("p",{className:"text-muted-foreground mt-1",children:[o.length," / 50 d n"]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"flex items-center gap-1 p-1 glass rounded-lg",children:[x.jsx("button",{onClick:()=>D("grid"),className:`p-2 rounded transition-colors ${C==="grid"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,title:"Xem dng li",children:x.jsx(fF,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>D("list"),className:`p-2 rounded transition-colors ${C==="list"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,title:"Xem dng danh sch",children:x.jsx(gF,{className:"h-4 w-4"})})]}),x.jsxs(Ie,{onClick:()=>g(!0),className:"gap-2",children:[x.jsx(yT,{className:"h-4 w-4"}),"To d n mi"]})]})]}),o.length===0?x.jsxs("div",{className:"text-center py-16",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-muted flex items-center justify-center",children:x.jsx(i_,{className:"h-10 w-10 text-muted-foreground"})}),x.jsx("h3",{className:"text-xl font-medium text-foreground mb-2",children:"Cha c d n no"}),x.jsx("p",{className:"text-muted-foreground mb-6",children:"Bt u bng cch to d n LaTeX hoc Typst u tin ca bn"}),x.jsxs(Ie,{onClick:()=>g(!0),children:[x.jsx(yT,{className:"h-4 w-4 mr-2"}),"To d n u tin"]})]}):x.jsx("div",{className:C==="grid"?"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"space-y-3",children:o.map(J=>x.jsx(KF,{project:J,viewMode:C,onDelete:W,onDownloadZip:Q,onDownloadPdf:nt,onShowInfo:ot},J.id))})]}),x.jsx(Oz,{open:L,onOpenChange:z,stats:B}),f&&x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:x.jsxs("div",{className:"glass rounded-2xl p-6 w-full max-w-md mx-4 animate-fade-in",children:[x.jsx("h2",{className:"text-xl font-bold mb-4",children:"To d n mi"}),x.jsxs("form",{onSubmit:H,className:"space-y-4",children:[x.jsx(To,{label:"Tn d n",placeholder:"Lun vn tt nghip",value:y,onChange:J=>b(J.target.value),required:!0,autoFocus:!0}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-sm font-medium",children:"Chn Engine"}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("button",{type:"button",onClick:()=>A("TYPST"),className:`p-4 rounded-lg border-2 transition-all ${w==="TYPST"?"border-cyan-500 bg-cyan-500/10":"border-border hover:border-muted-foreground"}`,children:[x.jsx("div",{className:"font-medium text-cyan-500",children:"Typst"}),x.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Nhanh, hin i"})]}),x.jsxs("button",{type:"button",onClick:()=>A("LATEX"),className:`p-4 rounded-lg border-2 transition-all ${w==="LATEX"?"border-orange-500 bg-orange-500/10":"border-border hover:border-muted-foreground"}`,children:[x.jsx("div",{className:"font-medium text-orange-500",children:"LaTeX"}),x.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Mnh m, truyn thng"})]})]})]}),x.jsxs("div",{className:"flex gap-3 pt-4",children:[x.jsx(Ie,{type:"button",variant:"outline",className:"flex-1",onClick:()=>g(!1),children:"Hy"}),x.jsx(Ie,{type:"submit",className:"flex-1",disabled:E,children:E?x.jsx(Rs,{size:"sm"}):"To d n"})]})]})]})})]})}const Pz="modulepreload",Fz=function(s){return"/"+s},LT={},gl=function(t,e,n){let a=Promise.resolve();if(e&&e.length>0){let c=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=c(e.map(f=>{if(f=Fz(f),f in LT)return;LT[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":Pz,g||(b.as="script"),b.crossOrigin="",b.href=f,d&&b.setAttribute("nonce",d),document.head.appendChild(b),g)return new Promise((w,A)=>{b.addEventListener("load",w),b.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};function OT(s,t){(t==null||t>s.length)&&(t=s.length);for(var e=0,n=Array(t);e<t;e++)n[e]=s[e];return n}function zz(s){if(Array.isArray(s))return s}function Iz(s,t,e){return(t=Xz(t))in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function Bz(s,t){var e=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(e!=null){var n,a,o,c,u=[],d=!0,f=!1;try{if(o=(e=e.call(s)).next,t!==0)for(;!(d=(n=o.call(e)).done)&&(u.push(n.value),u.length!==t);d=!0);}catch(g){f=!0,a=g}finally{try{if(!d&&e.return!=null&&(c=e.return(),Object(c)!==c))return}finally{if(f)throw a}}return u}}function Uz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jT(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,n)}return e}function PT(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(e),!0).forEach(function(n){Iz(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):jT(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}function Hz(s,t){if(s==null)return{};var e,n,a=Vz(s,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(n=0;n<o.length;n++)e=o[n],t.indexOf(e)===-1&&{}.propertyIsEnumerable.call(s,e)&&(a[e]=s[e])}return a}function Vz(s,t){if(s==null)return{};var e={};for(var n in s)if({}.hasOwnProperty.call(s,n)){if(t.indexOf(n)!==-1)continue;e[n]=s[n]}return e}function qz(s,t){return zz(s)||Bz(s,t)||$z(s,t)||Uz()}function Gz(s,t){if(typeof s!="object"||!s)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var n=e.call(s,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Xz(s){var t=Gz(s,"string");return typeof t=="symbol"?t:t+""}function $z(s,t){if(s){if(typeof s=="string")return OT(s,t);var e={}.toString.call(s).slice(8,-1);return e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set"?Array.from(s):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?OT(s,t):void 0}}function Yz(s,t,e){return t in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function FT(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,n)}return e}function zT(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?FT(Object(e),!0).forEach(function(n){Yz(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):FT(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}function Kz(){for(var s=arguments.length,t=new Array(s),e=0;e<s;e++)t[e]=arguments[e];return function(n){return t.reduceRight(function(a,o){return o(a)},n)}}function Qd(s){return function t(){for(var e=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=s.length?s.apply(this,a):function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return t.apply(e,[].concat(a,u))}}}function Ky(s){return{}.toString.call(s).includes("Object")}function Wz(s){return!Object.keys(s).length}function _f(s){return typeof s=="function"}function Qz(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function Zz(s,t){return Ky(t)||Mo("changeType"),Object.keys(t).some(function(e){return!Qz(s,e)})&&Mo("changeField"),t}function Jz(s){_f(s)||Mo("selectorType")}function tI(s){_f(s)||Ky(s)||Mo("handlerType"),Ky(s)&&Object.values(s).some(function(t){return!_f(t)})&&Mo("handlersType")}function eI(s){s||Mo("initialIsRequired"),Ky(s)||Mo("initialType"),Wz(s)&&Mo("initialContent")}function nI(s,t){throw new Error(s[t]||s.default)}var iI={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Mo=Qd(nI)(iI),Xm={changes:Zz,selector:Jz,handler:tI,initial:eI};function sI(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xm.initial(s),Xm.handler(t);var e={current:s},n=Qd(oI)(e,t),a=Qd(aI)(e),o=Qd(Xm.changes)(s),c=Qd(rI)(e);function u(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Xm.selector(f),f(e.current)}function d(f){Kz(n,a,o,c)(f)}return[u,d]}function rI(s,t){return _f(t)?t(s.current):t}function aI(s,t){return s.current=zT(zT({},s.current),t),t}function oI(s,t,e){return _f(t)?t(s.current):Object.keys(e).forEach(function(n){var a;return(a=t[n])===null||a===void 0?void 0:a.call(t,s.current[n])}),e}var lI={create:sI},cI={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function uI(s){return function t(){for(var e=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=s.length?s.apply(this,a):function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return t.apply(e,[].concat(a,u))}}}function hI(s){return{}.toString.call(s).includes("Object")}function dI(s){return s||IT("configIsRequired"),hI(s)||IT("configType"),s.urls?(fI(),{paths:{vs:s.urls.monacoBase}}):s}function fI(){console.warn(p2.deprecation)}function pI(s,t){throw new Error(s[t]||s.default)}var p2={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},IT=uI(pI)(p2),gI={config:dI},mI=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(a){return e.reduceRight(function(o,c){return c(o)},a)}};function g2(s,t){return Object.keys(t).forEach(function(e){t[e]instanceof Object&&s[e]&&Object.assign(t[e],g2(s[e],t[e]))}),PT(PT({},s),t)}var yI={type:"cancelation",msg:"operation is manually canceled"};function Bw(s){var t=!1,e=new Promise(function(n,a){s.then(function(o){return t?a(yI):n(o)}),s.catch(a)});return e.cancel=function(){return t=!0},e}var vI=["monaco"],bI=lI.create({config:cI,isInitialized:!1,resolve:null,reject:null,monaco:null}),m2=qz(bI,2),fg=m2[0],zv=m2[1];function wI(s){var t=gI.config(s),e=t.monaco,n=Hz(t,vI);zv(function(a){return{config:g2(a.config,n),monaco:e}})}function xI(){var s=fg(function(t){var e=t.monaco,n=t.isInitialized,a=t.resolve;return{monaco:e,isInitialized:n,resolve:a}});if(!s.isInitialized){if(zv({isInitialized:!0}),s.monaco)return s.resolve(s.monaco),Bw(Uw);if(window.monaco&&window.monaco.editor)return y2(window.monaco),s.resolve(window.monaco),Bw(Uw);mI(AI,EI)(SI)}return Bw(Uw)}function AI(s){return document.body.appendChild(s)}function _I(s){var t=document.createElement("script");return s&&(t.src=s),t}function EI(s){var t=fg(function(n){var a=n.config,o=n.reject;return{config:a,reject:o}}),e=_I("".concat(t.config.paths.vs,"/loader.js"));return e.onload=function(){return s()},e.onerror=t.reject,e}function SI(){var s=fg(function(e){var n=e.config,a=e.resolve,o=e.reject;return{config:n,resolve:a,reject:o}}),t=window.require;t.config(s.config),t(["vs/editor/editor.main"],function(e){var n=e.m||e;y2(n),s.resolve(n)},function(e){s.reject(e)})}function y2(s){fg().monaco||zv({monaco:s})}function CI(){return fg(function(s){var t=s.monaco;return t})}var Uw=new Promise(function(s,t){return zv({resolve:s,reject:t})}),v2={config:wI,init:xI,__getMonacoInstance:CI},TI={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Hw=TI,kI={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},RI=kI;function MI({children:s}){return ks.createElement("div",{style:RI.container},s)}var NI=MI,DI=NI;function LI({width:s,height:t,isEditorReady:e,loading:n,_ref:a,className:o,wrapperProps:c}){return ks.createElement("section",{style:{...Hw.wrapper,width:s,height:t},...c},!e&&ks.createElement(DI,null,n),ks.createElement("div",{ref:a,style:{...Hw.fullWidth,...!e&&Hw.hide},className:o}))}var OI=LI,b2=S.memo(OI);function jI(s){S.useEffect(s,[])}var w2=jI;function PI(s,t,e=!0){let n=S.useRef(!0);S.useEffect(n.current||!e?()=>{n.current=!1}:s,t)}var Oi=PI;function gf(){}function Tu(s,t,e,n){return FI(s,n)||zI(s,t,e,n)}function FI(s,t){return s.editor.getModel(x2(s,t))}function zI(s,t,e,n){return s.editor.createModel(t,e,n?x2(s,n):void 0)}function x2(s,t){return s.Uri.parse(t)}function II({original:s,modified:t,language:e,originalLanguage:n,modifiedLanguage:a,originalModelPath:o,modifiedModelPath:c,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:d=!1,theme:f="light",loading:g="Loading...",options:y={},height:b="100%",width:w="100%",className:A,wrapperProps:E={},beforeMount:T=gf,onMount:C=gf}){let[D,L]=S.useState(!1),[z,B]=S.useState(!0),U=S.useRef(null),O=S.useRef(null),H=S.useRef(null),W=S.useRef(C),Q=S.useRef(T),nt=S.useRef(!1);w2(()=>{let J=v2.init();return J.then(F=>(O.current=F)&&B(!1)).catch(F=>(F==null?void 0:F.type)!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>U.current?lt():J.cancel()}),Oi(()=>{if(U.current&&O.current){let J=U.current.getOriginalEditor(),F=Tu(O.current,s||"",n||e||"text",o||"");F!==J.getModel()&&J.setModel(F)}},[o],D),Oi(()=>{if(U.current&&O.current){let J=U.current.getModifiedEditor(),F=Tu(O.current,t||"",a||e||"text",c||"");F!==J.getModel()&&J.setModel(F)}},[c],D),Oi(()=>{let J=U.current.getModifiedEditor();J.getOption(O.current.editor.EditorOption.readOnly)?J.setValue(t||""):t!==J.getValue()&&(J.executeEdits("",[{range:J.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),J.pushUndoStop())},[t],D),Oi(()=>{var J,F;(F=(J=U.current)==null?void 0:J.getModel())==null||F.original.setValue(s||"")},[s],D),Oi(()=>{let{original:J,modified:F}=U.current.getModel();O.current.editor.setModelLanguage(J,n||e||"text"),O.current.editor.setModelLanguage(F,a||e||"text")},[e,n,a],D),Oi(()=>{var J;(J=O.current)==null||J.editor.setTheme(f)},[f],D),Oi(()=>{var J;(J=U.current)==null||J.updateOptions(y)},[y],D);let ot=S.useCallback(()=>{var q;if(!O.current)return;Q.current(O.current);let J=Tu(O.current,s||"",n||e||"text",o||""),F=Tu(O.current,t||"",a||e||"text",c||"");(q=U.current)==null||q.setModel({original:J,modified:F})},[e,t,a,s,n,o,c]),ht=S.useCallback(()=>{var J;!nt.current&&H.current&&(U.current=O.current.editor.createDiffEditor(H.current,{automaticLayout:!0,...y}),ot(),(J=O.current)==null||J.editor.setTheme(f),L(!0),nt.current=!0)},[y,f,ot]);S.useEffect(()=>{D&&W.current(U.current,O.current)},[D]),S.useEffect(()=>{!z&&!D&&ht()},[z,D,ht]);function lt(){var F,q,X,wt;let J=(F=U.current)==null?void 0:F.getModel();u||((q=J==null?void 0:J.original)==null||q.dispose()),d||((X=J==null?void 0:J.modified)==null||X.dispose()),(wt=U.current)==null||wt.dispose()}return ks.createElement(b2,{width:w,height:b,isEditorReady:D,loading:g,_ref:H,className:A,wrapperProps:E})}var BI=II;S.memo(BI);function UI(s){let t=S.useRef();return S.useEffect(()=>{t.current=s},[s]),t.current}var HI=UI,$m=new Map;function VI({defaultValue:s,defaultLanguage:t,defaultPath:e,value:n,language:a,path:o,theme:c="light",line:u,loading:d="Loading...",options:f={},overrideServices:g={},saveViewState:y=!0,keepCurrentModel:b=!1,width:w="100%",height:A="100%",className:E,wrapperProps:T={},beforeMount:C=gf,onMount:D=gf,onChange:L,onValidate:z=gf}){let[B,U]=S.useState(!1),[O,H]=S.useState(!0),W=S.useRef(null),Q=S.useRef(null),nt=S.useRef(null),ot=S.useRef(D),ht=S.useRef(C),lt=S.useRef(),J=S.useRef(n),F=HI(o),q=S.useRef(!1),X=S.useRef(!1);w2(()=>{let j=v2.init();return j.then(G=>(W.current=G)&&H(!1)).catch(G=>(G==null?void 0:G.type)!=="cancelation"&&console.error("Monaco initialization: error:",G)),()=>Q.current?Ct():j.cancel()}),Oi(()=>{var G,tt,at,pt;let j=Tu(W.current,s||n||"",t||a||"",o||e||"");j!==((G=Q.current)==null?void 0:G.getModel())&&(y&&$m.set(F,(tt=Q.current)==null?void 0:tt.saveViewState()),(at=Q.current)==null||at.setModel(j),y&&((pt=Q.current)==null||pt.restoreViewState($m.get(o))))},[o],B),Oi(()=>{var j;(j=Q.current)==null||j.updateOptions(f)},[f],B),Oi(()=>{!Q.current||n===void 0||(Q.current.getOption(W.current.editor.EditorOption.readOnly)?Q.current.setValue(n):n!==Q.current.getValue()&&(X.current=!0,Q.current.executeEdits("",[{range:Q.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),Q.current.pushUndoStop(),X.current=!1))},[n],B),Oi(()=>{var G,tt;let j=(G=Q.current)==null?void 0:G.getModel();j&&a&&((tt=W.current)==null||tt.editor.setModelLanguage(j,a))},[a],B),Oi(()=>{var j;u!==void 0&&((j=Q.current)==null||j.revealLine(u))},[u],B),Oi(()=>{var j;(j=W.current)==null||j.editor.setTheme(c)},[c],B);let wt=S.useCallback(()=>{var j;if(!(!nt.current||!W.current)&&!q.current){ht.current(W.current);let G=o||e,tt=Tu(W.current,n||s||"",t||a||"",G||"");Q.current=(j=W.current)==null?void 0:j.editor.create(nt.current,{model:tt,automaticLayout:!0,...f},g),y&&Q.current.restoreViewState($m.get(G)),W.current.editor.setTheme(c),u!==void 0&&Q.current.revealLine(u),U(!0),q.current=!0}},[s,t,e,n,a,o,f,g,y,c,u]);S.useEffect(()=>{B&&ot.current(Q.current,W.current)},[B]),S.useEffect(()=>{!O&&!B&&wt()},[O,B,wt]),J.current=n,S.useEffect(()=>{var j,G;B&&L&&((j=lt.current)==null||j.dispose(),lt.current=(G=Q.current)==null?void 0:G.onDidChangeModelContent(tt=>{X.current||L(Q.current.getValue(),tt)}))},[B,L]),S.useEffect(()=>{if(B){let j=W.current.editor.onDidChangeMarkers(G=>{var at;let tt=(at=Q.current.getModel())==null?void 0:at.uri;if(tt&&G.find(pt=>pt.path===tt.path)){let pt=W.current.editor.getModelMarkers({resource:tt});z==null||z(pt)}});return()=>{j==null||j.dispose()}}return()=>{}},[B,z]);function Ct(){var j,G;(j=lt.current)==null||j.dispose(),b?y&&$m.set(o,Q.current.saveViewState()):(G=Q.current.getModel())==null||G.dispose(),Q.current.dispose()}return ks.createElement(b2,{width:w,height:A,isEditorReady:B,loading:d,_ref:nt,className:E,wrapperProps:T})}var qI=VI,GI=S.memo(qI),XI=GI;const cr=Object.create(null);cr.open="0";cr.close="1";cr.ping="2";cr.pong="3";cr.message="4";cr.upgrade="5";cr.noop="6";const cy=Object.create(null);Object.keys(cr).forEach(s=>{cy[cr[s]]=s});const gx={type:"error",data:"parser error"},A2=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",_2=typeof ArrayBuffer=="function",E2=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,l_=({type:s,data:t},e,n)=>A2&&t instanceof Blob?e?n(t):BT(t,n):_2&&(t instanceof ArrayBuffer||E2(t))?e?n(t):BT(new Blob([t]),n):n(cr[s]+(t||"")),BT=(s,t)=>{const e=new FileReader;return e.onload=function(){const n=e.result.split(",")[1];t("b"+(n||""))},e.readAsDataURL(s)};function UT(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Vw;function $I(s,t){if(A2&&s.data instanceof Blob)return s.data.arrayBuffer().then(UT).then(t);if(_2&&(s.data instanceof ArrayBuffer||E2(s.data)))return t(UT(s.data));l_(s,!1,e=>{Vw||(Vw=new TextEncoder),t(Vw.encode(e))})}const HT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<HT.length;s++)Zd[HT.charCodeAt(s)]=s;const YI=s=>{let t=s.length*.75,e=s.length,n,a=0,o,c,u,d;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const f=new ArrayBuffer(t),g=new Uint8Array(f);for(n=0;n<e;n+=4)o=Zd[s.charCodeAt(n)],c=Zd[s.charCodeAt(n+1)],u=Zd[s.charCodeAt(n+2)],d=Zd[s.charCodeAt(n+3)],g[a++]=o<<2|c>>4,g[a++]=(c&15)<<4|u>>2,g[a++]=(u&3)<<6|d&63;return f},KI=typeof ArrayBuffer=="function",c_=(s,t)=>{if(typeof s!="string")return{type:"message",data:S2(s,t)};const e=s.charAt(0);return e==="b"?{type:"message",data:WI(s.substring(1),t)}:cy[e]?s.length>1?{type:cy[e],data:s.substring(1)}:{type:cy[e]}:gx},WI=(s,t)=>{if(KI){const e=YI(s);return S2(e,t)}else return{base64:!0,data:s}},S2=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},C2="",QI=(s,t)=>{const e=s.length,n=new Array(e);let a=0;s.forEach((o,c)=>{l_(o,!1,u=>{n[c]=u,++a===e&&t(n.join(C2))})})},ZI=(s,t)=>{const e=s.split(C2),n=[];for(let a=0;a<e.length;a++){const o=c_(e[a],t);if(n.push(o),o.type==="error")break}return n};function JI(){return new TransformStream({transform(s,t){$I(s,e=>{const n=e.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(e)})}})}let qw;function Ym(s){return s.reduce((t,e)=>t+e.length,0)}function Km(s,t){if(s[0].length===t)return s.shift();const e=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)e[a]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),e}function t5(s,t){qw||(qw=new TextDecoder);const e=[];let n=0,a=-1,o=!1;return new TransformStream({transform(c,u){for(e.push(c);;){if(n===0){if(Ym(e)<1)break;const d=Km(e,1);o=(d[0]&128)===128,a=d[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Ym(e)<2)break;const d=Km(e,2);a=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),n=3}else if(n===2){if(Ym(e)<8)break;const d=Km(e,8),f=new DataView(d.buffer,d.byteOffset,d.length),g=f.getUint32(0);if(g>Math.pow(2,21)-1){u.enqueue(gx);break}a=g*Math.pow(2,32)+f.getUint32(4),n=3}else{if(Ym(e)<a)break;const d=Km(e,a);u.enqueue(c_(o?d:qw.decode(d),t)),n=0}if(a===0||a>s){u.enqueue(gx);break}}}})}const T2=4;function Ke(s){if(s)return e5(s)}function e5(s){for(var t in Ke.prototype)s[t]=Ke.prototype[t];return s}Ke.prototype.on=Ke.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};Ke.prototype.once=function(s,t){function e(){this.off(s,e),t.apply(this,arguments)}return e.fn=t,this.on(s,e),this};Ke.prototype.off=Ke.prototype.removeListener=Ke.prototype.removeAllListeners=Ke.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+s];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,a=0;a<e.length;a++)if(n=e[a],n===t||n.fn===t){e.splice(a,1);break}return e.length===0&&delete this._callbacks["$"+s],this};Ke.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+s],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,a=e.length;n<a;++n)e[n].apply(this,t)}return this};Ke.prototype.emitReserved=Ke.prototype.emit;Ke.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Ke.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Iv=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),ts=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),n5="arraybuffer";function k2(s,...t){return t.reduce((e,n)=>(s.hasOwnProperty(n)&&(e[n]=s[n]),e),{})}const i5=ts.setTimeout,s5=ts.clearTimeout;function Bv(s,t){t.useNativeTimers?(s.setTimeoutFn=i5.bind(ts),s.clearTimeoutFn=s5.bind(ts)):(s.setTimeoutFn=ts.setTimeout.bind(ts),s.clearTimeoutFn=ts.clearTimeout.bind(ts))}const r5=1.33;function a5(s){return typeof s=="string"?o5(s):Math.ceil((s.byteLength||s.size)*r5)}function o5(s){let t=0,e=0;for(let n=0,a=s.length;n<a;n++)t=s.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function R2(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function l5(s){let t="";for(let e in s)s.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return t}function c5(s){let t={},e=s.split("&");for(let n=0,a=e.length;n<a;n++){let o=e[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class u5 extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class u_ extends Ke{constructor(t){super(),this.writable=!1,Bv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new u5(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=c_(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=l5(t);return e.length?"?"+e:""}}class h5 extends u_{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};ZI(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,QI(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=R2()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let M2=!1;try{M2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const d5=M2;function f5(){}class p5 extends h5{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}}class rr extends Ke{constructor(t,e,n){super(),this.createRequest=t,Bv(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const e=k2(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=rr.requestsCount++,rr.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=f5,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete rr.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}rr.requestsCount=0;rr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",VT);else if(typeof addEventListener=="function"){const s="onpagehide"in ts?"pagehide":"unload";addEventListener(s,VT,!1)}}function VT(){for(let s in rr.requests)rr.requests.hasOwnProperty(s)&&rr.requests[s].abort()}const g5=(function(){const s=N2({xdomain:!1});return s&&s.responseType!==null})();class m5 extends p5{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=g5&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new rr(N2,this.uri(),t)}}function N2(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||d5))return new XMLHttpRequest}catch{}if(!t)try{return new ts[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const D2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class y5 extends u_{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,n=D2?{}:k2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],a=e===t.length-1;l_(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}a&&Iv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=R2()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const Gw=ts.WebSocket||ts.MozWebSocket;class v5 extends y5{createSocket(t,e,n){return D2?new Gw(t,e,n):e?new Gw(t,e):new Gw(t)}doWrite(t,e){this.ws.send(e)}}class b5 extends u_{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=t5(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),a=JI();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const o=()=>{n.read().then(({done:u,value:d})=>{u||(this.onPacket(d),o())}).catch(u=>{})};o();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],a=e===t.length-1;this._writer.write(n).then(()=>{a&&Iv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const w5={websocket:v5,webtransport:b5,polling:m5},x5=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,A5=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mx(s){if(s.length>8e3)throw"URI too long";const t=s,e=s.indexOf("["),n=s.indexOf("]");e!=-1&&n!=-1&&(s=s.substring(0,e)+s.substring(e,n).replace(/:/g,";")+s.substring(n,s.length));let a=x5.exec(s||""),o={},c=14;for(;c--;)o[A5[c]]=a[c]||"";return e!=-1&&n!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=_5(o,o.path),o.queryKey=E5(o,o.query),o}function _5(s,t){const e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function E5(s,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,o){a&&(e[a]=o)}),e}const yx=typeof addEventListener=="function"&&typeof removeEventListener=="function",uy=[];yx&&addEventListener("offline",()=>{uy.forEach(s=>s())},!1);class No extends Ke{constructor(t,e){if(super(),this.binaryType=n5,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const n=mx(t);e.hostname=n.host,e.secure=n.protocol==="https"||n.protocol==="wss",e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=mx(e.host).host);Bv(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=c5(this.opts.query)),yx&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},uy.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=T2,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&No.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",No.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(e+=a5(a)),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Iv(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,n){return this._sendPacket("message",t,e,n),this}send(t,e,n){return this._sendPacket("message",t,e,n),this}_sendPacket(t,e,n,a){if(typeof e=="function"&&(a=e,e=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(No.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),yx&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=uy.indexOf(this._offlineEventListener);n!==-1&&uy.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}No.protocol=T2;class S5 extends No{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;No.priorWebsocketSuccess=!1;const a=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",y=>{if(!n)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;No.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(g(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=e.name,this.emitReserved("upgradeError",b)}}))};function o(){n||(n=!0,g(),e.close(),e=null)}const c=y=>{const b=new Error("probe error: "+y);b.transport=e.name,o(),this.emitReserved("upgradeError",b)};function u(){c("transport closed")}function d(){c("socket closed")}function f(y){e&&y.name!==e.name&&o()}const g=()=>{e.removeListener("open",a),e.removeListener("error",c),e.removeListener("close",u),this.off("close",d),this.off("upgrading",f)};e.once("open",a),e.once("error",c),e.once("close",u),this.once("close",d),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}let C5=class extends S5{constructor(t,e={}){const n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>w5[a]).filter(a=>!!a)),super(t,n)}};function T5(s,t="",e){let n=s;e=e||typeof location<"u"&&location,s==null&&(s=e.protocol+"//"+e.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=e.protocol+s:s=e.host+s),/^(https?|wss?):\/\//.test(s)||(typeof e<"u"?s=e.protocol+"//"+s:s="https://"+s),n=mx(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+t,n.href=n.protocol+"://"+o+(e&&e.port===n.port?"":":"+n.port),n}const k5=typeof ArrayBuffer=="function",R5=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,L2=Object.prototype.toString,M5=typeof Blob=="function"||typeof Blob<"u"&&L2.call(Blob)==="[object BlobConstructor]",N5=typeof File=="function"||typeof File<"u"&&L2.call(File)==="[object FileConstructor]";function h_(s){return k5&&(s instanceof ArrayBuffer||R5(s))||M5&&s instanceof Blob||N5&&s instanceof File}function hy(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let e=0,n=s.length;e<n;e++)if(hy(s[e]))return!0;return!1}if(h_(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return hy(s.toJSON(),!0);for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&hy(s[e]))return!0;return!1}function D5(s){const t=[],e=s.data,n=s;return n.data=vx(e,t),n.attachments=t.length,{packet:n,buffers:t}}function vx(s,t){if(!s)return s;if(h_(s)){const e={_placeholder:!0,num:t.length};return t.push(s),e}else if(Array.isArray(s)){const e=new Array(s.length);for(let n=0;n<s.length;n++)e[n]=vx(s[n],t);return e}else if(typeof s=="object"&&!(s instanceof Date)){const e={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=vx(s[n],t));return e}return s}function L5(s,t){return s.data=bx(s.data,t),delete s.attachments,s}function bx(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let e=0;e<s.length;e++)s[e]=bx(s[e],t);else if(typeof s=="object")for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(s[e]=bx(s[e],t));return s}const O5=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],j5=5;var Qt;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(Qt||(Qt={}));let P5=class{constructor(t){this.replacer=t}encode(t){return(t.type===Qt.EVENT||t.type===Qt.ACK)&&hy(t)?this.encodeAsBinary({type:t.type===Qt.EVENT?Qt.BINARY_EVENT:Qt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Qt.BINARY_EVENT||t.type===Qt.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=D5(t),n=this.encodeAsString(e.packet),a=e.buffers;return a.unshift(n),a}};function qT(s){return Object.prototype.toString.call(s)==="[object Object]"}let F5=class O2 extends Ke{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===Qt.BINARY_EVENT;n||e.type===Qt.BINARY_ACK?(e.type=n?Qt.EVENT:Qt.ACK,this.reconstructor=new z5(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(h_(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(Qt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Qt.BINARY_EVENT||n.type===Qt.BINARY_ACK){const o=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const c=t.substring(o,e);if(c!=Number(c)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(c)}if(t.charAt(e+1)==="/"){const o=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(o,e)}else n.nsp="/";const a=t.charAt(e+1);if(a!==""&&Number(a)==a){const o=e+1;for(;++e;){const c=t.charAt(e);if(c==null||Number(c)!=c){--e;break}if(e===t.length)break}n.id=Number(t.substring(o,e+1))}if(t.charAt(++e)){const o=this.tryParse(t.substr(e));if(O2.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case Qt.CONNECT:return qT(e);case Qt.DISCONNECT:return e===void 0;case Qt.CONNECT_ERROR:return typeof e=="string"||qT(e);case Qt.EVENT:case Qt.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&O5.indexOf(e[0])===-1);case Qt.ACK:case Qt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class z5{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=L5(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const I5=Object.freeze(Object.defineProperty({__proto__:null,Decoder:F5,Encoder:P5,get PacketType(){return Qt},protocol:j5},Symbol.toStringTag,{value:"Module"}));function Ts(s,t,e){return s.on(t,e),function(){s.off(t,e)}}const B5=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class j2 extends Ke{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ts(t,"open",this.onopen.bind(this)),Ts(t,"packet",this.onpacket.bind(this)),Ts(t,"error",this.onerror.bind(this)),Ts(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,a,o;if(B5.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const c={type:Qt.EVENT,data:e};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const g=this.ids++,y=e.pop();this._registerAckCallback(g,y),c.id=g}const u=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,d=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!u||(d?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,e){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=e;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===t&&this.sendBuffer.splice(u,1);e.call(this,new Error("operation has timed out"))},a),c=(...u)=>{this.io.clearTimeoutFn(o),e.apply(this,u)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...e){return new Promise((n,a)=>{const o=(c,u)=>c?a(c):n(u);o.withError=!0,e.push(o),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...o)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(a)):(this._queue.shift(),e&&e(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Qt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Qt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Qt.EVENT:case Qt.BINARY_EVENT:this.onevent(t);break;case Qt.ACK:case Qt.BINARY_ACK:this.onack(t);break;case Qt.DISCONNECT:this.ondisconnect();break;case Qt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...a){n||(n=!0,e.packet({type:Qt.ACK,id:t,data:a}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Qt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function Xh(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Xh.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*s);s=(Math.floor(t*10)&1)==0?s-e:s+e}return Math.min(s,this.max)|0};Xh.prototype.reset=function(){this.attempts=0};Xh.prototype.setMin=function(s){this.ms=s};Xh.prototype.setMax=function(s){this.max=s};Xh.prototype.setJitter=function(s){this.jitter=s};class wx extends Ke{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Bv(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Xh({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const a=e.parser||I5;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new C5(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Ts(e,"open",function(){n.onopen(),t&&t()}),o=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),t?t(u):this.maybeReconnectOnOpen()},c=Ts(e,"error",o);if(this._timeout!==!1){const u=this._timeout,d=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),e.close()},u);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(a),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ts(t,"ping",this.onping.bind(this)),Ts(t,"data",this.ondata.bind(this)),Ts(t,"error",this.onerror.bind(this)),Ts(t,"close",this.onclose.bind(this)),Ts(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Iv(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new j2(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $d={};function dy(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const e=T5(s,t.path||"/socket.io"),n=e.source,a=e.id,o=e.path,c=$d[a]&&o in $d[a].nsps,u=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let d;return u?d=new wx(n,t):($d[a]||($d[a]=new wx(n,t)),d=$d[a]),e.query&&!t.query&&(t.query=e.queryKey),d.socket(e.path,t)}Object.assign(dy,{Manager:wx,Socket:j2,io:dy,connect:dy});const Ms=()=>new Map,xx=s=>{const t=Ms();return s.forEach((e,n)=>{t.set(n,e)}),t},Io=(s,t,e)=>{let n=s.get(t);return n===void 0&&s.set(t,n=e()),n},U5=(s,t)=>{const e=[];for(const[n,a]of s)e.push(t(a,n));return e},H5=(s,t)=>{for(const[e,n]of s)if(t(n,e))return!0;return!1},Lh=()=>new Set,Xw=s=>s[s.length-1],V5=(s,t)=>{for(let e=0;e<t.length;e++)s.push(t[e])},fc=Array.from,q5=Array.isArray;class G5{constructor(){this._observers=Ms()}on(t,e){return Io(this._observers,t,Lh).add(e),e}once(t,e){const n=(...a)=>{this.off(t,n),e(...a)};this.on(t,n)}off(t,e){const n=this._observers.get(t);n!==void 0&&(n.delete(e),n.size===0&&this._observers.delete(t))}emit(t,e){return fc((this._observers.get(t)||Ms()).values()).forEach(n=>n(...e))}destroy(){this._observers=Ms()}}const Do=Math.floor,fy=Math.abs,P2=(s,t)=>s<t?s:t,Cc=(s,t)=>s>t?s:t,F2=s=>s!==0?s<0:1/s<0,GT=1,XT=2,$w=4,Yw=8,Ef=32,pa=64,Pi=128,Uv=31,Ax=63,hc=127,X5=2147483647,z2=Number.MAX_SAFE_INTEGER,$5=Number.isInteger||(s=>typeof s=="number"&&isFinite(s)&&Do(s)===s),Y5=s=>s.toLowerCase(),K5=/^\s*/g,W5=s=>s.replace(K5,""),Q5=/([A-Z])/g,$T=(s,t)=>W5(s.replace(Q5,e=>`${t}${Y5(e)}`)),Z5=s=>{const t=unescape(encodeURIComponent(s)),e=t.length,n=new Uint8Array(e);for(let a=0;a<e;a++)n[a]=t.codePointAt(a);return n},Sf=typeof TextEncoder<"u"?new TextEncoder:null,J5=s=>Sf.encode(s),tB=Sf?J5:Z5;let mf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});mf&&mf.decode(new Uint8Array).length===1&&(mf=null);class pg{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Hv=()=>new pg,eB=s=>{let t=s.cpos;for(let e=0;e<s.bufs.length;e++)t+=s.bufs[e].length;return t},sr=s=>{const t=new Uint8Array(eB(s));let e=0;for(let n=0;n<s.bufs.length;n++){const a=s.bufs[n];t.set(a,e),e+=a.length}return t.set(new Uint8Array(s.cbuf.buffer,0,s.cpos),e),t},nB=(s,t)=>{const e=s.cbuf.length;e-s.cpos<t&&(s.bufs.push(new Uint8Array(s.cbuf.buffer,0,s.cpos)),s.cbuf=new Uint8Array(Cc(e,t)*2),s.cpos=0)},gn=(s,t)=>{const e=s.cbuf.length;s.cpos===e&&(s.bufs.push(s.cbuf),s.cbuf=new Uint8Array(e*2),s.cpos=0),s.cbuf[s.cpos++]=t},_x=gn,te=(s,t)=>{for(;t>hc;)gn(s,Pi|hc&t),t=Do(t/128);gn(s,hc&t)},d_=(s,t)=>{const e=F2(t);for(e&&(t=-t),gn(s,(t>Ax?Pi:0)|(e?pa:0)|Ax&t),t=Do(t/64);t>0;)gn(s,(t>hc?Pi:0)|hc&t),t=Do(t/128)},Ex=new Uint8Array(3e4),iB=Ex.length/3,sB=(s,t)=>{if(t.length<iB){const e=Sf.encodeInto(t,Ex).written||0;te(s,e);for(let n=0;n<e;n++)gn(s,Ex[n])}else _i(s,tB(t))},rB=(s,t)=>{const e=unescape(encodeURIComponent(t)),n=e.length;te(s,n);for(let a=0;a<n;a++)gn(s,e.codePointAt(a))},Mu=Sf&&Sf.encodeInto?sB:rB,Vv=(s,t)=>{const e=s.cbuf.length,n=s.cpos,a=P2(e-n,t.length),o=t.length-a;s.cbuf.set(t.subarray(0,a),n),s.cpos+=a,o>0&&(s.bufs.push(s.cbuf),s.cbuf=new Uint8Array(Cc(e*2,o)),s.cbuf.set(t.subarray(a)),s.cpos=o)},_i=(s,t)=>{te(s,t.byteLength),Vv(s,t)},f_=(s,t)=>{nB(s,t);const e=new DataView(s.cbuf.buffer,s.cpos,t);return s.cpos+=t,e},aB=(s,t)=>f_(s,4).setFloat32(0,t,!1),oB=(s,t)=>f_(s,8).setFloat64(0,t,!1),lB=(s,t)=>f_(s,8).setBigInt64(0,t,!1),YT=new DataView(new ArrayBuffer(4)),cB=s=>(YT.setFloat32(0,s),YT.getFloat32(0)===s),Cf=(s,t)=>{switch(typeof t){case"string":gn(s,119),Mu(s,t);break;case"number":$5(t)&&fy(t)<=X5?(gn(s,125),d_(s,t)):cB(t)?(gn(s,124),aB(s,t)):(gn(s,123),oB(s,t));break;case"bigint":gn(s,122),lB(s,t);break;case"object":if(t===null)gn(s,126);else if(q5(t)){gn(s,117),te(s,t.length);for(let e=0;e<t.length;e++)Cf(s,t[e])}else if(t instanceof Uint8Array)gn(s,116),_i(s,t);else{gn(s,118);const e=Object.keys(t);te(s,e.length);for(let n=0;n<e.length;n++){const a=e[n];Mu(s,a),Cf(s,t[a])}}break;case"boolean":gn(s,t?120:121);break;default:gn(s,127)}};class KT extends pg{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&te(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const WT=s=>{s.count>0&&(d_(s.encoder,s.count===1?s.s:-s.s),s.count>1&&te(s.encoder,s.count-2))};class py{constructor(){this.encoder=new pg,this.s=0,this.count=0}write(t){this.s===t?this.count++:(WT(this),this.count=1,this.s=t)}toUint8Array(){return WT(this),sr(this.encoder)}}const QT=s=>{if(s.count>0){const t=s.diff*2+(s.count===1?0:1);d_(s.encoder,t),s.count>1&&te(s.encoder,s.count-2)}};class Kw{constructor(){this.encoder=new pg,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(QT(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return QT(this),sr(this.encoder)}}class uB{constructor(){this.sarr=[],this.s="",this.lensE=new py}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new pg;return this.sarr.push(this.s),this.s="",Mu(t,this.sarr.join("")),Vv(t,this.lensE.toUint8Array()),sr(t)}}const Lo=s=>new Error(s),ar=()=>{throw Lo("Method unimplemented")},ur=()=>{throw Lo("Unexpected case")},I2=Lo("Unexpected end of array"),B2=Lo("Integer out of Range");class qv{constructor(t){this.arr=t,this.pos=0}}const $h=s=>new qv(s),hB=s=>s.pos!==s.arr.length,dB=(s,t)=>{const e=new Uint8Array(s.arr.buffer,s.pos+s.arr.byteOffset,t);return s.pos+=t,e},Ei=s=>dB(s,Bt(s)),Oh=s=>s.arr[s.pos++],Bt=s=>{let t=0,e=1;const n=s.arr.length;for(;s.pos<n;){const a=s.arr[s.pos++];if(t=t+(a&hc)*e,e*=128,a<Pi)return t;if(t>z2)throw B2}throw I2},p_=s=>{let t=s.arr[s.pos++],e=t&Ax,n=64;const a=(t&pa)>0?-1:1;if((t&Pi)===0)return a*e;const o=s.arr.length;for(;s.pos<o;){if(t=s.arr[s.pos++],e=e+(t&hc)*n,n*=128,t<Pi)return a*e;if(e>z2)throw B2}throw I2},fB=s=>{let t=Bt(s);if(t===0)return"";{let e=String.fromCodePoint(Oh(s));if(--t<100)for(;t--;)e+=String.fromCodePoint(Oh(s));else for(;t>0;){const n=t<1e4?t:1e4,a=s.arr.subarray(s.pos,s.pos+n);s.pos+=n,e+=String.fromCodePoint.apply(null,a),t-=n}return decodeURIComponent(escape(e))}},pB=s=>mf.decode(Ei(s)),Nu=mf?pB:fB,g_=(s,t)=>{const e=new DataView(s.arr.buffer,s.arr.byteOffset+s.pos,t);return s.pos+=t,e},gB=s=>g_(s,4).getFloat32(0,!1),mB=s=>g_(s,8).getFloat64(0,!1),yB=s=>g_(s,8).getBigInt64(0,!1),vB=[s=>{},s=>null,p_,gB,mB,yB,s=>!1,s=>!0,Nu,s=>{const t=Bt(s),e={};for(let n=0;n<t;n++){const a=Nu(s);e[a]=Tf(s)}return e},s=>{const t=Bt(s),e=[];for(let n=0;n<t;n++)e.push(Tf(s));return e},Ei],Tf=s=>vB[127-Oh(s)](s);class ZT extends qv{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),hB(this)?this.count=Bt(this)+1:this.count=-1),this.count--,this.s}}class gy extends qv{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=p_(this);const t=F2(this.s);this.count=1,t&&(this.s=-this.s,this.count=Bt(this)+2)}return this.count--,this.s}}class Ww extends qv{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=p_(this),e=t&1;this.diff=Do(t/2),this.count=1,e&&(this.count=Bt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class bB{constructor(t){this.decoder=new gy(t),this.str=Nu(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}const wB=crypto.getRandomValues.bind(crypto),U2=()=>wB(new Uint32Array(1))[0],xB="10000000-1000-4000-8000"+-1e11,AB=()=>xB.replace(/[018]/g,s=>(s^U2()&15>>s/4).toString(16)),JT=s=>new Promise(s);Promise.all.bind(Promise);const tk=s=>s===void 0?null:s;class _B{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let H2=new _B,EB=!0;try{typeof localStorage<"u"&&localStorage&&(H2=localStorage,EB=!1)}catch{}const SB=H2,CB=Object.assign,TB=Object.keys,kB=(s,t)=>{for(const e in s)t(s[e],e)},ek=s=>TB(s).length,RB=s=>{for(const t in s)return!1;return!0},MB=(s,t)=>{for(const e in s)if(!t(s[e],e))return!1;return!0},NB=(s,t)=>Object.prototype.hasOwnProperty.call(s,t),DB=(s,t)=>s===t||ek(s)===ek(t)&&MB(s,(e,n)=>(e!==void 0||NB(t,n))&&t[n]===e),LB=Object.freeze,V2=s=>{for(const t in s){const e=s[t];(typeof e=="object"||typeof e=="function")&&V2(s[t])}return LB(s)},m_=(s,t,e=0)=>{try{for(;e<s.length;e++)s[e](...t)}finally{e<s.length&&m_(s,t,e+1)}},OB=s=>s,jB=(s,t)=>t.includes(s);var q2={};const kf=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Is;const PB=()=>{if(Is===void 0)if(kf){Is=Ms();const s=process.argv;let t=null;for(let e=0;e<s.length;e++){const n=s[e];n[0]==="-"?(t!==null&&Is.set(t,""),t=n):t!==null&&(Is.set(t,n),t=null)}t!==null&&Is.set(t,"")}else typeof location=="object"?(Is=Ms(),(location.search||"?").slice(1).split("&").forEach(s=>{if(s.length!==0){const[t,e]=s.split("=");Is.set(`--${$T(t,"-")}`,e),Is.set(`-${$T(t,"-")}`,e)}})):Is=Ms();return Is},Sx=s=>PB().has(s),Wy=s=>tk(kf?q2[s.toUpperCase().replaceAll("-","_")]:SB.getItem(s)),G2=s=>Sx("--"+s)||Wy(s)!==null;G2("production");const FB=kf&&jB(q2.FORCE_COLOR,["true","1","2"]),zB=FB||!Sx("--no-colors")&&!G2("no-color")&&(!kf||process.stdout.isTTY)&&(!kf||Sx("--color")||Wy("COLORTERM")!==null||(Wy("TERM")||"").includes("color")),IB=s=>new Uint8Array(s),BB=s=>{const t=IB(s.byteLength);return t.set(s),t};class UB{constructor(t,e){this.left=t,this.right=e}}const jr=(s,t)=>new UB(s,t);typeof DOMParser<"u"&&new DOMParser;const HB=s=>U5(s,(t,e)=>`${e}:${t};`).join(""),Ea=Symbol,X2=Ea(),$2=Ea(),VB=Ea(),qB=Ea(),GB=Ea(),Y2=Ea(),XB=Ea(),y_=Ea(),$B=Ea(),YB=s=>{var a;s.length===1&&((a=s[0])==null?void 0:a.constructor)===Function&&(s=s[0]());const t=[],e=[];let n=0;for(;n<s.length;n++){const o=s[n];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)t.push(o);else if(o.constructor===Object)break}for(n>0&&e.push(t.join(""));n<s.length;n++){const o=s[n];o instanceof Symbol||e.push(o)}return e},KB={[X2]:jr("font-weight","bold"),[$2]:jr("font-weight","normal"),[VB]:jr("color","blue"),[GB]:jr("color","green"),[qB]:jr("color","grey"),[Y2]:jr("color","red"),[XB]:jr("color","purple"),[y_]:jr("color","orange"),[$B]:jr("color","black")},WB=s=>{var c;s.length===1&&((c=s[0])==null?void 0:c.constructor)===Function&&(s=s[0]());const t=[],e=[],n=Ms();let a=[],o=0;for(;o<s.length;o++){const u=s[o],d=KB[u];if(d!==void 0)n.set(d.left,d.right);else{if(u===void 0)break;if(u.constructor===String||u.constructor===Number){const f=HB(n);o>0||f.length>0?(t.push("%c"+u),e.push(f)):t.push(u)}else break}}for(o>0&&(a=e,a.unshift(t.join("")));o<s.length;o++){const u=s[o];u instanceof Symbol||a.push(u)}return a},K2=zB?WB:YB,QB=(...s)=>{console.log(...K2(s)),W2.forEach(t=>t.print(s))},ZB=(...s)=>{console.warn(...K2(s)),s.unshift(y_),W2.forEach(t=>t.print(s))},W2=Lh(),Q2=s=>({[Symbol.iterator](){return this},next:s}),JB=(s,t)=>Q2(()=>{let e;do e=s.next();while(!e.done&&!t(e.value));return e}),Qw=(s,t)=>Q2(()=>{const{done:e,value:n}=s.next();return{done:e,value:e?void 0:t(n)}});class v_{constructor(t,e){this.clock=t,this.len=e}}class gg{constructor(){this.clients=new Map}}const Z2=(s,t,e)=>t.clients.forEach((n,a)=>{const o=s.doc.store.clients.get(a);if(o!=null){const c=o[o.length-1],u=c.id.clock+c.length;for(let d=0,f=n[d];d<n.length&&f.clock<u;f=n[++d])lM(s,o,f.clock,f.len,e)}}),tU=(s,t)=>{let e=0,n=s.length-1;for(;e<=n;){const a=Do((e+n)/2),o=s[a],c=o.clock;if(c<=t){if(t<c+o.len)return a;e=a+1}else n=a-1}return null},J2=(s,t)=>{const e=s.clients.get(t.client);return e!==void 0&&tU(e,t.clock)!==null},b_=s=>{s.clients.forEach(t=>{t.sort((a,o)=>a.clock-o.clock);let e,n;for(e=1,n=1;e<t.length;e++){const a=t[n-1],o=t[e];a.clock+a.len>=o.clock?a.len=Cc(a.len,o.clock+o.len-a.clock):(n<e&&(t[n]=o),n++)}t.length=n})},eU=s=>{const t=new gg;for(let e=0;e<s.length;e++)s[e].clients.forEach((n,a)=>{if(!t.clients.has(a)){const o=n.slice();for(let c=e+1;c<s.length;c++)V5(o,s[c].clients.get(a)||[]);t.clients.set(a,o)}});return b_(t),t},Qy=(s,t,e,n)=>{Io(s.clients,t,()=>[]).push(new v_(e,n))},nU=()=>new gg,iU=s=>{const t=nU();return s.clients.forEach((e,n)=>{const a=[];for(let o=0;o<e.length;o++){const c=e[o];if(c.deleted){const u=c.id.clock;let d=c.length;if(o+1<e.length)for(let f=e[o+1];o+1<e.length&&f.deleted;f=e[++o+1])d+=f.length;a.push(new v_(u,d))}}a.length>0&&t.clients.set(n,a)}),t},Yh=(s,t)=>{te(s.restEncoder,t.clients.size),fc(t.clients.entries()).sort((e,n)=>n[0]-e[0]).forEach(([e,n])=>{s.resetDsCurVal(),te(s.restEncoder,e);const a=n.length;te(s.restEncoder,a);for(let o=0;o<a;o++){const c=n[o];s.writeDsClock(c.clock),s.writeDsLen(c.len)}})},w_=s=>{const t=new gg,e=Bt(s.restDecoder);for(let n=0;n<e;n++){s.resetDsCurVal();const a=Bt(s.restDecoder),o=Bt(s.restDecoder);if(o>0){const c=Io(t.clients,a,()=>[]);for(let u=0;u<o;u++)c.push(new v_(s.readDsClock(),s.readDsLen()))}}return t},nk=(s,t,e)=>{const n=new gg,a=Bt(s.restDecoder);for(let o=0;o<a;o++){s.resetDsCurVal();const c=Bt(s.restDecoder),u=Bt(s.restDecoder),d=e.clients.get(c)||[],f=mn(e,c);for(let g=0;g<u;g++){const y=s.readDsClock(),b=y+s.readDsLen();if(y<f){f<b&&Qy(n,c,f,b-f);let w=hr(d,y),A=d[w];for(!A.deleted&&A.id.clock<y&&(d.splice(w+1,0,sv(t,A,y-A.id.clock)),w++);w<d.length&&(A=d[w++],A.id.clock<b);)A.deleted||(b<A.id.clock+A.length&&d.splice(w,0,sv(t,A,b-A.id.clock)),A.delete(t))}else Qy(n,c,y,b-y)}}if(n.clients.size>0){const o=new pc;return te(o.restEncoder,0),Yh(o,n),o.toUint8Array()}return null},tM=U2;class Kh extends G5{constructor({guid:t=AB(),collectionid:e=null,gc:n=!0,gcFilter:a=()=>!0,meta:o=null,autoLoad:c=!1,shouldLoad:u=!0}={}){super(),this.gc=n,this.gcFilter=a,this.clientID=tM(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new aM,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=u,this.autoLoad=c,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=JT(f=>{this.on("load",()=>{this.isLoaded=!0,f(this)})});const d=()=>JT(f=>{const g=y=>{(y===void 0||y===!0)&&(this.off("sync",g),f())};this.on("sync",g)});this.on("sync",f=>{f===!1&&this.isSynced&&(this.whenSynced=d()),this.isSynced=f===void 0||f===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=d()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Se(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(fc(this.subdocs).map(t=>t.guid))}transact(t,e=null){return Se(this,t,e)}get(t,e=Nn){const n=Io(this.share,t,()=>{const o=new e;return o._integrate(this,null),o}),a=n.constructor;if(e!==Nn&&a!==e)if(a===Nn){const o=new e;o._map=n._map,n._map.forEach(c=>{for(;c!==null;c=c.left)c.parent=o}),o._start=n._start;for(let c=o._start;c!==null;c=c.right)c.parent=o;return o._length=n._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return n}getArray(t=""){return this.get(t,Lu)}getText(t=""){return this.get(t,Fh)}getMap(t=""){return this.get(t,Ph)}getXmlElement(t=""){return this.get(t,zh)}getXmlFragment(t=""){return this.get(t,gc)}toJSON(){const t={};return this.share.forEach((e,n)=>{t[n]=e.toJSON()}),t}destroy(){this.isDestroyed=!0,fc(this.subdocs).forEach(e=>e.destroy());const t=this._item;if(t!==null){this._item=null;const e=t.content;e.doc=new Kh({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Se(t.parent.doc,n=>{const a=e.doc;t.deleted||n.subdocsAdded.add(a),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class eM{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return Bt(this.restDecoder)}readDsLen(){return Bt(this.restDecoder)}}class nM extends eM{readLeftID(){return Zt(Bt(this.restDecoder),Bt(this.restDecoder))}readRightID(){return Zt(Bt(this.restDecoder),Bt(this.restDecoder))}readClient(){return Bt(this.restDecoder)}readInfo(){return Oh(this.restDecoder)}readString(){return Nu(this.restDecoder)}readParentInfo(){return Bt(this.restDecoder)===1}readTypeRef(){return Bt(this.restDecoder)}readLen(){return Bt(this.restDecoder)}readAny(){return Tf(this.restDecoder)}readBuf(){return BB(Ei(this.restDecoder))}readJSON(){return JSON.parse(Nu(this.restDecoder))}readKey(){return Nu(this.restDecoder)}}class sU{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Bt(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Bt(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class jh extends sU{constructor(t){super(t),this.keys=[],Bt(t),this.keyClockDecoder=new Ww(Ei(t)),this.clientDecoder=new gy(Ei(t)),this.leftClockDecoder=new Ww(Ei(t)),this.rightClockDecoder=new Ww(Ei(t)),this.infoDecoder=new ZT(Ei(t),Oh),this.stringDecoder=new bB(Ei(t)),this.parentInfoDecoder=new ZT(Ei(t),Oh),this.typeRefDecoder=new gy(Ei(t)),this.lenDecoder=new gy(Ei(t))}readLeftID(){return new Du(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Du(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Tf(this.restDecoder)}readBuf(){return Ei(this.restDecoder)}readJSON(){return Tf(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class rU{constructor(){this.restEncoder=Hv()}toUint8Array(){return sr(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){te(this.restEncoder,t)}writeDsLen(t){te(this.restEncoder,t)}}class mg extends rU{writeLeftID(t){te(this.restEncoder,t.client),te(this.restEncoder,t.clock)}writeRightID(t){te(this.restEncoder,t.client),te(this.restEncoder,t.clock)}writeClient(t){te(this.restEncoder,t)}writeInfo(t){_x(this.restEncoder,t)}writeString(t){Mu(this.restEncoder,t)}writeParentInfo(t){te(this.restEncoder,t?1:0)}writeTypeRef(t){te(this.restEncoder,t)}writeLen(t){te(this.restEncoder,t)}writeAny(t){Cf(this.restEncoder,t)}writeBuf(t){_i(this.restEncoder,t)}writeJSON(t){Mu(this.restEncoder,JSON.stringify(t))}writeKey(t){Mu(this.restEncoder,t)}}class aU{constructor(){this.restEncoder=Hv(),this.dsCurrVal=0}toUint8Array(){return sr(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,te(this.restEncoder,e)}writeDsLen(t){t===0&&ur(),te(this.restEncoder,t-1),this.dsCurrVal+=t}}class pc extends aU{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Kw,this.clientEncoder=new py,this.leftClockEncoder=new Kw,this.rightClockEncoder=new Kw,this.infoEncoder=new KT(_x),this.stringEncoder=new uB,this.parentInfoEncoder=new KT(_x),this.typeRefEncoder=new py,this.lenEncoder=new py}toUint8Array(){const t=Hv();return te(t,0),_i(t,this.keyClockEncoder.toUint8Array()),_i(t,this.clientEncoder.toUint8Array()),_i(t,this.leftClockEncoder.toUint8Array()),_i(t,this.rightClockEncoder.toUint8Array()),_i(t,sr(this.infoEncoder)),_i(t,this.stringEncoder.toUint8Array()),_i(t,sr(this.parentInfoEncoder)),_i(t,this.typeRefEncoder.toUint8Array()),_i(t,this.lenEncoder.toUint8Array()),Vv(t,sr(this.restEncoder)),sr(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Cf(this.restEncoder,t)}writeBuf(t){_i(this.restEncoder,t)}writeJSON(t){Cf(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);e===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const oU=(s,t,e,n)=>{n=Cc(n,t[0].id.clock);const a=hr(t,n);te(s.restEncoder,t.length-a),s.writeClient(e),te(s.restEncoder,n);const o=t[a];o.write(s,n-o.id.clock);for(let c=a+1;c<t.length;c++)t[c].write(s,0)},x_=(s,t,e)=>{const n=new Map;e.forEach((a,o)=>{mn(t,o)>a&&n.set(o,a)}),A_(t).forEach((a,o)=>{e.has(o)||n.set(o,0)}),te(s.restEncoder,n.size),fc(n.entries()).sort((a,o)=>o[0]-a[0]).forEach(([a,o])=>{oU(s,t.clients.get(a),a,o)})},lU=(s,t)=>{const e=Ms(),n=Bt(s.restDecoder);for(let a=0;a<n;a++){const o=Bt(s.restDecoder),c=new Array(o),u=s.readClient();let d=Bt(s.restDecoder);e.set(u,{i:0,refs:c});for(let f=0;f<o;f++){const g=s.readInfo();switch(Uv&g){case 0:{const y=s.readLen();c[f]=new es(Zt(u,d),y),d+=y;break}case 10:{const y=Bt(s.restDecoder);c[f]=new ns(Zt(u,d),y),d+=y;break}default:{const y=(g&(pa|Pi))===0,b=new on(Zt(u,d),null,(g&Pi)===Pi?s.readLeftID():null,null,(g&pa)===pa?s.readRightID():null,y?s.readParentInfo()?t.get(s.readString()):s.readLeftID():null,y&&(g&Ef)===Ef?s.readString():null,TM(s,g));c[f]=b,d+=b.length}}}}return e},cU=(s,t,e)=>{const n=[];let a=fc(e.keys()).sort((w,A)=>w-A);if(a.length===0)return null;const o=()=>{if(a.length===0)return null;let w=e.get(a[a.length-1]);for(;w.refs.length===w.i;)if(a.pop(),a.length>0)w=e.get(a[a.length-1]);else return null;return w};let c=o();if(c===null)return null;const u=new aM,d=new Map,f=(w,A)=>{const E=d.get(w);(E==null||E>A)&&d.set(w,A)};let g=c.refs[c.i++];const y=new Map,b=()=>{for(const w of n){const A=w.id.client,E=e.get(A);E?(E.i--,u.clients.set(A,E.refs.slice(E.i)),e.delete(A),E.i=0,E.refs=[]):u.clients.set(A,[w]),a=a.filter(T=>T!==A)}n.length=0};for(;;){if(g.constructor!==ns){const A=Io(y,g.id.client,()=>mn(t,g.id.client))-g.id.clock;if(A<0)n.push(g),f(g.id.client,g.id.clock-1),b();else{const E=g.getMissing(s,t);if(E!==null){n.push(g);const T=e.get(E)||{refs:[],i:0};if(T.refs.length===T.i)f(E,mn(t,E)),b();else{g=T.refs[T.i++];continue}}else(A===0||A<g.length)&&(g.integrate(s,A),y.set(g.id.client,g.id.clock+g.length))}}if(n.length>0)g=n.pop();else if(c!==null&&c.i<c.refs.length)g=c.refs[c.i++];else{if(c=o(),c===null)break;g=c.refs[c.i++]}}if(u.clients.size>0){const w=new pc;return x_(w,u,new Map),te(w.restEncoder,0),{missing:d,update:w.toUint8Array()}}return null},uU=(s,t)=>x_(s,t.doc.store,t.beforeState),hU=(s,t,e,n=new jh(s))=>Se(t,a=>{a.local=!1;let o=!1;const c=a.doc,u=c.store,d=lU(n,c),f=cU(a,u,d),g=u.pendingStructs;if(g){for(const[b,w]of g.missing)if(w<mn(u,b)){o=!0;break}if(f){for(const[b,w]of f.missing){const A=g.missing.get(b);(A==null||A>w)&&g.missing.set(b,w)}g.update=Zy([g.update,f.update])}}else u.pendingStructs=f;const y=nk(n,a,u);if(u.pendingDs){const b=new jh($h(u.pendingDs));Bt(b.restDecoder);const w=nk(b,a,u);y&&w?u.pendingDs=Zy([y,w]):u.pendingDs=y||w}else u.pendingDs=y;if(o){const b=u.pendingStructs.update;u.pendingStructs=null,iM(a.doc,b)}},e,!1),iM=(s,t,e,n=jh)=>{const a=$h(t);hU(a,s,e,new n(a))},dU=(s,t,e)=>iM(s,t,e,nM),fU=(s,t,e=new Map)=>{x_(s,t.store,e),Yh(s,iU(t.store))},pU=(s,t=new Uint8Array([0]),e=new pc)=>{const n=sM(t);fU(e,s,n);const a=[e.toUint8Array()];if(s.store.pendingDs&&a.push(s.store.pendingDs),s.store.pendingStructs&&a.push(TU(s.store.pendingStructs.update,t)),a.length>1){if(e.constructor===mg)return SU(a.map((o,c)=>c===0?o:RU(o)));if(e.constructor===pc)return Zy(a)}return a[0]},gU=(s,t)=>pU(s,t,new mg),mU=s=>{const t=new Map,e=Bt(s.restDecoder);for(let n=0;n<e;n++){const a=Bt(s.restDecoder),o=Bt(s.restDecoder);t.set(a,o)}return t},sM=s=>mU(new eM($h(s)));class yU{constructor(){this.l=[]}}const ik=()=>new yU,sk=(s,t)=>s.l.push(t),rk=(s,t)=>{const e=s.l,n=e.length;s.l=e.filter(a=>t!==a),n===s.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},rM=(s,t,e)=>m_(s.l,[t,e]);class Du{constructor(t,e){this.client=t,this.clock=e}}const Wm=(s,t)=>s===t||s!==null&&t!==null&&s.client===t.client&&s.clock===t.clock,Zt=(s,t)=>new Du(s,t),vU=s=>{for(const[t,e]of s.doc.share.entries())if(e===s)return t;throw ur()},wu=(s,t)=>t===void 0?!s.deleted:t.sv.has(s.id.client)&&(t.sv.get(s.id.client)||0)>s.id.clock&&!J2(t.ds,s.id),Cx=(s,t)=>{const e=Io(s.meta,Cx,Lh),n=s.doc.store;e.has(t)||(t.sv.forEach((a,o)=>{a<mn(n,o)&&Oo(s,Zt(o,a))}),Z2(s,t.ds,a=>{}),e.add(t))};class aM{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const A_=s=>{const t=new Map;return s.clients.forEach((e,n)=>{const a=e[e.length-1];t.set(n,a.id.clock+a.length)}),t},mn=(s,t)=>{const e=s.clients.get(t);if(e===void 0)return 0;const n=e[e.length-1];return n.id.clock+n.length},oM=(s,t)=>{let e=s.clients.get(t.id.client);if(e===void 0)e=[],s.clients.set(t.id.client,e);else{const n=e[e.length-1];if(n.id.clock+n.length!==t.id.clock)throw ur()}e.push(t)},hr=(s,t)=>{let e=0,n=s.length-1,a=s[n],o=a.id.clock;if(o===t)return n;let c=Do(t/(o+a.length-1)*n);for(;e<=n;){if(a=s[c],o=a.id.clock,o<=t){if(t<o+a.length)return c;e=c+1}else n=c-1;c=Do((e+n)/2)}throw ur()},bU=(s,t)=>{const e=s.clients.get(t.client);return e[hr(e,t.clock)]},Zw=bU,Tx=(s,t,e)=>{const n=hr(t,e),a=t[n];return a.id.clock<e&&a instanceof on?(t.splice(n+1,0,sv(s,a,e-a.id.clock)),n+1):n},Oo=(s,t)=>{const e=s.doc.store.clients.get(t.client);return e[Tx(s,e,t.clock)]},ak=(s,t,e)=>{const n=t.clients.get(e.client),a=hr(n,e.clock),o=n[a];return e.clock!==o.id.clock+o.length-1&&o.constructor!==es&&n.splice(a+1,0,sv(s,o,e.clock-o.id.clock+1)),o},wU=(s,t,e)=>{const n=s.clients.get(t.id.client);n[hr(n,t.id.clock)]=e},lM=(s,t,e,n,a)=>{if(n===0)return;const o=e+n;let c=Tx(s,t,e),u;do u=t[c++],o<u.id.clock+u.length&&Tx(s,t,o),a(u);while(c<t.length&&t[c].id.clock<o)};class xU{constructor(t,e,n){this.doc=t,this.deleteSet=new gg,this.beforeState=A_(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const ok=(s,t)=>t.deleteSet.clients.size===0&&!H5(t.afterState,(e,n)=>t.beforeState.get(n)!==e)?!1:(b_(t.deleteSet),uU(s,t),Yh(s,t.deleteSet),!0),lk=(s,t,e)=>{const n=t._item;(n===null||n.id.clock<(s.beforeState.get(n.id.client)||0)&&!n.deleted)&&Io(s.changed,t,Lh).add(e)},my=(s,t)=>{let e=s[t],n=s[t-1],a=t;for(;a>0;e=n,n=s[--a-1]){if(n.deleted===e.deleted&&n.constructor===e.constructor&&n.mergeWith(e)){e instanceof on&&e.parentSub!==null&&e.parent._map.get(e.parentSub)===e&&e.parent._map.set(e.parentSub,n);continue}break}const o=t-a;return o&&s.splice(t+1-o,o),o},AU=(s,t,e)=>{for(const[n,a]of s.clients.entries()){const o=t.clients.get(n);for(let c=a.length-1;c>=0;c--){const u=a[c],d=u.clock+u.len;for(let f=hr(o,u.clock),g=o[f];f<o.length&&g.id.clock<d;g=o[++f]){const y=o[f];if(u.clock+u.len<=y.id.clock)break;y instanceof on&&y.deleted&&!y.keep&&e(y)&&y.gc(t,!1)}}}},_U=(s,t)=>{s.clients.forEach((e,n)=>{const a=t.clients.get(n);for(let o=e.length-1;o>=0;o--){const c=e[o],u=P2(a.length-1,1+hr(a,c.clock+c.len-1));for(let d=u,f=a[d];d>0&&f.id.clock>=c.clock;f=a[d])d-=1+my(a,d)}})},cM=(s,t)=>{if(t<s.length){const e=s[t],n=e.doc,a=n.store,o=e.deleteSet,c=e._mergeStructs;try{b_(o),e.afterState=A_(e.doc.store),n.emit("beforeObserverCalls",[e,n]);const u=[];e.changed.forEach((d,f)=>u.push(()=>{(f._item===null||!f._item.deleted)&&f._callObserver(e,d)})),u.push(()=>{e.changedParentTypes.forEach((d,f)=>{f._dEH.l.length>0&&(f._item===null||!f._item.deleted)&&(d=d.filter(g=>g.target._item===null||!g.target._item.deleted),d.forEach(g=>{g.currentTarget=f,g._path=null}),d.sort((g,y)=>g.path.length-y.path.length),rM(f._dEH,d,e))})}),u.push(()=>n.emit("afterTransaction",[e,n])),m_(u,[]),e._needFormattingCleanup&&VU(e)}finally{n.gc&&AU(o,a,n.gcFilter),_U(o,a),e.afterState.forEach((g,y)=>{const b=e.beforeState.get(y)||0;if(b!==g){const w=a.clients.get(y),A=Cc(hr(w,b),1);for(let E=w.length-1;E>=A;)E-=1+my(w,E)}});for(let g=c.length-1;g>=0;g--){const{client:y,clock:b}=c[g].id,w=a.clients.get(y),A=hr(w,b);A+1<w.length&&my(w,A+1)>1||A>0&&my(w,A)}if(!e.local&&e.afterState.get(n.clientID)!==e.beforeState.get(n.clientID)&&(QB(y_,X2,"[yjs] ",$2,Y2,"Changed the client-id because another client seems to be using it."),n.clientID=tM()),n.emit("afterTransactionCleanup",[e,n]),n._observers.has("update")){const g=new mg;ok(g,e)&&n.emit("update",[g.toUint8Array(),e.origin,n,e])}if(n._observers.has("updateV2")){const g=new pc;ok(g,e)&&n.emit("updateV2",[g.toUint8Array(),e.origin,n,e])}const{subdocsAdded:u,subdocsLoaded:d,subdocsRemoved:f}=e;(u.size>0||f.size>0||d.size>0)&&(u.forEach(g=>{g.clientID=n.clientID,g.collectionid==null&&(g.collectionid=n.collectionid),n.subdocs.add(g)}),f.forEach(g=>n.subdocs.delete(g)),n.emit("subdocs",[{loaded:d,added:u,removed:f},n,e]),f.forEach(g=>g.destroy())),s.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,s])):cM(s,t+1)}}},Se=(s,t,e=null,n=!0)=>{const a=s._transactionCleanups;let o=!1,c=null;s._transaction===null&&(o=!0,s._transaction=new xU(s,e,n),a.push(s._transaction),a.length===1&&s.emit("beforeAllTransactions",[s]),s.emit("beforeTransaction",[s._transaction,s]));try{c=t(s._transaction)}finally{if(o){const u=s._transaction===a[0];s._transaction=null,u&&cM(a,0)}}return c};function*EU(s){const t=Bt(s.restDecoder);for(let e=0;e<t;e++){const n=Bt(s.restDecoder),a=s.readClient();let o=Bt(s.restDecoder);for(let c=0;c<n;c++){const u=s.readInfo();if(u===10){const d=Bt(s.restDecoder);yield new ns(Zt(a,o),d),o+=d}else if((Uv&u)!==0){const d=(u&(pa|Pi))===0,f=new on(Zt(a,o),null,(u&Pi)===Pi?s.readLeftID():null,null,(u&pa)===pa?s.readRightID():null,d?s.readParentInfo()?s.readString():s.readLeftID():null,d&&(u&Ef)===Ef?s.readString():null,TM(s,u));yield f,o+=f.length}else{const d=s.readLen();yield new es(Zt(a,o),d),o+=d}}}}class __{constructor(t,e){this.gen=EU(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ns);return this.curr}}class E_{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const SU=s=>Zy(s,nM,mg),CU=(s,t)=>{if(s.constructor===es){const{client:e,clock:n}=s.id;return new es(Zt(e,n+t),s.length-t)}else if(s.constructor===ns){const{client:e,clock:n}=s.id;return new ns(Zt(e,n+t),s.length-t)}else{const e=s,{client:n,clock:a}=e.id;return new on(Zt(n,a+t),null,Zt(n,a+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},Zy=(s,t=jh,e=pc)=>{if(s.length===1)return s[0];const n=s.map(g=>new t($h(g)));let a=n.map(g=>new __(g,!0)),o=null;const c=new e,u=new E_(c);for(;a=a.filter(b=>b.curr!==null),a.sort((b,w)=>{if(b.curr.id.client===w.curr.id.client){const A=b.curr.id.clock-w.curr.id.clock;return A===0?b.curr.constructor===w.curr.constructor?0:b.curr.constructor===ns?1:-1:A}else return w.curr.id.client-b.curr.id.client}),a.length!==0;){const g=a[0],y=g.curr.id.client;if(o!==null){let b=g.curr,w=!1;for(;b!==null&&b.id.clock+b.length<=o.struct.id.clock+o.struct.length&&b.id.client>=o.struct.id.client;)b=g.next(),w=!0;if(b===null||b.id.client!==y||w&&b.id.clock>o.struct.id.clock+o.struct.length)continue;if(y!==o.struct.id.client)io(u,o.struct,o.offset),o={struct:b,offset:0},g.next();else if(o.struct.id.clock+o.struct.length<b.id.clock)if(o.struct.constructor===ns)o.struct.length=b.id.clock+b.length-o.struct.id.clock;else{io(u,o.struct,o.offset);const A=b.id.clock-o.struct.id.clock-o.struct.length;o={struct:new ns(Zt(y,o.struct.id.clock+o.struct.length),A),offset:0}}else{const A=o.struct.id.clock+o.struct.length-b.id.clock;A>0&&(o.struct.constructor===ns?o.struct.length-=A:b=CU(b,A)),o.struct.mergeWith(b)||(io(u,o.struct,o.offset),o={struct:b,offset:0},g.next())}}else o={struct:g.curr,offset:0},g.next();for(let b=g.curr;b!==null&&b.id.client===y&&b.id.clock===o.struct.id.clock+o.struct.length&&b.constructor!==ns;b=g.next())io(u,o.struct,o.offset),o={struct:b,offset:0}}o!==null&&(io(u,o.struct,o.offset),o=null),S_(u);const d=n.map(g=>w_(g)),f=eU(d);return Yh(c,f),c.toUint8Array()},TU=(s,t,e=jh,n=pc)=>{const a=sM(t),o=new n,c=new E_(o),u=new e($h(s)),d=new __(u,!1);for(;d.curr;){const g=d.curr,y=g.id.client,b=a.get(y)||0;if(d.curr.constructor===ns){d.next();continue}if(g.id.clock+g.length>b)for(io(c,g,Cc(b-g.id.clock,0)),d.next();d.curr&&d.curr.id.client===y;)io(c,d.curr,0),d.next();else for(;d.curr&&d.curr.id.client===y&&d.curr.id.clock+d.curr.length<=b;)d.next()}S_(c);const f=w_(u);return Yh(o,f),o.toUint8Array()},uM=s=>{s.written>0&&(s.clientStructs.push({written:s.written,restEncoder:sr(s.encoder.restEncoder)}),s.encoder.restEncoder=Hv(),s.written=0)},io=(s,t,e)=>{s.written>0&&s.currClient!==t.id.client&&uM(s),s.written===0&&(s.currClient=t.id.client,s.encoder.writeClient(t.id.client),te(s.encoder.restEncoder,t.id.clock+e)),t.write(s.encoder,e),s.written++},S_=s=>{uM(s);const t=s.encoder.restEncoder;te(t,s.clientStructs.length);for(let e=0;e<s.clientStructs.length;e++){const n=s.clientStructs[e];te(t,n.written),Vv(t,n.restEncoder)}},kU=(s,t,e,n)=>{const a=new e($h(s)),o=new __(a,!1),c=new n,u=new E_(c);for(let f=o.curr;f!==null;f=o.next())io(u,t(f),0);S_(u);const d=w_(a);return Yh(c,d),c.toUint8Array()},RU=s=>kU(s,OB,jh,mg),ck="You must not compute changes after the event-handler fired.";class Gv{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=MU(this.currentTarget,this.target))}deletes(t){return J2(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Lo(ck);const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(a=>{if(a!==null){const o=e._map.get(a);let c,u;if(this.adds(o)){let d=o.left;for(;d!==null&&this.adds(d);)d=d.left;if(this.deletes(o))if(d!==null&&this.deletes(d))c="delete",u=Xw(d.content.getContent());else return;else d!==null&&this.deletes(d)?(c="update",u=Xw(d.content.getContent())):(c="add",u=void 0)}else if(this.deletes(o))c="delete",u=Xw(o.content.getContent());else return;t.set(a,{action:c,oldValue:u})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw Lo(ck);const e=this.target,n=Lh(),a=Lh(),o=[];if(t={added:n,deleted:a,delta:o,keys:this.keys},this.transaction.changed.get(e).has(null)){let u=null;const d=()=>{u&&o.push(u)};for(let f=e._start;f!==null;f=f.right)f.deleted?this.deletes(f)&&!this.adds(f)&&((u===null||u.delete===void 0)&&(d(),u={delete:0}),u.delete+=f.length,a.add(f)):this.adds(f)?((u===null||u.insert===void 0)&&(d(),u={insert:[]}),u.insert=u.insert.concat(f.content.getContent()),n.add(f)):((u===null||u.retain===void 0)&&(d(),u={retain:0}),u.retain+=f.length);u!==null&&u.retain===void 0&&d()}this._changes=t}return t}}const MU=(s,t)=>{const e=[];for(;t._item!==null&&t!==s;){if(t._item.parentSub!==null)e.unshift(t._item.parentSub);else{let n=0,a=t._item.parent._start;for(;a!==t._item&&a!==null;)!a.deleted&&a.countable&&(n+=a.length),a=a.right;e.unshift(n)}t=t._item.parent}return e},Bn=()=>{ZB("Invalid access: Add Yjs type to a document before reading data.")},hM=80;let C_=0;class NU{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=C_++}}const DU=s=>{s.timestamp=C_++},dM=(s,t,e)=>{s.p.marker=!1,s.p=t,t.marker=!0,s.index=e,s.timestamp=C_++},LU=(s,t,e)=>{if(s.length>=hM){const n=s.reduce((a,o)=>a.timestamp<o.timestamp?a:o);return dM(n,t,e),n}else{const n=new NU(t,e);return s.push(n),n}},Xv=(s,t)=>{if(s._start===null||t===0||s._searchMarker===null)return null;const e=s._searchMarker.length===0?null:s._searchMarker.reduce((o,c)=>fy(t-o.index)<fy(t-c.index)?o:c);let n=s._start,a=0;for(e!==null&&(n=e.p,a=e.index,DU(e));n.right!==null&&a<t;){if(!n.deleted&&n.countable){if(t<a+n.length)break;a+=n.length}n=n.right}for(;n.left!==null&&a>t;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);return e!==null&&fy(e.index-a)<n.parent.length/hM?(dM(e,n,a),e):LU(s._searchMarker,n,a)},Rf=(s,t,e)=>{for(let n=s.length-1;n>=0;n--){const a=s[n];if(e>0){let o=a.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(a.index-=o.length);if(o===null||o.marker===!0){s.splice(n,1);continue}a.p=o,o.marker=!0}(t<a.index||e>0&&t===a.index)&&(a.index=Cc(t,a.index+e))}},$v=(s,t,e)=>{const n=s,a=t.changedParentTypes;for(;Io(a,s,()=>[]).push(e),s._item!==null;)s=s._item.parent;rM(n._eH,e,t)};class Nn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ik(),this._dEH=ik(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw ar()}clone(){throw ar()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){sk(this._eH,t)}observeDeep(t){sk(this._dEH,t)}unobserve(t){rk(this._eH,t)}unobserveDeep(t){rk(this._dEH,t)}toJSON(){}}const fM=(s,t,e)=>{s.doc??Bn(),t<0&&(t=s._length+t),e<0&&(e=s._length+e);let n=e-t;const a=[];let o=s._start;for(;o!==null&&n>0;){if(o.countable&&!o.deleted){const c=o.content.getContent();if(c.length<=t)t-=c.length;else{for(let u=t;u<c.length&&n>0;u++)a.push(c[u]),n--;t=0}}o=o.right}return a},pM=s=>{s.doc??Bn();const t=[];let e=s._start;for(;e!==null;){if(e.countable&&!e.deleted){const n=e.content.getContent();for(let a=0;a<n.length;a++)t.push(n[a])}e=e.right}return t},Mf=(s,t)=>{let e=0,n=s._start;for(s.doc??Bn();n!==null;){if(n.countable&&!n.deleted){const a=n.content.getContent();for(let o=0;o<a.length;o++)t(a[o],e++,s)}n=n.right}},gM=(s,t)=>{const e=[];return Mf(s,(n,a)=>{e.push(t(n,a,s))}),e},OU=s=>{let t=s._start,e=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(e===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};e=t.content.getContent(),n=0,t=t.right}const a=e[n++];return e.length<=n&&(e=null),{done:!1,value:a}}}},mM=(s,t)=>{s.doc??Bn();const e=Xv(s,t);let n=s._start;for(e!==null&&(n=e.p,t-=e.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},Jy=(s,t,e,n)=>{let a=e;const o=s.doc,c=o.clientID,u=o.store,d=e===null?t._start:e.right;let f=[];const g=()=>{f.length>0&&(a=new on(Zt(c,mn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new mc(f)),a.integrate(s,0),f=[])};n.forEach(y=>{if(y===null)f.push(y);else switch(y.constructor){case Number:case Object:case Boolean:case Array:case String:f.push(y);break;default:switch(g(),y.constructor){case Uint8Array:case ArrayBuffer:a=new on(Zt(c,mn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new yg(new Uint8Array(y))),a.integrate(s,0);break;case Kh:a=new on(Zt(c,mn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new vg(y)),a.integrate(s,0);break;default:if(y instanceof Nn)a=new on(Zt(c,mn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new Sa(y)),a.integrate(s,0);else throw new Error("Unexpected content type in insert operation")}}}),g()},yM=()=>Lo("Length exceeded!"),vM=(s,t,e,n)=>{if(e>t._length)throw yM();if(e===0)return t._searchMarker&&Rf(t._searchMarker,e,n.length),Jy(s,t,null,n);const a=e,o=Xv(t,e);let c=t._start;for(o!==null&&(c=o.p,e-=o.index,e===0&&(c=c.prev,e+=c&&c.countable&&!c.deleted?c.length:0));c!==null;c=c.right)if(!c.deleted&&c.countable){if(e<=c.length){e<c.length&&Oo(s,Zt(c.id.client,c.id.clock+e));break}e-=c.length}return t._searchMarker&&Rf(t._searchMarker,a,n.length),Jy(s,t,c,n)},jU=(s,t,e)=>{let a=(t._searchMarker||[]).reduce((o,c)=>c.index>o.index?c:o,{index:0,p:t._start}).p;if(a)for(;a.right;)a=a.right;return Jy(s,t,a,e)},bM=(s,t,e,n)=>{if(n===0)return;const a=e,o=n,c=Xv(t,e);let u=t._start;for(c!==null&&(u=c.p,e-=c.index);u!==null&&e>0;u=u.right)!u.deleted&&u.countable&&(e<u.length&&Oo(s,Zt(u.id.client,u.id.clock+e)),e-=u.length);for(;n>0&&u!==null;)u.deleted||(n<u.length&&Oo(s,Zt(u.id.client,u.id.clock+n)),u.delete(s),n-=u.length),u=u.right;if(n>0)throw yM();t._searchMarker&&Rf(t._searchMarker,a,-o+n)},tv=(s,t,e)=>{const n=t._map.get(e);n!==void 0&&n.delete(s)},T_=(s,t,e,n)=>{const a=t._map.get(e)||null,o=s.doc,c=o.clientID;let u;if(n==null)u=new mc([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:u=new mc([n]);break;case Uint8Array:u=new yg(n);break;case Kh:u=new vg(n);break;default:if(n instanceof Nn)u=new Sa(n);else throw new Error("Unexpected content type")}new on(Zt(c,mn(o.store,c)),a,a&&a.lastId,null,null,t,e,u).integrate(s,0)},k_=(s,t)=>{s.doc??Bn();const e=s._map.get(t);return e!==void 0&&!e.deleted?e.content.getContent()[e.length-1]:void 0},wM=s=>{const t={};return s.doc??Bn(),s._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},xM=(s,t)=>{s.doc??Bn();const e=s._map.get(t);return e!==void 0&&!e.deleted},PU=(s,t)=>{const e={};return s._map.forEach((n,a)=>{let o=n;for(;o!==null&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;o!==null&&wu(o,t)&&(e[a]=o.content.getContent()[o.length-1])}),e},Qm=s=>(s.doc??Bn(),JB(s._map.entries(),t=>!t[1].deleted));class FU extends Gv{}class Lu extends Nn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Lu;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Lu}clone(){const t=new Lu;return t.insert(0,this.toArray().map(e=>e instanceof Nn?e.clone():e)),t}get length(){return this.doc??Bn(),this._length}_callObserver(t,e){super._callObserver(t,e),$v(this,t,new FU(this,t))}insert(t,e){this.doc!==null?Se(this.doc,n=>{vM(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.doc!==null?Se(this.doc,e=>{jU(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){this.doc!==null?Se(this.doc,n=>{bM(n,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return mM(this,t)}toArray(){return pM(this)}slice(t=0,e=this.length){return fM(this,t,e)}toJSON(){return this.map(t=>t instanceof Nn?t.toJSON():t)}map(t){return gM(this,t)}forEach(t){Mf(this,t)}[Symbol.iterator](){return OU(this)}_write(t){t.writeTypeRef(lH)}}const zU=s=>new Lu;class IU extends Gv{constructor(t,e,n){super(t,e),this.keysChanged=n}}class Ph extends Nn{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((n,a)=>{this.set(a,n)}),this._prelimContent=null}_copy(){return new Ph}clone(){const t=new Ph;return this.forEach((e,n)=>{t.set(n,e instanceof Nn?e.clone():e)}),t}_callObserver(t,e){$v(this,t,new IU(this,t,e))}toJSON(){this.doc??Bn();const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const a=e.content.getContent()[e.length-1];t[n]=a instanceof Nn?a.toJSON():a}}),t}get size(){return[...Qm(this)].length}keys(){return Qw(Qm(this),t=>t[0])}values(){return Qw(Qm(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return Qw(Qm(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??Bn(),this._map.forEach((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Se(this.doc,e=>{tv(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return this.doc!==null?Se(this.doc,n=>{T_(n,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return k_(this,t)}has(t){return xM(this,t)}clear(){this.doc!==null?Se(this.doc,t=>{this.forEach(function(e,n,a){tv(t,a,n)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(cH)}}const BU=s=>new Ph,ko=(s,t)=>s===t||typeof s=="object"&&typeof t=="object"&&s&&t&&DB(s,t);class kx{constructor(t,e,n,a){this.left=t,this.right=e,this.index=n,this.currentAttributes=a}forward(){switch(this.right===null&&ur(),this.right.content.constructor){case ln:this.right.deleted||Wh(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const uk=(s,t,e)=>{for(;t.right!==null&&e>0;){switch(t.right.content.constructor){case ln:t.right.deleted||Wh(t.currentAttributes,t.right.content);break;default:t.right.deleted||(e<t.right.length&&Oo(s,Zt(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Zm=(s,t,e,n)=>{const a=new Map,o=n?Xv(t,e):null;if(o){const c=new kx(o.p.left,o.p,o.index,a);return uk(s,c,e-o.index)}else{const c=new kx(null,t._start,0,a);return uk(s,c,e)}},AM=(s,t,e,n)=>{for(;e.right!==null&&(e.right.deleted===!0||e.right.content.constructor===ln&&ko(n.get(e.right.content.key),e.right.content.value));)e.right.deleted||n.delete(e.right.content.key),e.forward();const a=s.doc,o=a.clientID;n.forEach((c,u)=>{const d=e.left,f=e.right,g=new on(Zt(o,mn(a.store,o)),d,d&&d.lastId,f,f&&f.id,t,null,new ln(u,c));g.integrate(s,0),e.right=g,e.forward()})},Wh=(s,t)=>{const{key:e,value:n}=t;n===null?s.delete(e):s.set(e,n)},_M=(s,t)=>{for(;s.right!==null;){if(!(s.right.deleted||s.right.content.constructor===ln&&ko(t[s.right.content.key]??null,s.right.content.value)))break;s.forward()}},EM=(s,t,e,n)=>{const a=s.doc,o=a.clientID,c=new Map;for(const u in n){const d=n[u],f=e.currentAttributes.get(u)??null;if(!ko(f,d)){c.set(u,f);const{left:g,right:y}=e;e.right=new on(Zt(o,mn(a.store,o)),g,g&&g.lastId,y,y&&y.id,t,null,new ln(u,d)),e.right.integrate(s,0),e.forward()}}return c},Jw=(s,t,e,n,a)=>{e.currentAttributes.forEach((b,w)=>{a[w]===void 0&&(a[w]=null)});const o=s.doc,c=o.clientID;_M(e,a);const u=EM(s,t,e,a),d=n.constructor===String?new dr(n):n instanceof Nn?new Sa(n):new Tc(n);let{left:f,right:g,index:y}=e;t._searchMarker&&Rf(t._searchMarker,e.index,d.getLength()),g=new on(Zt(c,mn(o.store,c)),f,f&&f.lastId,g,g&&g.id,t,null,d),g.integrate(s,0),e.right=g,e.index=y,e.forward(),AM(s,t,e,u)},hk=(s,t,e,n,a)=>{const o=s.doc,c=o.clientID;_M(e,a);const u=EM(s,t,e,a);t:for(;e.right!==null&&(n>0||u.size>0&&(e.right.deleted||e.right.content.constructor===ln));){if(!e.right.deleted)switch(e.right.content.constructor){case ln:{const{key:d,value:f}=e.right.content,g=a[d];if(g!==void 0){if(ko(g,f))u.delete(d);else{if(n===0)break t;u.set(d,f)}e.right.delete(s)}else e.currentAttributes.set(d,f);break}default:n<e.right.length&&Oo(s,Zt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length;break}e.forward()}if(n>0){let d="";for(;n>0;n--)d+=`
`;e.right=new on(Zt(c,mn(o.store,c)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new dr(d)),e.right.integrate(s,0),e.forward()}AM(s,t,e,u)},SM=(s,t,e,n,a)=>{let o=t;const c=Ms();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===ln){const f=o.content;c.set(f.key,f)}o=o.right}let u=0,d=!1;for(;t!==o;){if(e===t&&(d=!0),!t.deleted){const f=t.content;switch(f.constructor){case ln:{const{key:g,value:y}=f,b=n.get(g)??null;(c.get(g)!==f||b===y)&&(t.delete(s),u++,!d&&(a.get(g)??null)===y&&b!==y&&(b===null?a.delete(g):a.set(g,b))),!d&&!t.deleted&&Wh(a,f);break}}}t=t.right}return u},UU=(s,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===ln){const n=t.content.key;e.has(n)?t.delete(s):e.add(n)}t=t.left}},HU=s=>{let t=0;return Se(s.doc,e=>{let n=s._start,a=s._start,o=Ms();const c=xx(o);for(;a;){if(a.deleted===!1)switch(a.content.constructor){case ln:Wh(c,a.content);break;default:t+=SM(e,n,a,o,c),o=xx(c),n=a;break}a=a.right}}),t},VU=s=>{const t=new Set,e=s.doc;for(const[n,a]of s.afterState.entries()){const o=s.beforeState.get(n)||0;a!==o&&lM(s,e.store.clients.get(n),o,a,c=>{!c.deleted&&c.content.constructor===ln&&c.constructor!==es&&t.add(c.parent)})}Se(e,n=>{Z2(s,s.deleteSet,a=>{if(a instanceof es||!a.parent._hasFormatting||t.has(a.parent))return;const o=a.parent;a.content.constructor===ln?t.add(o):UU(n,a)});for(const a of t)HU(a)})},dk=(s,t,e)=>{const n=e,a=xx(t.currentAttributes),o=t.right;for(;e>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Sa:case Tc:case dr:e<t.right.length&&Oo(s,Zt(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(s);break}t.forward()}o&&SM(s,o,t.right,a,t.currentAttributes);const c=(t.left||t.right).parent;return c._searchMarker&&Rf(c._searchMarker,t.index,-n+e),t};class qU extends Gv{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(a=>{a===null?this.childListChanged=!0:this.keysChanged.add(a)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,e=[];Se(t,n=>{const a=new Map,o=new Map;let c=this.target._start,u=null;const d={};let f="",g=0,y=0;const b=()=>{if(u!==null){let w=null;switch(u){case"delete":y>0&&(w={delete:y}),y=0;break;case"insert":(typeof f=="object"||f.length>0)&&(w={insert:f},a.size>0&&(w.attributes={},a.forEach((A,E)=>{A!==null&&(w.attributes[E]=A)}))),f="";break;case"retain":g>0&&(w={retain:g},RB(d)||(w.attributes=CB({},d))),g=0;break}w&&e.push(w),u=null}};for(;c!==null;){switch(c.content.constructor){case Sa:case Tc:this.adds(c)?this.deletes(c)||(b(),u="insert",f=c.content.getContent()[0],b()):this.deletes(c)?(u!=="delete"&&(b(),u="delete"),y+=1):c.deleted||(u!=="retain"&&(b(),u="retain"),g+=1);break;case dr:this.adds(c)?this.deletes(c)||(u!=="insert"&&(b(),u="insert"),f+=c.content.str):this.deletes(c)?(u!=="delete"&&(b(),u="delete"),y+=c.length):c.deleted||(u!=="retain"&&(b(),u="retain"),g+=c.length);break;case ln:{const{key:w,value:A}=c.content;if(this.adds(c)){if(!this.deletes(c)){const E=a.get(w)??null;ko(E,A)?A!==null&&c.delete(n):(u==="retain"&&b(),ko(A,o.get(w)??null)?delete d[w]:d[w]=A)}}else if(this.deletes(c)){o.set(w,A);const E=a.get(w)??null;ko(E,A)||(u==="retain"&&b(),d[w]=E)}else if(!c.deleted){o.set(w,A);const E=d[w];E!==void 0&&(ko(E,A)?E!==null&&c.delete(n):(u==="retain"&&b(),A===null?delete d[w]:d[w]=A))}c.deleted||(u==="insert"&&b(),Wh(a,c.content));break}}c=c.right}for(b();e.length>0;){const w=e[e.length-1];if(w.retain!==void 0&&w.attributes===void 0)e.pop();else break}}),this._delta=e}return this._delta}}class Fh extends Nn{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Bn(),this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new Fh}clone(){const t=new Fh;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new qU(this,t,e);$v(this,t,n),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??Bn();let t="",e=this._start;for(;e!==null;)!e.deleted&&e.countable&&e.content.constructor===dr&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){this.doc!==null?Se(this.doc,n=>{const a=new kx(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const c=t[o];if(c.insert!==void 0){const u=!e&&typeof c.insert=="string"&&o===t.length-1&&a.right===null&&c.insert.slice(-1)===`
`?c.insert.slice(0,-1):c.insert;(typeof u!="string"||u.length>0)&&Jw(n,this,a,u,c.attributes||{})}else c.retain!==void 0?hk(n,this,a,c.retain,c.attributes||{}):c.delete!==void 0&&dk(n,a,c.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,n){this.doc??Bn();const a=[],o=new Map,c=this.doc;let u="",d=this._start;function f(){if(u.length>0){const y={};let b=!1;o.forEach((A,E)=>{b=!0,y[E]=A});const w={insert:u};b&&(w.attributes=y),a.push(w),u=""}}const g=()=>{for(;d!==null;){if(wu(d,t)||e!==void 0&&wu(d,e))switch(d.content.constructor){case dr:{const y=o.get("ychange");t!==void 0&&!wu(d,t)?(y===void 0||y.user!==d.id.client||y.type!=="removed")&&(f(),o.set("ychange",n?n("removed",d.id):{type:"removed"})):e!==void 0&&!wu(d,e)?(y===void 0||y.user!==d.id.client||y.type!=="added")&&(f(),o.set("ychange",n?n("added",d.id):{type:"added"})):y!==void 0&&(f(),o.delete("ychange")),u+=d.content.str;break}case Sa:case Tc:{f();const y={insert:d.content.getContent()[0]};if(o.size>0){const b={};y.attributes=b,o.forEach((w,A)=>{b[A]=w})}a.push(y);break}case ln:wu(d,t)&&(f(),Wh(o,d.content));break}d=d.right}f()};return t||e?Se(c,y=>{t&&Cx(y,t),e&&Cx(y,e),g()},"cleanup"):g(),a}insert(t,e,n){if(e.length<=0)return;const a=this.doc;a!==null?Se(a,o=>{const c=Zm(o,this,t,!n);n||(n={},c.currentAttributes.forEach((u,d)=>{n[d]=u})),Jw(o,this,c,e,n)}):this._pending.push(()=>this.insert(t,e,n))}insertEmbed(t,e,n){const a=this.doc;a!==null?Se(a,o=>{const c=Zm(o,this,t,!n);Jw(o,this,c,e,n||{})}):this._pending.push(()=>this.insertEmbed(t,e,n||{}))}delete(t,e){if(e===0)return;const n=this.doc;n!==null?Se(n,a=>{dk(a,Zm(a,this,t,!0),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,n){if(e===0)return;const a=this.doc;a!==null?Se(a,o=>{const c=Zm(o,this,t,!1);c.right!==null&&hk(o,this,c,e,n)}):this._pending.push(()=>this.format(t,e,n))}removeAttribute(t){this.doc!==null?Se(this.doc,e=>{tv(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){this.doc!==null?Se(this.doc,n=>{T_(n,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return k_(this,t)}getAttributes(){return wM(this)}_write(t){t.writeTypeRef(uH)}}const GU=s=>new Fh;class tx{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??Bn()}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(e)))do if(e=t.content.type,!t.deleted&&(e.constructor===zh||e.constructor===gc)&&e._start!==null)t=e._start;else for(;t!==null;){const n=t.next;if(n!==null){t=n;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class gc extends Nn{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new gc}clone(){const t=new gc;return t.insert(0,this.toArray().map(e=>e instanceof Nn?e.clone():e)),t}get length(){return this.doc??Bn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new tx(this,t)}querySelector(t){t=t.toUpperCase();const n=new tx(this,a=>a.nodeName&&a.nodeName.toUpperCase()===t).next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),fc(new tx(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){$v(this,t,new YU(this,e,t))}toString(){return gM(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const a=t.createDocumentFragment();return n!==void 0&&n._createAssociation(a,this),Mf(this,o=>{a.insertBefore(o.toDOM(t,e,n),null)}),a}insert(t,e){this.doc!==null?Se(this.doc,n=>{vM(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(this.doc!==null)Se(this.doc,n=>{const a=t&&t instanceof Nn?t._item:t;Jy(n,this,a,e)});else{const n=this._prelimContent,a=t===null?0:n.findIndex(o=>o===t)+1;if(a===0&&t!==null)throw Lo("Reference item not found");n.splice(a,0,...e)}}delete(t,e=1){this.doc!==null?Se(this.doc,n=>{bM(n,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return pM(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return mM(this,t)}slice(t=0,e=this.length){return fM(this,t,e)}forEach(t){Mf(this,t)}_write(t){t.writeTypeRef(dH)}}const XU=s=>new gc;class zh extends gc{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((n,a)=>{this.setAttribute(a,n)}),this._prelimAttrs=null}_copy(){return new zh(this.nodeName)}clone(){const t=new zh(this.nodeName),e=this.getAttributes();return kB(e,(n,a)=>{typeof n=="string"&&t.setAttribute(a,n)}),t.insert(0,this.toArray().map(n=>n instanceof Nn?n.clone():n)),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const u in t)n.push(u);n.sort();const a=n.length;for(let u=0;u<a;u++){const d=n[u];e.push(d+'="'+t[d]+'"')}const o=this.nodeName.toLocaleLowerCase(),c=e.length>0?" "+e.join(" "):"";return`<${o}${c}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Se(this.doc,e=>{tv(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){this.doc!==null?Se(this.doc,n=>{T_(n,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return k_(this,t)}hasAttribute(t){return xM(this,t)}getAttributes(t){return t?PU(this,t):wM(this)}toDOM(t=document,e={},n){const a=t.createElement(this.nodeName),o=this.getAttributes();for(const c in o){const u=o[c];typeof u=="string"&&a.setAttribute(c,u)}return Mf(this,c=>{a.appendChild(c.toDOM(t,e,n))}),n!==void 0&&n._createAssociation(a,this),a}_write(t){t.writeTypeRef(hH),t.writeKey(this.nodeName)}}const $U=s=>new zh(s.readKey());class YU extends Gv{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(a=>{a===null?this.childListChanged=!0:this.attributesChanged.add(a)})}}class ev extends Ph{constructor(t){super(),this.hookName=t}_copy(){return new ev(this.hookName)}clone(){const t=new ev(this.hookName);return this.forEach((e,n)=>{t.set(n,e)}),t}toDOM(t=document,e={},n){const a=e[this.hookName];let o;return a!==void 0?o=a.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(o,this),o}_write(t){t.writeTypeRef(fH),t.writeKey(this.hookName)}}const KU=s=>new ev(s.readKey());class nv extends Fh{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new nv}clone(){const t=new nv;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const a=t.createTextNode(this.toString());return n!==void 0&&n._createAssociation(a,this),a}toString(){return this.toDelta().map(t=>{const e=[];for(const a in t.attributes){const o=[];for(const c in t.attributes[a])o.push({key:c,value:t.attributes[a][c]});o.sort((c,u)=>c.key<u.key?-1:1),e.push({nodeName:a,attrs:o})}e.sort((a,o)=>a.nodeName<o.nodeName?-1:1);let n="";for(let a=0;a<e.length;a++){const o=e[a];n+=`<${o.nodeName}`;for(let c=0;c<o.attrs.length;c++){const u=o.attrs[c];n+=` ${u.key}="${u.value}"`}n+=">"}n+=t.insert;for(let a=e.length-1;a>=0;a--)n+=`</${e[a].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(pH)}}const WU=s=>new nv;class R_{constructor(t,e){this.id=t,this.length=e}get deleted(){throw ar()}mergeWith(t){return!1}write(t,e,n){throw ar()}integrate(t,e){throw ar()}}const QU=0;class es extends R_{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),oM(t.doc.store,this)}write(t,e){t.writeInfo(QU),t.writeLen(this.length-e)}getMissing(t,e){return null}}class yg{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new yg(this.content)}splice(t){throw ar()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const ZU=s=>new yg(s.readBuf());class Nf{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Nf(this.len)}splice(t){const e=new Nf(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){Qy(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const JU=s=>new Nf(s.readLen()),CM=(s,t)=>new Kh({guid:s,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class vg{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),t.meta!==null&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new vg(CM(this.doc.guid,this.opts))}splice(t){throw ar()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const tH=s=>new vg(CM(s.readString(),s.readAny()));class Tc{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Tc(this.embed)}splice(t){throw ar()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const eH=s=>new Tc(s.readJSON());class ln{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ln(this.key,this.value)}splice(t){throw ar()}mergeWith(t){return!1}integrate(t,e){const n=e.parent;n._searchMarker=null,n._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const nH=s=>new ln(s.readKey(),s.readJSON());class iv{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new iv(this.arr)}splice(t){const e=new iv(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const o=this.arr[a];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const iH=s=>{const t=s.readLen(),e=[];for(let n=0;n<t;n++){const a=s.readString();a==="undefined"?e.push(void 0):e.push(JSON.parse(a))}return new iv(e)},sH=Wy("node_env")==="development";class mc{constructor(t){this.arr=t,sH&&V2(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new mc(this.arr)}splice(t){const e=new mc(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const o=this.arr[a];t.writeAny(o)}}getRef(){return 8}}const rH=s=>{const t=s.readLen(),e=[];for(let n=0;n<t;n++)e.push(s.readAny());return new mc(e)};class dr{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new dr(this.str)}splice(t){const e=new dr(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"",e.str=""+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(e===0?this.str:this.str.slice(e))}getRef(){return 4}}const aH=s=>new dr(s.readString()),oH=[zU,BU,GU,$U,XU,KU,WU],lH=0,cH=1,uH=2,hH=3,dH=4,fH=5,pH=6;class Sa{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Sa(this.type._copy())}splice(t){throw ar()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;e!==null;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;e!==null;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(t,!0),n=n.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const gH=s=>new Sa(oH[s.readTypeRef()](s)),sv=(s,t,e)=>{const{client:n,clock:a}=t.id,o=new on(Zt(n,a+e),t,Zt(n,a+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=Zt(t.redone.client,t.redone.clock+e)),t.right=o,o.right!==null&&(o.right.left=o),s._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=e,o};class on extends R_{constructor(t,e,n,a,o,c,u,d){super(t,d.getLength()),this.origin=n,this.left=e,this.right=a,this.rightOrigin=o,this.parent=c,this.parentSub=u,this.redone=null,this.content=d,this.info=this.content.isCountable()?XT:0}set marker(t){(this.info&Yw)>0!==t&&(this.info^=Yw)}get marker(){return(this.info&Yw)>0}get keep(){return(this.info&GT)>0}set keep(t){this.keep!==t&&(this.info^=GT)}get countable(){return(this.info&XT)>0}get deleted(){return(this.info&$w)>0}set deleted(t){this.deleted!==t&&(this.info^=$w)}markDeleted(){this.info|=$w}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=mn(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=mn(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Du&&this.id.client!==this.parent.client&&this.parent.clock>=mn(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ak(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Oo(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===es||this.right&&this.right.constructor===es)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===on?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===on&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Du){const n=Zw(e,this.parent);n.constructor===es?this.parent=null:this.parent=n.content.type}return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=ak(t,t.doc.store,Zt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,a;if(n!==null)a=n.right;else if(this.parentSub!==null)for(a=this.parent._map.get(this.parentSub)||null;a!==null&&a.left!==null;)a=a.left;else a=this.parent._start;const o=new Set,c=new Set;for(;a!==null&&a!==this.right;){if(c.add(a),o.add(a),Wm(this.origin,a.origin)){if(a.id.client<this.id.client)n=a,o.clear();else if(Wm(this.rightOrigin,a.rightOrigin))break}else if(a.origin!==null&&c.has(Zw(t.doc.store,a.origin)))o.has(Zw(t.doc.store,a.origin))||(n=a,o.clear());else break;a=a.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),oM(t.doc.store,this),this.content.integrate(t,this),lk(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new es(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Zt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Wm(t.origin,this.lastId)&&this.right===t&&Wm(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(n=>{n.p===t&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&this.parentSub===null&&(e._length-=this.length),this.markDeleted(),Qy(t.deleteSet,this.id.client,this.id.clock,this.length),lk(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw ur();this.content.gc(t),e?wU(t,this,new es(this.id,this.length)):this.content=new Nf(this.length)}write(t,e){const n=e>0?Zt(this.id.client,this.id.clock+e-1):this.origin,a=this.rightOrigin,o=this.parentSub,c=this.content.getRef()&Uv|(n===null?0:Pi)|(a===null?0:pa)|(o===null?0:Ef);if(t.writeInfo(c),n!==null&&t.writeLeftID(n),a!==null&&t.writeRightID(a),n===null&&a===null){const u=this.parent;if(u._item!==void 0){const d=u._item;if(d===null){const f=vU(u);t.writeParentInfo(!0),t.writeString(f)}else t.writeParentInfo(!1),t.writeLeftID(d.id)}else u.constructor===String?(t.writeParentInfo(!0),t.writeString(u)):u.constructor===Du?(t.writeParentInfo(!1),t.writeLeftID(u)):ur();o!==null&&t.writeString(o)}this.content.write(t,e)}}const TM=(s,t)=>mH[t&Uv](s),mH=[()=>{ur()},JU,iH,ZU,aH,eH,nH,gH,rH,tH,()=>{ur()}],yH=10;class ns extends R_{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){ur()}write(t,e){t.writeInfo(yH),te(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const kM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},RM="__ $YJS$ __";kM[RM]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");kM[RM]=!0;const fk=["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"];function vH(s){return s.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2)}function bH(s){const t=s.split("").reduce((e,n)=>e+n.charCodeAt(0),0);return fk[t%fk.length]}function wH({collaborators:s,maxShow:t=5}){const e=s.slice(0,t),n=Math.max(0,s.length-t);return s.length===0?null:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx($y,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{className:"flex -space-x-2",children:[e.map(a=>x.jsx("div",{className:`
                            relative h-8 w-8 rounded-full border-2 border-background
                            flex items-center justify-center text-white text-xs font-medium
                            ${bH(a.id)}
                            hover:z-10 hover:scale-110 transition-transform cursor-pointer
                        `,title:`${a.name}${a.email?` (${a.email})`:""}`,children:vH(a.name)},a.id)),n>0&&x.jsxs("div",{className:`
                            relative h-8 w-8 rounded-full border-2 border-background
                            flex items-center justify-center bg-muted text-muted-foreground text-xs font-medium
                            hover:z-10 hover:scale-110 transition-transform cursor-pointer
                        `,title:`+${n} more collaborators`,children:["+",n]})]})]})}function xH(s){var a;const t=[],e=s.split(`
`);let n="main.tex";for(let o=0;o<e.length;o++){const c=e[o],u=c.match(/^\(([^)]+\.(?:tex|sty|cls|def))/);if(u&&(n=u[1]),c.startsWith("!")){const d=c.substring(1).trim();let f,g,y=d;for(let b=o+1;b<Math.min(o+5,e.length);b++){const w=e[b],A=w.match(/^l\.(\d+)\s+(.*)/);if(A&&(f=parseInt(A[1]),g=A[2]),w&&!w.startsWith("!")&&!w.startsWith("l.")&&(y+=`
`+w.trim()),A||b-o>3)break}t.push({type:"error",message:d,line:f,file:n,lineContent:g,fullMessage:y})}if(c.includes("Warning:")||c.includes("warning:")){const d=c.match(/(?:LaTeX|Package|Class)\s+(\w+)?\s*Warning:\s*(.+)/);if(d){const f=d[2],g=c.match(/on input line (\d+)/);t.push({type:"warning",message:f,line:g?parseInt(g[1]):void 0,file:n})}}if(c.includes("File")&&c.includes("not found")){const d=c.match(/File\s+['`"]([^'"]+)[''"]\s+not found/);d&&t.push({type:"error",message:`File not found: ${d[1]}`,file:n,fullMessage:"This file is required but could not be loaded. Make sure it exists in your project or is available in the TeXLive distribution."})}if(c.includes("Package")&&c.includes("not found")){const d=c.match(/Package\s+['`"]?(\w+)['`"]?\s+(?:not found|Error)/i);d&&t.push({type:"error",message:`Package not found: ${d[1]}`,fullMessage:`The package '${d[1]}' is not available. Install it via your TeXLive distribution or remove it from your document.`})}if(c.includes("Undefined control sequence")){const d=(a=e[o+1])==null?void 0:a.match(/\\([a-zA-Z]+)/);t.push({type:"error",message:`Undefined control sequence${d?`: \\${d[1]}`:""}`,line:void 0,file:n,fullMessage:"A command was used that LaTeX doesn't recognize. Check for typos or missing packages."})}}return t}function AH(s){if(s.length===0)return" No errors found";const t=s.filter(a=>a.type==="error").length,e=s.filter(a=>a.type==="warning").length;let n=` Compilation Summary:
`;return n+=`    ${t} error(s)
`,n+=`     ${e} warning(s)

`,s.forEach((a,o)=>{const c=a.type==="error"?"":a.type==="warning"?"":"";n+=`${c} ${a.type.toUpperCase()}`,a.line&&(n+=` at line ${a.line}`),a.file&&a.file!=="main.tex"&&(n+=` in ${a.file}`),n+=`
   ${a.message}
`,a.lineContent&&(n+=`   Code: ${a.lineContent}
`),o<s.length-1&&(n+=`
`)}),n}function _H({isOpen:s,onClose:t,projectId:e,projectName:n,collaborators:a,onCollaboratorAdded:o}){const[c,u]=S.useState(""),[d,f]=S.useState("EDITOR"),[g,y]=S.useState(!1),[b,w]=S.useState(null),[A,E]=S.useState(""),[T,C]=S.useState(!1),D=`${window.location.origin}/editor/${e}`,L=()=>{navigator.clipboard.writeText(D),C(!0),setTimeout(()=>C(!1),2e3)},z=async U=>{U.preventDefault(),E(""),y(!0);try{await Mn.addCollaborator(e,c,d),u(""),o==null||o()}catch(O){E(O.message||"Khng th thm cng tc vin")}finally{y(!1)}},B=async U=>{w(U);try{await Mn.removeCollaborator(e,U),o==null||o()}catch(O){E(O.message||"Khng th xa cng tc vin")}finally{w(null)}};return s?x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-card border rounded-lg shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx($y,{className:"h-5 w-5 text-primary"}),x.jsx("h2",{className:"font-semibold",children:"Chia s d n"})]}),x.jsx("button",{onClick:t,className:"p-1 hover:bg-accent rounded",children:x.jsx(s_,{className:"h-5 w-5"})})]}),x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"D n"}),x.jsx("p",{className:"font-medium",children:n})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Link chia s"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:D,readOnly:!0,className:"flex-1 px-3 py-2 bg-muted border rounded text-sm"}),x.jsx(Ie,{variant:"outline",size:"sm",onClick:L,className:"gap-2",children:T?x.jsxs(x.Fragment,{children:[x.jsx(z3,{className:"h-4 w-4"})," copy"]}):x.jsxs(x.Fragment,{children:[x.jsx(Q3,{className:"h-4 w-4"}),"Copy"]})})]})]}),x.jsxs("form",{onSubmit:z,className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Thm cng tc vin"}),x.jsx("input",{type:"email",value:c,onChange:U=>u(U.target.value),placeholder:"Email ngi dng",className:"w-full px-3 py-2 bg-background border rounded",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quyn truy cp"}),x.jsxs("select",{value:d,onChange:U=>f(U.target.value),className:"w-full px-3 py-2 bg-background border rounded",children:[x.jsx("option",{value:"VIEWER",children:"Viewer (Ch xem)"}),x.jsx("option",{value:"EDITOR",children:"Editor (Chnh sa)"})]})]}),A&&x.jsx("p",{className:"text-sm text-destructive",children:A}),x.jsxs(Ie,{type:"submit",disabled:g||!c,className:"w-full gap-2",children:[g?x.jsx(Rs,{size:"sm"}):x.jsx(zF,{className:"h-4 w-4"}),"Thm cng tc vin"]})]}),a.length>0&&x.jsxs("div",{children:[x.jsxs("h3",{className:"text-sm font-medium mb-2",children:["Cng tc vin (",a.length,")"]}),x.jsx("div",{className:"space-y-2",children:a.map(U=>x.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-sm",children:U.user.name}),x.jsx("p",{className:"text-xs text-muted-foreground",children:U.user.email})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:`text-xs px-2 py-1 rounded ${U.role==="VIEWER"?"bg-blue-500/10 text-blue-500":"bg-green-500/10 text-green-500"}`,children:U.role==="VIEWER"?"Viewer":"Editor"}),x.jsx("button",{onClick:()=>B(U.user.id),disabled:b===U.user.id,className:"p-1 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-50",title:"Xa cng tc vin",children:b===U.user.id?x.jsx(Rs,{size:"sm"}):x.jsx(dx,{className:"h-4 w-4"})})]})]},U.id))})]})]})]})}):null}var yf={};yf.d=(s,t)=>{for(var e in t)yf.o(t,e)&&!yf.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};yf.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var Rt=globalThis.pdfjsLib={};yf.d(Rt,{AbortException:()=>Rc,AnnotationEditorLayer:()=>zA,AnnotationEditorParamsType:()=>Mt,AnnotationEditorType:()=>Jt,AnnotationEditorUIManager:()=>vc,AnnotationLayer:()=>x8,AnnotationMode:()=>so,CMapCompressionType:()=>Mx,ColorPicker:()=>hv,DOMSVGFactory:()=>D_,DrawLayer:()=>HA,FeatureTest:()=>ci,GlobalWorkerOptions:()=>ga,ImageKind:()=>yy,InvalidPDFException:()=>NM,MissingPDFException:()=>kc,OPS:()=>fs,Outliner:()=>bA,PDFDataRangeTransport:()=>CN,PDFDateString:()=>zM,PDFWorker:()=>ju,PasswordResponses:()=>TH,PermissionFlag:()=>CH,PixelsPerInch:()=>jo,RenderingCancelledException:()=>L_,TextLayer:()=>cv,UnexpectedResponseException:()=>Qv,Util:()=>_t,VerbosityLevel:()=>Yv,XfaLayer:()=>kN,build:()=>e8,createValidAbsoluteUrl:()=>NH,fetchData:()=>nb,getDocument:()=>X6,getFilenameFromUrl:()=>UH,getPdfFilenameFromUrl:()=>HH,getXfaPageViewport:()=>VH,isDataScheme:()=>O_,isPdfFile:()=>j_,noContextMenu:()=>hi,normalizeUnicode:()=>FH,renderTextLayer:()=>F6,setLayerDimensions:()=>yc,shadow:()=>ee,updateTextLayer:()=>z6,version:()=>t8});const In=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),MM=[1,0,0,1,0,0],Rx=[.001,0,0,.001,0,0],EH=1e7,ex=1.35,Ji={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},so={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},SH="pdfjs_internal_editor_",Jt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},CH={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},On={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},yy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Je={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Yd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Yv={ERRORS:0,WARNINGS:1,INFOS:5},Mx={NONE:0,BINARY:1},fs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},TH={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Kv=Yv.WARNINGS;function kH(s){Number.isInteger(s)&&(Kv=s)}function RH(){return Kv}function Wv(s){Kv>=Yv.INFOS&&console.log(`Info: ${s}`)}function It(s){Kv>=Yv.WARNINGS&&console.log(`Warning: ${s}`)}function ve(s){throw new Error(s)}function an(s,t){s||ve(t)}function MH(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function NH(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const a=s.match(/\./g);(a==null?void 0:a.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=PH(s)}catch{}}const n=t?new URL(s,t):new URL(s);if(MH(n))return n}catch{}return null}function ee(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Bo=(function(){function t(e,n){this.constructor===t&&ve("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class Nx extends Bo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Dx extends Bo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class NM extends Bo{constructor(t){super(t,"InvalidPDFException")}}class kc extends Bo{constructor(t){super(t,"MissingPDFException")}}class Qv extends Bo{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class DH extends Bo{constructor(t){super(t,"FormatError")}}class Rc extends Bo{constructor(t){super(t,"AbortException")}}function DM(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&ve("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),c=s.subarray(a,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function Zv(s){typeof s!="string"&&ve("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function LH(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function M_(s){const t=Object.create(null);for(const[e,n]of s)t[e]=n;return t}function OH(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function jH(){try{return new Function(""),!0}catch{return!1}}class ci{static get isLittleEndian(){return ee(this,"isLittleEndian",OH())}static get isEvalSupported(){return ee(this,"isEvalSupported",jH())}static get isOffscreenCanvasSupported(){return ee(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ee(this,"platform",{isMac:navigator.platform.includes("Mac")}):ee(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return ee(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const nx=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var ya,vy,Lx;class _t{static makeHexColor(t,e,n){return`#${nx[t]}${nx[e]}${nx[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],a=t[0]*e[1]+t[1]*e[3]+e[5];return[n,a]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],a=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,o=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[a,o]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),a=this.applyTransform(t.slice(2,4),e),o=this.applyTransform([t[0],t[3]],e),c=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],a[0],o[0],c[0]),Math.min(n[1],a[1],o[1],c[1]),Math.max(n[0],a[0],o[0],c[0]),Math.max(n[1],a[1],o[1],c[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],a=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],c=t[2]*e[1]+t[3]*e[3],u=(n+c)/2,d=Math.sqrt((n+c)**2-4*(n*c-o*a))/2,f=u+d||1,g=u-d||1;return[Math.sqrt(f),Math.sqrt(g)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[n,o,a,c]}static bezierBoundingBox(t,e,n,a,o,c,u,d,f){return f?(f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d)):f=[Math.min(t,u),Math.min(e,d),Math.max(t,u),Math.max(e,d)],M(this,ya,Lx).call(this,t,n,o,u,e,a,c,d,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),M(this,ya,Lx).call(this,t,n,o,u,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f),f}}ya=new WeakSet,vy=function(t,e,n,a,o,c,u,d,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,w=b*f,A=y*(y*(y*t+3*f*e)+3*b*n)+w*a,E=y*(y*(y*o+3*f*c)+3*b*u)+w*d;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],E),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],E)},Lx=function(t,e,n,a,o,c,u,d,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&M(this,ya,vy).call(this,t,e,n,a,o,c,u,d,-y/g,b);return}const w=g**2-4*y*f;if(w<0)return;const A=Math.sqrt(w),E=2*f;M(this,ya,vy).call(this,t,e,n,a,o,c,u,d,(-g+A)/E,b),M(this,ya,vy).call(this,t,e,n,a,o,c,u,d,(-g-A)/E,b)},N(_t,ya);function PH(s){return decodeURIComponent(escape(s))}let ix=null,pk=null;function FH(s){return ix||(ix=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,pk=new Map([["","t"]])),s.replaceAll(ix,(t,e,n)=>e?e.normalize("NFKC"):pk.get(n))}function zH(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const s=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(s);else for(let t=0;t<32;t++)s[t]=Math.floor(Math.random()*255);return DM(s)}const LM="pdfjs_internal_id_",Pr={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Jv{constructor(){this.constructor===Jv&&ve("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,o){return"none"}destroy(t=!1){}}var Lf;const U_=class U_{constructor({enableHWA:t=!1}={}){N(this,Lf,!1);this.constructor===U_&&ve("Cannot initialize BaseCanvasFactory."),k(this,Lf,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!p(this,Lf)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ve("Abstract method `_createCanvas` called.")}};Lf=new WeakMap;let rv=U_;class tb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===tb&&ve("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?Mx.BINARY:Mx.NONE;return this._fetchData(e,n).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){ve("Abstract method `_fetchData` called.")}}class eb{constructor({baseUrl:t=null}){this.constructor===eb&&ve("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){ve("Abstract method `_fetchData` called.")}}class N_{constructor(){this.constructor===N_&&ve("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ve("Abstract method `_createSVG` called.")}}const zr="http://www.w3.org/2000/svg",fl=class fl{};Nt(fl,"CSS",96),Nt(fl,"PDF",72),Nt(fl,"PDF_TO_CSS_UNITS",fl.CSS/fl.PDF);let jo=fl;var ml,Us,Vr,ai,fv,yl,bt,jn,xu,Au,by,OM,Ox,_u,Jd,tf,jx,ef;class IH extends Jv{constructor({docId:e,ownerDocument:n=globalThis.document}={}){super();N(this,bt);N(this,ml);N(this,Us);N(this,Vr);N(this,ai);N(this,fv);N(this,yl,0);k(this,Vr,e),k(this,ai,n)}addFilter(e){if(!e)return"none";let n=p(this,bt,jn).get(e);if(n)return n;const[a,o,c]=M(this,bt,by).call(this,e),u=e.length===1?a:`${a}${o}${c}`;if(n=p(this,bt,jn).get(u),n)return p(this,bt,jn).set(e,n),n;const d=`g_${p(this,Vr)}_transfer_map_${wi(this,yl)._++}`,f=`url(#${d})`;p(this,bt,jn).set(e,f),p(this,bt,jn).set(u,f);const g=M(this,bt,_u).call(this,d);return M(this,bt,tf).call(this,a,o,c,g),f}addHCMFilter(e,n){var A;const a=`${e}-${n}`,o="base";let c=p(this,bt,xu).get(o);if((c==null?void 0:c.key)===a||(c?((A=c.filter)==null||A.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},p(this,bt,xu).set(o,c)),!e||!n))return c.url;const u=M(this,bt,ef).call(this,e);e=_t.makeHexColor(...u);const d=M(this,bt,ef).call(this,n);if(n=_t.makeHexColor(...d),p(this,bt,Au).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const f=new Array(256);for(let E=0;E<=255;E++){const T=E/255;f[E]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const g=f.join(","),y=`g_${p(this,Vr)}_hcm_filter`,b=c.filter=M(this,bt,_u).call(this,y);M(this,bt,tf).call(this,g,g,g,b),M(this,bt,Ox).call(this,b);const w=(E,T)=>{const C=u[E]/255,D=d[E]/255,L=new Array(T+1);for(let z=0;z<=T;z++)L[z]=C+z/T*(D-C);return L.join(",")};return M(this,bt,tf).call(this,w(0,5),w(1,5),w(2,5),b),c.url=`url(#${y})`,c.url}addAlphaFilter(e){let n=p(this,bt,jn).get(e);if(n)return n;const[a]=M(this,bt,by).call(this,[e]),o=`alpha_${a}`;if(n=p(this,bt,jn).get(o),n)return p(this,bt,jn).set(e,n),n;const c=`g_${p(this,Vr)}_alpha_map_${wi(this,yl)._++}`,u=`url(#${c})`;p(this,bt,jn).set(e,u),p(this,bt,jn).set(o,u);const d=M(this,bt,_u).call(this,c);return M(this,bt,jx).call(this,a,d),u}addLuminosityFilter(e){let n=p(this,bt,jn).get(e||"luminosity");if(n)return n;let a,o;if(e?([a]=M(this,bt,by).call(this,[e]),o=`luminosity_${a}`):o="luminosity",n=p(this,bt,jn).get(o),n)return p(this,bt,jn).set(e,n),n;const c=`g_${p(this,Vr)}_luminosity_map_${wi(this,yl)._++}`,u=`url(#${c})`;p(this,bt,jn).set(e,u),p(this,bt,jn).set(o,u);const d=M(this,bt,_u).call(this,c);return M(this,bt,OM).call(this,d),e&&M(this,bt,jx).call(this,a,d),u}addHighlightHCMFilter(e,n,a,o,c){var D;const u=`${n}-${a}-${o}-${c}`;let d=p(this,bt,xu).get(e);if((d==null?void 0:d.key)===u||(d?((D=d.filter)==null||D.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},p(this,bt,xu).set(e,d)),!n||!a))return d.url;const[f,g]=[n,a].map(M(this,bt,ef).bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),b=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[w,A]=[o,c].map(M(this,bt,ef).bind(this));b<y&&([y,b,w,A]=[b,y,A,w]),p(this,bt,Au).style.color="";const E=(L,z,B)=>{const U=new Array(256),O=(b-y)/B,H=L/255,W=(z-L)/(255*B);let Q=0;for(let nt=0;nt<=B;nt++){const ot=Math.round(y+nt*O),ht=H+nt*W;for(let lt=Q;lt<=ot;lt++)U[lt]=ht;Q=ot+1}for(let nt=Q;nt<256;nt++)U[nt]=U[Q-1];return U.join(",")},T=`g_${p(this,Vr)}_hcm_${e}_filter`,C=d.filter=M(this,bt,_u).call(this,T);return M(this,bt,Ox).call(this,C),M(this,bt,tf).call(this,E(w[0],A[0],5),E(w[1],A[1],5),E(w[2],A[2],5),C),d.url=`url(#${T})`,d.url}destroy(e=!1){e&&p(this,bt,xu).size!==0||(p(this,Us)&&(p(this,Us).parentNode.parentNode.remove(),k(this,Us,null)),p(this,ml)&&(p(this,ml).clear(),k(this,ml,null)),k(this,yl,0))}}ml=new WeakMap,Us=new WeakMap,Vr=new WeakMap,ai=new WeakMap,fv=new WeakMap,yl=new WeakMap,bt=new WeakSet,jn=function(){return p(this,ml)||k(this,ml,new Map)},xu=function(){return p(this,fv)||k(this,fv,new Map)},Au=function(){if(!p(this,Us)){const e=p(this,ai).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=p(this,ai).createElementNS(zr,"svg");a.setAttribute("width",0),a.setAttribute("height",0),k(this,Us,p(this,ai).createElementNS(zr,"defs")),e.append(a),a.append(p(this,Us)),p(this,ai).body.append(e)}return p(this,Us)},by=function(e){if(e.length===1){const f=e[0],g=new Array(256);for(let b=0;b<256;b++)g[b]=f[b]/255;const y=g.join(",");return[y,y,y]}const[n,a,o]=e,c=new Array(256),u=new Array(256),d=new Array(256);for(let f=0;f<256;f++)c[f]=n[f]/255,u[f]=a[f]/255,d[f]=o[f]/255;return[c.join(","),u.join(","),d.join(",")]},OM=function(e){const n=p(this,ai).createElementNS(zr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Ox=function(e){const n=p(this,ai).createElementNS(zr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},_u=function(e){const n=p(this,ai).createElementNS(zr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),p(this,bt,Au).append(n),n},Jd=function(e,n,a){const o=p(this,ai).createElementNS(zr,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",a),e.append(o)},tf=function(e,n,a,o){const c=p(this,ai).createElementNS(zr,"feComponentTransfer");o.append(c),M(this,bt,Jd).call(this,c,"feFuncR",e),M(this,bt,Jd).call(this,c,"feFuncG",n),M(this,bt,Jd).call(this,c,"feFuncB",a)},jx=function(e,n){const a=p(this,ai).createElementNS(zr,"feComponentTransfer");n.append(a),M(this,bt,Jd).call(this,a,"feFuncA",e)},ef=function(e){return p(this,bt,Au).style.color=e,P_(getComputedStyle(p(this,bt,Au)).getPropertyValue("color"))};class BH extends rv{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}async function nb(s,t="text"){if(nf(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",s,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class jM extends tb{_fetchData(t,e){return nb(t,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):Zv(n),compressionType:e}))}}class PM extends eb{_fetchData(t){return nb(t,"arraybuffer").then(e=>new Uint8Array(e))}}class D_ extends N_{_createSVG(t){return document.createElementNS(zr,t)}}class bg{constructor({viewBox:t,scale:e,rotation:n,offsetX:a=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=a,this.offsetY=o;const u=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let f,g,y,b;switch(n%=360,n<0&&(n+=360),n){case 180:f=-1,g=0,y=0,b=1;break;case 90:f=0,g=1,y=1,b=0;break;case 270:f=0,g=-1,y=-1,b=0;break;case 0:f=1,g=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,b=-b);let w,A,E,T;f===0?(w=Math.abs(d-t[1])*e+a,A=Math.abs(u-t[0])*e+o,E=(t[3]-t[1])*e,T=(t[2]-t[0])*e):(w=Math.abs(u-t[0])*e+a,A=Math.abs(d-t[1])*e+o,E=(t[2]-t[0])*e,T=(t[3]-t[1])*e),this.transform=[f*e,g*e,y*e,b*e,w-f*e*u-y*e*d,A-g*e*u-b*e*d],this.width=E,this.height=T}get rawDims(){const{viewBox:t}=this;return ee(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new bg({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){return _t.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=_t.applyTransform([t[0],t[1]],this.transform),n=_t.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return _t.applyInverseTransform([t,e],this.transform)}}class L_ extends Bo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function O_(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function j_(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function UH(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function HH(s,t="document.pdf"){if(typeof s!="string")return t;if(O_(s))return It('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=e.exec(s);let o=n.exec(a[1])||n.exec(a[2])||n.exec(a[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||t}class gk{constructor(){Nt(this,"started",Object.create(null));Nt(this,"times",[])}time(t){t in this.started&&It(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||It(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-a}ms
`);return t.join("")}}function nf(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function hi(s){s.preventDefault()}function FM(s){console.log("Deprecated API usage: "+s)}let mk;class zM{static toDateObject(t){if(!t||typeof t!="string")return null;mk||(mk=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=mk.exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,u+=y):f==="+"&&(c-=g,u-=y),new Date(Date.UTC(n,a,o,c,u,d))}}function VH(s,{scale:t=1,rotation:e=0}){const{width:n,height:a}=s.attributes.style,o=[0,0,parseInt(n),parseInt(a)];return new bg({viewBox:o,scale:t,rotation:e})}function P_(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(It(`Not a valid color format: "${s}"`),[0,0,0])}function qH(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,P_(n))}t.remove()}function je(s){const{a:t,b:e,c:n,d:a,e:o,f:c}=s.getTransform();return[t,e,n,a,o,c]}function Fr(s){const{a:t,b:e,c:n,d:a,e:o,f:c}=s.getTransform().invertSelf();return[t,e,n,a,o,c]}function yc(s,t,e=!1,n=!0){if(t instanceof bg){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:c}=s,u=ci.isCSSRoundSupported,d=`var(--scale-factor) * ${a}px`,f=`var(--scale-factor) * ${o}px`,g=u?`round(${d}, 1px)`:`calc(${d})`,y=u?`round(${f}, 1px)`:`calc(${f})`;!e||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}n&&s.setAttribute("data-main-rotation",t.rotation)}var vl,bl,Si,wl,pv,IM,Wn,BM,UM,wy,HM,Fx;const gv=class gv{constructor(t){N(this,Wn);N(this,vl,null);N(this,bl,null);N(this,Si);N(this,wl,null);k(this,Si,t)}render(){const t=k(this,vl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=p(this,Si)._uiManager._signal;t.addEventListener("contextmenu",hi,{signal:e}),t.addEventListener("pointerdown",M(gv,pv,IM),{signal:e});const n=k(this,wl,document.createElement("div"));n.className="buttons",t.append(n);const a=p(this,Si).toolbarPosition;if(a){const{style:o}=t,c=p(this,Si)._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return M(this,Wn,HM).call(this),t}hide(){var t;p(this,vl).classList.add("hidden"),(t=p(this,bl))==null||t.hideDropdown()}show(){p(this,vl).classList.remove("hidden")}addAltTextButton(t){M(this,Wn,wy).call(this,t),p(this,wl).prepend(t,p(this,Wn,Fx))}addColorPicker(t){k(this,bl,t);const e=t.renderButton();M(this,Wn,wy).call(this,e),p(this,wl).prepend(e,p(this,Wn,Fx))}remove(){var t;p(this,vl).remove(),(t=p(this,bl))==null||t.destroy(),k(this,bl,null)}};vl=new WeakMap,bl=new WeakMap,Si=new WeakMap,wl=new WeakMap,pv=new WeakSet,IM=function(t){t.stopPropagation()},Wn=new WeakSet,BM=function(t){p(this,Si)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},UM=function(t){p(this,Si)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},wy=function(t){const e=p(this,Si)._uiManager._signal;t.addEventListener("focusin",M(this,Wn,BM).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",M(this,Wn,UM).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",hi,{signal:e})},HM=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${p(this,Si).editorType}-button`),M(this,Wn,wy).call(this,t),t.addEventListener("click",e=>{p(this,Si)._uiManager.delete()},{signal:p(this,Si)._uiManager._signal}),p(this,wl).append(t)},Fx=function(){const t=document.createElement("div");return t.className="divider",t},N(gv,pv);let Px=gv;var Of,xl,Al,Po,VM,qM,GM;class GH{constructor(t){N(this,Po);N(this,Of,null);N(this,xl,null);N(this,Al);k(this,Al,t)}show(t,e,n){const[a,o]=M(this,Po,qM).call(this,e,n),{style:c}=p(this,xl)||k(this,xl,M(this,Po,VM).call(this));t.append(p(this,xl)),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){p(this,xl).remove()}}Of=new WeakMap,xl=new WeakMap,Al=new WeakMap,Po=new WeakSet,VM=function(){const t=k(this,xl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",hi,{signal:p(this,Al)._signal});const e=k(this,Of,document.createElement("div"));return e.className="buttons",t.append(e),M(this,Po,GM).call(this),t},qM=function(t,e){let n=0,a=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const u=o.x+(e?o.width:0);if(c>n){a=u,n=c;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,n]},GM=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=p(this,Al)._signal;t.addEventListener("contextmenu",hi,{signal:n}),t.addEventListener("click",()=>{p(this,Al).highlightSelection("floating_button")},{signal:n}),p(this,Of).append(t)};function av(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}function XH(s){return Math.round(Math.min(255,Math.max(1,255*s))).toString(16).padStart(2,"0")}var mv;class $H{constructor(){N(this,mv,0)}get id(){return`${SH}${wi(this,mv)._++}`}}mv=new WeakMap;var jf,yv,Ki,Pf,Ix;const H_=class H_{constructor(){N(this,Pf);N(this,jf,zH());N(this,yv,0);N(this,Ki,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ee(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:o}=t;return M(this,Pf,Ix).call(this,`${e}_${n}_${a}_${o}`,t)}async getFromUrl(t){return M(this,Pf,Ix).call(this,t,t)}async getFromId(t){p(this,Ki)||k(this,Ki,new Map);const e=p(this,Ki).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=p(this,Ki).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){p(this,Ki)||k(this,Ki,new Map);const e=p(this,Ki).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${p(this,jf)}_`)}};jf=new WeakMap,yv=new WeakMap,Ki=new WeakMap,Pf=new WeakSet,Ix=async function(t,e){p(this,Ki)||k(this,Ki,new Map);let n=p(this,Ki).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${p(this,jf)}_${wi(this,yv)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await nb(e,"blob")):a=n.file=e,a.type==="image/svg+xml"){const o=H_._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},c.onload=async()=>{const y=n.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=g});c.readAsDataURL(a),await d}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){console.error(a),n=null}return p(this,Ki).set(t,n),n&&p(this,Ki).set(n.id,n),n};let zx=H_;var fn,ro,Ff,pn;class YH{constructor(t=128){N(this,fn,[]);N(this,ro,!1);N(this,Ff);N(this,pn,-1);k(this,Ff,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&t(),p(this,ro))return;const d={cmd:t,undo:e,post:n,type:o};if(p(this,pn)===-1){p(this,fn).length>0&&(p(this,fn).length=0),k(this,pn,0),p(this,fn).push(d);return}if(c&&p(this,fn)[p(this,pn)].type===o){u&&(d.undo=p(this,fn)[p(this,pn)].undo),p(this,fn)[p(this,pn)]=d;return}const f=p(this,pn)+1;f===p(this,Ff)?p(this,fn).splice(0,1):(k(this,pn,f),f<p(this,fn).length&&p(this,fn).splice(f)),p(this,fn).push(d)}undo(){if(p(this,pn)===-1)return;k(this,ro,!0);const{undo:t,post:e}=p(this,fn)[p(this,pn)];t(),e==null||e(),k(this,ro,!1),k(this,pn,p(this,pn)-1)}redo(){if(p(this,pn)<p(this,fn).length-1){k(this,pn,p(this,pn)+1),k(this,ro,!0);const{cmd:t,post:e}=p(this,fn)[p(this,pn)];t(),e==null||e(),k(this,ro,!1)}}hasSomethingToUndo(){return p(this,pn)!==-1}hasSomethingToRedo(){return p(this,pn)<p(this,fn).length-1}destroy(){k(this,fn,null)}}fn=new WeakMap,ro=new WeakMap,Ff=new WeakMap,pn=new WeakMap;var vv,XM;class wg{constructor(t){N(this,vv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ci.platform;for(const[n,a,o={}]of t)for(const c of n){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(M(this,vv,XM).call(this,e));if(!n)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:u=null}}=n;u&&!u(t,e)||(a.bind(t,...c,e)(),o||(e.stopPropagation(),e.preventDefault()))}}vv=new WeakSet,XM=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const bv=class bv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return qH(t),ee(this,"_colors",t)}convert(t){const e=P_(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((o,c)=>o===e[c]))return bv._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?_t.makeHexColor(...e):t}};Nt(bv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Bx=bv;var zu,Ci,tn,En,Iu,qr,Bu,ps,Uu,_l,Hs,gs,El,zf,If,Vs,Hu,ao,qs,wv,oo,Bf,Sl,Uf,Vu,Sn,de,Gr,Cl,Hf,Vf,qf,Gf,Xf,$f,Yf,Kf,Wf,Qf,Zf,Jf,tp,lo,Gs,Xr,ep,dt,xy,$M,YM,Ay,KM,WM,QM,Ux,ZM,Hx,Vx,JM,Xn,to,tN,eN,qx,nN,sf,Gx;const ku=class ku{constructor(t,e,n,a,o,c,u,d,f){N(this,dt);N(this,zu,new AbortController);N(this,Ci,null);N(this,tn,new Map);N(this,En,new Map);N(this,Iu,null);N(this,qr,null);N(this,Bu,null);N(this,ps,new YH);N(this,Uu,0);N(this,_l,new Set);N(this,Hs,null);N(this,gs,null);N(this,El,new Set);N(this,zf,!1);N(this,If,null);N(this,Vs,null);N(this,Hu,null);N(this,ao,!1);N(this,qs,null);N(this,wv,new $H);N(this,oo,!1);N(this,Bf,!1);N(this,Sl,null);N(this,Uf,null);N(this,Vu,null);N(this,Sn,Jt.NONE);N(this,de,new Set);N(this,Gr,null);N(this,Cl,null);N(this,Hf,null);N(this,Vf,this.blur.bind(this));N(this,qf,this.focus.bind(this));N(this,Gf,this.copy.bind(this));N(this,Xf,this.cut.bind(this));N(this,$f,this.paste.bind(this));N(this,Yf,this.keydown.bind(this));N(this,Kf,this.keyup.bind(this));N(this,Wf,this.onEditingAction.bind(this));N(this,Qf,this.onPageChanging.bind(this));N(this,Zf,this.onScaleChanging.bind(this));N(this,Jf,this.onRotationChanging.bind(this));N(this,tp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});N(this,lo,[0,0]);N(this,Gs,null);N(this,Xr,null);N(this,ep,null);this._signal=p(this,zu).signal,k(this,Xr,t),k(this,ep,e),k(this,Iu,n),this._eventBus=a,this._eventBus._on("editingaction",p(this,Wf)),this._eventBus._on("pagechanging",p(this,Qf)),this._eventBus._on("scalechanging",p(this,Zf)),this._eventBus._on("rotationchanging",p(this,Jf)),M(this,dt,KM).call(this),M(this,dt,JM).call(this),M(this,dt,Ux).call(this),k(this,qr,o.annotationStorage),k(this,If,o.filterFactory),k(this,Cl,c),k(this,Hu,u||null),k(this,zf,d),k(this,Vu,f||null),this.viewParameters={realScale:jo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=ku.prototype,e=c=>p(c,Xr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return ee(this,"_keyboardManager",new wg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&p(c,Xr).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&p(c,Xr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n;(t=p(this,zu))==null||t.abort(),k(this,zu,null),this._signal=null,this._eventBus._off("editingaction",p(this,Wf)),this._eventBus._off("pagechanging",p(this,Qf)),this._eventBus._off("scalechanging",p(this,Zf)),this._eventBus._off("rotationchanging",p(this,Jf));for(const a of p(this,En).values())a.destroy();p(this,En).clear(),p(this,tn).clear(),p(this,El).clear(),k(this,Ci,null),p(this,de).clear(),p(this,ps).destroy(),(e=p(this,Iu))==null||e.destroy(),(n=p(this,qs))==null||n.hide(),k(this,qs,null),p(this,Vs)&&(clearTimeout(p(this,Vs)),k(this,Vs,null)),p(this,Gs)&&(clearTimeout(p(this,Gs)),k(this,Gs,null))}async mlGuess(t){var e;return((e=p(this,Vu))==null?void 0:e.guess(t))||null}get hasMLManager(){return!!p(this,Vu)}get hcmFilter(){return ee(this,"hcmFilter",p(this,Cl)?p(this,If).addHCMFilter(p(this,Cl).foreground,p(this,Cl).background):"none")}get direction(){return ee(this,"direction",getComputedStyle(p(this,Xr)).direction)}get highlightColors(){return ee(this,"highlightColors",p(this,Hu)?new Map(p(this,Hu).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return ee(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){k(this,Uf,t)}editAltText(t){var e;(e=p(this,Iu))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){k(this,Uu,t-1)}focusMainContainer(){p(this,Xr).focus()}findParent(t,e){for(const n of p(this,En).values()){const{x:a,y:o,width:c,height:u}=n.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){p(this,ep).classList.toggle("noUserSelect",t)}addShouldRescale(t){p(this,El).add(t)}removeShouldRescale(t){p(this,El).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*jo.PDF_TO_CSS_UNITS;for(const e of p(this,El))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c}=e,u=e.toString(),f=M(this,dt,xy).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(f);if(g){e.empty(),p(this,Sn)===Jt.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Jt.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const y of p(this,En).values())if(y.hasTextLayer(f)){y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c,text:u});break}}}addToAnnotationStorage(t){!t.isEmpty()&&p(this,qr)&&!p(this,qr).has(t.id)&&p(this,qr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,p(this,ao)&&(k(this,ao,!1),M(this,dt,Ay).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of p(this,de))if(e.div.contains(t)){k(this,Sl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!p(this,Sl))return;const[t,e]=p(this,Sl);k(this,Sl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){M(this,dt,Ux).call(this),M(this,dt,Hx).call(this)}removeEditListeners(){M(this,dt,ZM).call(this),M(this,dt,Vx).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of p(this,gs))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of p(this,gs))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=p(this,Ci))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of p(this,de)){const o=a.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of p(this,gs))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){It(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of n){const f=a.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)M(this,dt,qx).call(this,d);M(this,dt,Gx).call(this,o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){It(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),p(this,Sn)!==Jt.NONE&&!this.isEditorHandlingKeyboard&&ku._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,p(this,ao)&&(k(this,ao,!1),M(this,dt,Ay).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(M(this,dt,WM).call(this),M(this,dt,Hx).call(this),M(this,dt,Xn).call(this,{isEditing:p(this,Sn)!==Jt.NONE,isEmpty:M(this,dt,sf).call(this),hasSomethingToUndo:p(this,ps).hasSomethingToUndo(),hasSomethingToRedo:p(this,ps).hasSomethingToRedo(),hasSelectedEditor:!1})):(M(this,dt,QM).call(this),M(this,dt,Vx).call(this),M(this,dt,Xn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!p(this,gs)){k(this,gs,t);for(const e of p(this,gs))M(this,dt,to).call(this,e.defaultPropertiesToUpdate)}}getId(){return p(this,wv).id}get currentLayer(){return p(this,En).get(p(this,Uu))}getLayer(t){return p(this,En).get(t)}get currentPageIndex(){return p(this,Uu)}addLayer(t){p(this,En).set(t.pageIndex,t),p(this,oo)?t.enable():t.disable()}removeLayer(t){p(this,En).delete(t.pageIndex)}updateMode(t,e=null,n=!1){if(p(this,Sn)!==t){if(k(this,Sn,t),t===Jt.NONE){this.setEditingState(!1),M(this,dt,eN).call(this);return}this.setEditingState(!0),M(this,dt,tN).call(this),this.unselectAll();for(const a of p(this,En).values())a.updateMode(t);if(!e&&n){this.addNewEditorFromKeyboard();return}if(e){for(const a of p(this,tn).values())if(a.annotationElementId===e){this.setSelected(a),a.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==p(this,Sn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(p(this,gs)){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor();return;case Mt.HIGHLIGHT_DEFAULT_COLOR:(n=p(this,Uf))==null||n.updateColor(e);break;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(p(this,Hf)||k(this,Hf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const a of p(this,de))a.updateParams(t,e);for(const a of p(this,gs))a.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const c of p(this,tn).values())c.editorType===t&&c.show(e);(((o=p(this,Hf))==null?void 0:o.get(Mt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&M(this,dt,to).call(this,[[Mt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(p(this,Bf)!==t){k(this,Bf,t);for(const e of p(this,En).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of p(this,tn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return p(this,tn).get(t)}addEditor(t){p(this,tn).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(p(this,Vs)&&clearTimeout(p(this,Vs)),k(this,Vs,setTimeout(()=>{this.focusMainContainer(),k(this,Vs,null)},0))),p(this,tn).delete(t.id),this.unselect(t),(!t.annotationElementId||!p(this,_l).has(t.annotationElementId))&&((e=p(this,qr))==null||e.remove(t.id))}addDeletedAnnotationElement(t){p(this,_l).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return p(this,_l).has(t)}removeDeletedAnnotationElement(t){p(this,_l).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){p(this,Ci)!==t&&(k(this,Ci,t),t&&M(this,dt,to).call(this,t.propertiesToUpdate))}updateUI(t){p(this,dt,nN)===t&&M(this,dt,to).call(this,t.propertiesToUpdate)}toggleSelected(t){if(p(this,de).has(t)){p(this,de).delete(t),t.unselect(),M(this,dt,Xn).call(this,{hasSelectedEditor:this.hasSelection});return}p(this,de).add(t),t.select(),M(this,dt,to).call(this,t.propertiesToUpdate),M(this,dt,Xn).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of p(this,de))e!==t&&e.unselect();p(this,de).clear(),p(this,de).add(t),t.select(),M(this,dt,to).call(this,t.propertiesToUpdate),M(this,dt,Xn).call(this,{hasSelectedEditor:!0})}isSelected(t){return p(this,de).has(t)}get firstSelectedEditor(){return p(this,de).values().next().value}unselect(t){t.unselect(),p(this,de).delete(t),M(this,dt,Xn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return p(this,de).size!==0}get isEnterHandled(){return p(this,de).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){p(this,ps).undo(),M(this,dt,Xn).call(this,{hasSomethingToUndo:p(this,ps).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:M(this,dt,sf).call(this)})}redo(){p(this,ps).redo(),M(this,dt,Xn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:p(this,ps).hasSomethingToRedo(),isEmpty:M(this,dt,sf).call(this)})}addCommands(t){p(this,ps).add(t),M(this,dt,Xn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:M(this,dt,sf).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...p(this,de)],e=()=>{for(const a of t)a.remove()},n=()=>{for(const a of t)M(this,dt,qx).call(this,a)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=p(this,Ci))==null||t.commitOrRemove()}hasSomethingToControl(){return p(this,Ci)||this.hasSelection}selectAll(){for(const t of p(this,de))t.commit();M(this,dt,Gx).call(this,p(this,tn).values())}unselectAll(){if(!(p(this,Ci)&&(p(this,Ci).commitOrRemove(),p(this,Sn)!==Jt.NONE))&&this.hasSelection){for(const t of p(this,de))t.unselect();p(this,de).clear(),M(this,dt,Xn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;p(this,lo)[0]+=t,p(this,lo)[1]+=e;const[a,o]=p(this,lo),c=[...p(this,de)],u=1e3;p(this,Gs)&&clearTimeout(p(this,Gs)),k(this,Gs,setTimeout(()=>{k(this,Gs,null),p(this,lo)[0]=p(this,lo)[1]=0,this.addCommands({cmd:()=>{for(const d of c)p(this,tn).has(d.id)&&d.translateInPage(a,o)},undo:()=>{for(const d of c)p(this,tn).has(d.id)&&d.translateInPage(-a,-o)},mustExec:!1})},u));for(const d of c)d.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(this,Hs,new Map);for(const t of p(this,de))p(this,Hs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!p(this,Hs))return!1;this.disableUserSelect(!1);const t=p(this,Hs);k(this,Hs,null);let e=!1;for(const[{x:a,y:o,pageIndex:c},u]of t)u.newX=a,u.newY=o,u.newPageIndex=c,e||(e=a!==u.savedX||o!==u.savedY||c!==u.savedPageIndex);if(!e)return!1;const n=(a,o,c,u)=>{if(p(this,tn).has(a.id)){const d=p(this,En).get(u);d?a._setParentAndPosition(d,o,c):(a.pageIndex=u,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:u}]of t)n(a,o,c,u)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:u}]of t)n(a,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(p(this,Hs))for(const n of p(this,Hs).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||p(this,de).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return p(this,Ci)===t}getActive(){return p(this,Ci)}getMode(){return p(this,Sn)}get imageManager(){return ee(this,"imageManager",new zx)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:a,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,b)=>({x:(g-a)/c,y:1-(f+y-n)/o,width:b/c,height:y/o});break;case"180":u=(f,g,y,b)=>({x:1-(f+y-n)/o,y:1-(g+b-a)/c,width:y/o,height:b/c});break;case"270":u=(f,g,y,b)=>({x:1-(g+b-a)/c,y:(f-n)/o,width:b/c,height:y/o});break;default:u=(f,g,y,b)=>({x:(f-n)/o,y:(g-a)/c,width:y/o,height:b/c});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:w,width:A,height:E}of y.getClientRects())A===0||E===0||d.push(u(b,w,A,E))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(p(this,Bu)||k(this,Bu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=p(this,Bu))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=p(this,Bu))==null?void 0:a.get(t.data.id);if(!e)return;const n=p(this,qr).getRawValue(e);n&&(p(this,Sn)===Jt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};zu=new WeakMap,Ci=new WeakMap,tn=new WeakMap,En=new WeakMap,Iu=new WeakMap,qr=new WeakMap,Bu=new WeakMap,ps=new WeakMap,Uu=new WeakMap,_l=new WeakMap,Hs=new WeakMap,gs=new WeakMap,El=new WeakMap,zf=new WeakMap,If=new WeakMap,Vs=new WeakMap,Hu=new WeakMap,ao=new WeakMap,qs=new WeakMap,wv=new WeakMap,oo=new WeakMap,Bf=new WeakMap,Sl=new WeakMap,Uf=new WeakMap,Vu=new WeakMap,Sn=new WeakMap,de=new WeakMap,Gr=new WeakMap,Cl=new WeakMap,Hf=new WeakMap,Vf=new WeakMap,qf=new WeakMap,Gf=new WeakMap,Xf=new WeakMap,$f=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Wf=new WeakMap,Qf=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,tp=new WeakMap,lo=new WeakMap,Gs=new WeakMap,Xr=new WeakMap,ep=new WeakMap,dt=new WeakSet,xy=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},$M=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=M(this,dt,xy).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(p(this,qs)||k(this,qs,new GH(this)),p(this,qs).show(n,a,this.direction==="ltr"))},YM=function(){var o,c,u;const t=document.getSelection();if(!t||t.isCollapsed){p(this,Gr)&&((o=p(this,qs))==null||o.hide(),k(this,Gr,null),M(this,dt,Xn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===p(this,Gr))return;if(!M(this,dt,xy).call(this,t).closest(".textLayer")){p(this,Gr)&&((c=p(this,qs))==null||c.hide(),k(this,Gr,null),M(this,dt,Xn).call(this,{hasSelectedText:!1}));return}if((u=p(this,qs))==null||u.hide(),k(this,Gr,e),M(this,dt,Xn).call(this,{hasSelectedText:!0}),!(p(this,Sn)!==Jt.HIGHLIGHT&&p(this,Sn)!==Jt.NONE)&&(p(this,Sn)===Jt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(this,ao,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=this._signal,f=g=>{g.type==="pointerup"&&g.button!==0||(window.removeEventListener("pointerup",f),window.removeEventListener("blur",f),g.type==="pointerup"&&M(this,dt,Ay).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("blur",f,{signal:d})}},Ay=function(t=""){p(this,Sn)===Jt.HIGHLIGHT?this.highlightSelection(t):p(this,zf)&&M(this,dt,$M).call(this)},KM=function(){document.addEventListener("selectionchange",M(this,dt,YM).bind(this),{signal:this._signal})},WM=function(){const t=this._signal;window.addEventListener("focus",p(this,qf),{signal:t}),window.addEventListener("blur",p(this,Vf),{signal:t})},QM=function(){window.removeEventListener("focus",p(this,qf)),window.removeEventListener("blur",p(this,Vf))},Ux=function(){const t=this._signal;window.addEventListener("keydown",p(this,Yf),{signal:t}),window.addEventListener("keyup",p(this,Kf),{signal:t})},ZM=function(){window.removeEventListener("keydown",p(this,Yf)),window.removeEventListener("keyup",p(this,Kf))},Hx=function(){const t=this._signal;document.addEventListener("copy",p(this,Gf),{signal:t}),document.addEventListener("cut",p(this,Xf),{signal:t}),document.addEventListener("paste",p(this,$f),{signal:t})},Vx=function(){document.removeEventListener("copy",p(this,Gf)),document.removeEventListener("cut",p(this,Xf)),document.removeEventListener("paste",p(this,$f))},JM=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Xn=function(t){Object.entries(t).some(([n,a])=>p(this,tp)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(p(this,tp),t)}),p(this,Sn)===Jt.HIGHLIGHT&&t.hasSelectedEditor===!1&&M(this,dt,to).call(this,[[Mt.HIGHLIGHT_FREE,!0]]))},to=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},tN=function(){if(!p(this,oo)){k(this,oo,!0);for(const t of p(this,En).values())t.enable();for(const t of p(this,tn).values())t.enable()}},eN=function(){if(this.unselectAll(),p(this,oo)){k(this,oo,!1);for(const t of p(this,En).values())t.disable();for(const t of p(this,tn).values())t.disable()}},qx=function(t){const e=p(this,En).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},nN=function(){let t=null;for(t of p(this,de));return t},sf=function(){if(p(this,tn).size===0)return!0;if(p(this,tn).size===1)for(const t of p(this,tn).values())return t.isEmpty();return!1},Gx=function(t){for(const e of p(this,de))e.unselect();p(this,de).clear();for(const e of t)e.isEmpty()||(p(this,de).add(e),e.select());M(this,dt,Xn).call(this,{hasSelectedEditor:this.hasSelection})},Nt(ku,"TRANSLATE_SMALL",1),Nt(ku,"TRANSLATE_BIG",10);let vc=ku;var $r,Yr,ms,Kr,Ti,qu,ys,np,Xx;const Ir=class Ir{constructor(t){N(this,np);N(this,$r,"");N(this,Yr,!1);N(this,ms,null);N(this,Kr,null);N(this,Ti,null);N(this,qu,!1);N(this,ys,null);k(this,ys,t)}static initialize(t){Ir._l10nPromise||(Ir._l10nPromise=t)}async render(){const t=k(this,ms,document.createElement("button"));t.className="altText";const e=await Ir._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const n=p(this,ys)._uiManager._signal;t.addEventListener("contextmenu",hi,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),p(this,ys)._uiManager.editAltText(p(this,ys))};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(k(this,qu,!0),a(o))},{signal:n}),await M(this,np,Xx).call(this),t}finish(){p(this,ms)&&(p(this,ms).focus({focusVisible:p(this,qu)}),k(this,qu,!1))}isEmpty(){return!p(this,$r)&&!p(this,Yr)}get data(){return{altText:p(this,$r),decorative:p(this,Yr)}}set data({altText:t,decorative:e}){p(this,$r)===t&&p(this,Yr)===e||(k(this,$r,t),k(this,Yr,e),M(this,np,Xx).call(this))}toggle(t=!1){p(this,ms)&&(!t&&p(this,Ti)&&(clearTimeout(p(this,Ti)),k(this,Ti,null)),p(this,ms).disabled=!t)}destroy(){var t;(t=p(this,ms))==null||t.remove(),k(this,ms,null),k(this,Kr,null)}};$r=new WeakMap,Yr=new WeakMap,ms=new WeakMap,Kr=new WeakMap,Ti=new WeakMap,qu=new WeakMap,ys=new WeakMap,np=new WeakSet,Xx=async function(){var a;const t=p(this,ms);if(!t)return;if(!p(this,$r)&&!p(this,Yr)){t.classList.remove("done"),(a=p(this,Kr))==null||a.remove();return}t.classList.add("done"),Ir._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(o=>{t.setAttribute("aria-label",o)});let e=p(this,Kr);if(!e){k(this,Kr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const o=e.id=`alt-text-tooltip-${p(this,ys).id}`;t.setAttribute("aria-describedby",o);const c=100,u=p(this,ys)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(p(this,Ti)),k(this,Ti,null)},{once:!0}),t.addEventListener("mouseenter",()=>{k(this,Ti,setTimeout(()=>{k(this,Ti,null),p(this,Kr).classList.add("show"),p(this,ys)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:u}),t.addEventListener("mouseleave",()=>{var d;p(this,Ti)&&(clearTimeout(p(this,Ti)),k(this,Ti,null)),(d=p(this,Kr))==null||d.classList.remove("show")},{signal:u})}e.innerText=p(this,Yr)?await Ir._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):p(this,$r),e.parentNode||t.append(e);const n=p(this,ys).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},Nt(Ir,"_l10nPromise",null);let ov=Ir;var Tl,vs,Pn,Gu,kl,Cn,Rl,Xu,$u,Fn,ip,Ml,co,sp,Nl,Wr,Xs,Yu,Ku,Wi,rp,xv,Vt,$x,ap,Yx,Kx,iN,sN,Wx,Qx,Zx,rN,aN,oN,lN,Jx,rf;const xe=class xe{constructor(t){N(this,Vt);N(this,Tl,null);N(this,vs,null);N(this,Pn,null);N(this,Gu,!1);N(this,kl,!1);N(this,Cn,null);N(this,Rl,null);N(this,Xu,this.focusin.bind(this));N(this,$u,this.focusout.bind(this));N(this,Fn,null);N(this,ip,"");N(this,Ml,!1);N(this,co,null);N(this,sp,!1);N(this,Nl,!1);N(this,Wr,!1);N(this,Xs,null);N(this,Yu,0);N(this,Ku,0);N(this,Wi,null);Nt(this,"_initialOptions",Object.create(null));Nt(this,"_isVisible",!0);Nt(this,"_uiManager",null);Nt(this,"_focusEventsAllowed",!0);Nt(this,"_l10nPromise",null);N(this,rp,!1);N(this,xv,xe._zIndex++);this.constructor===xe&&ve("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=xe.prototype._resizeWithKeyboard,e=vc.TRANSLATE_SMALL,n=vc.TRANSLATE_BIG;return ee(this,"_resizerKeyboardManager",new wg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],xe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ee(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new KH({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,n){if(xe._l10nPromise||(xe._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(o=>[o,t.get(o.replaceAll(/([A-Z])/g,c=>`-${c.toLowerCase()}`))]))),n!=null&&n.strings)for(const o of n.strings)xe._l10nPromise.set(o,t.get(o));if(xe._borderLineWidth!==-1)return;const a=getComputedStyle(document.documentElement);xe._borderLineWidth=parseFloat(a.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ve("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return p(this,rp)}set _isDraggable(t){var e;k(this,rp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=p(this,xv)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):M(this,Vt,rf).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(p(this,Ml)?k(this,Ml,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[o,c]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/o,this.y=(e+a)/c,this.fixAndSetPosition()}translate(t,e){M(this,Vt,$x).call(this,this.parentDimensions,t,e)}translateInPage(t,e){p(this,co)||k(this,co,[this.x,this.y]),M(this,Vt,$x).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){p(this,co)||k(this,co,[this.x,this.y]);const[n,a]=this.parentDimensions;if(this.x+=t/n,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,d]=this.getBaseTranslation();o+=u,c+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!p(this,co)&&(p(this,co)[0]!==this.x||p(this,co)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=xe,a=n/t,o=n/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:a,y:o,width:c,height:u}=this;if(c*=e,u*=n,a*=e,o*=n,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(e-c,a)),o=Math.max(0,Math.min(n-u,o));break;case 90:a=Math.max(0,Math.min(e-u,a)),o=Math.min(n,Math.max(c,o));break;case 180:a=Math.min(e,Math.max(c,a)),o=Math.min(n,Math.max(u,o));break;case 270:a=Math.min(e,Math.max(u,a)),o=Math.max(0,Math.min(n-c,o));break}this.x=a/=e,this.y=o/=n;const[d,f]=this.getBaseTranslation();a+=d,o+=f;const{style:g}=this.div;g.left=`${(100*a).toFixed(2)}%`,g.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return M(n=xe,ap,Yx).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return M(n=xe,ap,Yx).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this,a=e*t,o=n*t;return ci.isCSSRoundSupported?[Math.round(a),Math.round(o)]:[a,o]}setDims(t,e){const[n,a]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,p(this,kl)||(this.div.style.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,a=n.endsWith("%"),o=!p(this,kl)&&e.endsWith("%");if(a&&o)return;const[c,u]=this.parentDimensions;a||(t.width=`${(100*parseFloat(n)/c).toFixed(2)}%`),!p(this,kl)&&!o&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=p(this,Pn))==null||t.finish()}async addEditToolbar(){return p(this,Fn)||p(this,Nl)?p(this,Fn):(k(this,Fn,new Px(this)),this.div.append(p(this,Fn).render()),p(this,Pn)&&p(this,Fn).addAltTextButton(await p(this,Pn).render()),p(this,Fn))}removeEditToolbar(){var t;p(this,Fn)&&(p(this,Fn).remove(),k(this,Fn,null),(t=p(this,Pn))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){p(this,Pn)||(ov.initialize(xe._l10nPromise),k(this,Pn,new ov(this)),p(this,Tl)&&(p(this,Pn).data=p(this,Tl),k(this,Tl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=p(this,Pn))==null?void 0:t.data}set altTextData(t){p(this,Pn)&&(p(this,Pn).data=t)}hasAltText(){var t;return!((t=p(this,Pn))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=p(this,Gu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",p(this,Xu),{signal:t}),this.div.addEventListener("focusout",p(this,$u),{signal:t});const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),av(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=ci.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(k(this,Ml,!0),this._isDraggable){M(this,Vt,rN).call(this,t);return}M(this,Vt,Zx).call(this,t)}moveInDOM(){p(this,Xs)&&clearTimeout(p(this,Xs)),k(this,Xs,setTimeout(()=>{var t;k(this,Xs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,g=e/a,y=this.x*o,b=this.y*c,w=this.width*o,A=this.height*c;switch(n){case 0:return[y+f+u,c-b-g-A+d,y+f+w+u,c-b-g+d];case 90:return[y+g+u,c-b+f+d,y+g+A+u,c-b+f+w+d];case 180:return[y-f-w+u,c-b+g+d,y-f+u,c-b+g+A+d];case 270:return[y-g-A+u,c-b-f-w+d,y-g+u,c-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,o,c]=t,u=o-n,d=c-a;switch(this.rotation){case 0:return[n,e-c,u,d];case 90:return[n,e-a,d,u];case 180:return[o,e-a,u,d];case 270:return[o,e-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){k(this,Nl,!0)}disableEditMode(){k(this,Nl,!1)}isInEditMode(){return p(this,Nl)}shouldGetKeyboardEvents(){return p(this,Wr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,n;const t=this._uiManager._signal;(e=this.div)==null||e.addEventListener("focusin",p(this,Xu),{signal:t}),(n=this.div)==null||n.addEventListener("focusout",p(this,$u),{signal:t})}rotate(t){}serialize(t=!1,e=null){ve("An editor must be serializable")}static deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});a.rotation=t.rotation,k(a,Tl,t.accessibilityData);const[o,c]=a.pageDimensions,[u,d,f,g]=a.getRectInCurrentCoords(t.rect,c);return a.x=u/o,a.y=d/c,a.width=f/o,a.height=g/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",p(this,Xu)),this.div.removeEventListener("focusout",p(this,$u)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),p(this,Xs)&&(clearTimeout(p(this,Xs)),k(this,Xs,null)),M(this,Vt,rf).call(this),this.removeEditToolbar(),p(this,Wi)){for(const t of p(this,Wi).values())clearTimeout(t);k(this,Wi,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(M(this,Vt,iN).call(this),p(this,Cn).classList.remove("hidden"),av(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),k(this,Rl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=p(this,Cn).children;if(!p(this,vs)){k(this,vs,Array.from(e));const c=M(this,Vt,aN).bind(this),u=M(this,Vt,oN).bind(this),d=this._uiManager._signal;for(const f of p(this,vs)){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",M(this,Vt,lN).bind(this,g),{signal:d}),xe._l10nPromise.get(`pdfjs-editor-resizer-label-${g}`).then(y=>f.setAttribute("aria-label",y))}}const n=p(this,vs)[0];let a=0;for(const c of e){if(c===n)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(p(this,vs).length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)p(this,Cn).append(p(this,Cn).firstChild);else if(o>a)for(let u=0;u<o-a;u++)p(this,Cn).firstChild.before(p(this,Cn).lastChild);let c=0;for(const u of e){const f=p(this,vs)[c++].getAttribute("data-resizer-name");xe._l10nPromise.get(`pdfjs-editor-resizer-label-${f}`).then(g=>u.setAttribute("aria-label",g))}}M(this,Vt,Jx).call(this,0),k(this,Wr,!0),p(this,Cn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){p(this,Wr)&&M(this,Vt,Qx).call(this,p(this,ip),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){M(this,Vt,rf).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!p(this,Fn)){this.addEditToolbar().then(()=>{var n,a;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((a=p(this,Fn))==null||a.show())});return}(e=p(this,Fn))==null||e.show()}unselect(){var t,e,n,a;(t=p(this,Cn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=p(this,Fn))==null||a.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return p(this,sp)}set isEditing(t){k(this,sp,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){k(this,kl,!0);const n=t/e,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){p(this,Wi)||k(this,Wi,new Map);const{action:n}=t;let a=p(this,Wi).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),p(this,Wi).delete(n),p(this,Wi).size===0&&k(this,Wi,null)},xe._telemetryTimeout),p(this,Wi).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),k(this,Gu,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(this,Gu,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Tl=new WeakMap,vs=new WeakMap,Pn=new WeakMap,Gu=new WeakMap,kl=new WeakMap,Cn=new WeakMap,Rl=new WeakMap,Xu=new WeakMap,$u=new WeakMap,Fn=new WeakMap,ip=new WeakMap,Ml=new WeakMap,co=new WeakMap,sp=new WeakMap,Nl=new WeakMap,Wr=new WeakMap,Xs=new WeakMap,Yu=new WeakMap,Ku=new WeakMap,Wi=new WeakMap,rp=new WeakMap,xv=new WeakMap,Vt=new WeakSet,$x=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this.fixAndSetPosition()},ap=new WeakSet,Yx=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Kx=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},iN=function(){if(p(this,Cn))return;k(this,Cn,document.createElement("div")),p(this,Cn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");p(this,Cn).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",M(this,Vt,sN).bind(this,n),{signal:e}),a.addEventListener("contextmenu",hi,{signal:e}),a.tabIndex=-1}this.div.prepend(p(this,Cn))},sN=function(t,e){var E;e.preventDefault();const{isMac:n}=ci.platform;if(e.button!==0||e.ctrlKey&&n)return;(E=p(this,Pn))==null||E.toggle(!1);const a=M(this,Vt,Qx).bind(this,t),o=this._isDraggable;this._isDraggable=!1;const c=this._uiManager._signal,u={passive:!0,capture:!0,signal:c};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",a,u),window.addEventListener("contextmenu",hi,{signal:c});const d=this.x,f=this.y,g=this.width,y=this.height,b=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const A=()=>{var T;this.parent.togglePointerEvents(!0),(T=p(this,Pn))==null||T.toggle(!0),this._isDraggable=o,window.removeEventListener("pointerup",A),window.removeEventListener("blur",A),window.removeEventListener("pointermove",a,u),window.removeEventListener("contextmenu",hi),this.parent.div.style.cursor=b,this.div.style.cursor=w,M(this,Vt,Wx).call(this,d,f,g,y)};window.addEventListener("pointerup",A,{signal:c}),window.addEventListener("blur",A,{signal:c})},Wx=function(t,e,n,a){const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===e&&u===n&&d===a||this.addCommands({cmd:()=>{this.width=u,this.height=d,this.x=o,this.y=c;const[f,g]=this.parentDimensions;this.setDims(f*u,g*d),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=a,this.x=t,this.y=e;const[f,g]=this.parentDimensions;this.setDims(f*n,g*a),this.fixAndSetPosition()},mustExec:!0})},Qx=function(t,e){const[n,a]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,f=xe.MIN_SIZE/n,g=xe.MIN_SIZE/a,y=q=>Math.round(q*1e4)/1e4,b=M(this,Vt,Kx).call(this,this.rotation),w=(q,X)=>[b[0]*q+b[2]*X,b[1]*q+b[3]*X],A=M(this,Vt,Kx).call(this,360-this.rotation),E=(q,X)=>[A[0]*q+A[2]*X,A[1]*q+A[3]*X];let T,C,D=!1,L=!1;switch(t){case"topLeft":D=!0,T=(q,X)=>[0,0],C=(q,X)=>[q,X];break;case"topMiddle":T=(q,X)=>[q/2,0],C=(q,X)=>[q/2,X];break;case"topRight":D=!0,T=(q,X)=>[q,0],C=(q,X)=>[0,X];break;case"middleRight":L=!0,T=(q,X)=>[q,X/2],C=(q,X)=>[0,X/2];break;case"bottomRight":D=!0,T=(q,X)=>[q,X],C=(q,X)=>[0,0];break;case"bottomMiddle":T=(q,X)=>[q/2,X],C=(q,X)=>[q/2,0];break;case"bottomLeft":D=!0,T=(q,X)=>[0,X],C=(q,X)=>[q,0];break;case"middleLeft":L=!0,T=(q,X)=>[0,X/2],C=(q,X)=>[q,X/2];break}const z=T(u,d),B=C(u,d);let U=w(...B);const O=y(o+U[0]),H=y(c+U[1]);let W=1,Q=1,[nt,ot]=this.screenToPageTranslation(e.movementX,e.movementY);if([nt,ot]=E(nt/n,ot/a),D){const q=Math.hypot(u,d);W=Q=Math.max(Math.min(Math.hypot(B[0]-z[0]-nt,B[1]-z[1]-ot)/q,1/u,1/d),f/u,g/d)}else L?W=Math.max(f,Math.min(1,Math.abs(B[0]-z[0]-nt)))/u:Q=Math.max(g,Math.min(1,Math.abs(B[1]-z[1]-ot)))/d;const ht=y(u*W),lt=y(d*Q);U=w(...C(ht,lt));const J=O-U[0],F=H-U[1];this.width=ht,this.height=lt,this.x=J,this.y=F,this.setDims(n*ht,a*lt),this.fixAndSetPosition()},Zx=function(t){const{isMac:e}=ci.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},rN=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let n,a;const o=this._uiManager._signal;e&&(this.div.classList.add("moving"),n={passive:!0,capture:!0,signal:o},k(this,Yu,t.clientX),k(this,Ku,t.clientY),a=u=>{const{clientX:d,clientY:f}=u,[g,y]=this.screenToPageTranslation(d-p(this,Yu),f-p(this,Ku));k(this,Yu,d),k(this,Ku,f),this._uiManager.dragSelectedEditors(g,y)},window.addEventListener("pointermove",a,n));const c=()=>{window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",a,n)),k(this,Ml,!1),this._uiManager.endDragSession()||M(this,Vt,Zx).call(this,t)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},aN=function(t){xe._resizerKeyboardManager.exec(this,t)},oN=function(t){var e;p(this,Wr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==p(this,Cn)&&M(this,Vt,rf).call(this)},lN=function(t){k(this,ip,p(this,Wr)?t:"")},Jx=function(t){if(p(this,vs))for(const e of p(this,vs))e.tabIndex=t},rf=function(){if(k(this,Wr,!1),M(this,Vt,Jx).call(this,-1),p(this,Rl)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=p(this,Rl);M(this,Vt,Wx).call(this,t,e,n,a),k(this,Rl,null)}},N(xe,ap),Nt(xe,"_borderLineWidth",-1),Nt(xe,"_colorManager",new Bx),Nt(xe,"_zIndex",1),Nt(xe,"_telemetryTimeout",1e3);let fe=xe;class KH extends fe{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const yk=3285377520,Yi=4294901760,Bs=65535;class cN{constructor(t){this.h1=t?t&4294967295:yk,this.h2=t?t&4294967295:yk}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let E=0,T=t.length;E<T;E++){const C=t.charCodeAt(E);C<=255?e[n++]=C:(e[n++]=C>>>8,e[n++]=C&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,o=n-a*4,c=new Uint32Array(e.buffer,0,a);let u=0,d=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,w=y&Bs,A=b&Bs;for(let E=0;E<a;E++)E&1?(u=c[E],u=u*y&Yi|u*w&Bs,u=u<<15|u>>>17,u=u*b&Yi|u*A&Bs,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[E],d=d*y&Yi|d*w&Bs,d=d<<15|d>>>17,d=d*b&Yi|d*A&Bs,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*y&Yi|u*w&Bs,u=u<<15|u>>>17,u=u*b&Yi|u*A&Bs,a&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Yi|t*36045&Bs,e=e*4283543511&Yi|((e<<16|t>>>16)*2950163797&Yi)>>>16,t^=e>>>1,t=t*444984403&Yi|t*60499&Bs,e=e*3301882366&Yi|((e<<16|t>>>16)*3120437893&Yi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const tA=Object.freeze({map:null,hash:"",transfer:void 0});var Dl,Tn,Av,uN;class F_{constructor(){N(this,Av);N(this,Dl,!1);N(this,Tn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=p(this,Tn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return p(this,Tn).get(t)}remove(t){if(p(this,Tn).delete(t),p(this,Tn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of p(this,Tn).values())if(e instanceof fe)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=p(this,Tn).get(t);let a=!1;if(n!==void 0)for(const[o,c]of Object.entries(e))n[o]!==c&&(a=!0,n[o]=c);else a=!0,p(this,Tn).set(t,e);a&&M(this,Av,uN).call(this),e instanceof fe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return p(this,Tn).has(t)}getAll(){return p(this,Tn).size>0?M_(p(this,Tn)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return p(this,Tn).size}resetModified(){p(this,Dl)&&(k(this,Dl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new hN(this)}get serializable(){if(p(this,Tn).size===0)return tA;const t=new Map,e=new cN,n=[],a=Object.create(null);let o=!1;for(const[c,u]of p(this,Tn)){const d=u instanceof fe?u.serialize(!1,a):u;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:tA}get editorStats(){let t=null;const e=new Map;for(const n of p(this,Tn).values()){if(!(n instanceof fe))continue;const a=n.telemetryFinalData;if(!a)continue;const{type:o}=a;e.has(o)||e.set(o,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const c=t[o]||(t[o]=new Map);for(const[u,d]of Object.entries(a)){if(u==="type")continue;let f=c.get(u);f||(f=new Map,c.set(u,f));const g=f.get(d)??0;f.set(d,g+1)}}for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}}Dl=new WeakMap,Tn=new WeakMap,Av=new WeakSet,uN=function(){p(this,Dl)||(k(this,Dl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var op;class hN extends F_{constructor(e){super();N(this,op);const{map:n,hash:a,transfer:o}=e.serializable,c=structuredClone(n,o?{transfer:o}:null);k(this,op,{map:c,hash:a,transfer:o})}get print(){ve("Should not call PrintAnnotationStorage.print")}get serializable(){return p(this,op)}}op=new WeakMap;var Wu;class WH{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){N(this,Wu,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),p(this,Wu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||p(this,Wu).has(t.loadedName))){if(an(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:a,style:o}=t,c=new FontFace(n,a,o);this.addNativeFontFace(c);try{await c.load(),p(this,Wu).add(n),e==null||e(t)}catch{It(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}ve("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw It(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return ee(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(In||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),ee(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(an(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ee(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(z,B){return z.charCodeAt(B)<<24|z.charCodeAt(B+1)<<16|z.charCodeAt(B+2)<<8|z.charCodeAt(B+3)&255}function a(z,B,U,O){const H=z.substring(0,B),W=z.substring(B+U);return H+O+W}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(z,B){if(++f>30){It("Load test font never loaded."),B();return}if(d.font="30px "+z,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(g.bind(null,z,B))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const A=16,E=1482184792;let T=n(b,A);for(o=0,c=y.length-3;o<c;o+=4)T=T-E+n(y,o)|0;o<y.length&&(T=T-E+n(y+"XXX",o)|0),b=a(b,A,4,LH(T));const C=`url(data:font/opentype;base64,${btoa(b)});`,D=`@font-face {font-family:"${y}";src:${C}}`;this.insertRule(D);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const z of[t.loadedName,y]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=z,L.append(B)}this._document.body.append(L),g(y,()=>{L.remove(),e.complete()})}}Wu=new WeakMap;class QH{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var a;if(!this.data||this.disableFontFace)return null;const t=DM(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let o=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(o+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${o}src:${e}}`}return(a=this._inspectFont)==null||a.call(this,this,e),n}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(o){It(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(o,c){};const a=[];for(let o=0,c=n.length;o<c;)switch(n[o++]){case Pr.BEZIER_CURVE_TO:{const[u,d,f,g,y,b]=n.slice(o,o+6);a.push(w=>w.bezierCurveTo(u,d,f,g,y,b)),o+=6}break;case Pr.MOVE_TO:{const[u,d]=n.slice(o,o+2);a.push(f=>f.moveTo(u,d)),o+=2}break;case Pr.LINE_TO:{const[u,d]=n.slice(o,o+2);a.push(f=>f.lineTo(u,d)),o+=2}break;case Pr.QUADRATIC_CURVE_TO:{const[u,d,f,g]=n.slice(o,o+4);a.push(y=>y.quadraticCurveTo(u,d,f,g)),o+=4}break;case Pr.RESTORE:a.push(u=>u.restore());break;case Pr.SAVE:a.push(u=>u.save());break;case Pr.SCALE:an(a.length===2,"Scale command is only valid at the third position.");break;case Pr.TRANSFORM:{const[u,d,f,g,y,b]=n.slice(o,o+6);a.push(w=>w.transform(u,d,f,g,y,b)),o+=6}break;case Pr.TRANSLATE:{const[u,d]=n.slice(o,o+2);a.push(f=>f.translate(u,d)),o+=2}break}return this.compiledGlyphs[e]=function(c,u){a[0](c),a[1](c),c.scale(u,-u);for(let d=2,f=a.length;d<f;d++)a[d](c)}}}if(In){var eA=Promise.withResolvers(),vf=null;(async()=>{const t=await gl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await gl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await gl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),a=await gl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:t,http:e,https:n,url:a,canvas:o,path2d:c}))})().then(t=>{vf=t,eA.resolve()},t=>{It(`loadPackages: ${t}`),vf=new Map,eA.resolve()})}class fr{static get promise(){return eA.promise}static get(t){return vf==null?void 0:vf.get(t)}}const dN=function(s){return fr.get("fs").promises.readFile(s).then(e=>new Uint8Array(e))};class ZH extends Jv{}class JH extends rv{_createCanvas(t,e){return fr.get("canvas").createCanvas(t,e)}}class t6 extends tb{_fetchData(t,e){return dN(t).then(n=>({cMapData:n,compressionType:e}))}}class e6 extends eb{_fetchData(t){return dN(t)}}const Kn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function nA(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),s.clip(a)}class xg{constructor(){this.constructor===xg&&ve("Cannot initialize BaseShadingPattern.")}getPattern(){ve("Abstract method `getPattern` called.")}}class n6 extends xg{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let o;if(a===Kn.STROKE||a===Kn.FILL){const c=e.current.getClippedPathBoundingBox(a,je(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d,!0),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),n=_t.transform(n,[1,0,0,1,c[0],c[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),nA(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else nA(t,this._bbox),o=this._createGradient(t);return o}}function sx(s,t,e,n,a,o,c,u){const d=t.coords,f=t.colors,g=s.data,y=s.width*4;let b;d[e+1]>d[n+1]&&(b=e,e=n,n=b,b=o,o=c,c=b),d[n+1]>d[a+1]&&(b=n,n=a,a=b,b=c,c=u,u=b),d[e+1]>d[n+1]&&(b=e,e=n,n=b,b=o,o=c,c=b);const w=(d[e]+t.offsetX)*t.scaleX,A=(d[e+1]+t.offsetY)*t.scaleY,E=(d[n]+t.offsetX)*t.scaleX,T=(d[n+1]+t.offsetY)*t.scaleY,C=(d[a]+t.offsetX)*t.scaleX,D=(d[a+1]+t.offsetY)*t.scaleY;if(A>=D)return;const L=f[o],z=f[o+1],B=f[o+2],U=f[c],O=f[c+1],H=f[c+2],W=f[u],Q=f[u+1],nt=f[u+2],ot=Math.round(A),ht=Math.round(D);let lt,J,F,q,X,wt,Ct,j;for(let G=ot;G<=ht;G++){if(G<T){const ut=G<A?0:(A-G)/(A-T);lt=w-(w-E)*ut,J=L-(L-U)*ut,F=z-(z-O)*ut,q=B-(B-H)*ut}else{let ut;G>D?ut=1:T===D?ut=0:ut=(T-G)/(T-D),lt=E-(E-C)*ut,J=U-(U-W)*ut,F=O-(O-Q)*ut,q=H-(H-nt)*ut}let tt;G<A?tt=0:G>D?tt=1:tt=(A-G)/(A-D),X=w-(w-C)*tt,wt=L-(L-W)*tt,Ct=z-(z-Q)*tt,j=B-(B-nt)*tt;const at=Math.round(Math.min(lt,X)),pt=Math.round(Math.max(lt,X));let At=y*G+at*4;for(let ut=at;ut<=pt;ut++)tt=(lt-ut)/(lt-X),tt<0?tt=0:tt>1&&(tt=1),g[At++]=J-(J-wt)*tt|0,g[At++]=F-(F-Ct)*tt|0,g[At++]=q-(q-j)*tt|0,g[At++]=255}}function i6(s,t,e){const n=t.coords,a=t.colors;let o,c;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<f;y++,g++)sx(s,e,n[g],n[g+1],n[g+u],a[g],a[g+1],a[g+u]),sx(s,e,n[g+u+1],n[g+1],n[g+u],a[g+u+1],a[g+1],a[g+u])}break;case"triangles":for(o=0,c=n.length;o<c;o+=3)sx(s,e,n[o],n[o+1],n[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class s6 extends xg{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),w=f/y,A=g/b,E={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/w,scaleY:1/A},T=y+4,C=b+4,D=n.getCanvas("mesh",T,C,!1),L=D.context,z=L.createImageData(y,b);if(e){const U=z.data;for(let O=0,H=U.length;O<H;O+=4)U[O]=e[0],U[O+1]=e[1],U[O+2]=e[2],U[O+3]=255}for(const U of this._figures)i6(z,U,E);return L.putImageData(z,2,2),{canvas:D.canvas,offsetX:u-2*w,offsetY:d-2*A,scaleX:w,scaleY:A}}getPattern(t,e,n,a){nA(t,this._bbox);let o;if(a===Kn.SHADING)o=_t.singularValueDecompose2dScale(je(t));else if(o=_t.singularValueDecompose2dScale(e.baseTransform),this.matrix){const u=_t.singularValueDecompose2dScale(this.matrix);o=[o[0]*u[0],o[1]*u[1]]}const c=this._createMeshCanvas(o,a===Kn.SHADING?null:this._background,e.cachedCanvases);return a!==Kn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class r6 extends xg{getPattern(){return"hotpink"}}function a6(s){switch(s[0]){case"RadialAxial":return new n6(s);case"Mesh":return new s6(s);case"Dummy":return new r6}throw new Error(`Unknown IR type: ${s[0]}`)}const vk={COLORED:1,UNCOLORED:2},_v=class _v{constructor(t,e,n,a,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=a,this.baseTransform=o}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,a=this.xstep,o=this.ystep,c=this.paintType,u=this.tilingType,d=this.color,f=this.canvasGraphicsFactory;Wv("TilingType: "+u);const g=n[0],y=n[1],b=n[2],w=n[3],A=_t.singularValueDecompose2dScale(this.matrix),E=_t.singularValueDecompose2dScale(this.baseTransform),T=[A[0]*E[0],A[1]*E[1]],C=this.getSizeAndScale(a,this.ctx.canvas.width,T[0]),D=this.getSizeAndScale(o,this.ctx.canvas.height,T[1]),L=t.cachedCanvases.getCanvas("pattern",C.size,D.size,!0),z=L.context,B=f.createCanvasGraphics(z);B.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(B,c,d);let U=g,O=y,H=b,W=w;return g<0&&(U=0,H+=Math.abs(g)),y<0&&(O=0,W+=Math.abs(y)),z.translate(-(C.scale*U),-(D.scale*O)),B.transform(C.scale,0,0,D.scale,0,0),z.save(),this.clipBbox(B,U,O,H,W),B.baseTransform=je(B.ctx),B.executeOperatorList(e),B.endDrawing(),{canvas:L.canvas,scaleX:C.scale,scaleY:D.scale,offsetX:U,offsetY:O}}getSizeAndScale(t,e,n){t=Math.abs(t);const a=Math.max(_v.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=a?o=a:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,a,o){const c=a-e,u=o-n;t.ctx.rect(e,n,c,u),t.current.updateRectMinMax(je(t.ctx),[e,n,a,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,o=t.current;switch(e){case vk.COLORED:const c=this.ctx;a.fillStyle=c.fillStyle,a.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case vk.UNCOLORED:const u=_t.makeHexColor(n[0],n[1],n[2]);a.fillStyle=u,a.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new DH(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,a){let o=n;a!==Kn.SHADING&&(o=_t.transform(o,e.baseTransform),this.matrix&&(o=_t.transform(o,this.matrix)));const c=this.createPatternCanvas(e);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(u),d}};Nt(_v,"MAX_PATTERN_SIZE",3e3);let iA=_v;function o6({src:s,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=ci.isLittleEndian?4278190080:255,[d,f]=c?[o,u]:[u,o],g=n>>3,y=n&7,b=s.length;e=new Uint32Array(e.buffer);let w=0;for(let A=0;A<a;A++){for(const T=t+g;t<T;t++){const C=t<b?s[t]:255;e[w++]=C&128?f:d,e[w++]=C&64?f:d,e[w++]=C&32?f:d,e[w++]=C&16?f:d,e[w++]=C&8?f:d,e[w++]=C&4?f:d,e[w++]=C&2?f:d,e[w++]=C&1?f:d}if(y===0)continue;const E=t<b?s[t++]:255;for(let T=0;T<y;T++)e[w++]=E&1<<7-T?f:d}return{srcPos:t,destPos:w}}const bk=16,wk=100,l6=15,xk=10,Ak=1e3,li=16;function c6(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(n,a){t.translate(n,a),this.__originalTranslate(n,a)},s.scale=function(n,a){t.scale(n,a),this.__originalScale(n,a)},s.transform=function(n,a,o,c,u,d){t.transform(n,a,o,c,u,d),this.__originalTransform(n,a,o,c,u,d)},s.setTransform=function(n,a,o,c,u,d){t.setTransform(n,a,o,c,u,d),this.__originalSetTransform(n,a,o,c,u,d)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){t.rotate(n),this.__originalRotate(n)},s.clip=function(n){t.clip(n),this.__originalClip(n)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,a,o,c,u){t.bezierCurveTo(e,n,a,o,c,u),this.__originalBezierCurveTo(e,n,a,o,c,u)},s.rect=function(e,n,a,o){t.rect(e,n,a,o),this.__originalRect(e,n,a,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class u6{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Jm(s,t,e,n,a,o,c,u,d,f){const[g,y,b,w,A,E]=je(s);if(y===0&&b===0){const D=c*g+A,L=Math.round(D),z=u*w+E,B=Math.round(z),U=(c+d)*g+A,O=Math.abs(Math.round(U)-L)||1,H=(u+f)*w+E,W=Math.abs(Math.round(H)-B)||1;return s.setTransform(Math.sign(g),0,0,Math.sign(w),L,B),s.drawImage(t,e,n,a,o,0,0,O,W),s.setTransform(g,y,b,w,A,E),[O,W]}if(g===0&&w===0){const D=u*b+A,L=Math.round(D),z=c*y+E,B=Math.round(z),U=(u+f)*b+A,O=Math.abs(Math.round(U)-L)||1,H=(c+d)*y+E,W=Math.abs(Math.round(H)-B)||1;return s.setTransform(0,Math.sign(y),Math.sign(b),0,L,B),s.drawImage(t,e,n,a,o,0,0,W,O),s.setTransform(g,y,b,w,A,E),[W,O]}s.drawImage(t,e,n,a,o,c,u,d,f);const T=Math.hypot(g,y),C=Math.hypot(b,w);return[T*d,C*f]}function h6(s){const{width:t,height:e}=s;if(t>Ak||e>Ak)return null;const n=1e3,a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let c=new Uint8Array(o*(e+1)),u,d,f;const g=t+7&-8;let y=new Uint8Array(g*e),b=0;for(const C of s.data){let D=128;for(;D>0;)y[b++]=C&D?0:255,D>>=1}let w=0;for(b=0,y[b]!==0&&(c[0]=1,++w),d=1;d<t;d++)y[b]!==y[b+1]&&(c[d]=y[b]?2:1,++w),b++;for(y[b]!==0&&(c[d]=2,++w),u=1;u<e;u++){b=u*g,f=u*o,y[b-g]!==y[b]&&(c[f]=y[b]?1:8,++w);let C=(y[b]?4:0)+(y[b-g]?8:0);for(d=1;d<t;d++)C=(C>>2)+(y[b+1]?4:0)+(y[b-g+1]?8:0),a[C]&&(c[f+d]=a[C],++w),b++;if(y[b-g]!==y[b]&&(c[f+d]=y[b]?2:4,++w),w>n)return null}for(b=g*(e-1),f=u*o,y[b]!==0&&(c[f]=8,++w),d=1;d<t;d++)y[b]!==y[b+1]&&(c[f+d]=y[b]?4:8,++w),b++;if(y[b]!==0&&(c[f+d]=4,++w),w>n)return null;const A=new Int32Array([0,o,-1,0,-o,0,0,0,1]),E=new Path2D;for(u=0;w&&u<=e;u++){let C=u*o;const D=C+t;for(;C<D&&!c[C];)C++;if(C===D)continue;E.moveTo(C%o,u);const L=C;let z=c[C];do{const B=A[z];do C+=B;while(!c[C]);const U=c[C];U!==5&&U!==10?(z=U,c[C]=0):(z=U&51*z>>4,c[C]&=z>>2|z<<2),E.lineTo(C%o,C/o|0),c[C]||--w}while(L!==C);--u}return y=null,c=null,function(C){C.save(),C.scale(1/t,-1/e),C.translate(0,-e),C.fill(E),C.beginPath(),C.restore()}}class _k{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=MM,this.textMatrixScale=1,this.fontMatrix=Rx,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=On.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=_t.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=_t.applyTransform(e,t),a=_t.applyTransform(e.slice(2),t),o=_t.applyTransform([e[0],e[3]],t),c=_t.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],a[0],o[0],c[0]),this.minY=Math.min(this.minY,n[1],a[1],o[1],c[1]),this.maxX=Math.max(this.maxX,n[0],a[0],o[0],c[0]),this.maxY=Math.max(this.maxY,n[1],a[1],o[1],c[1])}updateScalingPathMinMax(t,e){_t.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,a,o,c,u,d,f,g){const y=_t.bezierBoundingBox(e,n,a,o,c,u,d,f,g);g||this.updateRectMinMax(t,y)}getPathBoundingBox(t=Kn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Kn.STROKE){e||ve("Stroke bounding box must include transform.");const a=_t.singularValueDecompose2dScale(e),o=a[0]*this.lineWidth/2,c=a[1]*this.lineWidth/2;n[0]-=o,n[1]-=c,n[2]+=o,n[3]+=c}return n}updateClipFromPath(){const t=_t.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Kn.FILL,e=null){return _t.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Ek(s,t){if(typeof ImageData<"u"&&t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%li,o=(e-a)/li,c=a===0?o:o+1,u=s.createImageData(n,li);let d=0,f;const g=t.data,y=u.data;let b,w,A,E;if(t.kind===yy.GRAYSCALE_1BPP){const T=g.byteLength,C=new Uint32Array(y.buffer,0,y.byteLength>>2),D=C.length,L=n+7>>3,z=4294967295,B=ci.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(A=b<o?li:a,f=0,w=0;w<A;w++){const U=T-d;let O=0;const H=U>L?n:U*8-7,W=H&-8;let Q=0,nt=0;for(;O<W;O+=8)nt=g[d++],C[f++]=nt&128?z:B,C[f++]=nt&64?z:B,C[f++]=nt&32?z:B,C[f++]=nt&16?z:B,C[f++]=nt&8?z:B,C[f++]=nt&4?z:B,C[f++]=nt&2?z:B,C[f++]=nt&1?z:B;for(;O<H;O++)Q===0&&(nt=g[d++],Q=128),C[f++]=nt&Q?z:B,Q>>=1}for(;f<D;)C[f++]=0;s.putImageData(u,0,b*li)}}else if(t.kind===yy.RGBA_32BPP){for(w=0,E=n*li*4,b=0;b<o;b++)y.set(g.subarray(d,d+E)),d+=E,s.putImageData(u,0,w),w+=li;b<c&&(E=n*a*4,y.set(g.subarray(d,d+E)),s.putImageData(u,0,w))}else if(t.kind===yy.RGB_24BPP)for(A=li,E=n*A,b=0;b<c;b++){for(b>=o&&(A=a,E=n*A),f=0,w=E;w--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;s.putImageData(u,0,b*li)}else throw new Error(`bad image kind: ${t.kind}`)}function Sk(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%li,o=(e-a)/li,c=a===0?o:o+1,u=s.createImageData(n,li);let d=0;const f=t.data,g=u.data;for(let y=0;y<c;y++){const b=y<o?li:a;({srcPos:d}=o6({src:f,srcPos:d,dest:g,width:n,height:b,nonBlackColor:0})),s.putImageData(u,0,y*li)}}function Kd(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function ty(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!In){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function Ck(s,t){if(t)return!0;const e=_t.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*jo.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const d6=["butt","round","square"],f6=["miter","round","bevel"],p6={},Tk={};var Fo,sA,rA;const V_=class V_{constructor(t,e,n,a,o,{optionalContentConfig:c,markedContentStack:u=null},d,f){N(this,Fo);this.ctx=t,this.current=new _k(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new u6(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...je(this.compositeCtx))}this.ctx.save(),ty(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=je(this.ctx)}executeOperatorList(t,e,n,a){const o=t.argsArray,c=t.fnArray;let u=e||0;const d=o.length;if(d===u)return u;const f=d-u>xk&&typeof n=="function",g=f?Date.now()+l6:0;let y=0;const b=this.commonObjs,w=this.objs;let A;for(;;){if(a!==void 0&&u===a.nextBreakPoint)return a.breakIt(u,n),u;if(A=c[u],A!==fs.dependency)this[A].apply(this,o[u]);else for(const E of o[u]){const T=E.startsWith("g_")?b:w;if(!T.has(E))return T.get(E,n),u}if(u++,u===d)return u;if(f&&++y>xk){if(Date.now()>g)return n(),u;y=0}}}endDrawing(){M(this,Fo,sA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),M(this,Fo,rA).call(this)}_scaleImage(t,e){const n=t.width,a=t.height;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=a,f="prescale1",g,y;for(;o>2&&u>1||c>2&&d>1;){let b=u,w=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),c>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/w),g=this.cachedCanvases.getCanvas(f,b,w),y=g.context,y.clearRect(0,0,b,w),y.drawImage(t,0,0,u,d,0,0,b,w),t=g.canvas,u=b,d=w,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:a}=t,o=this.current.fillColor,c=this.current.patternFill,u=je(e);let d,f,g,y;if((t.bitmap||t.data)&&t.count>1){const H=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(H),d||(d=new Map,this._cachedBitmapsMap.set(H,d));const W=d.get(f);if(W&&!c){const Q=Math.round(Math.min(u[0],u[2])+u[4]),nt=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:W,offsetX:Q,offsetY:nt}}g=W}g||(y=this.cachedCanvases.getCanvas("maskCanvas",n,a),Sk(y.context,t));let b=_t.transform(u,[1/n,0,0,-1/a,0,0]);b=_t.transform(b,[1,0,0,1,0,-a]);const[w,A,E,T]=_t.getAxialAlignedBoundingBox([0,0,n,a],b),C=Math.round(E-w)||1,D=Math.round(T-A)||1,L=this.cachedCanvases.getCanvas("fillCanvas",C,D),z=L.context,B=w,U=A;z.translate(-B,-U),z.transform(...b),g||(g=this._scaleImage(y.canvas,Fr(z)),g=g.img,d&&c&&d.set(f,g)),z.imageSmoothingEnabled=Ck(je(z),t.interpolate),Jm(z,g,0,0,g.width,g.height,0,0,n,a),z.globalCompositeOperation="source-in";const O=_t.transform(Fr(z),[1,0,0,1,-B,-U]);return z.fillStyle=c?o.getPattern(e,this,O,Kn.FILL):o,z.fillRect(0,0,n,a),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,L.canvas)),{canvas:L.canvas,offsetX:Math.round(B),offsetY:Math.round(U)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=d6[t]}setLineJoin(t){this.ctx.lineJoin=f6[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=a.context;const o=this.ctx;o.setTransform(...je(this.suspendedCtx)),Kd(this.suspendedCtx,o),c6(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Kd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const o=a[0],c=a[1],u=a[2]-o,d=a[3]-c;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,o,c,u,d,f,g,y){let b=t.canvas,w=d-g,A=f-y;if(c){if(w<0||A<0||w+n>b.width||A+a>b.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,a),C=T.context;C.drawImage(b,-w,-A),c.some(D=>D!==0)&&(C.globalCompositeOperation="destination-atop",C.fillStyle=_t.makeHexColor(...c),C.fillRect(0,0,n,a),C.globalCompositeOperation="source-over"),b=T.canvas,w=A=0}else if(c.some(T=>T!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(w,A,n,a),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=_t.makeHexColor(...c),t.fillRect(w,A,n,a),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const E=new Path2D;E.rect(d,f,n,a),e.clip(E),e.globalCompositeOperation="destination-in",e.drawImage(b,w,A,n,a,d,f,n,a),e.restore()}save(){this.inSMaskMode?(Kd(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Kd(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,a,o,c){this.ctx.transform(t,e,n,a,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const a=this.ctx,o=this.current;let c=o.x,u=o.y,d,f;const g=je(a),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,b=y?n.slice(0):null;for(let w=0,A=0,E=t.length;w<E;w++)switch(t[w]|0){case fs.rectangle:c=e[A++],u=e[A++];const T=e[A++],C=e[A++],D=c+T,L=u+C;a.moveTo(c,u),T===0||C===0?a.lineTo(D,L):(a.lineTo(D,u),a.lineTo(D,L),a.lineTo(c,L)),y||o.updateRectMinMax(g,[c,u,D,L]),a.closePath();break;case fs.moveTo:c=e[A++],u=e[A++],a.moveTo(c,u),y||o.updatePathMinMax(g,c,u);break;case fs.lineTo:c=e[A++],u=e[A++],a.lineTo(c,u),y||o.updatePathMinMax(g,c,u);break;case fs.curveTo:d=c,f=u,c=e[A+4],u=e[A+5],a.bezierCurveTo(e[A],e[A+1],e[A+2],e[A+3],c,u),o.updateCurvePathMinMax(g,d,f,e[A],e[A+1],e[A+2],e[A+3],c,u,b),A+=6;break;case fs.curveTo2:d=c,f=u,a.bezierCurveTo(c,u,e[A],e[A+1],e[A+2],e[A+3]),o.updateCurvePathMinMax(g,d,f,c,u,e[A],e[A+1],e[A+2],e[A+3],b),c=e[A+2],u=e[A+3],A+=4;break;case fs.curveTo3:d=c,f=u,c=e[A+2],u=e[A+3],a.bezierCurveTo(e[A],e[A+1],c,u,c,u),o.updateCurvePathMinMax(g,d,f,e[A],e[A+1],c,u,c,u,b),A+=4;break;case fs.closePath:a.closePath();break}y&&o.updateScalingPathMinMax(g,b),o.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,Fr(e),Kn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;let o=!1;a&&(e.save(),e.fillStyle=n.getPattern(e,this,Fr(e),Kn.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),o&&e.restore(),t&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=p6}eoClip(){this.pendingClip=Tk}beginText(){this.current.textMatrix=MM,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const n=this.commonObjs.get(t),a=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=n.fontMatrix||Rx,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&It("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const o=n.loadedName||"sans-serif",c=((g=n.systemFontInfo)==null?void 0:g.css)||`"${o}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const d=n.italic?"italic":"normal";let f=e;e<bk?f=bk:e>wk&&(f=wk),this.current.fontSizeScale=e/f,this.ctx.font=`${d} ${u} ${f}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,a,o,c){this.current.textMatrix=[t,e,n,a,o,c],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,a){const o=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,f=c.fontSize/c.fontSizeScale,g=d&On.FILL_STROKE_MASK,y=!!(d&On.ADD_TO_PATH_FLAG),b=c.patternFill&&!u.missingFile;let w;(u.disableFontFace||y||b)&&(w=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||b?(o.save(),o.translate(e,n),o.beginPath(),w(o,f),a&&o.setTransform(...a),(g===On.FILL||g===On.FILL_STROKE)&&o.fill(),(g===On.STROKE||g===On.FILL_STROKE)&&o.stroke(),o.restore()):((g===On.FILL||g===On.FILL_STROKE)&&o.fillText(t,e,n),(g===On.STROKE||g===On.FILL_STROKE)&&o.strokeText(t,e,n)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:je(o),x:e,y:n,fontSize:f,addToPath:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return ee(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const o=this.ctx,c=e.fontSizeScale,u=e.charSpacing,d=e.wordSpacing,f=e.fontDirection,g=e.textHScale*f,y=t.length,b=n.vertical,w=b?1:-1,A=n.defaultVMetrics,E=a*e.fontMatrix[0],T=e.textRenderingMode===On.FILL&&!n.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),f>0?o.scale(g,-1):o.scale(g,1);let C;if(e.patternFill){o.save();const U=e.fillColor.getPattern(o,this,Fr(o),Kn.FILL);C=je(o),o.restore(),o.fillStyle=U}let D=e.lineWidth;const L=e.textMatrixScale;if(L===0||D===0){const U=e.textRenderingMode&On.FILL_STROKE_MASK;(U===On.STROKE||U===On.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=L;if(c!==1&&(o.scale(c,c),D/=c),o.lineWidth=D,n.isInvalidPDFjsFont){const U=[];let O=0;for(const H of t)U.push(H.unicode),O+=H.width;o.fillText(U.join(""),0,0),e.x+=O*E*g,o.restore(),this.compose();return}let z=0,B;for(B=0;B<y;++B){const U=t[B];if(typeof U=="number"){z+=w*U*a/1e3;continue}let O=!1;const H=(U.isSpace?d:0)+u,W=U.fontChar,Q=U.accent;let nt,ot,ht=U.width;if(b){const J=U.vmetric||A,F=-(U.vmetric?J[1]:ht*.5)*E,q=J[2]*E;ht=J?-J[0]:ht,nt=F/c,ot=(z+q)/c}else nt=z/c,ot=0;if(n.remeasure&&ht>0){const J=o.measureText(W).width*1e3/a*c;if(ht<J&&this.isFontSubpixelAAEnabled){const F=ht/J;O=!0,o.save(),o.scale(F,1),nt/=F}else ht!==J&&(nt+=(ht-J)/2e3*a/c)}if(this.contentVisible&&(U.isInFont||n.missingFile)){if(T&&!Q)o.fillText(W,nt,ot);else if(this.paintChar(W,nt,ot,C),Q){const J=nt+a*Q.offset.x/c,F=ot-a*Q.offset.y/c;this.paintChar(Q.fontChar,J,F,C)}}const lt=b?ht*E-H*f:ht*E+H*f;z+=lt,O&&o.restore()}b?e.y-=z:e.x+=z*g,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,a=n.font,o=n.fontSize,c=n.fontDirection,u=a.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,g=n.textHScale*c,y=n.fontMatrix||Rx,b=t.length,w=n.textRenderingMode===On.INVISIBLE;let A,E,T,C;if(!(w||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(g,c),A=0;A<b;++A){if(E=t[A],typeof E=="number"){C=u*E*o/1e3,this.ctx.translate(C,0),n.x+=C*g;continue}const D=(E.isSpace?f:0)+d,L=a.charProcOperatorList[E.operatorListId];if(!L){It(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),e.scale(o,o),e.transform(...y),this.executeOperatorList(L),this.restore()),T=_t.applyTransform([E.width,0],y)[0]*o+D,e.translate(T,0),n.x+=T*g}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,a,o,c){this.ctx.rect(n,a,o-n,c-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],a=this.baseTransform||je(this.ctx),o={createCanvasGraphics:c=>new V_(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new iA(t,n,this.ctx,o,a)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const a=_t.makeHexColor(t,e,n);this.ctx.strokeStyle=a,this.current.strokeColor=a}setFillRGBColor(t,e,n){const a=_t.makeHexColor(t,e,n);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=a6(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Fr(e),Kn.SHADING);const a=Fr(e);if(a){const{width:o,height:c}=e.canvas,[u,d,f,g]=_t.getAxialAlignedBoundingBox([0,0,o,c],a);this.ctx.fillRect(u,d,f-u,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ve("Should not call beginInlineImage")}beginImageData(){ve("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=je(this.ctx),e)){const n=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],n,a),this.current.updateRectMinMax(je(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Wv("TODO: Support non-isolated groups."),t.knockout&&It("Knockout groups not supported.");const n=je(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=_t.getAxialAlignedBoundingBox(t.bbox,je(e));const o=[0,0,e.canvas.width,e.canvas.height];a=_t.intersect(a,o)||[0,0,0,0];const c=Math.floor(a[0]),u=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-c,1),f=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,f),b=y.context;b.translate(-c,-u),b.transform(...n),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(c,u),e.save()),Kd(e,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=je(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const o=_t.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,n,a,o){if(M(this,Fo,sA).call(this),ty(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const c=e[2]-e[0],u=e[3]-e[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=c,e[3]=u;const[d,f]=_t.singularValueDecompose2dScale(je(this.ctx)),{viewportScale:g}=this,y=Math.ceil(c*this.outputScaleX*g),b=Math.ceil(u*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,b);const{canvas:w,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,u*f),ty(this.ctx)}else ty(this.ctx),this.ctx.rect(e[0],e[1],c,u),this.ctx.clip(),this.endPath()}this.current=new _k(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),M(this,Fo,rA).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,a=this.processingType3;if(a&&(a.compiled===void 0&&(a.compiled=h6(t)),a.compiled)){a.compiled(n);return}const o=this._createMaskCanvas(t),c=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(c,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,a=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=je(u);u.transform(e,n,a,o,0,0);const f=this._createMaskCanvas(t);u.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let g=0,y=c.length;g<y;g+=2){const b=_t.transform(d,[e,n,a,o,c[g],c[g+1]]),[w,A]=_t.applyTransform([0,0],b);u.drawImage(f.canvas,w,A)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(const o of t){const{data:c,width:u,height:d,transform:f}=o,g=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=g.context;y.save();const b=this.getObject(c,o);Sk(y,b),y.globalCompositeOperation="source-in",y.fillStyle=a?n.getPattern(y,this,Fr(e),Kn.FILL):n,y.fillRect(0,0,u,d),y.restore(),e.save(),e.transform(...f),e.scale(1,-1),Jm(e,g.canvas,0,0,u,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){It("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,a){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){It("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let f=0,g=a.length;f<g;f+=2)d.push({transform:[e,0,0,n,a[f],a[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,a=this.ctx;if(this.save(),!In){const{filter:u}=a;u!=="none"&&u!==""&&(a.filter="none")}a.scale(1/e,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Ek(d,t),o=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(o,Fr(a));a.imageSmoothingEnabled=Ck(je(a),t.interpolate),Jm(a,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;Ek(d,t),a=this.applyTransferMapsToCanvas(d)}for(const o of e)n.save(),n.transform(...o.transform),n.scale(1,-1),Jm(n,a,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===Tk?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=je(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:o}=this.ctx.getTransform();let c,u;if(n===0&&a===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)c=u=1/d;else{const g=d*t;c=u=g<1?1/g:1}else if(t===0)c=1/d,u=1/f;else{const g=d*t,y=f*t;c=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(e*o-n*a),f=Math.hypot(e,n),g=Math.hypot(a,o);if(t===0)c=g/d,u=f/d;else{const y=t*d;c=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[a,o]=this.getScaleForStroking();if(e.lineWidth=n||1,a===1&&o===1){e.stroke();return}const c=e.getLineDash();if(t&&e.save(),e.scale(a,o),c.length>0){const u=Math.max(a,o);e.setLineDash(c.map(d=>d/u)),e.lineDashOffset/=u}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Fo=new WeakSet,sA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},rA=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let Ou=V_;for(const s in fs)Ou.prototype[s]!==void 0&&(Ou.prototype[fs[s]]=Ou.prototype[s]);var lp,cp;class ga{static get workerPort(){return p(this,lp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");k(this,lp,t)}static get workerSrc(){return p(this,cp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");k(this,cp,t)}}lp=new WeakMap,cp=new WeakMap,N(ga,lp,null),N(ga,cp,"");const ey={DATA:1,ERROR:2},Ye={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function xi(s){switch(s instanceof Error||typeof s=="object"&&s!==null||ve('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Rc(s.message);case"MissingPDFException":return new kc(s.message);case"PasswordException":return new Nx(s.message,s.code);case"UnexpectedResponseException":return new Qv(s.message,s.status);case"UnknownErrorException":return new Dx(s.message,s.details);default:return new Dx(s.message,s.toString())}}var or,fN,pN,_y;class af{constructor(t,e,n){N(this,or);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=a=>{const o=a.data;if(o.targetName!==this.sourceName)return;if(o.stream){M(this,or,pN).call(this,o);return}if(o.callback){const u=o.callbackId,d=this.callbackCapabilities[u];if(!d)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],o.callback===ey.DATA)d.resolve(o.data);else if(o.callback===ey.ERROR)d.reject(xi(o.reason));else throw new Error("Unexpected callback case");return}const c=this.actionHandler[o.action];if(!c)throw new Error(`Unknown action from worker: ${o.action}`);if(o.callbackId){const u=this.sourceName,d=o.sourceName;new Promise(function(f){f(c(o.data))}).then(function(f){n.postMessage({sourceName:u,targetName:d,callback:ey.DATA,callbackId:o.callbackId,data:f})},function(f){n.postMessage({sourceName:u,targetName:d,callback:ey.ERROR,callbackId:o.callbackId,reason:xi(f)})});return}if(o.streamId){M(this,or,fN).call(this,o);return}c(o.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,n,a){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:c,targetName:u,stream:Ye.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{an(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:Ye.CANCEL,streamId:o,reason:xi(f)}),g.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}or=new WeakSet,fN=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:a,stream:Ye.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ye.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){an(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ye.ERROR,streamId:e,reason:xi(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,new Promise(function(f){f(u(t.data,d))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ye.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:a,stream:Ye.START_COMPLETE,streamId:e,reason:xi(f)})})},pN=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case Ye.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(xi(t.reason));break;case Ye.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(xi(t.reason));break;case Ye.PULL:if(!u){o.postMessage({sourceName:n,targetName:a,stream:Ye.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,new Promise(function(d){var f;d((f=u.onPull)==null?void 0:f.call(u))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ye.PULL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:n,targetName:a,stream:Ye.PULL_COMPLETE,streamId:e,reason:xi(d)})});break;case Ye.ENQUEUE:if(an(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Ye.CLOSE:if(an(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),M(this,or,_y).call(this,c,e);break;case Ye.ERROR:an(c,"error should have stream controller"),c.controller.error(xi(t.reason)),M(this,or,_y).call(this,c,e);break;case Ye.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(xi(t.reason)),M(this,or,_y).call(this,c,e);break;case Ye.CANCEL:if(!u)break;new Promise(function(d){var f;d((f=u.onCancel)==null?void 0:f.call(u,xi(t.reason)))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ye.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:n,targetName:a,stream:Ye.CANCEL_COMPLETE,streamId:e,reason:xi(d)})}),u.sinkCapability.reject(xi(t.reason)),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},_y=async function(t,e){var n,a,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var Ll,up;class g6{constructor({parsedData:t,rawData:e}){N(this,Ll);N(this,up);k(this,Ll,t),k(this,up,e)}getRaw(){return p(this,up)}get(t){return p(this,Ll).get(t)??null}getAll(){return M_(p(this,Ll))}has(t){return p(this,Ll).has(t)}}Ll=new WeakMap,up=new WeakMap;const eo=Symbol("INTERNAL");var hp,dp,fp,Qu;class m6{constructor(t,{name:e,intent:n,usage:a}){N(this,hp,!1);N(this,dp,!1);N(this,fp,!1);N(this,Qu,!0);k(this,hp,!!(t&Ji.DISPLAY)),k(this,dp,!!(t&Ji.PRINT)),this.name=e,this.intent=n,this.usage=a}get visible(){if(p(this,fp))return p(this,Qu);if(!p(this,Qu))return!1;const{print:t,view:e}=this.usage;return p(this,hp)?(e==null?void 0:e.viewState)!=="OFF":p(this,dp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==eo&&ve("Internal method `_setVisible` called."),k(this,fp,n),k(this,Qu,e)}}hp=new WeakMap,dp=new WeakMap,fp=new WeakMap,Qu=new WeakMap;var uo,ye,Zu,Ju,pp,aA;class y6{constructor(t,e=Ji.DISPLAY){N(this,pp);N(this,uo,null);N(this,ye,new Map);N(this,Zu,null);N(this,Ju,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,k(this,Ju,t.order);for(const n of t.groups)p(this,ye).set(n.id,new m6(e,n));if(t.baseState==="OFF")for(const n of p(this,ye).values())n._setVisible(eo,!1);for(const n of t.on)p(this,ye).get(n)._setVisible(eo,!0);for(const n of t.off)p(this,ye).get(n)._setVisible(eo,!1);k(this,Zu,this.getHash())}}isVisible(t){if(p(this,ye).size===0)return!0;if(!t)return Wv("Optional content group not defined."),!0;if(t.type==="OCG")return p(this,ye).has(t.id)?p(this,ye).get(t.id).visible:(It(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return M(this,pp,aA).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!p(this,ye).has(e))return It(`Optional content group not found: ${e}`),!0;if(p(this,ye).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!p(this,ye).has(e))return It(`Optional content group not found: ${e}`),!0;if(!p(this,ye).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!p(this,ye).has(e))return It(`Optional content group not found: ${e}`),!0;if(!p(this,ye).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!p(this,ye).has(e))return It(`Optional content group not found: ${e}`),!0;if(p(this,ye).get(e).visible)return!1}return!0}return It(`Unknown optional content policy ${t.policy}.`),!0}return It(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const n=p(this,ye).get(t);if(!n){It(`Optional content group not found: ${t}`);return}n._setVisible(eo,!!e,!0),k(this,uo,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const o=p(this,ye).get(a);if(o)switch(n){case"ON":o._setVisible(eo,!0);break;case"OFF":o._setVisible(eo,!1);break;case"Toggle":o._setVisible(eo,!o.visible);break}}k(this,uo,null)}get hasInitialVisibility(){return p(this,Zu)===null||this.getHash()===p(this,Zu)}getOrder(){return p(this,ye).size?p(this,Ju)?p(this,Ju).slice():[...p(this,ye).keys()]:null}getGroups(){return p(this,ye).size>0?M_(p(this,ye)):null}getGroup(t){return p(this,ye).get(t)||null}getHash(){if(p(this,uo)!==null)return p(this,uo);const t=new cN;for(const[e,n]of p(this,ye))t.update(`${e}:${n.visible}`);return k(this,uo,t.hexdigest())}}uo=new WeakMap,ye=new WeakMap,Zu=new WeakMap,Ju=new WeakMap,pp=new WeakSet,aA=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const o=t[a];let c;if(Array.isArray(o))c=M(this,pp,aA).call(this,o);else if(p(this,ye).has(o))c=p(this,ye).get(o).visible;else return It(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class v6{constructor(t,{disableRange:e=!1,disableStream:n=!1}){an(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});an(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||o.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){an(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new b6(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new w6(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class b6{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=j_(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class w6{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function x6(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let g=u(e);return g=unescape(g),g=d(g),g=f(g),o(g)}if(e=c(s),e){const g=f(e);return o(g)}if(e=n("filename","i").exec(s),e){e=e[1];let g=u(e);return g=f(g),o(g)}function n(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),w=Zv(y);y=b.decode(w),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function c(g){const y=[];let b;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=w.exec(g))!==null;){let[,E,T,C]=b;if(E=parseInt(E,10),E in y){if(E===0)break;continue}y[E]=[T,C]}const A=[];for(let E=0;E<y.length&&E in y;++E){let[T,C]=y[E];C=u(C),T&&(C=unescape(C),E===0&&(C=d(C))),A.push(C)}return A.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const w=y[b].indexOf('"');w!==-1&&(y[b]=y[b].slice(0,w),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),A=g.slice(y+1).replace(/^[^']*'/,"");return a(b,A)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,T){return String.fromCharCode(parseInt(T,16))}),a(b,A);try{A=atob(A)}catch{}return a(b,A)})}return""}function z_({getResponseHeader:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||n||!t||s("Accept-Ranges")!=="bytes"||(s("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function I_(s){const t=s("Content-Disposition");if(t){let e=x6(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(j_(e))return e}return null}function ib(s,t){return s===404||s===0&&t.startsWith("file:")?new kc('Missing PDF "'+t+'".'):new Qv(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function gN(s){return s===200||s===206}function mN(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function yN(s){const t=new Headers;for(const e in s){const n=s[e];n!==void 0&&t.append(e,n)}return t}function vN(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(It(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class kk{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return an(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new A6(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new _6(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class A6{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=yN(this._stream.httpHeaders);const n=e.url;fetch(n,mN(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!gN(a.status))throw ib(a.status,n);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=d=>a.headers.get(d),{allowRangeRequests:c,suggestedLength:u}=z_({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=I_(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Rc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vN(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class _6{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController,this._headers=yN(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const o=a.url;fetch(o,mN(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!gN(c.status))throw ib(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:vN(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const rx=200,ax=206;function E6(s){const t=s.response;return typeof t!="string"?t:Zv(t).buffer}class S6{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const a={begin:t,end:e};for(const o in n)a[o]=n[o];return this.request(a)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const c=this.httpHeaders[o];c!==void 0&&e.setRequestHeader(o,c)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=ax):a.expectedStatus=rx,e.responseType="arraybuffer",t.onError&&(e.onerror=function(o){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){var d,f,g;const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){(d=n.onError)==null||d.call(n,a.status);return}const o=a.status||rx;if(!(o===rx&&n.expectedStatus===ax)&&o!==n.expectedStatus){(f=n.onError)==null||f.call(n,a.status);return}const u=E6(a);if(o===ax){const y=a.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);n.onDone({begin:parseInt(b[1],10),chunk:u})}else u?n.onDone({begin:0,chunk:u}):(g=n.onError)==null||g.call(n,a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class C6{constructor(t){this._source=t,this._manager=new S6(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return an(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new T6(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new k6(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class T6{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=c=>e.getResponseHeader(c),{allowRangeRequests:a,suggestedLength:o}=z_({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=I_(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ib(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class k6{constructor(t,e,n){this._manager=t;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=ib(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const bN=/^file:\/\/\/[a-zA-Z]:\//;function R6(s){const t=fr.get("url"),e=t.parse(s);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(s)?t.parse(`file:///${s}`):(e.host||(e.protocol="file:"),e)}class M6{constructor(t){this.source=t,this.url=R6(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return an(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new L6(this):new N6(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new O6(this,t,e):new D6(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class wN{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Rc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class xN{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function lv(s,t){return{protocol:s.protocol,auth:s.auth,host:s.hostname,port:s.port,path:s.path,method:"GET",headers:t}}class N6 extends wN{constructor(t){super(t);const e=n=>{if(n.statusCode===404){const u=new kc(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(n);const a=u=>this._readableStream.headers[u.toLowerCase()],{allowRangeRequests:o,suggestedLength:c}=z_({getResponseHeader:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=I_(a)};if(this._request=null,this._url.protocol==="http:"){const n=fr.get("http");this._request=n.request(lv(this._url,t.httpHeaders),e)}else{const n=fr.get("https");this._request=n.request(lv(this._url,t.httpHeaders),e)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class D6 extends xN{constructor(t,e,n){super(t),this._httpHeaders={};for(const o in t.httpHeaders){const c=t.httpHeaders[o];c!==void 0&&(this._httpHeaders[o]=c)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const a=o=>{if(o.statusCode===404){const c=new kc(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(o)};if(this._request=null,this._url.protocol==="http:"){const o=fr.get("http");this._request=o.request(lv(this._url,this._httpHeaders),a)}else{const o=fr.get("https");this._request=o.request(lv(this._url,this._httpHeaders),a)}this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class L6 extends wN{constructor(t){super(t);let e=decodeURIComponent(this._url.path);bN.test(this._url.href)&&(e=e.replace(/^\//,""));const n=fr.get("fs");n.promises.lstat(e).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(e)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=new kc(`Missing PDF "${e}".`)),this._storedError=a,this._headersCapability.reject(a)})}}class O6 extends xN{constructor(t,e,n){super(t);let a=decodeURIComponent(this._url.path);bN.test(this._url.href)&&(a=a.replace(/^\//,""));const o=fr.get("fs");this._setReadableStream(o.createReadStream(a,{start:e,end:n-1}))}}const j6=1e5,ri=30,P6=.8;var qk,ho,oi,gp,mp,Ol,Qr,yp,vp,jl,th,eh,fo,nh,bp,ih,Pl,wp,xp,rn,Fl,zl,po,sh,xa,AN,_N,oA,lr,Ey,EN,SN;let cv=(rn=class{constructor({textContentSource:t,container:e,viewport:n}){N(this,xa);N(this,ho,Promise.withResolvers());N(this,oi,null);N(this,gp,!1);N(this,mp,!!((qk=globalThis.FontInspector)!=null&&qk.enabled));N(this,Ol,null);N(this,Qr,null);N(this,yp,0);N(this,vp,0);N(this,jl,null);N(this,th,null);N(this,eh,0);N(this,fo,0);N(this,nh,Object.create(null));N(this,bp,[]);N(this,ih,null);N(this,Pl,[]);N(this,wp,new WeakMap);N(this,xp,null);var d;if(t instanceof ReadableStream)k(this,ih,t);else if(typeof t=="object")k(this,ih,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');k(this,oi,k(this,th,e)),k(this,fo,n.scale*(globalThis.devicePixelRatio||1)),k(this,eh,n.rotation),k(this,Qr,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:o,pageX:c,pageY:u}=n.rawDims;k(this,xp,[1,0,0,-1,-c,u+o]),k(this,vp,a),k(this,yp,o),M(d=rn,lr,EN).call(d),yc(e,n),p(this,ho).promise.catch(()=>{}).then(()=>{p(rn,sh).delete(this),k(this,Qr,null),k(this,nh,null)})}render(){const t=()=>{p(this,jl).read().then(({value:e,done:n})=>{if(n){p(this,ho).resolve();return}p(this,Ol)??k(this,Ol,e.lang),Object.assign(p(this,nh),e.styles),M(this,xa,AN).call(this,e.items),t()},p(this,ho).reject)};return k(this,jl,p(this,ih).getReader()),p(rn,sh).add(this),t(),p(this,ho).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*(globalThis.devicePixelRatio||1),a=t.rotation;if(a!==p(this,eh)&&(e==null||e(),k(this,eh,a),yc(p(this,th),{rotation:a})),n!==p(this,fo)){e==null||e(),k(this,fo,n);const c={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:M(o=rn,lr,Ey).call(o,p(this,Ol))};for(const u of p(this,Pl))c.properties=p(this,wp).get(u),c.div=u,M(this,xa,oA).call(this,c)}}cancel(){var e;const t=new Rc("TextLayer task cancelled.");(e=p(this,jl))==null||e.cancel(t).catch(()=>{}),k(this,jl,null),p(this,ho).reject(t)}get textDivs(){return p(this,Pl)}get textContentItemsStr(){return p(this,bp)}static cleanup(){if(!(p(this,sh).size>0)){p(this,Fl).clear();for(const{canvas:t}of p(this,zl).values())t.remove();p(this,zl).clear()}}},ho=new WeakMap,oi=new WeakMap,gp=new WeakMap,mp=new WeakMap,Ol=new WeakMap,Qr=new WeakMap,yp=new WeakMap,vp=new WeakMap,jl=new WeakMap,th=new WeakMap,eh=new WeakMap,fo=new WeakMap,nh=new WeakMap,bp=new WeakMap,ih=new WeakMap,Pl=new WeakMap,wp=new WeakMap,xp=new WeakMap,Fl=new WeakMap,zl=new WeakMap,po=new WeakMap,sh=new WeakMap,xa=new WeakSet,AN=function(t){var a,o;if(p(this,gp))return;(o=p(this,Qr)).ctx??(o.ctx=M(a=rn,lr,Ey).call(a,p(this,Ol)));const e=p(this,Pl),n=p(this,bp);for(const c of t){if(e.length>j6){It("Ignoring additional textDivs for performance reasons."),k(this,gp,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=p(this,oi);k(this,oi,document.createElement("span")),p(this,oi).classList.add("markedContent"),c.id!==null&&p(this,oi).setAttribute("id",`${c.id}`),u.append(p(this,oi))}else c.type==="endMarkedContent"&&k(this,oi,p(this,oi).parentNode);continue}n.push(c.str),M(this,xa,_N).call(this,c)}},_N=function(t){var E;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};p(this,Pl).push(e);const a=_t.transform(p(this,xp),t.transform);let o=Math.atan2(a[1],a[0]);const c=p(this,nh)[t.fontName];c.vertical&&(o+=Math.PI/2);const u=p(this,mp)&&c.fontSubstitution||c.fontFamily,d=Math.hypot(a[2],a[3]),f=d*M(E=rn,lr,SN).call(E,u,p(this,Ol));let g,y;o===0?(g=a[4],y=a[5]-f):(g=a[4]+f*Math.sin(o),y=a[5]-f*Math.cos(o));const b="calc(var(--scale-factor)*",w=e.style;p(this,oi)===p(this,th)?(w.left=`${(100*g/p(this,vp)).toFixed(2)}%`,w.top=`${(100*y/p(this,yp)).toFixed(2)}%`):(w.left=`${b}${g.toFixed(2)}px)`,w.top=`${b}${y.toFixed(2)}px)`),w.fontSize=`${b}${(p(rn,po)*d).toFixed(2)}px)`,w.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,p(this,mp)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const T=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);T!==C&&Math.max(T,C)/Math.min(T,C)>1.5&&(A=!0)}if(A&&(n.canvasWidth=c.vertical?t.height:t.width),p(this,wp).set(e,n),p(this,Qr).div=e,p(this,Qr).properties=n,M(this,xa,oA).call(this,p(this,Qr)),n.hasText&&p(this,oi).append(e),n.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),p(this,oi).append(T)}},oA=function(t){const{div:e,properties:n,ctx:a,prevFontSize:o,prevFontFamily:c}=t,{style:u}=e;let d="";if(p(rn,po)>1&&(d=`scale(${1/p(rn,po)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=u,{canvasWidth:g,fontSize:y}=n;(o!==y||c!==f)&&(a.font=`${y*p(this,fo)}px ${f}`,t.prevFontSize=y,t.prevFontFamily=f);const{width:b}=a.measureText(e.textContent);b>0&&(d=`scaleX(${g*p(this,fo)/b}) ${d}`)}n.angle!==0&&(d=`rotate(${n.angle}deg) ${d}`),d.length>0&&(u.transform=d)},lr=new WeakSet,Ey=function(t=null){let e=p(this,zl).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),p(this,zl).set(t,e)}return e},EN=function(){if(p(this,po)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.textContent="X",document.body.append(t),k(this,po,t.getBoundingClientRect().height),t.remove()},SN=function(t,e){const n=p(this,Fl).get(t);if(n)return n;const a=M(this,lr,Ey).call(this,e),o=a.font;a.canvas.width=a.canvas.height=ri,a.font=`${ri}px ${t}`;const c=a.measureText("");let u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);if(u){const y=u/(u+d);return p(this,Fl).set(t,y),a.canvas.width=a.canvas.height=0,a.font=o,y}a.strokeStyle="red",a.clearRect(0,0,ri,ri),a.strokeText("g",0,0);let f=a.getImageData(0,0,ri,ri).data;d=0;for(let y=f.length-1-3;y>=0;y-=4)if(f[y]>0){d=Math.ceil(y/4/ri);break}a.clearRect(0,0,ri,ri),a.strokeText("A",0,ri),f=a.getImageData(0,0,ri,ri).data,u=0;for(let y=0,b=f.length;y<b;y+=4)if(f[y]>0){u=ri-Math.floor(y/4/ri);break}a.canvas.width=a.canvas.height=0,a.font=o;const g=u?u/(u+d):P6;return p(this,Fl).set(t,g),g},N(rn,lr),N(rn,Fl,new Map),N(rn,zl,new Map),N(rn,po,null),N(rn,sh,new Set),rn);function F6(){FM("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:s,container:t,viewport:e,...n}=arguments[0],a=Object.keys(n);a.length>0&&It("Ignoring `renderTextLayer` parameters: "+a.join(", "));const o=new cv({textContentSource:s,container:t,viewport:e}),{textDivs:c,textContentItemsStr:u}=o;return{promise:o.render(),textDivs:c,textContentItemsStr:u}}function z6(){FM("`updateTextLayer`, please use `TextLayer` instead.")}class Df{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(o){var d;if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(Df.shouldBuildText(u))(d=o==null?void 0:o.attributes)!=null&&d.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const f of o.children)a(f)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const I6=65536,B6=100,U6=5e3,H6=In?JH:BH,V6=In?t6:jM,q6=In?ZH:IH,G6=In?e6:PM;function X6(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new lA,{docId:e}=t,n=s.url?$6(s.url):null,a=s.data?Y6(s.data):null,o=s.httpHeaders||null,c=s.withCredentials===!0,u=s.password??null,d=s.range instanceof CN?s.range:null,f=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:I6;let g=s.worker instanceof ju?s.worker:null;const y=s.verbosity,b=typeof s.docBaseUrl=="string"&&!O_(s.docBaseUrl)?s.docBaseUrl:null,w=typeof s.cMapUrl=="string"?s.cMapUrl:null,A=s.cMapPacked!==!1,E=s.CMapReaderFactory||V6,T=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,C=s.StandardFontDataFactory||G6,D=s.stopAtErrors!==!0,L=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,z=s.isEvalSupported!==!1,B=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!In,U=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,O=typeof s.disableFontFace=="boolean"?s.disableFontFace:In,H=s.fontExtraProperties===!0,W=s.enableXfa===!0,Q=s.ownerDocument||globalThis.document,nt=s.disableRange===!0,ot=s.disableStream===!0,ht=s.disableAutoFetch===!0,lt=s.pdfBug===!0,J=s.enableHWA===!0,F=d?d.length:s.length??NaN,q=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!In&&!O,X=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:E===jM&&C===PM&&w&&T&&nf(w,document.baseURI)&&nf(T,document.baseURI),wt=s.canvasFactory||new H6({ownerDocument:Q,enableHWA:J}),Ct=s.filterFactory||new q6({docId:e,ownerDocument:Q}),j=null;kH(y);const G={canvasFactory:wt,filterFactory:Ct};if(X||(G.cMapReaderFactory=new E({baseUrl:w,isCompressed:A}),G.standardFontDataFactory=new C({baseUrl:T})),!g){const pt={verbosity:y,port:ga.workerPort};g=pt.port?ju.fromPort(pt):new ju(pt),t._worker=g}const tt={docId:e,apiVersion:"4.4.168",data:a,password:u,disableAutoFetch:ht,rangeChunkSize:f,length:F,docBaseUrl:b,enableXfa:W,evaluatorOptions:{maxImageSize:L,disableFontFace:O,ignoreErrors:D,isEvalSupported:z,isOffscreenCanvasSupported:B,canvasMaxAreaInBytes:U,fontExtraProperties:H,useSystemFonts:q,cMapUrl:X?w:null,standardFontDataUrl:X?T:null}},at={disableFontFace:O,fontExtraProperties:H,ownerDocument:Q,pdfBug:lt,styleElement:j,loadingParams:{disableAutoFetch:ht,enableXfa:W}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const pt=g.messageHandler.sendWithPromise("GetDocRequest",tt,a?[a.buffer]:null);let At;if(d)At=new v6(d,{disableRange:nt,disableStream:ot});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");At=(Gt=>In?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&nf(Gt.url)?new kk(Gt):new M6(Gt):nf(Gt.url)?new kk(Gt):new C6(Gt))({url:n,length:F,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:nt,disableStream:ot})}return pt.then(ut=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Gt=new af(e,ut,g.port),Pt=new Z6(Gt,t,At,at,G);t._transport=Pt,Gt.send("Ready",null)})}).catch(t._capability.reject),t}function $6(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(In&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Y6(s){if(In&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Zv(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Rk(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var Ev;const Sv=class Sv{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${wi(Sv,Ev)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Ev=new WeakMap,N(Sv,Ev,0);let lA=Sv,CN=class{constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ve("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class K6{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ee(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var go,Zr,is,Eu,Sy;class W6{constructor(t,e,n,a=!1){N(this,is);N(this,go,null);N(this,Zr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new gk:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new TN,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}={}){return new bg({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ee(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:a=so.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:g=null}){var L,z;(L=this._stats)==null||L.time("Overall");const y=this._transport.getRenderingIntent(n,a,g),{renderingIntent:b,cacheKey:w}=y;k(this,Zr,!1),M(this,is,Sy).call(this),u||(u=this._transport.getOptionalContentConfig(b));let A=this._intentStates.get(w);A||(A=Object.create(null),this._intentStates.set(w,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const E=!!(b&Ji.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(y));const T=B=>{var U;A.renderTasks.delete(C),(this._maybeCleanupAfterRender||E)&&k(this,Zr,!0),M(this,is,Eu).call(this,!E),B?(C.capability.reject(B),this._abortOperatorList({intentState:A,reason:B instanceof Error?B:new Error(B)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new uA({callback:T,params:{canvasContext:t,viewport:e,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:f});(A.renderTasks||(A.renderTasks=new Set)).add(C);const D=C.task;return Promise.all([A.displayReadyCapability.promise,u]).then(([B,U])=>{var O;if(this.destroyed){T();return}if((O=this._stats)==null||O.time("Rendering"),!(U.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:B,optionalContentConfig:U}),C.operatorListChanged()}).catch(T),D}getOperatorList({intent:t="display",annotationMode:e=so.ENABLE,printAnnotationStorage:n=null}={}){var d;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(t,e,n,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Df.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function o(){c.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),k(this,Zr,!1),M(this,is,Sy).call(this),Promise.all(t)}cleanup(t=!1){k(this,Zr,!0);const e=M(this,is,Eu).call(this,!1);return t&&e&&this._stats&&(this._stats=new gk),e}_startRenderPage(t,e){var a,o;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&M(this,is,Eu).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n}){const{map:a,transfer:o}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a},o).getReader(),d=this._intentStates.get(e);d.streamReader=u;const f=()=>{u.read().then(({value:g,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,d),f())},g=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();M(this,is,Eu).call(this,!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(g);else if(d.opListReadCapability)d.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof L_){let a=B6;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Rc(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}go=new WeakMap,Zr=new WeakMap,is=new WeakSet,Eu=function(t=!1){if(M(this,is,Sy).call(this),!p(this,Zr)||this.destroyed)return!1;if(t)return k(this,go,setTimeout(()=>{k(this,go,null),M(this,is,Eu).call(this,!1)},U6)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(this,Zr,!1),!0},Sy=function(){p(this,go)&&(clearTimeout(p(this,go)),k(this,go,null))};var Il,Cv;class Q6{constructor(){N(this,Il,new Set);N(this,Cv,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};p(this,Cv).then(()=>{for(const a of p(this,Il))a.call(this,n)})}addEventListener(t,e){p(this,Il).add(e)}removeEventListener(t,e){p(this,Il).delete(e)}terminate(){p(this,Il).clear()}}Il=new WeakMap,Cv=new WeakMap;const Hr={isWorkerDisabled:!1,fakeWorkerId:0};In&&(Hr.isWorkerDisabled=!0,ga.workerSrc||(ga.workerSrc="./pdf.worker.mjs")),Hr.isSameOrigin=function(s,t){let e;try{if(e=new URL(s),!e.origin||e.origin==="null")return!1}catch{return!1}const n=new URL(t,e);return e.origin===n.origin},Hr.createCDNWrapper=function(s){const t=`await import("${s}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var Bl,rh,Cy,ah,Ty;const Ai=class Ai{constructor({name:t=null,port:e=null,verbosity:n=RH()}={}){N(this,rh);var a;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((a=p(Ai,Bl))!=null&&a.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(p(Ai,Bl)||k(Ai,Bl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return In?Promise.all([fr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new af("main","worker",t),this._messageHandler.on("ready",function(){}),M(this,rh,Cy).call(this)}_initialize(){if(Hr.isWorkerDisabled||p(Ai,ah,Ty)){this._setupFakeWorker();return}let{workerSrc:t}=Ai;try{Hr.isSameOrigin(window.location.href,t)||(t=Hr.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new af("main","worker",e),a=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||a()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}this._messageHandler=n,this._port=e,this._webWorker=e,M(this,rh,Cy).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};c();return}catch{Wv("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Hr.isWorkerDisabled||(It("Setting up fake worker."),Hr.isWorkerDisabled=!0),Ai._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new Q6;this._port=e;const n=`fake${Hr.fakeWorkerId++}`,a=new af(n+"_worker",n,e);t.setup(a,e),this._messageHandler=new af(n,n+"_worker",e),M(this,rh,Cy).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=p(Ai,Bl))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=p(this,Bl))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ai(t)}static get workerSrc(){if(ga.workerSrc)return ga.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ee(this,"_setupFakeWorkerGlobal",(async()=>p(this,ah,Ty)?p(this,ah,Ty):(await import(this.workerSrc)).WorkerMessageHandler)())}};Bl=new WeakMap,rh=new WeakSet,Cy=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},ah=new WeakSet,Ty=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},N(Ai,ah),N(Ai,Bl);let ju=Ai;var Jr,$s,oh,lh,Ys,Ul,of;class Z6{constructor(t,e,n,a,o){N(this,Ul);N(this,Jr,new Map);N(this,$s,new Map);N(this,oh,new Map);N(this,lh,new Map);N(this,Ys,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new TN,this.fontLoader=new WH({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ee(this,"annotationStorage",new F_)}getRenderingIntent(t,e=so.ENABLE,n=null,a=!1){let o=Ji.DISPLAY,c=tA;switch(t){case"any":o=Ji.ANY;break;case"display":break;case"print":o=Ji.PRINT;break;default:It(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case so.DISABLE:o+=Ji.ANNOTATIONS_DISABLE;break;case so.ENABLE:break;case so.ENABLE_FORMS:o+=Ji.ANNOTATIONS_FORMS;break;case so.ENABLE_STORAGE:o+=Ji.ANNOTATIONS_STORAGE,c=(o&Ji.PRINT&&n instanceof hN?n:this.annotationStorage).serializable;break;default:It(`getRenderingIntent - invalid annotationMode: ${e}`)}return a&&(o+=Ji.OPLIST),{renderingIntent:o,cacheKey:`${o}_${c.hash}`,annotationStorageSerializable:c}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=p(this,Ys))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of p(this,$s).values())t.push(a._destroy());p(this,$s).clear(),p(this,oh).clear(),p(this,lh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a;this.commonObjs.clear(),this.fontLoader.clear(),p(this,Jr).clear(),this.filterFactory.destroy(),cv.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new Rc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{an(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){a.close();return}an(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",n=>{const a=Promise.withResolvers(),o=this._fullReader;return o.headersReady.then(()=>{var c;(!o.isStreamingSupported||!o.isRangeSupported)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),o.onProgress=u=>{var d;(d=e.onProgress)==null||d.call(e,{loaded:u.loaded,total:u.total})}),a.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},a.reject),a.promise}),t.on("GetRangeReader",(n,a)=>{an(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){a.close();return}an(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new K6(n,this))}),t.on("DocException",function(n){let a;switch(n.name){case"PasswordException":a=new Nx(n.message,n.code);break;case"InvalidPDFException":a=new NM(n.message);break;case"MissingPDFException":a=new kc(n.message);break;case"UnexpectedResponseException":a=new Qv(n.message,n.status);break;case"UnknownErrorException":a=new Dx(n.message,n.details);break;default:ve("DocException - expected a valid Error.")}e._capability.reject(a)}),t.on("PasswordRequest",n=>{if(k(this,Ys,Promise.withResolvers()),e.onPassword){const a=o=>{o instanceof Error?p(this,Ys).reject(o):p(this,Ys).resolve({password:o})};try{e.onPassword(a,n.code)}catch(o){p(this,Ys).reject(o)}}else p(this,Ys).reject(new Nx(n.message,n.code));return p(this,Ys).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;p(this,$s).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,o])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":const{disableFontFace:u,fontExtraProperties:d,pdfBug:f}=this._params;if("error"in o){const w=o.error;It(`Error during font loading: ${w}`),this.commonObjs.resolve(n,w);break}const g=f&&((c=globalThis.FontInspector)!=null&&c.enabled)?(w,A)=>globalThis.FontInspector.fontAdded(w,A):null,y=new QH(o,{disableFontFace:u,inspectFont:g});this.fontLoader.bind(y).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&y.data&&(y.data=null),this.commonObjs.resolve(n,y)});break;case"CopyLocalImage":const{imageRef:b}=o;an(b,"The imageRef must be defined.");for(const w of p(this,$s).values())for(const[,A]of w.objs)if((A==null?void 0:A.ref)===b)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,o,c])=>{var d;if(this.destroyed)return;const u=p(this,$s).get(a);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=c==null?void 0:c.bitmap)==null||d.close();return}switch(o){case"Image":u.objs.resolve(n,c),(c==null?void 0:c.dataLen)>EH&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&It("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=p(this,oh).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&p(this,lh).set(o.refStr,t);const c=new W6(e,o,this,this._params.pdfBug);return p(this,$s).set(e,c),c});return p(this,oh).set(e,a),a}getPageIndex(t){return Rk(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return M(this,Ul,of).call(this,"GetFieldObjects")}hasJSActions(){return M(this,Ul,of).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return M(this,Ul,of).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return M(this,Ul,of).call(this,"GetOptionalContentConfig").then(e=>new y6(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=p(this,Jr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var o,c;return{info:a[0],metadata:a[1]?new g6(a[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return p(this,Jr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of p(this,$s).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),p(this,Jr).clear(),this.filterFactory.destroy(!0),cv.cleanup()}}cachedPageNumber(t){if(!Rk(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return p(this,lh).get(e)??null}}Jr=new WeakMap,$s=new WeakMap,oh=new WeakMap,lh=new WeakMap,Ys=new WeakMap,Ul=new WeakSet,of=function(t,e=null){const n=p(this,Jr).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return p(this,Jr).set(t,a),a};const ny=Symbol("INITIAL_DATA");var bs,Ap,cA;class TN{constructor(){N(this,Ap);N(this,bs,Object.create(null))}get(t,e=null){if(e){const a=M(this,Ap,cA).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=p(this,bs)[t];if(!n||n.data===ny)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=p(this,bs)[t];return!!e&&e.data!==ny}resolve(t,e=null){const n=M(this,Ap,cA).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in p(this,bs)){const{data:n}=p(this,bs)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}k(this,bs,Object.create(null))}*[Symbol.iterator](){for(const t in p(this,bs)){const{data:e}=p(this,bs)[t];e!==ny&&(yield[t,e])}}}bs=new WeakMap,Ap=new WeakSet,cA=function(t){var e;return(e=p(this,bs))[t]||(e[t]={...Promise.withResolvers(),data:ny})};var mo;class J6{constructor(t){N(this,mo,null);k(this,mo,t),this.onContinue=null}get promise(){return p(this,mo).capability.promise}cancel(t=0){p(this,mo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=p(this,mo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=p(this,mo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}mo=new WeakMap;var yo,Hl;const pl=class pl{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null}){N(this,yo,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new J6(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var u,d;if(this.cancelled)return;if(this._canvas){if(p(pl,Hl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");p(pl,Hl).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:a,transform:o,background:c}=this.params;this.gfx=new Ou(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),p(this,yo)&&(window.cancelAnimationFrame(p(this,yo)),k(this,yo,null)),p(pl,Hl).delete(this._canvas),this.callback(t||new L_(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(this,yo,window.requestAnimationFrame(()=>{k(this,yo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),p(pl,Hl).delete(this._canvas),this.callback())))}};yo=new WeakMap,Hl=new WeakMap,N(pl,Hl,new WeakSet);let uA=pl;const t8="4.4.168",e8="19fbc8998";function Mk(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Wd(s){return Math.max(0,Math.min(255,255*s))}class Nk{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Wd(t),[t,t,t]}static G_HTML([t]){const e=Mk(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Wd)}static RGB_HTML(t){return`#${t.map(Mk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[Wd(1-Math.min(1,t+a)),Wd(1-Math.min(1,n+a)),Wd(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,o=1-e,c=1-n,u=Math.min(a,o,c);return["CMYK",a,o,c,u]}}class kN{static setupStorage(t,e,n,a,o){const c=a.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of n.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:o}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){var y,b;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,o=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:n});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const w=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=w}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const w=document.createTextNode(a.value);c.append(w),u&&Df.shouldBuildText(a.name)&&f.push(w)}return{textDivs:f}}const g=[[a,-1,c]];for(;g.length>0;){const[w,A,E]=g.at(-1);if(A+1===w.children.length){g.pop();continue}const T=w.children[++g.at(-1)[1]];if(T===null)continue;const{name:C}=T;if(C==="#text"){const L=document.createTextNode(T.value);f.push(L),E.append(L);continue}const D=(y=T==null?void 0:T.attributes)!=null&&y.xmlns?document.createElementNS(T.attributes.xmlns,C):document.createElement(C);if(E.append(D),T.attributes&&this.setAttributes({html:D,element:T,storage:e,intent:o,linkService:n}),((b=T.children)==null?void 0:b.length)>0)g.push([T,-1,D]);else if(T.value){const L=document.createTextNode(T.value);u&&Df.shouldBuildText(C)&&f.push(L),D.append(L)}}for(const w of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Ag=1e3,n8=9,bc=new WeakSet;function ma(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class i8{static create(t){switch(t.data.annotationType){case Je.LINK:return new RN(t);case Je.TEXT:return new s8(t);case Je.WIDGET:switch(t.data.fieldType){case"Tx":return new r8(t);case"Btn":return t.data.radioButton?new DN(t):t.data.checkBox?new o8(t):new l8(t);case"Ch":return new c8(t);case"Sig":return new a8(t)}return new Mc(t);case Je.POPUP:return new dA(t);case Je.FREETEXT:return new FN(t);case Je.LINE:return new h8(t);case Je.SQUARE:return new d8(t);case Je.CIRCLE:return new f8(t);case Je.POLYLINE:return new zN(t);case Je.CARET:return new g8(t);case Je.INK:return new IN(t);case Je.POLYGON:return new p8(t);case Je.HIGHLIGHT:return new m8(t);case Je.UNDERLINE:return new y8(t);case Je.SQUIGGLY:return new v8(t);case Je.STRIKEOUT:return new b8(t);case Je.STAMP:return new BN(t);case Je.FILEATTACHMENT:return new w8(t);default:return new Ve(t)}}}var Vl,ch,uh,_p,hA;const q_=class q_{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){N(this,_p);N(this,Vl,null);N(this,ch,!1);N(this,uh,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get hasPopupData(){return q_._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;p(this,Vl)||k(this,Vl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&M(this,_p,hA).call(this,e),(n=p(this,uh))==null||n.popup.updateEdited(t)}resetEdited(){var t;p(this,Vl)&&(M(this,_p,hA).call(this,p(this,Vl).rect),(t=p(this,uh))==null||t.popup.resetEdited(),k(this,Vl,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof Mc||(o.tabIndex=Ag);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,e.popupRef&&o.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof dA){const{rotation:E}=e;return!e.hasOwnCanvas&&E!==0&&this.setRotation(E,o),o}const{width:u,height:d}=ma(e.rect);if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const E=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(E>0||T>0){const D=`calc(${E}px * var(--scale-factor)) / calc(${T}px * var(--scale-factor))`;c.borderRadius=D}else if(this instanceof DN){const D=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;c.borderRadius=D}switch(e.borderStyle.style){case Yd.SOLID:c.borderStyle="solid";break;case Yd.DASHED:c.borderStyle="dashed";break;case Yd.BEVELED:It("Unimplemented border style: beveled");break;case Yd.INSET:It("Unimplemented border style: inset");break;case Yd.UNDERLINE:c.borderBottomStyle="solid";break}const C=e.borderColor||null;C?(k(this,ch,!0),c.borderColor=_t.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):c.borderWidth=0}const f=_t.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:w}=a.rawDims;c.left=`${100*(f[0]-b)/g}%`,c.top=`${100*(f[1]-w)/y}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(c.width=`${100*u/g}%`,c.height=`${100*d/y}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims,{width:o,height:c}=ma(this.data.rect);let u,d;t%180===0?(u=100*o/n,d=100*c/a):(u=100*c/n,d=100*o/a),e.style.width=`${u}%`,e.style.height=`${d}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const o=a.detail[e],c=o[0],u=o.slice(1);a.target.style[n]=Nk[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:Nk[`${c}_rgb`](u)})};return ee(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const o=t[a]||n[a];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,o]of Object.entries(e)){const c=n[a];if(c){const u={detail:{[a]:o},target:t};c(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,o]=this.data.rect.map(E=>Math.fround(E));if(t.length===8){const[E,T,C,D]=t.subarray(2,6);if(a===E&&o===T&&e===C&&n===D)return}const{style:c}=this.container;let u;if(p(this,ch)){const{borderColor:E,borderWidth:T}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=a-e,f=o-n,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const b=g.createElement("defs");y.append(b);const w=g.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),b.append(w);for(let E=2,T=t.length;E<T;E+=8){const C=t[E],D=t[E+1],L=t[E+2],z=t[E+3],B=g.createElement("rect"),U=(L-e)/d,O=(o-D)/f,H=(C-L)/d,W=(D-z)/f;B.setAttribute("x",U),B.setAttribute("y",O),B.setAttribute("width",H),B.setAttribute("height",W),w.append(B),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${O}" width="${H}" height="${W}"/>`)}p(this,ch)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const n=k(this,uh,new dA({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){ve("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:c,exportValues:u}of a){if(o===-1||c===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!bc.has(f)){It(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:d,domElement:f})}return n}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==e&&bc.has(a)&&n.push({id:c,exportValue:o,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Vl=new WeakMap,ch=new WeakMap,uh=new WeakMap,_p=new WeakSet,hA=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:g}=ma(t);e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*f/o}%`,e.height=`${100*g/c}%`):this.setRotation(a)};let Ve=q_;var ji,ul,MN,NN;class RN extends Ve{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});N(this,ji);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(a,e.action),o=!0):e.attachment?(M(this,ji,MN).call(this,a,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(M(this,ji,NN).call(this,a,e.setOCGState),o=!0):e.dest?(this._bindLink(a,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),o=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(a,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(a),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&M(this,ji,ul).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),M(this,ji,ul).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const c=a.get(o);c&&(e[c]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),M(this,ji,ul).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),M(this,ji,ul).call(this),!this._fieldObjects){It('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var y;a==null||a();const{fields:o,refs:c,include:u}=n,d=[];if(o.length!==0||c.length!==0){const b=new Set(c);for(const w of o){const A=this._fieldObjects[w]||[];for(const{id:E}of A)b.add(E)}for(const w of Object.values(this._fieldObjects))for(const A of w)b.has(A.id)===u&&d.push(A)}else for(const b of Object.values(this._fieldObjects))d.push(...b);const f=this.annotationStorage,g=[];for(const b of d){const{id:w}=b;switch(g.push(w),b.type){case"text":{const E=b.defaultValue||"";f.setValue(w,{value:E});break}case"checkbox":case"radiobutton":{const E=b.defaultValue===b.exportValues;f.setValue(w,{value:E});break}case"combobox":case"listbox":{const E=b.defaultValue||"";f.setValue(w,{value:E});break}default:continue}const A=document.querySelector(`[data-element-id="${w}"]`);if(A){if(!bc.has(A)){It(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}ji=new WeakSet,ul=function(){this.container.setAttribute("data-internal-link","")},MN=function(e,n,a=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,a),!1},M(this,ji,ul).call(this)},NN=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),M(this,ji,ul).call(this)};class s8 extends Ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Mc extends Ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ci.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,o){n.includes("mouse")?t.addEventListener(n,c=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{var u;if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}}))})}_setEventListeners(t,e,n,a){var o,c,u;for(const[d,f]of n)(f==="Action"||(o=this.data.actions)!=null&&o[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,f,a),f==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":_t.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||n8,o=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(ex*a))||1,y=f/g;c=Math.min(a,d(y/ex))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,d(f/ex))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=_t.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class r8 extends Mc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),o.setValue(c.id,{[a]:n})}render(){var a,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let u=c.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let f=c.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const g={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),bc.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Ag,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",b=>{t.setValue(e,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",b=>{const w=this.data.defaultFieldValue??"";n.value=g.userValue=w,g.formattedValue=null});let y=b=>{const{formattedValue:w}=g;w!=null&&(b.target.value=w),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{var E;if(g.focused)return;const{target:A}=w;g.userValue&&(A.value=g.userValue),g.lastCommittedValue=A.value,g.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const A={value(E){g.userValue=E.detail.value??"",t.setValue(e,{value:g.userValue.toString()}),E.target.value=g.userValue},formattedValue(E){const{formattedValue:T}=E.detail;g.formattedValue=T,T!=null&&E.target!==document.activeElement&&(E.target.value=T),t.setValue(e,{formattedValue:T})},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var L;const{charLimit:T}=E.detail,{target:C}=E;if(T===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",T);let D=g.userValue;!D||D.length<=T||(D=D.slice(0,T),C.value=g.userValue=D,t.setValue(e,{value:D}),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(A,w)}),n.addEventListener("keydown",w=>{var T;g.commitKey=1;let A=-1;if(w.key==="Escape"?A=0:w.key==="Enter"&&!this.data.multiLine?A=2:w.key==="Tab"&&(g.commitKey=3),A===-1)return;const{value:E}=w.target;g.lastCommittedValue!==E&&(g.lastCommittedValue=E,g.userValue=E,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:A,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const b=y;y=null,n.addEventListener("blur",w=>{var E,T;if(!g.focused||!w.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(g.focused=!1);const{value:A}=w.target;g.userValue=A,g.lastCommittedValue!==A&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:g.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),b(w)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",w=>{var B;g.lastCommittedValue=null;const{data:A,target:E}=w,{value:T,selectionStart:C,selectionEnd:D}=E;let L=C,z=D;switch(w.inputType){case"deleteWordBackward":{const U=T.substring(0,C).match(/\w*[^\w]*$/);U&&(L-=U[0].length);break}case"deleteWordForward":{const U=T.substring(C).match(/^[^\w]*\w*/);U&&(z+=U[0].length);break}case"deleteContentBackward":C===D&&(L-=1);break;case"deleteContentForward":C===D&&(z+=1);break}w.preventDefault(),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:A||"",willCommit:!1,selStart:L,selEnd:z}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class a8 extends Mc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class o8 extends Mc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return bc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=Ag,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class DN extends Mc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(bc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=Ag,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===n;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class l8 extends RN{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class c8 extends Mc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");bc.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=Ag;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,n.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),c=()=>{g.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:w}=a;return w?Array.prototype.filter.call(b,A=>A.selected).map(A=>A[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){c==null||c();const w=b.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const E of a.options)E.selected=A.has(E.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const w=a.options,A=b.detail.remove;w[A].selected=!1,a.remove(A),w.length>0&&Array.prototype.findIndex.call(w,T=>T.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(b){const{index:w,displayValue:A,exportValue:E}=b.detail.insert,T=a.children[w],C=document.createElement("option");C.textContent=A,C.value=E,T?T.before(C):a.append(C),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},items(b){const{items:w}=b.detail;for(;a.length!==0;)a.remove(0);for(const A of w){const{displayValue:E,exportValue:T}=A,C=document.createElement("option");C.textContent=E,C.value=T,a.append(C)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},indices(b){const w=new Set(b.detail.indices);for(const A of b.target.options)A.selected=w.has(A.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{var w;const y=u(!0),b=u(!1);t.setValue(e,{value:y}),g.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class dA extends Ve{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Ve._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new u8({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${LM}${n}`).join(",")),this.container}}var hh,Tv,kv,dh,ql,ze,ta,Gl,Ep,Sp,fh,ea,ws,na,Cp,ia,Tp,Xl,$l,be,ky,fA,LN,ON,jN,PN,Ry,My,pA;class u8{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:f,parentRect:g,open:y}){N(this,be);N(this,hh,M(this,be,jN).bind(this));N(this,Tv,M(this,be,pA).bind(this));N(this,kv,M(this,be,My).bind(this));N(this,dh,M(this,be,Ry).bind(this));N(this,ql,null);N(this,ze,null);N(this,ta,null);N(this,Gl,null);N(this,Ep,null);N(this,Sp,null);N(this,fh,null);N(this,ea,!1);N(this,ws,null);N(this,na,null);N(this,Cp,null);N(this,ia,null);N(this,Tp,null);N(this,Xl,null);N(this,$l,!1);var b;k(this,ze,t),k(this,Tp,a),k(this,ta,c),k(this,ia,u),k(this,Sp,d),k(this,ql,e),k(this,Cp,f),k(this,fh,g),k(this,Ep,n),k(this,Gl,zM.toDateObject(o)),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup());for(const w of this.trigger)w.addEventListener("click",p(this,dh)),w.addEventListener("mouseenter",p(this,kv)),w.addEventListener("mouseleave",p(this,Tv)),w.classList.add("popupTriggerArea");for(const w of n)(b=w.container)==null||b.addEventListener("keydown",p(this,hh));p(this,ze).hidden=!0,y&&M(this,be,Ry).call(this)}render(){if(p(this,ws))return;const t=k(this,ws,document.createElement("div"));if(t.className="popup",p(this,ql)){const o=t.style.outlineColor=_t.makeHexColor(...p(this,ql));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=_t.makeHexColor(...p(this,ql).map(u=>Math.floor(.7*(255-u)+u)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=p(this,Tp),t.append(e),p(this,Gl)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),o.setAttribute("data-l10n-args",JSON.stringify({date:p(this,Gl).toLocaleDateString(),time:p(this,Gl).toLocaleTimeString()})),e.append(o)}const a=p(this,be,ky);if(a)kN.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(p(this,ta));t.append(o)}p(this,ze).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let o=0,c=a.length;o<c;++o){const u=a[o];n.append(document.createTextNode(u)),o<c-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;p(this,Xl)||k(this,Xl,{contentsObj:p(this,ta),richText:p(this,ia)}),t&&k(this,na,null),e&&(k(this,ia,M(this,be,ON).call(this,e)),k(this,ta,null)),(n=p(this,ws))==null||n.remove(),k(this,ws,null)}resetEdited(){var t;p(this,Xl)&&({contentsObj:wi(this,ta)._,richText:wi(this,ia)._}=p(this,Xl),k(this,Xl,null),(t=p(this,ws))==null||t.remove(),k(this,ws,null),k(this,na,null))}forceHide(){k(this,$l,this.isVisible),p(this,$l)&&(p(this,ze).hidden=!0)}maybeShow(){p(this,$l)&&(p(this,ws)||M(this,be,My).call(this),k(this,$l,!1),p(this,ze).hidden=!1)}get isVisible(){return p(this,ze).hidden===!1}}hh=new WeakMap,Tv=new WeakMap,kv=new WeakMap,dh=new WeakMap,ql=new WeakMap,ze=new WeakMap,ta=new WeakMap,Gl=new WeakMap,Ep=new WeakMap,Sp=new WeakMap,fh=new WeakMap,ea=new WeakMap,ws=new WeakMap,na=new WeakMap,Cp=new WeakMap,ia=new WeakMap,Tp=new WeakMap,Xl=new WeakMap,$l=new WeakMap,be=new WeakSet,ky=function(){const t=p(this,ia),e=p(this,ta);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&p(this,ia).html||null},fA=function(){var t,e,n;return((n=(e=(t=p(this,be,ky))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},LN=function(){var t,e,n;return((n=(e=(t=p(this,be,ky))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},ON=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:p(this,be,LN),fontSize:p(this,be,fA)?`calc(${p(this,be,fA)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return n},jN=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&p(this,ea))&&M(this,be,Ry).call(this)},PN=function(){if(p(this,na)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:o}}}=p(this,Sp);let c=!!p(this,fh),u=c?p(this,fh):p(this,Cp);for(const A of p(this,Ep))if(!u||_t.intersect(A.data.rect,u)!==null){u=A.data.rect,c=!0;break}const d=_t.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=c?u[2]-u[0]+5:0,y=d[0]+g,b=d[1];k(this,na,[100*(y-a)/e,100*(b-o)/n]);const{style:w}=p(this,ze);w.left=`${p(this,na)[0]}%`,w.top=`${p(this,na)[1]}%`},Ry=function(){k(this,ea,!p(this,ea)),p(this,ea)?(M(this,be,My).call(this),p(this,ze).addEventListener("click",p(this,dh)),p(this,ze).addEventListener("keydown",p(this,hh))):(M(this,be,pA).call(this),p(this,ze).removeEventListener("click",p(this,dh)),p(this,ze).removeEventListener("keydown",p(this,hh)))},My=function(){p(this,ws)||this.render(),this.isVisible?p(this,ea)&&p(this,ze).classList.add("focused"):(M(this,be,PN).call(this),p(this,ze).hidden=!1,p(this,ze).style.zIndex=parseInt(p(this,ze).style.zIndex)+1e3)},pA=function(){p(this,ze).classList.remove("focused"),!(p(this,ea)||!this.isVisible)&&(p(this,ze).hidden=!0,p(this,ze).style.zIndex=parseInt(p(this,ze).style.zIndex)-1e3)};class FN extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Jt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var kp;class h8 extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});N(this,kp,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:a}=ma(e.rect),o=this.svgFactory.create(n,a,!0),c=k(this,kp,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,kp)}addHighlightArea(){this.container.classList.add("highlightArea")}}kp=new WeakMap;var Rp;class d8 extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});N(this,Rp,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:a}=ma(e.rect),o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,u=k(this,Rp,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",n-c),u.setAttribute("height",a-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Rp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rp=new WeakMap;var Mp;class f8 extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});N(this,Mp,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:a}=ma(e.rect),o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,u=k(this,Mp,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",a/2),u.setAttribute("rx",n/2-c/2),u.setAttribute("ry",a/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Mp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mp=new WeakMap;var Np;class zN extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});N(this,Np,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:o}}=this;if(!n)return this.container;const{width:c,height:u}=ma(e),d=this.svgFactory.create(c,u,!0);let f=[];for(let y=0,b=n.length;y<b;y+=2){const w=n[y]-e[0],A=e[3]-n[y+1];f.push(`${w},${A}`)}f=f.join(" ");const g=k(this,Np,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",f),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Np)}addHighlightArea(){this.container.classList.add("highlightArea")}}Np=new WeakMap;class p8 extends zN{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class g8 extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Dp;class IN extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});N(this,Dp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Jt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:a,popupRef:o}}=this,{width:c,height:u}=ma(e),d=this.svgFactory.create(c,u,!0);for(const f of n){let g=[];for(let b=0,w=f.length;b<w;b+=2){const A=f[b]-e[0],E=e[3]-f[b+1];g.push(`${A},${E}`)}g=g.join(" ");const y=this.svgFactory.createElement(this.svgElementName);p(this,Dp).push(y),y.setAttribute("points",g),y.setAttribute("stroke-width",a.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),!o&&this.hasPopupData&&this._createPopup(),d.append(y)}return this.container.append(d),this.container}getElementsToTriggerPopup(){return p(this,Dp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dp=new WeakMap;class m8 extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class y8 extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class v8 extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class b8 extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class BN extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Lp,Op,gA;class w8 extends Ve{constructor(e){var a;super(e,{isRenderable:!0});N(this,Op);N(this,Lp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",M(this,Op,gA).bind(this)),k(this,Lp,a);const{isMac:o}=ci.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&M(this,Op,gA).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return p(this,Lp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lp=new WeakMap,Op=new WeakSet,gA=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var jp,Yl,ph,xc,UN,mA,Gk;let x8=(Gk=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:o,viewport:c}){N(this,xc);N(this,jp,null);N(this,Yl,null);N(this,ph,new Map);this.div=t,k(this,jp,e),k(this,Yl,n),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a}async render(t){var c;const{annotations:e}=t,n=this.div;yc(n,this.viewport);const a=new Map,o={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new D_,annotationStorage:t.annotationStorage||new F_,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===Je.POPUP;if(d){const y=a.get(u.id);if(!y)continue;o.elements=y}else{const{width:y,height:b}=ma(u.rect);if(y<=0||b<=0)continue}o.data=u;const f=i8.create(o);if(!f.isRenderable)continue;if(!d&&u.popupRef){const y=a.get(u.popupRef);y?y.push(f):a.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),M(this,xc,UN).call(this,g,u.id),f.annotationEditorType>0&&(p(this,ph).set(f.data.id,f),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(f))}M(this,xc,mA).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,yc(e,{rotation:t.rotation}),M(this,xc,mA).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(p(this,ph).values())}getEditableAnnotation(t){return p(this,ph).get(t)}},jp=new WeakMap,Yl=new WeakMap,ph=new WeakMap,xc=new WeakSet,UN=function(t,e){var a;const n=t.firstChild||t;n.id=`${LM}${e}`,this.div.append(t),(a=p(this,jp))==null||a.moveElementInDOM(this.div,t,n,!1)},mA=function(){if(!p(this,Yl))return;const t=this.div;for(const[e,n]of p(this,Yl)){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;n.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):a.append(n)}p(this,Yl).clear()},Gk);const iy=/\r\n?|\n/g;var Pp,Fp,zp,Ip,Bp,xs,ki,Up,Ri,gh,We,HN,VN,qN,Ny,va,Dy,Ly,GN,vA,XN;const Ee=class Ee extends fe{constructor(e){super({...e,name:"freeTextEditor"});N(this,We);N(this,Pp,this.editorDivBlur.bind(this));N(this,Fp,this.editorDivFocus.bind(this));N(this,zp,this.editorDivInput.bind(this));N(this,Ip,this.editorDivKeydown.bind(this));N(this,Bp,this.editorDivPaste.bind(this));N(this,xs);N(this,ki,"");N(this,Up,`${this.id}-editor`);N(this,Ri);N(this,gh,null);k(this,xs,e.color||Ee._defaultColor||fe._defaultLineColor),k(this,Ri,e.fontSize||Ee._defaultFontSize)}static get _keyboardManager(){const e=Ee.prototype,n=c=>c.isEmpty(),a=vc.TRANSLATE_SMALL,o=vc.TRANSLATE_BIG;return ee(this,"_keyboardManager",new wg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){fe.initialize(e,n,{strings:["pdfjs-free-text-default-content"]});const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Mt.FREETEXT_SIZE:Ee._defaultFontSize=n;break;case Mt.FREETEXT_COLOR:Ee._defaultColor=n;break}}updateParams(e,n){switch(e){case Mt.FREETEXT_SIZE:M(this,We,HN).call(this,n);break;case Mt.FREETEXT_COLOR:M(this,We,VN).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,Ee._defaultFontSize],[Mt.FREETEXT_COLOR,Ee._defaultColor||fe._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,p(this,Ri)],[Mt.FREETEXT_COLOR,p(this,xs)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ee._internalPadding*e,-(Ee._internalPadding+p(this,Ri))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Jt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",p(this,Ip),{signal:e}),this.editorDiv.addEventListener("focus",p(this,Fp),{signal:e}),this.editorDiv.addEventListener("blur",p(this,Pp),{signal:e}),this.editorDiv.addEventListener("input",p(this,zp),{signal:e}),this.editorDiv.addEventListener("paste",p(this,Bp),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",p(this,Up)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",p(this,Ip)),this.editorDiv.removeEventListener("focus",p(this,Fp)),this.editorDiv.removeEventListener("blur",p(this,Pp)),this.editorDiv.removeEventListener("input",p(this,zp)),this.editorDiv.removeEventListener("paste",p(this,Bp)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=p(this,ki),n=k(this,ki,M(this,We,qN).call(this).trimEnd());if(e===n)return;const a=o=>{if(k(this,ki,o),!o){this.remove();return}M(this,We,Ly).call(this),this._uiManager.rebuild(this),M(this,We,Ny).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),M(this,We,Ny).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ee._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",p(this,Up)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),fe._l10nPromise.get("pdfjs-free-text-default-content").then(o=>{var c;return(c=this.editorDiv)==null?void 0:c.setAttribute("default-content",o)}),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${p(this,Ri)}px * var(--scale-factor))`,a.color=p(this,xs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),av(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=p(this,gh);let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[g,y]=this.pageDimensions,[b,w]=this.pageTranslation;let A,E;switch(this.rotation){case 0:A=e+(u[0]-b)/g,E=n+this.height-(u[1]-w)/y;break;case 90:A=e+(u[0]-b)/g,E=n-(u[1]-w)/y,[d,f]=[f,-d];break;case 180:A=e-this.width+(u[0]-b)/g,E=n-(u[1]-w)/y,[d,f]=[-d,-f];break;case 270:A=e+(u[0]-b-this.height*y)/g,E=n+(u[1]-w-this.width*g)/y,[d,f]=[-f,d];break}this.setAt(A*o,E*c,d,f)}else this.setAt(e*o,n*c,this.width*o,this.height*c);M(this,We,Ly).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var A,E,T;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const o=M(A=Ee,va,vA).call(A,n.getData("text")||"").replaceAll(iy,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:d,startOffset:f}=u,g=[],y=[];if(d.nodeType===Node.TEXT_NODE){const C=d.parentElement;if(y.push(d.nodeValue.slice(f).replaceAll(iy,"")),C!==this.editorDiv){let D=g;for(const L of this.editorDiv.childNodes){if(L===C){D=y;continue}D.push(M(E=Ee,va,Dy).call(E,L))}}g.push(d.nodeValue.slice(0,f).replaceAll(iy,""))}else if(d===this.editorDiv){let C=g,D=0;for(const L of this.editorDiv.childNodes)D++===f&&(C=y),C.push(M(T=Ee,va,Dy).call(T,L))}k(this,ki,`${g.join(`
`)}${o}${y.join(`
`)}`),M(this,We,Ly).call(this);const b=new Range;let w=g.reduce((C,D)=>C+D.length,0);for(const{firstChild:C}of this.editorDiv.childNodes)if(C.nodeType===Node.TEXT_NODE){const D=C.nodeValue.length;if(w<=D){b.setStart(C,w),b.setEnd(C,w);break}w-=D}c.removeAllRanges(),c.addRange(b)}get contentDiv(){return this.editorDiv}static deserialize(e,n,a){var u;let o=null;if(e instanceof FN){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:g,rotation:y,id:b},textContent:w,textPosition:A,parent:{page:{pageNumber:E}}}=e;if(!w||w.length===0)return null;o=e={annotationType:Jt.FREETEXT,color:Array.from(f),fontSize:d,value:w.join(`
`),position:A,pageIndex:E-1,rect:g.slice(0),rotation:y,id:b,deleted:!1}}const c=super.deserialize(e,n,a);return k(c,Ri,e.fontSize),k(c,xs,_t.makeHexColor(...e.color)),k(c,ki,M(u=Ee,va,vA).call(u,e.value)),c.annotationElementId=e.id||null,k(c,gh,o),c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=Ee._internalPadding*this.parentScale,a=this.getRect(n,n),o=fe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:p(this,xs)),c={annotationType:Jt.FREETEXT,color:o,fontSize:p(this,Ri),value:M(this,We,GN).call(this),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!M(this,We,XN).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:a}=n;a.fontSize=`calc(${p(this,Ri)}px * var(--scale-factor))`,a.color=p(this,xs),n.replaceChildren();for(const c of p(this,ki).split(`
`)){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),n.append(u)}const o=Ee._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:p(this,ki)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Pp=new WeakMap,Fp=new WeakMap,zp=new WeakMap,Ip=new WeakMap,Bp=new WeakMap,xs=new WeakMap,ki=new WeakMap,Up=new WeakMap,Ri=new WeakMap,gh=new WeakMap,We=new WeakSet,HN=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-p(this,Ri))*this.parentScale),k(this,Ri,o),M(this,We,Ny).call(this)},a=p(this,Ri);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},VN=function(e){const n=o=>{k(this,xs,this.editorDiv.style.color=o)},a=p(this,xs);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},qN=function(){var n;const e=[];this.editorDiv.normalize();for(const a of this.editorDiv.childNodes)e.push(M(n=Ee,va,Dy).call(n,a));return e.join(`
`)},Ny=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,u=c.style.display,d=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),a=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},va=new WeakSet,Dy=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(iy,"")},Ly=function(){if(this.editorDiv.replaceChildren(),!!p(this,ki))for(const e of p(this,ki).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},GN=function(){return p(this,ki).replaceAll(""," ")},vA=function(e){return e.replaceAll(" ","")},XN=function(e){const{value:n,fontSize:a,color:o,pageIndex:c}=p(this,gh);return this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((u,d)=>u!==o[d])||e.pageIndex!==c},N(Ee,va),Nt(Ee,"_freeTextDefaultContent",""),Nt(Ee,"_internalPadding",0),Nt(Ee,"_defaultColor",null),Nt(Ee,"_defaultFontSize",10),Nt(Ee,"_type","freetext"),Nt(Ee,"_editorType",Jt.FREETEXT);let yA=Ee;var Hp,vo,As,Qn,$N,Oy,YN,KN,wA;class bA{constructor(t,e=0,n=0,a=!0){N(this,Qn);N(this,Hp);N(this,vo,[]);N(this,As,[]);let o=1/0,c=-1/0,u=1/0,d=-1/0;const f=10**-4;for(const{x:T,y:C,width:D,height:L}of t){const z=Math.floor((T-e)/f)*f,B=Math.ceil((T+D+e)/f)*f,U=Math.floor((C-e)/f)*f,O=Math.ceil((C+L+e)/f)*f,H=[z,U,O,!0],W=[B,U,O,!1];p(this,vo).push(H,W),o=Math.min(o,z),c=Math.max(c,B),u=Math.min(u,U),d=Math.max(d,O)}const g=c-o+2*n,y=d-u+2*n,b=o-n,w=u-n,A=p(this,vo).at(a?-1:-2),E=[A[0],A[2]];for(const T of p(this,vo)){const[C,D,L]=T;T[0]=(C-b)/g,T[1]=(D-w)/y,T[2]=(L-w)/y}k(this,Hp,{x:b,y:w,width:g,height:y,lastPoint:E})}getOutlines(){p(this,vo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of p(this,vo))e[3]?(t.push(...M(this,Qn,wA).call(this,e)),M(this,Qn,YN).call(this,e)):(M(this,Qn,KN).call(this,e),t.push(...M(this,Qn,wA).call(this,e)));return M(this,Qn,$N).call(this,t)}}Hp=new WeakMap,vo=new WeakMap,As=new WeakMap,Qn=new WeakSet,$N=function(t){const e=[],n=new Set;for(const c of t){const[u,d,f]=c;e.push([u,d,c],[u,f,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const a=[];let o;for(;n.size>0;){const c=n.values().next().value;let[u,d,f,g,y]=c;n.delete(c);let b=u,w=d;for(o=[u,f],a.push(o);;){let A;if(n.has(g))A=g;else if(n.has(y))A=y;else break;n.delete(A),[u,d,f,g,y]=A,b!==u&&(o.push(b,w,u,w===d?d:f),b=u),w=w===d?f:d}o.push(b,w)}return new A8(a,p(this,Hp))},Oy=function(t){const e=p(this,As);let n=0,a=e.length-1;for(;n<=a;){const o=n+a>>1,c=e[o][0];if(c===t)return o;c<t?n=o+1:a=o-1}return a+1},YN=function([,t,e]){const n=M(this,Qn,Oy).call(this,t);p(this,As).splice(n,0,[t,e])},KN=function([,t,e]){const n=M(this,Qn,Oy).call(this,t);for(let a=n;a<p(this,As).length;a++){const[o,c]=p(this,As)[a];if(o!==t)break;if(o===t&&c===e){p(this,As).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[o,c]=p(this,As)[a];if(o!==t)break;if(o===t&&c===e){p(this,As).splice(a,1);return}}},wA=function(t){const[e,n,a]=t,o=[[e,n,a]],c=M(this,Qn,Oy).call(this,a);for(let u=0;u<c;u++){const[d,f]=p(this,As)[u];for(let g=0,y=o.length;g<y;g++){const[,b,w]=o[g];if(!(f<=b||w<=d)){if(b>=d){if(w>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,w>f&&o.push([e,f,w])}}}return o};class WN{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof AA}}var Vp,mh;class A8 extends WN{constructor(e,n){super();N(this,Vp);N(this,mh);k(this,mh,e),k(this,Vp,n)}toSVGPath(){const e=[];for(const n of p(this,mh)){let[a,o]=n;e.push(`M${a} ${o}`);for(let c=2;c<n.length;c+=2){const u=n[c],d=n[c+1];u===a?(e.push(`V${d}`),o=d):d===o&&(e.push(`H${u}`),a=u)}e.push("Z")}return e.join(" ")}serialize([e,n,a,o],c){const u=[],d=a-e,f=o-n;for(const g of p(this,mh)){const y=new Array(g.length);for(let b=0;b<g.length;b+=2)y[b]=e+g[b]*d,y[b+1]=o-g[b+1]*f;u.push(y)}return u}get box(){return p(this,Vp)}}Vp=new WeakMap,mh=new WeakMap;var Ks,sa,yh,vh,Ws,Wt,Kl,Wl,qp,Gp,bh,wh,bo,Xp,Rv,Mv,$p,xA;const Br=class Br{constructor({x:t,y:e},n,a,o,c,u=0){N(this,$p);N(this,Ks);N(this,sa,[]);N(this,yh);N(this,vh);N(this,Ws,[]);N(this,Wt,new Float64Array(18));N(this,Kl);N(this,Wl);N(this,qp);N(this,Gp);N(this,bh);N(this,wh);N(this,bo,[]);k(this,Ks,n),k(this,wh,o*a),k(this,vh,c),p(this,Wt).set([NaN,NaN,NaN,NaN,t,e],6),k(this,yh,u),k(this,Gp,p(Br,Xp)*a),k(this,qp,p(Br,Mv)*a),k(this,bh,a),p(this,bo).push(t,e)}get free(){return!0}isEmpty(){return isNaN(p(this,Wt)[8])}add({x:t,y:e}){var W;k(this,Kl,t),k(this,Wl,e);const[n,a,o,c]=p(this,Ks);let[u,d,f,g]=p(this,Wt).subarray(8,12);const y=t-f,b=e-g,w=Math.hypot(y,b);if(w<p(this,qp))return!1;const A=w-p(this,Gp),E=A/w,T=E*y,C=E*b;let D=u,L=d;u=f,d=g,f+=T,g+=C,(W=p(this,bo))==null||W.push(t,e);const z=-C/A,B=T/A,U=z*p(this,wh),O=B*p(this,wh);return p(this,Wt).set(p(this,Wt).subarray(2,8),0),p(this,Wt).set([f+U,g+O],4),p(this,Wt).set(p(this,Wt).subarray(14,18),12),p(this,Wt).set([f-U,g-O],16),isNaN(p(this,Wt)[6])?(p(this,Ws).length===0&&(p(this,Wt).set([u+U,d+O],2),p(this,Ws).push(NaN,NaN,NaN,NaN,(u+U-n)/o,(d+O-a)/c),p(this,Wt).set([u-U,d-O],14),p(this,sa).push(NaN,NaN,NaN,NaN,(u-U-n)/o,(d-O-a)/c)),p(this,Wt).set([D,L,u,d,f,g],6),!this.isEmpty()):(p(this,Wt).set([D,L,u,d,f,g],6),Math.abs(Math.atan2(L-d,D-u)-Math.atan2(C,T))<Math.PI/2?([u,d,f,g]=p(this,Wt).subarray(2,6),p(this,Ws).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((d+g)/2-a)/c),[u,d,D,L]=p(this,Wt).subarray(14,18),p(this,sa).push(NaN,NaN,NaN,NaN,((D+u)/2-n)/o,((L+d)/2-a)/c),!0):([D,L,u,d,f,g]=p(this,Wt).subarray(0,6),p(this,Ws).push(((D+5*u)/6-n)/o,((L+5*d)/6-a)/c,((5*u+f)/6-n)/o,((5*d+g)/6-a)/c,((u+f)/2-n)/o,((d+g)/2-a)/c),[f,g,u,d,D,L]=p(this,Wt).subarray(12,18),p(this,sa).push(((D+5*u)/6-n)/o,((L+5*d)/6-a)/c,((5*u+f)/6-n)/o,((5*d+g)/6-a)/c,((u+f)/2-n)/o,((d+g)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=p(this,Ws),e=p(this,sa),n=p(this,Wt).subarray(4,6),a=p(this,Wt).subarray(16,18),[o,c,u,d]=p(this,Ks),[f,g,y,b]=M(this,$p,xA).call(this);if(isNaN(p(this,Wt)[6])&&!this.isEmpty())return`M${(p(this,Wt)[2]-o)/u} ${(p(this,Wt)[3]-c)/d} L${(p(this,Wt)[4]-o)/u} ${(p(this,Wt)[5]-c)/d} L${f} ${g} L${y} ${b} L${(p(this,Wt)[16]-o)/u} ${(p(this,Wt)[17]-c)/d} L${(p(this,Wt)[14]-o)/u} ${(p(this,Wt)[15]-c)/d} Z`;const w=[];w.push(`M${t[4]} ${t[5]}`);for(let A=6;A<t.length;A+=6)isNaN(t[A])?w.push(`L${t[A+4]} ${t[A+5]}`):w.push(`C${t[A]} ${t[A+1]} ${t[A+2]} ${t[A+3]} ${t[A+4]} ${t[A+5]}`);w.push(`L${(n[0]-o)/u} ${(n[1]-c)/d} L${f} ${g} L${y} ${b} L${(a[0]-o)/u} ${(a[1]-c)/d}`);for(let A=e.length-6;A>=6;A-=6)isNaN(e[A])?w.push(`L${e[A+4]} ${e[A+5]}`):w.push(`C${e[A]} ${e[A+1]} ${e[A+2]} ${e[A+3]} ${e[A+4]} ${e[A+5]}`);return w.push(`L${e[4]} ${e[5]} Z`),w.join(" ")}getOutlines(){var C;const t=p(this,Ws),e=p(this,sa),n=p(this,Wt),a=n.subarray(4,6),o=n.subarray(16,18),[c,u,d,f]=p(this,Ks),g=new Float64Array((((C=p(this,bo))==null?void 0:C.length)??0)+2);for(let D=0,L=g.length-2;D<L;D+=2)g[D]=(p(this,bo)[D]-c)/d,g[D+1]=(p(this,bo)[D+1]-u)/f;g[g.length-2]=(p(this,Kl)-c)/d,g[g.length-1]=(p(this,Wl)-u)/f;const[y,b,w,A]=M(this,$p,xA).call(this);if(isNaN(n[6])&&!this.isEmpty()){const D=new Float64Array(36);return D.set([NaN,NaN,NaN,NaN,(n[2]-c)/d,(n[3]-u)/f,NaN,NaN,NaN,NaN,(n[4]-c)/d,(n[5]-u)/f,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,w,A,NaN,NaN,NaN,NaN,(n[16]-c)/d,(n[17]-u)/f,NaN,NaN,NaN,NaN,(n[14]-c)/d,(n[15]-u)/f],0),new AA(D,g,p(this,Ks),p(this,bh),p(this,yh),p(this,vh))}const E=new Float64Array(p(this,Ws).length+24+p(this,sa).length);let T=t.length;for(let D=0;D<T;D+=2){if(isNaN(t[D])){E[D]=E[D+1]=NaN;continue}E[D]=t[D],E[D+1]=t[D+1]}E.set([NaN,NaN,NaN,NaN,(a[0]-c)/d,(a[1]-u)/f,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,w,A,NaN,NaN,NaN,NaN,(o[0]-c)/d,(o[1]-u)/f],T),T+=24;for(let D=e.length-6;D>=6;D-=6)for(let L=0;L<6;L+=2){if(isNaN(e[D+L])){E[T]=E[T+1]=NaN,T+=2;continue}E[T]=e[D+L],E[T+1]=e[D+L+1],T+=2}return E.set([NaN,NaN,NaN,NaN,e[4],e[5]],T),new AA(E,g,p(this,Ks),p(this,bh),p(this,yh),p(this,vh))}};Ks=new WeakMap,sa=new WeakMap,yh=new WeakMap,vh=new WeakMap,Ws=new WeakMap,Wt=new WeakMap,Kl=new WeakMap,Wl=new WeakMap,qp=new WeakMap,Gp=new WeakMap,bh=new WeakMap,wh=new WeakMap,bo=new WeakMap,Xp=new WeakMap,Rv=new WeakMap,Mv=new WeakMap,$p=new WeakSet,xA=function(){const t=p(this,Wt).subarray(4,6),e=p(this,Wt).subarray(16,18),[n,a,o,c]=p(this,Ks);return[(p(this,Kl)+(t[0]-e[0])/2-n)/o,(p(this,Wl)+(t[1]-e[1])/2-a)/c,(p(this,Kl)+(e[0]-t[0])/2-n)/o,(p(this,Wl)+(e[1]-t[1])/2-a)/c]},N(Br,Xp,8),N(Br,Rv,2),N(Br,Mv,p(Br,Xp)+p(Br,Rv));let uv=Br;var xh,Ql,ra,Yp,Mi,Kp,He,ui,lf,cf,QN;class AA extends WN{constructor(e,n,a,o,c,u){super();N(this,ui);N(this,xh);N(this,Ql,null);N(this,ra);N(this,Yp);N(this,Mi);N(this,Kp);N(this,He);k(this,He,e),k(this,Mi,n),k(this,xh,a),k(this,Kp,o),k(this,ra,c),k(this,Yp,u),M(this,ui,QN).call(this,u);const{x:d,y:f,width:g,height:y}=p(this,Ql);for(let b=0,w=e.length;b<w;b+=2)e[b]=(e[b]-d)/g,e[b+1]=(e[b+1]-f)/y;for(let b=0,w=n.length;b<w;b+=2)n[b]=(n[b]-d)/g,n[b+1]=(n[b+1]-f)/y}toSVGPath(){const e=[`M${p(this,He)[4]} ${p(this,He)[5]}`];for(let n=6,a=p(this,He).length;n<a;n+=6){if(isNaN(p(this,He)[n])){e.push(`L${p(this,He)[n+4]} ${p(this,He)[n+5]}`);continue}e.push(`C${p(this,He)[n]} ${p(this,He)[n+1]} ${p(this,He)[n+2]} ${p(this,He)[n+3]} ${p(this,He)[n+4]} ${p(this,He)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,o],c){const u=a-e,d=o-n;let f,g;switch(c){case 0:f=M(this,ui,lf).call(this,p(this,He),e,o,u,-d),g=M(this,ui,lf).call(this,p(this,Mi),e,o,u,-d);break;case 90:f=M(this,ui,cf).call(this,p(this,He),e,n,u,d),g=M(this,ui,cf).call(this,p(this,Mi),e,n,u,d);break;case 180:f=M(this,ui,lf).call(this,p(this,He),a,n,-u,d),g=M(this,ui,lf).call(this,p(this,Mi),a,n,-u,d);break;case 270:f=M(this,ui,cf).call(this,p(this,He),a,o,-u,-d),g=M(this,ui,cf).call(this,p(this,Mi),a,o,-u,-d);break}return{outline:Array.from(f),points:[Array.from(g)]}}get box(){return p(this,Ql)}getNewOutline(e,n){const{x:a,y:o,width:c,height:u}=p(this,Ql),[d,f,g,y]=p(this,xh),b=c*g,w=u*y,A=a*g+d,E=o*y+f,T=new uv({x:p(this,Mi)[0]*b+A,y:p(this,Mi)[1]*w+E},p(this,xh),p(this,Kp),e,p(this,Yp),n??p(this,ra));for(let C=2;C<p(this,Mi).length;C+=2)T.add({x:p(this,Mi)[C]*b+A,y:p(this,Mi)[C+1]*w+E});return T.getOutlines()}}xh=new WeakMap,Ql=new WeakMap,ra=new WeakMap,Yp=new WeakMap,Mi=new WeakMap,Kp=new WeakMap,He=new WeakMap,ui=new WeakSet,lf=function(e,n,a,o,c){const u=new Float64Array(e.length);for(let d=0,f=e.length;d<f;d+=2)u[d]=n+e[d]*o,u[d+1]=a+e[d+1]*c;return u},cf=function(e,n,a,o,c){const u=new Float64Array(e.length);for(let d=0,f=e.length;d<f;d+=2)u[d]=n+e[d+1]*o,u[d+1]=a+e[d]*c;return u},QN=function(e){const n=p(this,He);let a=n[4],o=n[5],c=a,u=o,d=a,f=o,g=a,y=o;const b=e?Math.max:Math.min;for(let C=6,D=n.length;C<D;C+=6){if(isNaN(n[C]))c=Math.min(c,n[C+4]),u=Math.min(u,n[C+5]),d=Math.max(d,n[C+4]),f=Math.max(f,n[C+5]),y<n[C+5]?(g=n[C+4],y=n[C+5]):y===n[C+5]&&(g=b(g,n[C+4]));else{const L=_t.bezierBoundingBox(a,o,...n.slice(C,C+6));c=Math.min(c,L[0]),u=Math.min(u,L[1]),d=Math.max(d,L[2]),f=Math.max(f,L[3]),y<L[3]?(g=L[2],y=L[3]):y===L[3]&&(g=b(g,L[2]))}a=n[C+4],o=n[C+5]}const w=c-p(this,ra),A=u-p(this,ra),E=d-c+2*p(this,ra),T=f-u+2*p(this,ra);k(this,Ql,{x:w,y:A,width:E,height:T,lastPoint:[g,y]})};var Wp,Qp,_s,Zl,Ah,en,Zp,_h,Jp,tg,Es,Eh,_e,_A,EA,ZN,hl,JN,no;const Ur=class Ur{constructor({editor:t=null,uiManager:e=null}){N(this,_e);N(this,Wp,M(this,_e,ZN).bind(this));N(this,Qp,M(this,_e,JN).bind(this));N(this,_s,null);N(this,Zl,null);N(this,Ah);N(this,en,null);N(this,Zp,!1);N(this,_h,!1);N(this,Jp,null);N(this,tg);N(this,Es,null);N(this,Eh);var n;t?(k(this,_h,!1),k(this,Eh,Mt.HIGHLIGHT_COLOR),k(this,Jp,t)):(k(this,_h,!0),k(this,Eh,Mt.HIGHLIGHT_DEFAULT_COLOR)),k(this,Es,(t==null?void 0:t._uiManager)||e),k(this,tg,p(this,Es)._eventBus),k(this,Ah,(t==null?void 0:t.color)||((n=p(this,Es))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return ee(this,"_keyboardManager",new wg([[["Escape","mac+Escape"],Ur.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ur.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ur.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ur.prototype._moveToPrevious],[["Home","mac+Home"],Ur.prototype._moveToBeginning],[["End","mac+End"],Ur.prototype._moveToEnd]]))}renderButton(){const t=k(this,_s,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=p(this,Es)._signal;t.addEventListener("click",M(this,_e,hl).bind(this),{signal:e}),t.addEventListener("keydown",p(this,Wp),{signal:e});const n=k(this,Zl,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=p(this,Ah),t.append(n),t}renderMainDropdown(){const t=k(this,en,M(this,_e,_A).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===p(this,_s)){M(this,_e,hl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&M(this,_e,EA).call(this,e,t)}_moveToNext(t){var e,n;if(!p(this,_e,no)){M(this,_e,hl).call(this,t);return}if(t.target===p(this,_s)){(e=p(this,en).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=p(this,en))==null?void 0:e.firstChild)||t.target===p(this,_s)){p(this,_e,no)&&this._hideDropdownFromKeyboard();return}p(this,_e,no)||M(this,_e,hl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!p(this,_e,no)){M(this,_e,hl).call(this,t);return}(e=p(this,en).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!p(this,_e,no)){M(this,_e,hl).call(this,t);return}(e=p(this,en).lastChild)==null||e.focus()}hideDropdown(){var t;(t=p(this,en))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",p(this,Qp))}_hideDropdownFromKeyboard(){var t;if(!p(this,_h)){if(!p(this,_e,no)){(t=p(this,Jp))==null||t.unselect();return}this.hideDropdown(),p(this,_s).focus({preventScroll:!0,focusVisible:p(this,Zp)})}}updateColor(t){if(p(this,Zl)&&(p(this,Zl).style.backgroundColor=t),!p(this,en))return;const e=p(this,Es).highlightColors.values();for(const n of p(this,en).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=p(this,_s))==null||t.remove(),k(this,_s,null),k(this,Zl,null),(e=p(this,en))==null||e.remove(),k(this,en,null)}};Wp=new WeakMap,Qp=new WeakMap,_s=new WeakMap,Zl=new WeakMap,Ah=new WeakMap,en=new WeakMap,Zp=new WeakMap,_h=new WeakMap,Jp=new WeakMap,tg=new WeakMap,Es=new WeakMap,Eh=new WeakMap,_e=new WeakSet,_A=function(){const t=document.createElement("div"),e=p(this,Es)._signal;t.addEventListener("contextmenu",hi,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,a]of p(this,Es).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=n,o.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${n}`);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.setAttribute("aria-selected",a===p(this,Ah)),o.addEventListener("click",M(this,_e,EA).bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",p(this,Wp),{signal:e}),t},EA=function(t,e){e.stopPropagation(),p(this,tg).dispatch("switchannotationeditorparams",{source:this,type:p(this,Eh),value:t})},ZN=function(t){Ur._keyboardManager.exec(this,t)},hl=function(t){if(p(this,_e,no)){this.hideDropdown();return}if(k(this,Zp,t.detail===0),window.addEventListener("pointerdown",p(this,Qp),{signal:p(this,Es)._signal}),p(this,en)){p(this,en).classList.remove("hidden");return}const e=k(this,en,M(this,_e,_A).call(this));p(this,_s).append(e)},JN=function(t){var e;(e=p(this,en))!=null&&e.contains(t.target)||this.hideDropdown()},no=function(){return p(this,en)&&!p(this,en).classList.contains("hidden")};let hv=Ur;var Sh,eg,wo,Jl,Ch,Qi,ng,ig,tc,Ss,$n,Ni,Nv,Th,ec,nn,kh,Qs,sg,qt,SA,CA,tD,eD,nD,TA,uf,ss,Su,iD,jy,hf,sD,rD,aD,oD;const oe=class oe extends fe{constructor(e){super({...e,name:"highlightEditor"});N(this,qt);N(this,Sh,null);N(this,eg,0);N(this,wo);N(this,Jl,null);N(this,Ch,null);N(this,Qi,null);N(this,ng,null);N(this,ig,0);N(this,tc,null);N(this,Ss,null);N(this,$n,null);N(this,Ni,!1);N(this,Nv,M(this,qt,iD).bind(this));N(this,Th,null);N(this,ec);N(this,nn,null);N(this,kh,"");N(this,Qs);N(this,sg,"");this.color=e.color||oe._defaultColor,k(this,Qs,e.thickness||oe._defaultThickness),k(this,ec,e.opacity||oe._defaultOpacity),k(this,wo,e.boxes||null),k(this,sg,e.methodOfCreation||""),k(this,kh,e.text||""),this._isDraggable=!1,e.highlightId>-1?(k(this,Ni,!0),M(this,qt,CA).call(this,e),M(this,qt,uf).call(this)):(k(this,Sh,e.anchorNode),k(this,eg,e.anchorOffset),k(this,ng,e.focusNode),k(this,ig,e.focusOffset),M(this,qt,SA).call(this),M(this,qt,uf).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=oe.prototype;return ee(this,"_keyboardManager",new wg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:p(this,Ni)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:p(this,Qs),methodOfCreation:p(this,sg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;fe.initialize(e,n),oe._defaultColor||(oe._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Mt.HIGHLIGHT_DEFAULT_COLOR:oe._defaultColor=n;break;case Mt.HIGHLIGHT_THICKNESS:oe._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return p(this,Th)}updateParams(e,n){switch(e){case Mt.HIGHLIGHT_COLOR:M(this,qt,tD).call(this,n);break;case Mt.HIGHLIGHT_THICKNESS:M(this,qt,eD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_DEFAULT_COLOR,oe._defaultColor],[Mt.HIGHLIGHT_THICKNESS,oe._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||oe._defaultColor],[Mt.HIGHLIGHT_THICKNESS,p(this,Qs)||oe._defaultThickness],[Mt.HIGHLIGHT_FREE,p(this,Ni)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(k(this,Ch,new hv({editor:this})),e.addColorPicker(p(this,Ch))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(M(this,qt,hf).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,M(this,qt,hf).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){M(this,qt,TA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(M(this,qt,uf).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?M(this,qt,TA).call(this):e&&(M(this,qt,uf).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,c,u;const{drawLayer:n}=this.parent;let a;p(this,Ni)?(e=(e-this.rotation+360)%360,a=M(o=oe,ss,Su).call(o,p(this,Ss).box,e)):a=M(c=oe,ss,Su).call(c,this,e),n.rotate(p(this,$n),e),n.rotate(p(this,nn),e),n.updateBox(p(this,$n),a),n.updateBox(p(this,nn),M(u=oe,ss,Su).call(u,p(this,Qi).box,e))}render(){if(this.div)return this.div;const e=super.render();p(this,kh)&&(e.setAttribute("aria-label",p(this,kh)),e.setAttribute("role","mark")),p(this,Ni)?e.classList.add("free"):this.div.addEventListener("keydown",p(this,Nv),{signal:this._uiManager._signal});const n=k(this,tc,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=p(this,Jl);const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),av(this,p(this,tc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(p(this,nn),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(p(this,nn),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:M(this,qt,jy).call(this,!0);break;case 1:case 3:M(this,qt,jy).call(this,!1);break}}select(){var e,n;super.select(),p(this,nn)&&((e=this.parent)==null||e.drawLayer.removeClass(p(this,nn),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(p(this,nn),"selected"))}unselect(){var e;super.unselect(),p(this,nn)&&((e=this.parent)==null||e.drawLayer.removeClass(p(this,nn),"selected"),p(this,Ni)||M(this,qt,jy).call(this,!1))}get _mustFixPosition(){return!p(this,Ni)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(p(this,$n),e),this.parent.drawLayer.show(p(this,nn),e))}static startHighlighting(e,n,{target:a,x:o,y:c}){const{x:u,y:d,width:f,height:g}=a.getBoundingClientRect(),y=T=>{M(this,ss,aD).call(this,e,T)},b=e._signal,w={capture:!0,passive:!1,signal:b},A=T=>{T.preventDefault(),T.stopPropagation()},E=T=>{a.removeEventListener("pointermove",y),window.removeEventListener("blur",E),window.removeEventListener("pointerup",E),window.removeEventListener("pointerdown",A,w),window.removeEventListener("contextmenu",hi),M(this,ss,oD).call(this,e,T)};window.addEventListener("blur",E,{signal:b}),window.addEventListener("pointerup",E,{signal:b}),window.addEventListener("pointerdown",A,w),window.addEventListener("contextmenu",hi,{signal:b}),a.addEventListener("pointermove",y,{signal:b}),this._freeHighlight=new uv({x:o,y:c},[u,d,f,g],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,n,a){var E;const o=super.deserialize(e,n,a),{rect:[c,u,d,f],color:g,quadPoints:y}=e;o.color=_t.makeHexColor(...g),k(o,ec,e.opacity);const[b,w]=o.pageDimensions;o.width=(d-c)/b,o.height=(f-u)/w;const A=k(o,wo,[]);for(let T=0;T<y.length;T+=8)A.push({x:(y[4]-d)/b,y:(f-(1-y[T+5]))/w,width:(y[T+2]-y[T])/b,height:(y[T+5]-y[T+1])/w});return M(E=o,qt,SA).call(E),o}serialize(e=!1){if(this.isEmpty()||e)return null;const n=this.getRect(0,0),a=fe._colorManager.convert(this.color);return{annotationType:Jt.HIGHLIGHT,color:a,opacity:p(this,ec),thickness:p(this,Qs),quadPoints:M(this,qt,sD).call(this),outlines:M(this,qt,rD).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:M(this,qt,hf).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Sh=new WeakMap,eg=new WeakMap,wo=new WeakMap,Jl=new WeakMap,Ch=new WeakMap,Qi=new WeakMap,ng=new WeakMap,ig=new WeakMap,tc=new WeakMap,Ss=new WeakMap,$n=new WeakMap,Ni=new WeakMap,Nv=new WeakMap,Th=new WeakMap,ec=new WeakMap,nn=new WeakMap,kh=new WeakMap,Qs=new WeakMap,sg=new WeakMap,qt=new WeakSet,SA=function(){const e=new bA(p(this,wo),.001);k(this,Ss,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=p(this,Ss).box;const n=new bA(p(this,wo),.0025,.001,this._uiManager.direction==="ltr");k(this,Qi,n.getOutlines());const{lastPoint:a}=p(this,Qi).box;k(this,Th,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},CA=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var y,b;if(k(this,Ss,e),k(this,Qi,e.getNewOutline(p(this,Qs)/2+1.5,.0025)),n>=0)k(this,$n,n),k(this,Jl,a),this.parent.drawLayer.finalizeLine(n,e),k(this,nn,this.parent.drawLayer.highlightOutline(p(this,Qi)));else if(this.parent){const w=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(p(this,$n),e),this.parent.drawLayer.updateBox(p(this,$n),M(y=oe,ss,Su).call(y,p(this,Ss).box,(w-this.rotation+360)%360)),this.parent.drawLayer.updateLine(p(this,nn),p(this,Qi)),this.parent.drawLayer.updateBox(p(this,nn),M(b=oe,ss,Su).call(b,p(this,Qi).box,w))}const{x:c,y:u,width:d,height:f}=e.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=d,this.height=f;break;case 90:{const[w,A]=this.parentDimensions;this.x=u,this.y=1-c,this.width=d*A/w,this.height=f*w/A;break}case 180:this.x=1-c,this.y=1-u,this.width=d,this.height=f;break;case 270:{const[w,A]=this.parentDimensions;this.x=1-u,this.y=c,this.width=d*A/w,this.height=f*w/A;break}}const{lastPoint:g}=p(this,Qi).box;k(this,Th,[(g[0]-c)/d,(g[1]-u)/f])},tD=function(e){const n=o=>{var c,u;this.color=o,(c=this.parent)==null||c.drawLayer.changeColor(p(this,$n),o),(u=p(this,Ch))==null||u.updateColor(o)},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},eD=function(e){const n=p(this,Qs),a=o=>{k(this,Qs,o),M(this,qt,nD).call(this,o)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},nD=function(e){if(!p(this,Ni))return;M(this,qt,CA).call(this,{highlightOutlines:p(this,Ss).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)},TA=function(){p(this,$n)===null||!this.parent||(this.parent.drawLayer.remove(p(this,$n)),k(this,$n,null),this.parent.drawLayer.remove(p(this,nn)),k(this,nn,null))},uf=function(e=this.parent){p(this,$n)===null&&({id:wi(this,$n)._,clipPathId:wi(this,Jl)._}=e.drawLayer.highlight(p(this,Ss),this.color,p(this,ec)),k(this,nn,e.drawLayer.highlightOutline(p(this,Qi))),p(this,tc)&&(p(this,tc).style.clipPath=p(this,Jl)))},ss=new WeakSet,Su=function({x:e,y:n,width:a,height:o},c){switch(c){case 90:return{x:1-n-o,y:e,width:o,height:a};case 180:return{x:1-e-a,y:1-n-o,width:a,height:o};case 270:return{x:n,y:1-e-a,width:o,height:a}}return{x:e,y:n,width:a,height:o}},iD=function(e){oe._keyboardManager.exec(this,e)},jy=function(e){if(!p(this,Sh))return;const n=window.getSelection();e?n.setPosition(p(this,Sh),p(this,eg)):n.setPosition(p(this,ng),p(this,ig))},hf=function(){return p(this,Ni)?this.rotation:0},sD=function(){if(p(this,Ni))return null;const[e,n]=this.pageDimensions,a=p(this,wo),o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:d,width:f,height:g}of a){const y=u*e,b=(1-d-g)*n;o[c]=o[c+4]=y,o[c+1]=o[c+3]=b,o[c+2]=o[c+6]=y+f*e,o[c+5]=o[c+7]=b+g*n,c+=8}return o},rD=function(e){return p(this,Ss).serialize(e,M(this,qt,hf).call(this))},aD=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},oD=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},N(oe,ss),Nt(oe,"_defaultColor",null),Nt(oe,"_defaultOpacity",1),Nt(oe,"_defaultThickness",12),Nt(oe,"_l10nPromise"),Nt(oe,"_type","highlight"),Nt(oe,"_editorType",Jt.HIGHLIGHT),Nt(oe,"_freeHighlightId",-1),Nt(oe,"_freeHighlight",null),Nt(oe,"_freeHighlightClipId","");let dv=oe;var nc,ic,rg,ag,og,sc,Zs,aa,Zi,rc,ac,oa,oc,lc,xo,ft,lD,cD,uD,hD,RA,dD,MA,fD,pD,gD,mD,yD,dl,NA,Py,Fy,Cu,DA,zy,Aa,vD,LA,bD,wD,OA,Iy,df;const Oe=class Oe extends fe{constructor(e){super({...e,name:"inkEditor"});N(this,ft);N(this,nc,0);N(this,ic,0);N(this,rg,this.canvasPointermove.bind(this));N(this,ag,this.canvasPointerleave.bind(this));N(this,og,this.canvasPointerup.bind(this));N(this,sc,this.canvasPointerdown.bind(this));N(this,Zs,null);N(this,aa,new Path2D);N(this,Zi,!1);N(this,rc,!1);N(this,ac,!1);N(this,oa,null);N(this,oc,0);N(this,lc,0);N(this,xo,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){fe.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Mt.INK_THICKNESS:Oe._defaultThickness=n;break;case Mt.INK_COLOR:Oe._defaultColor=n;break;case Mt.INK_OPACITY:Oe._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case Mt.INK_THICKNESS:M(this,ft,lD).call(this,n);break;case Mt.INK_COLOR:M(this,ft,cD).call(this,n);break;case Mt.INK_OPACITY:M(this,ft,uD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.INK_THICKNESS,Oe._defaultThickness],[Mt.INK_COLOR,Oe._defaultColor||fe._defaultLineColor],[Mt.INK_OPACITY,Math.round(Oe._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Mt.INK_THICKNESS,this.thickness||Oe._defaultThickness],[Mt.INK_COLOR,this.color||Oe._defaultColor||fe._defaultLineColor],[Mt.INK_OPACITY,Math.round(100*(this.opacity??Oe._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(M(this,ft,Py).call(this),M(this,ft,Fy).call(this)),this.isAttachedToDOM||(this.parent.add(this),M(this,ft,Cu).call(this)),M(this,ft,df).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,p(this,Zs)&&(clearTimeout(p(this,Zs)),k(this,Zs,null)),(e=p(this,oa))==null||e.disconnect(),k(this,oa,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,a=this.width*e,o=this.height*n;this.setDimensions(a,o)}enableEditMode(){p(this,Zi)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",p(this,sc),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",p(this,sc)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){p(this,Zi)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),k(this,Zi,!0),this.div.classList.add("disabled"),M(this,ft,df).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||p(this,Zi)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),M(this,ft,dD).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),M(this,ft,MA).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),M(this,ft,NA).call(this,e)}canvasPointerleave(e){M(this,ft,NA).call(this,e)}get isResizable(){return!this.isEmpty()&&p(this,Zi)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[a,o,c,u]=M(this,ft,hD).call(this);if(this.setAt(a,o,0,0),this.setDims(c,u),M(this,ft,Py).call(this),this.width){const[d,f]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*f),this.setAt(e*d,n*f,this.width*d,this.height*f),k(this,ac,!0),M(this,ft,Cu).call(this),this.setDims(this.width*d,this.height*f),M(this,ft,dl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return M(this,ft,Fy).call(this),this.div}setDimensions(e,n){const a=Math.round(e),o=Math.round(n);if(p(this,oc)===a&&p(this,lc)===o)return;k(this,oc,a),k(this,lc,o),this.canvas.style.visibility="hidden";const[c,u]=this.parentDimensions;this.width=e/c,this.height=n/u,this.fixAndSetPosition(),p(this,Zi)&&M(this,ft,DA).call(this,e,n),M(this,ft,Cu).call(this),M(this,ft,dl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,n,a){var T,C,D;if(e instanceof IN)return null;const o=super.deserialize(e,n,a);o.thickness=e.thickness,o.color=_t.makeHexColor(...e.color),o.opacity=e.opacity;const[c,u]=o.pageDimensions,d=o.width*c,f=o.height*u,g=o.parentScale,y=e.thickness/2;k(o,Zi,!0),k(o,oc,Math.round(d)),k(o,lc,Math.round(f));const{paths:b,rect:w,rotation:A}=e;for(let{bezier:L}of b){L=M(T=Oe,Aa,bD).call(T,L,w,A);const z=[];o.paths.push(z);let B=g*(L[0]-y),U=g*(L[1]-y);for(let H=2,W=L.length;H<W;H+=6){const Q=g*(L[H]-y),nt=g*(L[H+1]-y),ot=g*(L[H+2]-y),ht=g*(L[H+3]-y),lt=g*(L[H+4]-y),J=g*(L[H+5]-y);z.push([[B,U],[Q,nt],[ot,ht],[lt,J]]),B=lt,U=J}const O=M(this,Aa,vD).call(this,z);o.bezierPath2D.push(O)}const E=M(C=o,ft,OA).call(C);return k(o,ic,Math.max(fe.MIN_SIZE,E[2]-E[0])),k(o,nc,Math.max(fe.MIN_SIZE,E[3]-E[1])),M(D=o,ft,DA).call(D,d,f),o}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=fe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Jt.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:M(this,ft,wD).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};nc=new WeakMap,ic=new WeakMap,rg=new WeakMap,ag=new WeakMap,og=new WeakMap,sc=new WeakMap,Zs=new WeakMap,aa=new WeakMap,Zi=new WeakMap,rc=new WeakMap,ac=new WeakMap,oa=new WeakMap,oc=new WeakMap,lc=new WeakMap,xo=new WeakMap,ft=new WeakSet,lD=function(e){const n=o=>{this.thickness=o,M(this,ft,df).call(this)},a=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},cD=function(e){const n=o=>{this.color=o,M(this,ft,dl).call(this)},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},uD=function(e){const n=o=>{this.opacity=o,M(this,ft,dl).call(this)};e/=100;const a=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},hD=function(){const{parentRotation:e,parentDimensions:[n,a]}=this;switch(e){case 90:return[0,a,a,n];case 180:return[n,a,n,a];case 270:return[n,0,a,n];default:return[0,0,n,a]}},RA=function(){const{ctx:e,color:n,opacity:a,thickness:o,parentScale:c,scaleFactor:u}=this;e.lineWidth=o*c/u,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${XH(a)}`},dD=function(e,n){const a=this._uiManager._signal;this.canvas.addEventListener("contextmenu",hi,{signal:a}),this.canvas.addEventListener("pointerleave",p(this,ag),{signal:a}),this.canvas.addEventListener("pointermove",p(this,rg),{signal:a}),this.canvas.addEventListener("pointerup",p(this,og),{signal:a}),this.canvas.removeEventListener("pointerdown",p(this,sc)),this.isEditing=!0,p(this,ac)||(k(this,ac,!0),M(this,ft,Cu).call(this),this.thickness||(this.thickness=Oe._defaultThickness),this.color||(this.color=Oe._defaultColor||fe._defaultLineColor),this.opacity??(this.opacity=Oe._defaultOpacity)),this.currentPath.push([e,n]),k(this,rc,!1),M(this,ft,RA).call(this),k(this,xo,()=>{M(this,ft,gD).call(this),p(this,xo)&&window.requestAnimationFrame(p(this,xo))}),window.requestAnimationFrame(p(this,xo))},MA=function(e,n){const[a,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===a&&n===o)return;const c=this.currentPath;let u=p(this,aa);if(c.push([e,n]),k(this,rc,!0),c.length<=2){u.moveTo(...c[0]),u.lineTo(e,n);return}c.length===3&&(k(this,aa,u=new Path2D),u.moveTo(...c[0])),M(this,ft,mD).call(this,u,...c.at(-3),...c.at(-2),e,n)},fD=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);p(this,aa).lineTo(...e)},pD=function(e,n){k(this,xo,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),M(this,ft,MA).call(this,e,n),M(this,ft,fD).call(this);let a;if(this.currentPath.length!==1)a=M(this,ft,yD).call(this);else{const f=[e,n];a=[[f,f.slice(),f.slice(),f]]}const o=p(this,aa),c=this.currentPath;this.currentPath=[],k(this,aa,new Path2D);const u=()=>{this.allRawPaths.push(c),this.paths.push(a),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(M(this,ft,Py).call(this),M(this,ft,Fy).call(this)),M(this,ft,df).call(this))};this.addCommands({cmd:u,undo:d,mustExec:!0})},gD=function(){if(!p(this,rc))return;k(this,rc,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),a=n.map(u=>u[0]),o=n.map(u=>u[1]);Math.min(...a)-e,Math.max(...a)+e,Math.min(...o)-e,Math.max(...o)+e;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)c.stroke(u);c.stroke(p(this,aa)),c.restore()},mD=function(e,n,a,o,c,u,d){const f=(n+o)/2,g=(a+c)/2,y=(o+u)/2,b=(c+d)/2;e.bezierCurveTo(f+2*(o-f)/3,g+2*(c-g)/3,y+2*(o-y)/3,b+2*(c-b)/3,y,b)},yD=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let a,[o,c]=e[0];for(a=1;a<e.length-2;a++){const[w,A]=e[a],[E,T]=e[a+1],C=(w+E)/2,D=(A+T)/2,L=[o+2*(w-o)/3,c+2*(A-c)/3],z=[C+2*(w-C)/3,D+2*(A-D)/3];n.push([[o,c],L,z,[C,D]]),[o,c]=[C,D]}const[u,d]=e[a],[f,g]=e[a+1],y=[o+2*(u-o)/3,c+2*(d-c)/3],b=[f+2*(u-f)/3,g+2*(d-g)/3];return n.push([[o,c],y,b,[f,g]]),n},dl=function(){if(this.isEmpty()){M(this,ft,zy).call(this);return}M(this,ft,RA).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),M(this,ft,zy).call(this);for(const a of this.bezierPath2D)n.stroke(a)},NA=function(e){this.canvas.removeEventListener("pointerleave",p(this,ag)),this.canvas.removeEventListener("pointermove",p(this,rg)),this.canvas.removeEventListener("pointerup",p(this,og)),this.canvas.addEventListener("pointerdown",p(this,sc),{signal:this._uiManager._signal}),p(this,Zs)&&clearTimeout(p(this,Zs)),k(this,Zs,setTimeout(()=>{k(this,Zs,null),this.canvas.removeEventListener("contextmenu",hi)},10)),M(this,ft,pD).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Py=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Fy=function(){k(this,oa,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),p(this,oa).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=p(this,oa))==null||e.disconnect(),k(this,oa,null)},{once:!0})},Cu=function(){if(!p(this,ac))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),M(this,ft,zy).call(this)},DA=function(e,n){const a=M(this,ft,Iy).call(this),o=(e-a)/p(this,ic),c=(n-a)/p(this,nc);this.scaleFactor=Math.min(o,c)},zy=function(){const e=M(this,ft,Iy).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Aa=new WeakSet,vD=function(e){const n=new Path2D;for(let a=0,o=e.length;a<o;a++){const[c,u,d,f]=e[a];a===0&&n.moveTo(...c),n.bezierCurveTo(u[0],u[1],d[0],d[1],f[0],f[1])}return n},LA=function(e,n,a){const[o,c,u,d]=n;switch(a){case 0:for(let f=0,g=e.length;f<g;f+=2)e[f]+=o,e[f+1]=d-e[f+1];break;case 90:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=e[f+1]+o,e[f+1]=y+c}break;case 180:for(let f=0,g=e.length;f<g;f+=2)e[f]=u-e[f],e[f+1]+=c;break;case 270:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=u-e[f+1],e[f+1]=d-y}break;default:throw new Error("Invalid rotation")}return e},bD=function(e,n,a){const[o,c,u,d]=n;switch(a){case 0:for(let f=0,g=e.length;f<g;f+=2)e[f]-=o,e[f+1]=d-e[f+1];break;case 90:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=e[f+1]-c,e[f+1]=y-o}break;case 180:for(let f=0,g=e.length;f<g;f+=2)e[f]=u-e[f],e[f+1]-=c;break;case 270:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=d-e[f+1],e[f+1]=u-y}break;default:throw new Error("Invalid rotation")}return e},wD=function(e,n,a,o){var g,y;const c=[],u=this.thickness/2,d=e*n+u,f=e*a+u;for(const b of this.paths){const w=[],A=[];for(let E=0,T=b.length;E<T;E++){const[C,D,L,z]=b[E];if(C[0]===z[0]&&C[1]===z[1]&&T===1){const ht=e*C[0]+d,lt=e*C[1]+f;w.push(ht,lt),A.push(ht,lt);break}const B=e*C[0]+d,U=e*C[1]+f,O=e*D[0]+d,H=e*D[1]+f,W=e*L[0]+d,Q=e*L[1]+f,nt=e*z[0]+d,ot=e*z[1]+f;E===0&&(w.push(B,U),A.push(B,U)),w.push(O,H,W,Q,nt,ot),A.push(O,H),E===T-1&&A.push(nt,ot)}c.push({bezier:M(g=Oe,Aa,LA).call(g,w,o,this.rotation),points:M(y=Oe,Aa,LA).call(y,A,o,this.rotation)})}return c},OA=function(){let e=1/0,n=-1/0,a=1/0,o=-1/0;for(const c of this.paths)for(const[u,d,f,g]of c){const y=_t.bezierBoundingBox(...u,...d,...f,...g);e=Math.min(e,y[0]),a=Math.min(a,y[1]),n=Math.max(n,y[2]),o=Math.max(o,y[3])}return[e,a,n,o]},Iy=function(){return p(this,Zi)?Math.ceil(this.thickness*this.parentScale):0},df=function(e=!1){if(this.isEmpty())return;if(!p(this,Zi)){M(this,ft,dl).call(this);return}const n=M(this,ft,OA).call(this),a=M(this,ft,Iy).call(this);k(this,ic,Math.max(fe.MIN_SIZE,n[2]-n[0])),k(this,nc,Math.max(fe.MIN_SIZE,n[3]-n[1]));const o=Math.ceil(a+p(this,ic)*this.scaleFactor),c=Math.ceil(a+p(this,nc)*this.scaleFactor),[u,d]=this.parentDimensions;this.width=o/u,this.height=c/d,this.setAspectRatio(o,c);const f=this.translationX,g=this.translationY;this.translationX=-n[0],this.translationY=-n[1],M(this,ft,Cu).call(this),M(this,ft,dl).call(this),k(this,oc,o),k(this,lc,c),this.setDims(o,c);const y=e?a/this.scaleFactor/2:0;this.translate(f-this.translationX-y,g-this.translationY-y)},N(Oe,Aa),Nt(Oe,"_defaultColor",null),Nt(Oe,"_defaultOpacity",1),Nt(Oe,"_defaultThickness",1),Nt(Oe,"_type","ink"),Nt(Oe,"_editorType",Jt.INK);let kA=Oe;var kn,Rn,Ao,la,_o,Rh,Js,ca,tr,Cs,lg,se,ff,pf,By,PA,xD,AD,FA,Uy,_D;const bf=class bf extends fe{constructor(e){super({...e,name:"stampEditor"});N(this,se);N(this,kn,null);N(this,Rn,null);N(this,Ao,null);N(this,la,null);N(this,_o,null);N(this,Rh,"");N(this,Js,null);N(this,ca,null);N(this,tr,null);N(this,Cs,!1);N(this,lg,!1);k(this,la,e.bitmapUrl),k(this,_o,e.bitmapFile)}static initialize(e,n){fe.initialize(e,n)}static get supportedTypes(){return ee(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return ee(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(Jt.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,n;p(this,Rn)&&(k(this,kn,null),this._uiManager.imageManager.deleteId(p(this,Rn)),(e=p(this,Js))==null||e.remove(),k(this,Js,null),(n=p(this,ca))==null||n.disconnect(),k(this,ca,null),p(this,tr)&&(clearTimeout(p(this,tr)),k(this,tr,null))),super.remove()}rebuild(){if(!this.parent){p(this,Rn)&&M(this,se,By).call(this);return}super.rebuild(),this.div!==null&&(p(this,Rn)&&p(this,Js)===null&&M(this,se,By).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(p(this,Ao)||p(this,kn)||p(this,la)||p(this,_o)||p(this,Rn))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),p(this,kn)?M(this,se,PA).call(this):M(this,se,By).call(this),this.width){const[a,o]=this.parentDimensions;this.setAt(e*a,n*o,this.width*a,this.height*o)}return this.div}getImageForAltText(){return p(this,Js)}static deserialize(e,n,a){if(e instanceof BN)return null;const o=super.deserialize(e,n,a),{rect:c,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:g}=e;d&&a.imageManager.isValidId(d)?k(o,Rn,d):k(o,la,u),k(o,Cs,f);const[y,b]=o.pageDimensions;return o.width=(c[2]-c[0])/y,o.height=(c[3]-c[1])/b,g&&(o.altTextData=g),o}serialize(e=!1,n=null){if(this.isEmpty())return null;const a={annotationType:Jt.STAMP,bitmapId:p(this,Rn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:p(this,Cs),structTreeParentId:this._structTreeParentId};if(e)return a.bitmapUrl=M(this,se,Uy).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:o,altText:c}=this.altTextData;if(!o&&c&&(a.accessibilityData={type:"Figure",alt:c}),n===null)return a;n.stamps||(n.stamps=new Map);const u=p(this,Cs)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(p(this,Rn)))n.stamps.set(p(this,Rn),{area:u,serialized:a}),a.bitmap=M(this,se,Uy).call(this,!1);else if(p(this,Cs)){const d=n.stamps.get(p(this,Rn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=M(this,se,Uy).call(this,!1))}return a}};kn=new WeakMap,Rn=new WeakMap,Ao=new WeakMap,la=new WeakMap,_o=new WeakMap,Rh=new WeakMap,Js=new WeakMap,ca=new WeakMap,tr=new WeakMap,Cs=new WeakMap,lg=new WeakMap,se=new WeakSet,ff=function(e,n=!1){if(!e){this.remove();return}k(this,kn,e.bitmap),n||(k(this,Rn,e.id),k(this,Cs,e.isSvg)),e.file&&k(this,Rh,e.file.name),M(this,se,PA).call(this)},pf=function(){k(this,Ao,null),this._uiManager.enableWaiting(!1),p(this,Js)&&this.div.focus()},By=function(){if(p(this,Rn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(p(this,Rn)).then(a=>M(this,se,ff).call(this,a,!0)).finally(()=>M(this,se,pf).call(this));return}if(p(this,la)){const a=p(this,la);k(this,la,null),this._uiManager.enableWaiting(!0),k(this,Ao,this._uiManager.imageManager.getFromUrl(a).then(o=>M(this,se,ff).call(this,o)).finally(()=>M(this,se,pf).call(this)));return}if(p(this,_o)){const a=p(this,_o);k(this,_o,null),this._uiManager.enableWaiting(!0),k(this,Ao,this._uiManager.imageManager.getFromFile(a).then(o=>M(this,se,ff).call(this,o)).finally(()=>M(this,se,pf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=bf.supportedTypesStr;const n=this._uiManager._signal;k(this,Ao,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);M(this,se,ff).call(this,o)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>M(this,se,pf).call(this))),e.click()},PA=function(){const{div:e}=this;let{width:n,height:a}=p(this,kn);const[o,c]=this.pageDimensions,u=.75;if(this.width)n=this.width*o,a=this.height*c;else if(n>u*o||a>u*c){const y=Math.min(u*o/n,u*c/a);n*=y,a*=y}const[d,f]=this.parentDimensions;this.setDims(n*d/o,a*f/c),this._uiManager.enableWaiting(!1);const g=k(this,Js,document.createElement("canvas"));e.append(g),e.hidden=!1,M(this,se,FA).call(this,n,a),M(this,se,_D).call(this),p(this,lg)||(this.parent.addUndoableEditor(this),k(this,lg,!0)),this._reportTelemetry({action:"inserted_image"}),p(this,Rh)&&g.setAttribute("aria-label",p(this,Rh))},xD=function(e,n){var u;const[a,o]=this.parentDimensions;this.width=e/a,this.height=n/o,this.setDims(e,n),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,p(this,tr)!==null&&clearTimeout(p(this,tr)),k(this,tr,setTimeout(()=>{k(this,tr,null),M(this,se,FA).call(this,e,n)},200))},AD=function(e,n){const{width:a,height:o}=p(this,kn);let c=a,u=o,d=p(this,kn);for(;c>2*e||u>2*n;){const f=c,g=u;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(c,u);y.getContext("2d").drawImage(d,0,0,f,g,0,0,c,u),d=y.transferToImageBitmap()}return d},FA=function(e,n){e=Math.ceil(e),n=Math.ceil(n);const a=p(this,Js);if(!a||a.width===e&&a.height===n)return;a.width=e,a.height=n;const o=p(this,Cs)?p(this,kn):M(this,se,AD).call(this,e,n);if(this._uiManager.hasMLManager&&!this.hasAltText()){const d=new OffscreenCanvas(e,n).getContext("2d");d.drawImage(o,0,0,o.width,o.height,0,0,e,n),this._uiManager.mlGuess({service:"image-to-text",request:{data:d.getImageData(0,0,e,n).data,width:e,height:n,channels:4}}).then(f=>{const g=(f==null?void 0:f.output)||"";this.parent&&g&&!this.hasAltText()&&(this.altTextData={altText:g,decorative:!1})})}const c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(o,0,0,o.width,o.height,0,0,e,n)},Uy=function(e){if(e){if(p(this,Cs)){const o=this._uiManager.imageManager.getSvgUrl(p(this,Rn));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=p(this,kn),n.getContext("2d").drawImage(p(this,kn),0,0),n.toDataURL()}if(p(this,Cs)){const[n,a]=this.pageDimensions,o=Math.round(this.width*n*jo.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*jo.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,c);return u.getContext("2d").drawImage(p(this,kn),0,0,p(this,kn).width,p(this,kn).height,0,0,o,c),u.transferToImageBitmap()}return structuredClone(p(this,kn))},_D=function(){this._uiManager._signal&&(k(this,ca,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&M(this,se,xD).call(this,n.width,n.height)})),p(this,ca).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=p(this,ca))==null||e.disconnect(),k(this,ca,null)},{once:!0}))},Nt(bf,"_type","stamp"),Nt(bf,"_editorType",Jt.STAMP);let jA=bf;var cc,Mh,er,uc,ua,ha,da,Di,Eo,Nh,Dh,Yn,St,So,Dn,ED,IA,BA,UA,Hy;const ds=class ds{constructor({uiManager:t,pageIndex:e,div:n,accessibilityManager:a,annotationLayer:o,drawLayer:c,textLayer:u,viewport:d,l10n:f}){N(this,Dn);N(this,cc);N(this,Mh,!1);N(this,er,null);N(this,uc,null);N(this,ua,null);N(this,ha,null);N(this,da,null);N(this,Di,new Map);N(this,Eo,!1);N(this,Nh,!1);N(this,Dh,!1);N(this,Yn,null);N(this,St);const g=[...p(ds,So).values()];if(!ds._initialized){ds._initialized=!0;for(const y of g)y.initialize(f,t)}t.registerEditorTypes(g),k(this,St,t),this.pageIndex=e,this.div=n,k(this,cc,a),k(this,er,o),this.viewport=d,k(this,Yn,u),this.drawLayer=c,p(this,St).addLayer(this)}get isEmpty(){return p(this,Di).size===0}get isInvisible(){return this.isEmpty&&p(this,St).getMode()===Jt.NONE}updateToolbar(t){p(this,St).updateToolbar(t)}updateMode(t=p(this,St).getMode()){switch(M(this,Dn,Hy).call(this),t){case Jt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Jt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Jt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of p(ds,So).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=p(this,Yn))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(p(this,St).getMode()!==Jt.INK)return;if(!t){for(const n of p(this,Di).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){p(this,St).setEditingState(t)}addCommands(t){p(this,St).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=p(this,er))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of p(this,Di).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(p(this,St).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!p(this,er))return;const e=p(this,er).getEditableAnnotations();for(const n of e){if(n.hide(),p(this,St).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}}disable(){var a;k(this,Dh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of p(this,Di).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(a=this.getEditableAnnotation(o.annotationElementId))==null||a.show(),o.remove()}if(p(this,er)){const o=p(this,er).getEditableAnnotations();for(const c of o){const{id:u}=c.data;if(p(this,St).isDeletedAnnotationElement(u))continue;let d=e.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=t.get(u),d&&(p(this,St).addChangedExistingAnnotation(d),d.renderAnnotationElement(c),d.show(!1)),c.show()}}M(this,Dn,Hy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of p(ds,So).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),k(this,Dh,!1)}getEditableAnnotation(t){var e;return((e=p(this,er))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){p(this,St).getActive()!==t&&p(this,St).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=p(this,Yn))!=null&&t.div&&!p(this,ha)&&(k(this,ha,M(this,Dn,ED).bind(this)),p(this,Yn).div.addEventListener("pointerdown",p(this,ha),{signal:p(this,St)._signal}),p(this,Yn).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=p(this,Yn))!=null&&t.div&&p(this,ha)&&(p(this,Yn).div.removeEventListener("pointerdown",p(this,ha)),k(this,ha,null),p(this,Yn).div.classList.remove("highlighting"))}enableClick(){if(p(this,ua))return;const t=p(this,St)._signal;k(this,ua,this.pointerdown.bind(this)),k(this,uc,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",p(this,ua),{signal:t}),this.div.addEventListener("pointerup",p(this,uc),{signal:t})}disableClick(){p(this,ua)&&(this.div.removeEventListener("pointerdown",p(this,ua)),this.div.removeEventListener("pointerup",p(this,uc)),k(this,ua,null),k(this,uc,null))}attach(t){p(this,Di).set(t.id,t);const{annotationElementId:e}=t;e&&p(this,St).isDeletedAnnotationElement(e)&&p(this,St).removeDeletedAnnotationElement(t)}detach(t){var e;p(this,Di).delete(t.id),(e=p(this,cc))==null||e.removePointerInTextLayer(t.contentDiv),!p(this,Dh)&&t.annotationElementId&&p(this,St).addDeletedAnnotationElement(t)}remove(t){this.detach(t),p(this,St).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,p(this,Nh)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(p(this,St).addDeletedAnnotationElement(t.annotationElementId),fe.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),p(this,St).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),p(this,St).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!p(this,da)&&(t._focusEventsAllowed=!1,k(this,da,setTimeout(()=>{k(this,da,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:p(this,St)._signal}),e.focus())},0))),t._structTreeParentId=(n=p(this,cc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return p(this,St).getId()}get _signal(){return p(this,St)._signal}canCreateNewEmptyEditor(){var t;return(t=p(this,Dn,IA))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){p(this,St).updateToolbar(t),p(this,St).updateMode(t);const{offsetX:n,offsetY:a}=M(this,Dn,UA).call(this),o=this.getNextId(),c=M(this,Dn,BA).call(this,{parent:this,id:o,x:n,y:a,uiManager:p(this,St),isCentered:!0,...e});c&&this.add(c)}deserialize(t){var e;return((e=p(ds,So).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,p(this,St)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),o=M(this,Dn,BA).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:p(this,St),isCentered:e,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(M(this,Dn,UA).call(this),!0)}setSelected(t){p(this,St).setSelected(t)}toggleSelected(t){p(this,St).toggleSelected(t)}isSelected(t){return p(this,St).isSelected(t)}unselect(t){p(this,St).unselect(t)}pointerup(t){const{isMac:e}=ci.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&p(this,Eo)){if(k(this,Eo,!1),!p(this,Mh)){k(this,Mh,!0);return}if(p(this,St).getMode()===Jt.STAMP){p(this,St).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(p(this,St).getMode()===Jt.HIGHLIGHT&&this.enableTextSelection(),p(this,Eo)){k(this,Eo,!1);return}const{isMac:e}=ci.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;k(this,Eo,!0);const n=p(this,St).getActive();k(this,Mh,!n||n.isEmpty())}findNewParent(t,e,n){const a=p(this,St).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}destroy(){var t,e;((t=p(this,St).getActive())==null?void 0:t.parent)===this&&(p(this,St).commitOrRemove(),p(this,St).setActiveEditor(null)),p(this,da)&&(clearTimeout(p(this,da)),k(this,da,null));for(const n of p(this,Di).values())(e=p(this,cc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,p(this,Di).clear(),p(this,St).removeLayer(this)}render({viewport:t}){this.viewport=t,yc(this.div,t);for(const e of p(this,St).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){p(this,St).commitOrRemove(),M(this,Dn,Hy).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,yc(this.div,{rotation:n}),e!==n)for(const a of p(this,Di).values())a.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return p(this,St).viewParameters.realScale}};cc=new WeakMap,Mh=new WeakMap,er=new WeakMap,uc=new WeakMap,ua=new WeakMap,ha=new WeakMap,da=new WeakMap,Di=new WeakMap,Eo=new WeakMap,Nh=new WeakMap,Dh=new WeakMap,Yn=new WeakMap,St=new WeakMap,So=new WeakMap,Dn=new WeakSet,ED=function(t){if(p(this,St).unselectAll(),t.target===p(this,Yn).div){const{isMac:e}=ci.platform;if(t.button!==0||t.ctrlKey&&e)return;p(this,St).showAllEditors("highlight",!0,!0),p(this,Yn).div.classList.add("free"),dv.startHighlighting(this,p(this,St).direction==="ltr",t),p(this,Yn).div.addEventListener("pointerup",()=>{p(this,Yn).div.classList.remove("free")},{once:!0,signal:p(this,St)._signal}),t.preventDefault()}},IA=function(){return p(ds,So).get(p(this,St).getMode())},BA=function(t){const e=p(this,Dn,IA);return e?new e.prototype.constructor(t):null},UA=function(){const{x:t,y:e,width:n,height:a}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+a),f=(o+u)/2-t,g=(c+d)/2-e,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}},Hy=function(){k(this,Nh,!0);for(const t of p(this,Di).values())t.isEmpty()&&t.remove();k(this,Nh,!1)},Nt(ds,"_initialized",!1),N(ds,So,new Map([yA,kA,jA,dv].map(t=>[t._editorType,t])));let zA=ds;var nr,cg,sn,Co,ug,VA,Ac,qA,SD;const _n=class _n{constructor({pageIndex:t}){N(this,Ac);N(this,nr,null);N(this,cg,0);N(this,sn,new Map);N(this,Co,new Map);this.pageIndex=t}setParent(t){if(!p(this,nr)){k(this,nr,t);return}if(p(this,nr)!==t){if(p(this,sn).size>0)for(const e of p(this,sn).values())e.remove(),t.append(e);k(this,nr,t)}}static get _svgFactory(){return ee(this,"_svgFactory",new D_)}highlight(t,e,n,a=!1){const o=wi(this,cg)._++,c=M(this,Ac,qA).call(this,t.box);c.classList.add("highlight"),t.free&&c.classList.add("free");const u=_n._svgFactory.createElement("defs");c.append(u);const d=_n._svgFactory.createElement("path");u.append(d);const f=`path_p${this.pageIndex}_${o}`;d.setAttribute("id",f),d.setAttribute("d",t.toSVGPath()),a&&p(this,Co).set(o,d);const g=M(this,Ac,SD).call(this,u,f),y=_n._svgFactory.createElement("use");return c.append(y),c.setAttribute("fill",e),c.setAttribute("fill-opacity",n),y.setAttribute("href",`#${f}`),p(this,sn).set(o,c),{id:o,clipPathId:`url(#${g})`}}highlightOutline(t){const e=wi(this,cg)._++,n=M(this,Ac,qA).call(this,t.box);n.classList.add("highlightOutline");const a=_n._svgFactory.createElement("defs");n.append(a);const o=_n._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${e}`;o.setAttribute("id",c),o.setAttribute("d",t.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t.free){n.classList.add("free");const g=_n._svgFactory.createElement("mask");a.append(g),u=`mask_p${this.pageIndex}_${e}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const y=_n._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=_n._svgFactory.createElement("use");g.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const d=_n._svgFactory.createElement("use");n.append(d),d.setAttribute("href",`#${c}`),u&&d.setAttribute("mask",`url(#${u})`);const f=d.cloneNode();return n.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),p(this,sn).set(e,n),e}finalizeLine(t,e){const n=p(this,Co).get(t);p(this,Co).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){p(this,sn).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),p(this,Co).delete(t)}updatePath(t,e){p(this,Co).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;M(n=_n,ug,VA).call(n,p(this,sn).get(t),e)}show(t,e){p(this,sn).get(t).classList.toggle("hidden",!e)}rotate(t,e){p(this,sn).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){p(this,sn).get(t).setAttribute("fill",e)}changeOpacity(t,e){p(this,sn).get(t).setAttribute("fill-opacity",e)}addClass(t,e){p(this,sn).get(t).classList.add(e)}removeClass(t,e){p(this,sn).get(t).classList.remove(e)}remove(t){p(this,nr)!==null&&(p(this,sn).get(t).remove(),p(this,sn).delete(t))}destroy(){k(this,nr,null);for(const t of p(this,sn).values())t.remove();p(this,sn).clear()}};nr=new WeakMap,cg=new WeakMap,sn=new WeakMap,Co=new WeakMap,ug=new WeakSet,VA=function(t,{x:e=0,y:n=0,width:a=1,height:o=1}={}){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*o}%`},Ac=new WeakSet,qA=function(t){var n;const e=_n._svgFactory.create(1,1,!0);return p(this,nr).append(e),e.setAttribute("aria-hidden",!0),M(n=_n,ug,VA).call(n,e,t),e},SD=function(t,e){const n=_n._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const o=_n._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a},N(_n,ug);let HA=_n;var _8=Rt.AbortException,E8=Rt.AnnotationEditorLayer,S8=Rt.AnnotationEditorParamsType,C8=Rt.AnnotationEditorType,T8=Rt.AnnotationEditorUIManager,CD=Rt.AnnotationLayer,TD=Rt.AnnotationMode,k8=Rt.CMapCompressionType,R8=Rt.ColorPicker,M8=Rt.DOMSVGFactory,N8=Rt.DrawLayer,D8=Rt.FeatureTest,B_=Rt.GlobalWorkerOptions,L8=Rt.ImageKind,O8=Rt.InvalidPDFException,j8=Rt.MissingPDFException,P8=Rt.OPS,F8=Rt.Outliner,z8=Rt.PDFDataRangeTransport,I8=Rt.PDFDateString,B8=Rt.PDFWorker,U8=Rt.PasswordResponses,H8=Rt.PermissionFlag,V8=Rt.PixelsPerInch,q8=Rt.RenderingCancelledException,kD=Rt.TextLayer,G8=Rt.UnexpectedResponseException,X8=Rt.Util,$8=Rt.VerbosityLevel,Y8=Rt.XfaLayer,K8=Rt.build,W8=Rt.createValidAbsoluteUrl,Q8=Rt.fetchData,RD=Rt.getDocument,Z8=Rt.getFilenameFromUrl,J8=Rt.getPdfFilenameFromUrl,tV=Rt.getXfaPageViewport,eV=Rt.isDataScheme,nV=Rt.isPdfFile,iV=Rt.noContextMenu,sV=Rt.normalizeUnicode,rV=Rt.renderTextLayer,aV=Rt.setLayerDimensions,oV=Rt.shadow,lV=Rt.updateTextLayer,cV=Rt.version;const uV=Object.freeze(Object.defineProperty({__proto__:null,AbortException:_8,AnnotationEditorLayer:E8,AnnotationEditorParamsType:S8,AnnotationEditorType:C8,AnnotationEditorUIManager:T8,AnnotationLayer:CD,AnnotationMode:TD,CMapCompressionType:k8,ColorPicker:R8,DOMSVGFactory:M8,DrawLayer:N8,FeatureTest:D8,GlobalWorkerOptions:B_,ImageKind:L8,InvalidPDFException:O8,MissingPDFException:j8,OPS:P8,Outliner:F8,PDFDataRangeTransport:z8,PDFDateString:I8,PDFWorker:B8,PasswordResponses:U8,PermissionFlag:H8,PixelsPerInch:V8,RenderingCancelledException:q8,TextLayer:kD,UnexpectedResponseException:G8,Util:X8,VerbosityLevel:$8,XfaLayer:Y8,build:K8,createValidAbsoluteUrl:W8,fetchData:Q8,getDocument:RD,getFilenameFromUrl:Z8,getPdfFilenameFromUrl:J8,getXfaPageViewport:tV,isDataScheme:eV,isPdfFile:nV,noContextMenu:iV,normalizeUnicode:sV,renderTextLayer:rV,setLayerDimensions:aV,shadow:oV,updateTextLayer:lV,version:cV},Symbol.toStringTag,{value:"Module"}));var dn=function(s,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return s.concat(o||Array.prototype.slice.call(t))},hV=["onCopy","onCut","onPaste"],dV=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],fV=["onFocus","onBlur"],pV=["onInput","onInvalid","onReset","onSubmit"],gV=["onLoad","onError"],mV=["onKeyDown","onKeyPress","onKeyUp"],yV=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],vV=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],bV=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],wV=["onSelect"],xV=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],AV=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],_V=["onScroll"],EV=["onWheel"],SV=["onAnimationStart","onAnimationEnd","onAnimationIteration"],CV=["onTransitionEnd"],TV=["onToggle"],kV=["onChange"],RV=dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn([],hV,!0),dV,!0),fV,!0),pV,!0),gV,!0),mV,!0),yV,!0),vV,!0),bV,!0),wV,!0),xV,!0),AV,!0),_V,!0),EV,!0),SV,!0),CV,!0),kV,!0),TV,!0);function MD(s,t){var e={};return RV.forEach(function(n){var a=s[n];a&&(t?e[n]=(function(o){return a(o,t(n))}):e[n]=a)}),e}function _g(s){var t=!1,e=new Promise(function(n,a){s.then(function(o){return!t&&n(o)}).catch(function(o){return!t&&a(o)})});return{promise:e,cancel:function(){t=!0}}}var MV="Invariant failed";function Ae(s,t){if(!s)throw new Error(MV)}var ox,Dk;function NV(){if(Dk)return ox;Dk=1;var s=function(){};return ox=s,ox}var DV=NV();const zn=$A(DV);var Lk=Object.prototype.hasOwnProperty;function Ok(s,t,e){for(e of s.keys())if(Pu(e,t))return e}function Pu(s,t){var e,n,a;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&Pu(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(a=n,a&&typeof a=="object"&&(a=Ok(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(a=n[0],a&&typeof a=="object"&&(a=Ok(t,a),!a)||!Pu(n[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(Lk.call(s,e)&&++n&&!Lk.call(t,e)||!(e in t)||!Pu(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}const ND=S.createContext(null);function Fu({children:s,type:t}){return x.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const LV="noopener noreferrer nofollow";class OV{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ae(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Ae(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Ae(this.pdfDocument),Ae(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Ae(Array.isArray(e));const n=e[0];new Promise(a=>{Ae(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{a(o)}).catch(()=>{Ae(!1)}):typeof n=="number"?a(n):Ae(!1)}).then(a=>{const o=a+1;Ae(this.pdfViewer),Ae(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Ae(this.pdfViewer),Ae(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||LV,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const jk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},sb=typeof window<"u",DD=sb&&window.location.protocol==="file:";function jV(s){return typeof s<"u"}function ll(s){return jV(s)&&s!==null}function PV(s){return typeof s=="string"}function FV(s){return s instanceof ArrayBuffer}function zV(s){return Ae(sb),s instanceof Blob}function GA(s){return PV(s)&&/^data:/.test(s)}function Pk(s){Ae(GA(s));const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function IV(){return sb&&window.devicePixelRatio||1}const LD="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Fk(){zn(!DD,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${LD}`)}function BV(){zn(!DD,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${LD}`)}function wc(s){s!=null&&s.cancel&&s.cancel()}function XA(s,t){return Object.defineProperty(s,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.view[3]},configurable:!0}),s}function UV(s){return s.name==="RenderingCancelledException"}function HV(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}function VV(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function Ih(){return S.useReducer(VV,{value:void 0,error:void 0})}var qV=function(s,t,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return new(e||(e=Promise))(function(o,c){function u(g){try{f(n.next(g))}catch(y){c(y)}}function d(g){try{f(n.throw(g))}catch(y){c(y)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((n=n.apply(s,t||[])).next())})},zk=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(e[n[a]]=s[n[a]]);return e};const{PDFDataRangeTransport:GV}=uV,XV=(s,t)=>{switch(t){case jk.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case jk.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function Ik(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const $V=S.forwardRef(function(t,e){var{children:n,className:a,error:o="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:u,file:d,inputRef:f,imageResourcesPath:g,loading:y="Loading PDF",noData:b="No PDF file specified.",onItemClick:w,onLoadError:A,onLoadProgress:E,onLoadSuccess:T,onPassword:C=XV,onSourceError:D,onSourceSuccess:L,options:z,renderMode:B,rotate:U}=t,O=zk(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[H,W]=Ih(),{value:Q,error:nt}=H,[ot,ht]=Ih(),{value:lt,error:J}=ot,F=S.useRef(new OV),q=S.useRef([]),X=S.useRef(void 0),wt=S.useRef(void 0);d&&d!==X.current&&Ik(d)&&(zn(!Pu(d,X.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),X.current=d),z&&z!==wt.current&&(zn(!Pu(z,wt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),wt.current=z);const Ct=S.useRef({scrollPageIntoView:re=>{const{dest:le,pageNumber:De,pageIndex:Re=De-1}=re;if(w){w({dest:le,pageIndex:Re,pageNumber:De});return}const Un=q.current[Re];if(Un){Un.scrollIntoView();return}zn(!1,`An internal link leading to page ${De} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});S.useImperativeHandle(e,()=>({linkService:F,pages:q,viewer:Ct}),[]);function j(){L&&L()}function G(){nt&&(zn(!1,nt.toString()),D&&D(nt))}function tt(){W({type:"RESET"})}S.useEffect(tt,[d,W]);const at=S.useCallback(()=>qV(this,void 0,void 0,function*(){if(!d)return null;if(typeof d=="string")return GA(d)?{data:Pk(d)}:(Fk(),{url:d});if(d instanceof GV)return{range:d};if(FV(d))return{data:d};if(sb&&zV(d))return{data:yield HV(d)};if(Ae(typeof d=="object"),Ae(Ik(d)),"url"in d&&typeof d.url=="string"){if(GA(d.url)){const{url:re}=d,le=zk(d,["url"]),De=Pk(re);return Object.assign({data:De},le)}Fk()}return d}),[d]);S.useEffect(()=>{const re=_g(at());return re.promise.then(le=>{W({type:"RESOLVE",value:le})}).catch(le=>{W({type:"REJECT",error:le})}),()=>{wc(re)}},[at,W]),S.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){G();return}j()}},[Q]);function pt(){lt&&(T&&T(lt),q.current=new Array(lt.numPages),F.current.setDocument(lt))}function At(){J&&(zn(!1,J.toString()),A&&A(J))}S.useEffect(function(){ht({type:"RESET"})},[ht,Q]),S.useEffect(function(){if(!Q)return;const le=z?Object.assign(Object.assign({},Q),z):Q,De=RD(le);E&&(De.onProgress=E),C&&(De.onPassword=C);const Re=De,Un=Re.promise.then(os=>{ht({type:"RESOLVE",value:os})}).catch(os=>{Re.destroyed||ht({type:"REJECT",error:os})});return()=>{Un.finally(()=>Re.destroy())}},[z,ht,Q]),S.useEffect(()=>{if(!(typeof lt>"u")){if(lt===!1){At();return}pt()}},[lt]),S.useEffect(function(){F.current.setViewer(Ct.current),F.current.setExternalLinkRel(c),F.current.setExternalLinkTarget(u)},[c,u]);const ut=S.useCallback((re,le)=>{q.current[re]=le},[]),Gt=S.useCallback(re=>{delete q.current[re]},[]),Pt=S.useMemo(()=>({imageResourcesPath:g,linkService:F.current,onItemClick:w,pdf:lt,registerPage:ut,renderMode:B,rotate:U,unregisterPage:Gt}),[g,w,lt,ut,B,U,Gt]),Xt=S.useMemo(()=>MD(O,()=>lt),[O,lt]);function ce(){return x.jsx(ND.Provider,{value:Pt,children:n})}function cn(){return d?lt==null?x.jsx(Fu,{type:"loading",children:typeof y=="function"?y():y}):lt===!1?x.jsx(Fu,{type:"error",children:typeof o=="function"?o():o}):ce():x.jsx(Fu,{type:"no-data",children:typeof b=="function"?b():b})}return x.jsx("div",Object.assign({className:Vh("react-pdf__Document",a),ref:f,style:{"--scale-factor":"1"}},Xt,{children:cn()}))});function OD(){return S.useContext(ND)}function jD(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(o){e.forEach(function(c){typeof c=="function"?c(o):c&&(c.current=o)})}}const PD=S.createContext(null),FD={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},YV=/^H(\d+)$/;function KV(s){return s in FD}function rb(s){return"children"in s}function zD(s){return rb(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function WV(s){const t={};if(rb(s)){const{role:e}=s,n=e.match(YV);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(KV(e)){const a=FD[e];a&&(t.role=a)}}return t}function ID(s){const t={};if(rb(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),zD(s)){const[e]=s.children;if(e){const n=ID(e);return Object.assign(Object.assign({},t),n)}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function QV(s){return s?Object.assign(Object.assign({},WV(s)),ID(s)):null}function BD({className:s,node:t}){const e=S.useMemo(()=>QV(t),[t]),n=S.useMemo(()=>!rb(t)||zD(t)?null:t.children.map((a,o)=>x.jsx(BD,{node:a},o)),[t]);return x.jsx("span",Object.assign({className:s},e,{children:n}))}function ab(){return S.useContext(PD)}function ZV(){const s=ab();Ae(s);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,a]=Ih(),{value:o,error:c}=n,{customTextRenderer:u,page:d}=s;function f(){o&&e&&e(o)}function g(){c&&(zn(!1,c.toString()),t&&t(c))}return S.useEffect(function(){a({type:"RESET"})},[a,d]),S.useEffect(function(){if(u||!d)return;const b=_g(d.getStructTree()),w=b;return b.promise.then(A=>{a({type:"RESOLVE",value:A})}).catch(A=>{a({type:"REJECT",error:A})}),()=>wc(w)},[u,d,a]),S.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}f()}},[o]),o?x.jsx(BD,{className:"react-pdf__Page__structTree structTree",node:o}):null}const Bk=TD;function JV(s){const t=ab();Ae(t);const e=Object.assign(Object.assign({},t),s),{_className:n,canvasBackground:a,devicePixelRatio:o=IV(),onRenderError:c,onRenderSuccess:u,page:d,renderForms:f,renderTextLayer:g,rotate:y,scale:b}=e,{canvasRef:w}=s;Ae(d);const A=S.useRef(null);function E(){d&&u&&u(XA(d,b))}function T(z){UV(z)||(zn(!1,z.toString()),c&&c(z))}const C=S.useMemo(()=>d.getViewport({scale:b*o,rotation:y}),[o,d,y,b]),D=S.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);S.useEffect(function(){if(!d)return;d.cleanup();const{current:B}=A;if(!B)return;B.width=C.width,B.height=C.height,B.style.width=`${Math.floor(D.width)}px`,B.style.height=`${Math.floor(D.height)}px`,B.style.visibility="hidden";const U={annotationMode:f?Bk.ENABLE_FORMS:Bk.ENABLE,canvasContext:B.getContext("2d",{alpha:!1}),viewport:C};a&&(U.background=a);const O=d.render(U),H=O;return O.promise.then(()=>{B.style.visibility="",E()}).catch(T),()=>wc(H)},[a,d,f,C,D]);const L=S.useCallback(()=>{const{current:z}=A;z&&(z.width=0,z.height=0)},[]);return S.useEffect(()=>L,[L]),x.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:jD(w,A),style:{display:"block",userSelect:"none"},children:g?x.jsx(ZV,{}):null})}function tq(s){return"str"in s}function eq(){const s=ab();Ae(s);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:c,pageIndex:u,pageNumber:d,rotate:f,scale:g}=s;Ae(c);const[y,b]=Ih(),{value:w,error:A}=y,E=S.useRef(null),T=S.useRef(void 0);zn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function C(){w&&n&&n(w)}function D(){A&&(zn(!1,A.toString()),e&&e(A))}S.useEffect(function(){b({type:"RESET"})},[c,b]),S.useEffect(function(){if(!c)return;const W=_g(c.getTextContent()),Q=W;return W.promise.then(nt=>{b({type:"RESOLVE",value:nt})}).catch(nt=>{b({type:"REJECT",error:nt})}),()=>wc(Q)},[c,b]),S.useEffect(()=>{if(w!==void 0){if(w===!1){D();return}C()}},[w]);const L=S.useCallback(()=>{o&&o()},[o]),z=S.useCallback(H=>{zn(!1,H.toString()),a&&a(H)},[a]);function B(){const H=T.current;H&&H.classList.add("active")}function U(){const H=T.current;H&&H.classList.remove("active")}const O=S.useMemo(()=>c.getViewport({scale:g,rotation:f}),[c,f,g]);return S.useLayoutEffect(function(){if(!c||!w)return;const{current:W}=E;if(!W)return;W.innerHTML="";const Q=c.streamTextContent({includeMarkedContent:!0}),nt={container:W,textContentSource:Q,viewport:O},ot=new kD(nt),ht=ot;return ot.render().then(()=>{const lt=document.createElement("div");lt.className="endOfContent",W.append(lt),T.current=lt;const J=W.querySelectorAll('[role="presentation"]');if(t){let F=0;w.items.forEach((q,X)=>{if(!tq(q))return;const wt=J[F];if(!wt)return;const Ct=t(Object.assign({pageIndex:u,pageNumber:d,itemIndex:X},q));wt.innerHTML=Ct,F+=q.str&&q.hasEOL?2:1})}L()}).catch(z),()=>wc(ht)},[t,z,L,c,u,d,w,O]),x.jsx("div",{className:Vh("react-pdf__Page__textContent","textLayer"),onMouseUp:U,onMouseDown:B,ref:E})}function nq(){const s=OD(),t=ab();Ae(t);const e=Object.assign(Object.assign({},s),t),{imageResourcesPath:n,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:f,pdf:g,renderForms:y,rotate:b,scale:w=1}=e;Ae(g),Ae(f),Ae(a);const[A,E]=Ih(),{value:T,error:C}=A,D=S.useRef(null);zn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function L(){T&&c&&c(T)}function z(){C&&(zn(!1,C.toString()),o&&o(C))}S.useEffect(function(){E({type:"RESET"})},[E,f]),S.useEffect(function(){if(!f)return;const W=_g(f.getAnnotations()),Q=W;return W.promise.then(nt=>{E({type:"RESOLVE",value:nt})}).catch(nt=>{E({type:"REJECT",error:nt})}),()=>{wc(Q)}},[E,f]),S.useEffect(()=>{if(T!==void 0){if(T===!1){z();return}L()}},[T]);function B(){d&&d()}function U(H){zn(!1,`${H}`),u&&u(H)}const O=S.useMemo(()=>f.getViewport({scale:w,rotation:b}),[f,b,w]);return S.useEffect(function(){if(!g||!f||!a||!T)return;const{current:W}=D;if(!W)return;const Q=O.clone({dontFlip:!0}),nt={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:W,l10n:null,page:f,viewport:Q},ot={annotations:T,annotationStorage:g.annotationStorage,div:W,imageResourcesPath:n,linkService:a,page:f,renderForms:y,viewport:Q};W.innerHTML="";try{new CD(nt).render(ot),B()}catch(ht){U(ht)}return()=>{}},[T,n,a,f,g,y,O]),x.jsx("div",{className:Vh("react-pdf__Page__annotations","annotationLayer"),ref:D})}var iq=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(e[n[a]]=s[n[a]]);return e};const Uk=1;function sq(s){const t=OD(),e=Object.assign(Object.assign({},t),s),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:c,children:u,className:d,customRenderer:f,customTextRenderer:g,devicePixelRatio:y,error:b="Failed to load the page.",height:w,inputRef:A,loading:E="Loading page",noData:T="No page specified.",onGetAnnotationsError:C,onGetAnnotationsSuccess:D,onGetStructTreeError:L,onGetStructTreeSuccess:z,onGetTextError:B,onGetTextSuccess:U,onLoadError:O,onLoadSuccess:H,onRenderAnnotationLayerError:W,onRenderAnnotationLayerSuccess:Q,onRenderError:nt,onRenderSuccess:ot,onRenderTextLayerError:ht,onRenderTextLayerSuccess:lt,pageIndex:J,pageNumber:F,pdf:q,registerPage:X,renderAnnotationLayer:wt=!0,renderForms:Ct=!1,renderMode:j="canvas",renderTextLayer:G=!0,rotate:tt,scale:at=Uk,unregisterPage:pt,width:At}=e,ut=iq(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Gt,Pt]=Ih(),{value:Xt,error:ce}=Gt,cn=S.useRef(null);Ae(q);const re=ll(F)?F-1:J??null,le=F??(ll(J)?J+1:null),De=tt??(Xt?Xt.rotate:null),Re=S.useMemo(()=>{if(!Xt)return null;let Hn=1;const ls=at??Uk;if(At||w){const Ca=Xt.getViewport({scale:1,rotation:De});At?Hn=At/Ca.width:w&&(Hn=w/Ca.height)}return ls*Hn},[w,Xt,De,at,At]);S.useEffect(function(){return()=>{ll(re)&&a&&pt&&pt(re)}},[a,q,re,pt]);function Un(){if(H){if(!Xt||!Re)return;H(XA(Xt,Re))}if(a&&X){if(!ll(re)||!cn.current)return;X(re,cn.current)}}function os(){ce&&(zn(!1,ce.toString()),O&&O(ce))}S.useEffect(function(){Pt({type:"RESET"})},[Pt,q,re]),S.useEffect(function(){if(!q||!le)return;const ls=_g(q.getPage(le)),Ca=ls;return ls.promise.then(Ta=>{Pt({type:"RESOLVE",value:Ta})}).catch(Ta=>{Pt({type:"REJECT",error:Ta})}),()=>wc(Ca)},[Pt,q,le]),S.useEffect(()=>{if(Xt!==void 0){if(Xt===!1){os();return}Un()}},[Xt,Re]);const Ls=S.useMemo(()=>Xt&&ll(re)&&le&&ll(De)&&ll(Re)?{_className:n,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:C,onGetAnnotationsSuccess:D,onGetStructTreeError:L,onGetStructTreeSuccess:z,onGetTextError:B,onGetTextSuccess:U,onRenderAnnotationLayerError:W,onRenderAnnotationLayerSuccess:Q,onRenderError:nt,onRenderSuccess:ot,onRenderTextLayerError:ht,onRenderTextLayerSuccess:lt,page:Xt,pageIndex:re,pageNumber:le,renderForms:Ct,renderTextLayer:G,rotate:De,scale:Re}:null,[n,o,g,y,C,D,L,z,B,U,W,Q,nt,ot,ht,lt,Xt,re,le,Ct,G,De,Re]),pr=S.useMemo(()=>MD(ut,()=>Xt&&(Re?XA(Xt,Re):void 0)),[ut,Xt,Re]),di=`${re}@${Re}/${De}`;function Qh(){switch(j){case"custom":return Ae(f),x.jsx(f,{},`${di}_custom`);case"none":return null;case"canvas":default:return x.jsx(JV,{canvasRef:c},`${di}_canvas`)}}function Uo(){return G?x.jsx(eq,{},`${di}_text`):null}function yn(){return wt?x.jsx(nq,{},`${di}_annotations`):null}function Zh(){return x.jsxs(PD.Provider,{value:Ls,children:[Qh(),Uo(),yn(),u]})}function Nc(){return le?q===null||Xt===void 0||Xt===null?x.jsx(Fu,{type:"loading",children:typeof E=="function"?E():E}):q===!1||Xt===!1?x.jsx(Fu,{type:"error",children:typeof b=="function"?b():b}):Zh():x.jsx(Fu,{type:"no-data",children:typeof T=="function"?T():T})}return x.jsx("div",Object.assign({className:Vh(n,d),"data-page-number":le,ref:jD(A,cn),style:{"--scale-factor":`${Re}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},pr,{children:Nc()}))}BV();B_.workerSrc="pdf.worker.mjs";B_.workerSrc=new URL("/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();function rq({pdfUrl:s}){const[t,e]=S.useState(0),[n,a]=S.useState(1),[o,c]=S.useState(1),[u,d]=S.useState(null),f=S.useRef(null);function g({numPages:C}){console.log("[PDFViewer] PDF loaded successfully, pages:",C),e(C),a(1),d(null)}function y(C){console.error("[PDFViewer] Failed to load PDF:",C),d(C.message||"Failed to load PDF")}const b=()=>{const C=Math.max(n-1,1);a(C),A(C)},w=()=>{const C=Math.min(n+1,t);a(C),A(C)},A=C=>{const D=document.getElementById(`pdf-page-${C}`);D&&f.current&&D.scrollIntoView({behavior:"smooth",block:"start"})},E=()=>{c(C=>Math.min(C+.2,3))},T=()=>{c(C=>Math.max(C-.2,.5))};return x.jsxs("div",{className:"w-full h-full flex flex-col bg-gray-50 dark:bg-gray-900 relative",children:[x.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shrink-0 sticky top-0 z-50 shadow-sm",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:b,disabled:n<=1,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Trang trc ()",children:x.jsx(q3,{className:"h-5 w-5"})}),x.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 min-w-[60px] text-center font-medium",children:[n," / ",t||""]}),x.jsx("button",{onClick:w,disabled:n>=t,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Trang sau ()",children:x.jsx(B3,{className:"h-5 w-5"})})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:T,disabled:o<=.5,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Thu nh ()",children:x.jsx(qF,{className:"h-5 w-5"})}),x.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 min-w-[50px] text-center font-medium",children:[Math.round(o*100),"%"]}),x.jsx("button",{onClick:E,disabled:o>=3,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Phng to (+)",children:x.jsx(HF,{className:"h-5 w-5"})})]})]}),x.jsx("div",{ref:f,className:"flex-1 overflow-y-auto overflow-x-hidden flex flex-col items-center py-4 px-2 bg-gray-100 dark:bg-gray-900",style:{scrollBehavior:"smooth"},children:u?x.jsxs("div",{className:"text-center p-8",children:[x.jsx("div",{className:"text-destructive text-lg mb-2",children:"Failed to load PDF"}),x.jsx("div",{className:"text-sm text-muted-foreground",children:u}),x.jsxs("div",{className:"text-xs text-muted-foreground mt-4",children:["URL: ",s.substring(0,50),"..."]})]}):x.jsx($V,{file:s,onLoadSuccess:g,onLoadError:y,loading:x.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-2"}),x.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading PDF..."})]}),error:x.jsx("div",{className:"text-center p-8 text-destructive",children:"Error rendering PDF"}),children:Array.from(new Array(t),(C,D)=>x.jsx("div",{id:`pdf-page-${D+1}`,className:"mb-4",children:x.jsx(sq,{pageNumber:D+1,scale:o,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-lg"})},`page_${D+1}`))})})]})}const aq="/api";function oq({projectId:s,targetPath:t="/",onClose:e,onSuccess:n,onUploadComplete:a}){const[o,c]=S.useState([]),[u,d]=S.useState(!1),[f,g]=S.useState(!1),y=S.useRef(null),b=S.useRef(null),w=S.useCallback(O=>{O.preventDefault(),O.stopPropagation(),d(!0)},[]),A=S.useCallback(O=>{O.preventDefault(),O.stopPropagation(),O.currentTarget===O.target&&d(!1)},[]),E=S.useCallback(O=>{O.preventDefault(),O.stopPropagation()},[]),T=S.useCallback(async O=>{O.preventDefault(),O.stopPropagation(),d(!1);const H=Array.from(O.dataTransfer.files),W=Array.from(O.dataTransfer.items),Q=[];if(W.length>0&&W[0].webkitGetAsEntry!==void 0){for(let ot=0;ot<W.length;ot++){const ht=W[ot];if(ht.kind==="file"||ht.kind===""){const lt=ht.webkitGetAsEntry();if(lt)try{const J=await C(lt);Q.push(...J)}catch(J){console.error("[Upload] Error processing entry:",lt==null?void 0:lt.name,J)}else{const J=ht.getAsFile();J&&Q.push(J)}}}Q.length<H.length&&(Q.length=0,Q.push(...H))}else Q.push(...H);L(Q)},[]),C=async(O,H="")=>new Promise((W,Q)=>{if(O.isFile)O.file(nt=>{const ot=H+nt.name,ht=new File([nt],ot,{type:nt.type});ht.relativePath=ot,W([ht])},Q);else if(O.isDirectory){const nt=O.createReader(),ot=[],ht=()=>{nt.readEntries(async lt=>{if(lt.length===0){const J=[];for(const F of ot){const q=await C(F,H+O.name+"/");J.push(...q)}W(J)}else ot.push(...lt),ht()},Q)};ht()}else W([])}),D=O=>{const H=O.target.files;if(H){const Q=Array.from(H).map(nt=>(nt.webkitRelativePath&&(nt.relativePath=nt.webkitRelativePath),nt));L(Q)}},L=O=>{const H=O.map(W=>({file:W,progress:0,status:"pending"}));c(W=>[...W,...H])},z=O=>{c(H=>H.filter((W,Q)=>Q!==O))},B=async()=>{g(!0);const O=[],H=localStorage.getItem("heytex_token");for(let Q=0;Q<o.length;Q++){const nt=o[Q];try{c(F=>{const q=[...F];return q[Q]={...q[Q],status:"uploading",progress:0},q});const ot=new FormData;ot.append("files",nt.file),ot.append("projectId",s);const ht=nt.file.relativePath||nt.file.name;ot.append("relativePath",ht),ot.append("targetPath",t);const lt=await fetch(`${aq}/upload/files`,{method:"POST",headers:{...H?{Authorization:`Bearer ${H}`}:{}},body:ot});if(!lt.ok){const F=await lt.json().catch(()=>({error:"Upload failed"}));throw new Error(F.error||"Upload failed")}const J=await lt.json();J.files&&J.files.length>0&&O.push(...J.files),c(F=>{const q=[...F];return q[Q]={...q[Q],status:"success",progress:100},q})}catch(ot){c(ht=>{const lt=[...ht];return lt[Q]={...lt[Q],status:"error",error:ot instanceof Error?ot.message:"Upload failed"},lt})}}g(!1),O.length>0&&(n==null||n(),a==null||a(O)),o.every((Q,nt)=>{const ot=o[nt];return(ot==null?void 0:ot.status)==="success"})&&setTimeout(e,1e3)},U=O=>{if(O===0)return"0 Bytes";const H=1024,W=["Bytes","KB","MB","GB"],Q=Math.floor(Math.log(O)/Math.log(H));return Math.round(O/Math.pow(H,Q)*100)/100+" "+W[Q]};return x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-[90%] max-w-2xl max-h-[80vh] flex flex-col shadow-xl",onClick:O=>O.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t==="/"?"Upload Files":`Upload to ${t}`}),x.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:x.jsx(s_,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})})]}),x.jsxs("div",{className:"flex-1 p-5 overflow-y-auto",children:[x.jsxs("div",{className:`
                            border-2 border-dashed rounded-lg p-10 text-center cursor-pointer
                            transition-all duration-200
                            ${u?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900/50 hover:border-blue-400 hover:bg-blue-50/50"}
                        `,onDragEnter:w,onDragLeave:A,onDragOver:E,onDrop:T,onClick:()=>{var O;return(O=y.current)==null?void 0:O.click()},children:[x.jsx(PF,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),x.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:u?"Drop files or folders here":"Drag & drop files or folders here"}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Supports multiple files, folders, and ZIP archives"}),x.jsxs("div",{className:"flex gap-2 justify-center",onClick:O=>O.stopPropagation(),children:[x.jsx("button",{onClick:()=>{var O;return(O=y.current)==null?void 0:O.click()},className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Select Files"}),x.jsx("button",{onClick:()=>{var O;return(O=b.current)==null?void 0:O.click()},className:"px-4 py-2 text-sm bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors",children:"Select Folder"})]}),x.jsx("input",{ref:y,type:"file",multiple:!0,onChange:D,className:"hidden"}),x.jsx("input",{ref:b,type:"file",webkitdirectory:"",directory:"",multiple:!0,onChange:D,className:"hidden"})]}),o.length>0&&x.jsxs("div",{className:"mt-6",children:[x.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Selected Files (",o.length,")"]}),x.jsx("div",{className:"space-y-2",children:o.map((O,H)=>x.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[x.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[x.jsx(ay,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:O.file.relativePath||O.file.name}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:U(O.file.size)})]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[O.status==="uploading"&&x.jsx("div",{className:"w-24 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${O.progress}%`}})}),O.status==="success"&&x.jsx(Y3,{className:"h-5 w-5 text-green-500"}),O.status==="error"&&x.jsx("div",{title:O.error,children:x.jsx(X3,{className:"h-5 w-5 text-red-500"})}),O.status==="pending"&&x.jsx("button",{onClick:()=>z(H),disabled:f,className:"px-3 py-1 text-xs font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded disabled:opacity-50",children:"Remove"})]})]},H))})]})]}),x.jsxs("div",{className:"flex items-center justify-end gap-3 p-5 border-t border-gray-200 dark:border-gray-700",children:[x.jsx("button",{onClick:e,disabled:f,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg disabled:opacity-50 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:()=>{o.every(H=>H.status==="success"||H.status==="error")&&!f?e():B()},disabled:o.length===0||f,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.every(H=>H.status==="success"||H.status==="error")&&!f?"Close":f?"Uploading...":`Upload ${o.length} file${o.length!==1?"s":""}`})]})]})})}const lq="/";function cq(){const{projectId:s}=Hj(),t=_c(),{user:e}=Ec(),{currentProject:n,setCurrentProject:a,currentFile:o,setCurrentFile:c,files:u,setFiles:d,openFiles:f,addOpenFile:g,removeOpenFile:y,isSidebarOpen:b,toggleSidebar:w,isPreviewOpen:A,togglePreview:E,theme:T,toggleTheme:C,compilationStatus:D,compilationError:L,setCompilationStatus:z,pdfData:B,setPdfData:U,updateFileContent:O}=uR(),[H,W]=S.useState(!0),[Q,nt]=S.useState(!1),[ot,ht]=S.useState(new Set(["/"])),[lt,J]=S.useState([]),[F,q]=S.useState(!1),[X,wt]=S.useState(!1),[Ct,j]=S.useState(null),[G,tt]=S.useState(null),[at,pt]=S.useState(null),[At,ut]=S.useState("pdf"),[Gt,Pt]=S.useState(""),[Xt,ce]=S.useState(""),cn=S.useRef(null),[re,le]=S.useState(256),[De,Re]=S.useState(50),[Un,os]=S.useState(null),Ls=S.useRef(null),pr=S.useRef(null),di=S.useRef(null),Qh=S.useRef(null),Uo=S.useRef(null);S.useEffect(()=>{if(!s)return;(async()=>{var ct;try{const{project:gt}=await Mn.getProject(s);a(gt),d(gt.files||[]);const Ot=(ct=gt.files)==null?void 0:ct.find(kt=>kt.path===`/${gt.mainFile}`);Ot&&g(Ot)}catch(gt){console.error("Failed to load project:",gt),t("/dashboard")}finally{W(!1)}})()},[s]),S.useEffect(()=>{D==="compiling"&&cn.current&&cn.current.scrollIntoView({behavior:"smooth"})},[Xt,D]),S.useEffect(()=>{if(!o||!Jh()){pt(null);return}(async()=>{try{const ct=localStorage.getItem("heytex_token"),gt=await fetch(`/api/files/${o.id}/content`,{headers:{...ct?{Authorization:`Bearer ${ct}`}:{}}});if(!gt.ok)throw new Error("Failed to load image");const Ot=await gt.blob(),kt=URL.createObjectURL(Ot);return pt(kt),()=>{kt&&URL.revokeObjectURL(kt)}}catch(ct){console.error("Error loading image:",ct),pt(null)}})()},[o==null?void 0:o.id]),S.useEffect(()=>{if(!o||!n||!e)return;const rt=dy(lq,{path:"/collab",transports:["websocket"]});Ls.current=rt;const ct=new Kh;di.current=ct;const gt=`project:${n.id}:${o.path}`;return rt.on("connect",()=>{console.log("Connected to collaboration server"),rt.emit("join-room",{docName:gt,user:{id:e.id,name:e.name}})}),rt.on("sync",Ot=>{console.log("Received sync message")}),rt.on("update",Ot=>{dU(ct,new Uint8Array(Ot))}),rt.on("current-users",Ot=>{const kt=Array.from(new Map(Ot.map(Le=>[Le.id,Le])).values());J(kt)}),rt.on("user-joined",Ot=>{J(kt=>[...kt.filter(Ce=>Ce.id!==Ot.id),Ot])}),rt.on("user-left",Ot=>{J(kt=>kt.filter(Le=>Le.id!==Ot))}),()=>{rt.disconnect(),Ls.current=null,di.current=null}},[o==null?void 0:o.id,n==null?void 0:n.id,e]);const yn=(rt,ct)=>{Qh.current=rt,ct.languages.register({id:"latex"}),ct.languages.register({id:"typst"}),ct.languages.setMonarchTokensProvider("latex",{tokenizer:{root:[[/\\[a-zA-Z@]+/,"keyword"],[/\\[^a-zA-Z@]/,"keyword"],[/%.*$/,"comment"],[/\{/,"delimiter.curly"],[/\}/,"delimiter.curly"],[/\[/,"delimiter.square"],[/\]/,"delimiter.square"],[/\$\$/,"string","@displaymath"],[/\$/,"string","@inlinemath"],[/\\begin\{[^}]+\}/,"keyword.control"],[/\\end\{[^}]+\}/,"keyword.control"]],inlinemath:[[/[^$]+/,"string"],[/\$/,"string","@pop"]],displaymath:[[/[^$]+/,"string"],[/\$\$/,"string","@pop"]]}}),ct.languages.setMonarchTokensProvider("typst",{tokenizer:{root:[[/#[a-zA-Z]+/,"keyword"],[/\/\/.*$/,"comment"],[/\/\*/,"comment","@comment"],[/\[/,"delimiter.square"],[/\]/,"delimiter.square"],[/\{/,"delimiter.curly"],[/\}/,"delimiter.curly"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"]],comment:[[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/"/,"string","@pop"]]}}),o!=null&&o.content&&rt.setValue(o.content)},Zh=rt=>{var ct;if(!(!o||rt===void 0)&&(O(o.id,rt),Uo.current&&clearTimeout(Uo.current),Uo.current=setTimeout(async()=>{await ls(o.id,rt)},1500),di.current&&((ct=Ls.current)!=null&&ct.connected))){const gt=gU(di.current);Ls.current.emit("update",gt)}},Nc=S.useRef(null),Hn=S.useRef(null);S.useRef(null),S.useEffect(()=>((async()=>{console.log(" [HeyTeX v2] Skipping WASM XeTeX/Dvipdfmx engines; using server-side TeXLive compilation");try{const{TypstCompilerEngine:ct}=await gl(async()=>{const{TypstCompilerEngine:Ot}=await import("./TypstCompilerEngine-pRJlCa9l.js");return{TypstCompilerEngine:Ot}},[]),gt=new ct;Hn.current=gt,console.log("TypstCompilerEngine initialized")}catch(ct){console.error("Failed to init TypstCompilerEngine:",ct)}})(),()=>{Nc.current,Hn.current&&Hn.current.terminate()}),[]),S.useEffect(()=>{if((n==null?void 0:n.engine)!=="LATEX")return;const rt=async()=>{try{const{compilationAPI:gt}=await gl(async()=>{const{compilationAPI:kt}=await import("./compilation-_dsdwnNG.js");return{compilationAPI:kt}},[]),Ot=await gt.getStats();tt(Ot.stats)}catch(gt){console.error("[Queue Stats] Failed to fetch:",gt)}};rt();const ct=setInterval(rt,3e3);return()=>clearInterval(ct)},[n==null?void 0:n.engine]);const ls=async(rt,ct)=>{nt(!0);try{await Mn.updateFile(rt,{content:ct})}catch(gt){console.error("Failed to save:",gt)}finally{nt(!1)}},Ca=async()=>{if(o!=null&&o.content){z("compiling"),ce("");try{if(((n==null?void 0:n.engine)||"LATEX")==="TYPST"){if(ce(` Starting Typst compilation...
`),!Hn.current)throw new Error("Typst engine not ready");ce(gt=>gt+" Compiling "+o.name+`...
`);const ct=await Hn.current.compile("main.typ",{"main.typ":o.content},"pdf");if(ct.output){ce(kt=>kt+` Compilation successful!
`);const gt=new Blob([ct.output],{type:"application/pdf"}),Ot=URL.createObjectURL(gt);U(Ot),z("success")}else throw new Error("No output from Typst")}else{ce(` Starting LaTeX compilation on server...
`);const{compilationAPI:ct}=await gl(async()=>{const{compilationAPI:kt}=await import("./compilation-_dsdwnNG.js");return{compilationAPI:kt}},[]);console.log("[Compile] Submitting job to server..."),ce(kt=>kt+` Submitting ${o.name} to compilation queue...
`);const gt=await ct.submitJob(o.name,o.content,n==null?void 0:n.id);console.log("[Compile] Job submitted:",gt.jobId,`Queue: ${gt.stats.queued}, Compiling: ${gt.stats.compiling}`),ce(kt=>kt+` Job submitted: ${gt.jobId}
 Queue stats: ${gt.stats.compiling} compiling, ${gt.stats.queued} queued
 Waiting for compilation to complete...
`);const Ot=await ct.pollJobStatus(gt.jobId,kt=>{console.log("[Compile] Job status:",kt.job.status,kt.job.queuePosition?`Position: ${kt.job.queuePosition}`:""),kt.job.queuePosition!==void 0&&kt.job.queuePosition>0?ce(Le=>{var Fi;const Ce=Le.split(`
`);return(Fi=Ce[Ce.length-2])!=null&&Fi.includes("Queue position:")&&Ce.splice(-2,1),Ce.join(`
`)+` Queue position: ${kt.job.queuePosition}
`}):kt.job.status==="compiling"&&ce(Le=>Le.includes(" Compiling...")?Le:Le+` Compiling... (running xelatex 3 times)

`)},kt=>{console.log("[Compile] Log update, length:",kt.length);const Ce=kt.split(`
`).slice(-50).join(`
`);ce(Fi=>Fi.split(`
`).slice(0,5).join(`
`)+`

 LaTeX Output:
`+Ce)});if(Ot.job.status==="completed"){console.log("[Compile] Downloading PDF..."),ce(Ce=>Ce+` Downloading PDF output...
`);const kt=await ct.getPDF(gt.jobId),Le=URL.createObjectURL(kt);U(Le),ce(Ce=>Ce+` Compilation completed successfully!
 PDF size: ${(kt.size/1024).toFixed(2)} KB
`),z("success"),console.log("[Compile] PDF ready");try{const Ce=await ct.getLog(gt.jobId);Pt(Ce||"No log available")}catch(Ce){console.warn("[Compile] Failed to get log:",Ce)}}else if(Ot.job.status==="failed"){ce(Fi=>Fi+` Compilation failed!
`);const kt=await ct.getLog(gt.jobId);Pt(kt||"No log available");const Le=xH(kt),Ce=AH(Le);z("error",Ce||Ot.job.error||"Compilation failed"),ut("logs")}}}catch(rt){console.error("[Compile] Error:",rt);const ct=rt instanceof Error?rt.message:"Unknown error";ce(gt=>gt+`
 Error: ${ct}
`),z("error",ct),ut("logs")}}},Ta=rt=>{ht(ct=>{const gt=new Set(ct);return gt.has(rt)?gt.delete(rt):gt.add(rt),gt})},ob=async()=>{const rt=prompt("Enter file name (e.g., main.tex or document.typ):");if(!(!rt||!n))try{const{file:ct}=await Mn.createFile({projectId:n.id,name:rt,path:`/${rt}`,content:""});d([...u,ct]),g(ct)}catch(ct){console.error("Failed to create file:",ct),alert("Failed to create file")}},lb=async()=>{const rt=prompt("Enter folder name:");if(!(!rt||!n))try{const{file:ct}=await Mn.createFile({projectId:n.id,name:rt,path:`/${rt}`,isFolder:!0});d([...u,ct])}catch(ct){console.error("Failed to create folder:",ct),alert("Failed to create folder")}},Ho=()=>{wt(!0)},Vn=async rt=>{const ct=rt.target.files;if(!(!ct||ct.length===0||!n)){for(const gt of Array.from(ct))try{const Ot=new FileReader,kt=await new Promise((Ce,Fi)=>{Ot.onload=()=>{const gr=Ot.result,Sg=gr.split(",")[1]||gr;Ce(Sg)},Ot.onerror=Fi,Ot.readAsDataURL(gt)}),{file:Le}=await Mn.uploadFile({projectId:n.id,path:`/${gt.name}`,name:gt.name,mimeType:gt.type||"application/octet-stream",data:kt});d([...u,Le]),(gt.name.endsWith(".tex")||gt.name.endsWith(".typ")||gt.name.endsWith(".txt"))&&g(Le)}catch(Ot){console.error(`Failed to upload ${gt.name}:`,Ot),alert(`Failed to upload ${gt.name}`)}pr.current&&(pr.current.value="")}},Os=async()=>{if(!o){alert("Please select a file to rename");return}const rt=prompt("Enter new name:",o.name);if(!(!rt||rt===o.name))try{await Mn.updateFile(o.id,{name:rt});const ct=u.map(gt=>gt.id===o.id?{...gt,name:rt}:gt);d(ct),o.id===o.id&&c({...o,name:rt})}catch(ct){console.error("Failed to rename file:",ct),alert("Failed to rename file")}},qn=async()=>{if(!o){alert("Please select a file to delete");return}if(confirm(`Are you sure you want to delete "${o.name}"?`))try{await Mn.deleteFile(o.id);const rt=u.filter(ct=>ct.id!==o.id);d(rt),y(o.id),f.length>1?c(f[0]):c(null)}catch(rt){console.error("Failed to delete file:",rt),alert("Failed to delete file")}},Eg=rt=>ct=>{ct.preventDefault(),os(rt)};S.useEffect(()=>{if(!Un)return;const rt=gt=>{if(Un==="sidebar"){const Ot=Math.max(200,Math.min(500,gt.clientX));le(Ot)}else if(Un==="editor"){const Ot=document.querySelector(".editor-preview-container");if(Ot){const kt=Ot.getBoundingClientRect(),Le=gt.clientX-kt.left,Ce=Math.max(30,Math.min(70,Le/kt.width*100));Re(Ce)}}},ct=()=>{os(null)};return document.addEventListener("mousemove",rt),document.addEventListener("mouseup",ct),()=>{document.removeEventListener("mousemove",rt),document.removeEventListener("mouseup",ct)}},[Un]);const cb=()=>{var ct;if(!o)return"plaintext";const rt=(ct=o.name.split(".").pop())==null?void 0:ct.toLowerCase();return rt==="tex"?"latex":rt==="typ"?"typst":rt==="bib"||rt==="bbl"?"bibtex":rt==="md"?"markdown":rt==="json"?"json":rt==="yaml"||rt==="yml"?"yaml":rt==="xml"?"xml":rt==="html"?"html":rt==="css"?"css":rt==="js"?"javascript":rt==="ts"?"typescript":rt==="py"?"python":"plaintext"},Jh=()=>{var ct;if(!o)return!1;const rt=(ct=o.name.split(".").pop())==null?void 0:ct.toLowerCase();return["png","jpg","jpeg","gif","svg","webp","bmp","ico"].includes(rt||"")},Vo=()=>o?o.name.toLowerCase().endsWith(".pdf"):!1;return H?x.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:x.jsx(Rs,{size:"lg"})}):x.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[x.jsxs("header",{className:"h-12 flex items-center justify-between px-4 border-b bg-card shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Ie,{variant:"ghost",size:"icon",onClick:()=>t("/dashboard"),children:x.jsx(H3,{className:"h-5 w-5"})}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(wa,{className:"h-5 w-5 text-primary"}),x.jsx("span",{className:"font-medium",children:n==null?void 0:n.name}),x.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${(n==null?void 0:n.engine)==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:n==null?void 0:n.engine})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs(Ie,{size:"sm",onClick:Ca,disabled:D==="compiling"||(n==null?void 0:n.engine)==="LATEX"&&!!(G&&G.available===0),className:"gap-2",title:G&&G.available===0?"Server ang y, vui lng ch...":void 0,children:[D==="compiling"?x.jsx(Rs,{size:"sm"}):x.jsx(CF,{className:"h-4 w-4"}),"Bin dch"]}),x.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[Q?x.jsx(Rs,{size:"sm"}):x.jsx(RF,{className:"h-4 w-4"}),x.jsx("span",{children:Q?"ang lu...":" lu"})]}),x.jsxs(Ie,{variant:"outline",size:"sm",onClick:()=>q(!0),className:"gap-2",children:[x.jsx(hx,{className:"h-4 w-4"}),"Chia s"]}),(n==null?void 0:n.engine)==="LATEX"&&G&&x.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground border rounded px-2 py-1",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),x.jsxs("span",{children:[G.compiling," ang dch"]})]}),G.queued>0&&x.jsxs(x.Fragment,{children:[x.jsx("span",{children:""}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),x.jsxs("span",{children:[G.queued," ang ch"]})]})]})]}),x.jsx(wH,{collaborators:lt,maxShow:5}),x.jsx(Ie,{variant:"ghost",size:"icon",onClick:C,children:T==="dark"?x.jsx(kR,{className:"h-4 w-4"}):x.jsx(TR,{className:"h-4 w-4"})})]})]}),x.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[x.jsx("input",{ref:pr,type:"file",multiple:!0,className:"hidden",onChange:Vn}),x.jsx("aside",{style:{width:b?`${re}px`:"0"},className:Li("border-r bg-card flex flex-col transition-all duration-200 shrink-0",!b&&"border-r-0"),children:b&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"px-2 py-1.5 border-b flex items-center justify-between gap-1",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(Ie,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"New file",onClick:ob,children:x.jsx(ay,{className:"h-4 w-4"})}),x.jsx(Ie,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"New folder",onClick:lb,children:x.jsx(i_,{className:"h-4 w-4"})}),x.jsx(Ie,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Upload",onClick:Ho,children:x.jsx(Xy,{className:"h-4 w-4 rotate-180"})})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(Ie,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Rename",onClick:Os,children:x.jsx(wa,{className:"h-4 w-4"})}),x.jsx(Ie,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-destructive",title:"Delete",onClick:qn,children:x.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:u.filter(rt=>!rt.path.includes("/",1)||rt.path.split("/").length===2).map(rt=>x.jsx(UD,{file:rt,files:u,isExpanded:ot.has(rt.path),onToggle:Ta,onSelect:ct=>{ct.isFolder?(j(ct),c(null)):(j(null),g(ct))},selectedFileId:o==null?void 0:o.id,selectedFolderId:Ct==null?void 0:Ct.id,expandedFolders:ot,level:0},rt.id))})]})}),b&&x.jsx("div",{onMouseDown:Eg("sidebar"),className:Li("w-1 hover:w-1.5 bg-border hover:bg-primary/50 cursor-col-resize transition-all shrink-0",Un==="sidebar"&&"bg-primary w-1.5")}),x.jsx("button",{onClick:w,className:"w-5 h-full flex items-center justify-center hover:bg-muted transition-colors shrink-0",children:b?x.jsx(AF,{className:"h-4 w-4 text-muted-foreground"}):x.jsx(EF,{className:"h-4 w-4 text-muted-foreground"})}),x.jsxs("div",{className:"flex-1 flex overflow-hidden editor-preview-container",children:[x.jsxs("div",{style:{width:A?`${De}%`:"100%"},className:"flex flex-col min-w-0 transition-all duration-200",children:[x.jsx("div",{className:"h-9 flex items-center border-b bg-card/50 overflow-x-auto shrink-0",children:f.map(rt=>x.jsxs("div",{onClick:()=>c(rt),className:Li("flex items-center gap-2 px-3 h-full border-r cursor-pointer group",(o==null?void 0:o.id)===rt.id?"bg-background border-b-2 border-b-primary":"hover:bg-muted/50"),children:[x.jsx("span",{className:"text-sm",children:ER(rt.name)}),x.jsx("span",{className:"text-sm truncate max-w-32",children:rt.name}),x.jsx("button",{onClick:ct=>{ct.stopPropagation(),y(rt.id)},className:"opacity-0 group-hover:opacity-100 hover:text-destructive",children:""})]},rt.id))}),x.jsx("div",{className:"flex-1 min-h-0",children:o?x.jsx(x.Fragment,{children:Jh()?x.jsx("div",{className:"h-full flex items-center justify-center bg-muted/10 p-4 overflow-auto",children:x.jsxs("div",{className:"text-center",children:[at?x.jsx("img",{src:at,alt:o.name,className:"max-w-full max-h-full object-contain rounded shadow-lg"}):x.jsxs("div",{className:"text-muted-foreground",children:[x.jsx(Rs,{size:"lg"}),x.jsx("p",{className:"mt-4",children:"Loading image..."})]}),x.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:o.name}),x.jsx("p",{className:"text-xs text-muted-foreground",children:o.size?`${(o.size/1024).toFixed(2)} KB`:""})]})}):Vo()?x.jsx("div",{className:"h-full flex items-center justify-center bg-muted/10",children:x.jsxs("div",{className:"text-center text-muted-foreground",children:[x.jsx(ay,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),x.jsx("p",{children:"PDF preview not yet implemented"}),x.jsx("p",{className:"text-sm mt-2",children:o.name})]})}):x.jsx(XI,{height:"100%",language:cb(),value:o.content||"",onChange:Zh,onMount:yn,theme:T==="dark"?"vs-dark":"light",options:{fontSize:14,fontFamily:"JetBrains Mono, Consolas, monospace",minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!0,automaticLayout:!0,scrollBeyondLastLine:!1,padding:{top:16},bracketPairColorization:{enabled:!0},matchBrackets:"always",colorDecorators:!0,renderWhitespace:"selection",occurrencesHighlight:"multiFile",readOnly:Jh()||Vo()}})}):x.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:x.jsxs("div",{className:"text-center",children:[x.jsx(ay,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),x.jsx("p",{children:"Chn mt file  bt u bin tp"})]})})})]}),x.jsx("button",{onClick:E,className:"w-5 h-full flex items-center justify-center hover:bg-muted transition-colors shrink-0 border-x",children:A?x.jsx(tF,{className:"h-4 w-4 text-muted-foreground"}):x.jsx(pT,{className:"h-4 w-4 text-muted-foreground"})}),A&&x.jsx("div",{onMouseDown:Eg("editor"),className:Li("w-1 hover:w-1.5 bg-border hover:bg-primary/50 cursor-col-resize transition-all shrink-0",Un==="editor"&&"bg-primary w-1.5")}),A&&x.jsxs("div",{style:{width:`${100-De}%`},className:"flex flex-col bg-muted/30 min-w-0",children:[x.jsxs("div",{className:"h-9 flex items-center justify-between px-4 border-b bg-card/50 shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:()=>ut("pdf"),className:Li("px-3 py-1 text-sm font-medium rounded transition-colors",At==="pdf"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:"PDF"}),x.jsx("button",{onClick:()=>ut("logs"),className:Li("px-3 py-1 text-sm font-medium rounded transition-colors",At==="logs"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:"Logs & Output"})]}),x.jsxs(Ie,{variant:"ghost",size:"sm",className:"h-7 gap-2",disabled:!B,children:[x.jsx(Xy,{className:"h-3 w-3"}),"Export"]})]}),x.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto",children:D==="compiling"?x.jsx("div",{className:"w-full h-full flex flex-col p-4",children:x.jsx("div",{className:"flex-1 border rounded-lg overflow-auto bg-card",children:x.jsxs("div",{className:"p-4",children:[x.jsx("pre",{className:"font-mono text-sm whitespace-pre-wrap text-foreground",children:Xt||`Initializing...
`}),x.jsx("div",{ref:cn})]})})}):At==="logs"?x.jsxs("div",{className:"w-full h-full overflow-auto p-4",children:[x.jsxs("div",{className:Li("border rounded-lg p-4 mb-4",D==="error"?"bg-destructive/10 border-destructive/30":"bg-muted/50 border-border"),children:[x.jsx("h3",{className:Li("text-lg font-semibold mb-2",D==="error"?"text-destructive":"text-foreground"),children:D==="error"?" Compilation Failed":" Compilation Log"}),D==="error"&&L&&x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden",children:[x.jsx("div",{className:"bg-muted px-4 py-2 border-b font-semibold text-sm",children:" Error Details"}),x.jsx("pre",{className:"p-4 text-sm font-mono whitespace-pre-wrap overflow-auto max-h-96",children:L})]})})]}),x.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden",children:[x.jsxs("div",{className:"bg-muted px-4 py-2 border-b font-semibold text-sm flex items-center justify-between",children:[x.jsx("span",{children:" Full Compilation Log"}),x.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Gt)},className:"text-xs px-2 py-1 bg-primary/10 hover:bg-primary/20 rounded",children:"Copy to clipboard"})]}),x.jsx("pre",{className:"p-4 text-xs font-mono whitespace-pre-wrap overflow-auto max-h-[600px] bg-gray-900 text-gray-100",children:Gt||"No logs available. Compile your document to see logs."})]})]}):D==="error"?x.jsxs("div",{className:"text-center text-muted-foreground p-8",children:[x.jsx("div",{className:"text-destructive text-lg mb-4",children:" Compilation Failed"}),x.jsx("p",{className:"mb-4",children:'Check the "Logs & Output" tab for details'}),x.jsx(Ie,{onClick:()=>ut("logs"),variant:"outline",children:"View Logs"})]}):B?x.jsx(rq,{pdfUrl:B}):x.jsxs("div",{className:"text-center text-muted-foreground",children:[x.jsx(pT,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),x.jsx("p",{children:'Nhn "Bin dch"  xem kt qu'})]})})]})]})]}),x.jsxs("footer",{className:"h-6 flex items-center justify-between px-4 border-t bg-card text-xs text-muted-foreground shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("span",{children:n==null?void 0:n.engine}),x.jsx("span",{children:o==null?void 0:o.path})]}),x.jsx("div",{className:"flex items-center gap-4",children:x.jsxs("span",{className:Li("flex items-center gap-1",D==="success"&&"text-green-500",D==="error"&&"text-destructive"),children:[D==="idle"&&" Sn sng",D==="compiling"&&" ang bin dch",D==="success"&&" Thnh cng",D==="error"&&" Li"]})})]}),F&&n&&x.jsx(_H,{isOpen:F,onClose:()=>q(!1),projectId:n.id,projectName:n.name,collaborators:n.collaborators||[],onCollaboratorAdded:async()=>{if(s){const{project:rt}=await Mn.getProject(s);a(rt)}}}),X&&n&&x.jsx(oq,{projectId:n.id,targetPath:(Ct==null?void 0:Ct.path)||"/",onClose:()=>wt(!1),onUploadComplete:rt=>{d([...u,...rt]);const ct=rt.find(gt=>gt.name.endsWith(".tex")||gt.name.endsWith(".typ")||gt.name.endsWith(".txt"));ct&&g(ct)}})]})}function UD({file:s,files:t,isExpanded:e,onToggle:n,onSelect:a,selectedFileId:o,selectedFolderId:c,expandedFolders:u,level:d}){const f=t.filter(y=>(y.path.substring(0,y.path.lastIndexOf("/"))||"/")===s.path&&y.id!==s.id),g=s.isFolder?c===s.id:o===s.id;return x.jsxs("div",{children:[x.jsxs("div",{onClick:()=>{s.isFolder&&n(s.path),a(s)},className:Li("flex items-center gap-2 px-2 py-1 rounded cursor-pointer text-sm",g?"bg-primary/20 text-primary":"hover:bg-muted"),style:{paddingLeft:`${d*12+8}px`},children:[s.isFolder?e?x.jsx(i_,{className:"h-4 w-4 text-yellow-500"}):x.jsx(CR,{className:"h-4 w-4 text-yellow-500"}):x.jsx("span",{children:ER(s.name)}),x.jsx("span",{className:"truncate",children:s.name})]}),s.isFolder&&e&&f.map(y=>x.jsx(UD,{file:y,files:t,isExpanded:u.has(y.path),onToggle:n,onSelect:a,selectedFileId:o,selectedFolderId:c,expandedFolders:u,level:d+1},y.id))]})}function Hk({children:s}){const{isAuthenticated:t,isLoading:e}=Ec();return e?x.jsx(RR,{message:"ang xc thc..."}):t?x.jsx(x.Fragment,{children:s}):x.jsx(qy,{to:"/login",replace:!0})}function Vk({children:s}){const{isAuthenticated:t,isLoading:e}=Ec();return e?x.jsx(RR,{message:"ang ti..."}):t?x.jsx(qy,{to:"/dashboard",replace:!0}):x.jsx(x.Fragment,{children:s})}function uq(){const{checkAuth:s}=Ec();return S.useEffect(()=>{s()},[s]),x.jsx(CP,{children:x.jsxs(iP,{children:[x.jsx(cl,{path:"/login",element:x.jsx(Vk,{children:x.jsx($F,{})})}),x.jsx(cl,{path:"/register",element:x.jsx(Vk,{children:x.jsx(YF,{})})}),x.jsx(cl,{path:"/dashboard",element:x.jsx(Hk,{children:x.jsx(jz,{})})}),x.jsx(cl,{path:"/editor/:projectId",element:x.jsx(Hk,{children:x.jsx(cq,{})})}),x.jsx(cl,{path:"/",element:x.jsx(qy,{to:"/dashboard",replace:!0})}),x.jsx(cl,{path:"*",element:x.jsx(qy,{to:"/dashboard",replace:!0})})]})})}uj.createRoot(document.getElementById("root")).render(x.jsx(S.StrictMode,{children:x.jsx(uq,{})}));
//# sourceMappingURL=index-CigpMALz.js.map
