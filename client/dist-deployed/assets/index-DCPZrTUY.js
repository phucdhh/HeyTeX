var lN=Object.defineProperty;var Gx=r=>{throw TypeError(r)};var cN=(r,t,e)=>t in r?lN(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Mt=(r,t,e)=>cN(r,typeof t!="symbol"?t+"":t,e),H0=(r,t,e)=>t.has(r)||Gx("Cannot "+e);var f=(r,t,e)=>(H0(r,t,"read from private field"),e?e.call(r):t.get(r)),k=(r,t,e)=>t.has(r)?Gx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),x=(r,t,e,n)=>(H0(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),T=(r,t,e)=>(H0(r,t,"access private method"),e);var mi=(r,t,e,n)=>({set _(a){x(r,t,a,e)},get _(){return f(r,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function OT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var q0={exports:{}},Cd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx;function uN(){if(Xx)return Cd;Xx=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:r,type:n,key:c,ref:a!==void 0?a:null,props:o}}return Cd.Fragment=t,Cd.jsx=e,Cd.jsxs=e,Cd}var Yx;function hN(){return Yx||(Yx=1,q0.exports=uN()),q0.exports}var E=hN(),V0={exports:{}},Lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function dN(){if($x)return Lt;$x=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),v=Symbol.iterator;function w(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,R={};function M(N,q,Q){this.props=N,this.context=q,this.refs=R,this.updater=Q||A}M.prototype.isReactComponent={},M.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},M.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function D(){}D.prototype=M.prototype;function O(N,q,Q){this.props=N,this.context=q,this.refs=R,this.updater=Q||A}var I=O.prototype=new D;I.constructor=O,S(I,M.prototype),I.isPureReactComponent=!0;var U=Array.isArray;function P(){}var H={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function tt(N,q,Q){var it=Q.ref;return{$$typeof:r,type:N,key:q,ref:it!==void 0?it:null,props:Q}}function nt(N,q){return tt(N.type,q,N.props)}function rt(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function mt(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Q){return q[Q]})}var At=/\/+/g;function dt(N,q){return typeof N=="object"&&N!==null&&N.key!=null?mt(""+N.key):q.toString(36)}function st(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(P,P):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function F(N,q,Q,it,ht){var bt=typeof N;(bt==="undefined"||bt==="boolean")&&(N=null);var ot=!1;if(N===null)ot=!0;else switch(bt){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(N.$$typeof){case r:case t:ot=!0;break;case m:return ot=N._init,F(ot(N._payload),q,Q,it,ht)}}if(ot)return ht=ht(N),ot=it===""?"."+dt(N,0):it,U(ht)?(Q="",ot!=null&&(Q=ot.replace(At,"$&/")+"/"),F(ht,q,Q,"",function(Bt){return Bt})):ht!=null&&(rt(ht)&&(ht=nt(ht,Q+(ht.key==null||N&&N.key===ht.key?"":(""+ht.key).replace(At,"$&/")+"/")+ot)),q.push(ht)),1;ot=0;var Pt=it===""?".":it+":";if(U(N))for(var Ot=0;Ot<N.length;Ot++)it=N[Ot],bt=Pt+dt(it,Ot),ot+=F(it,q,Q,bt,ht);else if(Ot=w(N),typeof Ot=="function")for(N=Ot.call(N),Ot=0;!(it=N.next()).done;)it=it.value,bt=Pt+dt(it,Ot++),ot+=F(it,q,Q,bt,ht);else if(bt==="object"){if(typeof N.then=="function")return F(st(N),q,Q,it,ht);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ot}function G(N,q,Q){if(N==null)return N;var it=[],ht=0;return F(N,it,"","",function(bt){return q.call(Q,bt,ht++)}),it}function V(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(Q){(N._status===0||N._status===-1)&&(N._status=1,N._result=Q)},function(Q){(N._status===0||N._status===-1)&&(N._status=2,N._result=Q)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var xt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Tt={map:G,forEach:function(N,q,Q){G(N,function(){q.apply(this,arguments)},Q)},count:function(N){var q=0;return G(N,function(){q++}),q},toArray:function(N){return G(N,function(q){return q})||[]},only:function(N){if(!rt(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Lt.Activity=b,Lt.Children=Tt,Lt.Component=M,Lt.Fragment=e,Lt.Profiler=a,Lt.PureComponent=O,Lt.StrictMode=n,Lt.Suspense=d,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Lt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return H.H.useMemoCache(N)}},Lt.cache=function(N){return function(){return N.apply(null,arguments)}},Lt.cacheSignal=function(){return null},Lt.cloneElement=function(N,q,Q){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var it=S({},N.props),ht=N.key;if(q!=null)for(bt in q.key!==void 0&&(ht=""+q.key),q)!K.call(q,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&q.ref===void 0||(it[bt]=q[bt]);var bt=arguments.length-2;if(bt===1)it.children=Q;else if(1<bt){for(var ot=Array(bt),Pt=0;Pt<bt;Pt++)ot[Pt]=arguments[Pt+2];it.children=ot}return tt(N.type,ht,it)},Lt.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},Lt.createElement=function(N,q,Q){var it,ht={},bt=null;if(q!=null)for(it in q.key!==void 0&&(bt=""+q.key),q)K.call(q,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(ht[it]=q[it]);var ot=arguments.length-2;if(ot===1)ht.children=Q;else if(1<ot){for(var Pt=Array(ot),Ot=0;Ot<ot;Ot++)Pt[Ot]=arguments[Ot+2];ht.children=Pt}if(N&&N.defaultProps)for(it in ot=N.defaultProps,ot)ht[it]===void 0&&(ht[it]=ot[it]);return tt(N,bt,ht)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(N){return{$$typeof:h,render:N}},Lt.isValidElement=rt,Lt.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:V}},Lt.memo=function(N,q){return{$$typeof:p,type:N,compare:q===void 0?null:q}},Lt.startTransition=function(N){var q=H.T,Q={};H.T=Q;try{var it=N(),ht=H.S;ht!==null&&ht(Q,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(P,xt)}catch(bt){xt(bt)}finally{q!==null&&Q.types!==null&&(q.types=Q.types),H.T=q}},Lt.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Lt.use=function(N){return H.H.use(N)},Lt.useActionState=function(N,q,Q){return H.H.useActionState(N,q,Q)},Lt.useCallback=function(N,q){return H.H.useCallback(N,q)},Lt.useContext=function(N){return H.H.useContext(N)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(N,q){return H.H.useDeferredValue(N,q)},Lt.useEffect=function(N,q){return H.H.useEffect(N,q)},Lt.useEffectEvent=function(N){return H.H.useEffectEvent(N)},Lt.useId=function(){return H.H.useId()},Lt.useImperativeHandle=function(N,q,Q){return H.H.useImperativeHandle(N,q,Q)},Lt.useInsertionEffect=function(N,q){return H.H.useInsertionEffect(N,q)},Lt.useLayoutEffect=function(N,q){return H.H.useLayoutEffect(N,q)},Lt.useMemo=function(N,q){return H.H.useMemo(N,q)},Lt.useOptimistic=function(N,q){return H.H.useOptimistic(N,q)},Lt.useReducer=function(N,q,Q){return H.H.useReducer(N,q,Q)},Lt.useRef=function(N){return H.H.useRef(N)},Lt.useState=function(N){return H.H.useState(N)},Lt.useSyncExternalStore=function(N,q,Q){return H.H.useSyncExternalStore(N,q,Q)},Lt.useTransition=function(){return H.H.useTransition()},Lt.version="19.2.1",Lt}var Kx;function nA(){return Kx||(Kx=1,V0.exports=dN()),V0.exports}var L=nA();const Ks=OT(L);var G0={exports:{}},Td={},X0={exports:{}},Y0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function fN(){return Wx||(Wx=1,(function(r){function t(F,G){var V=F.length;F.push(G);t:for(;0<V;){var xt=V-1>>>1,Tt=F[xt];if(0<a(Tt,G))F[xt]=G,F[V]=Tt,V=xt;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var G=F[0],V=F.pop();if(V!==G){F[0]=V;t:for(var xt=0,Tt=F.length,N=Tt>>>1;xt<N;){var q=2*(xt+1)-1,Q=F[q],it=q+1,ht=F[it];if(0>a(Q,V))it<Tt&&0>a(ht,Q)?(F[xt]=ht,F[it]=V,xt=it):(F[xt]=Q,F[q]=V,xt=q);else if(it<Tt&&0>a(ht,V))F[xt]=ht,F[it]=V,xt=it;else break t}}return G}function a(F,G){var V=F.sortIndex-G.sortIndex;return V!==0?V:F.id-G.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();r.unstable_now=function(){return c.now()-h}}var d=[],p=[],m=1,b=null,v=3,w=!1,A=!1,S=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function I(F){for(var G=e(p);G!==null;){if(G.callback===null)n(p);else if(G.startTime<=F)n(p),G.sortIndex=G.expirationTime,t(d,G);else break;G=e(p)}}function U(F){if(S=!1,I(F),!A)if(e(d)!==null)A=!0,P||(P=!0,mt());else{var G=e(p);G!==null&&st(U,G.startTime-F)}}var P=!1,H=-1,K=5,tt=-1;function nt(){return R?!0:!(r.unstable_now()-tt<K)}function rt(){if(R=!1,P){var F=r.unstable_now();tt=F;var G=!0;try{t:{A=!1,S&&(S=!1,D(H),H=-1),w=!0;var V=v;try{e:{for(I(F),b=e(d);b!==null&&!(b.expirationTime>F&&nt());){var xt=b.callback;if(typeof xt=="function"){b.callback=null,v=b.priorityLevel;var Tt=xt(b.expirationTime<=F);if(F=r.unstable_now(),typeof Tt=="function"){b.callback=Tt,I(F),G=!0;break e}b===e(d)&&n(d),I(F)}else n(d);b=e(d)}if(b!==null)G=!0;else{var N=e(p);N!==null&&st(U,N.startTime-F),G=!1}}break t}finally{b=null,v=V,w=!1}G=void 0}}finally{G?mt():P=!1}}}var mt;if(typeof O=="function")mt=function(){O(rt)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,dt=At.port2;At.port1.onmessage=rt,mt=function(){dt.postMessage(null)}}else mt=function(){M(rt,0)};function st(F,G){H=M(function(){F(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(F){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var V=v;v=G;try{return F()}finally{v=V}},r.unstable_requestPaint=function(){R=!0},r.unstable_runWithPriority=function(F,G){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=v;v=F;try{return G()}finally{v=V}},r.unstable_scheduleCallback=function(F,G,V){var xt=r.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?xt+V:xt):V=xt,F){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=V+Tt,F={id:m++,callback:G,priorityLevel:F,startTime:V,expirationTime:Tt,sortIndex:-1},V>xt?(F.sortIndex=V,t(p,F),e(d)===null&&F===e(p)&&(S?(D(H),H=-1):S=!0,st(U,V-xt))):(F.sortIndex=Tt,t(d,F),A||w||(A=!0,P||(P=!0,mt()))),F},r.unstable_shouldYield=nt,r.unstable_wrapCallback=function(F){var G=v;return function(){var V=v;v=G;try{return F.apply(this,arguments)}finally{v=V}}}})(Y0)),Y0}var Qx;function pN(){return Qx||(Qx=1,X0.exports=fN()),X0.exports}var $0={exports:{}},Dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx;function gN(){if(Zx)return Dn;Zx=1;var r=nA();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,p,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:p,implementation:m}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Dn.createPortal=function(d,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(d,p,null,m)},Dn.flushSync=function(d){var p=c.T,m=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=p,n.p=m,n.d.f()}},Dn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(d,p))},Dn.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Dn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var m=p.as,b=h(m,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?n.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:w}):m==="script"&&n.d.X(d,{crossOrigin:b,integrity:v,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Dn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=h(p.as,p.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(d)},Dn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,b=h(m,p.crossOrigin);n.d.L(d,m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Dn.preloadModule=function(d,p){if(typeof d=="string")if(p){var m=h(p.as,p.crossOrigin);n.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(d)},Dn.requestFormReset=function(d){n.d.r(d)},Dn.unstable_batchedUpdates=function(d,p){return d(p)},Dn.useFormState=function(d,p,m){return c.H.useFormState(d,p,m)},Dn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Dn.version="19.2.1",Dn}var Jx;function mN(){if(Jx)return $0.exports;Jx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),$0.exports=gN(),$0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC;function yN(){if(tC)return Td;tC=1;var r=pN(),t=nA(),e=mN();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function p(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(n(188));return s!==i?null:i}for(var l=i,u=s;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return d(g),i;if(y===u)return d(g),s;y=y.sibling}throw Error(n(188))}if(l.return!==u.return)l=g,u=y;else{for(var _=!1,C=g.child;C;){if(C===l){_=!0,l=g,u=y;break}if(C===u){_=!0,u=g,l=y;break}C=C.sibling}if(!_){for(C=y.child;C;){if(C===l){_=!0,l=y,u=g;break}if(C===u){_=!0,u=y,l=g;break}C=C.sibling}if(!_)throw Error(n(189))}}if(l.alternate!==u)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),O=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),tt=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),rt=Symbol.iterator;function mt(i){return i===null||typeof i!="object"?null:(i=rt&&i[rt]||i["@@iterator"],typeof i=="function"?i:null)}var At=Symbol.for("react.client.reference");function dt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===At?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case M:return"Profiler";case R:return"StrictMode";case U:return"Suspense";case P:return"SuspenseList";case tt:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case O:return i.displayName||"Context";case D:return(i._context.displayName||"Context")+".Consumer";case I:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return s=i.displayName||null,s!==null?s:dt(i.type)||"Memo";case K:s=i._payload,i=i._init;try{return dt(i(s))}catch{}}return null}var st=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},xt=[],Tt=-1;function N(i){return{current:i}}function q(i){0>Tt||(i.current=xt[Tt],xt[Tt]=null,Tt--)}function Q(i,s){Tt++,xt[Tt]=i.current,i.current=s}var it=N(null),ht=N(null),bt=N(null),ot=N(null);function Pt(i,s){switch(Q(bt,s),Q(ht,i),Q(it,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?px(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=px(s),i=gx(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(it),Q(it,i)}function Ot(){q(it),q(ht),q(bt)}function Bt(i){i.memoizedState!==null&&Q(ot,i);var s=it.current,l=gx(s,i.type);s!==l&&(Q(ht,i),Q(it,l))}function Rn(i){ht.current===i&&(q(it),q(ht)),ot.current===i&&(q(ot),Ad._currentValue=V)}var Mn,se;function Qt(i){if(Mn===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Mn=s&&s[1]||"",se=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mn+i+se}var Ne=!1;function ke(i,s){if(!i||Ne)return"";Ne=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(W){var $=W}Reflect.construct(i,[],et)}else{try{et.call()}catch(W){$=W}i.call(et.prototype)}}else{try{throw Error()}catch(W){$=W}(et=i())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),_=y[0],C=y[1];if(_&&C){var j=_.split(`
`),Y=C.split(`
`);for(g=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;g<Y.length&&!Y[g].includes("DetermineComponentFrameRoot");)g++;if(u===j.length||g===Y.length)for(u=j.length-1,g=Y.length-1;1<=u&&0<=g&&j[u]!==Y[g];)g--;for(;1<=u&&0<=g;u--,g--)if(j[u]!==Y[g]){if(u!==1||g!==1)do if(u--,g--,0>g||j[u]!==Y[g]){var Z=`
`+j[u].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=u&&0<=g);break}}}finally{Ne=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Qt(l):""}function Ss(i,s){switch(i.tag){case 26:case 27:case 5:return Qt(i.type);case 16:return Qt("Lazy");case 13:return i.child!==s&&s!==null?Qt("Suspense Fallback"):Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return ke(i.type,!1);case 11:return ke(i.type.render,!1);case 1:return ke(i.type,!0);case 31:return Qt("Activity");default:return""}}function Es(i){try{var s="",l=null;do s+=Ss(i,l),l=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Co=Object.prototype.hasOwnProperty,To=r.unstable_scheduleCallback,xs=r.unstable_cancelCallback,Dh=r.unstable_shouldYield,Nh=r.unstable_requestPaint,an=r.unstable_now,Oh=r.unstable_getCurrentPriorityLevel,at=r.unstable_ImmediatePriority,lt=r.unstable_UserBlockingPriority,wt=r.unstable_NormalPriority,jt=r.unstable_LowPriority,re=r.unstable_IdlePriority,Yn=r.log,ko=r.unstable_setDisableYieldValue,Ro=null,Ln=null;function Cs(i){if(typeof Yn=="function"&&ko(i),Ln&&typeof Ln.setStrictMode=="function")try{Ln.setStrictMode(Ro,i)}catch{}}var li=Math.clz32?Math.clz32:$M,XM=Math.log,YM=Math.LN2;function $M(i){return i>>>=0,i===0?32:31-(XM(i)/YM|0)|0}var rg=256,ag=262144,og=4194304;function Mo(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function lg(i,s,l){var u=i.pendingLanes;if(u===0)return 0;var g=0,y=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~y,u!==0?g=Mo(u):(_&=C,_!==0?g=Mo(_):l||(l=C&~i,l!==0&&(g=Mo(l))))):(C=u&~y,C!==0?g=Mo(C):_!==0?g=Mo(_):l||(l=u&~i,l!==0&&(g=Mo(l)))),g===0?0:s!==0&&s!==g&&(s&y)===0&&(y=g&-g,l=s&-s,y>=l||y===32&&(l&4194048)!==0)?s:g}function jh(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function KM(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KA(){var i=og;return og<<=1,(og&62914560)===0&&(og=4194304),i}function Mb(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function zh(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function WM(i,s,l,u,g,y){var _=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var C=i.entanglements,j=i.expirationTimes,Y=i.hiddenUpdates;for(l=_&~l;0<l;){var Z=31-li(l),et=1<<Z;C[Z]=0,j[Z]=-1;var $=Y[Z];if($!==null)for(Y[Z]=null,Z=0;Z<$.length;Z++){var W=$[Z];W!==null&&(W.lane&=-536870913)}l&=~et}u!==0&&WA(i,u,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(_&~s))}function WA(i,s,l){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-li(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|l&261930}function QA(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var u=31-li(l),g=1<<u;g&s|i[u]&s&&(i[u]|=s),l&=~g}}function ZA(i,s){var l=s&-s;return l=(l&42)!==0?1:Lb(l),(l&(i.suspendedLanes|s))!==0?0:l}function Lb(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Db(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function JA(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:Fx(i.type))}function tS(i,s){var l=G.p;try{return G.p=i,s()}finally{G.p=l}}var ga=Math.random().toString(36).slice(2),pn="__reactFiber$"+ga,$n="__reactProps$"+ga,mc="__reactContainer$"+ga,Nb="__reactEvents$"+ga,QM="__reactListeners$"+ga,ZM="__reactHandles$"+ga,eS="__reactResources$"+ga,Ph="__reactMarker$"+ga;function Ob(i){delete i[pn],delete i[$n],delete i[Nb],delete i[QM],delete i[ZM]}function yc(i){var s=i[pn];if(s)return s;for(var l=i.parentNode;l;){if(s=l[mc]||l[pn]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=Ax(i);i!==null;){if(l=i[pn])return l;i=Ax(i)}return s}i=l,l=i.parentNode}return null}function bc(i){if(i=i[pn]||i[mc]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Fh(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function vc(i){var s=i[eS];return s||(s=i[eS]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function on(i){i[Ph]=!0}var nS=new Set,iS={};function Lo(i,s){wc(i,s),wc(i+"Capture",s)}function wc(i,s){for(iS[i]=s,i=0;i<s.length;i++)nS.add(s[i])}var JM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sS={},rS={};function tL(i){return Co.call(rS,i)?!0:Co.call(sS,i)?!1:JM.test(i)?rS[i]=!0:(sS[i]=!0,!1)}function cg(i,s,l){if(tL(s))if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+l)}}function ug(i,s,l){if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+l)}}function ar(i,s,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(s,l,""+u)}}function Di(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function aS(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function eL(i,s,l){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(_){l=""+_,y.call(this,_)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function jb(i){if(!i._valueTracker){var s=aS(i)?"checked":"value";i._valueTracker=eL(i,s,""+i[s])}}function oS(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return i&&(u=aS(i)?i.checked?"true":"false":i.value),i=u,i!==l?(s.setValue(i),!0):!1}function hg(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var nL=/[\n"\\]/g;function Ni(i){return i.replace(nL,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function zb(i,s,l,u,g,y,_,C){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),s!=null?_==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Di(s)):i.value!==""+Di(s)&&(i.value=""+Di(s)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),s!=null?Pb(i,_,Di(s)):l!=null?Pb(i,_,Di(l)):u!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+Di(C):i.removeAttribute("name")}function lS(i,s,l,u,g,y,_,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){jb(i);return}l=l!=null?""+Di(l):"",s=s!=null?""+Di(s):l,C||s===i.value||(i.value=s),i.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),jb(i)}function Pb(i,s,l){s==="number"&&hg(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function _c(i,s,l,u){if(i=i.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=s.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&u&&(i[l].defaultSelected=!0)}else{for(l=""+Di(l),s=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function cS(i,s,l){if(s!=null&&(s=""+Di(s),s!==i.value&&(i.value=s),l==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=l!=null?""+Di(l):""}function uS(i,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(n(92));if(st(u)){if(1<u.length)throw Error(n(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=Di(s),i.defaultValue=l,u=i.textContent,u===l&&u!==""&&u!==null&&(i.value=u),jb(i)}function Ac(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var iL=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hS(i,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,l):typeof l!="number"||l===0||iL.has(s)?s==="float"?i.cssFloat=l:i[s]=(""+l).trim():i[s]=l+"px"}function dS(i,s,l){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&l[g]!==u&&hS(i,g,u)}else for(var y in s)s.hasOwnProperty(y)&&hS(i,y,s[y])}function Fb(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sL=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rL=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dg(i){return rL.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function or(){}var Ib=null;function Bb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Sc=null,Ec=null;function fS(i){var s=bc(i);if(s&&(i=s.stateNode)){var l=i[$n]||null;t:switch(i=s.stateNode,s.type){case"input":if(zb(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ni(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==i&&u.form===i.form){var g=u[$n]||null;if(!g)throw Error(n(90));zb(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===i.form&&oS(u)}break t;case"textarea":cS(i,l.value,l.defaultValue);break t;case"select":s=l.value,s!=null&&_c(i,!!l.multiple,s,!1)}}}var Ub=!1;function pS(i,s,l){if(Ub)return i(s,l);Ub=!0;try{var u=i(s);return u}finally{if(Ub=!1,(Sc!==null||Ec!==null)&&(Jg(),Sc&&(s=Sc,i=Ec,Ec=Sc=null,fS(s),i)))for(s=0;s<i.length;s++)fS(i[s])}}function Ih(i,s){var l=i.stateNode;if(l===null)return null;var u=l[$n]||null;if(u===null)return null;l=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,s,typeof l));return l}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hb=!1;if(lr)try{var Bh={};Object.defineProperty(Bh,"passive",{get:function(){Hb=!0}}),window.addEventListener("test",Bh,Bh),window.removeEventListener("test",Bh,Bh)}catch{Hb=!1}var ma=null,qb=null,fg=null;function gS(){if(fg)return fg;var i,s=qb,l=s.length,u,g="value"in ma?ma.value:ma.textContent,y=g.length;for(i=0;i<l&&s[i]===g[i];i++);var _=l-i;for(u=1;u<=_&&s[l-u]===g[y-u];u++);return fg=g.slice(i,1<u?1-u:void 0)}function pg(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function gg(){return!0}function mS(){return!1}function Kn(i){function s(l,u,g,y,_){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(l=i[C],this[C]=l?l(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?gg:mS,this.isPropagationStopped=mS,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gg)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gg)},persist:function(){},isPersistent:gg}),s}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mg=Kn(Do),Uh=b({},Do,{view:0,detail:0}),aL=Kn(Uh),Vb,Gb,Hh,yg=b({},Uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yb,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Hh&&(Hh&&i.type==="mousemove"?(Vb=i.screenX-Hh.screenX,Gb=i.screenY-Hh.screenY):Gb=Vb=0,Hh=i),Vb)},movementY:function(i){return"movementY"in i?i.movementY:Gb}}),yS=Kn(yg),oL=b({},yg,{dataTransfer:0}),lL=Kn(oL),cL=b({},Uh,{relatedTarget:0}),Xb=Kn(cL),uL=b({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),hL=Kn(uL),dL=b({},Do,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fL=Kn(dL),pL=b({},Do,{data:0}),bS=Kn(pL),gL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bL(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=yL[i])?!!s[i]:!1}function Yb(){return bL}var vL=b({},Uh,{key:function(i){if(i.key){var s=gL[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=pg(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?mL[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yb,charCode:function(i){return i.type==="keypress"?pg(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?pg(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wL=Kn(vL),_L=b({},yg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vS=Kn(_L),AL=b({},Uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yb}),SL=Kn(AL),EL=b({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),xL=Kn(EL),CL=b({},yg,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),TL=Kn(CL),kL=b({},Do,{newState:0,oldState:0}),RL=Kn(kL),ML=[9,13,27,32],$b=lr&&"CompositionEvent"in window,qh=null;lr&&"documentMode"in document&&(qh=document.documentMode);var LL=lr&&"TextEvent"in window&&!qh,wS=lr&&(!$b||qh&&8<qh&&11>=qh),_S=" ",AS=!1;function SS(i,s){switch(i){case"keyup":return ML.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ES(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var xc=!1;function DL(i,s){switch(i){case"compositionend":return ES(s);case"keypress":return s.which!==32?null:(AS=!0,_S);case"textInput":return i=s.data,i===_S&&AS?null:i;default:return null}}function NL(i,s){if(xc)return i==="compositionend"||!$b&&SS(i,s)?(i=gS(),fg=qb=ma=null,xc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return wS&&s.locale!=="ko"?null:s.data;default:return null}}var OL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xS(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!OL[i.type]:s==="textarea"}function CS(i,s,l,u){Sc?Ec?Ec.push(u):Ec=[u]:Sc=u,s=am(s,"onChange"),0<s.length&&(l=new mg("onChange","change",null,l,u),i.push({event:l,listeners:s}))}var Vh=null,Gh=null;function jL(i){lx(i,0)}function bg(i){var s=Fh(i);if(oS(s))return i}function TS(i,s){if(i==="change")return s}var kS=!1;if(lr){var Kb;if(lr){var Wb="oninput"in document;if(!Wb){var RS=document.createElement("div");RS.setAttribute("oninput","return;"),Wb=typeof RS.oninput=="function"}Kb=Wb}else Kb=!1;kS=Kb&&(!document.documentMode||9<document.documentMode)}function MS(){Vh&&(Vh.detachEvent("onpropertychange",LS),Gh=Vh=null)}function LS(i){if(i.propertyName==="value"&&bg(Gh)){var s=[];CS(s,Gh,i,Bb(i)),pS(jL,s)}}function zL(i,s,l){i==="focusin"?(MS(),Vh=s,Gh=l,Vh.attachEvent("onpropertychange",LS)):i==="focusout"&&MS()}function PL(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return bg(Gh)}function FL(i,s){if(i==="click")return bg(s)}function IL(i,s){if(i==="input"||i==="change")return bg(s)}function BL(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var ci=typeof Object.is=="function"?Object.is:BL;function Xh(i,s){if(ci(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Co.call(s,g)||!ci(i[g],s[g]))return!1}return!0}function DS(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function NS(i,s){var l=DS(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=s&&u>=s)return{node:l,offset:s-i};i=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=DS(l)}}function OS(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?OS(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function jS(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=hg(i.document);s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=hg(i.document)}return s}function Qb(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var UL=lr&&"documentMode"in document&&11>=document.documentMode,Cc=null,Zb=null,Yh=null,Jb=!1;function zS(i,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Jb||Cc==null||Cc!==hg(u)||(u=Cc,"selectionStart"in u&&Qb(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Yh&&Xh(Yh,u)||(Yh=u,u=am(Zb,"onSelect"),0<u.length&&(s=new mg("onSelect","select",null,s,l),i.push({event:s,listeners:u}),s.target=Cc)))}function No(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var Tc={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionrun:No("Transition","TransitionRun"),transitionstart:No("Transition","TransitionStart"),transitioncancel:No("Transition","TransitionCancel"),transitionend:No("Transition","TransitionEnd")},tv={},PS={};lr&&(PS=document.createElement("div").style,"AnimationEvent"in window||(delete Tc.animationend.animation,delete Tc.animationiteration.animation,delete Tc.animationstart.animation),"TransitionEvent"in window||delete Tc.transitionend.transition);function Oo(i){if(tv[i])return tv[i];if(!Tc[i])return i;var s=Tc[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in PS)return tv[i]=s[l];return i}var FS=Oo("animationend"),IS=Oo("animationiteration"),BS=Oo("animationstart"),HL=Oo("transitionrun"),qL=Oo("transitionstart"),VL=Oo("transitioncancel"),US=Oo("transitionend"),HS=new Map,ev="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ev.push("scrollEnd");function es(i,s){HS.set(i,s),Lo(s,[i])}var vg=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Oi=[],kc=0,nv=0;function wg(){for(var i=kc,s=nv=kc=0;s<i;){var l=Oi[s];Oi[s++]=null;var u=Oi[s];Oi[s++]=null;var g=Oi[s];Oi[s++]=null;var y=Oi[s];if(Oi[s++]=null,u!==null&&g!==null){var _=u.pending;_===null?g.next=g:(g.next=_.next,_.next=g),u.pending=g}y!==0&&qS(l,g,y)}}function _g(i,s,l,u){Oi[kc++]=i,Oi[kc++]=s,Oi[kc++]=l,Oi[kc++]=u,nv|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function iv(i,s,l,u){return _g(i,s,l,u),Ag(i)}function jo(i,s){return _g(i,null,null,s),Ag(i)}function qS(i,s,l){i.lanes|=l;var u=i.alternate;u!==null&&(u.lanes|=l);for(var g=!1,y=i.return;y!==null;)y.childLanes|=l,u=y.alternate,u!==null&&(u.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&s!==null&&(g=31-li(l),i=y.hiddenUpdates,u=i[g],u===null?i[g]=[s]:u.push(s),s.lane=l|536870912),y):null}function Ag(i){if(50<gd)throw gd=0,d0=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Rc={};function GL(i,s,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(i,s,l,u){return new GL(i,s,l,u)}function sv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function cr(i,s){var l=i.alternate;return l===null?(l=ui(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function VS(i,s){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Sg(i,s,l,u,g,y){var _=0;if(u=i,typeof i=="function")sv(i)&&(_=1);else if(typeof i=="string")_=WD(i,l,it.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case tt:return i=ui(31,l,s,g),i.elementType=tt,i.lanes=y,i;case S:return zo(l.children,g,y,s);case R:_=8,g|=24;break;case M:return i=ui(12,l,s,g|2),i.elementType=M,i.lanes=y,i;case U:return i=ui(13,l,s,g),i.elementType=U,i.lanes=y,i;case P:return i=ui(19,l,s,g),i.elementType=P,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:_=10;break t;case D:_=9;break t;case I:_=11;break t;case H:_=14;break t;case K:_=16,u=null;break t}_=29,l=Error(n(130,i===null?"null":typeof i,"")),u=null}return s=ui(_,l,s,g),s.elementType=i,s.type=u,s.lanes=y,s}function zo(i,s,l,u){return i=ui(7,i,u,s),i.lanes=l,i}function rv(i,s,l){return i=ui(6,i,null,s),i.lanes=l,i}function GS(i){var s=ui(18,null,null,0);return s.stateNode=i,s}function av(i,s,l){return s=ui(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var XS=new WeakMap;function ji(i,s){if(typeof i=="object"&&i!==null){var l=XS.get(i);return l!==void 0?l:(s={value:i,source:s,stack:Es(s)},XS.set(i,s),s)}return{value:i,source:s,stack:Es(s)}}var Mc=[],Lc=0,Eg=null,$h=0,zi=[],Pi=0,ya=null,Ts=1,ks="";function ur(i,s){Mc[Lc++]=$h,Mc[Lc++]=Eg,Eg=i,$h=s}function YS(i,s,l){zi[Pi++]=Ts,zi[Pi++]=ks,zi[Pi++]=ya,ya=i;var u=Ts;i=ks;var g=32-li(u)-1;u&=~(1<<g),l+=1;var y=32-li(s)+g;if(30<y){var _=g-g%5;y=(u&(1<<_)-1).toString(32),u>>=_,g-=_,Ts=1<<32-li(s)+g|l<<g|u,ks=y+i}else Ts=1<<y|l<<g|u,ks=i}function ov(i){i.return!==null&&(ur(i,1),YS(i,1,0))}function lv(i){for(;i===Eg;)Eg=Mc[--Lc],Mc[Lc]=null,$h=Mc[--Lc],Mc[Lc]=null;for(;i===ya;)ya=zi[--Pi],zi[Pi]=null,ks=zi[--Pi],zi[Pi]=null,Ts=zi[--Pi],zi[Pi]=null}function $S(i,s){zi[Pi++]=Ts,zi[Pi++]=ks,zi[Pi++]=ya,Ts=s.id,ks=s.overflow,ya=i}var gn=null,xe=null,Yt=!1,ba=null,Fi=!1,cv=Error(n(519));function va(i){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kh(ji(s,i)),cv}function KS(i){var s=i.stateNode,l=i.type,u=i.memoizedProps;switch(s[pn]=i,s[$n]=u,l){case"dialog":Ht("cancel",s),Ht("close",s);break;case"iframe":case"object":case"embed":Ht("load",s);break;case"video":case"audio":for(l=0;l<yd.length;l++)Ht(yd[l],s);break;case"source":Ht("error",s);break;case"img":case"image":case"link":Ht("error",s),Ht("load",s);break;case"details":Ht("toggle",s);break;case"input":Ht("invalid",s),lS(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ht("invalid",s);break;case"textarea":Ht("invalid",s),uS(s,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||dx(s.textContent,l)?(u.popover!=null&&(Ht("beforetoggle",s),Ht("toggle",s)),u.onScroll!=null&&Ht("scroll",s),u.onScrollEnd!=null&&Ht("scrollend",s),u.onClick!=null&&(s.onclick=or),s=!0):s=!1,s||va(i,!0)}function WS(i){for(gn=i.return;gn;)switch(gn.tag){case 5:case 31:case 13:Fi=!1;return;case 27:case 3:Fi=!0;return;default:gn=gn.return}}function Dc(i){if(i!==gn)return!1;if(!Yt)return WS(i),Yt=!0,!1;var s=i.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||T0(i.type,i.memoizedProps)),l=!l),l&&xe&&va(i),WS(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xe=_x(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xe=_x(i)}else s===27?(s=xe,Na(i.type)?(i=D0,D0=null,xe=i):xe=s):xe=gn?Bi(i.stateNode.nextSibling):null;return!0}function Po(){xe=gn=null,Yt=!1}function uv(){var i=ba;return i!==null&&(Jn===null?Jn=i:Jn.push.apply(Jn,i),ba=null),i}function Kh(i){ba===null?ba=[i]:ba.push(i)}var hv=N(null),Fo=null,hr=null;function wa(i,s,l){Q(hv,s._currentValue),s._currentValue=l}function dr(i){i._currentValue=hv.current,q(hv)}function dv(i,s,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===l)break;i=i.return}}function fv(i,s,l,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var _=g.child;y=y.firstContext;t:for(;y!==null;){var C=y;y=g;for(var j=0;j<s.length;j++)if(C.context===s[j]){y.lanes|=l,C=y.alternate,C!==null&&(C.lanes|=l),dv(y.return,l,i),u||(_=null);break t}y=C.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(n(341));_.lanes|=l,y=_.alternate,y!==null&&(y.lanes|=l),dv(_,l,i),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function Nc(i,s,l,u){i=null;for(var g=s,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var C=g.type;ci(g.pendingProps.value,_.value)||(i!==null?i.push(C):i=[C])}}else if(g===ot.current){if(_=g.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Ad):i=[Ad])}g=g.return}i!==null&&fv(s,i,l,u),s.flags|=262144}function xg(i){for(i=i.firstContext;i!==null;){if(!ci(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Io(i){Fo=i,hr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function mn(i){return QS(Fo,i)}function Cg(i,s){return Fo===null&&Io(i),QS(i,s)}function QS(i,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},hr===null){if(i===null)throw Error(n(308));hr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else hr=hr.next=s;return l}var XL=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(l,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(l){return l()})}},YL=r.unstable_scheduleCallback,$L=r.unstable_NormalPriority,Ue={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pv(){return{controller:new XL,data:new Map,refCount:0}}function Wh(i){i.refCount--,i.refCount===0&&YL($L,function(){i.controller.abort()})}var Qh=null,gv=0,Oc=0,jc=null;function KL(i,s){if(Qh===null){var l=Qh=[];gv=0,Oc=b0(),jc={status:"pending",value:void 0,then:function(u){l.push(u)}}}return gv++,s.then(ZS,ZS),s}function ZS(){if(--gv===0&&Qh!==null){jc!==null&&(jc.status="fulfilled");var i=Qh;Qh=null,Oc=0,jc=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function WL(i,s){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<l.length;g++)(0,l[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var JS=F.S;F.S=function(i,s){z1=an(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&KL(i,s),JS!==null&&JS(i,s)};var Bo=N(null);function mv(){var i=Bo.current;return i!==null?i:ve.pooledCache}function Tg(i,s){s===null?Q(Bo,Bo.current):Q(Bo,s.pool)}function tE(){var i=mv();return i===null?null:{parent:Ue._currentValue,pool:i}}var zc=Error(n(460)),yv=Error(n(474)),kg=Error(n(542)),Rg={then:function(){}};function eE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function nE(i,s,l){switch(l=i[l],l===void 0?i.push(s):l!==s&&(s.then(or,or),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,sE(i),i;default:if(typeof s.status=="string")s.then(or,or);else{if(i=ve,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,sE(i),i}throw Ho=s,zc}}function Uo(i){try{var s=i._init;return s(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ho=l,zc):l}}var Ho=null;function iE(){if(Ho===null)throw Error(n(459));var i=Ho;return Ho=null,i}function sE(i){if(i===zc||i===kg)throw Error(n(483))}var Pc=null,Zh=0;function Mg(i){var s=Zh;return Zh+=1,Pc===null&&(Pc=[]),nE(Pc,i,s)}function Jh(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Lg(i,s){throw s.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function rE(i){function s(B,z){if(i){var X=B.deletions;X===null?(B.deletions=[z],B.flags|=16):X.push(z)}}function l(B,z){if(!i)return null;for(;z!==null;)s(B,z),z=z.sibling;return null}function u(B){for(var z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function g(B,z){return B=cr(B,z),B.index=0,B.sibling=null,B}function y(B,z,X){return B.index=X,i?(X=B.alternate,X!==null?(X=X.index,X<z?(B.flags|=67108866,z):X):(B.flags|=67108866,z)):(B.flags|=1048576,z)}function _(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function C(B,z,X,J){return z===null||z.tag!==6?(z=rv(X,B.mode,J),z.return=B,z):(z=g(z,X),z.return=B,z)}function j(B,z,X,J){var St=X.type;return St===S?Z(B,z,X.props.children,J,X.key):z!==null&&(z.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===K&&Uo(St)===z.type)?(z=g(z,X.props),Jh(z,X),z.return=B,z):(z=Sg(X.type,X.key,X.props,null,B.mode,J),Jh(z,X),z.return=B,z)}function Y(B,z,X,J){return z===null||z.tag!==4||z.stateNode.containerInfo!==X.containerInfo||z.stateNode.implementation!==X.implementation?(z=av(X,B.mode,J),z.return=B,z):(z=g(z,X.children||[]),z.return=B,z)}function Z(B,z,X,J,St){return z===null||z.tag!==7?(z=zo(X,B.mode,J,St),z.return=B,z):(z=g(z,X),z.return=B,z)}function et(B,z,X){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=rv(""+z,B.mode,X),z.return=B,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return X=Sg(z.type,z.key,z.props,null,B.mode,X),Jh(X,z),X.return=B,X;case A:return z=av(z,B.mode,X),z.return=B,z;case K:return z=Uo(z),et(B,z,X)}if(st(z)||mt(z))return z=zo(z,B.mode,X,null),z.return=B,z;if(typeof z.then=="function")return et(B,Mg(z),X);if(z.$$typeof===O)return et(B,Cg(B,z),X);Lg(B,z)}return null}function $(B,z,X,J){var St=z!==null?z.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return St!==null?null:C(B,z,""+X,J);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return X.key===St?j(B,z,X,J):null;case A:return X.key===St?Y(B,z,X,J):null;case K:return X=Uo(X),$(B,z,X,J)}if(st(X)||mt(X))return St!==null?null:Z(B,z,X,J,null);if(typeof X.then=="function")return $(B,z,Mg(X),J);if(X.$$typeof===O)return $(B,z,Cg(B,X),J);Lg(B,X)}return null}function W(B,z,X,J,St){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return B=B.get(X)||null,C(z,B,""+J,St);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return B=B.get(J.key===null?X:J.key)||null,j(z,B,J,St);case A:return B=B.get(J.key===null?X:J.key)||null,Y(z,B,J,St);case K:return J=Uo(J),W(B,z,X,J,St)}if(st(J)||mt(J))return B=B.get(X)||null,Z(z,B,J,St,null);if(typeof J.then=="function")return W(B,z,X,Mg(J),St);if(J.$$typeof===O)return W(B,z,X,Cg(z,J),St);Lg(z,J)}return null}function ft(B,z,X,J){for(var St=null,ee=null,vt=z,Nt=z=0,Xt=null;vt!==null&&Nt<X.length;Nt++){vt.index>Nt?(Xt=vt,vt=null):Xt=vt.sibling;var ne=$(B,vt,X[Nt],J);if(ne===null){vt===null&&(vt=Xt);break}i&&vt&&ne.alternate===null&&s(B,vt),z=y(ne,z,Nt),ee===null?St=ne:ee.sibling=ne,ee=ne,vt=Xt}if(Nt===X.length)return l(B,vt),Yt&&ur(B,Nt),St;if(vt===null){for(;Nt<X.length;Nt++)vt=et(B,X[Nt],J),vt!==null&&(z=y(vt,z,Nt),ee===null?St=vt:ee.sibling=vt,ee=vt);return Yt&&ur(B,Nt),St}for(vt=u(vt);Nt<X.length;Nt++)Xt=W(vt,B,Nt,X[Nt],J),Xt!==null&&(i&&Xt.alternate!==null&&vt.delete(Xt.key===null?Nt:Xt.key),z=y(Xt,z,Nt),ee===null?St=Xt:ee.sibling=Xt,ee=Xt);return i&&vt.forEach(function(Fa){return s(B,Fa)}),Yt&&ur(B,Nt),St}function Ct(B,z,X,J){if(X==null)throw Error(n(151));for(var St=null,ee=null,vt=z,Nt=z=0,Xt=null,ne=X.next();vt!==null&&!ne.done;Nt++,ne=X.next()){vt.index>Nt?(Xt=vt,vt=null):Xt=vt.sibling;var Fa=$(B,vt,ne.value,J);if(Fa===null){vt===null&&(vt=Xt);break}i&&vt&&Fa.alternate===null&&s(B,vt),z=y(Fa,z,Nt),ee===null?St=Fa:ee.sibling=Fa,ee=Fa,vt=Xt}if(ne.done)return l(B,vt),Yt&&ur(B,Nt),St;if(vt===null){for(;!ne.done;Nt++,ne=X.next())ne=et(B,ne.value,J),ne!==null&&(z=y(ne,z,Nt),ee===null?St=ne:ee.sibling=ne,ee=ne);return Yt&&ur(B,Nt),St}for(vt=u(vt);!ne.done;Nt++,ne=X.next())ne=W(vt,B,Nt,ne.value,J),ne!==null&&(i&&ne.alternate!==null&&vt.delete(ne.key===null?Nt:ne.key),z=y(ne,z,Nt),ee===null?St=ne:ee.sibling=ne,ee=ne);return i&&vt.forEach(function(oN){return s(B,oN)}),Yt&&ur(B,Nt),St}function ge(B,z,X,J){if(typeof X=="object"&&X!==null&&X.type===S&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case w:t:{for(var St=X.key;z!==null;){if(z.key===St){if(St=X.type,St===S){if(z.tag===7){l(B,z.sibling),J=g(z,X.props.children),J.return=B,B=J;break t}}else if(z.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===K&&Uo(St)===z.type){l(B,z.sibling),J=g(z,X.props),Jh(J,X),J.return=B,B=J;break t}l(B,z);break}else s(B,z);z=z.sibling}X.type===S?(J=zo(X.props.children,B.mode,J,X.key),J.return=B,B=J):(J=Sg(X.type,X.key,X.props,null,B.mode,J),Jh(J,X),J.return=B,B=J)}return _(B);case A:t:{for(St=X.key;z!==null;){if(z.key===St)if(z.tag===4&&z.stateNode.containerInfo===X.containerInfo&&z.stateNode.implementation===X.implementation){l(B,z.sibling),J=g(z,X.children||[]),J.return=B,B=J;break t}else{l(B,z);break}else s(B,z);z=z.sibling}J=av(X,B.mode,J),J.return=B,B=J}return _(B);case K:return X=Uo(X),ge(B,z,X,J)}if(st(X))return ft(B,z,X,J);if(mt(X)){if(St=mt(X),typeof St!="function")throw Error(n(150));return X=St.call(X),Ct(B,z,X,J)}if(typeof X.then=="function")return ge(B,z,Mg(X),J);if(X.$$typeof===O)return ge(B,z,Cg(B,X),J);Lg(B,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,z!==null&&z.tag===6?(l(B,z.sibling),J=g(z,X),J.return=B,B=J):(l(B,z),J=rv(X,B.mode,J),J.return=B,B=J),_(B)):l(B,z)}return function(B,z,X,J){try{Zh=0;var St=ge(B,z,X,J);return Pc=null,St}catch(vt){if(vt===zc||vt===kg)throw vt;var ee=ui(29,vt,null,B.mode);return ee.lanes=J,ee.return=B,ee}finally{}}}var qo=rE(!0),aE=rE(!1),_a=!1;function bv(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vv(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Aa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Sa(i,s,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ae&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=Ag(i),qS(i,null,l),s}return _g(i,u,s,l),Ag(i)}function td(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,QA(i,l)}}function wv(i,s){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?g=y=_:y=y.next=_,l=l.next}while(l!==null);y===null?g=y=s:y=y.next=s}else g=y=s;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}var _v=!1;function ed(){if(_v){var i=jc;if(i!==null)throw i}}function nd(i,s,l,u){_v=!1;var g=i.updateQueue;_a=!1;var y=g.firstBaseUpdate,_=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var j=C,Y=j.next;j.next=null,_===null?y=Y:_.next=Y,_=j;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,C=Z.lastBaseUpdate,C!==_&&(C===null?Z.firstBaseUpdate=Y:C.next=Y,Z.lastBaseUpdate=j))}if(y!==null){var et=g.baseState;_=0,Z=Y=j=null,C=y;do{var $=C.lane&-536870913,W=$!==C.lane;if(W?(Gt&$)===$:(u&$)===$){$!==0&&$===Oc&&(_v=!0),Z!==null&&(Z=Z.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var ft=i,Ct=C;$=s;var ge=l;switch(Ct.tag){case 1:if(ft=Ct.payload,typeof ft=="function"){et=ft.call(ge,et,$);break t}et=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=Ct.payload,$=typeof ft=="function"?ft.call(ge,et,$):ft,$==null)break t;et=b({},et,$);break t;case 2:_a=!0}}$=C.callback,$!==null&&(i.flags|=64,W&&(i.flags|=8192),W=g.callbacks,W===null?g.callbacks=[$]:W.push($))}else W={lane:$,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Z===null?(Y=Z=W,j=et):Z=Z.next=W,_|=$;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;W=C,C=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);Z===null&&(j=et),g.baseState=j,g.firstBaseUpdate=Y,g.lastBaseUpdate=Z,y===null&&(g.shared.lanes=0),ka|=_,i.lanes=_,i.memoizedState=et}}function oE(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function lE(i,s){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)oE(l[i],s)}var Fc=N(null),Dg=N(0);function cE(i,s){i=_r,Q(Dg,i),Q(Fc,s),_r=i|s.baseLanes}function Av(){Q(Dg,_r),Q(Fc,Fc.current)}function Sv(){_r=Dg.current,q(Fc),q(Dg)}var hi=N(null),Ii=null;function Ea(i){var s=i.alternate;Q(Pe,Pe.current&1),Q(hi,i),Ii===null&&(s===null||Fc.current!==null||s.memoizedState!==null)&&(Ii=i)}function Ev(i){Q(Pe,Pe.current),Q(hi,i),Ii===null&&(Ii=i)}function uE(i){i.tag===22?(Q(Pe,Pe.current),Q(hi,i),Ii===null&&(Ii=i)):xa()}function xa(){Q(Pe,Pe.current),Q(hi,hi.current)}function di(i){q(hi),Ii===i&&(Ii=null),q(Pe)}var Pe=N(0);function Ng(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||M0(l)||L0(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var fr=0,Dt=null,fe=null,He=null,Og=!1,Ic=!1,Vo=!1,jg=0,id=0,Bc=null,QL=0;function Oe(){throw Error(n(321))}function xv(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!ci(i[l],s[l]))return!1;return!0}function Cv(i,s,l,u,g,y){return fr=y,Dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,F.H=i===null||i.memoizedState===null?YE:Uv,Vo=!1,y=l(u,g),Vo=!1,Ic&&(y=dE(s,l,u,g)),hE(i),y}function hE(i){F.H=ad;var s=fe!==null&&fe.next!==null;if(fr=0,He=fe=Dt=null,Og=!1,id=0,Bc=null,s)throw Error(n(300));i===null||qe||(i=i.dependencies,i!==null&&xg(i)&&(qe=!0))}function dE(i,s,l,u){Dt=i;var g=0;do{if(Ic&&(Bc=null),id=0,Ic=!1,25<=g)throw Error(n(301));if(g+=1,He=fe=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}F.H=$E,y=s(l,u)}while(Ic);return y}function ZL(){var i=F.H,s=i.useState()[0];return s=typeof s.then=="function"?sd(s):s,i=i.useState()[0],(fe!==null?fe.memoizedState:null)!==i&&(Dt.flags|=1024),s}function Tv(){var i=jg!==0;return jg=0,i}function kv(i,s,l){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~l}function Rv(i){if(Og){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Og=!1}fr=0,He=fe=Dt=null,Ic=!1,id=jg=0,Bc=null}function Bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Dt.memoizedState=He=i:He=He.next=i,He}function Fe(){if(fe===null){var i=Dt.alternate;i=i!==null?i.memoizedState:null}else i=fe.next;var s=He===null?Dt.memoizedState:He.next;if(s!==null)He=s,fe=i;else{if(i===null)throw Dt.alternate===null?Error(n(467)):Error(n(310));fe=i,i={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},He===null?Dt.memoizedState=He=i:He=He.next=i}return He}function zg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sd(i){var s=id;return id+=1,Bc===null&&(Bc=[]),i=nE(Bc,i,s),s=Dt,(He===null?s.memoizedState:He.next)===null&&(s=s.alternate,F.H=s===null||s.memoizedState===null?YE:Uv),i}function Pg(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return sd(i);if(i.$$typeof===O)return mn(i)}throw Error(n(438,String(i)))}function Mv(i){var s=null,l=Dt.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=Dt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=zg(),Dt.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(i),u=0;u<i;u++)l[u]=nt;return s.index++,l}function pr(i,s){return typeof s=="function"?s(i):s}function Fg(i){var s=Fe();return Lv(s,fe,i)}function Lv(i,s,l){var u=i.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=l;var g=i.baseQueue,y=u.pending;if(y!==null){if(g!==null){var _=g.next;g.next=y.next,y.next=_}s.baseQueue=g=y,u.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{s=g.next;var C=_=null,j=null,Y=s,Z=!1;do{var et=Y.lane&-536870913;if(et!==Y.lane?(Gt&et)===et:(fr&et)===et){var $=Y.revertLane;if($===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),et===Oc&&(Z=!0);else if((fr&$)===$){Y=Y.next,$===Oc&&(Z=!0);continue}else et={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(C=j=et,_=y):j=j.next=et,Dt.lanes|=$,ka|=$;et=Y.action,Vo&&l(y,et),y=Y.hasEagerState?Y.eagerState:l(y,et)}else $={lane:et,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(C=j=$,_=y):j=j.next=$,Dt.lanes|=et,ka|=et;Y=Y.next}while(Y!==null&&Y!==s);if(j===null?_=y:j.next=C,!ci(y,i.memoizedState)&&(qe=!0,Z&&(l=jc,l!==null)))throw l;i.memoizedState=y,i.baseState=_,i.baseQueue=j,u.lastRenderedState=y}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Dv(i){var s=Fe(),l=s.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var u=l.dispatch,g=l.pending,y=s.memoizedState;if(g!==null){l.pending=null;var _=g=g.next;do y=i(y,_.action),_=_.next;while(_!==g);ci(y,s.memoizedState)||(qe=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,u]}function fE(i,s,l){var u=Dt,g=Fe(),y=Yt;if(y){if(l===void 0)throw Error(n(407));l=l()}else l=s();var _=!ci((fe||g).memoizedState,l);if(_&&(g.memoizedState=l,qe=!0),g=g.queue,jv(mE.bind(null,u,g,i),[i]),g.getSnapshot!==s||_||He!==null&&He.memoizedState.tag&1){if(u.flags|=2048,Uc(9,{destroy:void 0},gE.bind(null,u,g,l,s),null),ve===null)throw Error(n(349));y||(fr&127)!==0||pE(u,s,l)}return l}function pE(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=Dt.updateQueue,s===null?(s=zg(),Dt.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function gE(i,s,l,u){s.value=l,s.getSnapshot=u,yE(s)&&bE(i)}function mE(i,s,l){return l(function(){yE(s)&&bE(i)})}function yE(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!ci(i,l)}catch{return!0}}function bE(i){var s=jo(i,2);s!==null&&ti(s,i,2)}function Nv(i){var s=Bn();if(typeof i=="function"){var l=i;if(i=l(),Vo){Cs(!0);try{l()}finally{Cs(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:i},s}function vE(i,s,l,u){return i.baseState=l,Lv(i,fe,typeof u=="function"?u:pr)}function JL(i,s,l,u,g){if(Ug(i))throw Error(n(485));if(i=s.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};F.T!==null?l(!0):y.isTransition=!1,u(y),l=s.pending,l===null?(y.next=s.pending=y,wE(s,y)):(y.next=l.next,s.pending=l.next=y)}}function wE(i,s){var l=s.action,u=s.payload,g=i.state;if(s.isTransition){var y=F.T,_={};F.T=_;try{var C=l(g,u),j=F.S;j!==null&&j(_,C),_E(i,s,C)}catch(Y){Ov(i,s,Y)}finally{y!==null&&_.types!==null&&(y.types=_.types),F.T=y}}else try{y=l(g,u),_E(i,s,y)}catch(Y){Ov(i,s,Y)}}function _E(i,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){AE(i,s,u)},function(u){return Ov(i,s,u)}):AE(i,s,l)}function AE(i,s,l){s.status="fulfilled",s.value=l,SE(s),i.state=l,s=i.pending,s!==null&&(l=s.next,l===s?i.pending=null:(l=l.next,s.next=l,wE(i,l)))}function Ov(i,s,l){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,SE(s),s=s.next;while(s!==u)}i.action=null}function SE(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function EE(i,s){return s}function xE(i,s){if(Yt){var l=ve.formState;if(l!==null){t:{var u=Dt;if(Yt){if(xe){e:{for(var g=xe,y=Fi;g.nodeType!==8;){if(!y){g=null;break e}if(g=Bi(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){xe=Bi(g.nextSibling),u=g.data==="F!";break t}}va(u)}u=!1}u&&(s=l[0])}}return l=Bn(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:EE,lastRenderedState:s},l.queue=u,l=VE.bind(null,Dt,u),u.dispatch=l,u=Nv(!1),y=Bv.bind(null,Dt,!1,u.queue),u=Bn(),g={state:s,dispatch:null,action:i,pending:null},u.queue=g,l=JL.bind(null,Dt,g,y,l),g.dispatch=l,u.memoizedState=i,[s,l,!1]}function CE(i){var s=Fe();return TE(s,fe,i)}function TE(i,s,l){if(s=Lv(i,s,EE)[0],i=Fg(pr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=sd(s)}catch(_){throw _===zc?kg:_}else u=s;s=Fe();var g=s.queue,y=g.dispatch;return l!==s.memoizedState&&(Dt.flags|=2048,Uc(9,{destroy:void 0},tD.bind(null,g,l),null)),[u,y,i]}function tD(i,s){i.action=s}function kE(i){var s=Fe(),l=fe;if(l!==null)return TE(s,l,i);Fe(),s=s.memoizedState,l=Fe();var u=l.queue.dispatch;return l.memoizedState=i,[s,u,!1]}function Uc(i,s,l,u){return i={tag:i,create:l,deps:u,inst:s,next:null},s=Dt.updateQueue,s===null&&(s=zg(),Dt.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,s.lastEffect=i),i}function RE(){return Fe().memoizedState}function Ig(i,s,l,u){var g=Bn();Dt.flags|=i,g.memoizedState=Uc(1|s,{destroy:void 0},l,u===void 0?null:u)}function Bg(i,s,l,u){var g=Fe();u=u===void 0?null:u;var y=g.memoizedState.inst;fe!==null&&u!==null&&xv(u,fe.memoizedState.deps)?g.memoizedState=Uc(s,y,l,u):(Dt.flags|=i,g.memoizedState=Uc(1|s,y,l,u))}function ME(i,s){Ig(8390656,8,i,s)}function jv(i,s){Bg(2048,8,i,s)}function eD(i){Dt.flags|=4;var s=Dt.updateQueue;if(s===null)s=zg(),Dt.updateQueue=s,s.events=[i];else{var l=s.events;l===null?s.events=[i]:l.push(i)}}function LE(i){var s=Fe().memoizedState;return eD({ref:s,nextImpl:i}),function(){if((ae&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function DE(i,s){return Bg(4,2,i,s)}function NE(i,s){return Bg(4,4,i,s)}function OE(i,s){if(typeof s=="function"){i=i();var l=s(i);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function jE(i,s,l){l=l!=null?l.concat([i]):null,Bg(4,4,OE.bind(null,s,i),l)}function zv(){}function zE(i,s){var l=Fe();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&xv(s,u[1])?u[0]:(l.memoizedState=[i,s],i)}function PE(i,s){var l=Fe();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&xv(s,u[1]))return u[0];if(u=i(),Vo){Cs(!0);try{i()}finally{Cs(!1)}}return l.memoizedState=[u,s],u}function Pv(i,s,l){return l===void 0||(fr&1073741824)!==0&&(Gt&261930)===0?i.memoizedState=s:(i.memoizedState=l,i=F1(),Dt.lanes|=i,ka|=i,l)}function FE(i,s,l,u){return ci(l,s)?l:Fc.current!==null?(i=Pv(i,l,u),ci(i,s)||(qe=!0),i):(fr&42)===0||(fr&1073741824)!==0&&(Gt&261930)===0?(qe=!0,i.memoizedState=l):(i=F1(),Dt.lanes|=i,ka|=i,s)}function IE(i,s,l,u,g){var y=G.p;G.p=y!==0&&8>y?y:8;var _=F.T,C={};F.T=C,Bv(i,!1,s,l);try{var j=g(),Y=F.S;if(Y!==null&&Y(C,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var Z=WL(j,u);rd(i,s,Z,gi(i))}else rd(i,s,u,gi(i))}catch(et){rd(i,s,{then:function(){},status:"rejected",reason:et},gi())}finally{G.p=y,_!==null&&C.types!==null&&(_.types=C.types),F.T=_}}function nD(){}function Fv(i,s,l,u){if(i.tag!==5)throw Error(n(476));var g=BE(i).queue;IE(i,g,s,V,l===null?nD:function(){return UE(i),l(u)})}function BE(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:V},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:l},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function UE(i){var s=BE(i);s.next===null&&(s=i.alternate.memoizedState),rd(i,s.next.queue,{},gi())}function Iv(){return mn(Ad)}function HE(){return Fe().memoizedState}function qE(){return Fe().memoizedState}function iD(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var l=gi();i=Aa(l);var u=Sa(s,i,l);u!==null&&(ti(u,s,l),td(u,s,l)),s={cache:pv()},i.payload=s;return}s=s.return}}function sD(i,s,l){var u=gi();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ug(i)?GE(s,l):(l=iv(i,s,l,u),l!==null&&(ti(l,i,u),XE(l,s,u)))}function VE(i,s,l){var u=gi();rd(i,s,l,u)}function rd(i,s,l,u){var g={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ug(i))GE(s,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var _=s.lastRenderedState,C=y(_,l);if(g.hasEagerState=!0,g.eagerState=C,ci(C,_))return _g(i,s,g,0),ve===null&&wg(),!1}catch{}finally{}if(l=iv(i,s,g,u),l!==null)return ti(l,i,u),XE(l,s,u),!0}return!1}function Bv(i,s,l,u){if(u={lane:2,revertLane:b0(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ug(i)){if(s)throw Error(n(479))}else s=iv(i,l,u,2),s!==null&&ti(s,i,2)}function Ug(i){var s=i.alternate;return i===Dt||s!==null&&s===Dt}function GE(i,s){Ic=Og=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function XE(i,s,l){if((l&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,l|=u,s.lanes=l,QA(i,l)}}var ad={readContext:mn,use:Pg,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useLayoutEffect:Oe,useInsertionEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useSyncExternalStore:Oe,useId:Oe,useHostTransitionStatus:Oe,useFormState:Oe,useActionState:Oe,useOptimistic:Oe,useMemoCache:Oe,useCacheRefresh:Oe};ad.useEffectEvent=Oe;var YE={readContext:mn,use:Pg,useCallback:function(i,s){return Bn().memoizedState=[i,s===void 0?null:s],i},useContext:mn,useEffect:ME,useImperativeHandle:function(i,s,l){l=l!=null?l.concat([i]):null,Ig(4194308,4,OE.bind(null,s,i),l)},useLayoutEffect:function(i,s){return Ig(4194308,4,i,s)},useInsertionEffect:function(i,s){Ig(4,2,i,s)},useMemo:function(i,s){var l=Bn();s=s===void 0?null:s;var u=i();if(Vo){Cs(!0);try{i()}finally{Cs(!1)}}return l.memoizedState=[u,s],u},useReducer:function(i,s,l){var u=Bn();if(l!==void 0){var g=l(s);if(Vo){Cs(!0);try{l(s)}finally{Cs(!1)}}}else g=s;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=sD.bind(null,Dt,i),[u.memoizedState,i]},useRef:function(i){var s=Bn();return i={current:i},s.memoizedState=i},useState:function(i){i=Nv(i);var s=i.queue,l=VE.bind(null,Dt,s);return s.dispatch=l,[i.memoizedState,l]},useDebugValue:zv,useDeferredValue:function(i,s){var l=Bn();return Pv(l,i,s)},useTransition:function(){var i=Nv(!1);return i=IE.bind(null,Dt,i.queue,!0,!1),Bn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,l){var u=Dt,g=Bn();if(Yt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=s(),ve===null)throw Error(n(349));(Gt&127)!==0||pE(u,s,l)}g.memoizedState=l;var y={value:l,getSnapshot:s};return g.queue=y,ME(mE.bind(null,u,y,i),[i]),u.flags|=2048,Uc(9,{destroy:void 0},gE.bind(null,u,y,l,s),null),l},useId:function(){var i=Bn(),s=ve.identifierPrefix;if(Yt){var l=ks,u=Ts;l=(u&~(1<<32-li(u)-1)).toString(32)+l,s="_"+s+"R_"+l,l=jg++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=QL++,s="_"+s+"r_"+l.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Iv,useFormState:xE,useActionState:xE,useOptimistic:function(i){var s=Bn();s.memoizedState=s.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Bv.bind(null,Dt,!0,l),l.dispatch=s,[i,s]},useMemoCache:Mv,useCacheRefresh:function(){return Bn().memoizedState=iD.bind(null,Dt)},useEffectEvent:function(i){var s=Bn(),l={impl:i};return s.memoizedState=l,function(){if((ae&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},Uv={readContext:mn,use:Pg,useCallback:zE,useContext:mn,useEffect:jv,useImperativeHandle:jE,useInsertionEffect:DE,useLayoutEffect:NE,useMemo:PE,useReducer:Fg,useRef:RE,useState:function(){return Fg(pr)},useDebugValue:zv,useDeferredValue:function(i,s){var l=Fe();return FE(l,fe.memoizedState,i,s)},useTransition:function(){var i=Fg(pr)[0],s=Fe().memoizedState;return[typeof i=="boolean"?i:sd(i),s]},useSyncExternalStore:fE,useId:HE,useHostTransitionStatus:Iv,useFormState:CE,useActionState:CE,useOptimistic:function(i,s){var l=Fe();return vE(l,fe,i,s)},useMemoCache:Mv,useCacheRefresh:qE};Uv.useEffectEvent=LE;var $E={readContext:mn,use:Pg,useCallback:zE,useContext:mn,useEffect:jv,useImperativeHandle:jE,useInsertionEffect:DE,useLayoutEffect:NE,useMemo:PE,useReducer:Dv,useRef:RE,useState:function(){return Dv(pr)},useDebugValue:zv,useDeferredValue:function(i,s){var l=Fe();return fe===null?Pv(l,i,s):FE(l,fe.memoizedState,i,s)},useTransition:function(){var i=Dv(pr)[0],s=Fe().memoizedState;return[typeof i=="boolean"?i:sd(i),s]},useSyncExternalStore:fE,useId:HE,useHostTransitionStatus:Iv,useFormState:kE,useActionState:kE,useOptimistic:function(i,s){var l=Fe();return fe!==null?vE(l,fe,i,s):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Mv,useCacheRefresh:qE};$E.useEffectEvent=LE;function Hv(i,s,l,u){s=i.memoizedState,l=l(u,s),l=l==null?s:b({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var qv={enqueueSetState:function(i,s,l){i=i._reactInternals;var u=gi(),g=Aa(u);g.payload=s,l!=null&&(g.callback=l),s=Sa(i,g,u),s!==null&&(ti(s,i,u),td(s,i,u))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var u=gi(),g=Aa(u);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=Sa(i,g,u),s!==null&&(ti(s,i,u),td(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=gi(),u=Aa(l);u.tag=2,s!=null&&(u.callback=s),s=Sa(i,u,l),s!==null&&(ti(s,i,l),td(s,i,l))}};function KE(i,s,l,u,g,y,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,y,_):s.prototype&&s.prototype.isPureReactComponent?!Xh(l,u)||!Xh(g,y):!0}function WE(i,s,l,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==i&&qv.enqueueReplaceState(s,s.state,null)}function Go(i,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(i=i.defaultProps){l===s&&(l=b({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}function QE(i){vg(i)}function ZE(i){console.error(i)}function JE(i){vg(i)}function Hg(i,s){try{var l=i.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function t1(i,s,l){try{var u=i.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Vv(i,s,l){return l=Aa(l),l.tag=3,l.payload={element:null},l.callback=function(){Hg(i,s)},l}function e1(i){return i=Aa(i),i.tag=3,i}function n1(i,s,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;i.payload=function(){return g(y)},i.callback=function(){t1(s,l,u)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){t1(s,l,u),typeof g!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function rD(i,s,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&Nc(s,l,g,!0),l=hi.current,l!==null){switch(l.tag){case 31:case 13:return Ii===null?tm():l.alternate===null&&je===0&&(je=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Rg?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),g0(i,u,g)),!1;case 22:return l.flags|=65536,u===Rg?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),g0(i,u,g)),!1}throw Error(n(435,l.tag))}return g0(i,u,g),tm(),!1}if(Yt)return s=hi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==cv&&(i=Error(n(422),{cause:u}),Kh(ji(i,l)))):(u!==cv&&(s=Error(n(423),{cause:u}),Kh(ji(s,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=ji(u,l),g=Vv(i.stateNode,u,g),wv(i,g),je!==4&&(je=2)),!1;var y=Error(n(520),{cause:u});if(y=ji(y,l),pd===null?pd=[y]:pd.push(y),je!==4&&(je=2),s===null)return!0;u=ji(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Vv(l.stateNode,u,i),wv(l,i),!1;case 1:if(s=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ra===null||!Ra.has(y))))return l.flags|=65536,g&=-g,l.lanes|=g,g=e1(g),n1(g,i,l,u),wv(l,g),!1}l=l.return}while(l!==null);return!1}var Gv=Error(n(461)),qe=!1;function yn(i,s,l,u){s.child=i===null?aE(s,null,l,u):qo(s,i.child,l,u)}function i1(i,s,l,u,g){l=l.render;var y=s.ref;if("ref"in u){var _={};for(var C in u)C!=="ref"&&(_[C]=u[C])}else _=u;return Io(s),u=Cv(i,s,l,_,y,g),C=Tv(),i!==null&&!qe?(kv(i,s,g),gr(i,s,g)):(Yt&&C&&ov(s),s.flags|=1,yn(i,s,u,g),s.child)}function s1(i,s,l,u,g){if(i===null){var y=l.type;return typeof y=="function"&&!sv(y)&&y.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=y,r1(i,s,y,u,g)):(i=Sg(l.type,null,u,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!Jv(i,g)){var _=y.memoizedProps;if(l=l.compare,l=l!==null?l:Xh,l(_,u)&&i.ref===s.ref)return gr(i,s,g)}return s.flags|=1,i=cr(y,u),i.ref=s.ref,i.return=s,s.child=i}function r1(i,s,l,u,g){if(i!==null){var y=i.memoizedProps;if(Xh(y,u)&&i.ref===s.ref)if(qe=!1,s.pendingProps=u=y,Jv(i,g))(i.flags&131072)!==0&&(qe=!0);else return s.lanes=i.lanes,gr(i,s,g)}return Xv(i,s,l,u,g)}function a1(i,s,l,u){var g=u.children,y=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,i!==null){for(u=s.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,s.child=null;return o1(i,s,y,l,u)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Tg(s,y!==null?y.cachePool:null),y!==null?cE(s,y):Av(),uE(s);else return u=s.lanes=536870912,o1(i,s,y!==null?y.baseLanes|l:l,l,u)}else y!==null?(Tg(s,y.cachePool),cE(s,y),xa(),s.memoizedState=null):(i!==null&&Tg(s,null),Av(),xa());return yn(i,s,g,l),s.child}function od(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function o1(i,s,l,u,g){var y=mv();return y=y===null?null:{parent:Ue._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},i!==null&&Tg(s,null),Av(),uE(s),i!==null&&Nc(i,s,u,!0),s.childLanes=g,null}function qg(i,s){return s=Gg({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function l1(i,s,l){return qo(s,i.child,null,l),i=qg(s,s.pendingProps),i.flags|=2,di(s),s.memoizedState=null,i}function aD(i,s,l){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Yt){if(u.mode==="hidden")return i=qg(s,u),s.lanes=536870912,od(null,i);if(Ev(s),(i=xe)?(i=wx(i,Fi),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ya!==null?{id:Ts,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},l=GS(i),l.return=s,s.child=l,gn=s,xe=null)):i=null,i===null)throw va(s);return s.lanes=536870912,null}return qg(s,u)}var y=i.memoizedState;if(y!==null){var _=y.dehydrated;if(Ev(s),g)if(s.flags&256)s.flags&=-257,s=l1(i,s,l);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(n(558));else if(qe||Nc(i,s,l,!1),g=(l&i.childLanes)!==0,qe||g){if(u=ve,u!==null&&(_=ZA(u,l),_!==0&&_!==y.retryLane))throw y.retryLane=_,jo(i,_),ti(u,i,_),Gv;tm(),s=l1(i,s,l)}else i=y.treeContext,xe=Bi(_.nextSibling),gn=s,Yt=!0,ba=null,Fi=!1,i!==null&&$S(s,i),s=qg(s,u),s.flags|=4096;return s}return i=cr(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Vg(i,s){var l=s.ref;if(l===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(s.flags|=4194816)}}function Xv(i,s,l,u,g){return Io(s),l=Cv(i,s,l,u,void 0,g),u=Tv(),i!==null&&!qe?(kv(i,s,g),gr(i,s,g)):(Yt&&u&&ov(s),s.flags|=1,yn(i,s,l,g),s.child)}function c1(i,s,l,u,g,y){return Io(s),s.updateQueue=null,l=dE(s,u,l,g),hE(i),u=Tv(),i!==null&&!qe?(kv(i,s,y),gr(i,s,y)):(Yt&&u&&ov(s),s.flags|=1,yn(i,s,l,y),s.child)}function u1(i,s,l,u,g){if(Io(s),s.stateNode===null){var y=Rc,_=l.contextType;typeof _=="object"&&_!==null&&(y=mn(_)),y=new l(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=qv,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},bv(s),_=l.contextType,y.context=typeof _=="object"&&_!==null?mn(_):Rc,y.state=s.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Hv(s,l,_,u),y.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&qv.enqueueReplaceState(y,y.state,null),nd(s,u,y,g),ed(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){y=s.stateNode;var C=s.memoizedProps,j=Go(l,C);y.props=j;var Y=y.context,Z=l.contextType;_=Rc,typeof Z=="object"&&Z!==null&&(_=mn(Z));var et=l.getDerivedStateFromProps;Z=typeof et=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,Z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||Y!==_)&&WE(s,y,u,_),_a=!1;var $=s.memoizedState;y.state=$,nd(s,u,y,g),ed(),Y=s.memoizedState,C||$!==Y||_a?(typeof et=="function"&&(Hv(s,l,et,u),Y=s.memoizedState),(j=_a||KE(s,l,j,u,$,Y,_))?(Z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=Y),y.props=u,y.state=Y,y.context=_,u=j):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,vv(i,s),_=s.memoizedProps,Z=Go(l,_),y.props=Z,et=s.pendingProps,$=y.context,Y=l.contextType,j=Rc,typeof Y=="object"&&Y!==null&&(j=mn(Y)),C=l.getDerivedStateFromProps,(Y=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==et||$!==j)&&WE(s,y,u,j),_a=!1,$=s.memoizedState,y.state=$,nd(s,u,y,g),ed();var W=s.memoizedState;_!==et||$!==W||_a||i!==null&&i.dependencies!==null&&xg(i.dependencies)?(typeof C=="function"&&(Hv(s,l,C,u),W=s.memoizedState),(Z=_a||KE(s,l,Z,u,$,W,j)||i!==null&&i.dependencies!==null&&xg(i.dependencies))?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,W,j),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,W,j)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&$===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&$===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=W),y.props=u,y.state=W,y.context=j,u=Z):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&$===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&$===i.memoizedState||(s.flags|=1024),u=!1)}return y=u,Vg(i,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&u?(s.child=qo(s,i.child,null,g),s.child=qo(s,null,l,g)):yn(i,s,l,g),s.memoizedState=y.state,i=s.child):i=gr(i,s,g),i}function h1(i,s,l,u){return Po(),s.flags|=256,yn(i,s,l,u),s.child}var Yv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $v(i){return{baseLanes:i,cachePool:tE()}}function Kv(i,s,l){return i=i!==null?i.childLanes&~l:0,s&&(i|=pi),i}function d1(i,s,l){var u=s.pendingProps,g=!1,y=(s.flags&128)!==0,_;if((_=y)||(_=i!==null&&i.memoizedState===null?!1:(Pe.current&2)!==0),_&&(g=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,i===null){if(Yt){if(g?Ea(s):xa(),(i=xe)?(i=wx(i,Fi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ya!==null?{id:Ts,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},l=GS(i),l.return=s,s.child=l,gn=s,xe=null)):i=null,i===null)throw va(s);return L0(i)?s.lanes=32:s.lanes=536870912,null}var C=u.children;return u=u.fallback,g?(xa(),g=s.mode,C=Gg({mode:"hidden",children:C},g),u=zo(u,g,l,null),C.return=s,u.return=s,C.sibling=u,s.child=C,u=s.child,u.memoizedState=$v(l),u.childLanes=Kv(i,_,l),s.memoizedState=Yv,od(null,u)):(Ea(s),Wv(s,C))}var j=i.memoizedState;if(j!==null&&(C=j.dehydrated,C!==null)){if(y)s.flags&256?(Ea(s),s.flags&=-257,s=Qv(i,s,l)):s.memoizedState!==null?(xa(),s.child=i.child,s.flags|=128,s=null):(xa(),C=u.fallback,g=s.mode,u=Gg({mode:"visible",children:u.children},g),C=zo(C,g,l,null),C.flags|=2,u.return=s,C.return=s,u.sibling=C,s.child=u,qo(s,i.child,null,l),u=s.child,u.memoizedState=$v(l),u.childLanes=Kv(i,_,l),s.memoizedState=Yv,s=od(null,u));else if(Ea(s),L0(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var Y=_.dgst;_=Y,u=Error(n(419)),u.stack="",u.digest=_,Kh({value:u,source:null,stack:null}),s=Qv(i,s,l)}else if(qe||Nc(i,s,l,!1),_=(l&i.childLanes)!==0,qe||_){if(_=ve,_!==null&&(u=ZA(_,l),u!==0&&u!==j.retryLane))throw j.retryLane=u,jo(i,u),ti(_,i,u),Gv;M0(C)||tm(),s=Qv(i,s,l)}else M0(C)?(s.flags|=192,s.child=i.child,s=null):(i=j.treeContext,xe=Bi(C.nextSibling),gn=s,Yt=!0,ba=null,Fi=!1,i!==null&&$S(s,i),s=Wv(s,u.children),s.flags|=4096);return s}return g?(xa(),C=u.fallback,g=s.mode,j=i.child,Y=j.sibling,u=cr(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,Y!==null?C=cr(Y,C):(C=zo(C,g,l,null),C.flags|=2),C.return=s,u.return=s,u.sibling=C,s.child=u,od(null,u),u=s.child,C=i.child.memoizedState,C===null?C=$v(l):(g=C.cachePool,g!==null?(j=Ue._currentValue,g=g.parent!==j?{parent:j,pool:j}:g):g=tE(),C={baseLanes:C.baseLanes|l,cachePool:g}),u.memoizedState=C,u.childLanes=Kv(i,_,l),s.memoizedState=Yv,od(i.child,u)):(Ea(s),l=i.child,i=l.sibling,l=cr(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,i!==null&&(_=s.deletions,_===null?(s.deletions=[i],s.flags|=16):_.push(i)),s.child=l,s.memoizedState=null,l)}function Wv(i,s){return s=Gg({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Gg(i,s){return i=ui(22,i,null,s),i.lanes=0,i}function Qv(i,s,l){return qo(s,i.child,null,l),i=Wv(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function f1(i,s,l){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),dv(i.return,s,l)}function Zv(i,s,l,u,g,y){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g,treeForkCount:y}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=l,_.tailMode=g,_.treeForkCount=y)}function p1(i,s,l){var u=s.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var _=Pe.current,C=(_&2)!==0;if(C?(_=_&1|2,s.flags|=128):_&=1,Q(Pe,_),yn(i,s,u,l),u=Yt?$h:0,!C&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&f1(i,l,s);else if(i.tag===19)f1(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(l=s.child,g=null;l!==null;)i=l.alternate,i!==null&&Ng(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),Zv(s,!1,g,l,y,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&Ng(i)===null){s.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Zv(s,!0,l,null,y,u);break;case"together":Zv(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function gr(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),ka|=s.lanes,(l&s.childLanes)===0)if(i!==null){if(Nc(i,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,l=cr(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=cr(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function Jv(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&xg(i)))}function oD(i,s,l){switch(s.tag){case 3:Pt(s,s.stateNode.containerInfo),wa(s,Ue,i.memoizedState.cache),Po();break;case 27:case 5:Bt(s);break;case 4:Pt(s,s.stateNode.containerInfo);break;case 10:wa(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ev(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ea(s),s.flags|=128,null):(l&s.child.childLanes)!==0?d1(i,s,l):(Ea(s),i=gr(i,s,l),i!==null?i.sibling:null);Ea(s);break;case 19:var g=(i.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(Nc(i,s,l,!1),u=(l&s.childLanes)!==0),g){if(u)return p1(i,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Q(Pe,Pe.current),u)break;return null;case 22:return s.lanes=0,a1(i,s,l,s.pendingProps);case 24:wa(s,Ue,i.memoizedState.cache)}return gr(i,s,l)}function g1(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps)qe=!0;else{if(!Jv(i,l)&&(s.flags&128)===0)return qe=!1,oD(i,s,l);qe=(i.flags&131072)!==0}else qe=!1,Yt&&(s.flags&1048576)!==0&&YS(s,$h,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(i=Uo(s.elementType),s.type=i,typeof i=="function")sv(i)?(u=Go(i,u),s.tag=1,s=u1(null,s,i,u,l)):(s.tag=0,s=Xv(null,s,i,u,l));else{if(i!=null){var g=i.$$typeof;if(g===I){s.tag=11,s=i1(null,s,i,u,l);break t}else if(g===H){s.tag=14,s=s1(null,s,i,u,l);break t}}throw s=dt(i)||i,Error(n(306,s,""))}}return s;case 0:return Xv(i,s,s.type,s.pendingProps,l);case 1:return u=s.type,g=Go(u,s.pendingProps),u1(i,s,u,g,l);case 3:t:{if(Pt(s,s.stateNode.containerInfo),i===null)throw Error(n(387));u=s.pendingProps;var y=s.memoizedState;g=y.element,vv(i,s),nd(s,u,null,l);var _=s.memoizedState;if(u=_.cache,wa(s,Ue,u),u!==y.cache&&fv(s,[Ue],l,!0),ed(),u=_.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=h1(i,s,u,l);break t}else if(u!==g){g=ji(Error(n(424)),s),Kh(g),s=h1(i,s,u,l);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(xe=Bi(i.firstChild),gn=s,Yt=!0,ba=null,Fi=!0,l=aE(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Po(),u===g){s=gr(i,s,l);break t}yn(i,s,u,l)}s=s.child}return s;case 26:return Vg(i,s),i===null?(l=Cx(s.type,null,s.pendingProps,null))?s.memoizedState=l:Yt||(l=s.type,i=s.pendingProps,u=om(bt.current).createElement(l),u[pn]=s,u[$n]=i,bn(u,l,i),on(u),s.stateNode=u):s.memoizedState=Cx(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Bt(s),i===null&&Yt&&(u=s.stateNode=Sx(s.type,s.pendingProps,bt.current),gn=s,Fi=!0,g=xe,Na(s.type)?(D0=g,xe=Bi(u.firstChild)):xe=g),yn(i,s,s.pendingProps.children,l),Vg(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Yt&&((g=u=xe)&&(u=PD(u,s.type,s.pendingProps,Fi),u!==null?(s.stateNode=u,gn=s,xe=Bi(u.firstChild),Fi=!1,g=!0):g=!1),g||va(s)),Bt(s),g=s.type,y=s.pendingProps,_=i!==null?i.memoizedProps:null,u=y.children,T0(g,y)?u=null:_!==null&&T0(g,_)&&(s.flags|=32),s.memoizedState!==null&&(g=Cv(i,s,ZL,null,null,l),Ad._currentValue=g),Vg(i,s),yn(i,s,u,l),s.child;case 6:return i===null&&Yt&&((i=l=xe)&&(l=FD(l,s.pendingProps,Fi),l!==null?(s.stateNode=l,gn=s,xe=null,i=!0):i=!1),i||va(s)),null;case 13:return d1(i,s,l);case 4:return Pt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=qo(s,null,u,l):yn(i,s,u,l),s.child;case 11:return i1(i,s,s.type,s.pendingProps,l);case 7:return yn(i,s,s.pendingProps,l),s.child;case 8:return yn(i,s,s.pendingProps.children,l),s.child;case 12:return yn(i,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,wa(s,s.type,u.value),yn(i,s,u.children,l),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Io(s),g=mn(g),u=u(g),s.flags|=1,yn(i,s,u,l),s.child;case 14:return s1(i,s,s.type,s.pendingProps,l);case 15:return r1(i,s,s.type,s.pendingProps,l);case 19:return p1(i,s,l);case 31:return aD(i,s,l);case 22:return a1(i,s,l,s.pendingProps);case 24:return Io(s),u=mn(Ue),i===null?(g=mv(),g===null&&(g=ve,y=pv(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=l),g=y),s.memoizedState={parent:u,cache:g},bv(s),wa(s,Ue,g)):((i.lanes&l)!==0&&(vv(i,s),nd(s,null,null,l),ed()),g=i.memoizedState,y=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),wa(s,Ue,u)):(u=y.cache,wa(s,Ue,u),u!==g.cache&&fv(s,[Ue],l,!0))),yn(i,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function mr(i){i.flags|=4}function t0(i,s,l,u,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(H1())i.flags|=8192;else throw Ho=Rg,yv}else i.flags&=-16777217}function m1(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Lx(s))if(H1())i.flags|=8192;else throw Ho=Rg,yv}function Xg(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?KA():536870912,i.lanes|=s,Gc|=s)}function ld(i,s){if(!Yt)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Ce(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(s)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=l,s}function lD(i,s,l){var u=s.pendingProps;switch(lv(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(s),null;case 1:return Ce(s),null;case 3:return l=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),dr(Ue),Ot(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Dc(s)?mr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,uv())),Ce(s),null;case 26:var g=s.type,y=s.memoizedState;return i===null?(mr(s),y!==null?(Ce(s),m1(s,y)):(Ce(s),t0(s,g,null,u,l))):y?y!==i.memoizedState?(mr(s),Ce(s),m1(s,y)):(Ce(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&mr(s),Ce(s),t0(s,g,i,u,l)),null;case 27:if(Rn(s),l=bt.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&mr(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return Ce(s),null}i=it.current,Dc(s)?KS(s):(i=Sx(g,u,l),s.stateNode=i,mr(s))}return Ce(s),null;case 5:if(Rn(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&mr(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return Ce(s),null}if(y=it.current,Dc(s))KS(s);else{var _=om(bt.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?_.createElement(g,{is:u.is}):_.createElement(g)}}y[pn]=s,y[$n]=u;t:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break t;for(;_.sibling===null;){if(_.return===null||_.return===s)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=y;t:switch(bn(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&mr(s)}}return Ce(s),t0(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,l),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&mr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(n(166));if(i=bt.current,Dc(s)){if(i=s.stateNode,l=s.memoizedProps,u=null,g=gn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[pn]=s,i=!!(i.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||dx(i.nodeValue,l)),i||va(s,!0)}else i=om(i).createTextNode(u),i[pn]=s,s.stateNode=i}return Ce(s),null;case 31:if(l=s.memoizedState,i===null||i.memoizedState!==null){if(u=Dc(s),l!==null){if(i===null){if(!u)throw Error(n(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[pn]=s}else Po(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ce(s),i=!1}else l=uv(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return s.flags&256?(di(s),s):(di(s),null);if((s.flags&128)!==0)throw Error(n(558))}return Ce(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Dc(s),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[pn]=s}else Po(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ce(s),g=!1}else g=uv(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(di(s),s):(di(s),null)}return di(s),(s.flags&128)!==0?(s.lanes=l,s):(l=u!==null,i=i!==null&&i.memoizedState!==null,l&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),l!==i&&l&&(s.child.flags|=8192),Xg(s,s.updateQueue),Ce(s),null);case 4:return Ot(),i===null&&A0(s.stateNode.containerInfo),Ce(s),null;case 10:return dr(s.type),Ce(s),null;case 19:if(q(Pe),u=s.memoizedState,u===null)return Ce(s),null;if(g=(s.flags&128)!==0,y=u.rendering,y===null)if(g)ld(u,!1);else{if(je!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=Ng(i),y!==null){for(s.flags|=128,ld(u,!1),i=y.updateQueue,s.updateQueue=i,Xg(s,i),s.subtreeFlags=0,i=l,l=s.child;l!==null;)VS(l,i),l=l.sibling;return Q(Pe,Pe.current&1|2),Yt&&ur(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&an()>Qg&&(s.flags|=128,g=!0,ld(u,!1),s.lanes=4194304)}else{if(!g)if(i=Ng(y),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Xg(s,i),ld(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Yt)return Ce(s),null}else 2*an()-u.renderingStartTime>Qg&&l!==536870912&&(s.flags|=128,g=!0,ld(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(i=u.last,i!==null?i.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=an(),i.sibling=null,l=Pe.current,Q(Pe,g?l&1|2:l&1),Yt&&ur(s,u.treeForkCount),i):(Ce(s),null);case 22:case 23:return di(s),Sv(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(Ce(s),s.subtreeFlags&6&&(s.flags|=8192)):Ce(s),l=s.updateQueue,l!==null&&Xg(s,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),i!==null&&q(Bo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),dr(Ue),Ce(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function cD(i,s){switch(lv(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return dr(Ue),Ot(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Rn(s),null;case 31:if(s.memoizedState!==null){if(di(s),s.alternate===null)throw Error(n(340));Po()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(di(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Po()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return q(Pe),null;case 4:return Ot(),null;case 10:return dr(s.type),null;case 22:case 23:return di(s),Sv(),i!==null&&q(Bo),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return dr(Ue),null;case 25:return null;default:return null}}function y1(i,s){switch(lv(s),s.tag){case 3:dr(Ue),Ot();break;case 26:case 27:case 5:Rn(s);break;case 4:Ot();break;case 31:s.memoizedState!==null&&di(s);break;case 13:di(s);break;case 19:q(Pe);break;case 10:dr(s.type);break;case 22:case 23:di(s),Sv(),i!==null&&q(Bo);break;case 24:dr(Ue)}}function cd(i,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&i)===i){u=void 0;var y=l.create,_=l.inst;u=y(),_.destroy=u}l=l.next}while(l!==g)}}catch(C){ce(s,s.return,C)}}function Ca(i,s,l){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&i)===i){var _=u.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,g=s;var j=l,Y=C;try{Y()}catch(Z){ce(g,j,Z)}}}u=u.next}while(u!==y)}}catch(Z){ce(s,s.return,Z)}}function b1(i){var s=i.updateQueue;if(s!==null){var l=i.stateNode;try{lE(s,l)}catch(u){ce(i,i.return,u)}}}function v1(i,s,l){l.props=Go(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(u){ce(i,s,u)}}function ud(i,s){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof l=="function"?i.refCleanup=l(u):l.current=u}}catch(g){ce(i,s,g)}}function Rs(i,s){var l=i.ref,u=i.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){ce(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ce(i,s,g)}else l.current=null}function w1(i){var s=i.type,l=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){ce(i,i.return,g)}}function e0(i,s,l){try{var u=i.stateNode;LD(u,i.type,l,s),u[$n]=s}catch(g){ce(i,i.return,g)}}function _1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Na(i.type)||i.tag===4}function n0(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||_1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Na(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function i0(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(i),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=or));else if(u!==4&&(u===27&&Na(i.type)&&(l=i.stateNode,s=null),i=i.child,i!==null))for(i0(i,s,l),i=i.sibling;i!==null;)i0(i,s,l),i=i.sibling}function Yg(i,s,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(u!==4&&(u===27&&Na(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Yg(i,s,l),i=i.sibling;i!==null;)Yg(i,s,l),i=i.sibling}function A1(i){var s=i.stateNode,l=i.memoizedProps;try{for(var u=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);bn(s,u,l),s[pn]=i,s[$n]=l}catch(y){ce(i,i.return,y)}}var yr=!1,Ve=!1,s0=!1,S1=typeof WeakSet=="function"?WeakSet:Set,ln=null;function uD(i,s){if(i=i.containerInfo,x0=pm,i=jS(i),Qb(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var _=0,C=-1,j=-1,Y=0,Z=0,et=i,$=null;e:for(;;){for(var W;et!==l||g!==0&&et.nodeType!==3||(C=_+g),et!==y||u!==0&&et.nodeType!==3||(j=_+u),et.nodeType===3&&(_+=et.nodeValue.length),(W=et.firstChild)!==null;)$=et,et=W;for(;;){if(et===i)break e;if($===l&&++Y===g&&(C=_),$===y&&++Z===u&&(j=_),(W=et.nextSibling)!==null)break;et=$,$=et.parentNode}et=W}l=C===-1||j===-1?null:{start:C,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(C0={focusedElem:i,selectionRange:l},pm=!1,ln=s;ln!==null;)if(s=ln,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ln=i;else for(;ln!==null;){switch(s=ln,y=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)g=i[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=s,g=y.memoizedProps,y=y.memoizedState,u=l.stateNode;try{var ft=Go(l.type,g);i=u.getSnapshotBeforeUpdate(ft,y),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ct){ce(l,l.return,Ct)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,l=i.nodeType,l===9)R0(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":R0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,ln=i;break}ln=s.return}}function E1(i,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:vr(i,l),u&4&&cd(5,l);break;case 1:if(vr(i,l),u&4)if(i=l.stateNode,s===null)try{i.componentDidMount()}catch(_){ce(l,l.return,_)}else{var g=Go(l.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(_){ce(l,l.return,_)}}u&64&&b1(l),u&512&&ud(l,l.return);break;case 3:if(vr(i,l),u&64&&(i=l.updateQueue,i!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{lE(i,s)}catch(_){ce(l,l.return,_)}}break;case 27:s===null&&u&4&&A1(l);case 26:case 5:vr(i,l),s===null&&u&4&&w1(l),u&512&&ud(l,l.return);break;case 12:vr(i,l);break;case 31:vr(i,l),u&4&&T1(i,l);break;case 13:vr(i,l),u&4&&k1(i,l),u&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=vD.bind(null,l),ID(i,l))));break;case 22:if(u=l.memoizedState!==null||yr,!u){s=s!==null&&s.memoizedState!==null||Ve,g=yr;var y=Ve;yr=u,(Ve=s)&&!y?wr(i,l,(l.subtreeFlags&8772)!==0):vr(i,l),yr=g,Ve=y}break;case 30:break;default:vr(i,l)}}function x1(i){var s=i.alternate;s!==null&&(i.alternate=null,x1(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Ob(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Re=null,Wn=!1;function br(i,s,l){for(l=l.child;l!==null;)C1(i,s,l),l=l.sibling}function C1(i,s,l){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Ro,l)}catch{}switch(l.tag){case 26:Ve||Rs(l,s),br(i,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ve||Rs(l,s);var u=Re,g=Wn;Na(l.type)&&(Re=l.stateNode,Wn=!1),br(i,s,l),vd(l.stateNode),Re=u,Wn=g;break;case 5:Ve||Rs(l,s);case 6:if(u=Re,g=Wn,Re=null,br(i,s,l),Re=u,Wn=g,Re!==null)if(Wn)try{(Re.nodeType===9?Re.body:Re.nodeName==="HTML"?Re.ownerDocument.body:Re).removeChild(l.stateNode)}catch(y){ce(l,s,y)}else try{Re.removeChild(l.stateNode)}catch(y){ce(l,s,y)}break;case 18:Re!==null&&(Wn?(i=Re,bx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Jc(i)):bx(Re,l.stateNode));break;case 4:u=Re,g=Wn,Re=l.stateNode.containerInfo,Wn=!0,br(i,s,l),Re=u,Wn=g;break;case 0:case 11:case 14:case 15:Ca(2,l,s),Ve||Ca(4,l,s),br(i,s,l);break;case 1:Ve||(Rs(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&v1(l,s,u)),br(i,s,l);break;case 21:br(i,s,l);break;case 22:Ve=(u=Ve)||l.memoizedState!==null,br(i,s,l),Ve=u;break;default:br(i,s,l)}}function T1(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Jc(i)}catch(l){ce(s,s.return,l)}}}function k1(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Jc(i)}catch(l){ce(s,s.return,l)}}function hD(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new S1),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new S1),s;default:throw Error(n(435,i.tag))}}function $g(i,s){var l=hD(i);s.forEach(function(u){if(!l.has(u)){l.add(u);var g=wD.bind(null,i,u);u.then(g,g)}})}function Qn(i,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],y=i,_=s,C=_;t:for(;C!==null;){switch(C.tag){case 27:if(Na(C.type)){Re=C.stateNode,Wn=!1;break t}break;case 5:Re=C.stateNode,Wn=!1;break t;case 3:case 4:Re=C.stateNode.containerInfo,Wn=!0;break t}C=C.return}if(Re===null)throw Error(n(160));C1(y,_,g),Re=null,Wn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)R1(s,i),s=s.sibling}var ns=null;function R1(i,s){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Qn(s,i),Zn(i),u&4&&(Ca(3,i,i.return),cd(3,i),Ca(5,i,i.return));break;case 1:Qn(s,i),Zn(i),u&512&&(Ve||l===null||Rs(l,l.return)),u&64&&yr&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=ns;if(Qn(s,i),Zn(i),u&512&&(Ve||l===null||Rs(l,l.return)),u&4){var y=l!==null?l.memoizedState:null;if(u=i.memoizedState,l===null)if(u===null)if(i.stateNode===null){t:{u=i.type,l=i.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Ph]||y[pn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),bn(y,u,l),y[pn]=i,on(y),u=y;break t;case"link":var _=Rx("link","href",g).get(u+(l.href||""));if(_){for(var C=0;C<_.length;C++)if(y=_[C],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(C,1);break e}}y=g.createElement(u),bn(y,u,l),g.head.appendChild(y);break;case"meta":if(_=Rx("meta","content",g).get(u+(l.content||""))){for(C=0;C<_.length;C++)if(y=_[C],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(C,1);break e}}y=g.createElement(u),bn(y,u,l),g.head.appendChild(y);break;default:throw Error(n(468,u))}y[pn]=i,on(y),u=y}i.stateNode=u}else Mx(g,i.type,i.stateNode);else i.stateNode=kx(g,u,i.memoizedProps);else y!==u?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,u===null?Mx(g,i.type,i.stateNode):kx(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&e0(i,i.memoizedProps,l.memoizedProps)}break;case 27:Qn(s,i),Zn(i),u&512&&(Ve||l===null||Rs(l,l.return)),l!==null&&u&4&&e0(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Qn(s,i),Zn(i),u&512&&(Ve||l===null||Rs(l,l.return)),i.flags&32){g=i.stateNode;try{Ac(g,"")}catch(ft){ce(i,i.return,ft)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,e0(i,g,l!==null?l.memoizedProps:g)),u&1024&&(s0=!0);break;case 6:if(Qn(s,i),Zn(i),u&4){if(i.stateNode===null)throw Error(n(162));u=i.memoizedProps,l=i.stateNode;try{l.nodeValue=u}catch(ft){ce(i,i.return,ft)}}break;case 3:if(um=null,g=ns,ns=lm(s.containerInfo),Qn(s,i),ns=g,Zn(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Jc(s.containerInfo)}catch(ft){ce(i,i.return,ft)}s0&&(s0=!1,M1(i));break;case 4:u=ns,ns=lm(i.stateNode.containerInfo),Qn(s,i),Zn(i),ns=u;break;case 12:Qn(s,i),Zn(i);break;case 31:Qn(s,i),Zn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,$g(i,u)));break;case 13:Qn(s,i),Zn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Wg=an()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,$g(i,u)));break;case 22:g=i.memoizedState!==null;var j=l!==null&&l.memoizedState!==null,Y=yr,Z=Ve;if(yr=Y||g,Ve=Z||j,Qn(s,i),Ve=Z,yr=Y,Zn(i),u&8192)t:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(l===null||j||yr||Ve||Xo(i)),l=null,s=i;;){if(s.tag===5||s.tag===26){if(l===null){j=l=s;try{if(y=j.stateNode,g)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=j.stateNode;var et=j.memoizedProps.style,$=et!=null&&et.hasOwnProperty("display")?et.display:null;C.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ft){ce(j,j.return,ft)}}}else if(s.tag===6){if(l===null){j=s;try{j.stateNode.nodeValue=g?"":j.memoizedProps}catch(ft){ce(j,j.return,ft)}}}else if(s.tag===18){if(l===null){j=s;try{var W=j.stateNode;g?vx(W,!0):vx(j.stateNode,!1)}catch(ft){ce(j,j.return,ft)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,$g(i,l))));break;case 19:Qn(s,i),Zn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,$g(i,u)));break;case 30:break;case 21:break;default:Qn(s,i),Zn(i)}}function Zn(i){var s=i.flags;if(s&2){try{for(var l,u=i.return;u!==null;){if(_1(u)){l=u;break}u=u.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var g=l.stateNode,y=n0(i);Yg(i,y,g);break;case 5:var _=l.stateNode;l.flags&32&&(Ac(_,""),l.flags&=-33);var C=n0(i);Yg(i,C,_);break;case 3:case 4:var j=l.stateNode.containerInfo,Y=n0(i);i0(i,Y,j);break;default:throw Error(n(161))}}catch(Z){ce(i,i.return,Z)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function M1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;M1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function vr(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)E1(i,s.alternate,s),s=s.sibling}function Xo(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Ca(4,s,s.return),Xo(s);break;case 1:Rs(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&v1(s,s.return,l),Xo(s);break;case 27:vd(s.stateNode);case 26:case 5:Rs(s,s.return),Xo(s);break;case 22:s.memoizedState===null&&Xo(s);break;case 30:Xo(s);break;default:Xo(s)}i=i.sibling}}function wr(i,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=i,y=s,_=y.flags;switch(y.tag){case 0:case 11:case 15:wr(g,y,l),cd(4,y);break;case 1:if(wr(g,y,l),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Y){ce(u,u.return,Y)}if(u=y,g=u.updateQueue,g!==null){var C=u.stateNode;try{var j=g.shared.hiddenCallbacks;if(j!==null)for(g.shared.hiddenCallbacks=null,g=0;g<j.length;g++)oE(j[g],C)}catch(Y){ce(u,u.return,Y)}}l&&_&64&&b1(y),ud(y,y.return);break;case 27:A1(y);case 26:case 5:wr(g,y,l),l&&u===null&&_&4&&w1(y),ud(y,y.return);break;case 12:wr(g,y,l);break;case 31:wr(g,y,l),l&&_&4&&T1(g,y);break;case 13:wr(g,y,l),l&&_&4&&k1(g,y);break;case 22:y.memoizedState===null&&wr(g,y,l),ud(y,y.return);break;case 30:break;default:wr(g,y,l)}s=s.sibling}}function r0(i,s){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Wh(l))}function a0(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Wh(i))}function is(i,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)L1(i,s,l,u),s=s.sibling}function L1(i,s,l,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:is(i,s,l,u),g&2048&&cd(9,s);break;case 1:is(i,s,l,u);break;case 3:is(i,s,l,u),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Wh(i)));break;case 12:if(g&2048){is(i,s,l,u),i=s.stateNode;try{var y=s.memoizedProps,_=y.id,C=y.onPostCommit;typeof C=="function"&&C(_,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){ce(s,s.return,j)}}else is(i,s,l,u);break;case 31:is(i,s,l,u);break;case 13:is(i,s,l,u);break;case 23:break;case 22:y=s.stateNode,_=s.alternate,s.memoizedState!==null?y._visibility&2?is(i,s,l,u):hd(i,s):y._visibility&2?is(i,s,l,u):(y._visibility|=2,Hc(i,s,l,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&r0(_,s);break;case 24:is(i,s,l,u),g&2048&&a0(s.alternate,s);break;default:is(i,s,l,u)}}function Hc(i,s,l,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=i,_=s,C=l,j=u,Y=_.flags;switch(_.tag){case 0:case 11:case 15:Hc(y,_,C,j,g),cd(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?Hc(y,_,C,j,g):hd(y,_):(Z._visibility|=2,Hc(y,_,C,j,g)),g&&Y&2048&&r0(_.alternate,_);break;case 24:Hc(y,_,C,j,g),g&&Y&2048&&a0(_.alternate,_);break;default:Hc(y,_,C,j,g)}s=s.sibling}}function hd(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=i,u=s,g=u.flags;switch(u.tag){case 22:hd(l,u),g&2048&&r0(u.alternate,u);break;case 24:hd(l,u),g&2048&&a0(u.alternate,u);break;default:hd(l,u)}s=s.sibling}}var dd=8192;function qc(i,s,l){if(i.subtreeFlags&dd)for(i=i.child;i!==null;)D1(i,s,l),i=i.sibling}function D1(i,s,l){switch(i.tag){case 26:qc(i,s,l),i.flags&dd&&i.memoizedState!==null&&QD(l,ns,i.memoizedState,i.memoizedProps);break;case 5:qc(i,s,l);break;case 3:case 4:var u=ns;ns=lm(i.stateNode.containerInfo),qc(i,s,l),ns=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=dd,dd=16777216,qc(i,s,l),dd=u):qc(i,s,l));break;default:qc(i,s,l)}}function N1(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function fd(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];ln=u,j1(u,i)}N1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)O1(i),i=i.sibling}function O1(i){switch(i.tag){case 0:case 11:case 15:fd(i),i.flags&2048&&Ca(9,i,i.return);break;case 3:fd(i);break;case 12:fd(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Kg(i)):fd(i);break;default:fd(i)}}function Kg(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];ln=u,j1(u,i)}N1(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Ca(8,s,s.return),Kg(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Kg(s));break;default:Kg(s)}i=i.sibling}}function j1(i,s){for(;ln!==null;){var l=ln;switch(l.tag){case 0:case 11:case 15:Ca(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Wh(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ln=u;else t:for(l=i;ln!==null;){u=ln;var g=u.sibling,y=u.return;if(x1(u),u===l){ln=null;break t}if(g!==null){g.return=y,ln=g;break t}ln=y}}}var dD={getCacheForType:function(i){var s=mn(Ue),l=s.data.get(i);return l===void 0&&(l=i(),s.data.set(i,l)),l},cacheSignal:function(){return mn(Ue).controller.signal}},fD=typeof WeakMap=="function"?WeakMap:Map,ae=0,ve=null,Ut=null,Gt=0,le=0,fi=null,Ta=!1,Vc=!1,o0=!1,_r=0,je=0,ka=0,Yo=0,l0=0,pi=0,Gc=0,pd=null,Jn=null,c0=!1,Wg=0,z1=0,Qg=1/0,Zg=null,Ra=null,$e=0,Ma=null,Xc=null,Ar=0,u0=0,h0=null,P1=null,gd=0,d0=null;function gi(){return(ae&2)!==0&&Gt!==0?Gt&-Gt:F.T!==null?b0():JA()}function F1(){if(pi===0)if((Gt&536870912)===0||Yt){var i=ag;ag<<=1,(ag&3932160)===0&&(ag=262144),pi=i}else pi=536870912;return i=hi.current,i!==null&&(i.flags|=32),pi}function ti(i,s,l){(i===ve&&(le===2||le===9)||i.cancelPendingCommit!==null)&&(Yc(i,0),La(i,Gt,pi,!1)),zh(i,l),((ae&2)===0||i!==ve)&&(i===ve&&((ae&2)===0&&(Yo|=l),je===4&&La(i,Gt,pi,!1)),Ms(i))}function I1(i,s,l){if((ae&6)!==0)throw Error(n(327));var u=!l&&(s&127)===0&&(s&i.expiredLanes)===0||jh(i,s),g=u?mD(i,s):p0(i,s,!0),y=u;do{if(g===0){Vc&&!u&&La(i,s,0,!1);break}else{if(l=i.current.alternate,y&&!pD(l)){g=p0(i,s,!1),y=!1;continue}if(g===2){if(y=s,i.errorRecoveryDisabledLanes&y)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;t:{var C=i;g=pd;var j=C.current.memoizedState.isDehydrated;if(j&&(Yc(C,_).flags|=256),_=p0(C,_,!1),_!==2){if(o0&&!j){C.errorRecoveryDisabledLanes|=y,Yo|=y,g=4;break t}y=Jn,Jn=g,y!==null&&(Jn===null?Jn=y:Jn.push.apply(Jn,y))}g=_}if(y=!1,g!==2)continue}}if(g===1){Yc(i,0),La(i,s,0,!0);break}t:{switch(u=i,y=g,y){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:La(u,s,pi,!Ta);break t;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(g=Wg+300-an(),10<g)){if(La(u,s,pi,!Ta),lg(u,0,!0)!==0)break t;Ar=s,u.timeoutHandle=mx(B1.bind(null,u,l,Jn,Zg,c0,s,pi,Yo,Gc,Ta,y,"Throttled",-0,0),g);break t}B1(u,l,Jn,Zg,c0,s,pi,Yo,Gc,Ta,y,null,-0,0)}}break}while(!0);Ms(i)}function B1(i,s,l,u,g,y,_,C,j,Y,Z,et,$,W){if(i.timeoutHandle=-1,et=s.subtreeFlags,et&8192||(et&16785408)===16785408){et={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:or},D1(s,y,et);var ft=(y&62914560)===y?Wg-an():(y&4194048)===y?z1-an():0;if(ft=ZD(et,ft),ft!==null){Ar=y,i.cancelPendingCommit=ft($1.bind(null,i,s,y,l,u,g,_,C,j,Z,et,null,$,W)),La(i,y,_,!Y);return}}$1(i,s,y,l,u,g,_,C,j)}function pD(i){for(var s=i;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],y=g.getSnapshot;g=g.value;try{if(!ci(y(),g))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function La(i,s,l,u){s&=~l0,s&=~Yo,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var g=s;0<g;){var y=31-li(g),_=1<<y;u[y]=-1,g&=~_}l!==0&&WA(i,l,s)}function Jg(){return(ae&6)===0?(md(0),!1):!0}function f0(){if(Ut!==null){if(le===0)var i=Ut.return;else i=Ut,hr=Fo=null,Rv(i),Pc=null,Zh=0,i=Ut;for(;i!==null;)y1(i.alternate,i),i=i.return;Ut=null}}function Yc(i,s){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,OD(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ar=0,f0(),ve=i,Ut=l=cr(i.current,null),Gt=s,le=0,fi=null,Ta=!1,Vc=jh(i,s),o0=!1,Gc=pi=l0=Yo=ka=je=0,Jn=pd=null,c0=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var g=31-li(u),y=1<<g;s|=i[g],u&=~y}return _r=s,wg(),l}function U1(i,s){Dt=null,F.H=ad,s===zc||s===kg?(s=iE(),le=3):s===yv?(s=iE(),le=4):le=s===Gv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fi=s,Ut===null&&(je=1,Hg(i,ji(s,i.current)))}function H1(){var i=hi.current;return i===null?!0:(Gt&4194048)===Gt?Ii===null:(Gt&62914560)===Gt||(Gt&536870912)!==0?i===Ii:!1}function q1(){var i=F.H;return F.H=ad,i===null?ad:i}function V1(){var i=F.A;return F.A=dD,i}function tm(){je=4,Ta||(Gt&4194048)!==Gt&&hi.current!==null||(Vc=!0),(ka&134217727)===0&&(Yo&134217727)===0||ve===null||La(ve,Gt,pi,!1)}function p0(i,s,l){var u=ae;ae|=2;var g=q1(),y=V1();(ve!==i||Gt!==s)&&(Zg=null,Yc(i,s)),s=!1;var _=je;t:do try{if(le!==0&&Ut!==null){var C=Ut,j=fi;switch(le){case 8:f0(),_=6;break t;case 3:case 2:case 9:case 6:hi.current===null&&(s=!0);var Y=le;if(le=0,fi=null,$c(i,C,j,Y),l&&Vc){_=0;break t}break;default:Y=le,le=0,fi=null,$c(i,C,j,Y)}}gD(),_=je;break}catch(Z){U1(i,Z)}while(!0);return s&&i.shellSuspendCounter++,hr=Fo=null,ae=u,F.H=g,F.A=y,Ut===null&&(ve=null,Gt=0,wg()),_}function gD(){for(;Ut!==null;)G1(Ut)}function mD(i,s){var l=ae;ae|=2;var u=q1(),g=V1();ve!==i||Gt!==s?(Zg=null,Qg=an()+500,Yc(i,s)):Vc=jh(i,s);t:do try{if(le!==0&&Ut!==null){s=Ut;var y=fi;e:switch(le){case 1:le=0,fi=null,$c(i,s,y,1);break;case 2:case 9:if(eE(y)){le=0,fi=null,X1(s);break}s=function(){le!==2&&le!==9||ve!==i||(le=7),Ms(i)},y.then(s,s);break t;case 3:le=7;break t;case 4:le=5;break t;case 7:eE(y)?(le=0,fi=null,X1(s)):(le=0,fi=null,$c(i,s,y,7));break;case 5:var _=null;switch(Ut.tag){case 26:_=Ut.memoizedState;case 5:case 27:var C=Ut;if(_?Lx(_):C.stateNode.complete){le=0,fi=null;var j=C.sibling;if(j!==null)Ut=j;else{var Y=C.return;Y!==null?(Ut=Y,em(Y)):Ut=null}break e}}le=0,fi=null,$c(i,s,y,5);break;case 6:le=0,fi=null,$c(i,s,y,6);break;case 8:f0(),je=6;break t;default:throw Error(n(462))}}yD();break}catch(Z){U1(i,Z)}while(!0);return hr=Fo=null,F.H=u,F.A=g,ae=l,Ut!==null?0:(ve=null,Gt=0,wg(),je)}function yD(){for(;Ut!==null&&!Dh();)G1(Ut)}function G1(i){var s=g1(i.alternate,i,_r);i.memoizedProps=i.pendingProps,s===null?em(i):Ut=s}function X1(i){var s=i,l=s.alternate;switch(s.tag){case 15:case 0:s=c1(l,s,s.pendingProps,s.type,void 0,Gt);break;case 11:s=c1(l,s,s.pendingProps,s.type.render,s.ref,Gt);break;case 5:Rv(s);default:y1(l,s),s=Ut=VS(s,_r),s=g1(l,s,_r)}i.memoizedProps=i.pendingProps,s===null?em(i):Ut=s}function $c(i,s,l,u){hr=Fo=null,Rv(s),Pc=null,Zh=0;var g=s.return;try{if(rD(i,g,s,l,Gt)){je=1,Hg(i,ji(l,i.current)),Ut=null;return}}catch(y){if(g!==null)throw Ut=g,y;je=1,Hg(i,ji(l,i.current)),Ut=null;return}s.flags&32768?(Yt||u===1?i=!0:Vc||(Gt&536870912)!==0?i=!1:(Ta=i=!0,(u===2||u===9||u===3||u===6)&&(u=hi.current,u!==null&&u.tag===13&&(u.flags|=16384))),Y1(s,i)):em(s)}function em(i){var s=i;do{if((s.flags&32768)!==0){Y1(s,Ta);return}i=s.return;var l=lD(s.alternate,s,_r);if(l!==null){Ut=l;return}if(s=s.sibling,s!==null){Ut=s;return}Ut=s=i}while(s!==null);je===0&&(je=5)}function Y1(i,s){do{var l=cD(i.alternate,i);if(l!==null){l.flags&=32767,Ut=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(i=i.sibling,i!==null)){Ut=i;return}Ut=i=l}while(i!==null);je=6,Ut=null}function $1(i,s,l,u,g,y,_,C,j){i.cancelPendingCommit=null;do nm();while($e!==0);if((ae&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(y=s.lanes|s.childLanes,y|=nv,WM(i,l,y,_,C,j),i===ve&&(Ut=ve=null,Gt=0),Xc=s,Ma=i,Ar=l,u0=y,h0=g,P1=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_D(wt,function(){return J1(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,g=G.p,G.p=2,_=ae,ae|=4;try{uD(i,s,l)}finally{ae=_,G.p=g,F.T=u}}$e=1,K1(),W1(),Q1()}}function K1(){if($e===1){$e=0;var i=Ma,s=Xc,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var u=G.p;G.p=2;var g=ae;ae|=4;try{R1(s,i);var y=C0,_=jS(i.containerInfo),C=y.focusedElem,j=y.selectionRange;if(_!==C&&C&&C.ownerDocument&&OS(C.ownerDocument.documentElement,C)){if(j!==null&&Qb(C)){var Y=j.start,Z=j.end;if(Z===void 0&&(Z=Y),"selectionStart"in C)C.selectionStart=Y,C.selectionEnd=Math.min(Z,C.value.length);else{var et=C.ownerDocument||document,$=et&&et.defaultView||window;if($.getSelection){var W=$.getSelection(),ft=C.textContent.length,Ct=Math.min(j.start,ft),ge=j.end===void 0?Ct:Math.min(j.end,ft);!W.extend&&Ct>ge&&(_=ge,ge=Ct,Ct=_);var B=NS(C,Ct),z=NS(C,ge);if(B&&z&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==z.node||W.focusOffset!==z.offset)){var X=et.createRange();X.setStart(B.node,B.offset),W.removeAllRanges(),Ct>ge?(W.addRange(X),W.extend(z.node,z.offset)):(X.setEnd(z.node,z.offset),W.addRange(X))}}}}for(et=[],W=C;W=W.parentNode;)W.nodeType===1&&et.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<et.length;C++){var J=et[C];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}pm=!!x0,C0=x0=null}finally{ae=g,G.p=u,F.T=l}}i.current=s,$e=2}}function W1(){if($e===2){$e=0;var i=Ma,s=Xc,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var u=G.p;G.p=2;var g=ae;ae|=4;try{E1(i,s.alternate,s)}finally{ae=g,G.p=u,F.T=l}}$e=3}}function Q1(){if($e===4||$e===3){$e=0,Nh();var i=Ma,s=Xc,l=Ar,u=P1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?$e=5:($e=0,Xc=Ma=null,Z1(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ra=null),Db(l),s=s.stateNode,Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Ro,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=F.T,g=G.p,G.p=2,F.T=null;try{for(var y=i.onRecoverableError,_=0;_<u.length;_++){var C=u[_];y(C.value,{componentStack:C.stack})}}finally{F.T=s,G.p=g}}(Ar&3)!==0&&nm(),Ms(i),g=i.pendingLanes,(l&261930)!==0&&(g&42)!==0?i===d0?gd++:(gd=0,d0=i):gd=0,md(0)}}function Z1(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Wh(s)))}function nm(){return K1(),W1(),Q1(),J1()}function J1(){if($e!==5)return!1;var i=Ma,s=u0;u0=0;var l=Db(Ar),u=F.T,g=G.p;try{G.p=32>l?32:l,F.T=null,l=h0,h0=null;var y=Ma,_=Ar;if($e=0,Xc=Ma=null,Ar=0,(ae&6)!==0)throw Error(n(331));var C=ae;if(ae|=4,O1(y.current),L1(y,y.current,_,l),ae=C,md(0,!1),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Ro,y)}catch{}return!0}finally{G.p=g,F.T=u,Z1(i,s)}}function tx(i,s,l){s=ji(l,s),s=Vv(i.stateNode,s,2),i=Sa(i,s,2),i!==null&&(zh(i,2),Ms(i))}function ce(i,s,l){if(i.tag===3)tx(i,i,l);else for(;s!==null;){if(s.tag===3){tx(s,i,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ra===null||!Ra.has(u))){i=ji(l,i),l=e1(2),u=Sa(s,l,2),u!==null&&(n1(l,u,s,i),zh(u,2),Ms(u));break}}s=s.return}}function g0(i,s,l){var u=i.pingCache;if(u===null){u=i.pingCache=new fD;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(l)||(o0=!0,g.add(l),i=bD.bind(null,i,s,l),s.then(i,i))}function bD(i,s,l){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,ve===i&&(Gt&l)===l&&(je===4||je===3&&(Gt&62914560)===Gt&&300>an()-Wg?(ae&2)===0&&Yc(i,0):l0|=l,Gc===Gt&&(Gc=0)),Ms(i)}function ex(i,s){s===0&&(s=KA()),i=jo(i,s),i!==null&&(zh(i,s),Ms(i))}function vD(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),ex(i,l)}function wD(i,s){var l=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(s),ex(i,l)}function _D(i,s){return To(i,s)}var im=null,Kc=null,m0=!1,sm=!1,y0=!1,Da=0;function Ms(i){i!==Kc&&i.next===null&&(Kc===null?im=Kc=i:Kc=Kc.next=i),sm=!0,m0||(m0=!0,SD())}function md(i,s){if(!y0&&sm){y0=!0;do for(var l=!1,u=im;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var _=u.suspendedLanes,C=u.pingedLanes;y=(1<<31-li(42|i)+1)-1,y&=g&~(_&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,rx(u,y))}else y=Gt,y=lg(u,u===ve?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||jh(u,y)||(l=!0,rx(u,y));u=u.next}while(l);y0=!1}}function AD(){nx()}function nx(){sm=m0=!1;var i=0;Da!==0&&ND()&&(i=Da);for(var s=an(),l=null,u=im;u!==null;){var g=u.next,y=ix(u,s);y===0?(u.next=null,l===null?im=g:l.next=g,g===null&&(Kc=l)):(l=u,(i!==0||(y&3)!==0)&&(sm=!0)),u=g}$e!==0&&$e!==5||md(i),Da!==0&&(Da=0)}function ix(i,s){for(var l=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var _=31-li(y),C=1<<_,j=g[_];j===-1?((C&l)===0||(C&u)!==0)&&(g[_]=KM(C,s)):j<=s&&(i.expiredLanes|=C),y&=~C}if(s=ve,l=Gt,l=lg(i,i===s?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,l===0||i===s&&(le===2||le===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&xs(u),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||jh(i,l)){if(s=l&-l,s===i.callbackPriority)return s;switch(u!==null&&xs(u),Db(l)){case 2:case 8:l=lt;break;case 32:l=wt;break;case 268435456:l=re;break;default:l=wt}return u=sx.bind(null,i),l=To(l,u),i.callbackPriority=s,i.callbackNode=l,s}return u!==null&&u!==null&&xs(u),i.callbackPriority=2,i.callbackNode=null,2}function sx(i,s){if($e!==0&&$e!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(nm()&&i.callbackNode!==l)return null;var u=Gt;return u=lg(i,i===ve?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(I1(i,u,s),ix(i,an()),i.callbackNode!=null&&i.callbackNode===l?sx.bind(null,i):null)}function rx(i,s){if(nm())return null;I1(i,s,!0)}function SD(){jD(function(){(ae&6)!==0?To(at,AD):nx()})}function b0(){if(Da===0){var i=Oc;i===0&&(i=rg,rg<<=1,(rg&261888)===0&&(rg=256)),Da=i}return Da}function ax(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:dg(""+i)}function ox(i,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,i.id&&l.setAttribute("form",i.id),s.parentNode.insertBefore(l,s),i=new FormData(i),l.parentNode.removeChild(l),i}function ED(i,s,l,u,g){if(s==="submit"&&l&&l.stateNode===g){var y=ax((g[$n]||null).action),_=u.submitter;_&&(s=(s=_[$n]||null)?ax(s.formAction):_.getAttribute("formAction"),s!==null&&(y=s,_=null));var C=new mg("action","action",null,u,g);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Da!==0){var j=_?ox(g,_):new FormData(g);Fv(l,{pending:!0,data:j,method:g.method,action:y},null,j)}}else typeof y=="function"&&(C.preventDefault(),j=_?ox(g,_):new FormData(g),Fv(l,{pending:!0,data:j,method:g.method,action:y},y,j))},currentTarget:g}]})}}for(var v0=0;v0<ev.length;v0++){var w0=ev[v0],xD=w0.toLowerCase(),CD=w0[0].toUpperCase()+w0.slice(1);es(xD,"on"+CD)}es(FS,"onAnimationEnd"),es(IS,"onAnimationIteration"),es(BS,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(HL,"onTransitionRun"),es(qL,"onTransitionStart"),es(VL,"onTransitionCancel"),es(US,"onTransitionEnd"),wc("onMouseEnter",["mouseout","mouseover"]),wc("onMouseLeave",["mouseout","mouseover"]),wc("onPointerEnter",["pointerout","pointerover"]),wc("onPointerLeave",["pointerout","pointerover"]),Lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Lo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yd));function lx(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],g=u.event;u=u.listeners;t:{var y=void 0;if(s)for(var _=u.length-1;0<=_;_--){var C=u[_],j=C.instance,Y=C.currentTarget;if(C=C.listener,j!==y&&g.isPropagationStopped())break t;y=C,g.currentTarget=Y;try{y(g)}catch(Z){vg(Z)}g.currentTarget=null,y=j}else for(_=0;_<u.length;_++){if(C=u[_],j=C.instance,Y=C.currentTarget,C=C.listener,j!==y&&g.isPropagationStopped())break t;y=C,g.currentTarget=Y;try{y(g)}catch(Z){vg(Z)}g.currentTarget=null,y=j}}}}function Ht(i,s){var l=s[Nb];l===void 0&&(l=s[Nb]=new Set);var u=i+"__bubble";l.has(u)||(cx(s,i,2,!1),l.add(u))}function _0(i,s,l){var u=0;s&&(u|=4),cx(l,i,u,s)}var rm="_reactListening"+Math.random().toString(36).slice(2);function A0(i){if(!i[rm]){i[rm]=!0,nS.forEach(function(l){l!=="selectionchange"&&(TD.has(l)||_0(l,!1,i),_0(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[rm]||(s[rm]=!0,_0("selectionchange",!1,s))}}function cx(i,s,l,u){switch(Fx(s)){case 2:var g=eN;break;case 8:g=nN;break;default:g=P0}l=g.bind(null,s,l,i),g=void 0,!Hb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(s,l,{capture:!0,passive:g}):i.addEventListener(s,l,!0):g!==void 0?i.addEventListener(s,l,{passive:g}):i.addEventListener(s,l,!1)}function S0(i,s,l,u,g){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var C=u.stateNode.containerInfo;if(C===g)break;if(_===4)for(_=u.return;_!==null;){var j=_.tag;if((j===3||j===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;C!==null;){if(_=yc(C),_===null)return;if(j=_.tag,j===5||j===6||j===26||j===27){u=y=_;continue t}C=C.parentNode}}u=u.return}pS(function(){var Y=y,Z=Bb(l),et=[];t:{var $=HS.get(i);if($!==void 0){var W=mg,ft=i;switch(i){case"keypress":if(pg(l)===0)break t;case"keydown":case"keyup":W=wL;break;case"focusin":ft="focus",W=Xb;break;case"focusout":ft="blur",W=Xb;break;case"beforeblur":case"afterblur":W=Xb;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=yS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=lL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=SL;break;case FS:case IS:case BS:W=hL;break;case US:W=xL;break;case"scroll":case"scrollend":W=aL;break;case"wheel":W=TL;break;case"copy":case"cut":case"paste":W=fL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=vS;break;case"toggle":case"beforetoggle":W=RL}var Ct=(s&4)!==0,ge=!Ct&&(i==="scroll"||i==="scrollend"),B=Ct?$!==null?$+"Capture":null:$;Ct=[];for(var z=Y,X;z!==null;){var J=z;if(X=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||X===null||B===null||(J=Ih(z,B),J!=null&&Ct.push(bd(z,J,X))),ge)break;z=z.return}0<Ct.length&&($=new W($,ft,null,l,Z),et.push({event:$,listeners:Ct}))}}if((s&7)===0){t:{if($=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",$&&l!==Ib&&(ft=l.relatedTarget||l.fromElement)&&(yc(ft)||ft[mc]))break t;if((W||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,W?(ft=l.relatedTarget||l.toElement,W=Y,ft=ft?yc(ft):null,ft!==null&&(ge=o(ft),Ct=ft.tag,ft!==ge||Ct!==5&&Ct!==27&&Ct!==6)&&(ft=null)):(W=null,ft=Y),W!==ft)){if(Ct=yS,J="onMouseLeave",B="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(Ct=vS,J="onPointerLeave",B="onPointerEnter",z="pointer"),ge=W==null?$:Fh(W),X=ft==null?$:Fh(ft),$=new Ct(J,z+"leave",W,l,Z),$.target=ge,$.relatedTarget=X,J=null,yc(Z)===Y&&(Ct=new Ct(B,z+"enter",ft,l,Z),Ct.target=X,Ct.relatedTarget=ge,J=Ct),ge=J,W&&ft)e:{for(Ct=kD,B=W,z=ft,X=0,J=B;J;J=Ct(J))X++;J=0;for(var St=z;St;St=Ct(St))J++;for(;0<X-J;)B=Ct(B),X--;for(;0<J-X;)z=Ct(z),J--;for(;X--;){if(B===z||z!==null&&B===z.alternate){Ct=B;break e}B=Ct(B),z=Ct(z)}Ct=null}else Ct=null;W!==null&&ux(et,$,W,Ct,!1),ft!==null&&ge!==null&&ux(et,ge,ft,Ct,!0)}}t:{if($=Y?Fh(Y):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var ee=TS;else if(xS($))if(kS)ee=IL;else{ee=PL;var vt=zL}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Fb(Y.elementType)&&(ee=TS):ee=FL;if(ee&&(ee=ee(i,Y))){CS(et,ee,l,Z);break t}vt&&vt(i,$,Y),i==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&Pb($,"number",$.value)}switch(vt=Y?Fh(Y):window,i){case"focusin":(xS(vt)||vt.contentEditable==="true")&&(Cc=vt,Zb=Y,Yh=null);break;case"focusout":Yh=Zb=Cc=null;break;case"mousedown":Jb=!0;break;case"contextmenu":case"mouseup":case"dragend":Jb=!1,zS(et,l,Z);break;case"selectionchange":if(UL)break;case"keydown":case"keyup":zS(et,l,Z)}var Nt;if($b)t:{switch(i){case"compositionstart":var Xt="onCompositionStart";break t;case"compositionend":Xt="onCompositionEnd";break t;case"compositionupdate":Xt="onCompositionUpdate";break t}Xt=void 0}else xc?SS(i,l)&&(Xt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Xt="onCompositionStart");Xt&&(wS&&l.locale!=="ko"&&(xc||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&xc&&(Nt=gS()):(ma=Z,qb="value"in ma?ma.value:ma.textContent,xc=!0)),vt=am(Y,Xt),0<vt.length&&(Xt=new bS(Xt,i,null,l,Z),et.push({event:Xt,listeners:vt}),Nt?Xt.data=Nt:(Nt=ES(l),Nt!==null&&(Xt.data=Nt)))),(Nt=LL?DL(i,l):NL(i,l))&&(Xt=am(Y,"onBeforeInput"),0<Xt.length&&(vt=new bS("onBeforeInput","beforeinput",null,l,Z),et.push({event:vt,listeners:Xt}),vt.data=Nt)),ED(et,i,Y,l,Z)}lx(et,s)})}function bd(i,s,l){return{instance:i,listener:s,currentTarget:l}}function am(i,s){for(var l=s+"Capture",u=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Ih(i,l),g!=null&&u.unshift(bd(i,g,y)),g=Ih(i,s),g!=null&&u.push(bd(i,g,y))),i.tag===3)return u;i=i.return}return[]}function kD(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function ux(i,s,l,u,g){for(var y=s._reactName,_=[];l!==null&&l!==u;){var C=l,j=C.alternate,Y=C.stateNode;if(C=C.tag,j!==null&&j===u)break;C!==5&&C!==26&&C!==27||Y===null||(j=Y,g?(Y=Ih(l,y),Y!=null&&_.unshift(bd(l,Y,j))):g||(Y=Ih(l,y),Y!=null&&_.push(bd(l,Y,j)))),l=l.return}_.length!==0&&i.push({event:s,listeners:_})}var RD=/\r\n?/g,MD=/\u0000|\uFFFD/g;function hx(i){return(typeof i=="string"?i:""+i).replace(RD,`
`).replace(MD,"")}function dx(i,s){return s=hx(s),hx(i)===s}function pe(i,s,l,u,g,y){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Ac(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Ac(i,""+u);break;case"className":ug(i,"class",u);break;case"tabIndex":ug(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ug(i,l,u);break;case"style":dS(i,u,y);break;case"data":if(s!=="object"){ug(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){i.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=dg(""+u),i.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(s!=="input"&&pe(i,s,"name",g.name,g,null),pe(i,s,"formEncType",g.formEncType,g,null),pe(i,s,"formMethod",g.formMethod,g,null),pe(i,s,"formTarget",g.formTarget,g,null)):(pe(i,s,"encType",g.encType,g,null),pe(i,s,"method",g.method,g,null),pe(i,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=dg(""+u),i.setAttribute(l,u);break;case"onClick":u!=null&&(i.onclick=or);break;case"onScroll":u!=null&&Ht("scroll",i);break;case"onScrollEnd":u!=null&&Ht("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}l=dg(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""+u):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":u===!0?i.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,u):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(l,u):i.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(l):i.setAttribute(l,u);break;case"popover":Ht("beforetoggle",i),Ht("toggle",i),cg(i,"popover",u);break;case"xlinkActuate":ar(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ar(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ar(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ar(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ar(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ar(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ar(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ar(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ar(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":cg(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=sL.get(l)||l,cg(i,l,u))}}function E0(i,s,l,u,g,y){switch(l){case"style":dS(i,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof u=="string"?Ac(i,u):(typeof u=="number"||typeof u=="bigint")&&Ac(i,""+u);break;case"onScroll":u!=null&&Ht("scroll",i);break;case"onScrollEnd":u!=null&&Ht("scrollend",i);break;case"onClick":u!=null&&(i.onclick=or);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iS.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),s=l.slice(2,g?l.length-7:void 0),y=i[$n]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(s,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(s,u,g);break t}l in i?i[l]=u:u===!0?i.setAttribute(l,""):cg(i,l,u)}}}function bn(i,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",i),Ht("load",i);var u=!1,g=!1,y;for(y in l)if(l.hasOwnProperty(y)){var _=l[y];if(_!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:pe(i,s,y,_,l,null)}}g&&pe(i,s,"srcSet",l.srcSet,l,null),u&&pe(i,s,"src",l.src,l,null);return;case"input":Ht("invalid",i);var C=y=_=g=null,j=null,Y=null;for(u in l)if(l.hasOwnProperty(u)){var Z=l[u];if(Z!=null)switch(u){case"name":g=Z;break;case"type":_=Z;break;case"checked":j=Z;break;case"defaultChecked":Y=Z;break;case"value":y=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,s));break;default:pe(i,s,u,Z,l,null)}}lS(i,y,C,j,Y,_,g,!1);return;case"select":Ht("invalid",i),u=_=y=null;for(g in l)if(l.hasOwnProperty(g)&&(C=l[g],C!=null))switch(g){case"value":y=C;break;case"defaultValue":_=C;break;case"multiple":u=C;default:pe(i,s,g,C,l,null)}s=y,l=_,i.multiple=!!u,s!=null?_c(i,!!u,s,!1):l!=null&&_c(i,!!u,l,!0);return;case"textarea":Ht("invalid",i),y=g=u=null;for(_ in l)if(l.hasOwnProperty(_)&&(C=l[_],C!=null))switch(_){case"value":u=C;break;case"defaultValue":g=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(n(91));break;default:pe(i,s,_,C,l,null)}uS(i,u,g,y);return;case"option":for(j in l)if(l.hasOwnProperty(j)&&(u=l[j],u!=null))switch(j){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:pe(i,s,j,u,l,null)}return;case"dialog":Ht("beforetoggle",i),Ht("toggle",i),Ht("cancel",i),Ht("close",i);break;case"iframe":case"object":Ht("load",i);break;case"video":case"audio":for(u=0;u<yd.length;u++)Ht(yd[u],i);break;case"image":Ht("error",i),Ht("load",i);break;case"details":Ht("toggle",i);break;case"embed":case"source":case"link":Ht("error",i),Ht("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(u=l[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:pe(i,s,Y,u,l,null)}return;default:if(Fb(s)){for(Z in l)l.hasOwnProperty(Z)&&(u=l[Z],u!==void 0&&E0(i,s,Z,u,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(u=l[C],u!=null&&pe(i,s,C,u,l,null))}function LD(i,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,_=null,C=null,j=null,Y=null,Z=null;for(W in l){var et=l[W];if(l.hasOwnProperty(W)&&et!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":j=et;default:u.hasOwnProperty(W)||pe(i,s,W,null,u,et)}}for(var $ in u){var W=u[$];if(et=l[$],u.hasOwnProperty($)&&(W!=null||et!=null))switch($){case"type":y=W;break;case"name":g=W;break;case"checked":Y=W;break;case"defaultChecked":Z=W;break;case"value":_=W;break;case"defaultValue":C=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,s));break;default:W!==et&&pe(i,s,$,W,u,et)}}zb(i,_,C,j,Y,Z,y,g);return;case"select":W=_=C=$=null;for(y in l)if(j=l[y],l.hasOwnProperty(y)&&j!=null)switch(y){case"value":break;case"multiple":W=j;default:u.hasOwnProperty(y)||pe(i,s,y,null,u,j)}for(g in u)if(y=u[g],j=l[g],u.hasOwnProperty(g)&&(y!=null||j!=null))switch(g){case"value":$=y;break;case"defaultValue":C=y;break;case"multiple":_=y;default:y!==j&&pe(i,s,g,y,u,j)}s=C,l=_,u=W,$!=null?_c(i,!!l,$,!1):!!u!=!!l&&(s!=null?_c(i,!!l,s,!0):_c(i,!!l,l?[]:"",!1));return;case"textarea":W=$=null;for(C in l)if(g=l[C],l.hasOwnProperty(C)&&g!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:pe(i,s,C,null,u,g)}for(_ in u)if(g=u[_],y=l[_],u.hasOwnProperty(_)&&(g!=null||y!=null))switch(_){case"value":$=g;break;case"defaultValue":W=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==y&&pe(i,s,_,g,u,y)}cS(i,$,W);return;case"option":for(var ft in l)if($=l[ft],l.hasOwnProperty(ft)&&$!=null&&!u.hasOwnProperty(ft))switch(ft){case"selected":i.selected=!1;break;default:pe(i,s,ft,null,u,$)}for(j in u)if($=u[j],W=l[j],u.hasOwnProperty(j)&&$!==W&&($!=null||W!=null))switch(j){case"selected":i.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:pe(i,s,j,$,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in l)$=l[Ct],l.hasOwnProperty(Ct)&&$!=null&&!u.hasOwnProperty(Ct)&&pe(i,s,Ct,null,u,$);for(Y in u)if($=u[Y],W=l[Y],u.hasOwnProperty(Y)&&$!==W&&($!=null||W!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,s));break;default:pe(i,s,Y,$,u,W)}return;default:if(Fb(s)){for(var ge in l)$=l[ge],l.hasOwnProperty(ge)&&$!==void 0&&!u.hasOwnProperty(ge)&&E0(i,s,ge,void 0,u,$);for(Z in u)$=u[Z],W=l[Z],!u.hasOwnProperty(Z)||$===W||$===void 0&&W===void 0||E0(i,s,Z,$,u,W);return}}for(var B in l)$=l[B],l.hasOwnProperty(B)&&$!=null&&!u.hasOwnProperty(B)&&pe(i,s,B,null,u,$);for(et in u)$=u[et],W=l[et],!u.hasOwnProperty(et)||$===W||$==null&&W==null||pe(i,s,et,$,u,W)}function fx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DD(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var g=l[u],y=g.transferSize,_=g.initiatorType,C=g.duration;if(y&&C&&fx(_)){for(_=0,C=g.responseEnd,u+=1;u<l.length;u++){var j=l[u],Y=j.startTime;if(Y>C)break;var Z=j.transferSize,et=j.initiatorType;Z&&fx(et)&&(j=j.responseEnd,_+=Z*(j<C?1:(C-Y)/(j-Y)))}if(--u,s+=8*(y+_)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var x0=null,C0=null;function om(i){return i.nodeType===9?i:i.ownerDocument}function px(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gx(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function T0(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var k0=null;function ND(){var i=window.event;return i&&i.type==="popstate"?i===k0?!1:(k0=i,!0):(k0=null,!1)}var mx=typeof setTimeout=="function"?setTimeout:void 0,OD=typeof clearTimeout=="function"?clearTimeout:void 0,yx=typeof Promise=="function"?Promise:void 0,jD=typeof queueMicrotask=="function"?queueMicrotask:typeof yx<"u"?function(i){return yx.resolve(null).then(i).catch(zD)}:mx;function zD(i){setTimeout(function(){throw i})}function Na(i){return i==="head"}function bx(i,s){var l=s,u=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(u===0){i.removeChild(g),Jc(s);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")vd(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,vd(l);for(var y=l.firstChild;y;){var _=y.nextSibling,C=y.nodeName;y[Ph]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=_}}else l==="body"&&vd(i.ownerDocument.body);l=g}while(l);Jc(s)}function vx(i,s){var l=i;i=0;do{var u=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=u}while(l)}function R0(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":R0(l),Ob(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function PD(i,s,l,u){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ph])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Bi(i.nextSibling),i===null)break}return null}function FD(i,s,l){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Bi(i.nextSibling),i===null))return null;return i}function wx(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Bi(i.nextSibling),i===null))return null;return i}function M0(i){return i.data==="$?"||i.data==="$~"}function L0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function ID(i,s){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||l.readyState!=="loading")s();else{var u=function(){s(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Bi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var D0=null;function _x(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(s===0)return Bi(i.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}i=i.nextSibling}return null}function Ax(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return i;s--}else l!=="/$"&&l!=="/&"||s++}i=i.previousSibling}return null}function Sx(i,s,l){switch(s=om(l),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function vd(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Ob(i)}var Ui=new Map,Ex=new Set;function lm(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Sr=G.d;G.d={f:BD,r:UD,D:HD,C:qD,L:VD,m:GD,X:YD,S:XD,M:$D};function BD(){var i=Sr.f(),s=Jg();return i||s}function UD(i){var s=bc(i);s!==null&&s.tag===5&&s.type==="form"?UE(s):Sr.r(i)}var Wc=typeof document>"u"?null:document;function xx(i,s,l){var u=Wc;if(u&&typeof s=="string"&&s){var g=Ni(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Ex.has(g)||(Ex.add(g),i={rel:i,crossOrigin:l,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),bn(s,"link",i),on(s),u.head.appendChild(s)))}}function HD(i){Sr.D(i),xx("dns-prefetch",i,null)}function qD(i,s){Sr.C(i,s),xx("preconnect",i,s)}function VD(i,s,l){Sr.L(i,s,l);var u=Wc;if(u&&i&&s){var g='link[rel="preload"][as="'+Ni(s)+'"]';s==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Ni(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Ni(l.imageSizes)+'"]')):g+='[href="'+Ni(i)+'"]';var y=g;switch(s){case"style":y=Qc(i);break;case"script":y=Zc(i)}Ui.has(y)||(i=b({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:i,as:s},l),Ui.set(y,i),u.querySelector(g)!==null||s==="style"&&u.querySelector(wd(y))||s==="script"&&u.querySelector(_d(y))||(s=u.createElement("link"),bn(s,"link",i),on(s),u.head.appendChild(s)))}}function GD(i,s){Sr.m(i,s);var l=Wc;if(l&&i){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Ni(u)+'"][href="'+Ni(i)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Zc(i)}if(!Ui.has(y)&&(i=b({rel:"modulepreload",href:i},s),Ui.set(y,i),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_d(y)))return}u=l.createElement("link"),bn(u,"link",i),on(u),l.head.appendChild(u)}}}function XD(i,s,l){Sr.S(i,s,l);var u=Wc;if(u&&i){var g=vc(u).hoistableStyles,y=Qc(i);s=s||"default";var _=g.get(y);if(!_){var C={loading:0,preload:null};if(_=u.querySelector(wd(y)))C.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":s},l),(l=Ui.get(y))&&N0(i,l);var j=_=u.createElement("link");on(j),bn(j,"link",i),j._p=new Promise(function(Y,Z){j.onload=Y,j.onerror=Z}),j.addEventListener("load",function(){C.loading|=1}),j.addEventListener("error",function(){C.loading|=2}),C.loading|=4,cm(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:C},g.set(y,_)}}}function YD(i,s){Sr.X(i,s);var l=Wc;if(l&&i){var u=vc(l).hoistableScripts,g=Zc(i),y=u.get(g);y||(y=l.querySelector(_d(g)),y||(i=b({src:i,async:!0},s),(s=Ui.get(g))&&O0(i,s),y=l.createElement("script"),on(y),bn(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function $D(i,s){Sr.M(i,s);var l=Wc;if(l&&i){var u=vc(l).hoistableScripts,g=Zc(i),y=u.get(g);y||(y=l.querySelector(_d(g)),y||(i=b({src:i,async:!0,type:"module"},s),(s=Ui.get(g))&&O0(i,s),y=l.createElement("script"),on(y),bn(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Cx(i,s,l,u){var g=(g=bt.current)?lm(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Qc(l.href),l=vc(g).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Qc(l.href);var y=vc(g).hoistableStyles,_=y.get(i);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,_),(y=g.querySelector(wd(i)))&&!y._p&&(_.instance=y,_.state.loading=5),Ui.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ui.set(i,l),y||KD(g,i,l,_.state))),s&&u===null)throw Error(n(528,""));return _}if(s&&u!==null)throw Error(n(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Zc(l),l=vc(g).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Qc(i){return'href="'+Ni(i)+'"'}function wd(i){return'link[rel="stylesheet"]['+i+"]"}function Tx(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function KD(i,s,l,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),bn(s,"link",l),on(s),i.head.appendChild(s))}function Zc(i){return'[src="'+Ni(i)+'"]'}function _d(i){return"script[async]"+i}function kx(i,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Ni(l.href)+'"]');if(u)return s.instance=u,on(u),u;var g=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),on(u),bn(u,"style",g),cm(u,l.precedence,i),s.instance=u;case"stylesheet":g=Qc(l.href);var y=i.querySelector(wd(g));if(y)return s.state.loading|=4,s.instance=y,on(y),y;u=Tx(l),(g=Ui.get(g))&&N0(u,g),y=(i.ownerDocument||i).createElement("link"),on(y);var _=y;return _._p=new Promise(function(C,j){_.onload=C,_.onerror=j}),bn(y,"link",u),s.state.loading|=4,cm(y,l.precedence,i),s.instance=y;case"script":return y=Zc(l.src),(g=i.querySelector(_d(y)))?(s.instance=g,on(g),g):(u=l,(g=Ui.get(y))&&(u=b({},l),O0(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),on(g),bn(g,"link",u),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,cm(u,l.precedence,i));return s.instance}function cm(i,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,_=0;_<u.length;_++){var C=u[_];if(C.dataset.precedence===s)y=C;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(i,s.firstChild))}function N0(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function O0(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var um=null;function Rx(i,s,l){if(um===null){var u=new Map,g=um=new Map;g.set(l,u)}else g=um,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(i))return u;for(u.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var y=l[g];if(!(y[Ph]||y[pn]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(s)||"";_=i+_;var C=u.get(_);C?C.push(y):u.set(_,[y])}}return u}function Mx(i,s,l){i=i.ownerDocument||i,i.head.insertBefore(l,s==="title"?i.querySelector("head > title"):null)}function WD(i,s,l){if(l===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Lx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function QD(i,s,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=Qc(u.href),y=s.querySelector(wd(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=hm.bind(i),s.then(i,i)),l.state.loading|=4,l.instance=y,on(y);return}y=s.ownerDocument||s,u=Tx(u),(g=Ui.get(g))&&N0(u,g),y=y.createElement("link"),on(y);var _=y;_._p=new Promise(function(C,j){_.onload=C,_.onerror=j}),bn(y,"link",u),l.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=hm.bind(i),s.addEventListener("load",l),s.addEventListener("error",l))}}var j0=0;function ZD(i,s){return i.stylesheets&&i.count===0&&fm(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var u=setTimeout(function(){if(i.stylesheets&&fm(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+s);0<i.imgBytes&&j0===0&&(j0=62500*DD());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&fm(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>j0?50:800)+s);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function hm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var dm=null;function fm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,dm=new Map,s.forEach(JD,i),dm=null,hm.call(i))}function JD(i,s){if(!(s.state.loading&4)){var l=dm.get(i);if(l)var u=l.get(null);else{l=new Map,dm.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var _=g[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),u=_)}u&&l.set(null,u)}g=s.instance,_=g.getAttribute("data-precedence"),y=l.get(_)||u,y===u&&l.set(null,g),l.set(_,g),this.count++,u=hm.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var Ad={$$typeof:O,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function tN(i,s,l,u,g,y,_,C,j){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mb(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mb(0),this.hiddenUpdates=Mb(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Dx(i,s,l,u,g,y,_,C,j,Y,Z,et){return i=new tN(i,s,l,_,j,Y,Z,et,C),s=1,y===!0&&(s|=24),y=ui(3,null,null,s),i.current=y,y.stateNode=i,s=pv(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:l,cache:s},bv(y),i}function Nx(i){return i?(i=Rc,i):Rc}function Ox(i,s,l,u,g,y){g=Nx(g),u.context===null?u.context=g:u.pendingContext=g,u=Aa(s),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=Sa(i,u,s),l!==null&&(ti(l,i,s),td(l,i,s))}function jx(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function z0(i,s){jx(i,s),(i=i.alternate)&&jx(i,s)}function zx(i){if(i.tag===13||i.tag===31){var s=jo(i,67108864);s!==null&&ti(s,i,67108864),z0(i,67108864)}}function Px(i){if(i.tag===13||i.tag===31){var s=gi();s=Lb(s);var l=jo(i,s);l!==null&&ti(l,i,s),z0(i,s)}}var pm=!0;function eN(i,s,l,u){var g=F.T;F.T=null;var y=G.p;try{G.p=2,P0(i,s,l,u)}finally{G.p=y,F.T=g}}function nN(i,s,l,u){var g=F.T;F.T=null;var y=G.p;try{G.p=8,P0(i,s,l,u)}finally{G.p=y,F.T=g}}function P0(i,s,l,u){if(pm){var g=F0(u);if(g===null)S0(i,s,u,gm,l),Ix(i,u);else if(sN(g,i,s,l,u))u.stopPropagation();else if(Ix(i,u),s&4&&-1<iN.indexOf(i)){for(;g!==null;){var y=bc(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=Mo(y.pendingLanes);if(_!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var j=1<<31-li(_);C.entanglements[1]|=j,_&=~j}Ms(y),(ae&6)===0&&(Qg=an()+500,md(0))}}break;case 31:case 13:C=jo(y,2),C!==null&&ti(C,y,2),Jg(),z0(y,2)}if(y=F0(u),y===null&&S0(i,s,u,gm,l),y===g)break;g=y}g!==null&&u.stopPropagation()}else S0(i,s,u,null,l)}}function F0(i){return i=Bb(i),I0(i)}var gm=null;function I0(i){if(gm=null,i=yc(i),i!==null){var s=o(i);if(s===null)i=null;else{var l=s.tag;if(l===13){if(i=c(s),i!==null)return i;i=null}else if(l===31){if(i=h(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return gm=i,null}function Fx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oh()){case at:return 2;case lt:return 8;case wt:case jt:return 32;case re:return 268435456;default:return 32}default:return 32}}var B0=!1,Oa=null,ja=null,za=null,Sd=new Map,Ed=new Map,Pa=[],iN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ix(i,s){switch(i){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":Sd.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ed.delete(s.pointerId)}}function xd(i,s,l,u,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},s!==null&&(s=bc(s),s!==null&&zx(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function sN(i,s,l,u,g){switch(s){case"focusin":return Oa=xd(Oa,i,s,l,u,g),!0;case"dragenter":return ja=xd(ja,i,s,l,u,g),!0;case"mouseover":return za=xd(za,i,s,l,u,g),!0;case"pointerover":var y=g.pointerId;return Sd.set(y,xd(Sd.get(y)||null,i,s,l,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Ed.set(y,xd(Ed.get(y)||null,i,s,l,u,g)),!0}return!1}function Bx(i){var s=yc(i.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){i.blockedOn=s,tS(i.priority,function(){Px(l)});return}}else if(s===31){if(s=h(l),s!==null){i.blockedOn=s,tS(i.priority,function(){Px(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mm(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=F0(i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);Ib=u,l.target.dispatchEvent(u),Ib=null}else return s=bc(l),s!==null&&zx(s),i.blockedOn=l,!1;s.shift()}return!0}function Ux(i,s,l){mm(i)&&l.delete(s)}function rN(){B0=!1,Oa!==null&&mm(Oa)&&(Oa=null),ja!==null&&mm(ja)&&(ja=null),za!==null&&mm(za)&&(za=null),Sd.forEach(Ux),Ed.forEach(Ux)}function ym(i,s){i.blockedOn===s&&(i.blockedOn=null,B0||(B0=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,rN)))}var bm=null;function Hx(i){bm!==i&&(bm=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){bm===i&&(bm=null);for(var s=0;s<i.length;s+=3){var l=i[s],u=i[s+1],g=i[s+2];if(typeof u!="function"){if(I0(u||l)===null)continue;break}var y=bc(l);y!==null&&(i.splice(s,3),s-=3,Fv(y,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function Jc(i){function s(j){return ym(j,i)}Oa!==null&&ym(Oa,i),ja!==null&&ym(ja,i),za!==null&&ym(za,i),Sd.forEach(s),Ed.forEach(s);for(var l=0;l<Pa.length;l++){var u=Pa[l];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Pa.length&&(l=Pa[0],l.blockedOn===null);)Bx(l),l.blockedOn===null&&Pa.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],y=l[u+1],_=g[$n]||null;if(typeof y=="function")_||Hx(l);else if(_){var C=null;if(y&&y.hasAttribute("formAction")){if(g=y,_=y[$n]||null)C=_.formAction;else if(I0(g)!==null)continue}else C=_.action;typeof C=="function"?l[u+1]=C:(l.splice(u,3),u-=3),Hx(l)}}}function qx(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return g=_})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function U0(i){this._internalRoot=i}vm.prototype.render=U0.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var l=s.current,u=gi();Ox(l,u,i,s,null,null)},vm.prototype.unmount=U0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Ox(i.current,2,null,i,null,null),Jg(),s[mc]=null}};function vm(i){this._internalRoot=i}vm.prototype.unstable_scheduleHydration=function(i){if(i){var s=JA();i={blockedOn:null,target:i,priority:s};for(var l=0;l<Pa.length&&s!==0&&s<Pa[l].priority;l++);Pa.splice(l,0,i),l===0&&Bx(i)}};var Vx=t.version;if(Vx!=="19.2.1")throw Error(n(527,Vx,"19.2.1"));G.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=p(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var aN={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wm.isDisabled&&wm.supportsFiber)try{Ro=wm.inject(aN),Ln=wm}catch{}}return Td.createRoot=function(i,s){if(!a(i))throw Error(n(299));var l=!1,u="",g=QE,y=ZE,_=JE;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Dx(i,1,!1,null,null,l,u,null,g,y,_,qx),i[mc]=s.current,A0(i),new U0(s)},Td.hydrateRoot=function(i,s,l){if(!a(i))throw Error(n(299));var u=!1,g="",y=QE,_=ZE,C=JE,j=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(j=l.formState)),s=Dx(i,1,!0,s,l??null,u,g,j,y,_,C,qx),s.context=Nx(null),l=s.current,u=gi(),u=Lb(u),g=Aa(u),g.callback=null,Sa(l,g,u),l=u,s.current.lanes=l,zh(s,l),Ms(s),i[mc]=s.current,A0(i),new vm(s)},Td.version="19.2.1",Td}var eC;function bN(){if(eC)return G0.exports;eC=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),G0.exports=yN(),G0.exports}var vN=bN();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var nC="popstate";function wN(r={}){function t(n,a){let{pathname:o,search:c,hash:h}=n.location;return _w("",{pathname:o,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:nf(a)}return AN(t,e,null,r)}function Me(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Ji(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _N(){return Math.random().toString(36).substring(2,10)}function iC(r,t){return{usr:r.state,key:r.key,idx:t}}function _w(r,t,e=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?wh(t):t,state:e,key:t&&t.key||n||_N()}}function nf({pathname:r="/",search:t="",hash:e=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function wh(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substring(e),r=r.substring(0,e));let n=r.indexOf("?");n>=0&&(t.search=r.substring(n),r=r.substring(0,n)),r&&(t.pathname=r)}return t}function AN(r,t,e,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,h="POP",d=null,p=m();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function m(){return(c.state||{idx:null}).idx}function b(){h="POP";let R=m(),M=R==null?null:R-p;p=R,d&&d({action:h,location:S.location,delta:M})}function v(R,M){h="PUSH";let D=_w(S.location,R,M);p=m()+1;let O=iC(D,p),I=S.createHref(D);try{c.pushState(O,"",I)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;a.location.assign(I)}o&&d&&d({action:h,location:S.location,delta:1})}function w(R,M){h="REPLACE";let D=_w(S.location,R,M);p=m();let O=iC(D,p),I=S.createHref(D);c.replaceState(O,"",I),o&&d&&d({action:h,location:S.location,delta:0})}function A(R){return SN(R)}let S={get action(){return h},get location(){return r(a,c)},listen(R){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(nC,b),d=R,()=>{a.removeEventListener(nC,b),d=null}},createHref(R){return t(a,R)},createURL:A,encodeLocation(R){let M=A(R);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:v,replace:w,go(R){return c.go(R)}};return S}function SN(r,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Me(e,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:nf(r);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function jT(r,t,e="/"){return EN(r,t,e,!1)}function EN(r,t,e,n){let a=typeof t=="string"?wh(t):t,o=ua(a.pathname||"/",e);if(o==null)return null;let c=zT(r);xN(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let p=zN(o);h=ON(c[d],p,n)}return h}function zT(r,t=[],e=[],n="",a=!1){let o=(c,h,d=a,p)=>{let m={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&d)return;Me(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let b=sa([n,m.relativePath]),v=e.concat(m);c.children&&c.children.length>0&&(Me(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),zT(c.children,t,v,b,d)),!(c.path==null&&!c.index)&&t.push({path:b,score:DN(b,c.index),routesMeta:v})};return r.forEach((c,h)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))o(c,h);else for(let p of PT(c.path))o(c,h,!0,p)}),t}function PT(r){let t=r.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=PT(n.join("/")),h=[];return h.push(...c.map(d=>d===""?o:[o,d].join("/"))),a&&h.push(...c),h.map(d=>r.startsWith("/")&&d===""?"/":d)}function xN(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:NN(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var CN=/^:[\w-]+$/,TN=3,kN=2,RN=1,MN=10,LN=-2,sC=r=>r==="*";function DN(r,t){let e=r.split("/"),n=e.length;return e.some(sC)&&(n+=LN),t&&(n+=kN),e.filter(a=>!sC(a)).reduce((a,o)=>a+(CN.test(o)?TN:o===""?RN:MN),n)}function NN(r,t){return r.length===t.length&&r.slice(0,-1).every((n,a)=>n===t[a])?r[r.length-1]-t[t.length-1]:0}function ON(r,t,e=!1){let{routesMeta:n}=r,a={},o="/",c=[];for(let h=0;h<n.length;++h){let d=n[h],p=h===n.length-1,m=o==="/"?t:t.slice(o.length)||"/",b=by({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},m),v=d.route;if(!b&&p&&e&&!n[n.length-1].route.index&&(b=by({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:sa([o,b.pathname]),pathnameBase:UN(sa([o,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(o=sa([o,b.pathnameBase]))}return c}function by(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,n]=jN(r.path,r.caseSensitive,r.end),a=t.match(e);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:n.reduce((p,{paramName:m,isOptional:b},v)=>{if(m==="*"){let A=h[v]||"";c=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const w=h[v];return b&&!w?p[m]=void 0:p[m]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:r}}function jN(r,t=!1,e=!0){Ji(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(n.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function zN(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ji(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function ua(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=r.charAt(e);return n&&n!=="/"?null:r.slice(e)||"/"}var PN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FN=r=>PN.test(r);function IN(r,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof r=="string"?wh(r):r,o;if(e)if(FN(e))o=e;else{if(e.includes("//")){let c=e;e=e.replace(/\/\/+/g,"/"),Ji(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${e}`)}e.startsWith("/")?o=rC(e.substring(1),"/"):o=rC(e,t)}else o=t;return{pathname:o,search:HN(n),hash:qN(a)}}function rC(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function K0(r,t,e,n){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BN(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function iA(r){let t=BN(r);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function sA(r,t,e,n=!1){let a;typeof r=="string"?a=wh(r):(a={...r},Me(!a.pathname||!a.pathname.includes("?"),K0("?","pathname","search",a)),Me(!a.pathname||!a.pathname.includes("#"),K0("#","pathname","hash",a)),Me(!a.search||!a.search.includes("#"),K0("#","search","hash",a)));let o=r===""||a.pathname==="",c=o?"/":a.pathname,h;if(c==null)h=e;else{let b=t.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),b-=1;a.pathname=v.join("/")}h=b>=0?t[b]:"/"}let d=IN(a,h),p=c&&c!=="/"&&c.endsWith("/"),m=(o||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(p||m)&&(d.pathname+="/"),d}var sa=r=>r.join("/").replace(/\/\/+/g,"/"),UN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),HN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,qN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function VN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function GN(r){return r.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var FT=["POST","PUT","PATCH","DELETE"];new Set(FT);var XN=["GET",...FT];new Set(XN);var _h=L.createContext(null);_h.displayName="DataRouter";var sb=L.createContext(null);sb.displayName="DataRouterState";L.createContext(!1);var IT=L.createContext({isTransitioning:!1});IT.displayName="ViewTransition";var YN=L.createContext(new Map);YN.displayName="Fetchers";var $N=L.createContext(null);$N.displayName="Await";var ts=L.createContext(null);ts.displayName="Navigation";var Xp=L.createContext(null);Xp.displayName="Location";var As=L.createContext({outlet:null,matches:[],isDataRoute:!1});As.displayName="Route";var rA=L.createContext(null);rA.displayName="RouteError";function KN(r,{relative:t}={}){Me(Ah(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=L.useContext(ts),{hash:a,pathname:o,search:c}=Yp(r,{relative:t}),h=o;return e!=="/"&&(h=o==="/"?e:sa([e,o])),n.createHref({pathname:h,search:c,hash:a})}function Ah(){return L.useContext(Xp)!=null}function So(){return Me(Ah(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Xp).location}var BT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UT(r){L.useContext(ts).static||L.useLayoutEffect(r)}function Sh(){let{isDataRoute:r}=L.useContext(As);return r?cO():WN()}function WN(){Me(Ah(),"useNavigate() may be used only in the context of a <Router> component.");let r=L.useContext(_h),{basename:t,navigator:e}=L.useContext(ts),{matches:n}=L.useContext(As),{pathname:a}=So(),o=JSON.stringify(iA(n)),c=L.useRef(!1);return UT(()=>{c.current=!0}),L.useCallback((d,p={})=>{if(Ji(c.current,BT),!c.current)return;if(typeof d=="number"){e.go(d);return}let m=sA(d,JSON.parse(o),a,p.relative==="path");r==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:sa([t,m.pathname])),(p.replace?e.replace:e.push)(m,p.state,p)},[t,e,o,a,r])}L.createContext(null);function QN(){let{matches:r}=L.useContext(As),t=r[r.length-1];return t?t.params:{}}function Yp(r,{relative:t}={}){let{matches:e}=L.useContext(As),{pathname:n}=So(),a=JSON.stringify(iA(e));return L.useMemo(()=>sA(r,JSON.parse(a),n,t==="path"),[r,a,n,t])}function ZN(r,t){return HT(r,t)}function HT(r,t,e,n,a){var D;Me(Ah(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=L.useContext(ts),{matches:c}=L.useContext(As),h=c[c.length-1],d=h?h.params:{},p=h?h.pathname:"/",m=h?h.pathnameBase:"/",b=h&&h.route;{let O=b&&b.path||"";qT(p,!b||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let v=So(),w;if(t){let O=typeof t=="string"?wh(t):t;Me(m==="/"||((D=O.pathname)==null?void 0:D.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${O.pathname}" was given in the \`location\` prop.`),w=O}else w=v;let A=w.pathname||"/",S=A;if(m!=="/"){let O=m.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(O.length).join("/")}let R=jT(r,{pathname:S});Ji(b||R!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ji(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=iO(R&&R.map(O=>Object.assign({},O,{params:Object.assign({},d,O.params),pathname:sa([m,o.encodeLocation?o.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?m:sa([m,o.encodeLocation?o.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),c,e,n,a);return t&&M?L.createElement(Xp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},M):M}function JN(){let r=lO(),t=VN(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),e?L.createElement("pre",{style:a},e):null,c)}var tO=L.createElement(JN,null),eO=class extends L.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.onError?this.props.onError(r,t):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?L.createElement(As.Provider,{value:this.props.routeContext},L.createElement(rA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nO({routeContext:r,match:t,children:e}){let n=L.useContext(_h);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(As.Provider,{value:r},e)}function iO(r,t=[],e=null,n=null,a=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let o=r,c=e==null?void 0:e.errors;if(c!=null){let m=o.findIndex(b=>b.route.id&&(c==null?void 0:c[b.route.id])!==void 0);Me(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let h=!1,d=-1;if(e)for(let m=0;m<o.length;m++){let b=o[m];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(d=m),b.route.id){let{loaderData:v,errors:w}=e,A=b.route.loader&&!v.hasOwnProperty(b.route.id)&&(!w||w[b.route.id]===void 0);if(b.route.lazy||A){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let p=e&&n?(m,b)=>{var v,w;n(m,{location:e.location,params:((w=(v=e.matches)==null?void 0:v[0])==null?void 0:w.params)??{},unstable_pattern:GN(e.matches),errorInfo:b})}:void 0;return o.reduceRight((m,b,v)=>{let w,A=!1,S=null,R=null;e&&(w=c&&b.route.id?c[b.route.id]:void 0,S=b.route.errorElement||tO,h&&(d<0&&v===0?(qT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,R=null):d===v&&(A=!0,R=b.route.hydrateFallbackElement||null)));let M=t.concat(o.slice(0,v+1)),D=()=>{let O;return w?O=S:A?O=R:b.route.Component?O=L.createElement(b.route.Component,null):b.route.element?O=b.route.element:O=m,L.createElement(nO,{match:b,routeContext:{outlet:m,matches:M,isDataRoute:e!=null},children:O})};return e&&(b.route.ErrorBoundary||b.route.errorElement||v===0)?L.createElement(eO,{location:e.location,revalidation:e.revalidation,component:S,error:w,children:D(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:p}):D()},null)}function aA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sO(r){let t=L.useContext(_h);return Me(t,aA(r)),t}function rO(r){let t=L.useContext(sb);return Me(t,aA(r)),t}function aO(r){let t=L.useContext(As);return Me(t,aA(r)),t}function oA(r){let t=aO(r),e=t.matches[t.matches.length-1];return Me(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function oO(){return oA("useRouteId")}function lO(){var n;let r=L.useContext(rA),t=rO("useRouteError"),e=oA("useRouteError");return r!==void 0?r:(n=t.errors)==null?void 0:n[e]}function cO(){let{router:r}=sO("useNavigate"),t=oA("useNavigate"),e=L.useRef(!1);return UT(()=>{e.current=!0}),L.useCallback(async(a,o={})=>{Ji(e.current,BT),e.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:t,...o}))},[r,t])}var aC={};function qT(r,t,e){!t&&!aC[r]&&(aC[r]=!0,Ji(!1,e))}L.memo(uO);function uO({routes:r,future:t,state:e,unstable_onError:n}){return HT(r,void 0,e,n,t)}function vy({to:r,replace:t,state:e,relative:n}){Me(Ah(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=L.useContext(ts);Ji(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=L.useContext(As),{pathname:c}=So(),h=Sh(),d=sA(r,iA(o),c,n==="path"),p=JSON.stringify(d);return L.useEffect(()=>{h(JSON.parse(p),{replace:t,state:e,relative:n})},[h,p,n,t,e]),null}function Wo(r){Me(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hO({basename:r="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:o=!1,unstable_useTransitions:c}){Me(!Ah(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),d=L.useMemo(()=>({basename:h,navigator:a,static:o,unstable_useTransitions:c,future:{}}),[h,a,o,c]);typeof e=="string"&&(e=wh(e));let{pathname:p="/",search:m="",hash:b="",state:v=null,key:w="default"}=e,A=L.useMemo(()=>{let S=ua(p,h);return S==null?null:{location:{pathname:S,search:m,hash:b,state:v,key:w},navigationType:n}},[h,p,m,b,v,w,n]);return Ji(A!=null,`<Router basename="${h}"> is not able to match the URL "${p}${m}${b}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:L.createElement(ts.Provider,{value:d},L.createElement(Xp.Provider,{children:t,value:A}))}function dO({children:r,location:t}){return ZN(Aw(r),t)}function Aw(r,t=[]){let e=[];return L.Children.forEach(r,(n,a)=>{if(!L.isValidElement(n))return;let o=[...t,a];if(n.type===L.Fragment){e.push.apply(e,Aw(n.props.children,o));return}Me(n.type===Wo,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Me(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Aw(n.props.children,o)),e.push(c)}),e}var zm="get",Pm="application/x-www-form-urlencoded";function rb(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function fO(r){return rb(r)&&r.tagName.toLowerCase()==="button"}function pO(r){return rb(r)&&r.tagName.toLowerCase()==="form"}function gO(r){return rb(r)&&r.tagName.toLowerCase()==="input"}function mO(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function yO(r,t){return r.button===0&&(!t||t==="_self")&&!mO(r)}var _m=null;function bO(){if(_m===null)try{new FormData(document.createElement("form"),0),_m=!1}catch{_m=!0}return _m}var vO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function W0(r){return r!=null&&!vO.has(r)?(Ji(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pm}"`),null):r}function wO(r,t){let e,n,a,o,c;if(pO(r)){let h=r.getAttribute("action");n=h?ua(h,t):null,e=r.getAttribute("method")||zm,a=W0(r.getAttribute("enctype"))||Pm,o=new FormData(r)}else if(fO(r)||gO(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||h.getAttribute("action");if(n=d?ua(d,t):null,e=r.getAttribute("formmethod")||h.getAttribute("method")||zm,a=W0(r.getAttribute("formenctype"))||W0(h.getAttribute("enctype"))||Pm,o=new FormData(h,r),!bO()){let{name:p,type:m,value:b}=r;if(m==="image"){let v=p?`${p}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else p&&o.append(p,b)}}else{if(rb(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=zm,n=null,a=Pm,c=r}return o&&a==="text/plain"&&(c=o,o=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lA(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function _O(r,t,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&ua(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function AO(r,t){if(r.id in t)return t[r.id];try{let e=await import(r.module);return t[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function SO(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function EO(r,t,e){let n=await Promise.all(r.map(async a=>{let o=t.routes[a.route.id];if(o){let c=await AO(o,e);return c.links?c.links():[]}return[]}));return kO(n.flat(1).filter(SO).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function oC(r,t,e,n,a,o){let c=(d,p)=>e[p]?d.route.id!==e[p].route.id:!0,h=(d,p)=>{var m;return e[p].pathname!==d.pathname||((m=e[p].route.path)==null?void 0:m.endsWith("*"))&&e[p].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,p)=>c(d,p)||h(d,p)):o==="data"?t.filter((d,p)=>{var b;let m=n.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(c(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((b=e[0])==null?void 0:b.params)||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function xO(r,t,{includeHydrateFallback:e}={}){return CO(r.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function CO(r){return[...new Set(r)]}function TO(r){let t={},e=Object.keys(r).sort();for(let n of e)t[n]=r[n];return t}function kO(r,t){let e=new Set;return new Set(t),r.reduce((n,a)=>{let o=JSON.stringify(TO(a));return e.has(o)||(e.add(o),n.push({key:o,link:a})),n},[])}function VT(){let r=L.useContext(_h);return lA(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function RO(){let r=L.useContext(sb);return lA(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var cA=L.createContext(void 0);cA.displayName="FrameworkContext";function GT(){let r=L.useContext(cA);return lA(r,"You must render this element inside a <HydratedRouter> element"),r}function MO(r,t){let e=L.useContext(cA),[n,a]=L.useState(!1),[o,c]=L.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:m,onTouchStart:b}=t,v=L.useRef(null);L.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let S=M=>{M.forEach(D=>{c(D.isIntersecting)})},R=new IntersectionObserver(S,{threshold:.5});return v.current&&R.observe(v.current),()=>{R.disconnect()}}},[r]),L.useEffect(()=>{if(n){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[n]);let w=()=>{a(!0)},A=()=>{a(!1),c(!1)};return e?r!=="intent"?[o,v,{}]:[o,v,{onFocus:kd(h,w),onBlur:kd(d,A),onMouseEnter:kd(p,w),onMouseLeave:kd(m,A),onTouchStart:kd(b,w)}]:[!1,v,{}]}function kd(r,t){return e=>{r&&r(e),e.defaultPrevented||t(e)}}function LO({page:r,...t}){let{router:e}=VT(),n=L.useMemo(()=>jT(e.routes,r,e.basename),[e.routes,r,e.basename]);return n?L.createElement(NO,{page:r,matches:n,...t}):null}function DO(r){let{manifest:t,routeModules:e}=GT(),[n,a]=L.useState([]);return L.useEffect(()=>{let o=!1;return EO(r,t,e).then(c=>{o||a(c)}),()=>{o=!0}},[r,t,e]),n}function NO({page:r,matches:t,...e}){let n=So(),{manifest:a,routeModules:o}=GT(),{basename:c}=VT(),{loaderData:h,matches:d}=RO(),p=L.useMemo(()=>oC(r,t,d,a,n,"data"),[r,t,d,a,n]),m=L.useMemo(()=>oC(r,t,d,a,n,"assets"),[r,t,d,a,n]),b=L.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let A=new Set,S=!1;if(t.forEach(M=>{var O;let D=a.routes[M.route.id];!D||!D.hasLoader||(!p.some(I=>I.route.id===M.route.id)&&M.route.id in h&&((O=o[M.route.id])!=null&&O.shouldRevalidate)||D.hasClientLoader?S=!0:A.add(M.route.id))}),A.size===0)return[];let R=_O(r,c,"data");return S&&A.size>0&&R.searchParams.set("_routes",t.filter(M=>A.has(M.route.id)).map(M=>M.route.id).join(",")),[R.pathname+R.search]},[c,h,n,a,p,t,r,o]),v=L.useMemo(()=>xO(m,a),[m,a]),w=DO(m);return L.createElement(L.Fragment,null,b.map(A=>L.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...e})),v.map(A=>L.createElement("link",{key:A,rel:"modulepreload",href:A,...e})),w.map(({key:A,link:S})=>L.createElement("link",{key:A,nonce:e.nonce,...S})))}function OO(...r){return t=>{r.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var XT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XT&&(window.__reactRouterVersion="7.10.1")}catch{}function jO({basename:r,children:t,unstable_useTransitions:e,window:n}){let a=L.useRef();a.current==null&&(a.current=wN({window:n,v5Compat:!0}));let o=a.current,[c,h]=L.useState({action:o.action,location:o.location}),d=L.useCallback(p=>{e===!1?h(p):L.startTransition(()=>h(p))},[e]);return L.useLayoutEffect(()=>o.listen(d),[o,d]),L.createElement(hO,{basename:r,children:t,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:e===!0})}var YT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ab=L.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:o,replace:c,state:h,target:d,to:p,preventScrollReset:m,viewTransition:b,...v},w){let{basename:A,unstable_useTransitions:S}=L.useContext(ts),R=typeof p=="string"&&YT.test(p),M,D=!1;if(typeof p=="string"&&R&&(M=p,XT))try{let nt=new URL(window.location.href),rt=p.startsWith("//")?new URL(nt.protocol+p):new URL(p),mt=ua(rt.pathname,A);rt.origin===nt.origin&&mt!=null?p=mt+rt.search+rt.hash:D=!0}catch{Ji(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=KN(p,{relative:a}),[I,U,P]=MO(n,v),H=IO(p,{replace:c,state:h,target:d,preventScrollReset:m,relative:a,viewTransition:b,unstable_useTransitions:S});function K(nt){t&&t(nt),nt.defaultPrevented||H(nt)}let tt=L.createElement("a",{...v,...P,href:M||O,onClick:D||o?t:K,ref:OO(w,U),target:d,"data-discover":!R&&e==="render"?"true":void 0});return I&&!R?L.createElement(L.Fragment,null,tt,L.createElement(LO,{page:O})):tt});ab.displayName="Link";var zO=L.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:o,to:c,viewTransition:h,children:d,...p},m){let b=Yp(c,{relative:p.relative}),v=So(),w=L.useContext(sb),{navigator:A,basename:S}=L.useContext(ts),R=w!=null&&VO(b)&&h===!0,M=A.encodeLocation?A.encodeLocation(b).pathname:b.pathname,D=v.pathname,O=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;e||(D=D.toLowerCase(),O=O?O.toLowerCase():null,M=M.toLowerCase()),O&&S&&(O=ua(O,S)||O);const I=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let U=D===M||!a&&D.startsWith(M)&&D.charAt(I)==="/",P=O!=null&&(O===M||!a&&O.startsWith(M)&&O.charAt(M.length)==="/"),H={isActive:U,isPending:P,isTransitioning:R},K=U?t:void 0,tt;typeof n=="function"?tt=n(H):tt=[n,U?"active":null,P?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let nt=typeof o=="function"?o(H):o;return L.createElement(ab,{...p,"aria-current":K,className:tt,ref:m,style:nt,to:c,viewTransition:h},typeof d=="function"?d(H):d)});zO.displayName="NavLink";var PO=L.forwardRef(({discover:r="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:o,method:c=zm,action:h,onSubmit:d,relative:p,preventScrollReset:m,viewTransition:b,...v},w)=>{let{unstable_useTransitions:A}=L.useContext(ts),S=HO(),R=qO(h,{relative:p}),M=c.toLowerCase()==="get"?"get":"post",D=typeof h=="string"&&YT.test(h),O=I=>{if(d&&d(I),I.defaultPrevented)return;I.preventDefault();let U=I.nativeEvent.submitter,P=(U==null?void 0:U.getAttribute("formmethod"))||c,H=()=>S(U||I.currentTarget,{fetcherKey:t,method:P,navigate:e,replace:a,state:o,relative:p,preventScrollReset:m,viewTransition:b});A&&e!==!1?L.startTransition(()=>H()):H()};return L.createElement("form",{ref:w,method:M,action:R,onSubmit:n?d:O,...v,"data-discover":!D&&r==="render"?"true":void 0})});PO.displayName="Form";function FO(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $T(r){let t=L.useContext(_h);return Me(t,FO(r)),t}function IO(r,{target:t,replace:e,state:n,preventScrollReset:a,relative:o,viewTransition:c,unstable_useTransitions:h}={}){let d=Sh(),p=So(),m=Yp(r,{relative:o});return L.useCallback(b=>{if(yO(b,t)){b.preventDefault();let v=e!==void 0?e:nf(p)===nf(m),w=()=>d(r,{replace:v,state:n,preventScrollReset:a,relative:o,viewTransition:c});h?L.startTransition(()=>w()):w()}},[p,d,m,e,n,t,r,a,o,c,h])}var BO=0,UO=()=>`__${String(++BO)}__`;function HO(){let{router:r}=$T("useSubmit"),{basename:t}=L.useContext(ts),e=oO(),n=r.fetch,a=r.navigate;return L.useCallback(async(o,c={})=>{let{action:h,method:d,encType:p,formData:m,body:b}=wO(o,t);if(c.navigate===!1){let v=c.fetcherKey||UO();await n(v,e,c.action||h,{preventScrollReset:c.preventScrollReset,formData:m,body:b,formMethod:c.method||d,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||h,{preventScrollReset:c.preventScrollReset,formData:m,body:b,formMethod:c.method||d,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,a,t,e])}function qO(r,{relative:t}={}){let{basename:e}=L.useContext(ts),n=L.useContext(As);Me(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...Yp(r||".",{relative:t})},c=So();if(r==null){o.search=c.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(m=>m==="")){h.delete("index"),d.filter(b=>b).forEach(b=>h.append("index",b));let m=h.toString();o.search=m?`?${m}`:""}}return(!r||r===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:sa([e,o.pathname])),nf(o)}function VO(r,{relative:t}={}){let e=L.useContext(IT);Me(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=$T("useViewTransitionState"),a=Yp(r,{relative:t});if(!e.isTransitioning)return!1;let o=ua(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=ua(e.nextLocation.pathname,n)||e.nextLocation.pathname;return by(a.pathname,c)!=null||by(a.pathname,o)!=null}const lC=r=>{let t;const e=new Set,n=(p,m)=>{const b=typeof p=="function"?p(t):p;if(!Object.is(b,t)){const v=t;t=m??(typeof b!="object"||b===null)?b:Object.assign({},t,b),e.forEach(w=>w(t,v))}},a=()=>t,h={setState:n,getState:a,getInitialState:()=>d,subscribe:p=>(e.add(p),()=>e.delete(p))},d=t=r(n,a,h);return h},GO=(r=>r?lC(r):lC),XO=r=>r;function YO(r,t=XO){const e=Ks.useSyncExternalStore(r.subscribe,Ks.useCallback(()=>t(r.getState()),[r,t]),Ks.useCallback(()=>t(r.getInitialState()),[r,t]));return Ks.useDebugValue(e),e}const cC=r=>{const t=GO(r),e=n=>YO(t,n);return Object.assign(e,t),e},KT=(r=>r?cC(r):cC),$O="https://heytex.truyenthong.edu.vn";class KO{constructor(t){Mt(this,"baseUrl");this.baseUrl=t}getToken(){return localStorage.getItem("heytex_token")}async request(t,e={}){const{method:n="GET",body:a,headers:o={}}=e,c=this.getToken(),h={method:n,headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{},...o}};a&&(h.body=JSON.stringify(a));const d=await fetch(`${this.baseUrl}${t}`,h);if(!d.ok){const p=await d.json().catch(()=>({error:"Unknown error"}));throw new Error(p.error||`HTTP error ${d.status}`)}return e.responseType==="blob"?d.blob():d.json()}async login(t,e){const n=await this.request("/api/auth/login",{method:"POST",body:{email:t,password:e}});return localStorage.setItem("heytex_token",n.token),n}async register(t,e,n){const a=await this.request("/api/auth/register",{method:"POST",body:{email:t,password:e,name:n}});return localStorage.setItem("heytex_token",a.token),a}async getMe(){return this.request("/api/auth/me")}logout(){localStorage.removeItem("heytex_token")}async getProjects(){return this.request("/api/projects")}async getProject(t){return this.request(`/api/projects/${t}`)}async createProject(t){return this.request("/api/projects",{method:"POST",body:t})}async updateProject(t,e){return this.request(`/api/projects/${t}`,{method:"PATCH",body:e})}async deleteProject(t){return this.request(`/api/projects/${t}`,{method:"DELETE"})}async addCollaborator(t,e,n){return this.request(`/api/projects/${t}/collaborators`,{method:"POST",body:{email:e,role:n}})}async removeCollaborator(t,e){return this.request(`/api/projects/${t}/collaborators/${e}`,{method:"DELETE"})}async getFiles(t){return this.request(`/api/files/project/${t}`)}async getFile(t){return this.request(`/api/files/${t}`)}async createFile(t){return this.request("/api/files",{method:"POST",body:t})}async updateFile(t,e){return this.request(`/api/files/${t}`,{method:"PATCH",body:e})}async deleteFile(t){return this.request(`/api/files/${t}`,{method:"DELETE"})}async compile(t){return this.request("/api/compile/latex",{method:"POST",body:{content:t},responseType:"blob"})}async uploadFile(t){return this.request("/api/files/upload",{method:"POST",body:t})}}const Cn=new KO($O),uc=KT(r=>({user:null,isAuthenticated:!1,isLoading:!0,login:async(t,e)=>{const{user:n}=await Cn.login(t,e);r({user:n,isAuthenticated:!0})},register:async(t,e,n)=>{const{user:a}=await Cn.register(t,e,n);r({user:a,isAuthenticated:!0})},logout:()=>{Cn.logout(),r({user:null,isAuthenticated:!1})},checkAuth:async()=>{try{if(!localStorage.getItem("heytex_token")){r({isLoading:!1});return}const{user:e}=await Cn.getMe();r({user:e,isAuthenticated:!0,isLoading:!1})}catch{localStorage.removeItem("heytex_token"),r({user:null,isAuthenticated:!1,isLoading:!1})}}})),WT=KT((r,t)=>({currentProject:null,currentFile:null,files:[],openFiles:[],isSidebarOpen:!0,isPreviewOpen:!0,theme:localStorage.getItem("heytex_theme")||"light",compilationStatus:"idle",compilationError:null,pdfData:null,setCurrentProject:e=>r({currentProject:e}),setCurrentFile:e=>r({currentFile:e}),setFiles:e=>r({files:e}),addOpenFile:e=>{const{openFiles:n}=t();n.find(a=>a.id===e.id)||r({openFiles:[...n,e]}),r({currentFile:e})},removeOpenFile:e=>{const{openFiles:n,currentFile:a}=t(),o=n.filter(c=>c.id!==e);r({openFiles:o}),(a==null?void 0:a.id)===e&&r({currentFile:o[o.length-1]||null})},toggleSidebar:()=>r(e=>({isSidebarOpen:!e.isSidebarOpen})),togglePreview:()=>r(e=>({isPreviewOpen:!e.isPreviewOpen})),toggleTheme:()=>{const e=t().theme==="light"?"dark":"light";localStorage.setItem("heytex_theme",e),document.documentElement.classList.toggle("dark",e==="dark"),r({theme:e})},setCompilationStatus:(e,n)=>r({compilationStatus:e,compilationError:n||null}),setPdfData:e=>r({pdfData:e}),updateFileContent:(e,n)=>{const{files:a,openFiles:o,currentFile:c}=t(),h=d=>d.id===e?{...d,content:n}:d;r({files:a.map(h),openFiles:o.map(h),currentFile:(c==null?void 0:c.id)===e?{...c,content:n}:c})}}));if(typeof window<"u"){const r=localStorage.getItem("heytex_theme")||"light";document.documentElement.classList.toggle("dark",r==="dark")}function QT(r){var t,e,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(t=0;t<a;t++)r[t]&&(e=QT(r[t]))&&(n&&(n+=" "),n+=e)}else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function Eh(){for(var r,t,e=0,n="",a=arguments.length;e<a;e++)(r=arguments[e])&&(t=QT(r))&&(n&&(n+=" "),n+=t);return n}const WO=(r,t)=>{const e=new Array(r.length+t.length);for(let n=0;n<r.length;n++)e[n]=r[n];for(let n=0;n<t.length;n++)e[r.length+n]=t[n];return e},QO=(r,t)=>({classGroupId:r,validator:t}),ZT=(r=new Map,t=null,e)=>({nextPart:r,validators:t,classGroupId:e}),wy="-",uC=[],ZO="arbitrary..",JO=r=>{const t=ej(r),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return tj(c);const h=c.split(wy),d=h[0]===""&&h.length>1?1:0;return JT(h,d,t)},getConflictingClassGroupIds:(c,h)=>{if(h){const d=n[c],p=e[c];return d?p?WO(p,d):d:p||uC}return e[c]||uC}}},JT=(r,t,e)=>{if(r.length-t===0)return e.classGroupId;const a=r[t],o=e.nextPart.get(a);if(o){const p=JT(r,t+1,o);if(p)return p}const c=e.validators;if(c===null)return;const h=t===0?r.join(wy):r.slice(t).join(wy),d=c.length;for(let p=0;p<d;p++){const m=c[p];if(m.validator(h))return m.classGroupId}},tj=r=>r.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=r.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?ZO+n:void 0})(),ej=r=>{const{theme:t,classGroups:e}=r;return nj(e,t)},nj=(r,t)=>{const e=ZT();for(const n in r){const a=r[n];uA(a,e,n,t)}return e},uA=(r,t,e,n)=>{const a=r.length;for(let o=0;o<a;o++){const c=r[o];ij(c,t,e,n)}},ij=(r,t,e,n)=>{if(typeof r=="string"){sj(r,t,e);return}if(typeof r=="function"){rj(r,t,e,n);return}aj(r,t,e,n)},sj=(r,t,e)=>{const n=r===""?t:tk(t,r);n.classGroupId=e},rj=(r,t,e,n)=>{if(oj(r)){uA(r(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(QO(e,r))},aj=(r,t,e,n)=>{const a=Object.entries(r),o=a.length;for(let c=0;c<o;c++){const[h,d]=a[c];uA(d,tk(t,h),e,n)}},tk=(r,t)=>{let e=r;const n=t.split(wy),a=n.length;for(let o=0;o<a;o++){const c=n[o];let h=e.nextPart.get(c);h||(h=ZT(),e.nextPart.set(c,h)),e=h}return e},oj=r=>"isThemeGetter"in r&&r.isThemeGetter===!0,lj=r=>{if(r<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const a=(o,c)=>{e[o]=c,t++,t>r&&(t=0,n=e,e=Object.create(null))};return{get(o){let c=e[o];if(c!==void 0)return c;if((c=n[o])!==void 0)return a(o,c),c},set(o,c){o in e?e[o]=c:a(o,c)}}},Sw="!",hC=":",cj=[],dC=(r,t,e,n,a)=>({modifiers:r,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:a}),uj=r=>{const{prefix:t,experimentalParseClassName:e}=r;let n=a=>{const o=[];let c=0,h=0,d=0,p;const m=a.length;for(let S=0;S<m;S++){const R=a[S];if(c===0&&h===0){if(R===hC){o.push(a.slice(d,S)),d=S+1;continue}if(R==="/"){p=S;continue}}R==="["?c++:R==="]"?c--:R==="("?h++:R===")"&&h--}const b=o.length===0?a:a.slice(d);let v=b,w=!1;b.endsWith(Sw)?(v=b.slice(0,-1),w=!0):b.startsWith(Sw)&&(v=b.slice(1),w=!0);const A=p&&p>d?p-d:void 0;return dC(o,w,v,A)};if(t){const a=t+hC,o=n;n=c=>c.startsWith(a)?o(c.slice(a.length)):dC(cj,!1,c,void 0,!0)}if(e){const a=n;n=o=>e({className:o,parseClassName:a})}return n},hj=r=>{const t=new Map;return r.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let a=[];for(let o=0;o<e.length;o++){const c=e[o],h=c[0]==="[",d=t.has(c);h||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(c)):a.push(c)}return a.length>0&&(a.sort(),n.push(...a)),n}},dj=r=>({cache:lj(r.cacheSize),parseClassName:uj(r),sortModifiers:hj(r),...JO(r)}),fj=/\s+/,pj=(r,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:o}=t,c=[],h=r.trim().split(fj);let d="";for(let p=h.length-1;p>=0;p-=1){const m=h[p],{isExternal:b,modifiers:v,hasImportantModifier:w,baseClassName:A,maybePostfixModifierPosition:S}=e(m);if(b){d=m+(d.length>0?" "+d:d);continue}let R=!!S,M=n(R?A.substring(0,S):A);if(!M){if(!R){d=m+(d.length>0?" "+d:d);continue}if(M=n(A),!M){d=m+(d.length>0?" "+d:d);continue}R=!1}const D=v.length===0?"":v.length===1?v[0]:o(v).join(":"),O=w?D+Sw:D,I=O+M;if(c.indexOf(I)>-1)continue;c.push(I);const U=a(M,R);for(let P=0;P<U.length;++P){const H=U[P];c.push(O+H)}d=m+(d.length>0?" "+d:d)}return d},gj=(...r)=>{let t=0,e,n,a="";for(;t<r.length;)(e=r[t++])&&(n=ek(e))&&(a&&(a+=" "),a+=n);return a},ek=r=>{if(typeof r=="string")return r;let t,e="";for(let n=0;n<r.length;n++)r[n]&&(t=ek(r[n]))&&(e&&(e+=" "),e+=t);return e},mj=(r,...t)=>{let e,n,a,o;const c=d=>{const p=t.reduce((m,b)=>b(m),r());return e=dj(p),n=e.cache.get,a=e.cache.set,o=h,h(d)},h=d=>{const p=n(d);if(p)return p;const m=pj(d,e);return a(d,m),m};return o=c,(...d)=>o(gj(...d))},yj=[],Ke=r=>{const t=e=>e[r]||yj;return t.isThemeGetter=!0,t},nk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ik=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bj=/^\d+\/\d+$/,vj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_j=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Aj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Sj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tu=r=>bj.test(r),zt=r=>!!r&&!Number.isNaN(Number(r)),Ia=r=>!!r&&Number.isInteger(Number(r)),Q0=r=>r.endsWith("%")&&zt(r.slice(0,-1)),Er=r=>vj.test(r),Ej=()=>!0,xj=r=>wj.test(r)&&!_j.test(r),sk=()=>!1,Cj=r=>Aj.test(r),Tj=r=>Sj.test(r),kj=r=>!pt(r)&&!gt(r),Rj=r=>xh(r,ok,sk),pt=r=>nk.test(r),$o=r=>xh(r,lk,xj),Z0=r=>xh(r,Oj,zt),fC=r=>xh(r,rk,sk),Mj=r=>xh(r,ak,Tj),Am=r=>xh(r,ck,Cj),gt=r=>ik.test(r),Rd=r=>Ch(r,lk),Lj=r=>Ch(r,jj),pC=r=>Ch(r,rk),Dj=r=>Ch(r,ok),Nj=r=>Ch(r,ak),Sm=r=>Ch(r,ck,!0),xh=(r,t,e)=>{const n=nk.exec(r);return n?n[1]?t(n[1]):e(n[2]):!1},Ch=(r,t,e=!1)=>{const n=ik.exec(r);return n?n[1]?t(n[1]):e:!1},rk=r=>r==="position"||r==="percentage",ak=r=>r==="image"||r==="url",ok=r=>r==="length"||r==="size"||r==="bg-size",lk=r=>r==="length",Oj=r=>r==="number",jj=r=>r==="family-name",ck=r=>r==="shadow",zj=()=>{const r=Ke("color"),t=Ke("font"),e=Ke("text"),n=Ke("font-weight"),a=Ke("tracking"),o=Ke("leading"),c=Ke("breakpoint"),h=Ke("container"),d=Ke("spacing"),p=Ke("radius"),m=Ke("shadow"),b=Ke("inset-shadow"),v=Ke("text-shadow"),w=Ke("drop-shadow"),A=Ke("blur"),S=Ke("perspective"),R=Ke("aspect"),M=Ke("ease"),D=Ke("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],U=()=>[...I(),gt,pt],P=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto","contain","none"],K=()=>[gt,pt,d],tt=()=>[tu,"full","auto",...K()],nt=()=>[Ia,"none","subgrid",gt,pt],rt=()=>["auto",{span:["full",Ia,gt,pt]},Ia,gt,pt],mt=()=>[Ia,"auto",gt,pt],At=()=>["auto","min","max","fr",gt,pt],dt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],st=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...K()],G=()=>[tu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...K()],V=()=>[r,gt,pt],xt=()=>[...I(),pC,fC,{position:[gt,pt]}],Tt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],N=()=>["auto","cover","contain",Dj,Rj,{size:[gt,pt]}],q=()=>[Q0,Rd,$o],Q=()=>["","none","full",p,gt,pt],it=()=>["",zt,Rd,$o],ht=()=>["solid","dashed","dotted","double"],bt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ot=()=>[zt,Q0,pC,fC],Pt=()=>["","none",A,gt,pt],Ot=()=>["none",zt,gt,pt],Bt=()=>["none",zt,gt,pt],Rn=()=>[zt,gt,pt],Mn=()=>[tu,"full",...K()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Er],breakpoint:[Er],color:[Ej],container:[Er],"drop-shadow":[Er],ease:["in","out","in-out"],font:[kj],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Er],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Er],shadow:[Er],spacing:["px",zt],text:[Er],"text-shadow":[Er],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",tu,pt,gt,R]}],container:["container"],columns:[{columns:[zt,pt,gt,h]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:U()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:tt()}],"inset-x":[{"inset-x":tt()}],"inset-y":[{"inset-y":tt()}],start:[{start:tt()}],end:[{end:tt()}],top:[{top:tt()}],right:[{right:tt()}],bottom:[{bottom:tt()}],left:[{left:tt()}],visibility:["visible","invisible","collapse"],z:[{z:[Ia,"auto",gt,pt]}],basis:[{basis:[tu,"full","auto",h,...K()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[zt,tu,"auto","initial","none",pt]}],grow:[{grow:["",zt,gt,pt]}],shrink:[{shrink:["",zt,gt,pt]}],order:[{order:[Ia,"first","last","none",gt,pt]}],"grid-cols":[{"grid-cols":nt()}],"col-start-end":[{col:rt()}],"col-start":[{"col-start":mt()}],"col-end":[{"col-end":mt()}],"grid-rows":[{"grid-rows":nt()}],"row-start-end":[{row:rt()}],"row-start":[{"row-start":mt()}],"row-end":[{"row-end":mt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":At()}],"auto-rows":[{"auto-rows":At()}],gap:[{gap:K()}],"gap-x":[{"gap-x":K()}],"gap-y":[{"gap-y":K()}],"justify-content":[{justify:[...dt(),"normal"]}],"justify-items":[{"justify-items":[...st(),"normal"]}],"justify-self":[{"justify-self":["auto",...st()]}],"align-content":[{content:["normal",...dt()]}],"align-items":[{items:[...st(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...st(),{baseline:["","last"]}]}],"place-content":[{"place-content":dt()}],"place-items":[{"place-items":[...st(),"baseline"]}],"place-self":[{"place-self":["auto",...st()]}],p:[{p:K()}],px:[{px:K()}],py:[{py:K()}],ps:[{ps:K()}],pe:[{pe:K()}],pt:[{pt:K()}],pr:[{pr:K()}],pb:[{pb:K()}],pl:[{pl:K()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":K()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":K()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[h,"screen",...G()]}],"min-w":[{"min-w":[h,"screen","none",...G()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",e,Rd,$o]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,gt,Z0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Q0,pt]}],"font-family":[{font:[Lj,pt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,gt,pt]}],"line-clamp":[{"line-clamp":[zt,"none",gt,Z0]}],leading:[{leading:[o,...K()]}],"list-image":[{"list-image":["none",gt,pt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",gt,pt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ht(),"wavy"]}],"text-decoration-thickness":[{decoration:[zt,"from-font","auto",gt,$o]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[zt,"auto",gt,pt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gt,pt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gt,pt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:xt()}],"bg-repeat":[{bg:Tt()}],"bg-size":[{bg:N()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ia,gt,pt],radial:["",gt,pt],conic:[Ia,gt,pt]},Nj,Mj]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:it()}],"border-w-x":[{"border-x":it()}],"border-w-y":[{"border-y":it()}],"border-w-s":[{"border-s":it()}],"border-w-e":[{"border-e":it()}],"border-w-t":[{"border-t":it()}],"border-w-r":[{"border-r":it()}],"border-w-b":[{"border-b":it()}],"border-w-l":[{"border-l":it()}],"divide-x":[{"divide-x":it()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":it()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ht(),"hidden","none"]}],"divide-style":[{divide:[...ht(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...ht(),"none","hidden"]}],"outline-offset":[{"outline-offset":[zt,gt,pt]}],"outline-w":[{outline:["",zt,Rd,$o]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",m,Sm,Am]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",b,Sm,Am]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:it()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[zt,$o]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":it()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",v,Sm,Am]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[zt,gt,pt]}],"mix-blend":[{"mix-blend":[...bt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":bt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[zt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ot()}],"mask-image-linear-to-pos":[{"mask-linear-to":ot()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":ot()}],"mask-image-t-to-pos":[{"mask-t-to":ot()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":ot()}],"mask-image-r-to-pos":[{"mask-r-to":ot()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":ot()}],"mask-image-b-to-pos":[{"mask-b-to":ot()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":ot()}],"mask-image-l-to-pos":[{"mask-l-to":ot()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":ot()}],"mask-image-x-to-pos":[{"mask-x-to":ot()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":ot()}],"mask-image-y-to-pos":[{"mask-y-to":ot()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[gt,pt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ot()}],"mask-image-radial-to-pos":[{"mask-radial-to":ot()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[zt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ot()}],"mask-image-conic-to-pos":[{"mask-conic-to":ot()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:xt()}],"mask-repeat":[{mask:Tt()}],"mask-size":[{mask:N()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",gt,pt]}],filter:[{filter:["","none",gt,pt]}],blur:[{blur:Pt()}],brightness:[{brightness:[zt,gt,pt]}],contrast:[{contrast:[zt,gt,pt]}],"drop-shadow":[{"drop-shadow":["","none",w,Sm,Am]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",zt,gt,pt]}],"hue-rotate":[{"hue-rotate":[zt,gt,pt]}],invert:[{invert:["",zt,gt,pt]}],saturate:[{saturate:[zt,gt,pt]}],sepia:[{sepia:["",zt,gt,pt]}],"backdrop-filter":[{"backdrop-filter":["","none",gt,pt]}],"backdrop-blur":[{"backdrop-blur":Pt()}],"backdrop-brightness":[{"backdrop-brightness":[zt,gt,pt]}],"backdrop-contrast":[{"backdrop-contrast":[zt,gt,pt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",zt,gt,pt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[zt,gt,pt]}],"backdrop-invert":[{"backdrop-invert":["",zt,gt,pt]}],"backdrop-opacity":[{"backdrop-opacity":[zt,gt,pt]}],"backdrop-saturate":[{"backdrop-saturate":[zt,gt,pt]}],"backdrop-sepia":[{"backdrop-sepia":["",zt,gt,pt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":K()}],"border-spacing-x":[{"border-spacing-x":K()}],"border-spacing-y":[{"border-spacing-y":K()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",gt,pt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[zt,"initial",gt,pt]}],ease:[{ease:["linear","initial",M,gt,pt]}],delay:[{delay:[zt,gt,pt]}],animate:[{animate:["none",D,gt,pt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,gt,pt]}],"perspective-origin":[{"perspective-origin":U()}],rotate:[{rotate:Ot()}],"rotate-x":[{"rotate-x":Ot()}],"rotate-y":[{"rotate-y":Ot()}],"rotate-z":[{"rotate-z":Ot()}],scale:[{scale:Bt()}],"scale-x":[{"scale-x":Bt()}],"scale-y":[{"scale-y":Bt()}],"scale-z":[{"scale-z":Bt()}],"scale-3d":["scale-3d"],skew:[{skew:Rn()}],"skew-x":[{"skew-x":Rn()}],"skew-y":[{"skew-y":Rn()}],transform:[{transform:[gt,pt,"","none","gpu","cpu"]}],"transform-origin":[{origin:U()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Mn()}],"translate-x":[{"translate-x":Mn()}],"translate-y":[{"translate-y":Mn()}],"translate-z":[{"translate-z":Mn()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gt,pt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gt,pt]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[zt,Rd,$o,Z0]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Pj=mj(zj);function ia(...r){return Pj(Eh(r))}function Fj(r){return new Date(r).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})}function Ij(r){return r.slice(r.lastIndexOf(".")+1).toLowerCase()}function uk(r){const t=Ij(r);return{tex:"",typ:"",pdf:"",png:"",jpg:"",jpeg:"",gif:"",svg:"",bib:"",txt:"",md:""}[t]||""}/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uj=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),gC=r=>{const t=Uj(r);return t.charAt(0).toUpperCase()+t.slice(1)},hk=(...r)=>r.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),Hj=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=L.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:c,...h},d)=>L.createElement("svg",{ref:d,...qj,width:t,height:t,stroke:r,strokeWidth:n?Number(e)*24/Number(t):e,className:hk("lucide",a),...!o&&!Hj(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,m])=>L.createElement(p,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(r,t)=>{const e=L.forwardRef(({className:n,...a},o)=>L.createElement(Vj,{ref:o,iconNode:t,className:hk(`lucide-${Bj(gC(r))}`,`lucide-${r}`,n),...a}));return e.displayName=gC(r),e};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xj=de("check",Gj);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dk=de("chevron-left",Yj);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Kj=de("chevron-right",$j);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qj=de("clock",Wj);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Jj=de("copy",Zj);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mC=de("download",t3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],n3=de("eye-off",e3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yC=de("eye",i3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],Jl=de("file-code-corner",s3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],bC=de("file-text",r3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],hA=de("folder-open",a3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],l3=de("folder",o3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],u3=de("loader-circle",c3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],d3=de("log-out",h3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],fk=de("moon",f3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],g3=de("panel-left-close",p3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],y3=de("panel-left",m3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],v3=de("play",b3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vC=de("plus",w3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],A3=de("save",_3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],E3=de("share-2",S3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],C3=de("sparkles",x3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],pk=de("sun",T3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gk=de("trash-2",k3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],M3=de("user-plus",R3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],mk=de("users",L3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],N3=de("x",D3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],j3=de("zoom-in",O3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],P3=de("zoom-out",z3);function ws({className:r,size:t="md"}){const e={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return E.jsx(u3,{className:ia("animate-spin text-primary",e[t],r)})}function yk({message:r="ang ti..."}){return E.jsx("div",{className:"flex h-full w-full items-center justify-center bg-background",children:E.jsxs("div",{className:"flex flex-col items-center gap-4",children:[E.jsx(ws,{size:"lg"}),E.jsx("p",{className:"text-muted-foreground",children:r})]})})}const wC=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,_C=Eh,F3=(r,t)=>e=>{var n;if((t==null?void 0:t.variants)==null)return _C(r,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:a,defaultVariants:o}=t,c=Object.keys(a).map(p=>{const m=e==null?void 0:e[p],b=o==null?void 0:o[p];if(m===null)return null;const v=wC(m)||wC(b);return a[p][v]}),h=e&&Object.entries(e).reduce((p,m)=>{let[b,v]=m;return v===void 0||(p[b]=v),p},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((p,m)=>{let{class:b,className:v,...w}=m;return Object.entries(w).every(A=>{let[S,R]=A;return Array.isArray(R)?R.includes({...o,...h}[S]):{...o,...h}[S]===R})?[...p,b,v]:p},[]);return _C(r,c,d,e==null?void 0:e.class,e==null?void 0:e.className)},I3=F3("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Te=L.forwardRef(({className:r,variant:t,size:e,...n},a)=>E.jsx("button",{className:ia(I3({variant:t,size:e,className:r})),ref:a,...n}));Te.displayName="Button";const fo=L.forwardRef(({className:r,type:t,label:e,error:n,...a},o)=>E.jsxs("div",{className:"space-y-1.5",children:[e&&E.jsx("label",{className:"text-sm font-medium text-foreground",children:e}),E.jsx("input",{type:t,className:ia("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",n&&"border-destructive focus-visible:ring-destructive",r),ref:o,...a}),n&&E.jsx("p",{className:"text-sm text-destructive",children:n})]}));fo.displayName="Input";function B3(){const r=Sh(),{login:t}=uc(),[e,n]=L.useState(""),[a,o]=L.useState(""),[c,h]=L.useState(""),[d,p]=L.useState(!1),m=async b=>{b.preventDefault(),h(""),p(!0);try{await t(e,a),r("/dashboard")}catch(v){h(v instanceof Error?v.message:"ng nhp tht bi")}finally{p(!1)}};return E.jsxs("div",{className:"flex min-h-screen",children:[E.jsx("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary/20 via-primary/10 to-background items-center justify-center p-12",children:E.jsxs("div",{className:"max-w-md space-y-6",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"p-3 rounded-xl bg-primary/20",children:E.jsx(Jl,{className:"h-10 w-10 text-primary"})}),E.jsx("span",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"HeyTeX"})]}),E.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Bin tp LaTeX & Typst chuyn nghip"}),E.jsx("p",{className:"text-lg text-muted-foreground",children:"Tri nghim giao din ging VS Code, bin dch Wasm siu tc, v cng tc thi gian thc vi ng nghip."}),E.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[E.jsx(C3,{className:"h-5 w-5"}),E.jsx("span",{children:"Powered by WebAssembly"})]})]})}),E.jsx("div",{className:"flex w-full lg:w-1/2 items-center justify-center p-8",children:E.jsxs("div",{className:"w-full max-w-md space-y-8",children:[E.jsxs("div",{className:"text-center lg:text-left",children:[E.jsxs("div",{className:"flex items-center gap-2 justify-center lg:hidden mb-8",children:[E.jsx(Jl,{className:"h-8 w-8 text-primary"}),E.jsx("span",{className:"text-2xl font-bold",children:"HeyTeX"})]}),E.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"ng nhp"}),E.jsx("p",{className:"mt-2 text-muted-foreground",children:"Cho mng bn quay li! Vui lng nhp thng tin ng nhp."})]}),E.jsxs("form",{onSubmit:m,className:"space-y-6",children:[c&&E.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:c}),E.jsx(fo,{label:"Email",type:"email",placeholder:"email@example.com",value:e,onChange:b=>n(b.target.value),required:!0,autoComplete:"email"}),E.jsx(fo,{label:"Mt khu",type:"password",placeholder:"",value:a,onChange:b=>o(b.target.value),required:!0,autoComplete:"current-password"}),E.jsx(Te,{type:"submit",className:"w-full",disabled:d,children:d?E.jsx(ws,{size:"sm"}):"ng nhp"})]}),E.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Cha c ti khon?"," ",E.jsx(ab,{to:"/register",className:"text-primary hover:underline font-medium",children:"ng k ngay"})]})]})})]})}function U3(){const r=Sh(),{register:t}=uc(),[e,n]=L.useState(""),[a,o]=L.useState(""),[c,h]=L.useState(""),[d,p]=L.useState(""),[m,b]=L.useState(""),[v,w]=L.useState(!1),A=async S=>{if(S.preventDefault(),b(""),c!==d){b("Mt khu xc nhn khng khp");return}if(c.length<6){b("Mt khu phi c t nht 6 k t");return}w(!0);try{await t(a,c,e),r("/dashboard")}catch(R){b(R instanceof Error?R.message:"ng k tht bi")}finally{w(!1)}};return E.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-8",children:E.jsxs("div",{className:"w-full max-w-md space-y-8",children:[E.jsxs("div",{className:"text-center",children:[E.jsxs("div",{className:"flex items-center gap-2 justify-center mb-6",children:[E.jsx(Jl,{className:"h-10 w-10 text-primary"}),E.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"HeyTeX"})]}),E.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"To ti khon mi"}),E.jsx("p",{className:"mt-2 text-muted-foreground",children:"Bt u hnh trnh bin tp ti liu chuyn nghip"})]}),E.jsx("div",{className:"glass rounded-2xl p-8 shadow-xl",children:E.jsxs("form",{onSubmit:A,className:"space-y-5",children:[m&&E.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:m}),E.jsx(fo,{label:"H v tn",type:"text",placeholder:"Nguyn Vn A",value:e,onChange:S=>n(S.target.value),required:!0,autoComplete:"name"}),E.jsx(fo,{label:"Email",type:"email",placeholder:"email@example.com",value:a,onChange:S=>o(S.target.value),required:!0,autoComplete:"email"}),E.jsx(fo,{label:"Mt khu",type:"password",placeholder:"",value:c,onChange:S=>h(S.target.value),required:!0,autoComplete:"new-password"}),E.jsx(fo,{label:"Xc nhn mt khu",type:"password",placeholder:"",value:d,onChange:S=>p(S.target.value),required:!0,autoComplete:"new-password"}),E.jsx(Te,{type:"submit",className:"w-full",disabled:v,children:v?E.jsx(ws,{size:"sm"}):"ng k"})]})}),E.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[" c ti khon?"," ",E.jsx(ab,{to:"/login",className:"text-primary hover:underline font-medium",children:"ng nhp"})]})]})})}function H3(){var U;const r=Sh(),{user:t,logout:e}=uc(),{theme:n,toggleTheme:a}=WT(),[o,c]=L.useState([]),[h,d]=L.useState(!0),[p,m]=L.useState(!1),[b,v]=L.useState(""),[w,A]=L.useState("TYPST"),[S,R]=L.useState(!1);L.useEffect(()=>{M()},[]);const M=async()=>{try{const{projects:P}=await Cn.getProjects();c(P)}catch(P){console.error("Failed to load projects:",P)}finally{d(!1)}},D=async P=>{if(P.preventDefault(),!!b.trim()){R(!0);try{const{project:H}=await Cn.createProject({name:b,engine:w});c([H,...o]),m(!1),v(""),r(`/editor/${H.id}`)}catch(H){console.error("Failed to create project:",H)}finally{R(!1)}}},O=async P=>{if(confirm("Bn c chc mun xa d n ny?"))try{await Cn.deleteProject(P),c(o.filter(H=>H.id!==P))}catch(H){console.error("Failed to delete project:",H)}},I=()=>{e(),r("/login")};return h?E.jsx("div",{className:"h-screen flex items-center justify-center",children:E.jsx(ws,{size:"lg"})}):E.jsxs("div",{className:"min-h-screen bg-background",children:[E.jsx("header",{className:"sticky top-0 z-50 glass border-b",children:E.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Jl,{className:"h-8 w-8 text-primary"}),E.jsx("span",{className:"text-xl font-bold",children:"HeyTeX"})]}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx(Te,{variant:"ghost",size:"icon",onClick:a,children:n==="dark"?E.jsx(pk,{className:"h-5 w-5"}):E.jsx(fk,{className:"h-5 w-5"})}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:E.jsx("span",{className:"text-sm font-medium text-primary",children:(U=t==null?void 0:t.name)==null?void 0:U.charAt(0).toUpperCase()})}),E.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:t==null?void 0:t.name})]}),E.jsx(Te,{variant:"ghost",size:"icon",onClick:I,children:E.jsx(d3,{className:"h-5 w-5"})})]})]})}),E.jsxs("main",{className:"container mx-auto px-6 py-8",children:[E.jsxs("div",{className:"flex items-center justify-between mb-8",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"D n ca ti"}),E.jsx("p",{className:"text-muted-foreground mt-1",children:"Qun l v bin tp cc ti liu LaTeX/Typst ca bn"})]}),E.jsxs(Te,{onClick:()=>m(!0),className:"gap-2",children:[E.jsx(vC,{className:"h-4 w-4"}),"To d n mi"]})]}),o.length===0?E.jsxs("div",{className:"text-center py-16",children:[E.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-muted flex items-center justify-center",children:E.jsx(hA,{className:"h-10 w-10 text-muted-foreground"})}),E.jsx("h3",{className:"text-xl font-medium text-foreground mb-2",children:"Cha c d n no"}),E.jsx("p",{className:"text-muted-foreground mb-6",children:"Bt u bng cch to d n LaTeX hoc Typst u tin ca bn"}),E.jsxs(Te,{onClick:()=>m(!0),children:[E.jsx(vC,{className:"h-4 w-4 mr-2"}),"To d n u tin"]})]}):E.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:o.map(P=>E.jsxs("div",{className:"group relative glass rounded-xl p-5 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>r(`/editor/${P.id}`),children:[E.jsxs("div",{className:"flex items-start justify-between mb-4",children:[E.jsx("div",{className:`p-2 rounded-lg ${P.engine==="TYPST"?"bg-cyan-500/20 text-cyan-500":"bg-orange-500/20 text-orange-500"}`,children:E.jsx(Jl,{className:"h-5 w-5"})}),E.jsx("button",{onClick:H=>{H.stopPropagation(),O(P.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-destructive/20 rounded transition-all",children:E.jsx(gk,{className:"h-4 w-4 text-destructive"})})]}),E.jsx("h3",{className:"font-semibold text-foreground mb-1 truncate",children:P.name}),E.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-3",children:[E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx(Qj,{className:"h-3 w-3"}),Fj(P.updatedAt)]}),E.jsx("span",{className:`px-2 py-0.5 rounded-full ${P.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:P.engine})]})]},P.id))})]}),p&&E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:E.jsxs("div",{className:"glass rounded-2xl p-6 w-full max-w-md mx-4 animate-fade-in",children:[E.jsx("h2",{className:"text-xl font-bold mb-4",children:"To d n mi"}),E.jsxs("form",{onSubmit:D,className:"space-y-4",children:[E.jsx(fo,{label:"Tn d n",placeholder:"Lun vn tt nghip",value:b,onChange:P=>v(P.target.value),required:!0,autoFocus:!0}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-sm font-medium",children:"Chn Engine"}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("button",{type:"button",onClick:()=>A("TYPST"),className:`p-4 rounded-lg border-2 transition-all ${w==="TYPST"?"border-cyan-500 bg-cyan-500/10":"border-border hover:border-muted-foreground"}`,children:[E.jsx("div",{className:"font-medium text-cyan-500",children:"Typst"}),E.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Nhanh, hin i"})]}),E.jsxs("button",{type:"button",onClick:()=>A("LATEX"),className:`p-4 rounded-lg border-2 transition-all ${w==="LATEX"?"border-orange-500 bg-orange-500/10":"border-border hover:border-muted-foreground"}`,children:[E.jsx("div",{className:"font-medium text-orange-500",children:"LaTeX"}),E.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Mnh m, truyn thng"})]})]})]}),E.jsxs("div",{className:"flex gap-3 pt-4",children:[E.jsx(Te,{type:"button",variant:"outline",className:"flex-1",onClick:()=>m(!1),children:"Hy"}),E.jsx(Te,{type:"submit",className:"flex-1",disabled:S,children:S?E.jsx(ws,{size:"sm"}):"To d n"})]})]})]})})]})}const q3="modulepreload",V3=function(r){return"/"+r},AC={},nl=function(t,e,n){let a=Promise.resolve();if(e&&e.length>0){let c=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=c(e.map(p=>{if(p=V3(p),p in AC)return;AC[p]=!0;const m=p.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":q3,m||(v.as="script"),v.crossOrigin="",v.href=p,d&&v.setAttribute("nonce",d),document.head.appendChild(v),m)return new Promise((w,A)=>{v.addEventListener("load",w),v.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return t().catch(o)})};function SC(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function G3(r){if(Array.isArray(r))return r}function X3(r,t,e){return(t=J3(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Y3(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n,a,o,c,h=[],d=!0,p=!1;try{if(o=(e=e.call(r)).next,t!==0)for(;!(d=(n=o.call(e)).done)&&(h.push(n.value),h.length!==t);d=!0);}catch(m){p=!0,a=m}finally{try{if(!d&&e.return!=null&&(c=e.return(),Object(c)!==c))return}finally{if(p)throw a}}return h}}function $3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EC(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function xC(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(e),!0).forEach(function(n){X3(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):EC(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function K3(r,t){if(r==null)return{};var e,n,a=W3(r,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)e=o[n],t.indexOf(e)===-1&&{}.propertyIsEnumerable.call(r,e)&&(a[e]=r[e])}return a}function W3(r,t){if(r==null)return{};var e={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(t.indexOf(n)!==-1)continue;e[n]=r[n]}return e}function Q3(r,t){return G3(r)||Y3(r,t)||tz(r,t)||$3()}function Z3(r,t){if(typeof r!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function J3(r){var t=Z3(r,"string");return typeof t=="symbol"?t:t+""}function tz(r,t){if(r){if(typeof r=="string")return SC(r,t);var e={}.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?SC(r,t):void 0}}function ez(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function CC(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function TC(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(e),!0).forEach(function(n){ez(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):CC(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function nz(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return function(n){return t.reduceRight(function(a,o){return o(a)},n)}}function Od(r){return function t(){for(var e=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=r.length?r.apply(this,a):function(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];return t.apply(e,[].concat(a,h))}}}function _y(r){return{}.toString.call(r).includes("Object")}function iz(r){return!Object.keys(r).length}function sf(r){return typeof r=="function"}function sz(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function rz(r,t){return _y(t)||go("changeType"),Object.keys(t).some(function(e){return!sz(r,e)})&&go("changeField"),t}function az(r){sf(r)||go("selectorType")}function oz(r){sf(r)||_y(r)||go("handlerType"),_y(r)&&Object.values(r).some(function(t){return!sf(t)})&&go("handlersType")}function lz(r){r||go("initialIsRequired"),_y(r)||go("initialType"),iz(r)&&go("initialContent")}function cz(r,t){throw new Error(r[t]||r.default)}var uz={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},go=Od(cz)(uz),Em={changes:rz,selector:az,handler:oz,initial:lz};function hz(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Em.initial(r),Em.handler(t);var e={current:r},n=Od(pz)(e,t),a=Od(fz)(e),o=Od(Em.changes)(r),c=Od(dz)(e);function h(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return Em.selector(p),p(e.current)}function d(p){nz(n,a,o,c)(p)}return[h,d]}function dz(r,t){return sf(t)?t(r.current):t}function fz(r,t){return r.current=TC(TC({},r.current),t),t}function pz(r,t,e){return sf(t)?t(r.current):Object.keys(e).forEach(function(n){var a;return(a=t[n])===null||a===void 0?void 0:a.call(t,r.current[n])}),e}var gz={create:hz},mz={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function yz(r){return function t(){for(var e=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=r.length?r.apply(this,a):function(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];return t.apply(e,[].concat(a,h))}}}function bz(r){return{}.toString.call(r).includes("Object")}function vz(r){return r||kC("configIsRequired"),bz(r)||kC("configType"),r.urls?(wz(),{paths:{vs:r.urls.monacoBase}}):r}function wz(){console.warn(bk.deprecation)}function _z(r,t){throw new Error(r[t]||r.default)}var bk={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},kC=yz(_z)(bk),Az={config:vz},Sz=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(a){return e.reduceRight(function(o,c){return c(o)},a)}};function vk(r,t){return Object.keys(t).forEach(function(e){t[e]instanceof Object&&r[e]&&Object.assign(t[e],vk(r[e],t[e]))}),xC(xC({},r),t)}var Ez={type:"cancelation",msg:"operation is manually canceled"};function J0(r){var t=!1,e=new Promise(function(n,a){r.then(function(o){return t?a(Ez):n(o)}),r.catch(a)});return e.cancel=function(){return t=!0},e}var xz=["monaco"],Cz=gz.create({config:mz,isInitialized:!1,resolve:null,reject:null,monaco:null}),wk=Q3(Cz,2),$p=wk[0],ob=wk[1];function Tz(r){var t=Az.config(r),e=t.monaco,n=K3(t,xz);ob(function(a){return{config:vk(a.config,n),monaco:e}})}function kz(){var r=$p(function(t){var e=t.monaco,n=t.isInitialized,a=t.resolve;return{monaco:e,isInitialized:n,resolve:a}});if(!r.isInitialized){if(ob({isInitialized:!0}),r.monaco)return r.resolve(r.monaco),J0(tw);if(window.monaco&&window.monaco.editor)return _k(window.monaco),r.resolve(window.monaco),J0(tw);Sz(Rz,Lz)(Dz)}return J0(tw)}function Rz(r){return document.body.appendChild(r)}function Mz(r){var t=document.createElement("script");return r&&(t.src=r),t}function Lz(r){var t=$p(function(n){var a=n.config,o=n.reject;return{config:a,reject:o}}),e=Mz("".concat(t.config.paths.vs,"/loader.js"));return e.onload=function(){return r()},e.onerror=t.reject,e}function Dz(){var r=$p(function(e){var n=e.config,a=e.resolve,o=e.reject;return{config:n,resolve:a,reject:o}}),t=window.require;t.config(r.config),t(["vs/editor/editor.main"],function(e){var n=e.m||e;_k(n),r.resolve(n)},function(e){r.reject(e)})}function _k(r){$p().monaco||ob({monaco:r})}function Nz(){return $p(function(r){var t=r.monaco;return t})}var tw=new Promise(function(r,t){return ob({resolve:r,reject:t})}),Ak={config:Tz,init:kz,__getMonacoInstance:Nz},Oz={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ew=Oz,jz={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},zz=jz;function Pz({children:r}){return Ks.createElement("div",{style:zz.container},r)}var Fz=Pz,Iz=Fz;function Bz({width:r,height:t,isEditorReady:e,loading:n,_ref:a,className:o,wrapperProps:c}){return Ks.createElement("section",{style:{...ew.wrapper,width:r,height:t},...c},!e&&Ks.createElement(Iz,null,n),Ks.createElement("div",{ref:a,style:{...ew.fullWidth,...!e&&ew.hide},className:o}))}var Uz=Bz,Sk=L.memo(Uz);function Hz(r){L.useEffect(r,[])}var Ek=Hz;function qz(r,t,e=!0){let n=L.useRef(!0);L.useEffect(n.current||!e?()=>{n.current=!1}:r,t)}var Ri=qz;function Qd(){}function lu(r,t,e,n){return Vz(r,n)||Gz(r,t,e,n)}function Vz(r,t){return r.editor.getModel(xk(r,t))}function Gz(r,t,e,n){return r.editor.createModel(t,e,n?xk(r,n):void 0)}function xk(r,t){return r.Uri.parse(t)}function Xz({original:r,modified:t,language:e,originalLanguage:n,modifiedLanguage:a,originalModelPath:o,modifiedModelPath:c,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:d=!1,theme:p="light",loading:m="Loading...",options:b={},height:v="100%",width:w="100%",className:A,wrapperProps:S={},beforeMount:R=Qd,onMount:M=Qd}){let[D,O]=L.useState(!1),[I,U]=L.useState(!0),P=L.useRef(null),H=L.useRef(null),K=L.useRef(null),tt=L.useRef(M),nt=L.useRef(R),rt=L.useRef(!1);Ek(()=>{let st=Ak.init();return st.then(F=>(H.current=F)&&U(!1)).catch(F=>(F==null?void 0:F.type)!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>P.current?dt():st.cancel()}),Ri(()=>{if(P.current&&H.current){let st=P.current.getOriginalEditor(),F=lu(H.current,r||"",n||e||"text",o||"");F!==st.getModel()&&st.setModel(F)}},[o],D),Ri(()=>{if(P.current&&H.current){let st=P.current.getModifiedEditor(),F=lu(H.current,t||"",a||e||"text",c||"");F!==st.getModel()&&st.setModel(F)}},[c],D),Ri(()=>{let st=P.current.getModifiedEditor();st.getOption(H.current.editor.EditorOption.readOnly)?st.setValue(t||""):t!==st.getValue()&&(st.executeEdits("",[{range:st.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),st.pushUndoStop())},[t],D),Ri(()=>{var st,F;(F=(st=P.current)==null?void 0:st.getModel())==null||F.original.setValue(r||"")},[r],D),Ri(()=>{let{original:st,modified:F}=P.current.getModel();H.current.editor.setModelLanguage(st,n||e||"text"),H.current.editor.setModelLanguage(F,a||e||"text")},[e,n,a],D),Ri(()=>{var st;(st=H.current)==null||st.editor.setTheme(p)},[p],D),Ri(()=>{var st;(st=P.current)==null||st.updateOptions(b)},[b],D);let mt=L.useCallback(()=>{var G;if(!H.current)return;nt.current(H.current);let st=lu(H.current,r||"",n||e||"text",o||""),F=lu(H.current,t||"",a||e||"text",c||"");(G=P.current)==null||G.setModel({original:st,modified:F})},[e,t,a,r,n,o,c]),At=L.useCallback(()=>{var st;!rt.current&&K.current&&(P.current=H.current.editor.createDiffEditor(K.current,{automaticLayout:!0,...b}),mt(),(st=H.current)==null||st.editor.setTheme(p),O(!0),rt.current=!0)},[b,p,mt]);L.useEffect(()=>{D&&tt.current(P.current,H.current)},[D]),L.useEffect(()=>{!I&&!D&&At()},[I,D,At]);function dt(){var F,G,V,xt;let st=(F=P.current)==null?void 0:F.getModel();h||((G=st==null?void 0:st.original)==null||G.dispose()),d||((V=st==null?void 0:st.modified)==null||V.dispose()),(xt=P.current)==null||xt.dispose()}return Ks.createElement(Sk,{width:w,height:v,isEditorReady:D,loading:m,_ref:K,className:A,wrapperProps:S})}var Yz=Xz;L.memo(Yz);function $z(r){let t=L.useRef();return L.useEffect(()=>{t.current=r},[r]),t.current}var Kz=$z,xm=new Map;function Wz({defaultValue:r,defaultLanguage:t,defaultPath:e,value:n,language:a,path:o,theme:c="light",line:h,loading:d="Loading...",options:p={},overrideServices:m={},saveViewState:b=!0,keepCurrentModel:v=!1,width:w="100%",height:A="100%",className:S,wrapperProps:R={},beforeMount:M=Qd,onMount:D=Qd,onChange:O,onValidate:I=Qd}){let[U,P]=L.useState(!1),[H,K]=L.useState(!0),tt=L.useRef(null),nt=L.useRef(null),rt=L.useRef(null),mt=L.useRef(D),At=L.useRef(M),dt=L.useRef(),st=L.useRef(n),F=Kz(o),G=L.useRef(!1),V=L.useRef(!1);Ek(()=>{let N=Ak.init();return N.then(q=>(tt.current=q)&&K(!1)).catch(q=>(q==null?void 0:q.type)!=="cancelation"&&console.error("Monaco initialization: error:",q)),()=>nt.current?Tt():N.cancel()}),Ri(()=>{var q,Q,it,ht;let N=lu(tt.current,r||n||"",t||a||"",o||e||"");N!==((q=nt.current)==null?void 0:q.getModel())&&(b&&xm.set(F,(Q=nt.current)==null?void 0:Q.saveViewState()),(it=nt.current)==null||it.setModel(N),b&&((ht=nt.current)==null||ht.restoreViewState(xm.get(o))))},[o],U),Ri(()=>{var N;(N=nt.current)==null||N.updateOptions(p)},[p],U),Ri(()=>{!nt.current||n===void 0||(nt.current.getOption(tt.current.editor.EditorOption.readOnly)?nt.current.setValue(n):n!==nt.current.getValue()&&(V.current=!0,nt.current.executeEdits("",[{range:nt.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),nt.current.pushUndoStop(),V.current=!1))},[n],U),Ri(()=>{var q,Q;let N=(q=nt.current)==null?void 0:q.getModel();N&&a&&((Q=tt.current)==null||Q.editor.setModelLanguage(N,a))},[a],U),Ri(()=>{var N;h!==void 0&&((N=nt.current)==null||N.revealLine(h))},[h],U),Ri(()=>{var N;(N=tt.current)==null||N.editor.setTheme(c)},[c],U);let xt=L.useCallback(()=>{var N;if(!(!rt.current||!tt.current)&&!G.current){At.current(tt.current);let q=o||e,Q=lu(tt.current,n||r||"",t||a||"",q||"");nt.current=(N=tt.current)==null?void 0:N.editor.create(rt.current,{model:Q,automaticLayout:!0,...p},m),b&&nt.current.restoreViewState(xm.get(q)),tt.current.editor.setTheme(c),h!==void 0&&nt.current.revealLine(h),P(!0),G.current=!0}},[r,t,e,n,a,o,p,m,b,c,h]);L.useEffect(()=>{U&&mt.current(nt.current,tt.current)},[U]),L.useEffect(()=>{!H&&!U&&xt()},[H,U,xt]),st.current=n,L.useEffect(()=>{var N,q;U&&O&&((N=dt.current)==null||N.dispose(),dt.current=(q=nt.current)==null?void 0:q.onDidChangeModelContent(Q=>{V.current||O(nt.current.getValue(),Q)}))},[U,O]),L.useEffect(()=>{if(U){let N=tt.current.editor.onDidChangeMarkers(q=>{var it;let Q=(it=nt.current.getModel())==null?void 0:it.uri;if(Q&&q.find(ht=>ht.path===Q.path)){let ht=tt.current.editor.getModelMarkers({resource:Q});I==null||I(ht)}});return()=>{N==null||N.dispose()}}return()=>{}},[U,I]);function Tt(){var N,q;(N=dt.current)==null||N.dispose(),v?b&&xm.set(o,nt.current.saveViewState()):(q=nt.current.getModel())==null||q.dispose(),nt.current.dispose()}return Ks.createElement(Sk,{width:w,height:A,isEditorReady:U,loading:d,_ref:rt,className:S,wrapperProps:R})}var Qz=Wz,Zz=L.memo(Qz),Jz=Zz;const er=Object.create(null);er.open="0";er.close="1";er.ping="2";er.pong="3";er.message="4";er.upgrade="5";er.noop="6";const Fm=Object.create(null);Object.keys(er).forEach(r=>{Fm[er[r]]=r});const Ew={type:"error",data:"parser error"},Ck=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Tk=typeof ArrayBuffer=="function",kk=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,dA=({type:r,data:t},e,n)=>Ck&&t instanceof Blob?e?n(t):RC(t,n):Tk&&(t instanceof ArrayBuffer||kk(t))?e?n(t):RC(new Blob([t]),n):n(er[r]+(t||"")),RC=(r,t)=>{const e=new FileReader;return e.onload=function(){const n=e.result.split(",")[1];t("b"+(n||""))},e.readAsDataURL(r)};function MC(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let nw;function tP(r,t){if(Ck&&r.data instanceof Blob)return r.data.arrayBuffer().then(MC).then(t);if(Tk&&(r.data instanceof ArrayBuffer||kk(r.data)))return t(MC(r.data));dA(r,!1,e=>{nw||(nw=new TextEncoder),t(nw.encode(e))})}const LC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<LC.length;r++)jd[LC.charCodeAt(r)]=r;const eP=r=>{let t=r.length*.75,e=r.length,n,a=0,o,c,h,d;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);const p=new ArrayBuffer(t),m=new Uint8Array(p);for(n=0;n<e;n+=4)o=jd[r.charCodeAt(n)],c=jd[r.charCodeAt(n+1)],h=jd[r.charCodeAt(n+2)],d=jd[r.charCodeAt(n+3)],m[a++]=o<<2|c>>4,m[a++]=(c&15)<<4|h>>2,m[a++]=(h&3)<<6|d&63;return p},nP=typeof ArrayBuffer=="function",fA=(r,t)=>{if(typeof r!="string")return{type:"message",data:Rk(r,t)};const e=r.charAt(0);return e==="b"?{type:"message",data:iP(r.substring(1),t)}:Fm[e]?r.length>1?{type:Fm[e],data:r.substring(1)}:{type:Fm[e]}:Ew},iP=(r,t)=>{if(nP){const e=eP(r);return Rk(e,t)}else return{base64:!0,data:r}},Rk=(r,t)=>{switch(t){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},Mk="",sP=(r,t)=>{const e=r.length,n=new Array(e);let a=0;r.forEach((o,c)=>{dA(o,!1,h=>{n[c]=h,++a===e&&t(n.join(Mk))})})},rP=(r,t)=>{const e=r.split(Mk),n=[];for(let a=0;a<e.length;a++){const o=fA(e[a],t);if(n.push(o),o.type==="error")break}return n};function aP(){return new TransformStream({transform(r,t){tP(r,e=>{const n=e.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(e)})}})}let iw;function Cm(r){return r.reduce((t,e)=>t+e.length,0)}function Tm(r,t){if(r[0].length===t)return r.shift();const e=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)e[a]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),e}function oP(r,t){iw||(iw=new TextDecoder);const e=[];let n=0,a=-1,o=!1;return new TransformStream({transform(c,h){for(e.push(c);;){if(n===0){if(Cm(e)<1)break;const d=Tm(e,1);o=(d[0]&128)===128,a=d[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Cm(e)<2)break;const d=Tm(e,2);a=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),n=3}else if(n===2){if(Cm(e)<8)break;const d=Tm(e,8),p=new DataView(d.buffer,d.byteOffset,d.length),m=p.getUint32(0);if(m>Math.pow(2,21)-1){h.enqueue(Ew);break}a=m*Math.pow(2,32)+p.getUint32(4),n=3}else{if(Cm(e)<a)break;const d=Tm(e,a);h.enqueue(fA(o?d:iw.decode(d),t)),n=0}if(a===0||a>r){h.enqueue(Ew);break}}}})}const Lk=4;function Xe(r){if(r)return lP(r)}function lP(r){for(var t in Xe.prototype)r[t]=Xe.prototype[t];return r}Xe.prototype.on=Xe.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};Xe.prototype.once=function(r,t){function e(){this.off(r,e),t.apply(this,arguments)}return e.fn=t,this.on(r,e),this};Xe.prototype.off=Xe.prototype.removeListener=Xe.prototype.removeAllListeners=Xe.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,a=0;a<e.length;a++)if(n=e[a],n===t||n.fn===t){e.splice(a,1);break}return e.length===0&&delete this._callbacks["$"+r],this};Xe.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+r],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,a=e.length;n<a;++n)e[n].apply(this,t)}return this};Xe.prototype.emitReserved=Xe.prototype.emit;Xe.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Xe.prototype.hasListeners=function(r){return!!this.listeners(r).length};const lb=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),$i=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),cP="arraybuffer";function Dk(r,...t){return t.reduce((e,n)=>(r.hasOwnProperty(n)&&(e[n]=r[n]),e),{})}const uP=$i.setTimeout,hP=$i.clearTimeout;function cb(r,t){t.useNativeTimers?(r.setTimeoutFn=uP.bind($i),r.clearTimeoutFn=hP.bind($i)):(r.setTimeoutFn=$i.setTimeout.bind($i),r.clearTimeoutFn=$i.clearTimeout.bind($i))}const dP=1.33;function fP(r){return typeof r=="string"?pP(r):Math.ceil((r.byteLength||r.size)*dP)}function pP(r){let t=0,e=0;for(let n=0,a=r.length;n<a;n++)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function Nk(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function gP(r){let t="";for(let e in r)r.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t}function mP(r){let t={},e=r.split("&");for(let n=0,a=e.length;n<a;n++){let o=e[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class yP extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class pA extends Xe{constructor(t){super(),this.writable=!1,cb(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new yP(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=fA(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=gP(t);return e.length?"?"+e:""}}class bP extends pA{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};rP(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,sP(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Nk()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let Ok=!1;try{Ok=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const vP=Ok;function wP(){}class _P extends bP{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}}class Qs extends Xe{constructor(t,e,n){super(),this.createRequest=t,cb(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const e=Dk(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Qs.requestsCount++,Qs.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=wP,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Qs.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Qs.requestsCount=0;Qs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",DC);else if(typeof addEventListener=="function"){const r="onpagehide"in $i?"pagehide":"unload";addEventListener(r,DC,!1)}}function DC(){for(let r in Qs.requests)Qs.requests.hasOwnProperty(r)&&Qs.requests[r].abort()}const AP=(function(){const r=jk({xdomain:!1});return r&&r.responseType!==null})();class SP extends _P{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=AP&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Qs(jk,this.uri(),t)}}function jk(r){const t=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||vP))return new XMLHttpRequest}catch{}if(!t)try{return new $i[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const zk=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class EP extends pA{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,n=zk?{}:Dk(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],a=e===t.length-1;dA(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}a&&lb(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Nk()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const sw=$i.WebSocket||$i.MozWebSocket;class xP extends EP{createSocket(t,e,n){return zk?new sw(t,e,n):e?new sw(t,e):new sw(t)}doWrite(t,e){this.ws.send(e)}}class CP extends pA{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=oP(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),a=aP();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const o=()=>{n.read().then(({done:h,value:d})=>{h||(this.onPacket(d),o())}).catch(h=>{})};o();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],a=e===t.length-1;this._writer.write(n).then(()=>{a&&lb(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const TP={websocket:xP,webtransport:CP,polling:SP},kP=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,RP=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function xw(r){if(r.length>8e3)throw"URI too long";const t=r,e=r.indexOf("["),n=r.indexOf("]");e!=-1&&n!=-1&&(r=r.substring(0,e)+r.substring(e,n).replace(/:/g,";")+r.substring(n,r.length));let a=kP.exec(r||""),o={},c=14;for(;c--;)o[RP[c]]=a[c]||"";return e!=-1&&n!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=MP(o,o.path),o.queryKey=LP(o,o.query),o}function MP(r,t){const e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function LP(r,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,o){a&&(e[a]=o)}),e}const Cw=typeof addEventListener=="function"&&typeof removeEventListener=="function",Im=[];Cw&&addEventListener("offline",()=>{Im.forEach(r=>r())},!1);class mo extends Xe{constructor(t,e){if(super(),this.binaryType=cP,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const n=xw(t);e.hostname=n.host,e.secure=n.protocol==="https"||n.protocol==="wss",e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=xw(e.host).host);cb(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=mP(this.opts.query)),Cw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Im.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=Lk,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&mo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",mo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(e+=fP(a)),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,lb(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,n){return this._sendPacket("message",t,e,n),this}send(t,e,n){return this._sendPacket("message",t,e,n),this}_sendPacket(t,e,n,a){if(typeof e=="function"&&(a=e,e=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(mo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Cw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Im.indexOf(this._offlineEventListener);n!==-1&&Im.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}mo.protocol=Lk;class DP extends mo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;mo.priorWebsocketSuccess=!1;const a=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",b=>{if(!n)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;mo.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(m(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=e.name,this.emitReserved("upgradeError",v)}}))};function o(){n||(n=!0,m(),e.close(),e=null)}const c=b=>{const v=new Error("probe error: "+b);v.transport=e.name,o(),this.emitReserved("upgradeError",v)};function h(){c("transport closed")}function d(){c("socket closed")}function p(b){e&&b.name!==e.name&&o()}const m=()=>{e.removeListener("open",a),e.removeListener("error",c),e.removeListener("close",h),this.off("close",d),this.off("upgrading",p)};e.once("open",a),e.once("error",c),e.once("close",h),this.once("close",d),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}let NP=class extends DP{constructor(t,e={}){const n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>TP[a]).filter(a=>!!a)),super(t,n)}};function OP(r,t="",e){let n=r;e=e||typeof location<"u"&&location,r==null&&(r=e.protocol+"//"+e.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=e.protocol+r:r=e.host+r),/^(https?|wss?):\/\//.test(r)||(typeof e<"u"?r=e.protocol+"//"+r:r="https://"+r),n=xw(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+t,n.href=n.protocol+"://"+o+(e&&e.port===n.port?"":":"+n.port),n}const jP=typeof ArrayBuffer=="function",zP=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Pk=Object.prototype.toString,PP=typeof Blob=="function"||typeof Blob<"u"&&Pk.call(Blob)==="[object BlobConstructor]",FP=typeof File=="function"||typeof File<"u"&&Pk.call(File)==="[object FileConstructor]";function gA(r){return jP&&(r instanceof ArrayBuffer||zP(r))||PP&&r instanceof Blob||FP&&r instanceof File}function Bm(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let e=0,n=r.length;e<n;e++)if(Bm(r[e]))return!0;return!1}if(gA(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Bm(r.toJSON(),!0);for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&Bm(r[e]))return!0;return!1}function IP(r){const t=[],e=r.data,n=r;return n.data=Tw(e,t),n.attachments=t.length,{packet:n,buffers:t}}function Tw(r,t){if(!r)return r;if(gA(r)){const e={_placeholder:!0,num:t.length};return t.push(r),e}else if(Array.isArray(r)){const e=new Array(r.length);for(let n=0;n<r.length;n++)e[n]=Tw(r[n],t);return e}else if(typeof r=="object"&&!(r instanceof Date)){const e={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=Tw(r[n],t));return e}return r}function BP(r,t){return r.data=kw(r.data,t),delete r.attachments,r}function kw(r,t){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<t.length)return t[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=kw(r[e],t);else if(typeof r=="object")for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=kw(r[e],t));return r}const UP=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],HP=5;var Kt;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Kt||(Kt={}));let qP=class{constructor(t){this.replacer=t}encode(t){return(t.type===Kt.EVENT||t.type===Kt.ACK)&&Bm(t)?this.encodeAsBinary({type:t.type===Kt.EVENT?Kt.BINARY_EVENT:Kt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Kt.BINARY_EVENT||t.type===Kt.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=IP(t),n=this.encodeAsString(e.packet),a=e.buffers;return a.unshift(n),a}};function NC(r){return Object.prototype.toString.call(r)==="[object Object]"}let VP=class Fk extends Xe{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===Kt.BINARY_EVENT;n||e.type===Kt.BINARY_ACK?(e.type=n?Kt.EVENT:Kt.ACK,this.reconstructor=new GP(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(gA(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(Kt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Kt.BINARY_EVENT||n.type===Kt.BINARY_ACK){const o=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const c=t.substring(o,e);if(c!=Number(c)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(c)}if(t.charAt(e+1)==="/"){const o=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(o,e)}else n.nsp="/";const a=t.charAt(e+1);if(a!==""&&Number(a)==a){const o=e+1;for(;++e;){const c=t.charAt(e);if(c==null||Number(c)!=c){--e;break}if(e===t.length)break}n.id=Number(t.substring(o,e+1))}if(t.charAt(++e)){const o=this.tryParse(t.substr(e));if(Fk.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case Kt.CONNECT:return NC(e);case Kt.DISCONNECT:return e===void 0;case Kt.CONNECT_ERROR:return typeof e=="string"||NC(e);case Kt.EVENT:case Kt.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&UP.indexOf(e[0])===-1);case Kt.ACK:case Kt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class GP{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=BP(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const XP=Object.freeze(Object.defineProperty({__proto__:null,Decoder:VP,Encoder:qP,get PacketType(){return Kt},protocol:HP},Symbol.toStringTag,{value:"Module"}));function vs(r,t,e){return r.on(t,e),function(){r.off(t,e)}}const YP=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ik extends Xe{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[vs(t,"open",this.onopen.bind(this)),vs(t,"packet",this.onpacket.bind(this)),vs(t,"error",this.onerror.bind(this)),vs(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,a,o;if(YP.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const c={type:Kt.EVENT,data:e};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const m=this.ids++,b=e.pop();this._registerAckCallback(m,b),c.id=m}const h=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,d=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!h||(d?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,e){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=e;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===t&&this.sendBuffer.splice(h,1);e.call(this,new Error("operation has timed out"))},a),c=(...h)=>{this.io.clearTimeoutFn(o),e.apply(this,h)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...e){return new Promise((n,a)=>{const o=(c,h)=>c?a(c):n(h);o.withError=!0,e.push(o),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...o)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(a)):(this._queue.shift(),e&&e(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Kt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Kt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Kt.EVENT:case Kt.BINARY_EVENT:this.onevent(t);break;case Kt.ACK:case Kt.BINARY_ACK:this.onack(t);break;case Kt.DISCONNECT:this.ondisconnect();break;case Kt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...a){n||(n=!0,e.packet({type:Kt.ACK,id:t,data:a}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Kt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function Th(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Th.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*r);r=(Math.floor(t*10)&1)==0?r-e:r+e}return Math.min(r,this.max)|0};Th.prototype.reset=function(){this.attempts=0};Th.prototype.setMin=function(r){this.ms=r};Th.prototype.setMax=function(r){this.max=r};Th.prototype.setJitter=function(r){this.jitter=r};class Rw extends Xe{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,cb(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Th({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const a=e.parser||XP;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new NP(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=vs(e,"open",function(){n.onopen(),t&&t()}),o=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),t?t(h):this.maybeReconnectOnOpen()},c=vs(e,"error",o);if(this._timeout!==!1){const h=this._timeout,d=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),e.close()},h);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(a),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(vs(t,"ping",this.onping.bind(this)),vs(t,"data",this.ondata.bind(this)),vs(t,"error",this.onerror.bind(this)),vs(t,"close",this.onclose.bind(this)),vs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){lb(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ik(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Md={};function Um(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};const e=OP(r,t.path||"/socket.io"),n=e.source,a=e.id,o=e.path,c=Md[a]&&o in Md[a].nsps,h=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let d;return h?d=new Rw(n,t):(Md[a]||(Md[a]=new Rw(n,t)),d=Md[a]),e.query&&!t.query&&(t.query=e.queryKey),d.socket(e.path,t)}Object.assign(Um,{Manager:Rw,Socket:Ik,io:Um,connect:Um});const _s=()=>new Map,Mw=r=>{const t=_s();return r.forEach((e,n)=>{t.set(n,e)}),t},Eo=(r,t,e)=>{let n=r.get(t);return n===void 0&&r.set(t,n=e()),n},$P=(r,t)=>{const e=[];for(const[n,a]of r)e.push(t(a,n));return e},KP=(r,t)=>{for(const[e,n]of r)if(t(n,e))return!0;return!1},fh=()=>new Set,rw=r=>r[r.length-1],WP=(r,t)=>{for(let e=0;e<t.length;e++)r.push(t[e])},tc=Array.from,QP=Array.isArray;class ZP{constructor(){this._observers=_s()}on(t,e){return Eo(this._observers,t,fh).add(e),e}once(t,e){const n=(...a)=>{this.off(t,n),e(...a)};this.on(t,n)}off(t,e){const n=this._observers.get(t);n!==void 0&&(n.delete(e),n.size===0&&this._observers.delete(t))}emit(t,e){return tc((this._observers.get(t)||_s()).values()).forEach(n=>n(...e))}destroy(){this._observers=_s()}}const yo=Math.floor,Hm=Math.abs,Bk=(r,t)=>r<t?r:t,hc=(r,t)=>r>t?r:t,Uk=r=>r!==0?r<0:1/r<0,OC=1,jC=2,aw=4,ow=8,rf=32,ra=64,Li=128,ub=31,Lw=63,Zl=127,JP=2147483647,Hk=Number.MAX_SAFE_INTEGER,tF=Number.isInteger||(r=>typeof r=="number"&&isFinite(r)&&yo(r)===r),eF=r=>r.toLowerCase(),nF=/^\s*/g,iF=r=>r.replace(nF,""),sF=/([A-Z])/g,zC=(r,t)=>iF(r.replace(sF,e=>`${t}${eF(e)}`)),rF=r=>{const t=unescape(encodeURIComponent(r)),e=t.length,n=new Uint8Array(e);for(let a=0;a<e;a++)n[a]=t.codePointAt(a);return n},af=typeof TextEncoder<"u"?new TextEncoder:null,aF=r=>af.encode(r),oF=af?aF:rF;let Zd=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Zd&&Zd.decode(new Uint8Array).length===1&&(Zd=null);class Kp{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const hb=()=>new Kp,lF=r=>{let t=r.cpos;for(let e=0;e<r.bufs.length;e++)t+=r.bufs[e].length;return t},Ws=r=>{const t=new Uint8Array(lF(r));let e=0;for(let n=0;n<r.bufs.length;n++){const a=r.bufs[n];t.set(a,e),e+=a.length}return t.set(new Uint8Array(r.cbuf.buffer,0,r.cpos),e),t},cF=(r,t)=>{const e=r.cbuf.length;e-r.cpos<t&&(r.bufs.push(new Uint8Array(r.cbuf.buffer,0,r.cpos)),r.cbuf=new Uint8Array(hc(e,t)*2),r.cpos=0)},dn=(r,t)=>{const e=r.cbuf.length;r.cpos===e&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(e*2),r.cpos=0),r.cbuf[r.cpos++]=t},Dw=dn,Jt=(r,t)=>{for(;t>Zl;)dn(r,Li|Zl&t),t=yo(t/128);dn(r,Zl&t)},mA=(r,t)=>{const e=Uk(t);for(e&&(t=-t),dn(r,(t>Lw?Li:0)|(e?ra:0)|Lw&t),t=yo(t/64);t>0;)dn(r,(t>Zl?Li:0)|Zl&t),t=yo(t/128)},Nw=new Uint8Array(3e4),uF=Nw.length/3,hF=(r,t)=>{if(t.length<uF){const e=af.encodeInto(t,Nw).written||0;Jt(r,e);for(let n=0;n<e;n++)dn(r,Nw[n])}else vi(r,oF(t))},dF=(r,t)=>{const e=unescape(encodeURIComponent(t)),n=e.length;Jt(r,n);for(let a=0;a<n;a++)dn(r,e.codePointAt(a))},uu=af&&af.encodeInto?hF:dF,db=(r,t)=>{const e=r.cbuf.length,n=r.cpos,a=Bk(e-n,t.length),o=t.length-a;r.cbuf.set(t.subarray(0,a),n),r.cpos+=a,o>0&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(hc(e*2,o)),r.cbuf.set(t.subarray(a)),r.cpos=o)},vi=(r,t)=>{Jt(r,t.byteLength),db(r,t)},yA=(r,t)=>{cF(r,t);const e=new DataView(r.cbuf.buffer,r.cpos,t);return r.cpos+=t,e},fF=(r,t)=>yA(r,4).setFloat32(0,t,!1),pF=(r,t)=>yA(r,8).setFloat64(0,t,!1),gF=(r,t)=>yA(r,8).setBigInt64(0,t,!1),PC=new DataView(new ArrayBuffer(4)),mF=r=>(PC.setFloat32(0,r),PC.getFloat32(0)===r),of=(r,t)=>{switch(typeof t){case"string":dn(r,119),uu(r,t);break;case"number":tF(t)&&Hm(t)<=JP?(dn(r,125),mA(r,t)):mF(t)?(dn(r,124),fF(r,t)):(dn(r,123),pF(r,t));break;case"bigint":dn(r,122),gF(r,t);break;case"object":if(t===null)dn(r,126);else if(QP(t)){dn(r,117),Jt(r,t.length);for(let e=0;e<t.length;e++)of(r,t[e])}else if(t instanceof Uint8Array)dn(r,116),vi(r,t);else{dn(r,118);const e=Object.keys(t);Jt(r,e.length);for(let n=0;n<e.length;n++){const a=e[n];uu(r,a),of(r,t[a])}}break;case"boolean":dn(r,t?120:121);break;default:dn(r,127)}};class FC extends Kp{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&Jt(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const IC=r=>{r.count>0&&(mA(r.encoder,r.count===1?r.s:-r.s),r.count>1&&Jt(r.encoder,r.count-2))};class qm{constructor(){this.encoder=new Kp,this.s=0,this.count=0}write(t){this.s===t?this.count++:(IC(this),this.count=1,this.s=t)}toUint8Array(){return IC(this),Ws(this.encoder)}}const BC=r=>{if(r.count>0){const t=r.diff*2+(r.count===1?0:1);mA(r.encoder,t),r.count>1&&Jt(r.encoder,r.count-2)}};class lw{constructor(){this.encoder=new Kp,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(BC(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return BC(this),Ws(this.encoder)}}class yF{constructor(){this.sarr=[],this.s="",this.lensE=new qm}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Kp;return this.sarr.push(this.s),this.s="",uu(t,this.sarr.join("")),db(t,this.lensE.toUint8Array()),Ws(t)}}const bo=r=>new Error(r),Zs=()=>{throw bo("Method unimplemented")},nr=()=>{throw bo("Unexpected case")},qk=bo("Unexpected end of array"),Vk=bo("Integer out of Range");class fb{constructor(t){this.arr=t,this.pos=0}}const kh=r=>new fb(r),bF=r=>r.pos!==r.arr.length,vF=(r,t)=>{const e=new Uint8Array(r.arr.buffer,r.pos+r.arr.byteOffset,t);return r.pos+=t,e},wi=r=>vF(r,It(r)),ph=r=>r.arr[r.pos++],It=r=>{let t=0,e=1;const n=r.arr.length;for(;r.pos<n;){const a=r.arr[r.pos++];if(t=t+(a&Zl)*e,e*=128,a<Li)return t;if(t>Hk)throw Vk}throw qk},bA=r=>{let t=r.arr[r.pos++],e=t&Lw,n=64;const a=(t&ra)>0?-1:1;if((t&Li)===0)return a*e;const o=r.arr.length;for(;r.pos<o;){if(t=r.arr[r.pos++],e=e+(t&Zl)*n,n*=128,t<Li)return a*e;if(e>Hk)throw Vk}throw qk},wF=r=>{let t=It(r);if(t===0)return"";{let e=String.fromCodePoint(ph(r));if(--t<100)for(;t--;)e+=String.fromCodePoint(ph(r));else for(;t>0;){const n=t<1e4?t:1e4,a=r.arr.subarray(r.pos,r.pos+n);r.pos+=n,e+=String.fromCodePoint.apply(null,a),t-=n}return decodeURIComponent(escape(e))}},_F=r=>Zd.decode(wi(r)),hu=Zd?_F:wF,vA=(r,t)=>{const e=new DataView(r.arr.buffer,r.arr.byteOffset+r.pos,t);return r.pos+=t,e},AF=r=>vA(r,4).getFloat32(0,!1),SF=r=>vA(r,8).getFloat64(0,!1),EF=r=>vA(r,8).getBigInt64(0,!1),xF=[r=>{},r=>null,bA,AF,SF,EF,r=>!1,r=>!0,hu,r=>{const t=It(r),e={};for(let n=0;n<t;n++){const a=hu(r);e[a]=lf(r)}return e},r=>{const t=It(r),e=[];for(let n=0;n<t;n++)e.push(lf(r));return e},wi],lf=r=>xF[127-ph(r)](r);class UC extends fb{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),bF(this)?this.count=It(this)+1:this.count=-1),this.count--,this.s}}class Vm extends fb{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=bA(this);const t=Uk(this.s);this.count=1,t&&(this.s=-this.s,this.count=It(this)+2)}return this.count--,this.s}}class cw extends fb{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=bA(this),e=t&1;this.diff=yo(t/2),this.count=1,e&&(this.count=It(this)+2)}return this.s+=this.diff,this.count--,this.s}}class CF{constructor(t){this.decoder=new Vm(t),this.str=hu(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}const TF=crypto.getRandomValues.bind(crypto),Gk=()=>TF(new Uint32Array(1))[0],kF="10000000-1000-4000-8000"+-1e11,RF=()=>kF.replace(/[018]/g,r=>(r^Gk()&15>>r/4).toString(16)),HC=r=>new Promise(r);Promise.all.bind(Promise);const qC=r=>r===void 0?null:r;class MF{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let Xk=new MF,LF=!0;try{typeof localStorage<"u"&&localStorage&&(Xk=localStorage,LF=!1)}catch{}const DF=Xk,NF=Object.assign,OF=Object.keys,jF=(r,t)=>{for(const e in r)t(r[e],e)},VC=r=>OF(r).length,zF=r=>{for(const t in r)return!1;return!0},PF=(r,t)=>{for(const e in r)if(!t(r[e],e))return!1;return!0},FF=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),IF=(r,t)=>r===t||VC(r)===VC(t)&&PF(r,(e,n)=>(e!==void 0||FF(t,n))&&t[n]===e),BF=Object.freeze,Yk=r=>{for(const t in r){const e=r[t];(typeof e=="object"||typeof e=="function")&&Yk(r[t])}return BF(r)},wA=(r,t,e=0)=>{try{for(;e<r.length;e++)r[e](...t)}finally{e<r.length&&wA(r,t,e+1)}},UF=r=>r,HF=(r,t)=>t.includes(r);var $k={};const cf=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Ls;const qF=()=>{if(Ls===void 0)if(cf){Ls=_s();const r=process.argv;let t=null;for(let e=0;e<r.length;e++){const n=r[e];n[0]==="-"?(t!==null&&Ls.set(t,""),t=n):t!==null&&(Ls.set(t,n),t=null)}t!==null&&Ls.set(t,"")}else typeof location=="object"?(Ls=_s(),(location.search||"?").slice(1).split("&").forEach(r=>{if(r.length!==0){const[t,e]=r.split("=");Ls.set(`--${zC(t,"-")}`,e),Ls.set(`-${zC(t,"-")}`,e)}})):Ls=_s();return Ls},Ow=r=>qF().has(r),Ay=r=>qC(cf?$k[r.toUpperCase().replaceAll("-","_")]:DF.getItem(r)),Kk=r=>Ow("--"+r)||Ay(r)!==null;Kk("production");const VF=cf&&HF($k.FORCE_COLOR,["true","1","2"]),GF=VF||!Ow("--no-colors")&&!Kk("no-color")&&(!cf||process.stdout.isTTY)&&(!cf||Ow("--color")||Ay("COLORTERM")!==null||(Ay("TERM")||"").includes("color")),XF=r=>new Uint8Array(r),YF=r=>{const t=XF(r.byteLength);return t.set(r),t};class $F{constructor(t,e){this.left=t,this.right=e}}const xr=(r,t)=>new $F(r,t);typeof DOMParser<"u"&&new DOMParser;const KF=r=>$P(r,(t,e)=>`${e}:${t};`).join(""),fa=Symbol,Wk=fa(),Qk=fa(),WF=fa(),QF=fa(),ZF=fa(),Zk=fa(),JF=fa(),_A=fa(),t4=fa(),e4=r=>{var a;r.length===1&&((a=r[0])==null?void 0:a.constructor)===Function&&(r=r[0]());const t=[],e=[];let n=0;for(;n<r.length;n++){const o=r[n];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)t.push(o);else if(o.constructor===Object)break}for(n>0&&e.push(t.join(""));n<r.length;n++){const o=r[n];o instanceof Symbol||e.push(o)}return e},n4={[Wk]:xr("font-weight","bold"),[Qk]:xr("font-weight","normal"),[WF]:xr("color","blue"),[ZF]:xr("color","green"),[QF]:xr("color","grey"),[Zk]:xr("color","red"),[JF]:xr("color","purple"),[_A]:xr("color","orange"),[t4]:xr("color","black")},i4=r=>{var c;r.length===1&&((c=r[0])==null?void 0:c.constructor)===Function&&(r=r[0]());const t=[],e=[],n=_s();let a=[],o=0;for(;o<r.length;o++){const h=r[o],d=n4[h];if(d!==void 0)n.set(d.left,d.right);else{if(h===void 0)break;if(h.constructor===String||h.constructor===Number){const p=KF(n);o>0||p.length>0?(t.push("%c"+h),e.push(p)):t.push(h)}else break}}for(o>0&&(a=e,a.unshift(t.join("")));o<r.length;o++){const h=r[o];h instanceof Symbol||a.push(h)}return a},Jk=GF?i4:e4,s4=(...r)=>{console.log(...Jk(r)),tR.forEach(t=>t.print(r))},r4=(...r)=>{console.warn(...Jk(r)),r.unshift(_A),tR.forEach(t=>t.print(r))},tR=fh(),eR=r=>({[Symbol.iterator](){return this},next:r}),a4=(r,t)=>eR(()=>{let e;do e=r.next();while(!e.done&&!t(e.value));return e}),uw=(r,t)=>eR(()=>{const{done:e,value:n}=r.next();return{done:e,value:e?void 0:t(n)}});class AA{constructor(t,e){this.clock=t,this.len=e}}class Wp{constructor(){this.clients=new Map}}const nR=(r,t,e)=>t.clients.forEach((n,a)=>{const o=r.doc.store.clients.get(a);if(o!=null){const c=o[o.length-1],h=c.id.clock+c.length;for(let d=0,p=n[d];d<n.length&&p.clock<h;p=n[++d])dR(r,o,p.clock,p.len,e)}}),o4=(r,t)=>{let e=0,n=r.length-1;for(;e<=n;){const a=yo((e+n)/2),o=r[a],c=o.clock;if(c<=t){if(t<c+o.len)return a;e=a+1}else n=a-1}return null},iR=(r,t)=>{const e=r.clients.get(t.client);return e!==void 0&&o4(e,t.clock)!==null},SA=r=>{r.clients.forEach(t=>{t.sort((a,o)=>a.clock-o.clock);let e,n;for(e=1,n=1;e<t.length;e++){const a=t[n-1],o=t[e];a.clock+a.len>=o.clock?a.len=hc(a.len,o.clock+o.len-a.clock):(n<e&&(t[n]=o),n++)}t.length=n})},l4=r=>{const t=new Wp;for(let e=0;e<r.length;e++)r[e].clients.forEach((n,a)=>{if(!t.clients.has(a)){const o=n.slice();for(let c=e+1;c<r.length;c++)WP(o,r[c].clients.get(a)||[]);t.clients.set(a,o)}});return SA(t),t},Sy=(r,t,e,n)=>{Eo(r.clients,t,()=>[]).push(new AA(e,n))},c4=()=>new Wp,u4=r=>{const t=c4();return r.clients.forEach((e,n)=>{const a=[];for(let o=0;o<e.length;o++){const c=e[o];if(c.deleted){const h=c.id.clock;let d=c.length;if(o+1<e.length)for(let p=e[o+1];o+1<e.length&&p.deleted;p=e[++o+1])d+=p.length;a.push(new AA(h,d))}}a.length>0&&t.clients.set(n,a)}),t},Rh=(r,t)=>{Jt(r.restEncoder,t.clients.size),tc(t.clients.entries()).sort((e,n)=>n[0]-e[0]).forEach(([e,n])=>{r.resetDsCurVal(),Jt(r.restEncoder,e);const a=n.length;Jt(r.restEncoder,a);for(let o=0;o<a;o++){const c=n[o];r.writeDsClock(c.clock),r.writeDsLen(c.len)}})},EA=r=>{const t=new Wp,e=It(r.restDecoder);for(let n=0;n<e;n++){r.resetDsCurVal();const a=It(r.restDecoder),o=It(r.restDecoder);if(o>0){const c=Eo(t.clients,a,()=>[]);for(let h=0;h<o;h++)c.push(new AA(r.readDsClock(),r.readDsLen()))}}return t},GC=(r,t,e)=>{const n=new Wp,a=It(r.restDecoder);for(let o=0;o<a;o++){r.resetDsCurVal();const c=It(r.restDecoder),h=It(r.restDecoder),d=e.clients.get(c)||[],p=fn(e,c);for(let m=0;m<h;m++){const b=r.readDsClock(),v=b+r.readDsLen();if(b<p){p<v&&Sy(n,c,p,v-p);let w=ir(d,b),A=d[w];for(!A.deleted&&A.id.clock<b&&(d.splice(w+1,0,My(t,A,b-A.id.clock)),w++);w<d.length&&(A=d[w++],A.id.clock<v);)A.deleted||(v<A.id.clock+A.length&&d.splice(w,0,My(t,A,v-A.id.clock)),A.delete(t))}else Sy(n,c,b,v-b)}}if(n.clients.size>0){const o=new ec;return Jt(o.restEncoder,0),Rh(o,n),o.toUint8Array()}return null},sR=Gk;class Mh extends ZP{constructor({guid:t=RF(),collectionid:e=null,gc:n=!0,gcFilter:a=()=>!0,meta:o=null,autoLoad:c=!1,shouldLoad:h=!0}={}){super(),this.gc=n,this.gcFilter=a,this.clientID=sR(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new uR,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=h,this.autoLoad=c,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=HC(p=>{this.on("load",()=>{this.isLoaded=!0,p(this)})});const d=()=>HC(p=>{const m=b=>{(b===void 0||b===!0)&&(this.off("sync",m),p())};this.on("sync",m)});this.on("sync",p=>{p===!1&&this.isSynced&&(this.whenSynced=d()),this.isSynced=p===void 0||p===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=d()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Ee(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(tc(this.subdocs).map(t=>t.guid))}transact(t,e=null){return Ee(this,t,e)}get(t,e=Tn){const n=Eo(this.share,t,()=>{const o=new e;return o._integrate(this,null),o}),a=n.constructor;if(e!==Tn&&a!==e)if(a===Tn){const o=new e;o._map=n._map,n._map.forEach(c=>{for(;c!==null;c=c.left)c.parent=o}),o._start=n._start;for(let c=o._start;c!==null;c=c.right)c.parent=o;return o._length=n._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return n}getArray(t=""){return this.get(t,fu)}getText(t=""){return this.get(t,yh)}getMap(t=""){return this.get(t,mh)}getXmlElement(t=""){return this.get(t,bh)}getXmlFragment(t=""){return this.get(t,nc)}toJSON(){const t={};return this.share.forEach((e,n)=>{t[n]=e.toJSON()}),t}destroy(){this.isDestroyed=!0,tc(this.subdocs).forEach(e=>e.destroy());const t=this._item;if(t!==null){this._item=null;const e=t.content;e.doc=new Mh({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Ee(t.parent.doc,n=>{const a=e.doc;t.deleted||n.subdocsAdded.add(a),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class rR{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return It(this.restDecoder)}readDsLen(){return It(this.restDecoder)}}class aR extends rR{readLeftID(){return Wt(It(this.restDecoder),It(this.restDecoder))}readRightID(){return Wt(It(this.restDecoder),It(this.restDecoder))}readClient(){return It(this.restDecoder)}readInfo(){return ph(this.restDecoder)}readString(){return hu(this.restDecoder)}readParentInfo(){return It(this.restDecoder)===1}readTypeRef(){return It(this.restDecoder)}readLen(){return It(this.restDecoder)}readAny(){return lf(this.restDecoder)}readBuf(){return YF(wi(this.restDecoder))}readJSON(){return JSON.parse(hu(this.restDecoder))}readKey(){return hu(this.restDecoder)}}class h4{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=It(this.restDecoder),this.dsCurrVal}readDsLen(){const t=It(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class gh extends h4{constructor(t){super(t),this.keys=[],It(t),this.keyClockDecoder=new cw(wi(t)),this.clientDecoder=new Vm(wi(t)),this.leftClockDecoder=new cw(wi(t)),this.rightClockDecoder=new cw(wi(t)),this.infoDecoder=new UC(wi(t),ph),this.stringDecoder=new CF(wi(t)),this.parentInfoDecoder=new UC(wi(t),ph),this.typeRefDecoder=new Vm(wi(t)),this.lenDecoder=new Vm(wi(t))}readLeftID(){return new du(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new du(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return lf(this.restDecoder)}readBuf(){return wi(this.restDecoder)}readJSON(){return lf(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class d4{constructor(){this.restEncoder=hb()}toUint8Array(){return Ws(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){Jt(this.restEncoder,t)}writeDsLen(t){Jt(this.restEncoder,t)}}class Qp extends d4{writeLeftID(t){Jt(this.restEncoder,t.client),Jt(this.restEncoder,t.clock)}writeRightID(t){Jt(this.restEncoder,t.client),Jt(this.restEncoder,t.clock)}writeClient(t){Jt(this.restEncoder,t)}writeInfo(t){Dw(this.restEncoder,t)}writeString(t){uu(this.restEncoder,t)}writeParentInfo(t){Jt(this.restEncoder,t?1:0)}writeTypeRef(t){Jt(this.restEncoder,t)}writeLen(t){Jt(this.restEncoder,t)}writeAny(t){of(this.restEncoder,t)}writeBuf(t){vi(this.restEncoder,t)}writeJSON(t){uu(this.restEncoder,JSON.stringify(t))}writeKey(t){uu(this.restEncoder,t)}}class f4{constructor(){this.restEncoder=hb(),this.dsCurrVal=0}toUint8Array(){return Ws(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,Jt(this.restEncoder,e)}writeDsLen(t){t===0&&nr(),Jt(this.restEncoder,t-1),this.dsCurrVal+=t}}class ec extends f4{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new lw,this.clientEncoder=new qm,this.leftClockEncoder=new lw,this.rightClockEncoder=new lw,this.infoEncoder=new FC(Dw),this.stringEncoder=new yF,this.parentInfoEncoder=new FC(Dw),this.typeRefEncoder=new qm,this.lenEncoder=new qm}toUint8Array(){const t=hb();return Jt(t,0),vi(t,this.keyClockEncoder.toUint8Array()),vi(t,this.clientEncoder.toUint8Array()),vi(t,this.leftClockEncoder.toUint8Array()),vi(t,this.rightClockEncoder.toUint8Array()),vi(t,Ws(this.infoEncoder)),vi(t,this.stringEncoder.toUint8Array()),vi(t,Ws(this.parentInfoEncoder)),vi(t,this.typeRefEncoder.toUint8Array()),vi(t,this.lenEncoder.toUint8Array()),db(t,Ws(this.restEncoder)),Ws(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){of(this.restEncoder,t)}writeBuf(t){vi(this.restEncoder,t)}writeJSON(t){of(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);e===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const p4=(r,t,e,n)=>{n=hc(n,t[0].id.clock);const a=ir(t,n);Jt(r.restEncoder,t.length-a),r.writeClient(e),Jt(r.restEncoder,n);const o=t[a];o.write(r,n-o.id.clock);for(let c=a+1;c<t.length;c++)t[c].write(r,0)},xA=(r,t,e)=>{const n=new Map;e.forEach((a,o)=>{fn(t,o)>a&&n.set(o,a)}),CA(t).forEach((a,o)=>{e.has(o)||n.set(o,0)}),Jt(r.restEncoder,n.size),tc(n.entries()).sort((a,o)=>o[0]-a[0]).forEach(([a,o])=>{p4(r,t.clients.get(a),a,o)})},g4=(r,t)=>{const e=_s(),n=It(r.restDecoder);for(let a=0;a<n;a++){const o=It(r.restDecoder),c=new Array(o),h=r.readClient();let d=It(r.restDecoder);e.set(h,{i:0,refs:c});for(let p=0;p<o;p++){const m=r.readInfo();switch(ub&m){case 0:{const b=r.readLen();c[p]=new Ki(Wt(h,d),b),d+=b;break}case 10:{const b=It(r.restDecoder);c[p]=new Wi(Wt(h,d),b),d+=b;break}default:{const b=(m&(ra|Li))===0,v=new sn(Wt(h,d),null,(m&Li)===Li?r.readLeftID():null,null,(m&ra)===ra?r.readRightID():null,b?r.readParentInfo()?t.get(r.readString()):r.readLeftID():null,b&&(m&rf)===rf?r.readString():null,LR(r,m));c[p]=v,d+=v.length}}}}return e},m4=(r,t,e)=>{const n=[];let a=tc(e.keys()).sort((w,A)=>w-A);if(a.length===0)return null;const o=()=>{if(a.length===0)return null;let w=e.get(a[a.length-1]);for(;w.refs.length===w.i;)if(a.pop(),a.length>0)w=e.get(a[a.length-1]);else return null;return w};let c=o();if(c===null)return null;const h=new uR,d=new Map,p=(w,A)=>{const S=d.get(w);(S==null||S>A)&&d.set(w,A)};let m=c.refs[c.i++];const b=new Map,v=()=>{for(const w of n){const A=w.id.client,S=e.get(A);S?(S.i--,h.clients.set(A,S.refs.slice(S.i)),e.delete(A),S.i=0,S.refs=[]):h.clients.set(A,[w]),a=a.filter(R=>R!==A)}n.length=0};for(;;){if(m.constructor!==Wi){const A=Eo(b,m.id.client,()=>fn(t,m.id.client))-m.id.clock;if(A<0)n.push(m),p(m.id.client,m.id.clock-1),v();else{const S=m.getMissing(r,t);if(S!==null){n.push(m);const R=e.get(S)||{refs:[],i:0};if(R.refs.length===R.i)p(S,fn(t,S)),v();else{m=R.refs[R.i++];continue}}else(A===0||A<m.length)&&(m.integrate(r,A),b.set(m.id.client,m.id.clock+m.length))}}if(n.length>0)m=n.pop();else if(c!==null&&c.i<c.refs.length)m=c.refs[c.i++];else{if(c=o(),c===null)break;m=c.refs[c.i++]}}if(h.clients.size>0){const w=new ec;return xA(w,h,new Map),Jt(w.restEncoder,0),{missing:d,update:w.toUint8Array()}}return null},y4=(r,t)=>xA(r,t.doc.store,t.beforeState),b4=(r,t,e,n=new gh(r))=>Ee(t,a=>{a.local=!1;let o=!1;const c=a.doc,h=c.store,d=g4(n,c),p=m4(a,h,d),m=h.pendingStructs;if(m){for(const[v,w]of m.missing)if(w<fn(h,v)){o=!0;break}if(p){for(const[v,w]of p.missing){const A=m.missing.get(v);(A==null||A>w)&&m.missing.set(v,w)}m.update=Ey([m.update,p.update])}}else h.pendingStructs=p;const b=GC(n,a,h);if(h.pendingDs){const v=new gh(kh(h.pendingDs));It(v.restDecoder);const w=GC(v,a,h);b&&w?h.pendingDs=Ey([b,w]):h.pendingDs=b||w}else h.pendingDs=b;if(o){const v=h.pendingStructs.update;h.pendingStructs=null,oR(a.doc,v)}},e,!1),oR=(r,t,e,n=gh)=>{const a=kh(t);b4(a,r,e,new n(a))},v4=(r,t,e)=>oR(r,t,e,aR),w4=(r,t,e=new Map)=>{xA(r,t.store,e),Rh(r,u4(t.store))},_4=(r,t=new Uint8Array([0]),e=new ec)=>{const n=lR(t);w4(e,r,n);const a=[e.toUint8Array()];if(r.store.pendingDs&&a.push(r.store.pendingDs),r.store.pendingStructs&&a.push(O4(r.store.pendingStructs.update,t)),a.length>1){if(e.constructor===Qp)return D4(a.map((o,c)=>c===0?o:z4(o)));if(e.constructor===ec)return Ey(a)}return a[0]},A4=(r,t)=>_4(r,t,new Qp),S4=r=>{const t=new Map,e=It(r.restDecoder);for(let n=0;n<e;n++){const a=It(r.restDecoder),o=It(r.restDecoder);t.set(a,o)}return t},lR=r=>S4(new rR(kh(r)));class E4{constructor(){this.l=[]}}const XC=()=>new E4,YC=(r,t)=>r.l.push(t),$C=(r,t)=>{const e=r.l,n=e.length;r.l=e.filter(a=>t!==a),n===r.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},cR=(r,t,e)=>wA(r.l,[t,e]);class du{constructor(t,e){this.client=t,this.clock=e}}const km=(r,t)=>r===t||r!==null&&t!==null&&r.client===t.client&&r.clock===t.clock,Wt=(r,t)=>new du(r,t),x4=r=>{for(const[t,e]of r.doc.share.entries())if(e===r)return t;throw nr()},eu=(r,t)=>t===void 0?!r.deleted:t.sv.has(r.id.client)&&(t.sv.get(r.id.client)||0)>r.id.clock&&!iR(t.ds,r.id),jw=(r,t)=>{const e=Eo(r.meta,jw,fh),n=r.doc.store;e.has(t)||(t.sv.forEach((a,o)=>{a<fn(n,o)&&vo(r,Wt(o,a))}),nR(r,t.ds,a=>{}),e.add(t))};class uR{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const CA=r=>{const t=new Map;return r.clients.forEach((e,n)=>{const a=e[e.length-1];t.set(n,a.id.clock+a.length)}),t},fn=(r,t)=>{const e=r.clients.get(t);if(e===void 0)return 0;const n=e[e.length-1];return n.id.clock+n.length},hR=(r,t)=>{let e=r.clients.get(t.id.client);if(e===void 0)e=[],r.clients.set(t.id.client,e);else{const n=e[e.length-1];if(n.id.clock+n.length!==t.id.clock)throw nr()}e.push(t)},ir=(r,t)=>{let e=0,n=r.length-1,a=r[n],o=a.id.clock;if(o===t)return n;let c=yo(t/(o+a.length-1)*n);for(;e<=n;){if(a=r[c],o=a.id.clock,o<=t){if(t<o+a.length)return c;e=c+1}else n=c-1;c=yo((e+n)/2)}throw nr()},C4=(r,t)=>{const e=r.clients.get(t.client);return e[ir(e,t.clock)]},hw=C4,zw=(r,t,e)=>{const n=ir(t,e),a=t[n];return a.id.clock<e&&a instanceof sn?(t.splice(n+1,0,My(r,a,e-a.id.clock)),n+1):n},vo=(r,t)=>{const e=r.doc.store.clients.get(t.client);return e[zw(r,e,t.clock)]},KC=(r,t,e)=>{const n=t.clients.get(e.client),a=ir(n,e.clock),o=n[a];return e.clock!==o.id.clock+o.length-1&&o.constructor!==Ki&&n.splice(a+1,0,My(r,o,e.clock-o.id.clock+1)),o},T4=(r,t,e)=>{const n=r.clients.get(t.id.client);n[ir(n,t.id.clock)]=e},dR=(r,t,e,n,a)=>{if(n===0)return;const o=e+n;let c=zw(r,t,e),h;do h=t[c++],o<h.id.clock+h.length&&zw(r,t,o),a(h);while(c<t.length&&t[c].id.clock<o)};class k4{constructor(t,e,n){this.doc=t,this.deleteSet=new Wp,this.beforeState=CA(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const WC=(r,t)=>t.deleteSet.clients.size===0&&!KP(t.afterState,(e,n)=>t.beforeState.get(n)!==e)?!1:(SA(t.deleteSet),y4(r,t),Rh(r,t.deleteSet),!0),QC=(r,t,e)=>{const n=t._item;(n===null||n.id.clock<(r.beforeState.get(n.id.client)||0)&&!n.deleted)&&Eo(r.changed,t,fh).add(e)},Gm=(r,t)=>{let e=r[t],n=r[t-1],a=t;for(;a>0;e=n,n=r[--a-1]){if(n.deleted===e.deleted&&n.constructor===e.constructor&&n.mergeWith(e)){e instanceof sn&&e.parentSub!==null&&e.parent._map.get(e.parentSub)===e&&e.parent._map.set(e.parentSub,n);continue}break}const o=t-a;return o&&r.splice(t+1-o,o),o},R4=(r,t,e)=>{for(const[n,a]of r.clients.entries()){const o=t.clients.get(n);for(let c=a.length-1;c>=0;c--){const h=a[c],d=h.clock+h.len;for(let p=ir(o,h.clock),m=o[p];p<o.length&&m.id.clock<d;m=o[++p]){const b=o[p];if(h.clock+h.len<=b.id.clock)break;b instanceof sn&&b.deleted&&!b.keep&&e(b)&&b.gc(t,!1)}}}},M4=(r,t)=>{r.clients.forEach((e,n)=>{const a=t.clients.get(n);for(let o=e.length-1;o>=0;o--){const c=e[o],h=Bk(a.length-1,1+ir(a,c.clock+c.len-1));for(let d=h,p=a[d];d>0&&p.id.clock>=c.clock;p=a[d])d-=1+Gm(a,d)}})},fR=(r,t)=>{if(t<r.length){const e=r[t],n=e.doc,a=n.store,o=e.deleteSet,c=e._mergeStructs;try{SA(o),e.afterState=CA(e.doc.store),n.emit("beforeObserverCalls",[e,n]);const h=[];e.changed.forEach((d,p)=>h.push(()=>{(p._item===null||!p._item.deleted)&&p._callObserver(e,d)})),h.push(()=>{e.changedParentTypes.forEach((d,p)=>{p._dEH.l.length>0&&(p._item===null||!p._item.deleted)&&(d=d.filter(m=>m.target._item===null||!m.target._item.deleted),d.forEach(m=>{m.currentTarget=p,m._path=null}),d.sort((m,b)=>m.path.length-b.path.length),cR(p._dEH,d,e))})}),h.push(()=>n.emit("afterTransaction",[e,n])),wA(h,[]),e._needFormattingCleanup&&W4(e)}finally{n.gc&&R4(o,a,n.gcFilter),M4(o,a),e.afterState.forEach((m,b)=>{const v=e.beforeState.get(b)||0;if(v!==m){const w=a.clients.get(b),A=hc(ir(w,v),1);for(let S=w.length-1;S>=A;)S-=1+Gm(w,S)}});for(let m=c.length-1;m>=0;m--){const{client:b,clock:v}=c[m].id,w=a.clients.get(b),A=ir(w,v);A+1<w.length&&Gm(w,A+1)>1||A>0&&Gm(w,A)}if(!e.local&&e.afterState.get(n.clientID)!==e.beforeState.get(n.clientID)&&(s4(_A,Wk,"[yjs] ",Qk,Zk,"Changed the client-id because another client seems to be using it."),n.clientID=sR()),n.emit("afterTransactionCleanup",[e,n]),n._observers.has("update")){const m=new Qp;WC(m,e)&&n.emit("update",[m.toUint8Array(),e.origin,n,e])}if(n._observers.has("updateV2")){const m=new ec;WC(m,e)&&n.emit("updateV2",[m.toUint8Array(),e.origin,n,e])}const{subdocsAdded:h,subdocsLoaded:d,subdocsRemoved:p}=e;(h.size>0||p.size>0||d.size>0)&&(h.forEach(m=>{m.clientID=n.clientID,m.collectionid==null&&(m.collectionid=n.collectionid),n.subdocs.add(m)}),p.forEach(m=>n.subdocs.delete(m)),n.emit("subdocs",[{loaded:d,added:h,removed:p},n,e]),p.forEach(m=>m.destroy())),r.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,r])):fR(r,t+1)}}},Ee=(r,t,e=null,n=!0)=>{const a=r._transactionCleanups;let o=!1,c=null;r._transaction===null&&(o=!0,r._transaction=new k4(r,e,n),a.push(r._transaction),a.length===1&&r.emit("beforeAllTransactions",[r]),r.emit("beforeTransaction",[r._transaction,r]));try{c=t(r._transaction)}finally{if(o){const h=r._transaction===a[0];r._transaction=null,h&&fR(a,0)}}return c};function*L4(r){const t=It(r.restDecoder);for(let e=0;e<t;e++){const n=It(r.restDecoder),a=r.readClient();let o=It(r.restDecoder);for(let c=0;c<n;c++){const h=r.readInfo();if(h===10){const d=It(r.restDecoder);yield new Wi(Wt(a,o),d),o+=d}else if((ub&h)!==0){const d=(h&(ra|Li))===0,p=new sn(Wt(a,o),null,(h&Li)===Li?r.readLeftID():null,null,(h&ra)===ra?r.readRightID():null,d?r.readParentInfo()?r.readString():r.readLeftID():null,d&&(h&rf)===rf?r.readString():null,LR(r,h));yield p,o+=p.length}else{const d=r.readLen();yield new Ki(Wt(a,o),d),o+=d}}}}class TA{constructor(t,e){this.gen=L4(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Wi);return this.curr}}class kA{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const D4=r=>Ey(r,aR,Qp),N4=(r,t)=>{if(r.constructor===Ki){const{client:e,clock:n}=r.id;return new Ki(Wt(e,n+t),r.length-t)}else if(r.constructor===Wi){const{client:e,clock:n}=r.id;return new Wi(Wt(e,n+t),r.length-t)}else{const e=r,{client:n,clock:a}=e.id;return new sn(Wt(n,a+t),null,Wt(n,a+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},Ey=(r,t=gh,e=ec)=>{if(r.length===1)return r[0];const n=r.map(m=>new t(kh(m)));let a=n.map(m=>new TA(m,!0)),o=null;const c=new e,h=new kA(c);for(;a=a.filter(v=>v.curr!==null),a.sort((v,w)=>{if(v.curr.id.client===w.curr.id.client){const A=v.curr.id.clock-w.curr.id.clock;return A===0?v.curr.constructor===w.curr.constructor?0:v.curr.constructor===Wi?1:-1:A}else return w.curr.id.client-v.curr.id.client}),a.length!==0;){const m=a[0],b=m.curr.id.client;if(o!==null){let v=m.curr,w=!1;for(;v!==null&&v.id.clock+v.length<=o.struct.id.clock+o.struct.length&&v.id.client>=o.struct.id.client;)v=m.next(),w=!0;if(v===null||v.id.client!==b||w&&v.id.clock>o.struct.id.clock+o.struct.length)continue;if(b!==o.struct.id.client)qa(h,o.struct,o.offset),o={struct:v,offset:0},m.next();else if(o.struct.id.clock+o.struct.length<v.id.clock)if(o.struct.constructor===Wi)o.struct.length=v.id.clock+v.length-o.struct.id.clock;else{qa(h,o.struct,o.offset);const A=v.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Wi(Wt(b,o.struct.id.clock+o.struct.length),A),offset:0}}else{const A=o.struct.id.clock+o.struct.length-v.id.clock;A>0&&(o.struct.constructor===Wi?o.struct.length-=A:v=N4(v,A)),o.struct.mergeWith(v)||(qa(h,o.struct,o.offset),o={struct:v,offset:0},m.next())}}else o={struct:m.curr,offset:0},m.next();for(let v=m.curr;v!==null&&v.id.client===b&&v.id.clock===o.struct.id.clock+o.struct.length&&v.constructor!==Wi;v=m.next())qa(h,o.struct,o.offset),o={struct:v,offset:0}}o!==null&&(qa(h,o.struct,o.offset),o=null),RA(h);const d=n.map(m=>EA(m)),p=l4(d);return Rh(c,p),c.toUint8Array()},O4=(r,t,e=gh,n=ec)=>{const a=lR(t),o=new n,c=new kA(o),h=new e(kh(r)),d=new TA(h,!1);for(;d.curr;){const m=d.curr,b=m.id.client,v=a.get(b)||0;if(d.curr.constructor===Wi){d.next();continue}if(m.id.clock+m.length>v)for(qa(c,m,hc(v-m.id.clock,0)),d.next();d.curr&&d.curr.id.client===b;)qa(c,d.curr,0),d.next();else for(;d.curr&&d.curr.id.client===b&&d.curr.id.clock+d.curr.length<=v;)d.next()}RA(c);const p=EA(h);return Rh(o,p),o.toUint8Array()},pR=r=>{r.written>0&&(r.clientStructs.push({written:r.written,restEncoder:Ws(r.encoder.restEncoder)}),r.encoder.restEncoder=hb(),r.written=0)},qa=(r,t,e)=>{r.written>0&&r.currClient!==t.id.client&&pR(r),r.written===0&&(r.currClient=t.id.client,r.encoder.writeClient(t.id.client),Jt(r.encoder.restEncoder,t.id.clock+e)),t.write(r.encoder,e),r.written++},RA=r=>{pR(r);const t=r.encoder.restEncoder;Jt(t,r.clientStructs.length);for(let e=0;e<r.clientStructs.length;e++){const n=r.clientStructs[e];Jt(t,n.written),db(t,n.restEncoder)}},j4=(r,t,e,n)=>{const a=new e(kh(r)),o=new TA(a,!1),c=new n,h=new kA(c);for(let p=o.curr;p!==null;p=o.next())qa(h,t(p),0);RA(h);const d=EA(a);return Rh(c,d),c.toUint8Array()},z4=r=>j4(r,UF,gh,Qp),ZC="You must not compute changes after the event-handler fired.";class pb{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=P4(this.currentTarget,this.target))}deletes(t){return iR(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw bo(ZC);const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(a=>{if(a!==null){const o=e._map.get(a);let c,h;if(this.adds(o)){let d=o.left;for(;d!==null&&this.adds(d);)d=d.left;if(this.deletes(o))if(d!==null&&this.deletes(d))c="delete",h=rw(d.content.getContent());else return;else d!==null&&this.deletes(d)?(c="update",h=rw(d.content.getContent())):(c="add",h=void 0)}else if(this.deletes(o))c="delete",h=rw(o.content.getContent());else return;t.set(a,{action:c,oldValue:h})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw bo(ZC);const e=this.target,n=fh(),a=fh(),o=[];if(t={added:n,deleted:a,delta:o,keys:this.keys},this.transaction.changed.get(e).has(null)){let h=null;const d=()=>{h&&o.push(h)};for(let p=e._start;p!==null;p=p.right)p.deleted?this.deletes(p)&&!this.adds(p)&&((h===null||h.delete===void 0)&&(d(),h={delete:0}),h.delete+=p.length,a.add(p)):this.adds(p)?((h===null||h.insert===void 0)&&(d(),h={insert:[]}),h.insert=h.insert.concat(p.content.getContent()),n.add(p)):((h===null||h.retain===void 0)&&(d(),h={retain:0}),h.retain+=p.length);h!==null&&h.retain===void 0&&d()}this._changes=t}return t}}const P4=(r,t)=>{const e=[];for(;t._item!==null&&t!==r;){if(t._item.parentSub!==null)e.unshift(t._item.parentSub);else{let n=0,a=t._item.parent._start;for(;a!==t._item&&a!==null;)!a.deleted&&a.countable&&(n+=a.length),a=a.right;e.unshift(n)}t=t._item.parent}return e},In=()=>{r4("Invalid access: Add Yjs type to a document before reading data.")},gR=80;let MA=0;class F4{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=MA++}}const I4=r=>{r.timestamp=MA++},mR=(r,t,e)=>{r.p.marker=!1,r.p=t,t.marker=!0,r.index=e,r.timestamp=MA++},B4=(r,t,e)=>{if(r.length>=gR){const n=r.reduce((a,o)=>a.timestamp<o.timestamp?a:o);return mR(n,t,e),n}else{const n=new F4(t,e);return r.push(n),n}},gb=(r,t)=>{if(r._start===null||t===0||r._searchMarker===null)return null;const e=r._searchMarker.length===0?null:r._searchMarker.reduce((o,c)=>Hm(t-o.index)<Hm(t-c.index)?o:c);let n=r._start,a=0;for(e!==null&&(n=e.p,a=e.index,I4(e));n.right!==null&&a<t;){if(!n.deleted&&n.countable){if(t<a+n.length)break;a+=n.length}n=n.right}for(;n.left!==null&&a>t;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);return e!==null&&Hm(e.index-a)<n.parent.length/gR?(mR(e,n,a),e):B4(r._searchMarker,n,a)},uf=(r,t,e)=>{for(let n=r.length-1;n>=0;n--){const a=r[n];if(e>0){let o=a.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(a.index-=o.length);if(o===null||o.marker===!0){r.splice(n,1);continue}a.p=o,o.marker=!0}(t<a.index||e>0&&t===a.index)&&(a.index=hc(t,a.index+e))}},mb=(r,t,e)=>{const n=r,a=t.changedParentTypes;for(;Eo(a,r,()=>[]).push(e),r._item!==null;)r=r._item.parent;cR(n._eH,e,t)};class Tn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=XC(),this._dEH=XC(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw Zs()}clone(){throw Zs()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){YC(this._eH,t)}observeDeep(t){YC(this._dEH,t)}unobserve(t){$C(this._eH,t)}unobserveDeep(t){$C(this._dEH,t)}toJSON(){}}const yR=(r,t,e)=>{r.doc??In(),t<0&&(t=r._length+t),e<0&&(e=r._length+e);let n=e-t;const a=[];let o=r._start;for(;o!==null&&n>0;){if(o.countable&&!o.deleted){const c=o.content.getContent();if(c.length<=t)t-=c.length;else{for(let h=t;h<c.length&&n>0;h++)a.push(c[h]),n--;t=0}}o=o.right}return a},bR=r=>{r.doc??In();const t=[];let e=r._start;for(;e!==null;){if(e.countable&&!e.deleted){const n=e.content.getContent();for(let a=0;a<n.length;a++)t.push(n[a])}e=e.right}return t},hf=(r,t)=>{let e=0,n=r._start;for(r.doc??In();n!==null;){if(n.countable&&!n.deleted){const a=n.content.getContent();for(let o=0;o<a.length;o++)t(a[o],e++,r)}n=n.right}},vR=(r,t)=>{const e=[];return hf(r,(n,a)=>{e.push(t(n,a,r))}),e},U4=r=>{let t=r._start,e=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(e===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};e=t.content.getContent(),n=0,t=t.right}const a=e[n++];return e.length<=n&&(e=null),{done:!1,value:a}}}},wR=(r,t)=>{r.doc??In();const e=gb(r,t);let n=r._start;for(e!==null&&(n=e.p,t-=e.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},xy=(r,t,e,n)=>{let a=e;const o=r.doc,c=o.clientID,h=o.store,d=e===null?t._start:e.right;let p=[];const m=()=>{p.length>0&&(a=new sn(Wt(c,fn(h,c)),a,a&&a.lastId,d,d&&d.id,t,null,new ic(p)),a.integrate(r,0),p=[])};n.forEach(b=>{if(b===null)p.push(b);else switch(b.constructor){case Number:case Object:case Boolean:case Array:case String:p.push(b);break;default:switch(m(),b.constructor){case Uint8Array:case ArrayBuffer:a=new sn(Wt(c,fn(h,c)),a,a&&a.lastId,d,d&&d.id,t,null,new Zp(new Uint8Array(b))),a.integrate(r,0);break;case Mh:a=new sn(Wt(c,fn(h,c)),a,a&&a.lastId,d,d&&d.id,t,null,new Jp(b)),a.integrate(r,0);break;default:if(b instanceof Tn)a=new sn(Wt(c,fn(h,c)),a,a&&a.lastId,d,d&&d.id,t,null,new pa(b)),a.integrate(r,0);else throw new Error("Unexpected content type in insert operation")}}}),m()},_R=()=>bo("Length exceeded!"),AR=(r,t,e,n)=>{if(e>t._length)throw _R();if(e===0)return t._searchMarker&&uf(t._searchMarker,e,n.length),xy(r,t,null,n);const a=e,o=gb(t,e);let c=t._start;for(o!==null&&(c=o.p,e-=o.index,e===0&&(c=c.prev,e+=c&&c.countable&&!c.deleted?c.length:0));c!==null;c=c.right)if(!c.deleted&&c.countable){if(e<=c.length){e<c.length&&vo(r,Wt(c.id.client,c.id.clock+e));break}e-=c.length}return t._searchMarker&&uf(t._searchMarker,a,n.length),xy(r,t,c,n)},H4=(r,t,e)=>{let a=(t._searchMarker||[]).reduce((o,c)=>c.index>o.index?c:o,{index:0,p:t._start}).p;if(a)for(;a.right;)a=a.right;return xy(r,t,a,e)},SR=(r,t,e,n)=>{if(n===0)return;const a=e,o=n,c=gb(t,e);let h=t._start;for(c!==null&&(h=c.p,e-=c.index);h!==null&&e>0;h=h.right)!h.deleted&&h.countable&&(e<h.length&&vo(r,Wt(h.id.client,h.id.clock+e)),e-=h.length);for(;n>0&&h!==null;)h.deleted||(n<h.length&&vo(r,Wt(h.id.client,h.id.clock+n)),h.delete(r),n-=h.length),h=h.right;if(n>0)throw _R();t._searchMarker&&uf(t._searchMarker,a,-o+n)},Cy=(r,t,e)=>{const n=t._map.get(e);n!==void 0&&n.delete(r)},LA=(r,t,e,n)=>{const a=t._map.get(e)||null,o=r.doc,c=o.clientID;let h;if(n==null)h=new ic([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:h=new ic([n]);break;case Uint8Array:h=new Zp(n);break;case Mh:h=new Jp(n);break;default:if(n instanceof Tn)h=new pa(n);else throw new Error("Unexpected content type")}new sn(Wt(c,fn(o.store,c)),a,a&&a.lastId,null,null,t,e,h).integrate(r,0)},DA=(r,t)=>{r.doc??In();const e=r._map.get(t);return e!==void 0&&!e.deleted?e.content.getContent()[e.length-1]:void 0},ER=r=>{const t={};return r.doc??In(),r._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},xR=(r,t)=>{r.doc??In();const e=r._map.get(t);return e!==void 0&&!e.deleted},q4=(r,t)=>{const e={};return r._map.forEach((n,a)=>{let o=n;for(;o!==null&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;o!==null&&eu(o,t)&&(e[a]=o.content.getContent()[o.length-1])}),e},Rm=r=>(r.doc??In(),a4(r._map.entries(),t=>!t[1].deleted));class V4 extends pb{}class fu extends Tn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new fu;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new fu}clone(){const t=new fu;return t.insert(0,this.toArray().map(e=>e instanceof Tn?e.clone():e)),t}get length(){return this.doc??In(),this._length}_callObserver(t,e){super._callObserver(t,e),mb(this,t,new V4(this,t))}insert(t,e){this.doc!==null?Ee(this.doc,n=>{AR(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.doc!==null?Ee(this.doc,e=>{H4(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){this.doc!==null?Ee(this.doc,n=>{SR(n,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return wR(this,t)}toArray(){return bR(this)}slice(t=0,e=this.length){return yR(this,t,e)}toJSON(){return this.map(t=>t instanceof Tn?t.toJSON():t)}map(t){return vR(this,t)}forEach(t){hf(this,t)}[Symbol.iterator](){return U4(this)}_write(t){t.writeTypeRef(gI)}}const G4=r=>new fu;class X4 extends pb{constructor(t,e,n){super(t,e),this.keysChanged=n}}class mh extends Tn{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((n,a)=>{this.set(a,n)}),this._prelimContent=null}_copy(){return new mh}clone(){const t=new mh;return this.forEach((e,n)=>{t.set(n,e instanceof Tn?e.clone():e)}),t}_callObserver(t,e){mb(this,t,new X4(this,t,e))}toJSON(){this.doc??In();const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const a=e.content.getContent()[e.length-1];t[n]=a instanceof Tn?a.toJSON():a}}),t}get size(){return[...Rm(this)].length}keys(){return uw(Rm(this),t=>t[0])}values(){return uw(Rm(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return uw(Rm(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??In(),this._map.forEach((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Ee(this.doc,e=>{Cy(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return this.doc!==null?Ee(this.doc,n=>{LA(n,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return DA(this,t)}has(t){return xR(this,t)}clear(){this.doc!==null?Ee(this.doc,t=>{this.forEach(function(e,n,a){Cy(t,a,n)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(mI)}}const Y4=r=>new mh,po=(r,t)=>r===t||typeof r=="object"&&typeof t=="object"&&r&&t&&IF(r,t);class Pw{constructor(t,e,n,a){this.left=t,this.right=e,this.index=n,this.currentAttributes=a}forward(){switch(this.right===null&&nr(),this.right.content.constructor){case rn:this.right.deleted||Lh(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const JC=(r,t,e)=>{for(;t.right!==null&&e>0;){switch(t.right.content.constructor){case rn:t.right.deleted||Lh(t.currentAttributes,t.right.content);break;default:t.right.deleted||(e<t.right.length&&vo(r,Wt(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Mm=(r,t,e,n)=>{const a=new Map,o=n?gb(t,e):null;if(o){const c=new Pw(o.p.left,o.p,o.index,a);return JC(r,c,e-o.index)}else{const c=new Pw(null,t._start,0,a);return JC(r,c,e)}},CR=(r,t,e,n)=>{for(;e.right!==null&&(e.right.deleted===!0||e.right.content.constructor===rn&&po(n.get(e.right.content.key),e.right.content.value));)e.right.deleted||n.delete(e.right.content.key),e.forward();const a=r.doc,o=a.clientID;n.forEach((c,h)=>{const d=e.left,p=e.right,m=new sn(Wt(o,fn(a.store,o)),d,d&&d.lastId,p,p&&p.id,t,null,new rn(h,c));m.integrate(r,0),e.right=m,e.forward()})},Lh=(r,t)=>{const{key:e,value:n}=t;n===null?r.delete(e):r.set(e,n)},TR=(r,t)=>{for(;r.right!==null;){if(!(r.right.deleted||r.right.content.constructor===rn&&po(t[r.right.content.key]??null,r.right.content.value)))break;r.forward()}},kR=(r,t,e,n)=>{const a=r.doc,o=a.clientID,c=new Map;for(const h in n){const d=n[h],p=e.currentAttributes.get(h)??null;if(!po(p,d)){c.set(h,p);const{left:m,right:b}=e;e.right=new sn(Wt(o,fn(a.store,o)),m,m&&m.lastId,b,b&&b.id,t,null,new rn(h,d)),e.right.integrate(r,0),e.forward()}}return c},dw=(r,t,e,n,a)=>{e.currentAttributes.forEach((v,w)=>{a[w]===void 0&&(a[w]=null)});const o=r.doc,c=o.clientID;TR(e,a);const h=kR(r,t,e,a),d=n.constructor===String?new sr(n):n instanceof Tn?new pa(n):new dc(n);let{left:p,right:m,index:b}=e;t._searchMarker&&uf(t._searchMarker,e.index,d.getLength()),m=new sn(Wt(c,fn(o.store,c)),p,p&&p.lastId,m,m&&m.id,t,null,d),m.integrate(r,0),e.right=m,e.index=b,e.forward(),CR(r,t,e,h)},tT=(r,t,e,n,a)=>{const o=r.doc,c=o.clientID;TR(e,a);const h=kR(r,t,e,a);t:for(;e.right!==null&&(n>0||h.size>0&&(e.right.deleted||e.right.content.constructor===rn));){if(!e.right.deleted)switch(e.right.content.constructor){case rn:{const{key:d,value:p}=e.right.content,m=a[d];if(m!==void 0){if(po(m,p))h.delete(d);else{if(n===0)break t;h.set(d,p)}e.right.delete(r)}else e.currentAttributes.set(d,p);break}default:n<e.right.length&&vo(r,Wt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length;break}e.forward()}if(n>0){let d="";for(;n>0;n--)d+=`
`;e.right=new sn(Wt(c,fn(o.store,c)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new sr(d)),e.right.integrate(r,0),e.forward()}CR(r,t,e,h)},RR=(r,t,e,n,a)=>{let o=t;const c=_s();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===rn){const p=o.content;c.set(p.key,p)}o=o.right}let h=0,d=!1;for(;t!==o;){if(e===t&&(d=!0),!t.deleted){const p=t.content;switch(p.constructor){case rn:{const{key:m,value:b}=p,v=n.get(m)??null;(c.get(m)!==p||v===b)&&(t.delete(r),h++,!d&&(a.get(m)??null)===b&&v!==b&&(v===null?a.delete(m):a.set(m,v))),!d&&!t.deleted&&Lh(a,p);break}}}t=t.right}return h},$4=(r,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===rn){const n=t.content.key;e.has(n)?t.delete(r):e.add(n)}t=t.left}},K4=r=>{let t=0;return Ee(r.doc,e=>{let n=r._start,a=r._start,o=_s();const c=Mw(o);for(;a;){if(a.deleted===!1)switch(a.content.constructor){case rn:Lh(c,a.content);break;default:t+=RR(e,n,a,o,c),o=Mw(c),n=a;break}a=a.right}}),t},W4=r=>{const t=new Set,e=r.doc;for(const[n,a]of r.afterState.entries()){const o=r.beforeState.get(n)||0;a!==o&&dR(r,e.store.clients.get(n),o,a,c=>{!c.deleted&&c.content.constructor===rn&&c.constructor!==Ki&&t.add(c.parent)})}Ee(e,n=>{nR(r,r.deleteSet,a=>{if(a instanceof Ki||!a.parent._hasFormatting||t.has(a.parent))return;const o=a.parent;a.content.constructor===rn?t.add(o):$4(n,a)});for(const a of t)K4(a)})},eT=(r,t,e)=>{const n=e,a=Mw(t.currentAttributes),o=t.right;for(;e>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case pa:case dc:case sr:e<t.right.length&&vo(r,Wt(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(r);break}t.forward()}o&&RR(r,o,t.right,a,t.currentAttributes);const c=(t.left||t.right).parent;return c._searchMarker&&uf(c._searchMarker,t.index,-n+e),t};class Q4 extends pb{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(a=>{a===null?this.childListChanged=!0:this.keysChanged.add(a)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,e=[];Ee(t,n=>{const a=new Map,o=new Map;let c=this.target._start,h=null;const d={};let p="",m=0,b=0;const v=()=>{if(h!==null){let w=null;switch(h){case"delete":b>0&&(w={delete:b}),b=0;break;case"insert":(typeof p=="object"||p.length>0)&&(w={insert:p},a.size>0&&(w.attributes={},a.forEach((A,S)=>{A!==null&&(w.attributes[S]=A)}))),p="";break;case"retain":m>0&&(w={retain:m},zF(d)||(w.attributes=NF({},d))),m=0;break}w&&e.push(w),h=null}};for(;c!==null;){switch(c.content.constructor){case pa:case dc:this.adds(c)?this.deletes(c)||(v(),h="insert",p=c.content.getContent()[0],v()):this.deletes(c)?(h!=="delete"&&(v(),h="delete"),b+=1):c.deleted||(h!=="retain"&&(v(),h="retain"),m+=1);break;case sr:this.adds(c)?this.deletes(c)||(h!=="insert"&&(v(),h="insert"),p+=c.content.str):this.deletes(c)?(h!=="delete"&&(v(),h="delete"),b+=c.length):c.deleted||(h!=="retain"&&(v(),h="retain"),m+=c.length);break;case rn:{const{key:w,value:A}=c.content;if(this.adds(c)){if(!this.deletes(c)){const S=a.get(w)??null;po(S,A)?A!==null&&c.delete(n):(h==="retain"&&v(),po(A,o.get(w)??null)?delete d[w]:d[w]=A)}}else if(this.deletes(c)){o.set(w,A);const S=a.get(w)??null;po(S,A)||(h==="retain"&&v(),d[w]=S)}else if(!c.deleted){o.set(w,A);const S=d[w];S!==void 0&&(po(S,A)?S!==null&&c.delete(n):(h==="retain"&&v(),A===null?delete d[w]:d[w]=A))}c.deleted||(h==="insert"&&v(),Lh(a,c.content));break}}c=c.right}for(v();e.length>0;){const w=e[e.length-1];if(w.retain!==void 0&&w.attributes===void 0)e.pop();else break}}),this._delta=e}return this._delta}}class yh extends Tn{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??In(),this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new yh}clone(){const t=new yh;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new Q4(this,t,e);mb(this,t,n),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??In();let t="",e=this._start;for(;e!==null;)!e.deleted&&e.countable&&e.content.constructor===sr&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){this.doc!==null?Ee(this.doc,n=>{const a=new Pw(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const c=t[o];if(c.insert!==void 0){const h=!e&&typeof c.insert=="string"&&o===t.length-1&&a.right===null&&c.insert.slice(-1)===`
`?c.insert.slice(0,-1):c.insert;(typeof h!="string"||h.length>0)&&dw(n,this,a,h,c.attributes||{})}else c.retain!==void 0?tT(n,this,a,c.retain,c.attributes||{}):c.delete!==void 0&&eT(n,a,c.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,n){this.doc??In();const a=[],o=new Map,c=this.doc;let h="",d=this._start;function p(){if(h.length>0){const b={};let v=!1;o.forEach((A,S)=>{v=!0,b[S]=A});const w={insert:h};v&&(w.attributes=b),a.push(w),h=""}}const m=()=>{for(;d!==null;){if(eu(d,t)||e!==void 0&&eu(d,e))switch(d.content.constructor){case sr:{const b=o.get("ychange");t!==void 0&&!eu(d,t)?(b===void 0||b.user!==d.id.client||b.type!=="removed")&&(p(),o.set("ychange",n?n("removed",d.id):{type:"removed"})):e!==void 0&&!eu(d,e)?(b===void 0||b.user!==d.id.client||b.type!=="added")&&(p(),o.set("ychange",n?n("added",d.id):{type:"added"})):b!==void 0&&(p(),o.delete("ychange")),h+=d.content.str;break}case pa:case dc:{p();const b={insert:d.content.getContent()[0]};if(o.size>0){const v={};b.attributes=v,o.forEach((w,A)=>{v[A]=w})}a.push(b);break}case rn:eu(d,t)&&(p(),Lh(o,d.content));break}d=d.right}p()};return t||e?Ee(c,b=>{t&&jw(b,t),e&&jw(b,e),m()},"cleanup"):m(),a}insert(t,e,n){if(e.length<=0)return;const a=this.doc;a!==null?Ee(a,o=>{const c=Mm(o,this,t,!n);n||(n={},c.currentAttributes.forEach((h,d)=>{n[d]=h})),dw(o,this,c,e,n)}):this._pending.push(()=>this.insert(t,e,n))}insertEmbed(t,e,n){const a=this.doc;a!==null?Ee(a,o=>{const c=Mm(o,this,t,!n);dw(o,this,c,e,n||{})}):this._pending.push(()=>this.insertEmbed(t,e,n||{}))}delete(t,e){if(e===0)return;const n=this.doc;n!==null?Ee(n,a=>{eT(a,Mm(a,this,t,!0),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,n){if(e===0)return;const a=this.doc;a!==null?Ee(a,o=>{const c=Mm(o,this,t,!1);c.right!==null&&tT(o,this,c,e,n)}):this._pending.push(()=>this.format(t,e,n))}removeAttribute(t){this.doc!==null?Ee(this.doc,e=>{Cy(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){this.doc!==null?Ee(this.doc,n=>{LA(n,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return DA(this,t)}getAttributes(){return ER(this)}_write(t){t.writeTypeRef(yI)}}const Z4=r=>new yh;class fw{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??In()}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(e)))do if(e=t.content.type,!t.deleted&&(e.constructor===bh||e.constructor===nc)&&e._start!==null)t=e._start;else for(;t!==null;){const n=t.next;if(n!==null){t=n;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class nc extends Tn{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new nc}clone(){const t=new nc;return t.insert(0,this.toArray().map(e=>e instanceof Tn?e.clone():e)),t}get length(){return this.doc??In(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new fw(this,t)}querySelector(t){t=t.toUpperCase();const n=new fw(this,a=>a.nodeName&&a.nodeName.toUpperCase()===t).next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),tc(new fw(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){mb(this,t,new eI(this,e,t))}toString(){return vR(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const a=t.createDocumentFragment();return n!==void 0&&n._createAssociation(a,this),hf(this,o=>{a.insertBefore(o.toDOM(t,e,n),null)}),a}insert(t,e){this.doc!==null?Ee(this.doc,n=>{AR(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(this.doc!==null)Ee(this.doc,n=>{const a=t&&t instanceof Tn?t._item:t;xy(n,this,a,e)});else{const n=this._prelimContent,a=t===null?0:n.findIndex(o=>o===t)+1;if(a===0&&t!==null)throw bo("Reference item not found");n.splice(a,0,...e)}}delete(t,e=1){this.doc!==null?Ee(this.doc,n=>{SR(n,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return bR(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return wR(this,t)}slice(t=0,e=this.length){return yR(this,t,e)}forEach(t){hf(this,t)}_write(t){t.writeTypeRef(vI)}}const J4=r=>new nc;class bh extends nc{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((n,a)=>{this.setAttribute(a,n)}),this._prelimAttrs=null}_copy(){return new bh(this.nodeName)}clone(){const t=new bh(this.nodeName),e=this.getAttributes();return jF(e,(n,a)=>{typeof n=="string"&&t.setAttribute(a,n)}),t.insert(0,this.toArray().map(n=>n instanceof Tn?n.clone():n)),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const h in t)n.push(h);n.sort();const a=n.length;for(let h=0;h<a;h++){const d=n[h];e.push(d+'="'+t[d]+'"')}const o=this.nodeName.toLocaleLowerCase(),c=e.length>0?" "+e.join(" "):"";return`<${o}${c}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Ee(this.doc,e=>{Cy(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){this.doc!==null?Ee(this.doc,n=>{LA(n,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return DA(this,t)}hasAttribute(t){return xR(this,t)}getAttributes(t){return t?q4(this,t):ER(this)}toDOM(t=document,e={},n){const a=t.createElement(this.nodeName),o=this.getAttributes();for(const c in o){const h=o[c];typeof h=="string"&&a.setAttribute(c,h)}return hf(this,c=>{a.appendChild(c.toDOM(t,e,n))}),n!==void 0&&n._createAssociation(a,this),a}_write(t){t.writeTypeRef(bI),t.writeKey(this.nodeName)}}const tI=r=>new bh(r.readKey());class eI extends pb{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(a=>{a===null?this.childListChanged=!0:this.attributesChanged.add(a)})}}class Ty extends mh{constructor(t){super(),this.hookName=t}_copy(){return new Ty(this.hookName)}clone(){const t=new Ty(this.hookName);return this.forEach((e,n)=>{t.set(n,e)}),t}toDOM(t=document,e={},n){const a=e[this.hookName];let o;return a!==void 0?o=a.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(o,this),o}_write(t){t.writeTypeRef(wI),t.writeKey(this.hookName)}}const nI=r=>new Ty(r.readKey());class ky extends yh{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new ky}clone(){const t=new ky;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const a=t.createTextNode(this.toString());return n!==void 0&&n._createAssociation(a,this),a}toString(){return this.toDelta().map(t=>{const e=[];for(const a in t.attributes){const o=[];for(const c in t.attributes[a])o.push({key:c,value:t.attributes[a][c]});o.sort((c,h)=>c.key<h.key?-1:1),e.push({nodeName:a,attrs:o})}e.sort((a,o)=>a.nodeName<o.nodeName?-1:1);let n="";for(let a=0;a<e.length;a++){const o=e[a];n+=`<${o.nodeName}`;for(let c=0;c<o.attrs.length;c++){const h=o.attrs[c];n+=` ${h.key}="${h.value}"`}n+=">"}n+=t.insert;for(let a=e.length-1;a>=0;a--)n+=`</${e[a].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(_I)}}const iI=r=>new ky;class NA{constructor(t,e){this.id=t,this.length=e}get deleted(){throw Zs()}mergeWith(t){return!1}write(t,e,n){throw Zs()}integrate(t,e){throw Zs()}}const sI=0;class Ki extends NA{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),hR(t.doc.store,this)}write(t,e){t.writeInfo(sI),t.writeLen(this.length-e)}getMissing(t,e){return null}}class Zp{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Zp(this.content)}splice(t){throw Zs()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const rI=r=>new Zp(r.readBuf());class df{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new df(this.len)}splice(t){const e=new df(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){Sy(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const aI=r=>new df(r.readLen()),MR=(r,t)=>new Mh({guid:r,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Jp{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),t.meta!==null&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Jp(MR(this.doc.guid,this.opts))}splice(t){throw Zs()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const oI=r=>new Jp(MR(r.readString(),r.readAny()));class dc{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new dc(this.embed)}splice(t){throw Zs()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const lI=r=>new dc(r.readJSON());class rn{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new rn(this.key,this.value)}splice(t){throw Zs()}mergeWith(t){return!1}integrate(t,e){const n=e.parent;n._searchMarker=null,n._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const cI=r=>new rn(r.readKey(),r.readJSON());class Ry{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Ry(this.arr)}splice(t){const e=new Ry(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const o=this.arr[a];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const uI=r=>{const t=r.readLen(),e=[];for(let n=0;n<t;n++){const a=r.readString();a==="undefined"?e.push(void 0):e.push(JSON.parse(a))}return new Ry(e)},hI=Ay("node_env")==="development";class ic{constructor(t){this.arr=t,hI&&Yk(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ic(this.arr)}splice(t){const e=new ic(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const o=this.arr[a];t.writeAny(o)}}getRef(){return 8}}const dI=r=>{const t=r.readLen(),e=[];for(let n=0;n<t;n++)e.push(r.readAny());return new ic(e)};class sr{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new sr(this.str)}splice(t){const e=new sr(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"",e.str=""+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(e===0?this.str:this.str.slice(e))}getRef(){return 4}}const fI=r=>new sr(r.readString()),pI=[G4,Y4,Z4,tI,J4,nI,iI],gI=0,mI=1,yI=2,bI=3,vI=4,wI=5,_I=6;class pa{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new pa(this.type._copy())}splice(t){throw Zs()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;e!==null;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;e!==null;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(t,!0),n=n.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const AI=r=>new pa(pI[r.readTypeRef()](r)),My=(r,t,e)=>{const{client:n,clock:a}=t.id,o=new sn(Wt(n,a+e),t,Wt(n,a+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=Wt(t.redone.client,t.redone.clock+e)),t.right=o,o.right!==null&&(o.right.left=o),r._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=e,o};class sn extends NA{constructor(t,e,n,a,o,c,h,d){super(t,d.getLength()),this.origin=n,this.left=e,this.right=a,this.rightOrigin=o,this.parent=c,this.parentSub=h,this.redone=null,this.content=d,this.info=this.content.isCountable()?jC:0}set marker(t){(this.info&ow)>0!==t&&(this.info^=ow)}get marker(){return(this.info&ow)>0}get keep(){return(this.info&OC)>0}set keep(t){this.keep!==t&&(this.info^=OC)}get countable(){return(this.info&jC)>0}get deleted(){return(this.info&aw)>0}set deleted(t){this.deleted!==t&&(this.info^=aw)}markDeleted(){this.info|=aw}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=fn(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=fn(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===du&&this.id.client!==this.parent.client&&this.parent.clock>=fn(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=KC(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=vo(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Ki||this.right&&this.right.constructor===Ki)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===sn?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===sn&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===du){const n=hw(e,this.parent);n.constructor===Ki?this.parent=null:this.parent=n.content.type}return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=KC(t,t.doc.store,Wt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,a;if(n!==null)a=n.right;else if(this.parentSub!==null)for(a=this.parent._map.get(this.parentSub)||null;a!==null&&a.left!==null;)a=a.left;else a=this.parent._start;const o=new Set,c=new Set;for(;a!==null&&a!==this.right;){if(c.add(a),o.add(a),km(this.origin,a.origin)){if(a.id.client<this.id.client)n=a,o.clear();else if(km(this.rightOrigin,a.rightOrigin))break}else if(a.origin!==null&&c.has(hw(t.doc.store,a.origin)))o.has(hw(t.doc.store,a.origin))||(n=a,o.clear());else break;a=a.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),hR(t.doc.store,this),this.content.integrate(t,this),QC(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new Ki(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Wt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&km(t.origin,this.lastId)&&this.right===t&&km(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(n=>{n.p===t&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&this.parentSub===null&&(e._length-=this.length),this.markDeleted(),Sy(t.deleteSet,this.id.client,this.id.clock,this.length),QC(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw nr();this.content.gc(t),e?T4(t,this,new Ki(this.id,this.length)):this.content=new df(this.length)}write(t,e){const n=e>0?Wt(this.id.client,this.id.clock+e-1):this.origin,a=this.rightOrigin,o=this.parentSub,c=this.content.getRef()&ub|(n===null?0:Li)|(a===null?0:ra)|(o===null?0:rf);if(t.writeInfo(c),n!==null&&t.writeLeftID(n),a!==null&&t.writeRightID(a),n===null&&a===null){const h=this.parent;if(h._item!==void 0){const d=h._item;if(d===null){const p=x4(h);t.writeParentInfo(!0),t.writeString(p)}else t.writeParentInfo(!1),t.writeLeftID(d.id)}else h.constructor===String?(t.writeParentInfo(!0),t.writeString(h)):h.constructor===du?(t.writeParentInfo(!1),t.writeLeftID(h)):nr();o!==null&&t.writeString(o)}this.content.write(t,e)}}const LR=(r,t)=>SI[t&ub](r),SI=[()=>{nr()},aI,uI,rI,fI,lI,cI,AI,dI,oI,()=>{nr()}],EI=10;class Wi extends NA{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){nr()}write(t,e){t.writeInfo(EI),Jt(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const DR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},NR="__ $YJS$ __";DR[NR]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");DR[NR]=!0;function xI(r){var a;const t=[],e=r.split(`
`);let n="main.tex";for(let o=0;o<e.length;o++){const c=e[o],h=c.match(/^\(([^)]+\.(?:tex|sty|cls|def))/);if(h&&(n=h[1]),c.startsWith("!")){const d=c.substring(1).trim();let p,m,b=d;for(let v=o+1;v<Math.min(o+5,e.length);v++){const w=e[v],A=w.match(/^l\.(\d+)\s+(.*)/);if(A&&(p=parseInt(A[1]),m=A[2]),w&&!w.startsWith("!")&&!w.startsWith("l.")&&(b+=`
`+w.trim()),A||v-o>3)break}t.push({type:"error",message:d,line:p,file:n,lineContent:m,fullMessage:b})}if(c.includes("Warning:")||c.includes("warning:")){const d=c.match(/(?:LaTeX|Package|Class)\s+(\w+)?\s*Warning:\s*(.+)/);if(d){const p=d[2],m=c.match(/on input line (\d+)/);t.push({type:"warning",message:p,line:m?parseInt(m[1]):void 0,file:n})}}if(c.includes("File")&&c.includes("not found")){const d=c.match(/File\s+['`"]([^'"]+)[''"]\s+not found/);d&&t.push({type:"error",message:`File not found: ${d[1]}`,file:n,fullMessage:"This file is required but could not be loaded. Make sure it exists in your project or is available in the TeXLive distribution."})}if(c.includes("Package")&&c.includes("not found")){const d=c.match(/Package\s+['`"]?(\w+)['`"]?\s+(?:not found|Error)/i);d&&t.push({type:"error",message:`Package not found: ${d[1]}`,fullMessage:`The package '${d[1]}' is not available. Install it via your TeXLive distribution or remove it from your document.`})}if(c.includes("Undefined control sequence")){const d=(a=e[o+1])==null?void 0:a.match(/\\([a-zA-Z]+)/);t.push({type:"error",message:`Undefined control sequence${d?`: \\${d[1]}`:""}`,line:void 0,file:n,fullMessage:"A command was used that LaTeX doesn't recognize. Check for typos or missing packages."})}}return t}function CI(r){if(r.length===0)return" No errors found";const t=r.filter(a=>a.type==="error").length,e=r.filter(a=>a.type==="warning").length;let n=` Compilation Summary:
`;return n+=`    ${t} error(s)
`,n+=`     ${e} warning(s)

`,r.forEach((a,o)=>{const c=a.type==="error"?"":a.type==="warning"?"":"";n+=`${c} ${a.type.toUpperCase()}`,a.line&&(n+=` at line ${a.line}`),a.file&&a.file!=="main.tex"&&(n+=` in ${a.file}`),n+=`
   ${a.message}
`,a.lineContent&&(n+=`   Code: ${a.lineContent}
`),o<r.length-1&&(n+=`
`)}),n}function TI({isOpen:r,onClose:t,projectId:e,projectName:n,collaborators:a,onCollaboratorAdded:o}){const[c,h]=L.useState(""),[d,p]=L.useState("EDITOR"),[m,b]=L.useState(!1),[v,w]=L.useState(null),[A,S]=L.useState(""),[R,M]=L.useState(!1),D=`${window.location.origin}/editor/${e}`,O=()=>{navigator.clipboard.writeText(D),M(!0),setTimeout(()=>M(!1),2e3)},I=async P=>{P.preventDefault(),S(""),b(!0);try{await Cn.addCollaborator(e,c,d),h(""),o==null||o()}catch(H){S(H.message||"Khng th thm cng tc vin")}finally{b(!1)}},U=async P=>{w(P);try{await Cn.removeCollaborator(e,P),o==null||o()}catch(H){S(H.message||"Khng th xa cng tc vin")}finally{w(null)}};return r?E.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-card border rounded-lg shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[E.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(mk,{className:"h-5 w-5 text-primary"}),E.jsx("h2",{className:"font-semibold",children:"Chia s d n"})]}),E.jsx("button",{onClick:t,className:"p-1 hover:bg-accent rounded",children:E.jsx(N3,{className:"h-5 w-5"})})]}),E.jsxs("div",{className:"p-4 space-y-4",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm text-muted-foreground",children:"D n"}),E.jsx("p",{className:"font-medium",children:n})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Link chia s"}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",value:D,readOnly:!0,className:"flex-1 px-3 py-2 bg-muted border rounded text-sm"}),E.jsx(Te,{variant:"outline",size:"sm",onClick:O,className:"gap-2",children:R?E.jsxs(E.Fragment,{children:[E.jsx(Xj,{className:"h-4 w-4"})," copy"]}):E.jsxs(E.Fragment,{children:[E.jsx(Jj,{className:"h-4 w-4"}),"Copy"]})})]})]}),E.jsxs("form",{onSubmit:I,className:"space-y-3",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Thm cng tc vin"}),E.jsx("input",{type:"email",value:c,onChange:P=>h(P.target.value),placeholder:"Email ngi dng",className:"w-full px-3 py-2 bg-background border rounded",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quyn truy cp"}),E.jsxs("select",{value:d,onChange:P=>p(P.target.value),className:"w-full px-3 py-2 bg-background border rounded",children:[E.jsx("option",{value:"VIEWER",children:"Viewer (Ch xem)"}),E.jsx("option",{value:"EDITOR",children:"Editor (Chnh sa)"})]})]}),A&&E.jsx("p",{className:"text-sm text-destructive",children:A}),E.jsxs(Te,{type:"submit",disabled:m||!c,className:"w-full gap-2",children:[m?E.jsx(ws,{size:"sm"}):E.jsx(M3,{className:"h-4 w-4"}),"Thm cng tc vin"]})]}),a.length>0&&E.jsxs("div",{children:[E.jsxs("h3",{className:"text-sm font-medium mb-2",children:["Cng tc vin (",a.length,")"]}),E.jsx("div",{className:"space-y-2",children:a.map(P=>E.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("p",{className:"font-medium text-sm",children:P.user.name}),E.jsx("p",{className:"text-xs text-muted-foreground",children:P.user.email})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:`text-xs px-2 py-1 rounded ${P.role==="VIEWER"?"bg-blue-500/10 text-blue-500":"bg-green-500/10 text-green-500"}`,children:P.role==="VIEWER"?"Viewer":"Editor"}),E.jsx("button",{onClick:()=>U(P.user.id),disabled:v===P.user.id,className:"p-1 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-50",title:"Xa cng tc vin",children:v===P.user.id?E.jsx(ws,{size:"sm"}):E.jsx(gk,{className:"h-4 w-4"})})]})]},P.id))})]})]})]})}):null}var Jd={};Jd.d=(r,t)=>{for(var e in t)Jd.o(t,e)&&!Jd.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})};Jd.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var kt=globalThis.pdfjsLib={};Jd.d(kt,{AbortException:()=>pc,AnnotationEditorLayer:()=>Y_,AnnotationEditorParamsType:()=>Rt,AnnotationEditorType:()=>Zt,AnnotationEditorUIManager:()=>rc,AnnotationLayer:()=>xU,AnnotationMode:()=>Va,CMapCompressionType:()=>Iw,ColorPicker:()=>Py,DOMSVGFactory:()=>zA,DrawLayer:()=>Q_,FeatureTest:()=>ri,GlobalWorkerOptions:()=>aa,ImageKind:()=>Xm,InvalidPDFException:()=>jR,MissingPDFException:()=>fc,OPS:()=>rs,Outliner:()=>k_,PDFDataRangeTransport:()=>M2,PDFDateString:()=>HR,PDFWorker:()=>gu,PasswordResponses:()=>LI,PermissionFlag:()=>MI,PixelsPerInch:()=>wo,RenderingCancelledException:()=>PA,TextLayer:()=>jy,UnexpectedResponseException:()=>wb,Util:()=>_t,VerbosityLevel:()=>yb,XfaLayer:()=>D2,build:()=>rU,createValidAbsoluteUrl:()=>jI,fetchData:()=>xb,getDocument:()=>WB,getFilenameFromUrl:()=>GI,getPdfFilenameFromUrl:()=>XI,getXfaPageViewport:()=>YI,isDataScheme:()=>FA,isPdfFile:()=>IA,noContextMenu:()=>oi,normalizeUnicode:()=>UI,renderTextLayer:()=>UB,setLayerDimensions:()=>sc,shadow:()=>te,updateTextLayer:()=>HB,version:()=>sU});const Fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),OR=[1,0,0,1,0,0],Fw=[.001,0,0,.001,0,0],kI=1e7,pw=1.35,Yi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Va={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},RI="pdfjs_internal_editor_",Zt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},MI={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Nn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},We={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Ld={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},yb={ERRORS:0,WARNINGS:1,INFOS:5},Iw={NONE:0,BINARY:1},rs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},LI={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let bb=yb.WARNINGS;function DI(r){Number.isInteger(r)&&(bb=r)}function NI(){return bb}function vb(r){bb>=yb.INFOS&&console.log(`Info: ${r}`)}function Ft(r){bb>=yb.WARNINGS&&console.log(`Warning: ${r}`)}function ye(r){throw new Error(r)}function nn(r,t){r||ye(t)}function OI(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function jI(r,t=null,e=null){if(!r)return null;try{if(e&&typeof r=="string"){if(e.addDefaultProtocol&&r.startsWith("www.")){const a=r.match(/\./g);(a==null?void 0:a.length)>=2&&(r=`http://${r}`)}if(e.tryConvertEncoding)try{r=BI(r)}catch{}}const n=t?new URL(r,t):new URL(r);if(OI(n))return n}catch{}return null}function te(r,t,e,n=!1){return Object.defineProperty(r,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const xo=(function(){function t(e,n){this.constructor===t&&ye("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class Bw extends xo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Uw extends xo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class jR extends xo{constructor(t){super(t,"InvalidPDFException")}}class fc extends xo{constructor(t){super(t,"MissingPDFException")}}class wb extends xo{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class zI extends xo{constructor(t){super(t,"FormatError")}}class pc extends xo{constructor(t){super(t,"AbortException")}}function zR(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&ye("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const n=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),c=r.subarray(a,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function _b(r){typeof r!="string"&&ye("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=r.charCodeAt(n)&255;return e}function PI(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function OA(r){const t=Object.create(null);for(const[e,n]of r)t[e]=n;return t}function FI(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function II(){try{return new Function(""),!0}catch{return!1}}class ri{static get isLittleEndian(){return te(this,"isLittleEndian",FI())}static get isEvalSupported(){return te(this,"isEvalSupported",II())}static get isOffscreenCanvasSupported(){return te(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?te(this,"platform",{isMac:navigator.platform.includes("Mac")}):te(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return te(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const gw=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var la,Ym,Hw;class _t{static makeHexColor(t,e,n){return`#${gw[t]}${gw[e]}${gw[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],a=t[0]*e[1]+t[1]*e[3]+e[5];return[n,a]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],a=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,o=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[a,o]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),a=this.applyTransform(t.slice(2,4),e),o=this.applyTransform([t[0],t[3]],e),c=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],a[0],o[0],c[0]),Math.min(n[1],a[1],o[1],c[1]),Math.max(n[0],a[0],o[0],c[0]),Math.max(n[1],a[1],o[1],c[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],a=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],c=t[2]*e[1]+t[3]*e[3],h=(n+c)/2,d=Math.sqrt((n+c)**2-4*(n*c-o*a))/2,p=h+d||1,m=h-d||1;return[Math.sqrt(p),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[n,o,a,c]}static bezierBoundingBox(t,e,n,a,o,c,h,d,p){return p?(p[0]=Math.min(p[0],t,h),p[1]=Math.min(p[1],e,d),p[2]=Math.max(p[2],t,h),p[3]=Math.max(p[3],e,d)):p=[Math.min(t,h),Math.min(e,d),Math.max(t,h),Math.max(e,d)],T(this,la,Hw).call(this,t,n,o,h,e,a,c,d,3*(-t+3*(n-o)+h),6*(t-2*n+o),3*(n-t),p),T(this,la,Hw).call(this,t,n,o,h,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),p),p}}la=new WeakSet,Ym=function(t,e,n,a,o,c,h,d,p,m){if(p<=0||p>=1)return;const b=1-p,v=p*p,w=v*p,A=b*(b*(b*t+3*p*e)+3*v*n)+w*a,S=b*(b*(b*o+3*p*c)+3*v*h)+w*d;m[0]=Math.min(m[0],A),m[1]=Math.min(m[1],S),m[2]=Math.max(m[2],A),m[3]=Math.max(m[3],S)},Hw=function(t,e,n,a,o,c,h,d,p,m,b,v){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&T(this,la,Ym).call(this,t,e,n,a,o,c,h,d,-b/m,v);return}const w=m**2-4*b*p;if(w<0)return;const A=Math.sqrt(w),S=2*p;T(this,la,Ym).call(this,t,e,n,a,o,c,h,d,(-m+A)/S,v),T(this,la,Ym).call(this,t,e,n,a,o,c,h,d,(-m-A)/S,v)},k(_t,la);function BI(r){return decodeURIComponent(escape(r))}let mw=null,nT=null;function UI(r){return mw||(mw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,nT=new Map([["","t"]])),r.replaceAll(mw,(t,e,n)=>e?e.normalize("NFKC"):nT.get(n))}function HI(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const r=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(r);else for(let t=0;t<32;t++)r[t]=Math.floor(Math.random()*255);return zR(r)}const PR="pdfjs_internal_id_",Cr={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Ab{constructor(){this.constructor===Ab&&ye("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,o){return"none"}destroy(t=!1){}}var pf;const GA=class GA{constructor({enableHWA:t=!1}={}){k(this,pf,!1);this.constructor===GA&&ye("Cannot initialize BaseCanvasFactory."),x(this,pf,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!f(this,pf)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ye("Abstract method `_createCanvas` called.")}};pf=new WeakMap;let Ly=GA;class Sb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===Sb&&ye("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?Iw.BINARY:Iw.NONE;return this._fetchData(e,n).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){ye("Abstract method `_fetchData` called.")}}class Eb{constructor({baseUrl:t=null}){this.constructor===Eb&&ye("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){ye("Abstract method `_fetchData` called.")}}class jA{constructor(){this.constructor===jA&&ye("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ye("Abstract method `_createSVG` called.")}}const kr="http://www.w3.org/2000/svg",tl=class tl{};Mt(tl,"CSS",96),Mt(tl,"PDF",72),Mt(tl,"PDF_TO_CSS_UNITS",tl.CSS/tl.PDF);let wo=tl;var il,Ns,Nr,ni,Iy,sl,yt,On,nu,iu,$m,FR,qw,su,zd,Pd,Vw,Fd;class qI extends Ab{constructor({docId:e,ownerDocument:n=globalThis.document}={}){super();k(this,yt);k(this,il);k(this,Ns);k(this,Nr);k(this,ni);k(this,Iy);k(this,sl,0);x(this,Nr,e),x(this,ni,n)}addFilter(e){if(!e)return"none";let n=f(this,yt,On).get(e);if(n)return n;const[a,o,c]=T(this,yt,$m).call(this,e),h=e.length===1?a:`${a}${o}${c}`;if(n=f(this,yt,On).get(h),n)return f(this,yt,On).set(e,n),n;const d=`g_${f(this,Nr)}_transfer_map_${mi(this,sl)._++}`,p=`url(#${d})`;f(this,yt,On).set(e,p),f(this,yt,On).set(h,p);const m=T(this,yt,su).call(this,d);return T(this,yt,Pd).call(this,a,o,c,m),p}addHCMFilter(e,n){var A;const a=`${e}-${n}`,o="base";let c=f(this,yt,nu).get(o);if((c==null?void 0:c.key)===a||(c?((A=c.filter)==null||A.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},f(this,yt,nu).set(o,c)),!e||!n))return c.url;const h=T(this,yt,Fd).call(this,e);e=_t.makeHexColor(...h);const d=T(this,yt,Fd).call(this,n);if(n=_t.makeHexColor(...d),f(this,yt,iu).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const p=new Array(256);for(let S=0;S<=255;S++){const R=S/255;p[S]=R<=.03928?R/12.92:((R+.055)/1.055)**2.4}const m=p.join(","),b=`g_${f(this,Nr)}_hcm_filter`,v=c.filter=T(this,yt,su).call(this,b);T(this,yt,Pd).call(this,m,m,m,v),T(this,yt,qw).call(this,v);const w=(S,R)=>{const M=h[S]/255,D=d[S]/255,O=new Array(R+1);for(let I=0;I<=R;I++)O[I]=M+I/R*(D-M);return O.join(",")};return T(this,yt,Pd).call(this,w(0,5),w(1,5),w(2,5),v),c.url=`url(#${b})`,c.url}addAlphaFilter(e){let n=f(this,yt,On).get(e);if(n)return n;const[a]=T(this,yt,$m).call(this,[e]),o=`alpha_${a}`;if(n=f(this,yt,On).get(o),n)return f(this,yt,On).set(e,n),n;const c=`g_${f(this,Nr)}_alpha_map_${mi(this,sl)._++}`,h=`url(#${c})`;f(this,yt,On).set(e,h),f(this,yt,On).set(o,h);const d=T(this,yt,su).call(this,c);return T(this,yt,Vw).call(this,a,d),h}addLuminosityFilter(e){let n=f(this,yt,On).get(e||"luminosity");if(n)return n;let a,o;if(e?([a]=T(this,yt,$m).call(this,[e]),o=`luminosity_${a}`):o="luminosity",n=f(this,yt,On).get(o),n)return f(this,yt,On).set(e,n),n;const c=`g_${f(this,Nr)}_luminosity_map_${mi(this,sl)._++}`,h=`url(#${c})`;f(this,yt,On).set(e,h),f(this,yt,On).set(o,h);const d=T(this,yt,su).call(this,c);return T(this,yt,FR).call(this,d),e&&T(this,yt,Vw).call(this,a,d),h}addHighlightHCMFilter(e,n,a,o,c){var D;const h=`${n}-${a}-${o}-${c}`;let d=f(this,yt,nu).get(e);if((d==null?void 0:d.key)===h||(d?((D=d.filter)==null||D.remove(),d.key=h,d.url="none",d.filter=null):(d={key:h,url:"none",filter:null},f(this,yt,nu).set(e,d)),!n||!a))return d.url;const[p,m]=[n,a].map(T(this,yt,Fd).bind(this));let b=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[w,A]=[o,c].map(T(this,yt,Fd).bind(this));v<b&&([b,v,w,A]=[v,b,A,w]),f(this,yt,iu).style.color="";const S=(O,I,U)=>{const P=new Array(256),H=(v-b)/U,K=O/255,tt=(I-O)/(255*U);let nt=0;for(let rt=0;rt<=U;rt++){const mt=Math.round(b+rt*H),At=K+rt*tt;for(let dt=nt;dt<=mt;dt++)P[dt]=At;nt=mt+1}for(let rt=nt;rt<256;rt++)P[rt]=P[nt-1];return P.join(",")},R=`g_${f(this,Nr)}_hcm_${e}_filter`,M=d.filter=T(this,yt,su).call(this,R);return T(this,yt,qw).call(this,M),T(this,yt,Pd).call(this,S(w[0],A[0],5),S(w[1],A[1],5),S(w[2],A[2],5),M),d.url=`url(#${R})`,d.url}destroy(e=!1){e&&f(this,yt,nu).size!==0||(f(this,Ns)&&(f(this,Ns).parentNode.parentNode.remove(),x(this,Ns,null)),f(this,il)&&(f(this,il).clear(),x(this,il,null)),x(this,sl,0))}}il=new WeakMap,Ns=new WeakMap,Nr=new WeakMap,ni=new WeakMap,Iy=new WeakMap,sl=new WeakMap,yt=new WeakSet,On=function(){return f(this,il)||x(this,il,new Map)},nu=function(){return f(this,Iy)||x(this,Iy,new Map)},iu=function(){if(!f(this,Ns)){const e=f(this,ni).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=f(this,ni).createElementNS(kr,"svg");a.setAttribute("width",0),a.setAttribute("height",0),x(this,Ns,f(this,ni).createElementNS(kr,"defs")),e.append(a),a.append(f(this,Ns)),f(this,ni).body.append(e)}return f(this,Ns)},$m=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=p[v]/255;const b=m.join(",");return[b,b,b]}const[n,a,o]=e,c=new Array(256),h=new Array(256),d=new Array(256);for(let p=0;p<256;p++)c[p]=n[p]/255,h[p]=a[p]/255,d[p]=o[p]/255;return[c.join(","),h.join(","),d.join(",")]},FR=function(e){const n=f(this,ni).createElementNS(kr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},qw=function(e){const n=f(this,ni).createElementNS(kr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},su=function(e){const n=f(this,ni).createElementNS(kr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),f(this,yt,iu).append(n),n},zd=function(e,n,a){const o=f(this,ni).createElementNS(kr,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",a),e.append(o)},Pd=function(e,n,a,o){const c=f(this,ni).createElementNS(kr,"feComponentTransfer");o.append(c),T(this,yt,zd).call(this,c,"feFuncR",e),T(this,yt,zd).call(this,c,"feFuncG",n),T(this,yt,zd).call(this,c,"feFuncB",a)},Vw=function(e,n){const a=f(this,ni).createElementNS(kr,"feComponentTransfer");n.append(a),T(this,yt,zd).call(this,a,"feFuncA",e)},Fd=function(e){return f(this,yt,iu).style.color=e,BA(getComputedStyle(f(this,yt,iu)).getPropertyValue("color"))};class VI extends Ly{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}async function xb(r,t="text"){if(Id(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class IR extends Sb{_fetchData(t,e){return xb(t,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):_b(n),compressionType:e}))}}class BR extends Eb{_fetchData(t){return xb(t,"arraybuffer").then(e=>new Uint8Array(e))}}class zA extends jA{_createSVG(t){return document.createElementNS(kr,t)}}class tg{constructor({viewBox:t,scale:e,rotation:n,offsetX:a=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=a,this.offsetY=o;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let p,m,b,v;switch(n%=360,n<0&&(n+=360),n){case 180:p=-1,m=0,b=0,v=1;break;case 90:p=0,m=1,b=1,v=0;break;case 270:p=0,m=-1,b=-1,v=0;break;case 0:p=1,m=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(b=-b,v=-v);let w,A,S,R;p===0?(w=Math.abs(d-t[1])*e+a,A=Math.abs(h-t[0])*e+o,S=(t[3]-t[1])*e,R=(t[2]-t[0])*e):(w=Math.abs(h-t[0])*e+a,A=Math.abs(d-t[1])*e+o,S=(t[2]-t[0])*e,R=(t[3]-t[1])*e),this.transform=[p*e,m*e,b*e,v*e,w-p*e*h-b*e*d,A-m*e*h-v*e*d],this.width=S,this.height=R}get rawDims(){const{viewBox:t}=this;return te(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new tg({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){return _t.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=_t.applyTransform([t[0],t[1]],this.transform),n=_t.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return _t.applyInverseTransform([t,e],this.transform)}}class PA extends xo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function FA(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function IA(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function GI(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function XI(r,t="document.pdf"){if(typeof r!="string")return t;if(FA(r))return Ft('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=e.exec(r);let o=n.exec(a[1])||n.exec(a[2])||n.exec(a[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||t}class iT{constructor(){Mt(this,"started",Object.create(null));Mt(this,"times",[])}time(t){t in this.started&&Ft(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ft(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-a}ms
`);return t.join("")}}function Id(r,t){try{const{protocol:e}=t?new URL(r,t):new URL(r);return e==="http:"||e==="https:"}catch{return!1}}function oi(r){r.preventDefault()}function UR(r){console.log("Deprecated API usage: "+r)}let sT;class HR{static toDateObject(t){if(!t||typeof t!="string")return null;sT||(sT=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=sT.exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let b=parseInt(e[9],10)||0;return b=b>=0&&b<=59?b:0,p==="-"?(c+=m,h+=b):p==="+"&&(c-=m,h-=b),new Date(Date.UTC(n,a,o,c,h,d))}}function YI(r,{scale:t=1,rotation:e=0}){const{width:n,height:a}=r.attributes.style,o=[0,0,parseInt(n),parseInt(a)];return new tg({viewBox:o,scale:t,rotation:e})}function BA(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ft(`Not a valid color format: "${r}"`),[0,0,0])}function $I(r){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of r.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;r.set(e,BA(n))}t.remove()}function De(r){const{a:t,b:e,c:n,d:a,e:o,f:c}=r.getTransform();return[t,e,n,a,o,c]}function Tr(r){const{a:t,b:e,c:n,d:a,e:o,f:c}=r.getTransform().invertSelf();return[t,e,n,a,o,c]}function sc(r,t,e=!1,n=!0){if(t instanceof tg){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:c}=r,h=ri.isCSSRoundSupported,d=`var(--scale-factor) * ${a}px`,p=`var(--scale-factor) * ${o}px`,m=h?`round(${d}, 1px)`:`calc(${d})`,b=h?`round(${p}, 1px)`:`calc(${p})`;!e||t.rotation%180===0?(c.width=m,c.height=b):(c.width=b,c.height=m)}n&&r.setAttribute("data-main-rotation",t.rotation)}var rl,al,_i,ol,By,qR,Gn,VR,GR,Km,XR,Xw;const Uy=class Uy{constructor(t){k(this,Gn);k(this,rl,null);k(this,al,null);k(this,_i);k(this,ol,null);x(this,_i,t)}render(){const t=x(this,rl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=f(this,_i)._uiManager._signal;t.addEventListener("contextmenu",oi,{signal:e}),t.addEventListener("pointerdown",T(Uy,By,qR),{signal:e});const n=x(this,ol,document.createElement("div"));n.className="buttons",t.append(n);const a=f(this,_i).toolbarPosition;if(a){const{style:o}=t,c=f(this,_i)._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return T(this,Gn,XR).call(this),t}hide(){var t;f(this,rl).classList.add("hidden"),(t=f(this,al))==null||t.hideDropdown()}show(){f(this,rl).classList.remove("hidden")}addAltTextButton(t){T(this,Gn,Km).call(this,t),f(this,ol).prepend(t,f(this,Gn,Xw))}addColorPicker(t){x(this,al,t);const e=t.renderButton();T(this,Gn,Km).call(this,e),f(this,ol).prepend(e,f(this,Gn,Xw))}remove(){var t;f(this,rl).remove(),(t=f(this,al))==null||t.destroy(),x(this,al,null)}};rl=new WeakMap,al=new WeakMap,_i=new WeakMap,ol=new WeakMap,By=new WeakSet,qR=function(t){t.stopPropagation()},Gn=new WeakSet,VR=function(t){f(this,_i)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},GR=function(t){f(this,_i)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},Km=function(t){const e=f(this,_i)._uiManager._signal;t.addEventListener("focusin",T(this,Gn,VR).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",T(this,Gn,GR).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",oi,{signal:e})},XR=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${f(this,_i).editorType}-button`),T(this,Gn,Km).call(this,t),t.addEventListener("click",e=>{f(this,_i)._uiManager.delete()},{signal:f(this,_i)._uiManager._signal}),f(this,ol).append(t)},Xw=function(){const t=document.createElement("div");return t.className="divider",t},k(Uy,By);let Gw=Uy;var gf,ll,cl,_o,YR,$R,KR;class KI{constructor(t){k(this,_o);k(this,gf,null);k(this,ll,null);k(this,cl);x(this,cl,t)}show(t,e,n){const[a,o]=T(this,_o,$R).call(this,e,n),{style:c}=f(this,ll)||x(this,ll,T(this,_o,YR).call(this));t.append(f(this,ll)),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){f(this,ll).remove()}}gf=new WeakMap,ll=new WeakMap,cl=new WeakMap,_o=new WeakSet,YR=function(){const t=x(this,ll,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",oi,{signal:f(this,cl)._signal});const e=x(this,gf,document.createElement("div"));return e.className="buttons",t.append(e),T(this,_o,KR).call(this),t},$R=function(t,e){let n=0,a=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const h=o.x+(e?o.width:0);if(c>n){a=h,n=c;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,n]},KR=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=f(this,cl)._signal;t.addEventListener("contextmenu",oi,{signal:n}),t.addEventListener("click",()=>{f(this,cl).highlightSelection("floating_button")},{signal:n}),f(this,gf).append(t)};function Dy(r,t,e){for(const n of e)t.addEventListener(n,r[n].bind(r))}function WI(r){return Math.round(Math.min(255,Math.max(1,255*r))).toString(16).padStart(2,"0")}var Hy;class QI{constructor(){k(this,Hy,0)}get id(){return`${RI}${mi(this,Hy)._++}`}}Hy=new WeakMap;var mf,qy,qi,yf,$w;const XA=class XA{constructor(){k(this,yf);k(this,mf,HI());k(this,qy,0);k(this,qi,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return te(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:o}=t;return T(this,yf,$w).call(this,`${e}_${n}_${a}_${o}`,t)}async getFromUrl(t){return T(this,yf,$w).call(this,t,t)}async getFromId(t){f(this,qi)||x(this,qi,new Map);const e=f(this,qi).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=f(this,qi).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){f(this,qi)||x(this,qi,new Map);const e=f(this,qi).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${f(this,mf)}_`)}};mf=new WeakMap,qy=new WeakMap,qi=new WeakMap,yf=new WeakSet,$w=async function(t,e){f(this,qi)||x(this,qi,new Map);let n=f(this,qi).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${f(this,mf)}_${mi(this,qy)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await xb(e,"blob")):a=n.file=e,a.type==="image/svg+xml"){const o=XA._isSVGFittingCanvas,c=new FileReader,h=new Image,d=new Promise((p,m)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,p()},c.onload=async()=>{const b=n.svgUrl=c.result;h.src=await o?`${b}#svgView(preserveAspectRatio(none))`:b},h.onerror=c.onerror=m});c.readAsDataURL(a),await d}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){console.error(a),n=null}return f(this,qi).set(t,n),n&&f(this,qi).set(n.id,n),n};let Yw=XA;var un,Ga,bf,hn;class ZI{constructor(t=128){k(this,un,[]);k(this,Ga,!1);k(this,bf);k(this,hn,-1);x(this,bf,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(a&&t(),f(this,Ga))return;const d={cmd:t,undo:e,post:n,type:o};if(f(this,hn)===-1){f(this,un).length>0&&(f(this,un).length=0),x(this,hn,0),f(this,un).push(d);return}if(c&&f(this,un)[f(this,hn)].type===o){h&&(d.undo=f(this,un)[f(this,hn)].undo),f(this,un)[f(this,hn)]=d;return}const p=f(this,hn)+1;p===f(this,bf)?f(this,un).splice(0,1):(x(this,hn,p),p<f(this,un).length&&f(this,un).splice(p)),f(this,un).push(d)}undo(){if(f(this,hn)===-1)return;x(this,Ga,!0);const{undo:t,post:e}=f(this,un)[f(this,hn)];t(),e==null||e(),x(this,Ga,!1),x(this,hn,f(this,hn)-1)}redo(){if(f(this,hn)<f(this,un).length-1){x(this,hn,f(this,hn)+1),x(this,Ga,!0);const{cmd:t,post:e}=f(this,un)[f(this,hn)];t(),e==null||e(),x(this,Ga,!1)}}hasSomethingToUndo(){return f(this,hn)!==-1}hasSomethingToRedo(){return f(this,hn)<f(this,un).length-1}destroy(){x(this,un,null)}}un=new WeakMap,Ga=new WeakMap,bf=new WeakMap,hn=new WeakMap;var Vy,WR;class eg{constructor(t){k(this,Vy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ri.platform;for(const[n,a,o={}]of t)for(const c of n){const h=c.startsWith("mac+");e&&h?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!h&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(T(this,Vy,WR).call(this,e));if(!n)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:h=null}}=n;h&&!h(t,e)||(a.bind(t,...c,e)(),o||(e.stopPropagation(),e.preventDefault()))}}Vy=new WeakSet,WR=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Gy=class Gy{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return $I(t),te(this,"_colors",t)}convert(t){const e=BA(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((o,c)=>o===e[c]))return Gy._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?_t.makeHexColor(...e):t}};Mt(Gy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Kw=Gy;var bu,Ai,Qe,wn,vu,Or,wu,as,_u,ul,Os,os,hl,vf,wf,js,Au,Xa,zs,Xy,Ya,_f,dl,Af,Su,_n,ue,jr,fl,Sf,Ef,xf,Cf,Tf,kf,Rf,Mf,Lf,Df,Nf,Of,jf,$a,Ps,zr,zf,ct,Wm,QR,ZR,Qm,JR,t2,e2,Ww,n2,Qw,Zw,i2,Un,Ba,s2,r2,Jw,a2,Bd,t_;const cu=class cu{constructor(t,e,n,a,o,c,h,d,p){k(this,ct);k(this,bu,new AbortController);k(this,Ai,null);k(this,Qe,new Map);k(this,wn,new Map);k(this,vu,null);k(this,Or,null);k(this,wu,null);k(this,as,new ZI);k(this,_u,0);k(this,ul,new Set);k(this,Os,null);k(this,os,null);k(this,hl,new Set);k(this,vf,!1);k(this,wf,null);k(this,js,null);k(this,Au,null);k(this,Xa,!1);k(this,zs,null);k(this,Xy,new QI);k(this,Ya,!1);k(this,_f,!1);k(this,dl,null);k(this,Af,null);k(this,Su,null);k(this,_n,Zt.NONE);k(this,ue,new Set);k(this,jr,null);k(this,fl,null);k(this,Sf,null);k(this,Ef,this.blur.bind(this));k(this,xf,this.focus.bind(this));k(this,Cf,this.copy.bind(this));k(this,Tf,this.cut.bind(this));k(this,kf,this.paste.bind(this));k(this,Rf,this.keydown.bind(this));k(this,Mf,this.keyup.bind(this));k(this,Lf,this.onEditingAction.bind(this));k(this,Df,this.onPageChanging.bind(this));k(this,Nf,this.onScaleChanging.bind(this));k(this,Of,this.onRotationChanging.bind(this));k(this,jf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,$a,[0,0]);k(this,Ps,null);k(this,zr,null);k(this,zf,null);this._signal=f(this,bu).signal,x(this,zr,t),x(this,zf,e),x(this,vu,n),this._eventBus=a,this._eventBus._on("editingaction",f(this,Lf)),this._eventBus._on("pagechanging",f(this,Df)),this._eventBus._on("scalechanging",f(this,Nf)),this._eventBus._on("rotationchanging",f(this,Of)),T(this,ct,JR).call(this),T(this,ct,i2).call(this),T(this,ct,Ww).call(this),x(this,Or,o.annotationStorage),x(this,wf,o.filterFactory),x(this,fl,c),x(this,Au,h||null),x(this,vf,d),x(this,Su,p||null),this.viewParameters={realScale:wo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=cu.prototype,e=c=>f(c,zr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return te(this,"_keyboardManager",new eg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&f(c,zr).contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&f(c,zr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n;(t=f(this,bu))==null||t.abort(),x(this,bu,null),this._signal=null,this._eventBus._off("editingaction",f(this,Lf)),this._eventBus._off("pagechanging",f(this,Df)),this._eventBus._off("scalechanging",f(this,Nf)),this._eventBus._off("rotationchanging",f(this,Of));for(const a of f(this,wn).values())a.destroy();f(this,wn).clear(),f(this,Qe).clear(),f(this,hl).clear(),x(this,Ai,null),f(this,ue).clear(),f(this,as).destroy(),(e=f(this,vu))==null||e.destroy(),(n=f(this,zs))==null||n.hide(),x(this,zs,null),f(this,js)&&(clearTimeout(f(this,js)),x(this,js,null)),f(this,Ps)&&(clearTimeout(f(this,Ps)),x(this,Ps,null))}async mlGuess(t){var e;return((e=f(this,Su))==null?void 0:e.guess(t))||null}get hasMLManager(){return!!f(this,Su)}get hcmFilter(){return te(this,"hcmFilter",f(this,fl)?f(this,wf).addHCMFilter(f(this,fl).foreground,f(this,fl).background):"none")}get direction(){return te(this,"direction",getComputedStyle(f(this,zr)).direction)}get highlightColors(){return te(this,"highlightColors",f(this,Au)?new Map(f(this,Au).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return te(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){x(this,Af,t)}editAltText(t){var e;(e=f(this,vu))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){x(this,_u,t-1)}focusMainContainer(){f(this,zr).focus()}findParent(t,e){for(const n of f(this,wn).values()){const{x:a,y:o,width:c,height:h}=n.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=o&&e<=o+h)return n}return null}disableUserSelect(t=!1){f(this,zf).classList.toggle("noUserSelect",t)}addShouldRescale(t){f(this,hl).add(t)}removeShouldRescale(t){f(this,hl).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*wo.PDF_TO_CSS_UNITS;for(const e of f(this,hl))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c}=e,h=e.toString(),p=T(this,ct,Wm).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(p);if(m){e.empty(),f(this,_n)===Zt.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Zt.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const b of f(this,wn).values())if(b.hasTextLayer(p)){b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c,text:h});break}}}addToAnnotationStorage(t){!t.isEmpty()&&f(this,Or)&&!f(this,Or).has(t.id)&&f(this,Or).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,f(this,Xa)&&(x(this,Xa,!1),T(this,ct,Qm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of f(this,ue))if(e.div.contains(t)){x(this,dl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!f(this,dl))return;const[t,e]=f(this,dl);x(this,dl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){T(this,ct,Ww).call(this),T(this,ct,Qw).call(this)}removeEditListeners(){T(this,ct,n2).call(this),T(this,ct,Zw).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of f(this,os))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of f(this,os))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=f(this,Ai))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of f(this,ue)){const o=a.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of f(this,os))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ft(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of n){const p=a.deserialize(d);if(!p)return;o.push(p)}const c=()=>{for(const d of o)T(this,ct,Jw).call(this,d);T(this,ct,t_).call(this,o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(o){Ft(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),f(this,_n)!==Zt.NONE&&!this.isEditorHandlingKeyboard&&cu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,f(this,Xa)&&(x(this,Xa,!1),T(this,ct,Qm).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(T(this,ct,t2).call(this),T(this,ct,Qw).call(this),T(this,ct,Un).call(this,{isEditing:f(this,_n)!==Zt.NONE,isEmpty:T(this,ct,Bd).call(this),hasSomethingToUndo:f(this,as).hasSomethingToUndo(),hasSomethingToRedo:f(this,as).hasSomethingToRedo(),hasSelectedEditor:!1})):(T(this,ct,e2).call(this),T(this,ct,Zw).call(this),T(this,ct,Un).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!f(this,os)){x(this,os,t);for(const e of f(this,os))T(this,ct,Ba).call(this,e.defaultPropertiesToUpdate)}}getId(){return f(this,Xy).id}get currentLayer(){return f(this,wn).get(f(this,_u))}getLayer(t){return f(this,wn).get(t)}get currentPageIndex(){return f(this,_u)}addLayer(t){f(this,wn).set(t.pageIndex,t),f(this,Ya)?t.enable():t.disable()}removeLayer(t){f(this,wn).delete(t.pageIndex)}updateMode(t,e=null,n=!1){if(f(this,_n)!==t){if(x(this,_n,t),t===Zt.NONE){this.setEditingState(!1),T(this,ct,r2).call(this);return}this.setEditingState(!0),T(this,ct,s2).call(this),this.unselectAll();for(const a of f(this,wn).values())a.updateMode(t);if(!e&&n){this.addNewEditorFromKeyboard();return}if(e){for(const a of f(this,Qe).values())if(a.annotationElementId===e){this.setSelected(a),a.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==f(this,_n)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(f(this,os)){switch(t){case Rt.CREATE:this.currentLayer.addNewEditor();return;case Rt.HIGHLIGHT_DEFAULT_COLOR:(n=f(this,Af))==null||n.updateColor(e);break;case Rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(f(this,Sf)||x(this,Sf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const a of f(this,ue))a.updateParams(t,e);for(const a of f(this,os))a.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const c of f(this,Qe).values())c.editorType===t&&c.show(e);(((o=f(this,Sf))==null?void 0:o.get(Rt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&T(this,ct,Ba).call(this,[[Rt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(f(this,_f)!==t){x(this,_f,t);for(const e of f(this,wn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of f(this,Qe).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return f(this,Qe).get(t)}addEditor(t){f(this,Qe).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(f(this,js)&&clearTimeout(f(this,js)),x(this,js,setTimeout(()=>{this.focusMainContainer(),x(this,js,null)},0))),f(this,Qe).delete(t.id),this.unselect(t),(!t.annotationElementId||!f(this,ul).has(t.annotationElementId))&&((e=f(this,Or))==null||e.remove(t.id))}addDeletedAnnotationElement(t){f(this,ul).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return f(this,ul).has(t)}removeDeletedAnnotationElement(t){f(this,ul).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){f(this,Ai)!==t&&(x(this,Ai,t),t&&T(this,ct,Ba).call(this,t.propertiesToUpdate))}updateUI(t){f(this,ct,a2)===t&&T(this,ct,Ba).call(this,t.propertiesToUpdate)}toggleSelected(t){if(f(this,ue).has(t)){f(this,ue).delete(t),t.unselect(),T(this,ct,Un).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,ue).add(t),t.select(),T(this,ct,Ba).call(this,t.propertiesToUpdate),T(this,ct,Un).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of f(this,ue))e!==t&&e.unselect();f(this,ue).clear(),f(this,ue).add(t),t.select(),T(this,ct,Ba).call(this,t.propertiesToUpdate),T(this,ct,Un).call(this,{hasSelectedEditor:!0})}isSelected(t){return f(this,ue).has(t)}get firstSelectedEditor(){return f(this,ue).values().next().value}unselect(t){t.unselect(),f(this,ue).delete(t),T(this,ct,Un).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,ue).size!==0}get isEnterHandled(){return f(this,ue).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){f(this,as).undo(),T(this,ct,Un).call(this,{hasSomethingToUndo:f(this,as).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:T(this,ct,Bd).call(this)})}redo(){f(this,as).redo(),T(this,ct,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,as).hasSomethingToRedo(),isEmpty:T(this,ct,Bd).call(this)})}addCommands(t){f(this,as).add(t),T(this,ct,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:T(this,ct,Bd).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...f(this,ue)],e=()=>{for(const a of t)a.remove()},n=()=>{for(const a of t)T(this,ct,Jw).call(this,a)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=f(this,Ai))==null||t.commitOrRemove()}hasSomethingToControl(){return f(this,Ai)||this.hasSelection}selectAll(){for(const t of f(this,ue))t.commit();T(this,ct,t_).call(this,f(this,Qe).values())}unselectAll(){if(!(f(this,Ai)&&(f(this,Ai).commitOrRemove(),f(this,_n)!==Zt.NONE))&&this.hasSelection){for(const t of f(this,ue))t.unselect();f(this,ue).clear(),T(this,ct,Un).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;f(this,$a)[0]+=t,f(this,$a)[1]+=e;const[a,o]=f(this,$a),c=[...f(this,ue)],h=1e3;f(this,Ps)&&clearTimeout(f(this,Ps)),x(this,Ps,setTimeout(()=>{x(this,Ps,null),f(this,$a)[0]=f(this,$a)[1]=0,this.addCommands({cmd:()=>{for(const d of c)f(this,Qe).has(d.id)&&d.translateInPage(a,o)},undo:()=>{for(const d of c)f(this,Qe).has(d.id)&&d.translateInPage(-a,-o)},mustExec:!1})},h));for(const d of c)d.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,Os,new Map);for(const t of f(this,ue))f(this,Os).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!f(this,Os))return!1;this.disableUserSelect(!1);const t=f(this,Os);x(this,Os,null);let e=!1;for(const[{x:a,y:o,pageIndex:c},h]of t)h.newX=a,h.newY=o,h.newPageIndex=c,e||(e=a!==h.savedX||o!==h.savedY||c!==h.savedPageIndex);if(!e)return!1;const n=(a,o,c,h)=>{if(f(this,Qe).has(a.id)){const d=f(this,wn).get(h);d?a._setParentAndPosition(d,o,c):(a.pageIndex=h,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:h}]of t)n(a,o,c,h)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:h}]of t)n(a,o,c,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(f(this,Os))for(const n of f(this,Os).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||f(this,ue).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return f(this,Ai)===t}getActive(){return f(this,Ai)}getMode(){return f(this,_n)}get imageManager(){return te(this,"imageManager",new Yw)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:a,width:o,height:c}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(p,m,b,v)=>({x:(m-a)/c,y:1-(p+b-n)/o,width:v/c,height:b/o});break;case"180":h=(p,m,b,v)=>({x:1-(p+b-n)/o,y:1-(m+v-a)/c,width:b/o,height:v/c});break;case"270":h=(p,m,b,v)=>({x:1-(m+v-a)/c,y:(p-n)/o,width:v/c,height:b/o});break;default:h=(p,m,b,v)=>({x:(p-n)/o,y:(m-a)/c,width:b/o,height:v/c});break}const d=[];for(let p=0,m=e.rangeCount;p<m;p++){const b=e.getRangeAt(p);if(!b.collapsed)for(const{x:v,y:w,width:A,height:S}of b.getClientRects())A===0||S===0||d.push(h(v,w,A,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(f(this,wu)||x(this,wu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=f(this,wu))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=f(this,wu))==null?void 0:a.get(t.data.id);if(!e)return;const n=f(this,Or).getRawValue(e);n&&(f(this,_n)===Zt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};bu=new WeakMap,Ai=new WeakMap,Qe=new WeakMap,wn=new WeakMap,vu=new WeakMap,Or=new WeakMap,wu=new WeakMap,as=new WeakMap,_u=new WeakMap,ul=new WeakMap,Os=new WeakMap,os=new WeakMap,hl=new WeakMap,vf=new WeakMap,wf=new WeakMap,js=new WeakMap,Au=new WeakMap,Xa=new WeakMap,zs=new WeakMap,Xy=new WeakMap,Ya=new WeakMap,_f=new WeakMap,dl=new WeakMap,Af=new WeakMap,Su=new WeakMap,_n=new WeakMap,ue=new WeakMap,jr=new WeakMap,fl=new WeakMap,Sf=new WeakMap,Ef=new WeakMap,xf=new WeakMap,Cf=new WeakMap,Tf=new WeakMap,kf=new WeakMap,Rf=new WeakMap,Mf=new WeakMap,Lf=new WeakMap,Df=new WeakMap,Nf=new WeakMap,Of=new WeakMap,jf=new WeakMap,$a=new WeakMap,Ps=new WeakMap,zr=new WeakMap,zf=new WeakMap,ct=new WeakSet,Wm=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},QR=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=T(this,ct,Wm).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(f(this,zs)||x(this,zs,new KI(this)),f(this,zs).show(n,a,this.direction==="ltr"))},ZR=function(){var o,c,h;const t=document.getSelection();if(!t||t.isCollapsed){f(this,jr)&&((o=f(this,zs))==null||o.hide(),x(this,jr,null),T(this,ct,Un).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===f(this,jr))return;if(!T(this,ct,Wm).call(this,t).closest(".textLayer")){f(this,jr)&&((c=f(this,zs))==null||c.hide(),x(this,jr,null),T(this,ct,Un).call(this,{hasSelectedText:!1}));return}if((h=f(this,zs))==null||h.hide(),x(this,jr,e),T(this,ct,Un).call(this,{hasSelectedText:!0}),!(f(this,_n)!==Zt.HIGHLIGHT&&f(this,_n)!==Zt.NONE)&&(f(this,_n)===Zt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,Xa,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=this._signal,p=m=>{m.type==="pointerup"&&m.button!==0||(window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),m.type==="pointerup"&&T(this,ct,Qm).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:d}),window.addEventListener("blur",p,{signal:d})}},Qm=function(t=""){f(this,_n)===Zt.HIGHLIGHT?this.highlightSelection(t):f(this,vf)&&T(this,ct,QR).call(this)},JR=function(){document.addEventListener("selectionchange",T(this,ct,ZR).bind(this),{signal:this._signal})},t2=function(){const t=this._signal;window.addEventListener("focus",f(this,xf),{signal:t}),window.addEventListener("blur",f(this,Ef),{signal:t})},e2=function(){window.removeEventListener("focus",f(this,xf)),window.removeEventListener("blur",f(this,Ef))},Ww=function(){const t=this._signal;window.addEventListener("keydown",f(this,Rf),{signal:t}),window.addEventListener("keyup",f(this,Mf),{signal:t})},n2=function(){window.removeEventListener("keydown",f(this,Rf)),window.removeEventListener("keyup",f(this,Mf))},Qw=function(){const t=this._signal;document.addEventListener("copy",f(this,Cf),{signal:t}),document.addEventListener("cut",f(this,Tf),{signal:t}),document.addEventListener("paste",f(this,kf),{signal:t})},Zw=function(){document.removeEventListener("copy",f(this,Cf)),document.removeEventListener("cut",f(this,Tf)),document.removeEventListener("paste",f(this,kf))},i2=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Un=function(t){Object.entries(t).some(([n,a])=>f(this,jf)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,jf),t)}),f(this,_n)===Zt.HIGHLIGHT&&t.hasSelectedEditor===!1&&T(this,ct,Ba).call(this,[[Rt.HIGHLIGHT_FREE,!0]]))},Ba=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},s2=function(){if(!f(this,Ya)){x(this,Ya,!0);for(const t of f(this,wn).values())t.enable();for(const t of f(this,Qe).values())t.enable()}},r2=function(){if(this.unselectAll(),f(this,Ya)){x(this,Ya,!1);for(const t of f(this,wn).values())t.disable();for(const t of f(this,Qe).values())t.disable()}},Jw=function(t){const e=f(this,wn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},a2=function(){let t=null;for(t of f(this,ue));return t},Bd=function(){if(f(this,Qe).size===0)return!0;if(f(this,Qe).size===1)for(const t of f(this,Qe).values())return t.isEmpty();return!1},t_=function(t){for(const e of f(this,ue))e.unselect();f(this,ue).clear();for(const e of t)e.isEmpty()||(f(this,ue).add(e),e.select());T(this,ct,Un).call(this,{hasSelectedEditor:this.hasSelection})},Mt(cu,"TRANSLATE_SMALL",1),Mt(cu,"TRANSLATE_BIG",10);let rc=cu;var Pr,Fr,ls,Ir,Si,Eu,cs,Pf,e_;const Rr=class Rr{constructor(t){k(this,Pf);k(this,Pr,"");k(this,Fr,!1);k(this,ls,null);k(this,Ir,null);k(this,Si,null);k(this,Eu,!1);k(this,cs,null);x(this,cs,t)}static initialize(t){Rr._l10nPromise||(Rr._l10nPromise=t)}async render(){const t=x(this,ls,document.createElement("button"));t.className="altText";const e=await Rr._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const n=f(this,cs)._uiManager._signal;t.addEventListener("contextmenu",oi,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),f(this,cs)._uiManager.editAltText(f(this,cs))};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(x(this,Eu,!0),a(o))},{signal:n}),await T(this,Pf,e_).call(this),t}finish(){f(this,ls)&&(f(this,ls).focus({focusVisible:f(this,Eu)}),x(this,Eu,!1))}isEmpty(){return!f(this,Pr)&&!f(this,Fr)}get data(){return{altText:f(this,Pr),decorative:f(this,Fr)}}set data({altText:t,decorative:e}){f(this,Pr)===t&&f(this,Fr)===e||(x(this,Pr,t),x(this,Fr,e),T(this,Pf,e_).call(this))}toggle(t=!1){f(this,ls)&&(!t&&f(this,Si)&&(clearTimeout(f(this,Si)),x(this,Si,null)),f(this,ls).disabled=!t)}destroy(){var t;(t=f(this,ls))==null||t.remove(),x(this,ls,null),x(this,Ir,null)}};Pr=new WeakMap,Fr=new WeakMap,ls=new WeakMap,Ir=new WeakMap,Si=new WeakMap,Eu=new WeakMap,cs=new WeakMap,Pf=new WeakSet,e_=async function(){var a;const t=f(this,ls);if(!t)return;if(!f(this,Pr)&&!f(this,Fr)){t.classList.remove("done"),(a=f(this,Ir))==null||a.remove();return}t.classList.add("done"),Rr._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(o=>{t.setAttribute("aria-label",o)});let e=f(this,Ir);if(!e){x(this,Ir,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const o=e.id=`alt-text-tooltip-${f(this,cs).id}`;t.setAttribute("aria-describedby",o);const c=100,h=f(this,cs)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(f(this,Si)),x(this,Si,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,Si,setTimeout(()=>{x(this,Si,null),f(this,Ir).classList.add("show"),f(this,cs)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:h}),t.addEventListener("mouseleave",()=>{var d;f(this,Si)&&(clearTimeout(f(this,Si)),x(this,Si,null)),(d=f(this,Ir))==null||d.classList.remove("show")},{signal:h})}e.innerText=f(this,Fr)?await Rr._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):f(this,Pr),e.parentNode||t.append(e);const n=f(this,cs).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},Mt(Rr,"_l10nPromise",null);let Ny=Rr;var pl,us,jn,xu,gl,An,ml,Cu,Tu,zn,Ff,yl,Ka,If,bl,Br,Fs,ku,Ru,Vi,Bf,Yy,qt,n_,Uf,i_,s_,o2,l2,r_,a_,o_,c2,u2,h2,d2,l_,Ud;const we=class we{constructor(t){k(this,qt);k(this,pl,null);k(this,us,null);k(this,jn,null);k(this,xu,!1);k(this,gl,!1);k(this,An,null);k(this,ml,null);k(this,Cu,this.focusin.bind(this));k(this,Tu,this.focusout.bind(this));k(this,zn,null);k(this,Ff,"");k(this,yl,!1);k(this,Ka,null);k(this,If,!1);k(this,bl,!1);k(this,Br,!1);k(this,Fs,null);k(this,ku,0);k(this,Ru,0);k(this,Vi,null);Mt(this,"_initialOptions",Object.create(null));Mt(this,"_isVisible",!0);Mt(this,"_uiManager",null);Mt(this,"_focusEventsAllowed",!0);Mt(this,"_l10nPromise",null);k(this,Bf,!1);k(this,Yy,we._zIndex++);this.constructor===we&&ye("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[o,c];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=we.prototype._resizeWithKeyboard,e=rc.TRANSLATE_SMALL,n=rc.TRANSLATE_BIG;return te(this,"_resizerKeyboardManager",new eg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],we.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return te(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new JI({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,n){if(we._l10nPromise||(we._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(o=>[o,t.get(o.replaceAll(/([A-Z])/g,c=>`-${c.toLowerCase()}`))]))),n!=null&&n.strings)for(const o of n.strings)we._l10nPromise.set(o,t.get(o));if(we._borderLineWidth!==-1)return;const a=getComputedStyle(document.documentElement);we._borderLineWidth=parseFloat(a.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ye("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return f(this,Bf)}set _isDraggable(t){var e;x(this,Bf,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,Yy)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):T(this,qt,Ud).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(f(this,yl)?x(this,yl,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[o,c]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/o,this.y=(e+a)/c,this.fixAndSetPosition()}translate(t,e){T(this,qt,n_).call(this,this.parentDimensions,t,e)}translateInPage(t,e){f(this,Ka)||x(this,Ka,[this.x,this.y]),T(this,qt,n_).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){f(this,Ka)||x(this,Ka,[this.x,this.y]);const[n,a]=this.parentDimensions;if(this.x+=t/n,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[h,d]=this.getBaseTranslation();o+=h,c+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!f(this,Ka)&&(f(this,Ka)[0]!==this.x||f(this,Ka)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=we,a=n/t,o=n/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:a,y:o,width:c,height:h}=this;if(c*=e,h*=n,a*=e,o*=n,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(e-c,a)),o=Math.max(0,Math.min(n-h,o));break;case 90:a=Math.max(0,Math.min(e-h,a)),o=Math.min(n,Math.max(c,o));break;case 180:a=Math.min(e,Math.max(c,a)),o=Math.min(n,Math.max(h,o));break;case 270:a=Math.min(e,Math.max(h,a)),o=Math.max(0,Math.min(n-c,o));break}this.x=a/=e,this.y=o/=n;const[d,p]=this.getBaseTranslation();a+=d,o+=p;const{style:m}=this.div;m.left=`${(100*a).toFixed(2)}%`,m.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return T(n=we,Uf,i_).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return T(n=we,Uf,i_).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this,a=e*t,o=n*t;return ri.isCSSRoundSupported?[Math.round(a),Math.round(o)]:[a,o]}setDims(t,e){const[n,a]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,f(this,gl)||(this.div.style.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,a=n.endsWith("%"),o=!f(this,gl)&&e.endsWith("%");if(a&&o)return;const[c,h]=this.parentDimensions;a||(t.width=`${(100*parseFloat(n)/c).toFixed(2)}%`),!f(this,gl)&&!o&&(t.height=`${(100*parseFloat(e)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=f(this,jn))==null||t.finish()}async addEditToolbar(){return f(this,zn)||f(this,bl)?f(this,zn):(x(this,zn,new Gw(this)),this.div.append(f(this,zn).render()),f(this,jn)&&f(this,zn).addAltTextButton(await f(this,jn).render()),f(this,zn))}removeEditToolbar(){var t;f(this,zn)&&(f(this,zn).remove(),x(this,zn,null),(t=f(this,jn))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){f(this,jn)||(Ny.initialize(we._l10nPromise),x(this,jn,new Ny(this)),f(this,pl)&&(f(this,jn).data=f(this,pl),x(this,pl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=f(this,jn))==null?void 0:t.data}set altTextData(t){f(this,jn)&&(f(this,jn).data=t)}hasAltText(){var t;return!((t=f(this,jn))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=f(this,xu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",f(this,Cu),{signal:t}),this.div.addEventListener("focusout",f(this,Tu),{signal:t});const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Dy(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=ri.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,yl,!0),this._isDraggable){T(this,qt,c2).call(this,t);return}T(this,qt,o_).call(this,t)}moveInDOM(){f(this,Fs)&&clearTimeout(f(this,Fs)),x(this,Fs,setTimeout(()=>{var t;x(this,Fs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[h,d]=this.pageTranslation,p=t/a,m=e/a,b=this.x*o,v=this.y*c,w=this.width*o,A=this.height*c;switch(n){case 0:return[b+p+h,c-v-m-A+d,b+p+w+h,c-v-m+d];case 90:return[b+m+h,c-v+p+d,b+m+A+h,c-v+p+w+d];case 180:return[b-p-w+h,c-v+m+d,b-p+h,c-v+m+A+d];case 270:return[b-m-A+h,c-v-p-w+d,b-m+h,c-v-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,o,c]=t,h=o-n,d=c-a;switch(this.rotation){case 0:return[n,e-c,h,d];case 90:return[n,e-a,d,h];case 180:return[o,e-a,h,d];case 270:return[o,e-c,d,h];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,bl,!0)}disableEditMode(){x(this,bl,!1)}isInEditMode(){return f(this,bl)}shouldGetKeyboardEvents(){return f(this,Br)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,n;const t=this._uiManager._signal;(e=this.div)==null||e.addEventListener("focusin",f(this,Cu),{signal:t}),(n=this.div)==null||n.addEventListener("focusout",f(this,Tu),{signal:t})}rotate(t){}serialize(t=!1,e=null){ye("An editor must be serializable")}static deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});a.rotation=t.rotation,x(a,pl,t.accessibilityData);const[o,c]=a.pageDimensions,[h,d,p,m]=a.getRectInCurrentCoords(t.rect,c);return a.x=h/o,a.y=d/c,a.width=p/o,a.height=m/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",f(this,Cu)),this.div.removeEventListener("focusout",f(this,Tu)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),f(this,Fs)&&(clearTimeout(f(this,Fs)),x(this,Fs,null)),T(this,qt,Ud).call(this),this.removeEditToolbar(),f(this,Vi)){for(const t of f(this,Vi).values())clearTimeout(t);x(this,Vi,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(T(this,qt,o2).call(this),f(this,An).classList.remove("hidden"),Dy(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,ml,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=f(this,An).children;if(!f(this,us)){x(this,us,Array.from(e));const c=T(this,qt,u2).bind(this),h=T(this,qt,h2).bind(this),d=this._uiManager._signal;for(const p of f(this,us)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:d}),p.addEventListener("blur",h,{signal:d}),p.addEventListener("focus",T(this,qt,d2).bind(this,m),{signal:d}),we._l10nPromise.get(`pdfjs-editor-resizer-label-${m}`).then(b=>p.setAttribute("aria-label",b))}}const n=f(this,us)[0];let a=0;for(const c of e){if(c===n)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(f(this,us).length/4);if(o!==a){if(o<a)for(let h=0;h<a-o;h++)f(this,An).append(f(this,An).firstChild);else if(o>a)for(let h=0;h<o-a;h++)f(this,An).firstChild.before(f(this,An).lastChild);let c=0;for(const h of e){const p=f(this,us)[c++].getAttribute("data-resizer-name");we._l10nPromise.get(`pdfjs-editor-resizer-label-${p}`).then(m=>h.setAttribute("aria-label",m))}}T(this,qt,l_).call(this,0),x(this,Br,!0),f(this,An).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){f(this,Br)&&T(this,qt,a_).call(this,f(this,Ff),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){T(this,qt,Ud).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!f(this,zn)){this.addEditToolbar().then(()=>{var n,a;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((a=f(this,zn))==null||a.show())});return}(e=f(this,zn))==null||e.show()}unselect(){var t,e,n,a;(t=f(this,An))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=f(this,zn))==null||a.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return f(this,If)}set isEditing(t){x(this,If,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){x(this,gl,!0);const n=t/e,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){f(this,Vi)||x(this,Vi,new Map);const{action:n}=t;let a=f(this,Vi).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),f(this,Vi).delete(n),f(this,Vi).size===0&&x(this,Vi,null)},we._telemetryTimeout),f(this,Vi).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,xu,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,xu,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};pl=new WeakMap,us=new WeakMap,jn=new WeakMap,xu=new WeakMap,gl=new WeakMap,An=new WeakMap,ml=new WeakMap,Cu=new WeakMap,Tu=new WeakMap,zn=new WeakMap,Ff=new WeakMap,yl=new WeakMap,Ka=new WeakMap,If=new WeakMap,bl=new WeakMap,Br=new WeakMap,Fs=new WeakMap,ku=new WeakMap,Ru=new WeakMap,Vi=new WeakMap,Bf=new WeakMap,Yy=new WeakMap,qt=new WeakSet,n_=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this.fixAndSetPosition()},Uf=new WeakSet,i_=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},s_=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},o2=function(){if(f(this,An))return;x(this,An,document.createElement("div")),f(this,An).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");f(this,An).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",T(this,qt,l2).bind(this,n),{signal:e}),a.addEventListener("contextmenu",oi,{signal:e}),a.tabIndex=-1}this.div.prepend(f(this,An))},l2=function(t,e){var S;e.preventDefault();const{isMac:n}=ri.platform;if(e.button!==0||e.ctrlKey&&n)return;(S=f(this,jn))==null||S.toggle(!1);const a=T(this,qt,a_).bind(this,t),o=this._isDraggable;this._isDraggable=!1;const c=this._uiManager._signal,h={passive:!0,capture:!0,signal:c};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",a,h),window.addEventListener("contextmenu",oi,{signal:c});const d=this.x,p=this.y,m=this.width,b=this.height,v=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const A=()=>{var R;this.parent.togglePointerEvents(!0),(R=f(this,jn))==null||R.toggle(!0),this._isDraggable=o,window.removeEventListener("pointerup",A),window.removeEventListener("blur",A),window.removeEventListener("pointermove",a,h),window.removeEventListener("contextmenu",oi),this.parent.div.style.cursor=v,this.div.style.cursor=w,T(this,qt,r_).call(this,d,p,m,b)};window.addEventListener("pointerup",A,{signal:c}),window.addEventListener("blur",A,{signal:c})},r_=function(t,e,n,a){const o=this.x,c=this.y,h=this.width,d=this.height;o===t&&c===e&&h===n&&d===a||this.addCommands({cmd:()=>{this.width=h,this.height=d,this.x=o,this.y=c;const[p,m]=this.parentDimensions;this.setDims(p*h,m*d),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=a,this.x=t,this.y=e;const[p,m]=this.parentDimensions;this.setDims(p*n,m*a),this.fixAndSetPosition()},mustExec:!0})},a_=function(t,e){const[n,a]=this.parentDimensions,o=this.x,c=this.y,h=this.width,d=this.height,p=we.MIN_SIZE/n,m=we.MIN_SIZE/a,b=G=>Math.round(G*1e4)/1e4,v=T(this,qt,s_).call(this,this.rotation),w=(G,V)=>[v[0]*G+v[2]*V,v[1]*G+v[3]*V],A=T(this,qt,s_).call(this,360-this.rotation),S=(G,V)=>[A[0]*G+A[2]*V,A[1]*G+A[3]*V];let R,M,D=!1,O=!1;switch(t){case"topLeft":D=!0,R=(G,V)=>[0,0],M=(G,V)=>[G,V];break;case"topMiddle":R=(G,V)=>[G/2,0],M=(G,V)=>[G/2,V];break;case"topRight":D=!0,R=(G,V)=>[G,0],M=(G,V)=>[0,V];break;case"middleRight":O=!0,R=(G,V)=>[G,V/2],M=(G,V)=>[0,V/2];break;case"bottomRight":D=!0,R=(G,V)=>[G,V],M=(G,V)=>[0,0];break;case"bottomMiddle":R=(G,V)=>[G/2,V],M=(G,V)=>[G/2,0];break;case"bottomLeft":D=!0,R=(G,V)=>[0,V],M=(G,V)=>[G,0];break;case"middleLeft":O=!0,R=(G,V)=>[0,V/2],M=(G,V)=>[G,V/2];break}const I=R(h,d),U=M(h,d);let P=w(...U);const H=b(o+P[0]),K=b(c+P[1]);let tt=1,nt=1,[rt,mt]=this.screenToPageTranslation(e.movementX,e.movementY);if([rt,mt]=S(rt/n,mt/a),D){const G=Math.hypot(h,d);tt=nt=Math.max(Math.min(Math.hypot(U[0]-I[0]-rt,U[1]-I[1]-mt)/G,1/h,1/d),p/h,m/d)}else O?tt=Math.max(p,Math.min(1,Math.abs(U[0]-I[0]-rt)))/h:nt=Math.max(m,Math.min(1,Math.abs(U[1]-I[1]-mt)))/d;const At=b(h*tt),dt=b(d*nt);P=w(...M(At,dt));const st=H-P[0],F=K-P[1];this.width=At,this.height=dt,this.x=st,this.y=F,this.setDims(n*At,a*dt),this.fixAndSetPosition()},o_=function(t){const{isMac:e}=ri.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},c2=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let n,a;const o=this._uiManager._signal;e&&(this.div.classList.add("moving"),n={passive:!0,capture:!0,signal:o},x(this,ku,t.clientX),x(this,Ru,t.clientY),a=h=>{const{clientX:d,clientY:p}=h,[m,b]=this.screenToPageTranslation(d-f(this,ku),p-f(this,Ru));x(this,ku,d),x(this,Ru,p),this._uiManager.dragSelectedEditors(m,b)},window.addEventListener("pointermove",a,n));const c=()=>{window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",a,n)),x(this,yl,!1),this._uiManager.endDragSession()||T(this,qt,o_).call(this,t)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},u2=function(t){we._resizerKeyboardManager.exec(this,t)},h2=function(t){var e;f(this,Br)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==f(this,An)&&T(this,qt,Ud).call(this)},d2=function(t){x(this,Ff,f(this,Br)?t:"")},l_=function(t){if(f(this,us))for(const e of f(this,us))e.tabIndex=t},Ud=function(){if(x(this,Br,!1),T(this,qt,l_).call(this,-1),f(this,ml)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=f(this,ml);T(this,qt,r_).call(this,t,e,n,a),x(this,ml,null)}},k(we,Uf),Mt(we,"_borderLineWidth",-1),Mt(we,"_colorManager",new Kw),Mt(we,"_zIndex",1),Mt(we,"_telemetryTimeout",1e3);let he=we;class JI extends he{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const rT=3285377520,Hi=4294901760,Ds=65535;class f2{constructor(t){this.h1=t?t&4294967295:rT,this.h2=t?t&4294967295:rT}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let S=0,R=t.length;S<R;S++){const M=t.charCodeAt(S);M<=255?e[n++]=M:(e[n++]=M>>>8,e[n++]=M&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,o=n-a*4,c=new Uint32Array(e.buffer,0,a);let h=0,d=0,p=this.h1,m=this.h2;const b=3432918353,v=461845907,w=b&Ds,A=v&Ds;for(let S=0;S<a;S++)S&1?(h=c[S],h=h*b&Hi|h*w&Ds,h=h<<15|h>>>17,h=h*v&Hi|h*A&Ds,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(d=c[S],d=d*b&Hi|d*w&Ds,d=d<<15|d>>>17,d=d*v&Hi|d*A&Ds,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,o){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*b&Hi|h*w&Ds,h=h<<15|h>>>17,h=h*v&Hi|h*A&Ds,a&1?p^=h:m^=h}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Hi|t*36045&Ds,e=e*4283543511&Hi|((e<<16|t>>>16)*2950163797&Hi)>>>16,t^=e>>>1,t=t*444984403&Hi|t*60499&Ds,e=e*3301882366&Hi|((e<<16|t>>>16)*3120437893&Hi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const c_=Object.freeze({map:null,hash:"",transfer:void 0});var vl,Sn,$y,p2;class UA{constructor(){k(this,$y);k(this,vl,!1);k(this,Sn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=f(this,Sn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return f(this,Sn).get(t)}remove(t){if(f(this,Sn).delete(t),f(this,Sn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of f(this,Sn).values())if(e instanceof he)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=f(this,Sn).get(t);let a=!1;if(n!==void 0)for(const[o,c]of Object.entries(e))n[o]!==c&&(a=!0,n[o]=c);else a=!0,f(this,Sn).set(t,e);a&&T(this,$y,p2).call(this),e instanceof he&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return f(this,Sn).has(t)}getAll(){return f(this,Sn).size>0?OA(f(this,Sn)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return f(this,Sn).size}resetModified(){f(this,vl)&&(x(this,vl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new g2(this)}get serializable(){if(f(this,Sn).size===0)return c_;const t=new Map,e=new f2,n=[],a=Object.create(null);let o=!1;for(const[c,h]of f(this,Sn)){const d=h instanceof he?h.serialize(!1,a):h;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:c_}get editorStats(){let t=null;const e=new Map;for(const n of f(this,Sn).values()){if(!(n instanceof he))continue;const a=n.telemetryFinalData;if(!a)continue;const{type:o}=a;e.has(o)||e.set(o,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const c=t[o]||(t[o]=new Map);for(const[h,d]of Object.entries(a)){if(h==="type")continue;let p=c.get(h);p||(p=new Map,c.set(h,p));const m=p.get(d)??0;p.set(d,m+1)}}for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}}vl=new WeakMap,Sn=new WeakMap,$y=new WeakSet,p2=function(){f(this,vl)||(x(this,vl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Hf;class g2 extends UA{constructor(e){super();k(this,Hf);const{map:n,hash:a,transfer:o}=e.serializable,c=structuredClone(n,o?{transfer:o}:null);x(this,Hf,{map:c,hash:a,transfer:o})}get print(){ye("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,Hf)}}Hf=new WeakMap;var Mu;class tB{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){k(this,Mu,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),f(this,Mu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||f(this,Mu).has(t.loadedName))){if(nn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:a,style:o}=t,c=new FontFace(n,a,o);this.addNativeFontFace(c);try{await c.load(),f(this,Mu).add(n),e==null||e(t)}catch{Ft(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}ye("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw Ft(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return te(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Fn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),te(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(nn(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return te(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(I,U){return I.charCodeAt(U)<<24|I.charCodeAt(U+1)<<16|I.charCodeAt(U+2)<<8|I.charCodeAt(U+3)&255}function a(I,U,P,H){const K=I.substring(0,U),tt=I.substring(U+P);return K+H+tt}let o,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let p=0;function m(I,U){if(++p>30){Ft("Load test font never loaded."),U();return}if(d.font="30px "+I,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){U();return}setTimeout(m.bind(null,I,U))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,b.length,b);const A=16,S=1482184792;let R=n(v,A);for(o=0,c=b.length-3;o<c;o+=4)R=R-S+n(b,o)|0;o<b.length&&(R=R-S+n(b+"XXX",o)|0),v=a(v,A,4,PI(R));const M=`url(data:font/opentype;base64,${btoa(v)});`,D=`@font-face {font-family:"${b}";src:${M}}`;this.insertRule(D);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const I of[t.loadedName,b]){const U=this._document.createElement("span");U.textContent="Hi",U.style.fontFamily=I,O.append(U)}this._document.body.append(O),m(b,()=>{O.remove(),e.complete()})}}Mu=new WeakMap;class eB{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var a;if(!this.data||this.disableFontFace)return null;const t=zR(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let o=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(o+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${o}src:${e}}`}return(a=this._inspectFont)==null||a.call(this,this,e),n}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(o){Ft(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(o,c){};const a=[];for(let o=0,c=n.length;o<c;)switch(n[o++]){case Cr.BEZIER_CURVE_TO:{const[h,d,p,m,b,v]=n.slice(o,o+6);a.push(w=>w.bezierCurveTo(h,d,p,m,b,v)),o+=6}break;case Cr.MOVE_TO:{const[h,d]=n.slice(o,o+2);a.push(p=>p.moveTo(h,d)),o+=2}break;case Cr.LINE_TO:{const[h,d]=n.slice(o,o+2);a.push(p=>p.lineTo(h,d)),o+=2}break;case Cr.QUADRATIC_CURVE_TO:{const[h,d,p,m]=n.slice(o,o+4);a.push(b=>b.quadraticCurveTo(h,d,p,m)),o+=4}break;case Cr.RESTORE:a.push(h=>h.restore());break;case Cr.SAVE:a.push(h=>h.save());break;case Cr.SCALE:nn(a.length===2,"Scale command is only valid at the third position.");break;case Cr.TRANSFORM:{const[h,d,p,m,b,v]=n.slice(o,o+6);a.push(w=>w.transform(h,d,p,m,b,v)),o+=6}break;case Cr.TRANSLATE:{const[h,d]=n.slice(o,o+2);a.push(p=>p.translate(h,d)),o+=2}break}return this.compiledGlyphs[e]=function(c,h){a[0](c),a[1](c),c.scale(h,-h);for(let d=2,p=a.length;d<p;d++)a[d](c)}}}if(Fn){var u_=Promise.withResolvers(),tf=null;(async()=>{const t=await nl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await nl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await nl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),a=await nl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:t,http:e,https:n,url:a,canvas:o,path2d:c}))})().then(t=>{tf=t,u_.resolve()},t=>{Ft(`loadPackages: ${t}`),tf=new Map,u_.resolve()})}class rr{static get promise(){return u_.promise}static get(t){return tf==null?void 0:tf.get(t)}}const m2=function(r){return rr.get("fs").promises.readFile(r).then(e=>new Uint8Array(e))};class nB extends Ab{}class iB extends Ly{_createCanvas(t,e){return rr.get("canvas").createCanvas(t,e)}}class sB extends Sb{_fetchData(t,e){return m2(t).then(n=>({cMapData:n,compressionType:e}))}}class rB extends Eb{_fetchData(t){return m2(t)}}const Vn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function h_(r,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),r.clip(a)}class ng{constructor(){this.constructor===ng&&ye("Cannot initialize BaseShadingPattern.")}getPattern(){ye("Abstract method `getPattern` called.")}}class aB extends ng{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let o;if(a===Vn.STROKE||a===Vn.FILL){const c=e.current.getClippedPathBoundingBox(a,De(t))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,p=e.cachedCanvases.getCanvas("pattern",h,d,!0),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),n=_t.transform(n,[1,0,0,1,c[0],c[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),h_(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(p.canvas,"no-repeat");const b=new DOMMatrix(n);o.setTransform(b)}else h_(t,this._bbox),o=this._createGradient(t);return o}}function yw(r,t,e,n,a,o,c,h){const d=t.coords,p=t.colors,m=r.data,b=r.width*4;let v;d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=o,o=c,c=v),d[n+1]>d[a+1]&&(v=n,n=a,a=v,v=c,c=h,h=v),d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=o,o=c,c=v);const w=(d[e]+t.offsetX)*t.scaleX,A=(d[e+1]+t.offsetY)*t.scaleY,S=(d[n]+t.offsetX)*t.scaleX,R=(d[n+1]+t.offsetY)*t.scaleY,M=(d[a]+t.offsetX)*t.scaleX,D=(d[a+1]+t.offsetY)*t.scaleY;if(A>=D)return;const O=p[o],I=p[o+1],U=p[o+2],P=p[c],H=p[c+1],K=p[c+2],tt=p[h],nt=p[h+1],rt=p[h+2],mt=Math.round(A),At=Math.round(D);let dt,st,F,G,V,xt,Tt,N;for(let q=mt;q<=At;q++){if(q<R){const ot=q<A?0:(A-q)/(A-R);dt=w-(w-S)*ot,st=O-(O-P)*ot,F=I-(I-H)*ot,G=U-(U-K)*ot}else{let ot;q>D?ot=1:R===D?ot=0:ot=(R-q)/(R-D),dt=S-(S-M)*ot,st=P-(P-tt)*ot,F=H-(H-nt)*ot,G=K-(K-rt)*ot}let Q;q<A?Q=0:q>D?Q=1:Q=(A-q)/(A-D),V=w-(w-M)*Q,xt=O-(O-tt)*Q,Tt=I-(I-nt)*Q,N=U-(U-rt)*Q;const it=Math.round(Math.min(dt,V)),ht=Math.round(Math.max(dt,V));let bt=b*q+it*4;for(let ot=it;ot<=ht;ot++)Q=(dt-ot)/(dt-V),Q<0?Q=0:Q>1&&(Q=1),m[bt++]=st-(st-xt)*Q|0,m[bt++]=F-(F-Tt)*Q|0,m[bt++]=G-(G-N)*Q|0,m[bt++]=255}}function oB(r,t,e){const n=t.coords,a=t.colors;let o,c;switch(t.type){case"lattice":const h=t.verticesPerRow,d=Math.floor(n.length/h)-1,p=h-1;for(o=0;o<d;o++){let m=o*h;for(let b=0;b<p;b++,m++)yw(r,e,n[m],n[m+1],n[m+h],a[m],a[m+1],a[m+h]),yw(r,e,n[m+h+1],n[m+1],n[m+h],a[m+h+1],a[m+1],a[m+h])}break;case"triangles":for(o=0,c=n.length;o<c;o+=3)yw(r,e,n[o],n[o+1],n[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class lB extends ng{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-d,b=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),w=p/b,A=m/v,S={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/w,scaleY:1/A},R=b+4,M=v+4,D=n.getCanvas("mesh",R,M,!1),O=D.context,I=O.createImageData(b,v);if(e){const P=I.data;for(let H=0,K=P.length;H<K;H+=4)P[H]=e[0],P[H+1]=e[1],P[H+2]=e[2],P[H+3]=255}for(const P of this._figures)oB(I,P,S);return O.putImageData(I,2,2),{canvas:D.canvas,offsetX:h-2*w,offsetY:d-2*A,scaleX:w,scaleY:A}}getPattern(t,e,n,a){h_(t,this._bbox);let o;if(a===Vn.SHADING)o=_t.singularValueDecompose2dScale(De(t));else if(o=_t.singularValueDecompose2dScale(e.baseTransform),this.matrix){const h=_t.singularValueDecompose2dScale(this.matrix);o=[o[0]*h[0],o[1]*h[1]]}const c=this._createMeshCanvas(o,a===Vn.SHADING?null:this._background,e.cachedCanvases);return a!==Vn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class cB extends ng{getPattern(){return"hotpink"}}function uB(r){switch(r[0]){case"RadialAxial":return new aB(r);case"Mesh":return new lB(r);case"Dummy":return new cB}throw new Error(`Unknown IR type: ${r[0]}`)}const aT={COLORED:1,UNCOLORED:2},Ky=class Ky{constructor(t,e,n,a,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=a,this.baseTransform=o}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,a=this.xstep,o=this.ystep,c=this.paintType,h=this.tilingType,d=this.color,p=this.canvasGraphicsFactory;vb("TilingType: "+h);const m=n[0],b=n[1],v=n[2],w=n[3],A=_t.singularValueDecompose2dScale(this.matrix),S=_t.singularValueDecompose2dScale(this.baseTransform),R=[A[0]*S[0],A[1]*S[1]],M=this.getSizeAndScale(a,this.ctx.canvas.width,R[0]),D=this.getSizeAndScale(o,this.ctx.canvas.height,R[1]),O=t.cachedCanvases.getCanvas("pattern",M.size,D.size,!0),I=O.context,U=p.createCanvasGraphics(I);U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,c,d);let P=m,H=b,K=v,tt=w;return m<0&&(P=0,K+=Math.abs(m)),b<0&&(H=0,tt+=Math.abs(b)),I.translate(-(M.scale*P),-(D.scale*H)),U.transform(M.scale,0,0,D.scale,0,0),I.save(),this.clipBbox(U,P,H,K,tt),U.baseTransform=De(U.ctx),U.executeOperatorList(e),U.endDrawing(),{canvas:O.canvas,scaleX:M.scale,scaleY:D.scale,offsetX:P,offsetY:H}}getSizeAndScale(t,e,n){t=Math.abs(t);const a=Math.max(Ky.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=a?o=a:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,a,o){const c=a-e,h=o-n;t.ctx.rect(e,n,c,h),t.current.updateRectMinMax(De(t.ctx),[e,n,a,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,o=t.current;switch(e){case aT.COLORED:const c=this.ctx;a.fillStyle=c.fillStyle,a.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case aT.UNCOLORED:const h=_t.makeHexColor(n[0],n[1],n[2]);a.fillStyle=h,a.strokeStyle=h,o.fillColor=h,o.strokeColor=h;break;default:throw new zI(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,a){let o=n;a!==Vn.SHADING&&(o=_t.transform(o,e.baseTransform),this.matrix&&(o=_t.transform(o,this.matrix)));const c=this.createPatternCanvas(e);let h=new DOMMatrix(o);h=h.translate(c.offsetX,c.offsetY),h=h.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(h),d}};Mt(Ky,"MAX_PATTERN_SIZE",3e3);let d_=Ky;function hB({src:r,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const h=ri.isLittleEndian?4278190080:255,[d,p]=c?[o,h]:[h,o],m=n>>3,b=n&7,v=r.length;e=new Uint32Array(e.buffer);let w=0;for(let A=0;A<a;A++){for(const R=t+m;t<R;t++){const M=t<v?r[t]:255;e[w++]=M&128?p:d,e[w++]=M&64?p:d,e[w++]=M&32?p:d,e[w++]=M&16?p:d,e[w++]=M&8?p:d,e[w++]=M&4?p:d,e[w++]=M&2?p:d,e[w++]=M&1?p:d}if(b===0)continue;const S=t<v?r[t++]:255;for(let R=0;R<b;R++)e[w++]=S&1<<7-R?p:d}return{srcPos:t,destPos:w}}const oT=16,lT=100,dB=15,cT=10,uT=1e3,si=16;function fB(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(n,a){t.translate(n,a),this.__originalTranslate(n,a)},r.scale=function(n,a){t.scale(n,a),this.__originalScale(n,a)},r.transform=function(n,a,o,c,h,d){t.transform(n,a,o,c,h,d),this.__originalTransform(n,a,o,c,h,d)},r.setTransform=function(n,a,o,c,h,d){t.setTransform(n,a,o,c,h,d),this.__originalSetTransform(n,a,o,c,h,d)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(n){t.rotate(n),this.__originalRotate(n)},r.clip=function(n){t.clip(n),this.__originalClip(n)},r.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},r.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},r.bezierCurveTo=function(e,n,a,o,c,h){t.bezierCurveTo(e,n,a,o,c,h),this.__originalBezierCurveTo(e,n,a,o,c,h)},r.rect=function(e,n,a,o){t.rect(e,n,a,o),this.__originalRect(e,n,a,o)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class pB{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Lm(r,t,e,n,a,o,c,h,d,p){const[m,b,v,w,A,S]=De(r);if(b===0&&v===0){const D=c*m+A,O=Math.round(D),I=h*w+S,U=Math.round(I),P=(c+d)*m+A,H=Math.abs(Math.round(P)-O)||1,K=(h+p)*w+S,tt=Math.abs(Math.round(K)-U)||1;return r.setTransform(Math.sign(m),0,0,Math.sign(w),O,U),r.drawImage(t,e,n,a,o,0,0,H,tt),r.setTransform(m,b,v,w,A,S),[H,tt]}if(m===0&&w===0){const D=h*v+A,O=Math.round(D),I=c*b+S,U=Math.round(I),P=(h+p)*v+A,H=Math.abs(Math.round(P)-O)||1,K=(c+d)*b+S,tt=Math.abs(Math.round(K)-U)||1;return r.setTransform(0,Math.sign(b),Math.sign(v),0,O,U),r.drawImage(t,e,n,a,o,0,0,tt,H),r.setTransform(m,b,v,w,A,S),[tt,H]}r.drawImage(t,e,n,a,o,c,h,d,p);const R=Math.hypot(m,b),M=Math.hypot(v,w);return[R*d,M*p]}function gB(r){const{width:t,height:e}=r;if(t>uT||e>uT)return null;const n=1e3,a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let c=new Uint8Array(o*(e+1)),h,d,p;const m=t+7&-8;let b=new Uint8Array(m*e),v=0;for(const M of r.data){let D=128;for(;D>0;)b[v++]=M&D?0:255,D>>=1}let w=0;for(v=0,b[v]!==0&&(c[0]=1,++w),d=1;d<t;d++)b[v]!==b[v+1]&&(c[d]=b[v]?2:1,++w),v++;for(b[v]!==0&&(c[d]=2,++w),h=1;h<e;h++){v=h*m,p=h*o,b[v-m]!==b[v]&&(c[p]=b[v]?1:8,++w);let M=(b[v]?4:0)+(b[v-m]?8:0);for(d=1;d<t;d++)M=(M>>2)+(b[v+1]?4:0)+(b[v-m+1]?8:0),a[M]&&(c[p+d]=a[M],++w),v++;if(b[v-m]!==b[v]&&(c[p+d]=b[v]?2:4,++w),w>n)return null}for(v=m*(e-1),p=h*o,b[v]!==0&&(c[p]=8,++w),d=1;d<t;d++)b[v]!==b[v+1]&&(c[p+d]=b[v]?4:8,++w),v++;if(b[v]!==0&&(c[p+d]=4,++w),w>n)return null;const A=new Int32Array([0,o,-1,0,-o,0,0,0,1]),S=new Path2D;for(h=0;w&&h<=e;h++){let M=h*o;const D=M+t;for(;M<D&&!c[M];)M++;if(M===D)continue;S.moveTo(M%o,h);const O=M;let I=c[M];do{const U=A[I];do M+=U;while(!c[M]);const P=c[M];P!==5&&P!==10?(I=P,c[M]=0):(I=P&51*I>>4,c[M]&=I>>2|I<<2),S.lineTo(M%o,M/o|0),c[M]||--w}while(O!==M);--h}return b=null,c=null,function(M){M.save(),M.scale(1/t,-1/e),M.translate(0,-e),M.fill(S),M.beginPath(),M.restore()}}class hT{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=OR,this.textMatrixScale=1,this.fontMatrix=Fw,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Nn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=_t.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=_t.applyTransform(e,t),a=_t.applyTransform(e.slice(2),t),o=_t.applyTransform([e[0],e[3]],t),c=_t.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],a[0],o[0],c[0]),this.minY=Math.min(this.minY,n[1],a[1],o[1],c[1]),this.maxX=Math.max(this.maxX,n[0],a[0],o[0],c[0]),this.maxY=Math.max(this.maxY,n[1],a[1],o[1],c[1])}updateScalingPathMinMax(t,e){_t.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,a,o,c,h,d,p,m){const b=_t.bezierBoundingBox(e,n,a,o,c,h,d,p,m);m||this.updateRectMinMax(t,b)}getPathBoundingBox(t=Vn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Vn.STROKE){e||ye("Stroke bounding box must include transform.");const a=_t.singularValueDecompose2dScale(e),o=a[0]*this.lineWidth/2,c=a[1]*this.lineWidth/2;n[0]-=o,n[1]-=c,n[2]+=o,n[3]+=c}return n}updateClipFromPath(){const t=_t.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Vn.FILL,e=null){return _t.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function dT(r,t){if(typeof ImageData<"u"&&t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%si,o=(e-a)/si,c=a===0?o:o+1,h=r.createImageData(n,si);let d=0,p;const m=t.data,b=h.data;let v,w,A,S;if(t.kind===Xm.GRAYSCALE_1BPP){const R=m.byteLength,M=new Uint32Array(b.buffer,0,b.byteLength>>2),D=M.length,O=n+7>>3,I=4294967295,U=ri.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(A=v<o?si:a,p=0,w=0;w<A;w++){const P=R-d;let H=0;const K=P>O?n:P*8-7,tt=K&-8;let nt=0,rt=0;for(;H<tt;H+=8)rt=m[d++],M[p++]=rt&128?I:U,M[p++]=rt&64?I:U,M[p++]=rt&32?I:U,M[p++]=rt&16?I:U,M[p++]=rt&8?I:U,M[p++]=rt&4?I:U,M[p++]=rt&2?I:U,M[p++]=rt&1?I:U;for(;H<K;H++)nt===0&&(rt=m[d++],nt=128),M[p++]=rt&nt?I:U,nt>>=1}for(;p<D;)M[p++]=0;r.putImageData(h,0,v*si)}}else if(t.kind===Xm.RGBA_32BPP){for(w=0,S=n*si*4,v=0;v<o;v++)b.set(m.subarray(d,d+S)),d+=S,r.putImageData(h,0,w),w+=si;v<c&&(S=n*a*4,b.set(m.subarray(d,d+S)),r.putImageData(h,0,w))}else if(t.kind===Xm.RGB_24BPP)for(A=si,S=n*A,v=0;v<c;v++){for(v>=o&&(A=a,S=n*A),p=0,w=S;w--;)b[p++]=m[d++],b[p++]=m[d++],b[p++]=m[d++],b[p++]=255;r.putImageData(h,0,v*si)}else throw new Error(`bad image kind: ${t.kind}`)}function fT(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%si,o=(e-a)/si,c=a===0?o:o+1,h=r.createImageData(n,si);let d=0;const p=t.data,m=h.data;for(let b=0;b<c;b++){const v=b<o?si:a;({srcPos:d}=hB({src:p,srcPos:d,dest:m,width:n,height:v,nonBlackColor:0})),r.putImageData(h,0,b*si)}}function Dd(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)r[n]!==void 0&&(t[n]=r[n]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Dm(r){if(r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0),!Fn){const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}}function pT(r,t){if(t)return!0;const e=_t.singularValueDecompose2dScale(r);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*wo.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const mB=["butt","round","square"],yB=["miter","round","bevel"],bB={},gT={};var Ao,f_,p_;const YA=class YA{constructor(t,e,n,a,o,{optionalContentConfig:c,markedContentStack:h=null},d,p){k(this,Ao);this.ctx=t,this.current=new hT(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new pB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=h,n){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...De(this.compositeCtx))}this.ctx.save(),Dm(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=De(this.ctx)}executeOperatorList(t,e,n,a){const o=t.argsArray,c=t.fnArray;let h=e||0;const d=o.length;if(d===h)return h;const p=d-h>cT&&typeof n=="function",m=p?Date.now()+dB:0;let b=0;const v=this.commonObjs,w=this.objs;let A;for(;;){if(a!==void 0&&h===a.nextBreakPoint)return a.breakIt(h,n),h;if(A=c[h],A!==rs.dependency)this[A].apply(this,o[h]);else for(const S of o[h]){const R=S.startsWith("g_")?v:w;if(!R.has(S))return R.get(S,n),h}if(h++,h===d)return h;if(p&&++b>cT){if(Date.now()>m)return n(),h;b=0}}}endDrawing(){T(this,Ao,f_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),T(this,Ao,p_).call(this)}_scaleImage(t,e){const n=t.width,a=t.height;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),h=n,d=a,p="prescale1",m,b;for(;o>2&&h>1||c>2&&d>1;){let v=h,w=d;o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/v),c>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/w),m=this.cachedCanvases.getCanvas(p,v,w),b=m.context,b.clearRect(0,0,v,w),b.drawImage(t,0,0,h,d,0,0,v,w),t=m.canvas,h=v,d=w,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:a}=t,o=this.current.fillColor,c=this.current.patternFill,h=De(e);let d,p,m,b;if((t.bitmap||t.data)&&t.count>1){const K=t.bitmap||t.data.buffer;p=JSON.stringify(c?h:[h.slice(0,4),o]),d=this._cachedBitmapsMap.get(K),d||(d=new Map,this._cachedBitmapsMap.set(K,d));const tt=d.get(p);if(tt&&!c){const nt=Math.round(Math.min(h[0],h[2])+h[4]),rt=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:tt,offsetX:nt,offsetY:rt}}m=tt}m||(b=this.cachedCanvases.getCanvas("maskCanvas",n,a),fT(b.context,t));let v=_t.transform(h,[1/n,0,0,-1/a,0,0]);v=_t.transform(v,[1,0,0,1,0,-a]);const[w,A,S,R]=_t.getAxialAlignedBoundingBox([0,0,n,a],v),M=Math.round(S-w)||1,D=Math.round(R-A)||1,O=this.cachedCanvases.getCanvas("fillCanvas",M,D),I=O.context,U=w,P=A;I.translate(-U,-P),I.transform(...v),m||(m=this._scaleImage(b.canvas,Tr(I)),m=m.img,d&&c&&d.set(p,m)),I.imageSmoothingEnabled=pT(De(I),t.interpolate),Lm(I,m,0,0,m.width,m.height,0,0,n,a),I.globalCompositeOperation="source-in";const H=_t.transform(Tr(I),[1,0,0,1,-U,-P]);return I.fillStyle=c?o.getPattern(e,this,H,Vn.FILL):o,I.fillRect(0,0,n,a),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,O.canvas)),{canvas:O.canvas,offsetX:Math.round(U),offsetY:Math.round(P)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=mB[t]}setLineJoin(t){this.ctx.lineJoin=yB[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=a.context;const o=this.ctx;o.setTransform(...De(this.suspendedCtx)),Dd(this.suspendedCtx,o),fB(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Dd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const o=a[0],c=a[1],h=a[2]-o,d=a[3]-c;h===0||d===0||(this.genericComposeSMask(e.context,n,h,d,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,o,c,h,d,p,m,b){let v=t.canvas,w=d-m,A=p-b;if(c){if(w<0||A<0||w+n>v.width||A+a>v.height){const R=this.cachedCanvases.getCanvas("maskExtension",n,a),M=R.context;M.drawImage(v,-w,-A),c.some(D=>D!==0)&&(M.globalCompositeOperation="destination-atop",M.fillStyle=_t.makeHexColor(...c),M.fillRect(0,0,n,a),M.globalCompositeOperation="source-over"),v=R.canvas,w=A=0}else if(c.some(R=>R!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(w,A,n,a),t.clip(R),t.globalCompositeOperation="destination-atop",t.fillStyle=_t.makeHexColor(...c),t.fillRect(w,A,n,a),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const S=new Path2D;S.rect(d,p,n,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(v,w,A,n,a,d,p,n,a),e.restore()}save(){this.inSMaskMode?(Dd(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Dd(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,a,o,c){this.ctx.transform(t,e,n,a,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const a=this.ctx,o=this.current;let c=o.x,h=o.y,d,p;const m=De(a),b=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,v=b?n.slice(0):null;for(let w=0,A=0,S=t.length;w<S;w++)switch(t[w]|0){case rs.rectangle:c=e[A++],h=e[A++];const R=e[A++],M=e[A++],D=c+R,O=h+M;a.moveTo(c,h),R===0||M===0?a.lineTo(D,O):(a.lineTo(D,h),a.lineTo(D,O),a.lineTo(c,O)),b||o.updateRectMinMax(m,[c,h,D,O]),a.closePath();break;case rs.moveTo:c=e[A++],h=e[A++],a.moveTo(c,h),b||o.updatePathMinMax(m,c,h);break;case rs.lineTo:c=e[A++],h=e[A++],a.lineTo(c,h),b||o.updatePathMinMax(m,c,h);break;case rs.curveTo:d=c,p=h,c=e[A+4],h=e[A+5],a.bezierCurveTo(e[A],e[A+1],e[A+2],e[A+3],c,h),o.updateCurvePathMinMax(m,d,p,e[A],e[A+1],e[A+2],e[A+3],c,h,v),A+=6;break;case rs.curveTo2:d=c,p=h,a.bezierCurveTo(c,h,e[A],e[A+1],e[A+2],e[A+3]),o.updateCurvePathMinMax(m,d,p,c,h,e[A],e[A+1],e[A+2],e[A+3],v),c=e[A+2],h=e[A+3],A+=4;break;case rs.curveTo3:d=c,p=h,c=e[A+2],h=e[A+3],a.bezierCurveTo(e[A],e[A+1],c,h,c,h),o.updateCurvePathMinMax(m,d,p,e[A],e[A+1],c,h,c,h,v),A+=4;break;case rs.closePath:a.closePath();break}b&&o.updateScalingPathMinMax(m,v),o.setCurrentPoint(c,h)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,Tr(e),Vn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;let o=!1;a&&(e.save(),e.fillStyle=n.getPattern(e,this,Tr(e),Vn.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),o&&e.restore(),t&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=bB}eoClip(){this.pendingClip=gT}beginText(){this.current.textMatrix=OR,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const n=this.commonObjs.get(t),a=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=n.fontMatrix||Fw,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Ft("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const o=n.loadedName||"sans-serif",c=((m=n.systemFontInfo)==null?void 0:m.css)||`"${o}", ${n.fallbackName}`;let h="normal";n.black?h="900":n.bold&&(h="bold");const d=n.italic?"italic":"normal";let p=e;e<oT?p=oT:e>lT&&(p=lT),this.current.fontSizeScale=e/p,this.ctx.font=`${d} ${h} ${p}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,a,o,c){this.current.textMatrix=[t,e,n,a,o,c],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,a){const o=this.ctx,c=this.current,h=c.font,d=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,m=d&Nn.FILL_STROKE_MASK,b=!!(d&Nn.ADD_TO_PATH_FLAG),v=c.patternFill&&!h.missingFile;let w;(h.disableFontFace||b||v)&&(w=h.getPathGenerator(this.commonObjs,t)),h.disableFontFace||v?(o.save(),o.translate(e,n),o.beginPath(),w(o,p),a&&o.setTransform(...a),(m===Nn.FILL||m===Nn.FILL_STROKE)&&o.fill(),(m===Nn.STROKE||m===Nn.FILL_STROKE)&&o.stroke(),o.restore()):((m===Nn.FILL||m===Nn.FILL_STROKE)&&o.fillText(t,e,n),(m===Nn.STROKE||m===Nn.FILL_STROKE)&&o.strokeText(t,e,n)),b&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:De(o),x:e,y:n,fontSize:p,addToPath:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return te(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const o=this.ctx,c=e.fontSizeScale,h=e.charSpacing,d=e.wordSpacing,p=e.fontDirection,m=e.textHScale*p,b=t.length,v=n.vertical,w=v?1:-1,A=n.defaultVMetrics,S=a*e.fontMatrix[0],R=e.textRenderingMode===Nn.FILL&&!n.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),p>0?o.scale(m,-1):o.scale(m,1);let M;if(e.patternFill){o.save();const P=e.fillColor.getPattern(o,this,Tr(o),Vn.FILL);M=De(o),o.restore(),o.fillStyle=P}let D=e.lineWidth;const O=e.textMatrixScale;if(O===0||D===0){const P=e.textRenderingMode&Nn.FILL_STROKE_MASK;(P===Nn.STROKE||P===Nn.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=O;if(c!==1&&(o.scale(c,c),D/=c),o.lineWidth=D,n.isInvalidPDFjsFont){const P=[];let H=0;for(const K of t)P.push(K.unicode),H+=K.width;o.fillText(P.join(""),0,0),e.x+=H*S*m,o.restore(),this.compose();return}let I=0,U;for(U=0;U<b;++U){const P=t[U];if(typeof P=="number"){I+=w*P*a/1e3;continue}let H=!1;const K=(P.isSpace?d:0)+h,tt=P.fontChar,nt=P.accent;let rt,mt,At=P.width;if(v){const st=P.vmetric||A,F=-(P.vmetric?st[1]:At*.5)*S,G=st[2]*S;At=st?-st[0]:At,rt=F/c,mt=(I+G)/c}else rt=I/c,mt=0;if(n.remeasure&&At>0){const st=o.measureText(tt).width*1e3/a*c;if(At<st&&this.isFontSubpixelAAEnabled){const F=At/st;H=!0,o.save(),o.scale(F,1),rt/=F}else At!==st&&(rt+=(At-st)/2e3*a/c)}if(this.contentVisible&&(P.isInFont||n.missingFile)){if(R&&!nt)o.fillText(tt,rt,mt);else if(this.paintChar(tt,rt,mt,M),nt){const st=rt+a*nt.offset.x/c,F=mt-a*nt.offset.y/c;this.paintChar(nt.fontChar,st,F,M)}}const dt=v?At*S-K*p:At*S+K*p;I+=dt,H&&o.restore()}v?e.y-=I:e.x+=I*m,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,a=n.font,o=n.fontSize,c=n.fontDirection,h=a.vertical?1:-1,d=n.charSpacing,p=n.wordSpacing,m=n.textHScale*c,b=n.fontMatrix||Fw,v=t.length,w=n.textRenderingMode===Nn.INVISIBLE;let A,S,R,M;if(!(w||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(m,c),A=0;A<v;++A){if(S=t[A],typeof S=="number"){M=h*S*o/1e3,this.ctx.translate(M,0),n.x+=M*m;continue}const D=(S.isSpace?p:0)+d,O=a.charProcOperatorList[S.operatorListId];if(!O){Ft(`Type3 character "${S.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=S,this.save(),e.scale(o,o),e.transform(...b),this.executeOperatorList(O),this.restore()),R=_t.applyTransform([S.width,0],b)[0]*o+D,e.translate(R,0),n.x+=R*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,a,o,c){this.ctx.rect(n,a,o-n,c-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],a=this.baseTransform||De(this.ctx),o={createCanvasGraphics:c=>new YA(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new d_(t,n,this.ctx,o,a)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const a=_t.makeHexColor(t,e,n);this.ctx.strokeStyle=a,this.current.strokeColor=a}setFillRGBColor(t,e,n){const a=_t.makeHexColor(t,e,n);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=uB(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Tr(e),Vn.SHADING);const a=Tr(e);if(a){const{width:o,height:c}=e.canvas,[h,d,p,m]=_t.getAxialAlignedBoundingBox([0,0,o,c],a);this.ctx.fillRect(h,d,p-h,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ye("Should not call beginInlineImage")}beginImageData(){ye("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=De(this.ctx),e)){const n=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],n,a),this.current.updateRectMinMax(De(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||vb("TODO: Support non-isolated groups."),t.knockout&&Ft("Knockout groups not supported.");const n=De(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=_t.getAxialAlignedBoundingBox(t.bbox,De(e));const o=[0,0,e.canvas.width,e.canvas.height];a=_t.intersect(a,o)||[0,0,0,0];const c=Math.floor(a[0]),h=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-c,1),p=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(m,d,p),v=b.context;v.translate(-c,-h),v.transform(...n),t.smask?this.smaskStack.push({canvas:b.canvas,context:v,offsetX:c,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(c,h),e.save()),Dd(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=De(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const o=_t.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,n,a,o){if(T(this,Ao,f_).call(this),Dm(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const c=e[2]-e[0],h=e[3]-e[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=c,e[3]=h;const[d,p]=_t.singularValueDecompose2dScale(De(this.ctx)),{viewportScale:m}=this,b=Math.ceil(c*this.outputScaleX*m),v=Math.ceil(h*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(b,v);const{canvas:w,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(d,0,0,-p,0,h*p),Dm(this.ctx)}else Dm(this.ctx),this.ctx.rect(e[0],e[1],c,h),this.ctx.clip(),this.endPath()}this.current=new hT(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),T(this,Ao,p_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,a=this.processingType3;if(a&&(a.compiled===void 0&&(a.compiled=gB(t)),a.compiled)){a.compiled(n);return}const o=this._createMaskCanvas(t),c=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(c,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,a=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const h=this.ctx;h.save();const d=De(h);h.transform(e,n,a,o,0,0);const p=this._createMaskCanvas(t);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let m=0,b=c.length;m<b;m+=2){const v=_t.transform(d,[e,n,a,o,c[m],c[m+1]]),[w,A]=_t.applyTransform([0,0],v);h.drawImage(p.canvas,w,A)}h.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(const o of t){const{data:c,width:h,height:d,transform:p}=o,m=this.cachedCanvases.getCanvas("maskCanvas",h,d),b=m.context;b.save();const v=this.getObject(c,o);fT(b,v),b.globalCompositeOperation="source-in",b.fillStyle=a?n.getPattern(b,this,Tr(e),Vn.FILL):n,b.fillRect(0,0,h,d),b.restore(),e.save(),e.transform(...p),e.scale(1,-1),Lm(e,m.canvas,0,0,h,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Ft("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,a){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){Ft("Dependent image isn't ready yet");return}const c=o.width,h=o.height,d=[];for(let p=0,m=a.length;p<m;p+=2)d.push({transform:[e,0,0,n,a[p],a[p+1]],x:0,y:0,w:c,h});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,a=this.ctx;if(this.save(),!Fn){const{filter:h}=a;h!=="none"&&h!==""&&(a.filter="none")}a.scale(1/e,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;dT(d,t),o=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(o,Tr(a));a.imageSmoothingEnabled=pT(De(a),t.interpolate),Lm(a,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;dT(d,t),a=this.applyTransferMapsToCanvas(d)}for(const o of e)n.save(),n.transform(...o.transform),n.scale(1,-1),Lm(n,a,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===gT?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=De(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:o}=this.ctx.getTransform();let c,h;if(n===0&&a===0){const d=Math.abs(e),p=Math.abs(o);if(d===p)if(t===0)c=h=1/d;else{const m=d*t;c=h=m<1?1/m:1}else if(t===0)c=1/d,h=1/p;else{const m=d*t,b=p*t;c=m<1?1/m:1,h=b<1?1/b:1}}else{const d=Math.abs(e*o-n*a),p=Math.hypot(e,n),m=Math.hypot(a,o);if(t===0)c=m/d,h=p/d;else{const b=t*d;c=m>b?m/b:1,h=p>b?p/b:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[a,o]=this.getScaleForStroking();if(e.lineWidth=n||1,a===1&&o===1){e.stroke();return}const c=e.getLineDash();if(t&&e.save(),e.scale(a,o),c.length>0){const h=Math.max(a,o);e.setLineDash(c.map(d=>d/h)),e.lineDashOffset/=h}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Ao=new WeakSet,f_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},p_=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let pu=YA;for(const r in rs)pu.prototype[r]!==void 0&&(pu.prototype[rs[r]]=pu.prototype[r]);var qf,Vf;class aa{static get workerPort(){return f(this,qf)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,qf,t)}static get workerSrc(){return f(this,Vf)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,Vf,t)}}qf=new WeakMap,Vf=new WeakMap,k(aa,qf,null),k(aa,Vf,"");const Nm={DATA:1,ERROR:2},Ge={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function yi(r){switch(r instanceof Error||typeof r=="object"&&r!==null||ye('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new pc(r.message);case"MissingPDFException":return new fc(r.message);case"PasswordException":return new Bw(r.message,r.code);case"UnexpectedResponseException":return new wb(r.message,r.status);case"UnknownErrorException":return new Uw(r.message,r.details);default:return new Uw(r.message,r.toString())}}var Js,y2,b2,Zm;class Hd{constructor(t,e,n){k(this,Js);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=a=>{const o=a.data;if(o.targetName!==this.sourceName)return;if(o.stream){T(this,Js,b2).call(this,o);return}if(o.callback){const h=o.callbackId,d=this.callbackCapabilities[h];if(!d)throw new Error(`Cannot resolve callback ${h}`);if(delete this.callbackCapabilities[h],o.callback===Nm.DATA)d.resolve(o.data);else if(o.callback===Nm.ERROR)d.reject(yi(o.reason));else throw new Error("Unexpected callback case");return}const c=this.actionHandler[o.action];if(!c)throw new Error(`Unknown action from worker: ${o.action}`);if(o.callbackId){const h=this.sourceName,d=o.sourceName;new Promise(function(p){p(c(o.data))}).then(function(p){n.postMessage({sourceName:h,targetName:d,callback:Nm.DATA,callbackId:o.callbackId,data:p})},function(p){n.postMessage({sourceName:h,targetName:d,callback:Nm.ERROR,callbackId:o.callbackId,reason:yi(p)})});return}if(o.streamId){T(this,Js,y2).call(this,o);return}c(o.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,n,a){const o=this.streamId++,c=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:h,action:t,streamId:o,data:e,desiredSize:p.desiredSize},a),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,d.postMessage({sourceName:c,targetName:h,stream:Ge.PULL,streamId:o,desiredSize:p.desiredSize}),m.promise},cancel:p=>{nn(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:h,stream:Ge.CANCEL,streamId:o,reason:yi(p)}),m.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Js=new WeakSet,y2=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this,h=this.actionHandler[t.action],d={enqueue(p,m=1,b){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:a,stream:Ge.ENQUEUE,streamId:e,chunk:p},b)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ge.CLOSE,streamId:e}),delete c.streamSinks[e])},error(p){nn(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ge.ERROR,streamId:e,reason:yi(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,new Promise(function(p){p(h(t.data,d))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ge.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:n,targetName:a,stream:Ge.START_COMPLETE,streamId:e,reason:yi(p)})})},b2=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case Ge.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(yi(t.reason));break;case Ge.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(yi(t.reason));break;case Ge.PULL:if(!h){o.postMessage({sourceName:n,targetName:a,stream:Ge.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,new Promise(function(d){var p;d((p=h.onPull)==null?void 0:p.call(h))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ge.PULL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:n,targetName:a,stream:Ge.PULL_COMPLETE,streamId:e,reason:yi(d)})});break;case Ge.ENQUEUE:if(nn(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Ge.CLOSE:if(nn(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),T(this,Js,Zm).call(this,c,e);break;case Ge.ERROR:nn(c,"error should have stream controller"),c.controller.error(yi(t.reason)),T(this,Js,Zm).call(this,c,e);break;case Ge.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(yi(t.reason)),T(this,Js,Zm).call(this,c,e);break;case Ge.CANCEL:if(!h)break;new Promise(function(d){var p;d((p=h.onCancel)==null?void 0:p.call(h,yi(t.reason)))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ge.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:n,targetName:a,stream:Ge.CANCEL_COMPLETE,streamId:e,reason:yi(d)})}),h.sinkCapability.reject(yi(t.reason)),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Zm=async function(t,e){var n,a,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var wl,Gf;class vB{constructor({parsedData:t,rawData:e}){k(this,wl);k(this,Gf);x(this,wl,t),x(this,Gf,e)}getRaw(){return f(this,Gf)}get(t){return f(this,wl).get(t)??null}getAll(){return OA(f(this,wl))}has(t){return f(this,wl).has(t)}}wl=new WeakMap,Gf=new WeakMap;const Ua=Symbol("INTERNAL");var Xf,Yf,$f,Lu;class wB{constructor(t,{name:e,intent:n,usage:a}){k(this,Xf,!1);k(this,Yf,!1);k(this,$f,!1);k(this,Lu,!0);x(this,Xf,!!(t&Yi.DISPLAY)),x(this,Yf,!!(t&Yi.PRINT)),this.name=e,this.intent=n,this.usage=a}get visible(){if(f(this,$f))return f(this,Lu);if(!f(this,Lu))return!1;const{print:t,view:e}=this.usage;return f(this,Xf)?(e==null?void 0:e.viewState)!=="OFF":f(this,Yf)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Ua&&ye("Internal method `_setVisible` called."),x(this,$f,n),x(this,Lu,e)}}Xf=new WeakMap,Yf=new WeakMap,$f=new WeakMap,Lu=new WeakMap;var Wa,me,Du,Nu,Kf,g_;class _B{constructor(t,e=Yi.DISPLAY){k(this,Kf);k(this,Wa,null);k(this,me,new Map);k(this,Du,null);k(this,Nu,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,Nu,t.order);for(const n of t.groups)f(this,me).set(n.id,new wB(e,n));if(t.baseState==="OFF")for(const n of f(this,me).values())n._setVisible(Ua,!1);for(const n of t.on)f(this,me).get(n)._setVisible(Ua,!0);for(const n of t.off)f(this,me).get(n)._setVisible(Ua,!1);x(this,Du,this.getHash())}}isVisible(t){if(f(this,me).size===0)return!0;if(!t)return vb("Optional content group not defined."),!0;if(t.type==="OCG")return f(this,me).has(t.id)?f(this,me).get(t.id).visible:(Ft(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return T(this,Kf,g_).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!f(this,me).has(e))return Ft(`Optional content group not found: ${e}`),!0;if(f(this,me).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!f(this,me).has(e))return Ft(`Optional content group not found: ${e}`),!0;if(!f(this,me).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!f(this,me).has(e))return Ft(`Optional content group not found: ${e}`),!0;if(!f(this,me).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!f(this,me).has(e))return Ft(`Optional content group not found: ${e}`),!0;if(f(this,me).get(e).visible)return!1}return!0}return Ft(`Unknown optional content policy ${t.policy}.`),!0}return Ft(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const n=f(this,me).get(t);if(!n){Ft(`Optional content group not found: ${t}`);return}n._setVisible(Ua,!!e,!0),x(this,Wa,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const o=f(this,me).get(a);if(o)switch(n){case"ON":o._setVisible(Ua,!0);break;case"OFF":o._setVisible(Ua,!1);break;case"Toggle":o._setVisible(Ua,!o.visible);break}}x(this,Wa,null)}get hasInitialVisibility(){return f(this,Du)===null||this.getHash()===f(this,Du)}getOrder(){return f(this,me).size?f(this,Nu)?f(this,Nu).slice():[...f(this,me).keys()]:null}getGroups(){return f(this,me).size>0?OA(f(this,me)):null}getGroup(t){return f(this,me).get(t)||null}getHash(){if(f(this,Wa)!==null)return f(this,Wa);const t=new f2;for(const[e,n]of f(this,me))t.update(`${e}:${n.visible}`);return x(this,Wa,t.hexdigest())}}Wa=new WeakMap,me=new WeakMap,Du=new WeakMap,Nu=new WeakMap,Kf=new WeakSet,g_=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const o=t[a];let c;if(Array.isArray(o))c=T(this,Kf,g_).call(this,o);else if(f(this,me).has(o))c=f(this,me).get(o).visible;else return Ft(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class AB{constructor(t,{disableRange:e=!1,disableStream:n=!1}){nn(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:c,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),t.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});nn(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||o.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){nn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new SB(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new EB(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class SB{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=IA(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class EB{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function xB(r){let t=!0,e=n("filename\\*","i").exec(r);if(e){e=e[1];let m=h(e);return m=unescape(m),m=d(m),m=p(m),o(m)}if(e=c(r),e){const m=p(e);return o(m)}if(e=n("filename","i").exec(r),e){e=e[1];let m=h(e);return m=p(m),o(m)}function n(m,b){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function a(m,b){if(m){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const v=new TextDecoder(m,{fatal:!0}),w=_b(b);b=v.decode(w),t=!1}catch{}}return b}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),t&&(m=a("iso-8859-1",m))),m}function c(m){const b=[];let v;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=w.exec(m))!==null;){let[,S,R,M]=v;if(S=parseInt(S,10),S in b){if(S===0)break;continue}b[S]=[R,M]}const A=[];for(let S=0;S<b.length&&S in b;++S){let[R,M]=b[S];M=h(M),R&&(M=unescape(M),S===0&&(M=d(M))),A.push(M)}return A.join("")}function h(m){if(m.startsWith('"')){const b=m.slice(1).split('\\"');for(let v=0;v<b.length;++v){const w=b[v].indexOf('"');w!==-1&&(b[v]=b[v].slice(0,w),b.length=v+1),b[v]=b[v].replaceAll(/\\(.)/g,"$1")}m=b.join('"')}return m}function d(m){const b=m.indexOf("'");if(b===-1)return m;const v=m.slice(0,b),A=m.slice(b+1).replace(/^[^']*'/,"");return a(v,A)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,v,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,R){return String.fromCharCode(parseInt(R,16))}),a(v,A);try{A=atob(A)}catch{}return a(v,A)})}return""}function HA({getResponseHeader:r,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(r("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||n||!t||r("Accept-Ranges")!=="bytes"||(r("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function qA(r){const t=r("Content-Disposition");if(t){let e=xB(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(IA(e))return e}return null}function Cb(r,t){return r===404||r===0&&t.startsWith("file:")?new fc('Missing PDF "'+t+'".'):new wb(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r)}function v2(r){return r===200||r===206}function w2(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function _2(r){const t=new Headers;for(const e in r){const n=r[e];n!==void 0&&t.append(e,n)}return t}function A2(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Ft(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class mT{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return nn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new CB(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new TB(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class CB{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=_2(this._stream.httpHeaders);const n=e.url;fetch(n,w2(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!v2(a.status))throw Cb(a.status,n);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=d=>a.headers.get(d),{allowRangeRequests:c,suggestedLength:h}=HA({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=h||this._contentLength,this._filename=qA(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new pc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:A2(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class TB{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController,this._headers=_2(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const o=a.url;fetch(o,w2(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!v2(c.status))throw Cb(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:A2(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const bw=200,vw=206;function kB(r){const t=r.response;return typeof t!="string"?t:_b(t).buffer}class RB{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const a={begin:t,end:e};for(const o in n)a[o]=n[o];return this.request(a)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const c=this.httpHeaders[o];c!==void 0&&e.setRequestHeader(o,c)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=vw):a.expectedStatus=bw,e.responseType="arraybuffer",t.onError&&(e.onerror=function(o){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){var d,p,m;const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){(d=n.onError)==null||d.call(n,a.status);return}const o=a.status||bw;if(!(o===bw&&n.expectedStatus===vw)&&o!==n.expectedStatus){(p=n.onError)==null||p.call(n,a.status);return}const h=kB(a);if(o===vw){const b=a.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(b);n.onDone({begin:parseInt(v[1],10),chunk:h})}else h?n.onDone({begin:0,chunk:h}):(m=n.onError)==null||m.call(n,a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class MB{constructor(t){this._source=t,this._manager=new RB(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return nn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new LB(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new DB(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class LB{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=c=>e.getResponseHeader(c),{allowRangeRequests:a,suggestedLength:o}=HA({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=qA(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Cb(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class DB{constructor(t,e,n){this._manager=t;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Cb(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const S2=/^file:\/\/\/[a-zA-Z]:\//;function NB(r){const t=rr.get("url"),e=t.parse(r);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(r)?t.parse(`file:///${r}`):(e.host||(e.protocol="file:"),e)}class OB{constructor(t){this.source=t,this.url=NB(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return nn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PB(this):new jB(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new FB(this,t,e):new zB(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class E2{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new pc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class x2{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Oy(r,t){return{protocol:r.protocol,auth:r.auth,host:r.hostname,port:r.port,path:r.path,method:"GET",headers:t}}class jB extends E2{constructor(t){super(t);const e=n=>{if(n.statusCode===404){const h=new fc(`Missing PDF "${this._url}".`);this._storedError=h,this._headersCapability.reject(h);return}this._headersCapability.resolve(),this._setReadableStream(n);const a=h=>this._readableStream.headers[h.toLowerCase()],{allowRangeRequests:o,suggestedLength:c}=HA({getResponseHeader:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=qA(a)};if(this._request=null,this._url.protocol==="http:"){const n=rr.get("http");this._request=n.request(Oy(this._url,t.httpHeaders),e)}else{const n=rr.get("https");this._request=n.request(Oy(this._url,t.httpHeaders),e)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class zB extends x2{constructor(t,e,n){super(t),this._httpHeaders={};for(const o in t.httpHeaders){const c=t.httpHeaders[o];c!==void 0&&(this._httpHeaders[o]=c)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const a=o=>{if(o.statusCode===404){const c=new fc(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(o)};if(this._request=null,this._url.protocol==="http:"){const o=rr.get("http");this._request=o.request(Oy(this._url,this._httpHeaders),a)}else{const o=rr.get("https");this._request=o.request(Oy(this._url,this._httpHeaders),a)}this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class PB extends E2{constructor(t){super(t);let e=decodeURIComponent(this._url.path);S2.test(this._url.href)&&(e=e.replace(/^\//,""));const n=rr.get("fs");n.promises.lstat(e).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(e)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=new fc(`Missing PDF "${e}".`)),this._storedError=a,this._headersCapability.reject(a)})}}class FB extends x2{constructor(t,e,n){super(t);let a=decodeURIComponent(this._url.path);S2.test(this._url.href)&&(a=a.replace(/^\//,""));const o=rr.get("fs");this._setReadableStream(o.createReadStream(a,{start:e,end:n-1}))}}const IB=1e5,ei=30,BB=.8;var DT,Qa,ii,Wf,Qf,_l,Ur,Zf,Jf,Al,Ou,ju,Za,zu,tp,Pu,Sl,ep,np,en,El,xl,Ja,Fu,ha,C2,T2,m_,tr,Jm,k2,R2;let jy=(en=class{constructor({textContentSource:t,container:e,viewport:n}){k(this,ha);k(this,Qa,Promise.withResolvers());k(this,ii,null);k(this,Wf,!1);k(this,Qf,!!((DT=globalThis.FontInspector)!=null&&DT.enabled));k(this,_l,null);k(this,Ur,null);k(this,Zf,0);k(this,Jf,0);k(this,Al,null);k(this,Ou,null);k(this,ju,0);k(this,Za,0);k(this,zu,Object.create(null));k(this,tp,[]);k(this,Pu,null);k(this,Sl,[]);k(this,ep,new WeakMap);k(this,np,null);var d;if(t instanceof ReadableStream)x(this,Pu,t);else if(typeof t=="object")x(this,Pu,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,ii,x(this,Ou,e)),x(this,Za,n.scale*(globalThis.devicePixelRatio||1)),x(this,ju,n.rotation),x(this,Ur,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:o,pageX:c,pageY:h}=n.rawDims;x(this,np,[1,0,0,-1,-c,h+o]),x(this,Jf,a),x(this,Zf,o),T(d=en,tr,k2).call(d),sc(e,n),f(this,Qa).promise.catch(()=>{}).then(()=>{f(en,Fu).delete(this),x(this,Ur,null),x(this,zu,null)})}render(){const t=()=>{f(this,Al).read().then(({value:e,done:n})=>{if(n){f(this,Qa).resolve();return}f(this,_l)??x(this,_l,e.lang),Object.assign(f(this,zu),e.styles),T(this,ha,C2).call(this,e.items),t()},f(this,Qa).reject)};return x(this,Al,f(this,Pu).getReader()),f(en,Fu).add(this),t(),f(this,Qa).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*(globalThis.devicePixelRatio||1),a=t.rotation;if(a!==f(this,ju)&&(e==null||e(),x(this,ju,a),sc(f(this,Ou),{rotation:a})),n!==f(this,Za)){e==null||e(),x(this,Za,n);const c={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:T(o=en,tr,Jm).call(o,f(this,_l))};for(const h of f(this,Sl))c.properties=f(this,ep).get(h),c.div=h,T(this,ha,m_).call(this,c)}}cancel(){var e;const t=new pc("TextLayer task cancelled.");(e=f(this,Al))==null||e.cancel(t).catch(()=>{}),x(this,Al,null),f(this,Qa).reject(t)}get textDivs(){return f(this,Sl)}get textContentItemsStr(){return f(this,tp)}static cleanup(){if(!(f(this,Fu).size>0)){f(this,El).clear();for(const{canvas:t}of f(this,xl).values())t.remove();f(this,xl).clear()}}},Qa=new WeakMap,ii=new WeakMap,Wf=new WeakMap,Qf=new WeakMap,_l=new WeakMap,Ur=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,Al=new WeakMap,Ou=new WeakMap,ju=new WeakMap,Za=new WeakMap,zu=new WeakMap,tp=new WeakMap,Pu=new WeakMap,Sl=new WeakMap,ep=new WeakMap,np=new WeakMap,El=new WeakMap,xl=new WeakMap,Ja=new WeakMap,Fu=new WeakMap,ha=new WeakSet,C2=function(t){var a,o;if(f(this,Wf))return;(o=f(this,Ur)).ctx??(o.ctx=T(a=en,tr,Jm).call(a,f(this,_l)));const e=f(this,Sl),n=f(this,tp);for(const c of t){if(e.length>IB){Ft("Ignoring additional textDivs for performance reasons."),x(this,Wf,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const h=f(this,ii);x(this,ii,document.createElement("span")),f(this,ii).classList.add("markedContent"),c.id!==null&&f(this,ii).setAttribute("id",`${c.id}`),h.append(f(this,ii))}else c.type==="endMarkedContent"&&x(this,ii,f(this,ii).parentNode);continue}n.push(c.str),T(this,ha,T2).call(this,c)}},T2=function(t){var S;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};f(this,Sl).push(e);const a=_t.transform(f(this,np),t.transform);let o=Math.atan2(a[1],a[0]);const c=f(this,zu)[t.fontName];c.vertical&&(o+=Math.PI/2);const h=f(this,Qf)&&c.fontSubstitution||c.fontFamily,d=Math.hypot(a[2],a[3]),p=d*T(S=en,tr,R2).call(S,h,f(this,_l));let m,b;o===0?(m=a[4],b=a[5]-p):(m=a[4]+p*Math.sin(o),b=a[5]-p*Math.cos(o));const v="calc(var(--scale-factor)*",w=e.style;f(this,ii)===f(this,Ou)?(w.left=`${(100*m/f(this,Jf)).toFixed(2)}%`,w.top=`${(100*b/f(this,Zf)).toFixed(2)}%`):(w.left=`${v}${m.toFixed(2)}px)`,w.top=`${v}${b.toFixed(2)}px)`),w.fontSize=`${v}${(f(en,Ja)*d).toFixed(2)}px)`,w.fontFamily=h,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,f(this,Qf)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const R=Math.abs(t.transform[0]),M=Math.abs(t.transform[3]);R!==M&&Math.max(R,M)/Math.min(R,M)>1.5&&(A=!0)}if(A&&(n.canvasWidth=c.vertical?t.height:t.width),f(this,ep).set(e,n),f(this,Ur).div=e,f(this,Ur).properties=n,T(this,ha,m_).call(this,f(this,Ur)),n.hasText&&f(this,ii).append(e),n.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),f(this,ii).append(R)}},m_=function(t){const{div:e,properties:n,ctx:a,prevFontSize:o,prevFontFamily:c}=t,{style:h}=e;let d="";if(f(en,Ja)>1&&(d=`scale(${1/f(en,Ja)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:p}=h,{canvasWidth:m,fontSize:b}=n;(o!==b||c!==p)&&(a.font=`${b*f(this,Za)}px ${p}`,t.prevFontSize=b,t.prevFontFamily=p);const{width:v}=a.measureText(e.textContent);v>0&&(d=`scaleX(${m*f(this,Za)/v}) ${d}`)}n.angle!==0&&(d=`rotate(${n.angle}deg) ${d}`),d.length>0&&(h.transform=d)},tr=new WeakSet,Jm=function(t=null){let e=f(this,xl).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),f(this,xl).set(t,e)}return e},k2=function(){if(f(this,Ja)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.textContent="X",document.body.append(t),x(this,Ja,t.getBoundingClientRect().height),t.remove()},R2=function(t,e){const n=f(this,El).get(t);if(n)return n;const a=T(this,tr,Jm).call(this,e),o=a.font;a.canvas.width=a.canvas.height=ei,a.font=`${ei}px ${t}`;const c=a.measureText("");let h=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);if(h){const b=h/(h+d);return f(this,El).set(t,b),a.canvas.width=a.canvas.height=0,a.font=o,b}a.strokeStyle="red",a.clearRect(0,0,ei,ei),a.strokeText("g",0,0);let p=a.getImageData(0,0,ei,ei).data;d=0;for(let b=p.length-1-3;b>=0;b-=4)if(p[b]>0){d=Math.ceil(b/4/ei);break}a.clearRect(0,0,ei,ei),a.strokeText("A",0,ei),p=a.getImageData(0,0,ei,ei).data,h=0;for(let b=0,v=p.length;b<v;b+=4)if(p[b]>0){h=ei-Math.floor(b/4/ei);break}a.canvas.width=a.canvas.height=0,a.font=o;const m=h?h/(h+d):BB;return f(this,El).set(t,m),m},k(en,tr),k(en,El,new Map),k(en,xl,new Map),k(en,Ja,null),k(en,Fu,new Set),en);function UB(){UR("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:r,container:t,viewport:e,...n}=arguments[0],a=Object.keys(n);a.length>0&&Ft("Ignoring `renderTextLayer` parameters: "+a.join(", "));const o=new jy({textContentSource:r,container:t,viewport:e}),{textDivs:c,textContentItemsStr:h}=o;return{promise:o.render(),textDivs:c,textContentItemsStr:h}}function HB(){UR("`updateTextLayer`, please use `TextLayer` instead.")}class ff{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(o){var d;if(!o)return;let c=null;const h=o.name;if(h==="#text")c=o.value;else if(ff.shouldBuildText(h))(d=o==null?void 0:o.attributes)!=null&&d.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const p of o.children)a(p)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const qB=65536,VB=100,GB=5e3,XB=Fn?iB:VI,YB=Fn?sB:IR,$B=Fn?nB:qI,KB=Fn?rB:BR;function WB(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new y_,{docId:e}=t,n=r.url?QB(r.url):null,a=r.data?ZB(r.data):null,o=r.httpHeaders||null,c=r.withCredentials===!0,h=r.password??null,d=r.range instanceof M2?r.range:null,p=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:qB;let m=r.worker instanceof gu?r.worker:null;const b=r.verbosity,v=typeof r.docBaseUrl=="string"&&!FA(r.docBaseUrl)?r.docBaseUrl:null,w=typeof r.cMapUrl=="string"?r.cMapUrl:null,A=r.cMapPacked!==!1,S=r.CMapReaderFactory||YB,R=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,M=r.StandardFontDataFactory||KB,D=r.stopAtErrors!==!0,O=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,I=r.isEvalSupported!==!1,U=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Fn,P=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,H=typeof r.disableFontFace=="boolean"?r.disableFontFace:Fn,K=r.fontExtraProperties===!0,tt=r.enableXfa===!0,nt=r.ownerDocument||globalThis.document,rt=r.disableRange===!0,mt=r.disableStream===!0,At=r.disableAutoFetch===!0,dt=r.pdfBug===!0,st=r.enableHWA===!0,F=d?d.length:r.length??NaN,G=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Fn&&!H,V=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:S===IR&&M===BR&&w&&R&&Id(w,document.baseURI)&&Id(R,document.baseURI),xt=r.canvasFactory||new XB({ownerDocument:nt,enableHWA:st}),Tt=r.filterFactory||new $B({docId:e,ownerDocument:nt}),N=null;DI(b);const q={canvasFactory:xt,filterFactory:Tt};if(V||(q.cMapReaderFactory=new S({baseUrl:w,isCompressed:A}),q.standardFontDataFactory=new M({baseUrl:R})),!m){const ht={verbosity:b,port:aa.workerPort};m=ht.port?gu.fromPort(ht):new gu(ht),t._worker=m}const Q={docId:e,apiVersion:"4.4.168",data:a,password:h,disableAutoFetch:At,rangeChunkSize:p,length:F,docBaseUrl:v,enableXfa:tt,evaluatorOptions:{maxImageSize:O,disableFontFace:H,ignoreErrors:D,isEvalSupported:I,isOffscreenCanvasSupported:U,canvasMaxAreaInBytes:P,fontExtraProperties:K,useSystemFonts:G,cMapUrl:V?w:null,standardFontDataUrl:V?R:null}},it={disableFontFace:H,fontExtraProperties:K,ownerDocument:nt,pdfBug:dt,styleElement:N,loadingParams:{disableAutoFetch:At,enableXfa:tt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ht=m.messageHandler.sendWithPromise("GetDocRequest",Q,a?[a.buffer]:null);let bt;if(d)bt=new AB(d,{disableRange:rt,disableStream:mt});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");bt=(Pt=>Fn?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&Id(Pt.url)?new mT(Pt):new OB(Pt):Id(Pt.url)?new mT(Pt):new MB(Pt))({url:n,length:F,httpHeaders:o,withCredentials:c,rangeChunkSize:p,disableRange:rt,disableStream:mt})}return ht.then(ot=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Pt=new Hd(e,ot,m.port),Ot=new nU(Pt,t,bt,it,q);t._transport=Ot,Pt.send("Ready",null)})}).catch(t._capability.reject),t}function QB(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(Fn&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ZB(r){if(Fn&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return _b(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function yT(r){return typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0}var Wy;const Qy=class Qy{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${mi(Qy,Wy)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Wy=new WeakMap,k(Qy,Wy,0);let y_=Qy,M2=class{constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ye("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class JB{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return te(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var to,Hr,Qi,ru,ty;class tU{constructor(t,e,n,a=!1){k(this,Qi);k(this,to,null);k(this,Hr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new iT:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new L2,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}={}){return new tg({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return te(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:a=Va.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:m=null}){var O,I;(O=this._stats)==null||O.time("Overall");const b=this._transport.getRenderingIntent(n,a,m),{renderingIntent:v,cacheKey:w}=b;x(this,Hr,!1),T(this,Qi,ty).call(this),h||(h=this._transport.getOptionalContentConfig(v));let A=this._intentStates.get(w);A||(A=Object.create(null),this._intentStates.set(w,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const S=!!(v&Yi.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(b));const R=U=>{var P;A.renderTasks.delete(M),(this._maybeCleanupAfterRender||S)&&x(this,Hr,!0),T(this,Qi,ru).call(this,!S),U?(M.capability.reject(U),this._abortOperatorList({intentState:A,reason:U instanceof Error?U:new Error(U)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new v_({callback:R,params:{canvasContext:t,viewport:e,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:p});(A.renderTasks||(A.renderTasks=new Set)).add(M);const D=M.task;return Promise.all([A.displayReadyCapability.promise,h]).then(([U,P])=>{var H;if(this.destroyed){R();return}if((H=this._stats)==null||H.time("Rendering"),!(P.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:U,optionalContentConfig:P}),M.operatorListChanged()}).catch(R),D}getOperatorList({intent:t="display",annotationMode:e=Va.ENABLE,printAnnotationStorage:n=null}={}){var d;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,e,n,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let h;return c.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(h),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ff.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function o(){c.read().then(function({value:d,done:p}){if(p){n(h);return}h.lang??(h.lang=d.lang),Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},a)}const c=e.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),x(this,Hr,!1),T(this,Qi,ty).call(this),Promise.all(t)}cleanup(t=!1){x(this,Hr,!0);const e=T(this,Qi,ru).call(this,!1);return t&&e&&this._stats&&(this._stats=new iT),e}_startRenderPage(t,e){var a,o;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&T(this,Qi,ru).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n}){const{map:a,transfer:o}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a},o).getReader(),d=this._intentStates.get(e);d.streamReader=h;const p=()=>{h.read().then(({value:m,done:b})=>{if(b){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),p())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const b of d.renderTasks)b.operatorListChanged();T(this,Qi,ru).call(this,!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof PA){let a=VB;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new pc(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}to=new WeakMap,Hr=new WeakMap,Qi=new WeakSet,ru=function(t=!1){if(T(this,Qi,ty).call(this),!f(this,Hr)||this.destroyed)return!1;if(t)return x(this,to,setTimeout(()=>{x(this,to,null),T(this,Qi,ru).call(this,!1)},GB)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Hr,!1),!0},ty=function(){f(this,to)&&(clearTimeout(f(this,to)),x(this,to,null))};var Cl,Zy;class eU{constructor(){k(this,Cl,new Set);k(this,Zy,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};f(this,Zy).then(()=>{for(const a of f(this,Cl))a.call(this,n)})}addEventListener(t,e){f(this,Cl).add(e)}removeEventListener(t,e){f(this,Cl).delete(e)}terminate(){f(this,Cl).clear()}}Cl=new WeakMap,Zy=new WeakMap;const Dr={isWorkerDisabled:!1,fakeWorkerId:0};Fn&&(Dr.isWorkerDisabled=!0,aa.workerSrc||(aa.workerSrc="./pdf.worker.mjs")),Dr.isSameOrigin=function(r,t){let e;try{if(e=new URL(r),!e.origin||e.origin==="null")return!1}catch{return!1}const n=new URL(t,e);return e.origin===n.origin},Dr.createCDNWrapper=function(r){const t=`await import("${r}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var Tl,Iu,ey,Bu,ny;const bi=class bi{constructor({name:t=null,port:e=null,verbosity:n=NI()}={}){k(this,Iu);var a;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((a=f(bi,Tl))!=null&&a.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(f(bi,Tl)||x(bi,Tl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return Fn?Promise.all([rr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Hd("main","worker",t),this._messageHandler.on("ready",function(){}),T(this,Iu,ey).call(this)}_initialize(){if(Dr.isWorkerDisabled||f(bi,Bu,ny)){this._setupFakeWorker();return}let{workerSrc:t}=bi;try{Dr.isSameOrigin(window.location.href,t)||(t=Dr.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Hd("main","worker",e),a=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||a()},{signal:o.signal}),n.on("test",h=>{if(o.abort(),this.destroyed||!h){a();return}this._messageHandler=n,this._port=e,this._webWorker=e,T(this,Iu,ey).call(this)}),n.on("ready",h=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};c();return}catch{vb("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Dr.isWorkerDisabled||(Ft("Setting up fake worker."),Dr.isWorkerDisabled=!0),bi._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new eU;this._port=e;const n=`fake${Dr.fakeWorkerId++}`,a=new Hd(n+"_worker",n,e);t.setup(a,e),this._messageHandler=new Hd(n,n+"_worker",e),T(this,Iu,ey).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=f(bi,Tl))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=f(this,Tl))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new bi(t)}static get workerSrc(){if(aa.workerSrc)return aa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return te(this,"_setupFakeWorkerGlobal",(async()=>f(this,Bu,ny)?f(this,Bu,ny):(await import(this.workerSrc)).WorkerMessageHandler)())}};Tl=new WeakMap,Iu=new WeakSet,ey=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Bu=new WeakSet,ny=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},k(bi,Bu),k(bi,Tl);let gu=bi;var qr,Is,Uu,Hu,Bs,kl,qd;class nU{constructor(t,e,n,a,o){k(this,kl);k(this,qr,new Map);k(this,Is,new Map);k(this,Uu,new Map);k(this,Hu,new Map);k(this,Bs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new L2,this.fontLoader=new tB({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return te(this,"annotationStorage",new UA)}getRenderingIntent(t,e=Va.ENABLE,n=null,a=!1){let o=Yi.DISPLAY,c=c_;switch(t){case"any":o=Yi.ANY;break;case"display":break;case"print":o=Yi.PRINT;break;default:Ft(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case Va.DISABLE:o+=Yi.ANNOTATIONS_DISABLE;break;case Va.ENABLE:break;case Va.ENABLE_FORMS:o+=Yi.ANNOTATIONS_FORMS;break;case Va.ENABLE_STORAGE:o+=Yi.ANNOTATIONS_STORAGE,c=(o&Yi.PRINT&&n instanceof g2?n:this.annotationStorage).serializable;break;default:Ft(`getRenderingIntent - invalid annotationMode: ${e}`)}return a&&(o+=Yi.OPLIST),{renderingIntent:o,cacheKey:`${o}_${c.hash}`,annotationStorageSerializable:c}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=f(this,Bs))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of f(this,Is).values())t.push(a._destroy());f(this,Is).clear(),f(this,Uu).clear(),f(this,Hu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a;this.commonObjs.clear(),this.fontLoader.clear(),f(this,qr).clear(),this.filterFactory.destroy(),jy.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new pc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{nn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){a.close();return}nn(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",n=>{const a=Promise.withResolvers(),o=this._fullReader;return o.headersReady.then(()=>{var c;(!o.isStreamingSupported||!o.isRangeSupported)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),o.onProgress=h=>{var d;(d=e.onProgress)==null||d.call(e,{loaded:h.loaded,total:h.total})}),a.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},a.reject),a.promise}),t.on("GetRangeReader",(n,a)=>{nn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:h}){if(h){a.close();return}nn(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new JB(n,this))}),t.on("DocException",function(n){let a;switch(n.name){case"PasswordException":a=new Bw(n.message,n.code);break;case"InvalidPDFException":a=new jR(n.message);break;case"MissingPDFException":a=new fc(n.message);break;case"UnexpectedResponseException":a=new wb(n.message,n.status);break;case"UnknownErrorException":a=new Uw(n.message,n.details);break;default:ye("DocException - expected a valid Error.")}e._capability.reject(a)}),t.on("PasswordRequest",n=>{if(x(this,Bs,Promise.withResolvers()),e.onPassword){const a=o=>{o instanceof Error?f(this,Bs).reject(o):f(this,Bs).resolve({password:o})};try{e.onPassword(a,n.code)}catch(o){f(this,Bs).reject(o)}}else f(this,Bs).reject(new Bw(n.message,n.code));return f(this,Bs).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;f(this,Is).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,o])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":const{disableFontFace:h,fontExtraProperties:d,pdfBug:p}=this._params;if("error"in o){const w=o.error;Ft(`Error during font loading: ${w}`),this.commonObjs.resolve(n,w);break}const m=p&&((c=globalThis.FontInspector)!=null&&c.enabled)?(w,A)=>globalThis.FontInspector.fontAdded(w,A):null,b=new eB(o,{disableFontFace:h,inspectFont:m});this.fontLoader.bind(b).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&b.data&&(b.data=null),this.commonObjs.resolve(n,b)});break;case"CopyLocalImage":const{imageRef:v}=o;nn(v,"The imageRef must be defined.");for(const w of f(this,Is).values())for(const[,A]of w.objs)if((A==null?void 0:A.ref)===v)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,o,c])=>{var d;if(this.destroyed)return;const h=f(this,Is).get(a);if(!h.objs.has(n)){if(h._intentStates.size===0){(d=c==null?void 0:c.bitmap)==null||d.close();return}switch(o){case"Image":h.objs.resolve(n,c),(c==null?void 0:c.dataLen)>kI&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ft("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=f(this,Uu).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&f(this,Hu).set(o.refStr,t);const c=new tU(e,o,this,this._params.pdfBug);return f(this,Is).set(e,c),c});return f(this,Uu).set(e,a),a}getPageIndex(t){return yT(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return T(this,kl,qd).call(this,"GetFieldObjects")}hasJSActions(){return T(this,kl,qd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return T(this,kl,qd).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return T(this,kl,qd).call(this,"GetOptionalContentConfig").then(e=>new _B(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=f(this,qr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var o,c;return{info:a[0],metadata:a[1]?new vB(a[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return f(this,qr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of f(this,Is).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),f(this,qr).clear(),this.filterFactory.destroy(!0),jy.cleanup()}}cachedPageNumber(t){if(!yT(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return f(this,Hu).get(e)??null}}qr=new WeakMap,Is=new WeakMap,Uu=new WeakMap,Hu=new WeakMap,Bs=new WeakMap,kl=new WeakSet,qd=function(t,e=null){const n=f(this,qr).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return f(this,qr).set(t,a),a};const Om=Symbol("INITIAL_DATA");var hs,ip,b_;class L2{constructor(){k(this,ip);k(this,hs,Object.create(null))}get(t,e=null){if(e){const a=T(this,ip,b_).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=f(this,hs)[t];if(!n||n.data===Om)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=f(this,hs)[t];return!!e&&e.data!==Om}resolve(t,e=null){const n=T(this,ip,b_).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in f(this,hs)){const{data:n}=f(this,hs)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}x(this,hs,Object.create(null))}*[Symbol.iterator](){for(const t in f(this,hs)){const{data:e}=f(this,hs)[t];e!==Om&&(yield[t,e])}}}hs=new WeakMap,ip=new WeakSet,b_=function(t){var e;return(e=f(this,hs))[t]||(e[t]={...Promise.withResolvers(),data:Om})};var eo;class iU{constructor(t){k(this,eo,null);x(this,eo,t),this.onContinue=null}get promise(){return f(this,eo).capability.promise}cancel(t=0){f(this,eo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=f(this,eo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=f(this,eo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}eo=new WeakMap;var no,Rl;const el=class el{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:h,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:b=!1,pageColors:v=null}){k(this,no,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=b,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new iU(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var h,d;if(this.cancelled)return;if(this._canvas){if(f(el,Rl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(el,Rl).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:a,transform:o,background:c}=this.params;this.gfx=new pu(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),f(this,no)&&(window.cancelAnimationFrame(f(this,no)),x(this,no,null)),f(el,Rl).delete(this._canvas),this.callback(t||new PA(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,no,window.requestAnimationFrame(()=>{x(this,no,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),f(el,Rl).delete(this._canvas),this.callback())))}};no=new WeakMap,Rl=new WeakMap,k(el,Rl,new WeakSet);let v_=el;const sU="4.4.168",rU="19fbc8998";function bT(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Nd(r){return Math.max(0,Math.min(255,255*r))}class vT{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Nd(t),[t,t,t]}static G_HTML([t]){const e=bT(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Nd)}static RGB_HTML(t){return`#${t.map(bT).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[Nd(1-Math.min(1,t+a)),Nd(1-Math.min(1,n+a)),Nd(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,o=1-e,c=1-n,h=Math.min(a,o,c);return["CMYK",a,o,c,h]}}class D2{static setupStorage(t,e,n,a,o){const c=a.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const h of n.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:o}){const{attributes:c}=e,h=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,p]of Object.entries(c))if(p!=null)switch(d){case"class":p.length&&t.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,p)}h&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){var b,v;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,o=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:n});const h=o!=="richText",d=t.div;if(d.append(c),t.viewport){const w=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=w}h&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(a.children.length===0){if(a.value){const w=document.createTextNode(a.value);c.append(w),h&&ff.shouldBuildText(a.name)&&p.push(w)}return{textDivs:p}}const m=[[a,-1,c]];for(;m.length>0;){const[w,A,S]=m.at(-1);if(A+1===w.children.length){m.pop();continue}const R=w.children[++m.at(-1)[1]];if(R===null)continue;const{name:M}=R;if(M==="#text"){const O=document.createTextNode(R.value);p.push(O),S.append(O);continue}const D=(b=R==null?void 0:R.attributes)!=null&&b.xmlns?document.createElementNS(R.attributes.xmlns,M):document.createElement(M);if(S.append(D),R.attributes&&this.setAttributes({html:D,element:R,storage:e,intent:o,linkService:n}),((v=R.children)==null?void 0:v.length)>0)m.push([R,-1,D]);else if(R.value){const O=document.createTextNode(R.value);h&&ff.shouldBuildText(M)&&p.push(O),D.append(O)}}for(const w of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ig=1e3,aU=9,ac=new WeakSet;function oa(r){return{width:r[2]-r[0],height:r[3]-r[1]}}class oU{static create(t){switch(t.data.annotationType){case We.LINK:return new N2(t);case We.TEXT:return new lU(t);case We.WIDGET:switch(t.data.fieldType){case"Tx":return new cU(t);case"Btn":return t.data.radioButton?new z2(t):t.data.checkBox?new hU(t):new dU(t);case"Ch":return new fU(t);case"Sig":return new uU(t)}return new gc(t);case We.POPUP:return new __(t);case We.FREETEXT:return new U2(t);case We.LINE:return new gU(t);case We.SQUARE:return new mU(t);case We.CIRCLE:return new yU(t);case We.POLYLINE:return new H2(t);case We.CARET:return new vU(t);case We.INK:return new q2(t);case We.POLYGON:return new bU(t);case We.HIGHLIGHT:return new wU(t);case We.UNDERLINE:return new _U(t);case We.SQUIGGLY:return new AU(t);case We.STRIKEOUT:return new SU(t);case We.STAMP:return new V2(t);case We.FILEATTACHMENT:return new EU(t);default:return new Be(t)}}}var Ml,qu,Vu,sp,w_;const $A=class $A{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){k(this,sp);k(this,Ml,null);k(this,qu,!1);k(this,Vu,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get hasPopupData(){return $A._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;f(this,Ml)||x(this,Ml,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&T(this,sp,w_).call(this,e),(n=f(this,Vu))==null||n.popup.updateEdited(t)}resetEdited(){var t;f(this,Ml)&&(T(this,sp,w_).call(this,f(this,Ml).rect),(t=f(this,Vu))==null||t.popup.resetEdited(),x(this,Ml,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof gc||(o.tabIndex=ig);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,e.popupRef&&o.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof __){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:h,height:d}=oa(e.rect);if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,R=e.borderStyle.verticalCornerRadius;if(S>0||R>0){const D=`calc(${S}px * var(--scale-factor)) / calc(${R}px * var(--scale-factor))`;c.borderRadius=D}else if(this instanceof z2){const D=`calc(${h}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;c.borderRadius=D}switch(e.borderStyle.style){case Ld.SOLID:c.borderStyle="solid";break;case Ld.DASHED:c.borderStyle="dashed";break;case Ld.BEVELED:Ft("Unimplemented border style: beveled");break;case Ld.INSET:Ft("Unimplemented border style: inset");break;case Ld.UNDERLINE:c.borderBottomStyle="solid";break}const M=e.borderColor||null;M?(x(this,qu,!0),c.borderColor=_t.makeHexColor(M[0]|0,M[1]|0,M[2]|0)):c.borderWidth=0}const p=_t.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:b,pageX:v,pageY:w}=a.rawDims;c.left=`${100*(p[0]-v)/m}%`,c.top=`${100*(p[1]-w)/b}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(c.width=`${100*h/m}%`,c.height=`${100*d/b}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims,{width:o,height:c}=oa(this.data.rect);let h,d;t%180===0?(h=100*o/n,d=100*c/a):(h=100*c/n,d=100*o/a),e.style.width=`${h}%`,e.style.height=`${d}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const o=a.detail[e],c=o[0],h=o.slice(1);a.target.style[n]=vT[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:vT[`${c}_rgb`](h)})};return te(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const o=t[a]||n[a];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,o]of Object.entries(e)){const c=n[a];if(c){const h={detail:{[a]:o},target:t};c(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,R,M,D]=t.subarray(2,6);if(a===S&&o===R&&e===M&&n===D)return}const{style:c}=this.container;let h;if(f(this,qu)){const{borderColor:S,borderWidth:R}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${R}">`],this.container.classList.add("hasBorder")}const d=a-e,p=o-n,{svgFactory:m}=this,b=m.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0);const v=m.createElement("defs");b.append(v);const w=m.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),v.append(w);for(let S=2,R=t.length;S<R;S+=8){const M=t[S],D=t[S+1],O=t[S+2],I=t[S+3],U=m.createElement("rect"),P=(O-e)/d,H=(o-D)/p,K=(M-O)/d,tt=(D-I)/p;U.setAttribute("x",P),U.setAttribute("y",H),U.setAttribute("width",K),U.setAttribute("height",tt),w.append(U),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${H}" width="${K}" height="${tt}"/>`)}f(this,qu)&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(b),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const n=x(this,Vu,new __({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){ye("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:c,exportValues:h}of a){if(o===-1||c===e)continue;const d=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!ac.has(p)){Ft(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:d,domElement:p})}return n}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==e&&ac.has(a)&&n.push({id:c,exportValue:o,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Ml=new WeakMap,qu=new WeakMap,Vu=new WeakMap,sp=new WeakSet,w_=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:h,pageY:d}}}}=this;n==null||n.splice(0,4,...t);const{width:p,height:m}=oa(t);e.left=`${100*(t[0]-h)/o}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*p/o}%`,e.height=`${100*m/c}%`):this.setRotation(a)};let Be=$A;var Mi,Qo,O2,j2;class N2 extends Be{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});k(this,Mi);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(a,e.action),o=!0):e.attachment?(T(this,Mi,O2).call(this,a,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(T(this,Mi,j2).call(this,a,e.setOCGState),o=!0):e.dest?(this._bindLink(a,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),o=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(a,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(a),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&T(this,Mi,Qo).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),T(this,Mi,Qo).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const c=a.get(o);c&&(e[c]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),T(this,Mi,Qo).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),T(this,Mi,Qo).call(this),!this._fieldObjects){Ft('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var b;a==null||a();const{fields:o,refs:c,include:h}=n,d=[];if(o.length!==0||c.length!==0){const v=new Set(c);for(const w of o){const A=this._fieldObjects[w]||[];for(const{id:S}of A)v.add(S)}for(const w of Object.values(this._fieldObjects))for(const A of w)v.has(A.id)===h&&d.push(A)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const p=this.annotationStorage,m=[];for(const v of d){const{id:w}=v;switch(m.push(w),v.type){case"text":{const S=v.defaultValue||"";p.setValue(w,{value:S});break}case"checkbox":case"radiobutton":{const S=v.defaultValue===v.exportValues;p.setValue(w,{value:S});break}case"combobox":case"listbox":{const S=v.defaultValue||"";p.setValue(w,{value:S});break}default:continue}const A=document.querySelector(`[data-element-id="${w}"]`);if(A){if(!ac.has(A)){Ft(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Mi=new WeakSet,Qo=function(){this.container.setAttribute("data-internal-link","")},O2=function(e,n,a=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,a),!1},T(this,Mi,Qo).call(this)},j2=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),T(this,Mi,Qo).call(this)};class lU extends Be{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class gc extends Be{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ri.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,o){n.includes("mouse")?t.addEventListener(n,c=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{var h;if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}}))})}_setEventListeners(t,e,n,a){var o,c,h;for(const[d,p]of n)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,p,a),p==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":_t.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||aU,o=t.style;let c;const h=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(p/(pw*a))||1,b=p/m;c=Math.min(a,d(b/pw))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(a,d(p/pw))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=_t.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class cU extends gc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),o.setValue(c.id,{[a]:n})}render(){var a,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let h=c.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&h.length>d&&(h=h.slice(0,d));let p=c.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:h,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",p??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ac.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=ig,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",v=>{const w=this.data.defaultFieldValue??"";n.value=m.userValue=w,m.formattedValue=null});let b=v=>{const{formattedValue:w}=m;w!=null&&(v.target.value=w),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{var S;if(m.focused)return;const{target:A}=w;m.userValue&&(A.value=m.userValue),m.lastCommittedValue=A.value,m.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const A={value(S){m.userValue=S.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),S.target.value=m.userValue},formattedValue(S){const{formattedValue:R}=S.detail;m.formattedValue=R,R!=null&&S.target!==document.activeElement&&(S.target.value=R),t.setValue(e,{formattedValue:R})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var O;const{charLimit:R}=S.detail,{target:M}=S;if(R===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",R);let D=m.userValue;!D||D.length<=R||(D=D.slice(0,R),M.value=m.userValue=D,t.setValue(e,{value:D}),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(A,w)}),n.addEventListener("keydown",w=>{var R;m.commitKey=1;let A=-1;if(w.key==="Escape"?A=0:w.key==="Enter"&&!this.data.multiLine?A=2:w.key==="Tab"&&(m.commitKey=3),A===-1)return;const{value:S}=w.target;m.lastCommittedValue!==S&&(m.lastCommittedValue=S,m.userValue=S,(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:A,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const v=b;b=null,n.addEventListener("blur",w=>{var S,R;if(!m.focused||!w.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(m.focused=!1);const{value:A}=w.target;m.userValue=A,m.lastCommittedValue!==A&&((R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:m.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),v(w)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",w=>{var U;m.lastCommittedValue=null;const{data:A,target:S}=w,{value:R,selectionStart:M,selectionEnd:D}=S;let O=M,I=D;switch(w.inputType){case"deleteWordBackward":{const P=R.substring(0,M).match(/\w*[^\w]*$/);P&&(O-=P[0].length);break}case"deleteWordForward":{const P=R.substring(M).match(/^[^\w]*\w*/);P&&(I+=P[0].length);break}case"deleteContentBackward":M===D&&(O-=1);break;case"deleteContentForward":M===D&&(I+=1);break}w.preventDefault(),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,change:A||"",willCommit:!1,selStart:O,selEnd:I}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(b&&n.addEventListener("blur",b),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class uU extends gc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class hU extends gc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ac.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=ig,o.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const p of this._getElementsByName(h,n)){const m=d&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const h=e.defaultFieldValue||"Off";c.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class z2 extends gc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(ac.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=ig,o.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const p of this._getElementsByName(h,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const h=e.defaultFieldValue;c.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:p=>{const m=c===p.detail.value;for(const b of this._getElementsByName(p.target.name)){const v=m&&b.id===n;b.domElement&&(b.domElement.checked=v),t.setValue(b.id,{value:v})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class dU extends N2{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class fU extends gc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");ac.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=ig;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",m=>{const b=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===b});for(const m of this.data.options){const b=document.createElement("option");b.textContent=m.displayValue,b.value=m.exportValue,n.value.includes(m.exportValue)&&(b.setAttribute("selected",!0),o=!1),a.append(b)}let c=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),a.prepend(m),c=()=>{m.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const h=m=>{const b=m?"value":"textContent",{options:v,multiple:w}=a;return w?Array.prototype.filter.call(v,A=>A.selected).map(A=>A[b]):v.selectedIndex===-1?null:v[v.selectedIndex][b]};let d=h(!1);const p=m=>{const b=m.target.options;return Array.prototype.map.call(b,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",m=>{const b={value(v){c==null||c();const w=v.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const S of a.options)S.selected=A.has(S.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(v){a.multiple=!0},remove(v){const w=a.options,A=v.detail.remove;w[A].selected=!1,a.remove(A),w.length>0&&Array.prototype.findIndex.call(w,R=>R.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:h(!0),items:p(v)}),d=h(!1)},clear(v){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(v){const{index:w,displayValue:A,exportValue:S}=v.detail.insert,R=a.children[w],M=document.createElement("option");M.textContent=A,M.value=S,R?R.before(M):a.append(M),t.setValue(e,{value:h(!0),items:p(v)}),d=h(!1)},items(v){const{items:w}=v.detail;for(;a.length!==0;)a.remove(0);for(const A of w){const{displayValue:S,exportValue:R}=A,M=document.createElement("option");M.textContent=S,M.value=R,a.append(M)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:p(v)}),d=h(!1)},indices(v){const w=new Set(v.detail.indices);for(const A of v.target.options)A.selected=w.has(A.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(b,m)}),a.addEventListener("input",m=>{var w;const b=h(!0),v=h(!1);t.setValue(e,{value:b}),m.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):a.addEventListener("input",function(m){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class __ extends Be{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Be._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new pU({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${PR}${n}`).join(",")),this.container}}var Gu,Jy,tb,Xu,Ll,ze,Vr,Dl,rp,ap,Yu,Gr,ds,Xr,op,Yr,lp,Nl,Ol,be,iy,A_,P2,F2,I2,B2,sy,ry,S_;class pU{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:o,contentsObj:c,richText:h,parent:d,rect:p,parentRect:m,open:b}){k(this,be);k(this,Gu,T(this,be,I2).bind(this));k(this,Jy,T(this,be,S_).bind(this));k(this,tb,T(this,be,ry).bind(this));k(this,Xu,T(this,be,sy).bind(this));k(this,Ll,null);k(this,ze,null);k(this,Vr,null);k(this,Dl,null);k(this,rp,null);k(this,ap,null);k(this,Yu,null);k(this,Gr,!1);k(this,ds,null);k(this,Xr,null);k(this,op,null);k(this,Yr,null);k(this,lp,null);k(this,Nl,null);k(this,Ol,!1);var v;x(this,ze,t),x(this,lp,a),x(this,Vr,c),x(this,Yr,h),x(this,ap,d),x(this,Ll,e),x(this,op,p),x(this,Yu,m),x(this,rp,n),x(this,Dl,HR.toDateObject(o)),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup());for(const w of this.trigger)w.addEventListener("click",f(this,Xu)),w.addEventListener("mouseenter",f(this,tb)),w.addEventListener("mouseleave",f(this,Jy)),w.classList.add("popupTriggerArea");for(const w of n)(v=w.container)==null||v.addEventListener("keydown",f(this,Gu));f(this,ze).hidden=!0,b&&T(this,be,sy).call(this)}render(){if(f(this,ds))return;const t=x(this,ds,document.createElement("div"));if(t.className="popup",f(this,Ll)){const o=t.style.outlineColor=_t.makeHexColor(...f(this,Ll));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=_t.makeHexColor(...f(this,Ll).map(h=>Math.floor(.7*(255-h)+h)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=f(this,lp),t.append(e),f(this,Dl)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),o.setAttribute("data-l10n-args",JSON.stringify({date:f(this,Dl).toLocaleDateString(),time:f(this,Dl).toLocaleTimeString()})),e.append(o)}const a=f(this,be,iy);if(a)D2.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(f(this,Vr));t.append(o)}f(this,ze).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let o=0,c=a.length;o<c;++o){const h=a[o];n.append(document.createTextNode(h)),o<c-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;f(this,Nl)||x(this,Nl,{contentsObj:f(this,Vr),richText:f(this,Yr)}),t&&x(this,Xr,null),e&&(x(this,Yr,T(this,be,F2).call(this,e)),x(this,Vr,null)),(n=f(this,ds))==null||n.remove(),x(this,ds,null)}resetEdited(){var t;f(this,Nl)&&({contentsObj:mi(this,Vr)._,richText:mi(this,Yr)._}=f(this,Nl),x(this,Nl,null),(t=f(this,ds))==null||t.remove(),x(this,ds,null),x(this,Xr,null))}forceHide(){x(this,Ol,this.isVisible),f(this,Ol)&&(f(this,ze).hidden=!0)}maybeShow(){f(this,Ol)&&(f(this,ds)||T(this,be,ry).call(this),x(this,Ol,!1),f(this,ze).hidden=!1)}get isVisible(){return f(this,ze).hidden===!1}}Gu=new WeakMap,Jy=new WeakMap,tb=new WeakMap,Xu=new WeakMap,Ll=new WeakMap,ze=new WeakMap,Vr=new WeakMap,Dl=new WeakMap,rp=new WeakMap,ap=new WeakMap,Yu=new WeakMap,Gr=new WeakMap,ds=new WeakMap,Xr=new WeakMap,op=new WeakMap,Yr=new WeakMap,lp=new WeakMap,Nl=new WeakMap,Ol=new WeakMap,be=new WeakSet,iy=function(){const t=f(this,Yr),e=f(this,Vr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&f(this,Yr).html||null},A_=function(){var t,e,n;return((n=(e=(t=f(this,be,iy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},P2=function(){var t,e,n;return((n=(e=(t=f(this,be,iy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},F2=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:f(this,be,P2),fontSize:f(this,be,A_)?`calc(${f(this,be,A_)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return n},I2=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&f(this,Gr))&&T(this,be,sy).call(this)},B2=function(){if(f(this,Xr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:o}}}=f(this,ap);let c=!!f(this,Yu),h=c?f(this,Yu):f(this,op);for(const A of f(this,rp))if(!h||_t.intersect(A.data.rect,h)!==null){h=A.data.rect,c=!0;break}const d=_t.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),m=c?h[2]-h[0]+5:0,b=d[0]+m,v=d[1];x(this,Xr,[100*(b-a)/e,100*(v-o)/n]);const{style:w}=f(this,ze);w.left=`${f(this,Xr)[0]}%`,w.top=`${f(this,Xr)[1]}%`},sy=function(){x(this,Gr,!f(this,Gr)),f(this,Gr)?(T(this,be,ry).call(this),f(this,ze).addEventListener("click",f(this,Xu)),f(this,ze).addEventListener("keydown",f(this,Gu))):(T(this,be,S_).call(this),f(this,ze).removeEventListener("click",f(this,Xu)),f(this,ze).removeEventListener("keydown",f(this,Gu)))},ry=function(){f(this,ds)||this.render(),this.isVisible?f(this,Gr)&&f(this,ze).classList.add("focused"):(T(this,be,B2).call(this),f(this,ze).hidden=!1,f(this,ze).style.zIndex=parseInt(f(this,ze).style.zIndex)+1e3)},S_=function(){f(this,ze).classList.remove("focused"),!(f(this,Gr)||!this.isVisible)&&(f(this,ze).hidden=!0,f(this,ze).style.zIndex=parseInt(f(this,ze).style.zIndex)-1e3)};class U2 extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Zt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var cp;class gU extends Be{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,cp,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:a}=oa(e.rect),o=this.svgFactory.create(n,a,!0),c=x(this,cp,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,cp)}addHighlightArea(){this.container.classList.add("highlightArea")}}cp=new WeakMap;var up;class mU extends Be{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,up,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:a}=oa(e.rect),o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,h=x(this,up,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",c/2),h.setAttribute("y",c/2),h.setAttribute("width",n-c),h.setAttribute("height",a-c),h.setAttribute("stroke-width",c||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,up)}addHighlightArea(){this.container.classList.add("highlightArea")}}up=new WeakMap;var hp;class yU extends Be{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,hp,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:a}=oa(e.rect),o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,h=x(this,hp,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",a/2),h.setAttribute("rx",n/2-c/2),h.setAttribute("ry",a/2-c/2),h.setAttribute("stroke-width",c||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,hp)}addHighlightArea(){this.container.classList.add("highlightArea")}}hp=new WeakMap;var dp;class H2 extends Be{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,dp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:o}}=this;if(!n)return this.container;const{width:c,height:h}=oa(e),d=this.svgFactory.create(c,h,!0);let p=[];for(let b=0,v=n.length;b<v;b+=2){const w=n[b]-e[0],A=e[3]-n[b+1];p.push(`${w},${A}`)}p=p.join(" ");const m=x(this,dp,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),d.append(m),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,dp)}addHighlightArea(){this.container.classList.add("highlightArea")}}dp=new WeakMap;class bU extends H2{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class vU extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var fp;class q2 extends Be{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});k(this,fp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Zt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:a,popupRef:o}}=this,{width:c,height:h}=oa(e),d=this.svgFactory.create(c,h,!0);for(const p of n){let m=[];for(let v=0,w=p.length;v<w;v+=2){const A=p[v]-e[0],S=e[3]-p[v+1];m.push(`${A},${S}`)}m=m.join(" ");const b=this.svgFactory.createElement(this.svgElementName);f(this,fp).push(b),b.setAttribute("points",m),b.setAttribute("stroke-width",a.width||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),!o&&this.hasPopupData&&this._createPopup(),d.append(b)}return this.container.append(d),this.container}getElementsToTriggerPopup(){return f(this,fp)}addHighlightArea(){this.container.classList.add("highlightArea")}}fp=new WeakMap;class wU extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class _U extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class AU extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class SU extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class V2 extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var pp,gp,E_;class EU extends Be{constructor(e){var a;super(e,{isRenderable:!0});k(this,gp);k(this,pp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",T(this,gp,E_).bind(this)),x(this,pp,a);const{isMac:o}=ri.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&T(this,gp,E_).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return f(this,pp)}addHighlightArea(){this.container.classList.add("highlightArea")}}pp=new WeakMap,gp=new WeakSet,E_=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var mp,jl,$u,lc,G2,x_,NT;let xU=(NT=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:o,viewport:c}){k(this,lc);k(this,mp,null);k(this,jl,null);k(this,$u,new Map);this.div=t,x(this,mp,e),x(this,jl,n),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a}async render(t){var c;const{annotations:e}=t,n=this.div;sc(n,this.viewport);const a=new Map,o={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new zA,annotationStorage:t.annotationStorage||new UA,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const d=h.annotationType===We.POPUP;if(d){const b=a.get(h.id);if(!b)continue;o.elements=b}else{const{width:b,height:v}=oa(h.rect);if(b<=0||v<=0)continue}o.data=h;const p=oU.create(o);if(!p.isRenderable)continue;if(!d&&h.popupRef){const b=a.get(h.popupRef);b?b.push(p):a.set(h.popupRef,[p])}const m=p.render();h.hidden&&(m.style.visibility="hidden"),T(this,lc,G2).call(this,m,h.id),p.annotationEditorType>0&&(f(this,$u).set(p.data.id,p),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(p))}T(this,lc,x_).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,sc(e,{rotation:t.rotation}),T(this,lc,x_).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(f(this,$u).values())}getEditableAnnotation(t){return f(this,$u).get(t)}},mp=new WeakMap,jl=new WeakMap,$u=new WeakMap,lc=new WeakSet,G2=function(t,e){var a;const n=t.firstChild||t;n.id=`${PR}${e}`,this.div.append(t),(a=f(this,mp))==null||a.moveElementInDOM(this.div,t,n,!1)},x_=function(){if(!f(this,jl))return;const t=this.div;for(const[e,n]of f(this,jl)){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;n.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):a.append(n)}f(this,jl).clear()},NT);const jm=/\r\n?|\n/g;var yp,bp,vp,wp,_p,fs,Ei,Ap,xi,Ku,Ye,X2,Y2,$2,ay,ca,oy,ly,K2,T_,W2;const Se=class Se extends he{constructor(e){super({...e,name:"freeTextEditor"});k(this,Ye);k(this,yp,this.editorDivBlur.bind(this));k(this,bp,this.editorDivFocus.bind(this));k(this,vp,this.editorDivInput.bind(this));k(this,wp,this.editorDivKeydown.bind(this));k(this,_p,this.editorDivPaste.bind(this));k(this,fs);k(this,Ei,"");k(this,Ap,`${this.id}-editor`);k(this,xi);k(this,Ku,null);x(this,fs,e.color||Se._defaultColor||he._defaultLineColor),x(this,xi,e.fontSize||Se._defaultFontSize)}static get _keyboardManager(){const e=Se.prototype,n=c=>c.isEmpty(),a=rc.TRANSLATE_SMALL,o=rc.TRANSLATE_BIG;return te(this,"_keyboardManager",new eg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){he.initialize(e,n,{strings:["pdfjs-free-text-default-content"]});const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Rt.FREETEXT_SIZE:Se._defaultFontSize=n;break;case Rt.FREETEXT_COLOR:Se._defaultColor=n;break}}updateParams(e,n){switch(e){case Rt.FREETEXT_SIZE:T(this,Ye,X2).call(this,n);break;case Rt.FREETEXT_COLOR:T(this,Ye,Y2).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Rt.FREETEXT_SIZE,Se._defaultFontSize],[Rt.FREETEXT_COLOR,Se._defaultColor||he._defaultLineColor]]}get propertiesToUpdate(){return[[Rt.FREETEXT_SIZE,f(this,xi)],[Rt.FREETEXT_COLOR,f(this,fs)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Se._internalPadding*e,-(Se._internalPadding+f(this,xi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Zt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",f(this,wp),{signal:e}),this.editorDiv.addEventListener("focus",f(this,bp),{signal:e}),this.editorDiv.addEventListener("blur",f(this,yp),{signal:e}),this.editorDiv.addEventListener("input",f(this,vp),{signal:e}),this.editorDiv.addEventListener("paste",f(this,_p),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,Ap)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",f(this,wp)),this.editorDiv.removeEventListener("focus",f(this,bp)),this.editorDiv.removeEventListener("blur",f(this,yp)),this.editorDiv.removeEventListener("input",f(this,vp)),this.editorDiv.removeEventListener("paste",f(this,_p)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=f(this,Ei),n=x(this,Ei,T(this,Ye,$2).call(this).trimEnd());if(e===n)return;const a=o=>{if(x(this,Ei,o),!o){this.remove();return}T(this,Ye,ly).call(this),this._uiManager.rebuild(this),T(this,Ye,ay).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),T(this,Ye,ay).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Se._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,Ap)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),he._l10nPromise.get("pdfjs-free-text-default-content").then(o=>{var c;return(c=this.editorDiv)==null?void 0:c.setAttribute("default-content",o)}),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${f(this,xi)}px * var(--scale-factor))`,a.color=f(this,fs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Dy(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:h}=f(this,Ku);let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[m,b]=this.pageDimensions,[v,w]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=e+(h[0]-v)/m,S=n+this.height-(h[1]-w)/b;break;case 90:A=e+(h[0]-v)/m,S=n-(h[1]-w)/b,[d,p]=[p,-d];break;case 180:A=e-this.width+(h[0]-v)/m,S=n-(h[1]-w)/b,[d,p]=[-d,-p];break;case 270:A=e+(h[0]-v-this.height*b)/m,S=n+(h[1]-w-this.width*m)/b,[d,p]=[-p,d];break}this.setAt(A*o,S*c,d,p)}else this.setAt(e*o,n*c,this.width*o,this.height*c);T(this,Ye,ly).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var A,S,R;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const o=T(A=Se,ca,T_).call(A,n.getData("text")||"").replaceAll(jm,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const h=c.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:d,startOffset:p}=h,m=[],b=[];if(d.nodeType===Node.TEXT_NODE){const M=d.parentElement;if(b.push(d.nodeValue.slice(p).replaceAll(jm,"")),M!==this.editorDiv){let D=m;for(const O of this.editorDiv.childNodes){if(O===M){D=b;continue}D.push(T(S=Se,ca,oy).call(S,O))}}m.push(d.nodeValue.slice(0,p).replaceAll(jm,""))}else if(d===this.editorDiv){let M=m,D=0;for(const O of this.editorDiv.childNodes)D++===p&&(M=b),M.push(T(R=Se,ca,oy).call(R,O))}x(this,Ei,`${m.join(`
`)}${o}${b.join(`
`)}`),T(this,Ye,ly).call(this);const v=new Range;let w=m.reduce((M,D)=>M+D.length,0);for(const{firstChild:M}of this.editorDiv.childNodes)if(M.nodeType===Node.TEXT_NODE){const D=M.nodeValue.length;if(w<=D){v.setStart(M,w),v.setEnd(M,w);break}w-=D}c.removeAllRanges(),c.addRange(v)}get contentDiv(){return this.editorDiv}static deserialize(e,n,a){var h;let o=null;if(e instanceof U2){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:m,rotation:b,id:v},textContent:w,textPosition:A,parent:{page:{pageNumber:S}}}=e;if(!w||w.length===0)return null;o=e={annotationType:Zt.FREETEXT,color:Array.from(p),fontSize:d,value:w.join(`
`),position:A,pageIndex:S-1,rect:m.slice(0),rotation:b,id:v,deleted:!1}}const c=super.deserialize(e,n,a);return x(c,xi,e.fontSize),x(c,fs,_t.makeHexColor(...e.color)),x(c,Ei,T(h=Se,ca,T_).call(h,e.value)),c.annotationElementId=e.id||null,x(c,Ku,o),c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=Se._internalPadding*this.parentScale,a=this.getRect(n,n),o=he._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:f(this,fs)),c={annotationType:Zt.FREETEXT,color:o,fontSize:f(this,xi),value:T(this,Ye,K2).call(this),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!T(this,Ye,W2).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:a}=n;a.fontSize=`calc(${f(this,xi)}px * var(--scale-factor))`,a.color=f(this,fs),n.replaceChildren();for(const c of f(this,Ei).split(`
`)){const h=document.createElement("div");h.append(c?document.createTextNode(c):document.createElement("br")),n.append(h)}const o=Se._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:f(this,Ei)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};yp=new WeakMap,bp=new WeakMap,vp=new WeakMap,wp=new WeakMap,_p=new WeakMap,fs=new WeakMap,Ei=new WeakMap,Ap=new WeakMap,xi=new WeakMap,Ku=new WeakMap,Ye=new WeakSet,X2=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-f(this,xi))*this.parentScale),x(this,xi,o),T(this,Ye,ay).call(this)},a=f(this,xi);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Y2=function(e){const n=o=>{x(this,fs,this.editorDiv.style.color=o)},a=f(this,fs);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$2=function(){var n;const e=[];this.editorDiv.normalize();for(const a of this.editorDiv.childNodes)e.push(T(n=Se,ca,oy).call(n,a));return e.join(`
`)},ay=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,h=c.style.display,d=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),a=c.getBoundingClientRect(),c.remove(),c.style.display=h,c.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},ca=new WeakSet,oy=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(jm,"")},ly=function(){if(this.editorDiv.replaceChildren(),!!f(this,Ei))for(const e of f(this,Ei).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},K2=function(){return f(this,Ei).replaceAll(""," ")},T_=function(e){return e.replaceAll(" ","")},W2=function(e){const{value:n,fontSize:a,color:o,pageIndex:c}=f(this,Ku);return this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((h,d)=>h!==o[d])||e.pageIndex!==c},k(Se,ca),Mt(Se,"_freeTextDefaultContent",""),Mt(Se,"_internalPadding",0),Mt(Se,"_defaultColor",null),Mt(Se,"_defaultFontSize",10),Mt(Se,"_type","freetext"),Mt(Se,"_editorType",Zt.FREETEXT);let C_=Se;var Sp,io,ps,Xn,Q2,cy,Z2,J2,R_;class k_{constructor(t,e=0,n=0,a=!0){k(this,Xn);k(this,Sp);k(this,io,[]);k(this,ps,[]);let o=1/0,c=-1/0,h=1/0,d=-1/0;const p=10**-4;for(const{x:R,y:M,width:D,height:O}of t){const I=Math.floor((R-e)/p)*p,U=Math.ceil((R+D+e)/p)*p,P=Math.floor((M-e)/p)*p,H=Math.ceil((M+O+e)/p)*p,K=[I,P,H,!0],tt=[U,P,H,!1];f(this,io).push(K,tt),o=Math.min(o,I),c=Math.max(c,U),h=Math.min(h,P),d=Math.max(d,H)}const m=c-o+2*n,b=d-h+2*n,v=o-n,w=h-n,A=f(this,io).at(a?-1:-2),S=[A[0],A[2]];for(const R of f(this,io)){const[M,D,O]=R;R[0]=(M-v)/m,R[1]=(D-w)/b,R[2]=(O-w)/b}x(this,Sp,{x:v,y:w,width:m,height:b,lastPoint:S})}getOutlines(){f(this,io).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of f(this,io))e[3]?(t.push(...T(this,Xn,R_).call(this,e)),T(this,Xn,Z2).call(this,e)):(T(this,Xn,J2).call(this,e),t.push(...T(this,Xn,R_).call(this,e)));return T(this,Xn,Q2).call(this,t)}}Sp=new WeakMap,io=new WeakMap,ps=new WeakMap,Xn=new WeakSet,Q2=function(t){const e=[],n=new Set;for(const c of t){const[h,d,p]=c;e.push([h,d,c],[h,p,c])}e.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=e.length;c<h;c+=2){const d=e[c][2],p=e[c+1][2];d.push(p),p.push(d),n.add(d),n.add(p)}const a=[];let o;for(;n.size>0;){const c=n.values().next().value;let[h,d,p,m,b]=c;n.delete(c);let v=h,w=d;for(o=[h,p],a.push(o);;){let A;if(n.has(m))A=m;else if(n.has(b))A=b;else break;n.delete(A),[h,d,p,m,b]=A,v!==h&&(o.push(v,w,h,w===d?d:p),v=h),w=w===d?p:d}o.push(v,w)}return new CU(a,f(this,Sp))},cy=function(t){const e=f(this,ps);let n=0,a=e.length-1;for(;n<=a;){const o=n+a>>1,c=e[o][0];if(c===t)return o;c<t?n=o+1:a=o-1}return a+1},Z2=function([,t,e]){const n=T(this,Xn,cy).call(this,t);f(this,ps).splice(n,0,[t,e])},J2=function([,t,e]){const n=T(this,Xn,cy).call(this,t);for(let a=n;a<f(this,ps).length;a++){const[o,c]=f(this,ps)[a];if(o!==t)break;if(o===t&&c===e){f(this,ps).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[o,c]=f(this,ps)[a];if(o!==t)break;if(o===t&&c===e){f(this,ps).splice(a,1);return}}},R_=function(t){const[e,n,a]=t,o=[[e,n,a]],c=T(this,Xn,cy).call(this,a);for(let h=0;h<c;h++){const[d,p]=f(this,ps)[h];for(let m=0,b=o.length;m<b;m++){const[,v,w]=o[m];if(!(p<=v||w<=d)){if(v>=d){if(w>p)o[m][1]=p;else{if(b===1)return[];o.splice(m,1),m--,b--}continue}o[m][2]=d,w>p&&o.push([e,p,w])}}}return o};class tM{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof L_}}var Ep,Wu;class CU extends tM{constructor(e,n){super();k(this,Ep);k(this,Wu);x(this,Wu,e),x(this,Ep,n)}toSVGPath(){const e=[];for(const n of f(this,Wu)){let[a,o]=n;e.push(`M${a} ${o}`);for(let c=2;c<n.length;c+=2){const h=n[c],d=n[c+1];h===a?(e.push(`V${d}`),o=d):d===o&&(e.push(`H${h}`),a=h)}e.push("Z")}return e.join(" ")}serialize([e,n,a,o],c){const h=[],d=a-e,p=o-n;for(const m of f(this,Wu)){const b=new Array(m.length);for(let v=0;v<m.length;v+=2)b[v]=e+m[v]*d,b[v+1]=o-m[v+1]*p;h.push(b)}return h}get box(){return f(this,Ep)}}Ep=new WeakMap,Wu=new WeakMap;var Us,$r,Qu,Zu,Hs,$t,zl,Pl,xp,Cp,Ju,th,so,Tp,eb,nb,kp,M_;const Mr=class Mr{constructor({x:t,y:e},n,a,o,c,h=0){k(this,kp);k(this,Us);k(this,$r,[]);k(this,Qu);k(this,Zu);k(this,Hs,[]);k(this,$t,new Float64Array(18));k(this,zl);k(this,Pl);k(this,xp);k(this,Cp);k(this,Ju);k(this,th);k(this,so,[]);x(this,Us,n),x(this,th,o*a),x(this,Zu,c),f(this,$t).set([NaN,NaN,NaN,NaN,t,e],6),x(this,Qu,h),x(this,Cp,f(Mr,Tp)*a),x(this,xp,f(Mr,nb)*a),x(this,Ju,a),f(this,so).push(t,e)}get free(){return!0}isEmpty(){return isNaN(f(this,$t)[8])}add({x:t,y:e}){var tt;x(this,zl,t),x(this,Pl,e);const[n,a,o,c]=f(this,Us);let[h,d,p,m]=f(this,$t).subarray(8,12);const b=t-p,v=e-m,w=Math.hypot(b,v);if(w<f(this,xp))return!1;const A=w-f(this,Cp),S=A/w,R=S*b,M=S*v;let D=h,O=d;h=p,d=m,p+=R,m+=M,(tt=f(this,so))==null||tt.push(t,e);const I=-M/A,U=R/A,P=I*f(this,th),H=U*f(this,th);return f(this,$t).set(f(this,$t).subarray(2,8),0),f(this,$t).set([p+P,m+H],4),f(this,$t).set(f(this,$t).subarray(14,18),12),f(this,$t).set([p-P,m-H],16),isNaN(f(this,$t)[6])?(f(this,Hs).length===0&&(f(this,$t).set([h+P,d+H],2),f(this,Hs).push(NaN,NaN,NaN,NaN,(h+P-n)/o,(d+H-a)/c),f(this,$t).set([h-P,d-H],14),f(this,$r).push(NaN,NaN,NaN,NaN,(h-P-n)/o,(d-H-a)/c)),f(this,$t).set([D,O,h,d,p,m],6),!this.isEmpty()):(f(this,$t).set([D,O,h,d,p,m],6),Math.abs(Math.atan2(O-d,D-h)-Math.atan2(M,R))<Math.PI/2?([h,d,p,m]=f(this,$t).subarray(2,6),f(this,Hs).push(NaN,NaN,NaN,NaN,((h+p)/2-n)/o,((d+m)/2-a)/c),[h,d,D,O]=f(this,$t).subarray(14,18),f(this,$r).push(NaN,NaN,NaN,NaN,((D+h)/2-n)/o,((O+d)/2-a)/c),!0):([D,O,h,d,p,m]=f(this,$t).subarray(0,6),f(this,Hs).push(((D+5*h)/6-n)/o,((O+5*d)/6-a)/c,((5*h+p)/6-n)/o,((5*d+m)/6-a)/c,((h+p)/2-n)/o,((d+m)/2-a)/c),[p,m,h,d,D,O]=f(this,$t).subarray(12,18),f(this,$r).push(((D+5*h)/6-n)/o,((O+5*d)/6-a)/c,((5*h+p)/6-n)/o,((5*d+m)/6-a)/c,((h+p)/2-n)/o,((d+m)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=f(this,Hs),e=f(this,$r),n=f(this,$t).subarray(4,6),a=f(this,$t).subarray(16,18),[o,c,h,d]=f(this,Us),[p,m,b,v]=T(this,kp,M_).call(this);if(isNaN(f(this,$t)[6])&&!this.isEmpty())return`M${(f(this,$t)[2]-o)/h} ${(f(this,$t)[3]-c)/d} L${(f(this,$t)[4]-o)/h} ${(f(this,$t)[5]-c)/d} L${p} ${m} L${b} ${v} L${(f(this,$t)[16]-o)/h} ${(f(this,$t)[17]-c)/d} L${(f(this,$t)[14]-o)/h} ${(f(this,$t)[15]-c)/d} Z`;const w=[];w.push(`M${t[4]} ${t[5]}`);for(let A=6;A<t.length;A+=6)isNaN(t[A])?w.push(`L${t[A+4]} ${t[A+5]}`):w.push(`C${t[A]} ${t[A+1]} ${t[A+2]} ${t[A+3]} ${t[A+4]} ${t[A+5]}`);w.push(`L${(n[0]-o)/h} ${(n[1]-c)/d} L${p} ${m} L${b} ${v} L${(a[0]-o)/h} ${(a[1]-c)/d}`);for(let A=e.length-6;A>=6;A-=6)isNaN(e[A])?w.push(`L${e[A+4]} ${e[A+5]}`):w.push(`C${e[A]} ${e[A+1]} ${e[A+2]} ${e[A+3]} ${e[A+4]} ${e[A+5]}`);return w.push(`L${e[4]} ${e[5]} Z`),w.join(" ")}getOutlines(){var M;const t=f(this,Hs),e=f(this,$r),n=f(this,$t),a=n.subarray(4,6),o=n.subarray(16,18),[c,h,d,p]=f(this,Us),m=new Float64Array((((M=f(this,so))==null?void 0:M.length)??0)+2);for(let D=0,O=m.length-2;D<O;D+=2)m[D]=(f(this,so)[D]-c)/d,m[D+1]=(f(this,so)[D+1]-h)/p;m[m.length-2]=(f(this,zl)-c)/d,m[m.length-1]=(f(this,Pl)-h)/p;const[b,v,w,A]=T(this,kp,M_).call(this);if(isNaN(n[6])&&!this.isEmpty()){const D=new Float64Array(36);return D.set([NaN,NaN,NaN,NaN,(n[2]-c)/d,(n[3]-h)/p,NaN,NaN,NaN,NaN,(n[4]-c)/d,(n[5]-h)/p,NaN,NaN,NaN,NaN,b,v,NaN,NaN,NaN,NaN,w,A,NaN,NaN,NaN,NaN,(n[16]-c)/d,(n[17]-h)/p,NaN,NaN,NaN,NaN,(n[14]-c)/d,(n[15]-h)/p],0),new L_(D,m,f(this,Us),f(this,Ju),f(this,Qu),f(this,Zu))}const S=new Float64Array(f(this,Hs).length+24+f(this,$r).length);let R=t.length;for(let D=0;D<R;D+=2){if(isNaN(t[D])){S[D]=S[D+1]=NaN;continue}S[D]=t[D],S[D+1]=t[D+1]}S.set([NaN,NaN,NaN,NaN,(a[0]-c)/d,(a[1]-h)/p,NaN,NaN,NaN,NaN,b,v,NaN,NaN,NaN,NaN,w,A,NaN,NaN,NaN,NaN,(o[0]-c)/d,(o[1]-h)/p],R),R+=24;for(let D=e.length-6;D>=6;D-=6)for(let O=0;O<6;O+=2){if(isNaN(e[D+O])){S[R]=S[R+1]=NaN,R+=2;continue}S[R]=e[D+O],S[R+1]=e[D+O+1],R+=2}return S.set([NaN,NaN,NaN,NaN,e[4],e[5]],R),new L_(S,m,f(this,Us),f(this,Ju),f(this,Qu),f(this,Zu))}};Us=new WeakMap,$r=new WeakMap,Qu=new WeakMap,Zu=new WeakMap,Hs=new WeakMap,$t=new WeakMap,zl=new WeakMap,Pl=new WeakMap,xp=new WeakMap,Cp=new WeakMap,Ju=new WeakMap,th=new WeakMap,so=new WeakMap,Tp=new WeakMap,eb=new WeakMap,nb=new WeakMap,kp=new WeakSet,M_=function(){const t=f(this,$t).subarray(4,6),e=f(this,$t).subarray(16,18),[n,a,o,c]=f(this,Us);return[(f(this,zl)+(t[0]-e[0])/2-n)/o,(f(this,Pl)+(t[1]-e[1])/2-a)/c,(f(this,zl)+(e[0]-t[0])/2-n)/o,(f(this,Pl)+(e[1]-t[1])/2-a)/c]},k(Mr,Tp,8),k(Mr,eb,2),k(Mr,nb,f(Mr,Tp)+f(Mr,eb));let zy=Mr;var eh,Fl,Kr,Rp,Ci,Mp,Ie,ai,Vd,Gd,eM;class L_ extends tM{constructor(e,n,a,o,c,h){super();k(this,ai);k(this,eh);k(this,Fl,null);k(this,Kr);k(this,Rp);k(this,Ci);k(this,Mp);k(this,Ie);x(this,Ie,e),x(this,Ci,n),x(this,eh,a),x(this,Mp,o),x(this,Kr,c),x(this,Rp,h),T(this,ai,eM).call(this,h);const{x:d,y:p,width:m,height:b}=f(this,Fl);for(let v=0,w=e.length;v<w;v+=2)e[v]=(e[v]-d)/m,e[v+1]=(e[v+1]-p)/b;for(let v=0,w=n.length;v<w;v+=2)n[v]=(n[v]-d)/m,n[v+1]=(n[v+1]-p)/b}toSVGPath(){const e=[`M${f(this,Ie)[4]} ${f(this,Ie)[5]}`];for(let n=6,a=f(this,Ie).length;n<a;n+=6){if(isNaN(f(this,Ie)[n])){e.push(`L${f(this,Ie)[n+4]} ${f(this,Ie)[n+5]}`);continue}e.push(`C${f(this,Ie)[n]} ${f(this,Ie)[n+1]} ${f(this,Ie)[n+2]} ${f(this,Ie)[n+3]} ${f(this,Ie)[n+4]} ${f(this,Ie)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,o],c){const h=a-e,d=o-n;let p,m;switch(c){case 0:p=T(this,ai,Vd).call(this,f(this,Ie),e,o,h,-d),m=T(this,ai,Vd).call(this,f(this,Ci),e,o,h,-d);break;case 90:p=T(this,ai,Gd).call(this,f(this,Ie),e,n,h,d),m=T(this,ai,Gd).call(this,f(this,Ci),e,n,h,d);break;case 180:p=T(this,ai,Vd).call(this,f(this,Ie),a,n,-h,d),m=T(this,ai,Vd).call(this,f(this,Ci),a,n,-h,d);break;case 270:p=T(this,ai,Gd).call(this,f(this,Ie),a,o,-h,-d),m=T(this,ai,Gd).call(this,f(this,Ci),a,o,-h,-d);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return f(this,Fl)}getNewOutline(e,n){const{x:a,y:o,width:c,height:h}=f(this,Fl),[d,p,m,b]=f(this,eh),v=c*m,w=h*b,A=a*m+d,S=o*b+p,R=new zy({x:f(this,Ci)[0]*v+A,y:f(this,Ci)[1]*w+S},f(this,eh),f(this,Mp),e,f(this,Rp),n??f(this,Kr));for(let M=2;M<f(this,Ci).length;M+=2)R.add({x:f(this,Ci)[M]*v+A,y:f(this,Ci)[M+1]*w+S});return R.getOutlines()}}eh=new WeakMap,Fl=new WeakMap,Kr=new WeakMap,Rp=new WeakMap,Ci=new WeakMap,Mp=new WeakMap,Ie=new WeakMap,ai=new WeakSet,Vd=function(e,n,a,o,c){const h=new Float64Array(e.length);for(let d=0,p=e.length;d<p;d+=2)h[d]=n+e[d]*o,h[d+1]=a+e[d+1]*c;return h},Gd=function(e,n,a,o,c){const h=new Float64Array(e.length);for(let d=0,p=e.length;d<p;d+=2)h[d]=n+e[d+1]*o,h[d+1]=a+e[d]*c;return h},eM=function(e){const n=f(this,Ie);let a=n[4],o=n[5],c=a,h=o,d=a,p=o,m=a,b=o;const v=e?Math.max:Math.min;for(let M=6,D=n.length;M<D;M+=6){if(isNaN(n[M]))c=Math.min(c,n[M+4]),h=Math.min(h,n[M+5]),d=Math.max(d,n[M+4]),p=Math.max(p,n[M+5]),b<n[M+5]?(m=n[M+4],b=n[M+5]):b===n[M+5]&&(m=v(m,n[M+4]));else{const O=_t.bezierBoundingBox(a,o,...n.slice(M,M+6));c=Math.min(c,O[0]),h=Math.min(h,O[1]),d=Math.max(d,O[2]),p=Math.max(p,O[3]),b<O[3]?(m=O[2],b=O[3]):b===O[3]&&(m=v(m,O[2]))}a=n[M+4],o=n[M+5]}const w=c-f(this,Kr),A=h-f(this,Kr),S=d-c+2*f(this,Kr),R=p-h+2*f(this,Kr);x(this,Fl,{x:w,y:A,width:S,height:R,lastPoint:[m,b]})};var Lp,Dp,gs,Il,nh,Ze,Np,ih,Op,jp,ms,sh,Ae,D_,N_,nM,Zo,iM,Ha;const Lr=class Lr{constructor({editor:t=null,uiManager:e=null}){k(this,Ae);k(this,Lp,T(this,Ae,nM).bind(this));k(this,Dp,T(this,Ae,iM).bind(this));k(this,gs,null);k(this,Il,null);k(this,nh);k(this,Ze,null);k(this,Np,!1);k(this,ih,!1);k(this,Op,null);k(this,jp);k(this,ms,null);k(this,sh);var n;t?(x(this,ih,!1),x(this,sh,Rt.HIGHLIGHT_COLOR),x(this,Op,t)):(x(this,ih,!0),x(this,sh,Rt.HIGHLIGHT_DEFAULT_COLOR)),x(this,ms,(t==null?void 0:t._uiManager)||e),x(this,jp,f(this,ms)._eventBus),x(this,nh,(t==null?void 0:t.color)||((n=f(this,ms))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return te(this,"_keyboardManager",new eg([[["Escape","mac+Escape"],Lr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Lr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Lr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Lr.prototype._moveToPrevious],[["Home","mac+Home"],Lr.prototype._moveToBeginning],[["End","mac+End"],Lr.prototype._moveToEnd]]))}renderButton(){const t=x(this,gs,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=f(this,ms)._signal;t.addEventListener("click",T(this,Ae,Zo).bind(this),{signal:e}),t.addEventListener("keydown",f(this,Lp),{signal:e});const n=x(this,Il,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=f(this,nh),t.append(n),t}renderMainDropdown(){const t=x(this,Ze,T(this,Ae,D_).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===f(this,gs)){T(this,Ae,Zo).call(this,t);return}const e=t.target.getAttribute("data-color");e&&T(this,Ae,N_).call(this,e,t)}_moveToNext(t){var e,n;if(!f(this,Ae,Ha)){T(this,Ae,Zo).call(this,t);return}if(t.target===f(this,gs)){(e=f(this,Ze).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=f(this,Ze))==null?void 0:e.firstChild)||t.target===f(this,gs)){f(this,Ae,Ha)&&this._hideDropdownFromKeyboard();return}f(this,Ae,Ha)||T(this,Ae,Zo).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!f(this,Ae,Ha)){T(this,Ae,Zo).call(this,t);return}(e=f(this,Ze).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!f(this,Ae,Ha)){T(this,Ae,Zo).call(this,t);return}(e=f(this,Ze).lastChild)==null||e.focus()}hideDropdown(){var t;(t=f(this,Ze))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",f(this,Dp))}_hideDropdownFromKeyboard(){var t;if(!f(this,ih)){if(!f(this,Ae,Ha)){(t=f(this,Op))==null||t.unselect();return}this.hideDropdown(),f(this,gs).focus({preventScroll:!0,focusVisible:f(this,Np)})}}updateColor(t){if(f(this,Il)&&(f(this,Il).style.backgroundColor=t),!f(this,Ze))return;const e=f(this,ms).highlightColors.values();for(const n of f(this,Ze).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=f(this,gs))==null||t.remove(),x(this,gs,null),x(this,Il,null),(e=f(this,Ze))==null||e.remove(),x(this,Ze,null)}};Lp=new WeakMap,Dp=new WeakMap,gs=new WeakMap,Il=new WeakMap,nh=new WeakMap,Ze=new WeakMap,Np=new WeakMap,ih=new WeakMap,Op=new WeakMap,jp=new WeakMap,ms=new WeakMap,sh=new WeakMap,Ae=new WeakSet,D_=function(){const t=document.createElement("div"),e=f(this,ms)._signal;t.addEventListener("contextmenu",oi,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,a]of f(this,ms).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=n,o.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${n}`);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.setAttribute("aria-selected",a===f(this,nh)),o.addEventListener("click",T(this,Ae,N_).bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",f(this,Lp),{signal:e}),t},N_=function(t,e){e.stopPropagation(),f(this,jp).dispatch("switchannotationeditorparams",{source:this,type:f(this,sh),value:t})},nM=function(t){Lr._keyboardManager.exec(this,t)},Zo=function(t){if(f(this,Ae,Ha)){this.hideDropdown();return}if(x(this,Np,t.detail===0),window.addEventListener("pointerdown",f(this,Dp),{signal:f(this,ms)._signal}),f(this,Ze)){f(this,Ze).classList.remove("hidden");return}const e=x(this,Ze,T(this,Ae,D_).call(this));f(this,gs).append(e)},iM=function(t){var e;(e=f(this,Ze))!=null&&e.contains(t.target)||this.hideDropdown()},Ha=function(){return f(this,Ze)&&!f(this,Ze).classList.contains("hidden")};let Py=Lr;var rh,zp,ro,Bl,ah,Gi,Pp,Fp,Ul,ys,Hn,Ti,ib,oh,Hl,Je,lh,qs,Ip,Vt,O_,j_,sM,rM,aM,z_,Xd,Zi,au,oM,uy,Yd,lM,cM,uM,hM;const oe=class oe extends he{constructor(e){super({...e,name:"highlightEditor"});k(this,Vt);k(this,rh,null);k(this,zp,0);k(this,ro);k(this,Bl,null);k(this,ah,null);k(this,Gi,null);k(this,Pp,null);k(this,Fp,0);k(this,Ul,null);k(this,ys,null);k(this,Hn,null);k(this,Ti,!1);k(this,ib,T(this,Vt,oM).bind(this));k(this,oh,null);k(this,Hl);k(this,Je,null);k(this,lh,"");k(this,qs);k(this,Ip,"");this.color=e.color||oe._defaultColor,x(this,qs,e.thickness||oe._defaultThickness),x(this,Hl,e.opacity||oe._defaultOpacity),x(this,ro,e.boxes||null),x(this,Ip,e.methodOfCreation||""),x(this,lh,e.text||""),this._isDraggable=!1,e.highlightId>-1?(x(this,Ti,!0),T(this,Vt,j_).call(this,e),T(this,Vt,Xd).call(this)):(x(this,rh,e.anchorNode),x(this,zp,e.anchorOffset),x(this,Pp,e.focusNode),x(this,Fp,e.focusOffset),T(this,Vt,O_).call(this),T(this,Vt,Xd).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=oe.prototype;return te(this,"_keyboardManager",new eg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:f(this,Ti)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:f(this,qs),methodOfCreation:f(this,Ip)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;he.initialize(e,n),oe._defaultColor||(oe._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Rt.HIGHLIGHT_DEFAULT_COLOR:oe._defaultColor=n;break;case Rt.HIGHLIGHT_THICKNESS:oe._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return f(this,oh)}updateParams(e,n){switch(e){case Rt.HIGHLIGHT_COLOR:T(this,Vt,sM).call(this,n);break;case Rt.HIGHLIGHT_THICKNESS:T(this,Vt,rM).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Rt.HIGHLIGHT_DEFAULT_COLOR,oe._defaultColor],[Rt.HIGHLIGHT_THICKNESS,oe._defaultThickness]]}get propertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,this.color||oe._defaultColor],[Rt.HIGHLIGHT_THICKNESS,f(this,qs)||oe._defaultThickness],[Rt.HIGHLIGHT_FREE,f(this,Ti)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,ah,new Py({editor:this})),e.addColorPicker(f(this,ah))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(T(this,Vt,Yd).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,T(this,Vt,Yd).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){T(this,Vt,z_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Vt,Xd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?T(this,Vt,z_).call(this):e&&(T(this,Vt,Xd).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,c,h;const{drawLayer:n}=this.parent;let a;f(this,Ti)?(e=(e-this.rotation+360)%360,a=T(o=oe,Zi,au).call(o,f(this,ys).box,e)):a=T(c=oe,Zi,au).call(c,this,e),n.rotate(f(this,Hn),e),n.rotate(f(this,Je),e),n.updateBox(f(this,Hn),a),n.updateBox(f(this,Je),T(h=oe,Zi,au).call(h,f(this,Gi).box,e))}render(){if(this.div)return this.div;const e=super.render();f(this,lh)&&(e.setAttribute("aria-label",f(this,lh)),e.setAttribute("role","mark")),f(this,Ti)?e.classList.add("free"):this.div.addEventListener("keydown",f(this,ib),{signal:this._uiManager._signal});const n=x(this,Ul,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=f(this,Bl);const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),Dy(this,f(this,Ul),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(f(this,Je),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(f(this,Je),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:T(this,Vt,uy).call(this,!0);break;case 1:case 3:T(this,Vt,uy).call(this,!1);break}}select(){var e,n;super.select(),f(this,Je)&&((e=this.parent)==null||e.drawLayer.removeClass(f(this,Je),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(f(this,Je),"selected"))}unselect(){var e;super.unselect(),f(this,Je)&&((e=this.parent)==null||e.drawLayer.removeClass(f(this,Je),"selected"),f(this,Ti)||T(this,Vt,uy).call(this,!1))}get _mustFixPosition(){return!f(this,Ti)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(f(this,Hn),e),this.parent.drawLayer.show(f(this,Je),e))}static startHighlighting(e,n,{target:a,x:o,y:c}){const{x:h,y:d,width:p,height:m}=a.getBoundingClientRect(),b=R=>{T(this,Zi,uM).call(this,e,R)},v=e._signal,w={capture:!0,passive:!1,signal:v},A=R=>{R.preventDefault(),R.stopPropagation()},S=R=>{a.removeEventListener("pointermove",b),window.removeEventListener("blur",S),window.removeEventListener("pointerup",S),window.removeEventListener("pointerdown",A,w),window.removeEventListener("contextmenu",oi),T(this,Zi,hM).call(this,e,R)};window.addEventListener("blur",S,{signal:v}),window.addEventListener("pointerup",S,{signal:v}),window.addEventListener("pointerdown",A,w),window.addEventListener("contextmenu",oi,{signal:v}),a.addEventListener("pointermove",b,{signal:v}),this._freeHighlight=new zy({x:o,y:c},[h,d,p,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,n,a){var S;const o=super.deserialize(e,n,a),{rect:[c,h,d,p],color:m,quadPoints:b}=e;o.color=_t.makeHexColor(...m),x(o,Hl,e.opacity);const[v,w]=o.pageDimensions;o.width=(d-c)/v,o.height=(p-h)/w;const A=x(o,ro,[]);for(let R=0;R<b.length;R+=8)A.push({x:(b[4]-d)/v,y:(p-(1-b[R+5]))/w,width:(b[R+2]-b[R])/v,height:(b[R+5]-b[R+1])/w});return T(S=o,Vt,O_).call(S),o}serialize(e=!1){if(this.isEmpty()||e)return null;const n=this.getRect(0,0),a=he._colorManager.convert(this.color);return{annotationType:Zt.HIGHLIGHT,color:a,opacity:f(this,Hl),thickness:f(this,qs),quadPoints:T(this,Vt,lM).call(this),outlines:T(this,Vt,cM).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:T(this,Vt,Yd).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};rh=new WeakMap,zp=new WeakMap,ro=new WeakMap,Bl=new WeakMap,ah=new WeakMap,Gi=new WeakMap,Pp=new WeakMap,Fp=new WeakMap,Ul=new WeakMap,ys=new WeakMap,Hn=new WeakMap,Ti=new WeakMap,ib=new WeakMap,oh=new WeakMap,Hl=new WeakMap,Je=new WeakMap,lh=new WeakMap,qs=new WeakMap,Ip=new WeakMap,Vt=new WeakSet,O_=function(){const e=new k_(f(this,ro),.001);x(this,ys,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=f(this,ys).box;const n=new k_(f(this,ro),.0025,.001,this._uiManager.direction==="ltr");x(this,Gi,n.getOutlines());const{lastPoint:a}=f(this,Gi).box;x(this,oh,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},j_=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var b,v;if(x(this,ys,e),x(this,Gi,e.getNewOutline(f(this,qs)/2+1.5,.0025)),n>=0)x(this,Hn,n),x(this,Bl,a),this.parent.drawLayer.finalizeLine(n,e),x(this,Je,this.parent.drawLayer.highlightOutline(f(this,Gi)));else if(this.parent){const w=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(f(this,Hn),e),this.parent.drawLayer.updateBox(f(this,Hn),T(b=oe,Zi,au).call(b,f(this,ys).box,(w-this.rotation+360)%360)),this.parent.drawLayer.updateLine(f(this,Je),f(this,Gi)),this.parent.drawLayer.updateBox(f(this,Je),T(v=oe,Zi,au).call(v,f(this,Gi).box,w))}const{x:c,y:h,width:d,height:p}=e.box;switch(this.rotation){case 0:this.x=c,this.y=h,this.width=d,this.height=p;break;case 90:{const[w,A]=this.parentDimensions;this.x=h,this.y=1-c,this.width=d*A/w,this.height=p*w/A;break}case 180:this.x=1-c,this.y=1-h,this.width=d,this.height=p;break;case 270:{const[w,A]=this.parentDimensions;this.x=1-h,this.y=c,this.width=d*A/w,this.height=p*w/A;break}}const{lastPoint:m}=f(this,Gi).box;x(this,oh,[(m[0]-c)/d,(m[1]-h)/p])},sM=function(e){const n=o=>{var c,h;this.color=o,(c=this.parent)==null||c.drawLayer.changeColor(f(this,Hn),o),(h=f(this,ah))==null||h.updateColor(o)},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},rM=function(e){const n=f(this,qs),a=o=>{x(this,qs,o),T(this,Vt,aM).call(this,o)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},aM=function(e){if(!f(this,Ti))return;T(this,Vt,j_).call(this,{highlightOutlines:f(this,ys).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)},z_=function(){f(this,Hn)===null||!this.parent||(this.parent.drawLayer.remove(f(this,Hn)),x(this,Hn,null),this.parent.drawLayer.remove(f(this,Je)),x(this,Je,null))},Xd=function(e=this.parent){f(this,Hn)===null&&({id:mi(this,Hn)._,clipPathId:mi(this,Bl)._}=e.drawLayer.highlight(f(this,ys),this.color,f(this,Hl)),x(this,Je,e.drawLayer.highlightOutline(f(this,Gi))),f(this,Ul)&&(f(this,Ul).style.clipPath=f(this,Bl)))},Zi=new WeakSet,au=function({x:e,y:n,width:a,height:o},c){switch(c){case 90:return{x:1-n-o,y:e,width:o,height:a};case 180:return{x:1-e-a,y:1-n-o,width:a,height:o};case 270:return{x:n,y:1-e-a,width:o,height:a}}return{x:e,y:n,width:a,height:o}},oM=function(e){oe._keyboardManager.exec(this,e)},uy=function(e){if(!f(this,rh))return;const n=window.getSelection();e?n.setPosition(f(this,rh),f(this,zp)):n.setPosition(f(this,Pp),f(this,Fp))},Yd=function(){return f(this,Ti)?this.rotation:0},lM=function(){if(f(this,Ti))return null;const[e,n]=this.pageDimensions,a=f(this,ro),o=new Float32Array(a.length*8);let c=0;for(const{x:h,y:d,width:p,height:m}of a){const b=h*e,v=(1-d-m)*n;o[c]=o[c+4]=b,o[c+1]=o[c+3]=v,o[c+2]=o[c+6]=b+p*e,o[c+5]=o[c+7]=v+m*n,c+=8}return o},cM=function(e){return f(this,ys).serialize(e,T(this,Vt,Yd).call(this))},uM=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},hM=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},k(oe,Zi),Mt(oe,"_defaultColor",null),Mt(oe,"_defaultOpacity",1),Mt(oe,"_defaultThickness",12),Mt(oe,"_l10nPromise"),Mt(oe,"_type","highlight"),Mt(oe,"_editorType",Zt.HIGHLIGHT),Mt(oe,"_freeHighlightId",-1),Mt(oe,"_freeHighlight",null),Mt(oe,"_freeHighlightClipId","");let Fy=oe;var ql,Vl,Bp,Up,Hp,Gl,Vs,Wr,Xi,Xl,Yl,Qr,$l,Kl,ao,ut,dM,fM,pM,gM,F_,mM,I_,yM,bM,vM,wM,_M,Jo,B_,hy,dy,ou,U_,fy,da,AM,H_,SM,EM,q_,py,$d;const Le=class Le extends he{constructor(e){super({...e,name:"inkEditor"});k(this,ut);k(this,ql,0);k(this,Vl,0);k(this,Bp,this.canvasPointermove.bind(this));k(this,Up,this.canvasPointerleave.bind(this));k(this,Hp,this.canvasPointerup.bind(this));k(this,Gl,this.canvasPointerdown.bind(this));k(this,Vs,null);k(this,Wr,new Path2D);k(this,Xi,!1);k(this,Xl,!1);k(this,Yl,!1);k(this,Qr,null);k(this,$l,0);k(this,Kl,0);k(this,ao,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){he.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Rt.INK_THICKNESS:Le._defaultThickness=n;break;case Rt.INK_COLOR:Le._defaultColor=n;break;case Rt.INK_OPACITY:Le._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case Rt.INK_THICKNESS:T(this,ut,dM).call(this,n);break;case Rt.INK_COLOR:T(this,ut,fM).call(this,n);break;case Rt.INK_OPACITY:T(this,ut,pM).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Rt.INK_THICKNESS,Le._defaultThickness],[Rt.INK_COLOR,Le._defaultColor||he._defaultLineColor],[Rt.INK_OPACITY,Math.round(Le._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Rt.INK_THICKNESS,this.thickness||Le._defaultThickness],[Rt.INK_COLOR,this.color||Le._defaultColor||he._defaultLineColor],[Rt.INK_OPACITY,Math.round(100*(this.opacity??Le._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(T(this,ut,hy).call(this),T(this,ut,dy).call(this)),this.isAttachedToDOM||(this.parent.add(this),T(this,ut,ou).call(this)),T(this,ut,$d).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,f(this,Vs)&&(clearTimeout(f(this,Vs)),x(this,Vs,null)),(e=f(this,Qr))==null||e.disconnect(),x(this,Qr,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,a=this.width*e,o=this.height*n;this.setDimensions(a,o)}enableEditMode(){f(this,Xi)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",f(this,Gl),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",f(this,Gl)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){f(this,Xi)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,Xi,!0),this.div.classList.add("disabled"),T(this,ut,$d).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||f(this,Xi)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),T(this,ut,mM).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),T(this,ut,I_).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),T(this,ut,B_).call(this,e)}canvasPointerleave(e){T(this,ut,B_).call(this,e)}get isResizable(){return!this.isEmpty()&&f(this,Xi)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[a,o,c,h]=T(this,ut,gM).call(this);if(this.setAt(a,o,0,0),this.setDims(c,h),T(this,ut,hy).call(this),this.width){const[d,p]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*p),this.setAt(e*d,n*p,this.width*d,this.height*p),x(this,Yl,!0),T(this,ut,ou).call(this),this.setDims(this.width*d,this.height*p),T(this,ut,Jo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return T(this,ut,dy).call(this),this.div}setDimensions(e,n){const a=Math.round(e),o=Math.round(n);if(f(this,$l)===a&&f(this,Kl)===o)return;x(this,$l,a),x(this,Kl,o),this.canvas.style.visibility="hidden";const[c,h]=this.parentDimensions;this.width=e/c,this.height=n/h,this.fixAndSetPosition(),f(this,Xi)&&T(this,ut,U_).call(this,e,n),T(this,ut,ou).call(this),T(this,ut,Jo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,n,a){var R,M,D;if(e instanceof q2)return null;const o=super.deserialize(e,n,a);o.thickness=e.thickness,o.color=_t.makeHexColor(...e.color),o.opacity=e.opacity;const[c,h]=o.pageDimensions,d=o.width*c,p=o.height*h,m=o.parentScale,b=e.thickness/2;x(o,Xi,!0),x(o,$l,Math.round(d)),x(o,Kl,Math.round(p));const{paths:v,rect:w,rotation:A}=e;for(let{bezier:O}of v){O=T(R=Le,da,SM).call(R,O,w,A);const I=[];o.paths.push(I);let U=m*(O[0]-b),P=m*(O[1]-b);for(let K=2,tt=O.length;K<tt;K+=6){const nt=m*(O[K]-b),rt=m*(O[K+1]-b),mt=m*(O[K+2]-b),At=m*(O[K+3]-b),dt=m*(O[K+4]-b),st=m*(O[K+5]-b);I.push([[U,P],[nt,rt],[mt,At],[dt,st]]),U=dt,P=st}const H=T(this,da,AM).call(this,I);o.bezierPath2D.push(H)}const S=T(M=o,ut,q_).call(M);return x(o,Vl,Math.max(he.MIN_SIZE,S[2]-S[0])),x(o,ql,Math.max(he.MIN_SIZE,S[3]-S[1])),T(D=o,ut,U_).call(D,d,p),o}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=he._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Zt.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:T(this,ut,EM).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ql=new WeakMap,Vl=new WeakMap,Bp=new WeakMap,Up=new WeakMap,Hp=new WeakMap,Gl=new WeakMap,Vs=new WeakMap,Wr=new WeakMap,Xi=new WeakMap,Xl=new WeakMap,Yl=new WeakMap,Qr=new WeakMap,$l=new WeakMap,Kl=new WeakMap,ao=new WeakMap,ut=new WeakSet,dM=function(e){const n=o=>{this.thickness=o,T(this,ut,$d).call(this)},a=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},fM=function(e){const n=o=>{this.color=o,T(this,ut,Jo).call(this)},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},pM=function(e){const n=o=>{this.opacity=o,T(this,ut,Jo).call(this)};e/=100;const a=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},gM=function(){const{parentRotation:e,parentDimensions:[n,a]}=this;switch(e){case 90:return[0,a,a,n];case 180:return[n,a,n,a];case 270:return[n,0,a,n];default:return[0,0,n,a]}},F_=function(){const{ctx:e,color:n,opacity:a,thickness:o,parentScale:c,scaleFactor:h}=this;e.lineWidth=o*c/h,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${WI(a)}`},mM=function(e,n){const a=this._uiManager._signal;this.canvas.addEventListener("contextmenu",oi,{signal:a}),this.canvas.addEventListener("pointerleave",f(this,Up),{signal:a}),this.canvas.addEventListener("pointermove",f(this,Bp),{signal:a}),this.canvas.addEventListener("pointerup",f(this,Hp),{signal:a}),this.canvas.removeEventListener("pointerdown",f(this,Gl)),this.isEditing=!0,f(this,Yl)||(x(this,Yl,!0),T(this,ut,ou).call(this),this.thickness||(this.thickness=Le._defaultThickness),this.color||(this.color=Le._defaultColor||he._defaultLineColor),this.opacity??(this.opacity=Le._defaultOpacity)),this.currentPath.push([e,n]),x(this,Xl,!1),T(this,ut,F_).call(this),x(this,ao,()=>{T(this,ut,vM).call(this),f(this,ao)&&window.requestAnimationFrame(f(this,ao))}),window.requestAnimationFrame(f(this,ao))},I_=function(e,n){const[a,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===a&&n===o)return;const c=this.currentPath;let h=f(this,Wr);if(c.push([e,n]),x(this,Xl,!0),c.length<=2){h.moveTo(...c[0]),h.lineTo(e,n);return}c.length===3&&(x(this,Wr,h=new Path2D),h.moveTo(...c[0])),T(this,ut,wM).call(this,h,...c.at(-3),...c.at(-2),e,n)},yM=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);f(this,Wr).lineTo(...e)},bM=function(e,n){x(this,ao,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),T(this,ut,I_).call(this,e,n),T(this,ut,yM).call(this);let a;if(this.currentPath.length!==1)a=T(this,ut,_M).call(this);else{const p=[e,n];a=[[p,p.slice(),p.slice(),p]]}const o=f(this,Wr),c=this.currentPath;this.currentPath=[],x(this,Wr,new Path2D);const h=()=>{this.allRawPaths.push(c),this.paths.push(a),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(T(this,ut,hy).call(this),T(this,ut,dy).call(this)),T(this,ut,$d).call(this))};this.addCommands({cmd:h,undo:d,mustExec:!0})},vM=function(){if(!f(this,Xl))return;x(this,Xl,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),a=n.map(h=>h[0]),o=n.map(h=>h[1]);Math.min(...a)-e,Math.max(...a)+e,Math.min(...o)-e,Math.max(...o)+e;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const h of this.bezierPath2D)c.stroke(h);c.stroke(f(this,Wr)),c.restore()},wM=function(e,n,a,o,c,h,d){const p=(n+o)/2,m=(a+c)/2,b=(o+h)/2,v=(c+d)/2;e.bezierCurveTo(p+2*(o-p)/3,m+2*(c-m)/3,b+2*(o-b)/3,v+2*(c-v)/3,b,v)},_M=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let a,[o,c]=e[0];for(a=1;a<e.length-2;a++){const[w,A]=e[a],[S,R]=e[a+1],M=(w+S)/2,D=(A+R)/2,O=[o+2*(w-o)/3,c+2*(A-c)/3],I=[M+2*(w-M)/3,D+2*(A-D)/3];n.push([[o,c],O,I,[M,D]]),[o,c]=[M,D]}const[h,d]=e[a],[p,m]=e[a+1],b=[o+2*(h-o)/3,c+2*(d-c)/3],v=[p+2*(h-p)/3,m+2*(d-m)/3];return n.push([[o,c],b,v,[p,m]]),n},Jo=function(){if(this.isEmpty()){T(this,ut,fy).call(this);return}T(this,ut,F_).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),T(this,ut,fy).call(this);for(const a of this.bezierPath2D)n.stroke(a)},B_=function(e){this.canvas.removeEventListener("pointerleave",f(this,Up)),this.canvas.removeEventListener("pointermove",f(this,Bp)),this.canvas.removeEventListener("pointerup",f(this,Hp)),this.canvas.addEventListener("pointerdown",f(this,Gl),{signal:this._uiManager._signal}),f(this,Vs)&&clearTimeout(f(this,Vs)),x(this,Vs,setTimeout(()=>{x(this,Vs,null),this.canvas.removeEventListener("contextmenu",oi)},10)),T(this,ut,bM).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},hy=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},dy=function(){x(this,Qr,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),f(this,Qr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=f(this,Qr))==null||e.disconnect(),x(this,Qr,null)},{once:!0})},ou=function(){if(!f(this,Yl))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),T(this,ut,fy).call(this)},U_=function(e,n){const a=T(this,ut,py).call(this),o=(e-a)/f(this,Vl),c=(n-a)/f(this,ql);this.scaleFactor=Math.min(o,c)},fy=function(){const e=T(this,ut,py).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},da=new WeakSet,AM=function(e){const n=new Path2D;for(let a=0,o=e.length;a<o;a++){const[c,h,d,p]=e[a];a===0&&n.moveTo(...c),n.bezierCurveTo(h[0],h[1],d[0],d[1],p[0],p[1])}return n},H_=function(e,n,a){const[o,c,h,d]=n;switch(a){case 0:for(let p=0,m=e.length;p<m;p+=2)e[p]+=o,e[p+1]=d-e[p+1];break;case 90:for(let p=0,m=e.length;p<m;p+=2){const b=e[p];e[p]=e[p+1]+o,e[p+1]=b+c}break;case 180:for(let p=0,m=e.length;p<m;p+=2)e[p]=h-e[p],e[p+1]+=c;break;case 270:for(let p=0,m=e.length;p<m;p+=2){const b=e[p];e[p]=h-e[p+1],e[p+1]=d-b}break;default:throw new Error("Invalid rotation")}return e},SM=function(e,n,a){const[o,c,h,d]=n;switch(a){case 0:for(let p=0,m=e.length;p<m;p+=2)e[p]-=o,e[p+1]=d-e[p+1];break;case 90:for(let p=0,m=e.length;p<m;p+=2){const b=e[p];e[p]=e[p+1]-c,e[p+1]=b-o}break;case 180:for(let p=0,m=e.length;p<m;p+=2)e[p]=h-e[p],e[p+1]-=c;break;case 270:for(let p=0,m=e.length;p<m;p+=2){const b=e[p];e[p]=d-e[p+1],e[p+1]=h-b}break;default:throw new Error("Invalid rotation")}return e},EM=function(e,n,a,o){var m,b;const c=[],h=this.thickness/2,d=e*n+h,p=e*a+h;for(const v of this.paths){const w=[],A=[];for(let S=0,R=v.length;S<R;S++){const[M,D,O,I]=v[S];if(M[0]===I[0]&&M[1]===I[1]&&R===1){const At=e*M[0]+d,dt=e*M[1]+p;w.push(At,dt),A.push(At,dt);break}const U=e*M[0]+d,P=e*M[1]+p,H=e*D[0]+d,K=e*D[1]+p,tt=e*O[0]+d,nt=e*O[1]+p,rt=e*I[0]+d,mt=e*I[1]+p;S===0&&(w.push(U,P),A.push(U,P)),w.push(H,K,tt,nt,rt,mt),A.push(H,K),S===R-1&&A.push(rt,mt)}c.push({bezier:T(m=Le,da,H_).call(m,w,o,this.rotation),points:T(b=Le,da,H_).call(b,A,o,this.rotation)})}return c},q_=function(){let e=1/0,n=-1/0,a=1/0,o=-1/0;for(const c of this.paths)for(const[h,d,p,m]of c){const b=_t.bezierBoundingBox(...h,...d,...p,...m);e=Math.min(e,b[0]),a=Math.min(a,b[1]),n=Math.max(n,b[2]),o=Math.max(o,b[3])}return[e,a,n,o]},py=function(){return f(this,Xi)?Math.ceil(this.thickness*this.parentScale):0},$d=function(e=!1){if(this.isEmpty())return;if(!f(this,Xi)){T(this,ut,Jo).call(this);return}const n=T(this,ut,q_).call(this),a=T(this,ut,py).call(this);x(this,Vl,Math.max(he.MIN_SIZE,n[2]-n[0])),x(this,ql,Math.max(he.MIN_SIZE,n[3]-n[1]));const o=Math.ceil(a+f(this,Vl)*this.scaleFactor),c=Math.ceil(a+f(this,ql)*this.scaleFactor),[h,d]=this.parentDimensions;this.width=o/h,this.height=c/d,this.setAspectRatio(o,c);const p=this.translationX,m=this.translationY;this.translationX=-n[0],this.translationY=-n[1],T(this,ut,ou).call(this),T(this,ut,Jo).call(this),x(this,$l,o),x(this,Kl,c),this.setDims(o,c);const b=e?a/this.scaleFactor/2:0;this.translate(p-this.translationX-b,m-this.translationY-b)},k(Le,da),Mt(Le,"_defaultColor",null),Mt(Le,"_defaultOpacity",1),Mt(Le,"_defaultThickness",1),Mt(Le,"_type","ink"),Mt(Le,"_editorType",Zt.INK);let P_=Le;var En,xn,oo,Zr,lo,ch,Gs,Jr,Xs,bs,qp,ie,Kd,Wd,gy,G_,xM,CM,X_,my,TM;const ef=class ef extends he{constructor(e){super({...e,name:"stampEditor"});k(this,ie);k(this,En,null);k(this,xn,null);k(this,oo,null);k(this,Zr,null);k(this,lo,null);k(this,ch,"");k(this,Gs,null);k(this,Jr,null);k(this,Xs,null);k(this,bs,!1);k(this,qp,!1);x(this,Zr,e.bitmapUrl),x(this,lo,e.bitmapFile)}static initialize(e,n){he.initialize(e,n)}static get supportedTypes(){return te(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return te(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(Zt.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,n;f(this,xn)&&(x(this,En,null),this._uiManager.imageManager.deleteId(f(this,xn)),(e=f(this,Gs))==null||e.remove(),x(this,Gs,null),(n=f(this,Jr))==null||n.disconnect(),x(this,Jr,null),f(this,Xs)&&(clearTimeout(f(this,Xs)),x(this,Xs,null))),super.remove()}rebuild(){if(!this.parent){f(this,xn)&&T(this,ie,gy).call(this);return}super.rebuild(),this.div!==null&&(f(this,xn)&&f(this,Gs)===null&&T(this,ie,gy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(f(this,oo)||f(this,En)||f(this,Zr)||f(this,lo)||f(this,xn))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),f(this,En)?T(this,ie,G_).call(this):T(this,ie,gy).call(this),this.width){const[a,o]=this.parentDimensions;this.setAt(e*a,n*o,this.width*a,this.height*o)}return this.div}getImageForAltText(){return f(this,Gs)}static deserialize(e,n,a){if(e instanceof V2)return null;const o=super.deserialize(e,n,a),{rect:c,bitmapUrl:h,bitmapId:d,isSvg:p,accessibilityData:m}=e;d&&a.imageManager.isValidId(d)?x(o,xn,d):x(o,Zr,h),x(o,bs,p);const[b,v]=o.pageDimensions;return o.width=(c[2]-c[0])/b,o.height=(c[3]-c[1])/v,m&&(o.altTextData=m),o}serialize(e=!1,n=null){if(this.isEmpty())return null;const a={annotationType:Zt.STAMP,bitmapId:f(this,xn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:f(this,bs),structTreeParentId:this._structTreeParentId};if(e)return a.bitmapUrl=T(this,ie,my).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:o,altText:c}=this.altTextData;if(!o&&c&&(a.accessibilityData={type:"Figure",alt:c}),n===null)return a;n.stamps||(n.stamps=new Map);const h=f(this,bs)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(f(this,xn)))n.stamps.set(f(this,xn),{area:h,serialized:a}),a.bitmap=T(this,ie,my).call(this,!1);else if(f(this,bs)){const d=n.stamps.get(f(this,xn));h>d.area&&(d.area=h,d.serialized.bitmap.close(),d.serialized.bitmap=T(this,ie,my).call(this,!1))}return a}};En=new WeakMap,xn=new WeakMap,oo=new WeakMap,Zr=new WeakMap,lo=new WeakMap,ch=new WeakMap,Gs=new WeakMap,Jr=new WeakMap,Xs=new WeakMap,bs=new WeakMap,qp=new WeakMap,ie=new WeakSet,Kd=function(e,n=!1){if(!e){this.remove();return}x(this,En,e.bitmap),n||(x(this,xn,e.id),x(this,bs,e.isSvg)),e.file&&x(this,ch,e.file.name),T(this,ie,G_).call(this)},Wd=function(){x(this,oo,null),this._uiManager.enableWaiting(!1),f(this,Gs)&&this.div.focus()},gy=function(){if(f(this,xn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(f(this,xn)).then(a=>T(this,ie,Kd).call(this,a,!0)).finally(()=>T(this,ie,Wd).call(this));return}if(f(this,Zr)){const a=f(this,Zr);x(this,Zr,null),this._uiManager.enableWaiting(!0),x(this,oo,this._uiManager.imageManager.getFromUrl(a).then(o=>T(this,ie,Kd).call(this,o)).finally(()=>T(this,ie,Wd).call(this)));return}if(f(this,lo)){const a=f(this,lo);x(this,lo,null),this._uiManager.enableWaiting(!0),x(this,oo,this._uiManager.imageManager.getFromFile(a).then(o=>T(this,ie,Kd).call(this,o)).finally(()=>T(this,ie,Wd).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=ef.supportedTypesStr;const n=this._uiManager._signal;x(this,oo,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);T(this,ie,Kd).call(this,o)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>T(this,ie,Wd).call(this))),e.click()},G_=function(){const{div:e}=this;let{width:n,height:a}=f(this,En);const[o,c]=this.pageDimensions,h=.75;if(this.width)n=this.width*o,a=this.height*c;else if(n>h*o||a>h*c){const b=Math.min(h*o/n,h*c/a);n*=b,a*=b}const[d,p]=this.parentDimensions;this.setDims(n*d/o,a*p/c),this._uiManager.enableWaiting(!1);const m=x(this,Gs,document.createElement("canvas"));e.append(m),e.hidden=!1,T(this,ie,X_).call(this,n,a),T(this,ie,TM).call(this),f(this,qp)||(this.parent.addUndoableEditor(this),x(this,qp,!0)),this._reportTelemetry({action:"inserted_image"}),f(this,ch)&&m.setAttribute("aria-label",f(this,ch))},xM=function(e,n){var h;const[a,o]=this.parentDimensions;this.width=e/a,this.height=n/o,this.setDims(e,n),(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,f(this,Xs)!==null&&clearTimeout(f(this,Xs)),x(this,Xs,setTimeout(()=>{x(this,Xs,null),T(this,ie,X_).call(this,e,n)},200))},CM=function(e,n){const{width:a,height:o}=f(this,En);let c=a,h=o,d=f(this,En);for(;c>2*e||h>2*n;){const p=c,m=h;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const b=new OffscreenCanvas(c,h);b.getContext("2d").drawImage(d,0,0,p,m,0,0,c,h),d=b.transferToImageBitmap()}return d},X_=function(e,n){e=Math.ceil(e),n=Math.ceil(n);const a=f(this,Gs);if(!a||a.width===e&&a.height===n)return;a.width=e,a.height=n;const o=f(this,bs)?f(this,En):T(this,ie,CM).call(this,e,n);if(this._uiManager.hasMLManager&&!this.hasAltText()){const d=new OffscreenCanvas(e,n).getContext("2d");d.drawImage(o,0,0,o.width,o.height,0,0,e,n),this._uiManager.mlGuess({service:"image-to-text",request:{data:d.getImageData(0,0,e,n).data,width:e,height:n,channels:4}}).then(p=>{const m=(p==null?void 0:p.output)||"";this.parent&&m&&!this.hasAltText()&&(this.altTextData={altText:m,decorative:!1})})}const c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(o,0,0,o.width,o.height,0,0,e,n)},my=function(e){if(e){if(f(this,bs)){const o=this._uiManager.imageManager.getSvgUrl(f(this,xn));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=f(this,En),n.getContext("2d").drawImage(f(this,En),0,0),n.toDataURL()}if(f(this,bs)){const[n,a]=this.pageDimensions,o=Math.round(this.width*n*wo.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*wo.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,c);return h.getContext("2d").drawImage(f(this,En),0,0,f(this,En).width,f(this,En).height,0,0,o,c),h.transferToImageBitmap()}return structuredClone(f(this,En))},TM=function(){this._uiManager._signal&&(x(this,Jr,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&T(this,ie,xM).call(this,n.width,n.height)})),f(this,Jr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=f(this,Jr))==null||e.disconnect(),x(this,Jr,null)},{once:!0}))},Mt(ef,"_type","stamp"),Mt(ef,"_editorType",Zt.STAMP);let V_=ef;var Wl,uh,Ys,Ql,ta,ea,na,ki,co,hh,dh,qn,Et,uo,kn,kM,$_,K_,W_,yy;const ss=class ss{constructor({uiManager:t,pageIndex:e,div:n,accessibilityManager:a,annotationLayer:o,drawLayer:c,textLayer:h,viewport:d,l10n:p}){k(this,kn);k(this,Wl);k(this,uh,!1);k(this,Ys,null);k(this,Ql,null);k(this,ta,null);k(this,ea,null);k(this,na,null);k(this,ki,new Map);k(this,co,!1);k(this,hh,!1);k(this,dh,!1);k(this,qn,null);k(this,Et);const m=[...f(ss,uo).values()];if(!ss._initialized){ss._initialized=!0;for(const b of m)b.initialize(p,t)}t.registerEditorTypes(m),x(this,Et,t),this.pageIndex=e,this.div=n,x(this,Wl,a),x(this,Ys,o),this.viewport=d,x(this,qn,h),this.drawLayer=c,f(this,Et).addLayer(this)}get isEmpty(){return f(this,ki).size===0}get isInvisible(){return this.isEmpty&&f(this,Et).getMode()===Zt.NONE}updateToolbar(t){f(this,Et).updateToolbar(t)}updateMode(t=f(this,Et).getMode()){switch(T(this,kn,yy).call(this),t){case Zt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Zt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Zt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of f(ss,uo).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=f(this,qn))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(f(this,Et).getMode()!==Zt.INK)return;if(!t){for(const n of f(this,ki).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){f(this,Et).setEditingState(t)}addCommands(t){f(this,Et).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=f(this,Ys))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of f(this,ki).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(f(this,Et).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!f(this,Ys))return;const e=f(this,Ys).getEditableAnnotations();for(const n of e){if(n.hide(),f(this,Et).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}}disable(){var a;x(this,dh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of f(this,ki).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(a=this.getEditableAnnotation(o.annotationElementId))==null||a.show(),o.remove()}if(f(this,Ys)){const o=f(this,Ys).getEditableAnnotations();for(const c of o){const{id:h}=c.data;if(f(this,Et).isDeletedAnnotationElement(h))continue;let d=e.get(h);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=t.get(h),d&&(f(this,Et).addChangedExistingAnnotation(d),d.renderAnnotationElement(c),d.show(!1)),c.show()}}T(this,kn,yy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of f(ss,uo).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,dh,!1)}getEditableAnnotation(t){var e;return((e=f(this,Ys))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){f(this,Et).getActive()!==t&&f(this,Et).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=f(this,qn))!=null&&t.div&&!f(this,ea)&&(x(this,ea,T(this,kn,kM).bind(this)),f(this,qn).div.addEventListener("pointerdown",f(this,ea),{signal:f(this,Et)._signal}),f(this,qn).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=f(this,qn))!=null&&t.div&&f(this,ea)&&(f(this,qn).div.removeEventListener("pointerdown",f(this,ea)),x(this,ea,null),f(this,qn).div.classList.remove("highlighting"))}enableClick(){if(f(this,ta))return;const t=f(this,Et)._signal;x(this,ta,this.pointerdown.bind(this)),x(this,Ql,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",f(this,ta),{signal:t}),this.div.addEventListener("pointerup",f(this,Ql),{signal:t})}disableClick(){f(this,ta)&&(this.div.removeEventListener("pointerdown",f(this,ta)),this.div.removeEventListener("pointerup",f(this,Ql)),x(this,ta,null),x(this,Ql,null))}attach(t){f(this,ki).set(t.id,t);const{annotationElementId:e}=t;e&&f(this,Et).isDeletedAnnotationElement(e)&&f(this,Et).removeDeletedAnnotationElement(t)}detach(t){var e;f(this,ki).delete(t.id),(e=f(this,Wl))==null||e.removePointerInTextLayer(t.contentDiv),!f(this,dh)&&t.annotationElementId&&f(this,Et).addDeletedAnnotationElement(t)}remove(t){this.detach(t),f(this,Et).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,f(this,hh)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(f(this,Et).addDeletedAnnotationElement(t.annotationElementId),he.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),f(this,Et).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),f(this,Et).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!f(this,na)&&(t._focusEventsAllowed=!1,x(this,na,setTimeout(()=>{x(this,na,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:f(this,Et)._signal}),e.focus())},0))),t._structTreeParentId=(n=f(this,Wl))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return f(this,Et).getId()}get _signal(){return f(this,Et)._signal}canCreateNewEmptyEditor(){var t;return(t=f(this,kn,$_))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){f(this,Et).updateToolbar(t),f(this,Et).updateMode(t);const{offsetX:n,offsetY:a}=T(this,kn,W_).call(this),o=this.getNextId(),c=T(this,kn,K_).call(this,{parent:this,id:o,x:n,y:a,uiManager:f(this,Et),isCentered:!0,...e});c&&this.add(c)}deserialize(t){var e;return((e=f(ss,uo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,f(this,Et)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),o=T(this,kn,K_).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:f(this,Et),isCentered:e,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(T(this,kn,W_).call(this),!0)}setSelected(t){f(this,Et).setSelected(t)}toggleSelected(t){f(this,Et).toggleSelected(t)}isSelected(t){return f(this,Et).isSelected(t)}unselect(t){f(this,Et).unselect(t)}pointerup(t){const{isMac:e}=ri.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&f(this,co)){if(x(this,co,!1),!f(this,uh)){x(this,uh,!0);return}if(f(this,Et).getMode()===Zt.STAMP){f(this,Et).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(f(this,Et).getMode()===Zt.HIGHLIGHT&&this.enableTextSelection(),f(this,co)){x(this,co,!1);return}const{isMac:e}=ri.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;x(this,co,!0);const n=f(this,Et).getActive();x(this,uh,!n||n.isEmpty())}findNewParent(t,e,n){const a=f(this,Et).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}destroy(){var t,e;((t=f(this,Et).getActive())==null?void 0:t.parent)===this&&(f(this,Et).commitOrRemove(),f(this,Et).setActiveEditor(null)),f(this,na)&&(clearTimeout(f(this,na)),x(this,na,null));for(const n of f(this,ki).values())(e=f(this,Wl))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,f(this,ki).clear(),f(this,Et).removeLayer(this)}render({viewport:t}){this.viewport=t,sc(this.div,t);for(const e of f(this,Et).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){f(this,Et).commitOrRemove(),T(this,kn,yy).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,sc(this.div,{rotation:n}),e!==n)for(const a of f(this,ki).values())a.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return f(this,Et).viewParameters.realScale}};Wl=new WeakMap,uh=new WeakMap,Ys=new WeakMap,Ql=new WeakMap,ta=new WeakMap,ea=new WeakMap,na=new WeakMap,ki=new WeakMap,co=new WeakMap,hh=new WeakMap,dh=new WeakMap,qn=new WeakMap,Et=new WeakMap,uo=new WeakMap,kn=new WeakSet,kM=function(t){if(f(this,Et).unselectAll(),t.target===f(this,qn).div){const{isMac:e}=ri.platform;if(t.button!==0||t.ctrlKey&&e)return;f(this,Et).showAllEditors("highlight",!0,!0),f(this,qn).div.classList.add("free"),Fy.startHighlighting(this,f(this,Et).direction==="ltr",t),f(this,qn).div.addEventListener("pointerup",()=>{f(this,qn).div.classList.remove("free")},{once:!0,signal:f(this,Et)._signal}),t.preventDefault()}},$_=function(){return f(ss,uo).get(f(this,Et).getMode())},K_=function(t){const e=f(this,kn,$_);return e?new e.prototype.constructor(t):null},W_=function(){const{x:t,y:e,width:n,height:a}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,e),h=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+a),p=(o+h)/2-t,m=(c+d)/2-e,[b,v]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:b,offsetY:v}},yy=function(){x(this,hh,!0);for(const t of f(this,ki).values())t.isEmpty()&&t.remove();x(this,hh,!1)},Mt(ss,"_initialized",!1),k(ss,uo,new Map([C_,P_,V_,Fy].map(t=>[t._editorType,t])));let Y_=ss;var $s,Vp,tn,ho,Gp,Z_,cc,J_,RM;const vn=class vn{constructor({pageIndex:t}){k(this,cc);k(this,$s,null);k(this,Vp,0);k(this,tn,new Map);k(this,ho,new Map);this.pageIndex=t}setParent(t){if(!f(this,$s)){x(this,$s,t);return}if(f(this,$s)!==t){if(f(this,tn).size>0)for(const e of f(this,tn).values())e.remove(),t.append(e);x(this,$s,t)}}static get _svgFactory(){return te(this,"_svgFactory",new zA)}highlight(t,e,n,a=!1){const o=mi(this,Vp)._++,c=T(this,cc,J_).call(this,t.box);c.classList.add("highlight"),t.free&&c.classList.add("free");const h=vn._svgFactory.createElement("defs");c.append(h);const d=vn._svgFactory.createElement("path");h.append(d);const p=`path_p${this.pageIndex}_${o}`;d.setAttribute("id",p),d.setAttribute("d",t.toSVGPath()),a&&f(this,ho).set(o,d);const m=T(this,cc,RM).call(this,h,p),b=vn._svgFactory.createElement("use");return c.append(b),c.setAttribute("fill",e),c.setAttribute("fill-opacity",n),b.setAttribute("href",`#${p}`),f(this,tn).set(o,c),{id:o,clipPathId:`url(#${m})`}}highlightOutline(t){const e=mi(this,Vp)._++,n=T(this,cc,J_).call(this,t.box);n.classList.add("highlightOutline");const a=vn._svgFactory.createElement("defs");n.append(a);const o=vn._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${e}`;o.setAttribute("id",c),o.setAttribute("d",t.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(t.free){n.classList.add("free");const m=vn._svgFactory.createElement("mask");a.append(m),h=`mask_p${this.pageIndex}_${e}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const b=vn._svgFactory.createElement("rect");m.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=vn._svgFactory.createElement("use");m.append(v),v.setAttribute("href",`#${c}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=vn._svgFactory.createElement("use");n.append(d),d.setAttribute("href",`#${c}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return n.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),f(this,tn).set(e,n),e}finalizeLine(t,e){const n=f(this,ho).get(t);f(this,ho).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){f(this,tn).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),f(this,ho).delete(t)}updatePath(t,e){f(this,ho).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;T(n=vn,Gp,Z_).call(n,f(this,tn).get(t),e)}show(t,e){f(this,tn).get(t).classList.toggle("hidden",!e)}rotate(t,e){f(this,tn).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){f(this,tn).get(t).setAttribute("fill",e)}changeOpacity(t,e){f(this,tn).get(t).setAttribute("fill-opacity",e)}addClass(t,e){f(this,tn).get(t).classList.add(e)}removeClass(t,e){f(this,tn).get(t).classList.remove(e)}remove(t){f(this,$s)!==null&&(f(this,tn).get(t).remove(),f(this,tn).delete(t))}destroy(){x(this,$s,null);for(const t of f(this,tn).values())t.remove();f(this,tn).clear()}};$s=new WeakMap,Vp=new WeakMap,tn=new WeakMap,ho=new WeakMap,Gp=new WeakSet,Z_=function(t,{x:e=0,y:n=0,width:a=1,height:o=1}={}){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*o}%`},cc=new WeakSet,J_=function(t){var n;const e=vn._svgFactory.create(1,1,!0);return f(this,$s).append(e),e.setAttribute("aria-hidden",!0),T(n=vn,Gp,Z_).call(n,e,t),e},RM=function(t,e){const n=vn._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const o=vn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a},k(vn,Gp);let Q_=vn;var TU=kt.AbortException,kU=kt.AnnotationEditorLayer,RU=kt.AnnotationEditorParamsType,MU=kt.AnnotationEditorType,LU=kt.AnnotationEditorUIManager,MM=kt.AnnotationLayer,LM=kt.AnnotationMode,DU=kt.CMapCompressionType,NU=kt.ColorPicker,OU=kt.DOMSVGFactory,jU=kt.DrawLayer,zU=kt.FeatureTest,VA=kt.GlobalWorkerOptions,PU=kt.ImageKind,FU=kt.InvalidPDFException,IU=kt.MissingPDFException,BU=kt.OPS,UU=kt.Outliner,HU=kt.PDFDataRangeTransport,qU=kt.PDFDateString,VU=kt.PDFWorker,GU=kt.PasswordResponses,XU=kt.PermissionFlag,YU=kt.PixelsPerInch,$U=kt.RenderingCancelledException,DM=kt.TextLayer,KU=kt.UnexpectedResponseException,WU=kt.Util,QU=kt.VerbosityLevel,ZU=kt.XfaLayer,JU=kt.build,t5=kt.createValidAbsoluteUrl,e5=kt.fetchData,NM=kt.getDocument,n5=kt.getFilenameFromUrl,i5=kt.getPdfFilenameFromUrl,s5=kt.getXfaPageViewport,r5=kt.isDataScheme,a5=kt.isPdfFile,o5=kt.noContextMenu,l5=kt.normalizeUnicode,c5=kt.renderTextLayer,u5=kt.setLayerDimensions,h5=kt.shadow,d5=kt.updateTextLayer,f5=kt.version;const p5=Object.freeze(Object.defineProperty({__proto__:null,AbortException:TU,AnnotationEditorLayer:kU,AnnotationEditorParamsType:RU,AnnotationEditorType:MU,AnnotationEditorUIManager:LU,AnnotationLayer:MM,AnnotationMode:LM,CMapCompressionType:DU,ColorPicker:NU,DOMSVGFactory:OU,DrawLayer:jU,FeatureTest:zU,GlobalWorkerOptions:VA,ImageKind:PU,InvalidPDFException:FU,MissingPDFException:IU,OPS:BU,Outliner:UU,PDFDataRangeTransport:HU,PDFDateString:qU,PDFWorker:VU,PasswordResponses:GU,PermissionFlag:XU,PixelsPerInch:YU,RenderingCancelledException:$U,TextLayer:DM,UnexpectedResponseException:KU,Util:WU,VerbosityLevel:QU,XfaLayer:ZU,build:JU,createValidAbsoluteUrl:t5,fetchData:e5,getDocument:NM,getFilenameFromUrl:n5,getPdfFilenameFromUrl:i5,getXfaPageViewport:s5,isDataScheme:r5,isPdfFile:a5,noContextMenu:o5,normalizeUnicode:l5,renderTextLayer:c5,setLayerDimensions:u5,shadow:h5,updateTextLayer:d5,version:f5},Symbol.toStringTag,{value:"Module"}));var cn=function(r,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))},g5=["onCopy","onCut","onPaste"],m5=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],y5=["onFocus","onBlur"],b5=["onInput","onInvalid","onReset","onSubmit"],v5=["onLoad","onError"],w5=["onKeyDown","onKeyPress","onKeyUp"],_5=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],A5=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],S5=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],E5=["onSelect"],x5=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],C5=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],T5=["onScroll"],k5=["onWheel"],R5=["onAnimationStart","onAnimationEnd","onAnimationIteration"],M5=["onTransitionEnd"],L5=["onToggle"],D5=["onChange"],N5=cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn(cn([],g5,!0),m5,!0),y5,!0),b5,!0),v5,!0),w5,!0),_5,!0),A5,!0),S5,!0),E5,!0),x5,!0),C5,!0),T5,!0),k5,!0),R5,!0),M5,!0),D5,!0),L5,!0);function OM(r,t){var e={};return N5.forEach(function(n){var a=r[n];a&&(t?e[n]=(function(o){return a(o,t(n))}):e[n]=a)}),e}function sg(r){var t=!1,e=new Promise(function(n,a){r.then(function(o){return!t&&n(o)}).catch(function(o){return!t&&a(o)})});return{promise:e,cancel:function(){t=!0}}}var O5="Invariant failed";function _e(r,t){if(!r)throw new Error(O5)}var ww,wT;function j5(){if(wT)return ww;wT=1;var r=function(){};return ww=r,ww}var z5=j5();const Pn=OT(z5);var _T=Object.prototype.hasOwnProperty;function AT(r,t,e){for(e of r.keys())if(mu(e,t))return e}function mu(r,t){var e,n,a;if(r===t)return!0;if(r&&t&&(e=r.constructor)===t.constructor){if(e===Date)return r.getTime()===t.getTime();if(e===RegExp)return r.toString()===t.toString();if(e===Array){if((n=r.length)===t.length)for(;n--&&mu(r[n],t[n]););return n===-1}if(e===Set){if(r.size!==t.size)return!1;for(n of r)if(a=n,a&&typeof a=="object"&&(a=AT(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(r.size!==t.size)return!1;for(n of r)if(a=n[0],a&&typeof a=="object"&&(a=AT(t,a),!a)||!mu(n[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)r=new Uint8Array(r),t=new Uint8Array(t);else if(e===DataView){if((n=r.byteLength)===t.byteLength)for(;n--&&r.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===t.byteLength)for(;n--&&r[n]===t[n];);return n===-1}if(!e||typeof r=="object"){n=0;for(e in r)if(_T.call(r,e)&&++n&&!_T.call(t,e)||!(e in t)||!mu(r[e],t[e]))return!1;return Object.keys(t).length===n}}return r!==r&&t!==t}const jM=L.createContext(null);function yu({children:r,type:t}){return E.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:r})}const P5="noopener noreferrer nofollow";class F5{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return _e(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){_e(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{_e(this.pdfDocument),_e(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{_e(Array.isArray(e));const n=e[0];new Promise(a=>{_e(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{a(o)}).catch(()=>{_e(!1)}):typeof n=="number"?a(n):_e(!1)}).then(a=>{const o=a+1;_e(this.pdfViewer),_e(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;_e(this.pdfViewer),_e(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||P5,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const ST={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Tb=typeof window<"u",zM=Tb&&window.location.protocol==="file:";function I5(r){return typeof r<"u"}function Ko(r){return I5(r)&&r!==null}function B5(r){return typeof r=="string"}function U5(r){return r instanceof ArrayBuffer}function H5(r){return _e(Tb),r instanceof Blob}function tA(r){return B5(r)&&/^data:/.test(r)}function ET(r){_e(tA(r));const[t="",e=""]=r.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function q5(){return Tb&&window.devicePixelRatio||1}const PM="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function xT(){Pn(!zM,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${PM}`)}function V5(){Pn(!zM,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${PM}`)}function oc(r){r!=null&&r.cancel&&r.cancel()}function eA(r,t){return Object.defineProperty(r,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(r,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(r,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(r,"originalHeight",{get(){return this.view[3]},configurable:!0}),r}function G5(r){return r.name==="RenderingCancelledException"}function X5(r){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(r)})}function Y5(r,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return r}}function vh(){return L.useReducer(Y5,{value:void 0,error:void 0})}var $5=function(r,t,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return new(e||(e=Promise))(function(o,c){function h(m){try{p(n.next(m))}catch(b){c(b)}}function d(m){try{p(n.throw(m))}catch(b){c(b)}}function p(m){m.done?o(m.value):a(m.value).then(h,d)}p((n=n.apply(r,t||[])).next())})},CT=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const{PDFDataRangeTransport:K5}=p5,W5=(r,t)=>{switch(t){case ST.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");r(e);break}case ST.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");r(e);break}}};function TT(r){return typeof r=="object"&&r!==null&&("data"in r||"range"in r||"url"in r)}const Q5=L.forwardRef(function(t,e){var{children:n,className:a,error:o="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:h,file:d,inputRef:p,imageResourcesPath:m,loading:b="Loading PDF",noData:v="No PDF file specified.",onItemClick:w,onLoadError:A,onLoadProgress:S,onLoadSuccess:R,onPassword:M=W5,onSourceError:D,onSourceSuccess:O,options:I,renderMode:U,rotate:P}=t,H=CT(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[K,tt]=vh(),{value:nt,error:rt}=K,[mt,At]=vh(),{value:dt,error:st}=mt,F=L.useRef(new F5),G=L.useRef([]),V=L.useRef(void 0),xt=L.useRef(void 0);d&&d!==V.current&&TT(d)&&(Pn(!mu(d,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=d),I&&I!==xt.current&&(Pn(!mu(I,xt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),xt.current=I);const Tt=L.useRef({scrollPageIntoView:se=>{const{dest:Qt,pageNumber:Ne,pageIndex:ke=Ne-1}=se;if(w){w({dest:Qt,pageIndex:ke,pageNumber:Ne});return}const Ss=G.current[ke];if(Ss){Ss.scrollIntoView();return}Pn(!1,`An internal link leading to page ${Ne} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});L.useImperativeHandle(e,()=>({linkService:F,pages:G,viewer:Tt}),[]);function N(){O&&O()}function q(){rt&&(Pn(!1,rt.toString()),D&&D(rt))}function Q(){tt({type:"RESET"})}L.useEffect(Q,[d,tt]);const it=L.useCallback(()=>$5(this,void 0,void 0,function*(){if(!d)return null;if(typeof d=="string")return tA(d)?{data:ET(d)}:(xT(),{url:d});if(d instanceof K5)return{range:d};if(U5(d))return{data:d};if(Tb&&H5(d))return{data:yield X5(d)};if(_e(typeof d=="object"),_e(TT(d)),"url"in d&&typeof d.url=="string"){if(tA(d.url)){const{url:se}=d,Qt=CT(d,["url"]),Ne=ET(se);return Object.assign({data:Ne},Qt)}xT()}return d}),[d]);L.useEffect(()=>{const se=sg(it());return se.promise.then(Qt=>{tt({type:"RESOLVE",value:Qt})}).catch(Qt=>{tt({type:"REJECT",error:Qt})}),()=>{oc(se)}},[it,tt]),L.useEffect(()=>{if(!(typeof nt>"u")){if(nt===!1){q();return}N()}},[nt]);function ht(){dt&&(R&&R(dt),G.current=new Array(dt.numPages),F.current.setDocument(dt))}function bt(){st&&(Pn(!1,st.toString()),A&&A(st))}L.useEffect(function(){At({type:"RESET"})},[At,nt]),L.useEffect(function(){if(!nt)return;const Qt=I?Object.assign(Object.assign({},nt),I):nt,Ne=NM(Qt);S&&(Ne.onProgress=S),M&&(Ne.onPassword=M);const ke=Ne,Ss=ke.promise.then(Es=>{At({type:"RESOLVE",value:Es})}).catch(Es=>{ke.destroyed||At({type:"REJECT",error:Es})});return()=>{Ss.finally(()=>ke.destroy())}},[I,At,nt]),L.useEffect(()=>{if(!(typeof dt>"u")){if(dt===!1){bt();return}ht()}},[dt]),L.useEffect(function(){F.current.setViewer(Tt.current),F.current.setExternalLinkRel(c),F.current.setExternalLinkTarget(h)},[c,h]);const ot=L.useCallback((se,Qt)=>{G.current[se]=Qt},[]),Pt=L.useCallback(se=>{delete G.current[se]},[]),Ot=L.useMemo(()=>({imageResourcesPath:m,linkService:F.current,onItemClick:w,pdf:dt,registerPage:ot,renderMode:U,rotate:P,unregisterPage:Pt}),[m,w,dt,ot,U,P,Pt]),Bt=L.useMemo(()=>OM(H,()=>dt),[H,dt]);function Rn(){return E.jsx(jM.Provider,{value:Ot,children:n})}function Mn(){return d?dt==null?E.jsx(yu,{type:"loading",children:typeof b=="function"?b():b}):dt===!1?E.jsx(yu,{type:"error",children:typeof o=="function"?o():o}):Rn():E.jsx(yu,{type:"no-data",children:typeof v=="function"?v():v})}return E.jsx("div",Object.assign({className:Eh("react-pdf__Document",a),ref:p,style:{"--scale-factor":"1"}},Bt,{children:Mn()}))});function FM(){return L.useContext(jM)}function IM(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(o){e.forEach(function(c){typeof c=="function"?c(o):c&&(c.current=o)})}}const BM=L.createContext(null),UM={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Z5=/^H(\d+)$/;function J5(r){return r in UM}function kb(r){return"children"in r}function HM(r){return kb(r)?r.children.length===1&&0 in r.children&&"id"in r.children[0]:!1}function tH(r){const t={};if(kb(r)){const{role:e}=r,n=e.match(Z5);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(J5(e)){const a=UM[e];a&&(t.role=a)}}return t}function qM(r){const t={};if(kb(r)){if(r.alt!==void 0&&(t["aria-label"]=r.alt),r.lang!==void 0&&(t.lang=r.lang),HM(r)){const[e]=r.children;if(e){const n=qM(e);return Object.assign(Object.assign({},t),n)}}}else"id"in r&&(t["aria-owns"]=r.id);return t}function eH(r){return r?Object.assign(Object.assign({},tH(r)),qM(r)):null}function VM({className:r,node:t}){const e=L.useMemo(()=>eH(t),[t]),n=L.useMemo(()=>!kb(t)||HM(t)?null:t.children.map((a,o)=>E.jsx(VM,{node:a},o)),[t]);return E.jsx("span",Object.assign({className:r},e,{children:n}))}function Rb(){return L.useContext(BM)}function nH(){const r=Rb();_e(r);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=r,[n,a]=vh(),{value:o,error:c}=n,{customTextRenderer:h,page:d}=r;function p(){o&&e&&e(o)}function m(){c&&(Pn(!1,c.toString()),t&&t(c))}return L.useEffect(function(){a({type:"RESET"})},[a,d]),L.useEffect(function(){if(h||!d)return;const v=sg(d.getStructTree()),w=v;return v.promise.then(A=>{a({type:"RESOLVE",value:A})}).catch(A=>{a({type:"REJECT",error:A})}),()=>oc(w)},[h,d,a]),L.useEffect(()=>{if(o!==void 0){if(o===!1){m();return}p()}},[o]),o?E.jsx(VM,{className:"react-pdf__Page__structTree structTree",node:o}):null}const kT=LM;function iH(r){const t=Rb();_e(t);const e=Object.assign(Object.assign({},t),r),{_className:n,canvasBackground:a,devicePixelRatio:o=q5(),onRenderError:c,onRenderSuccess:h,page:d,renderForms:p,renderTextLayer:m,rotate:b,scale:v}=e,{canvasRef:w}=r;_e(d);const A=L.useRef(null);function S(){d&&h&&h(eA(d,v))}function R(I){G5(I)||(Pn(!1,I.toString()),c&&c(I))}const M=L.useMemo(()=>d.getViewport({scale:v*o,rotation:b}),[o,d,b,v]),D=L.useMemo(()=>d.getViewport({scale:v,rotation:b}),[d,b,v]);L.useEffect(function(){if(!d)return;d.cleanup();const{current:U}=A;if(!U)return;U.width=M.width,U.height=M.height,U.style.width=`${Math.floor(D.width)}px`,U.style.height=`${Math.floor(D.height)}px`,U.style.visibility="hidden";const P={annotationMode:p?kT.ENABLE_FORMS:kT.ENABLE,canvasContext:U.getContext("2d",{alpha:!1}),viewport:M};a&&(P.background=a);const H=d.render(P),K=H;return H.promise.then(()=>{U.style.visibility="",S()}).catch(R),()=>oc(K)},[a,d,p,M,D]);const O=L.useCallback(()=>{const{current:I}=A;I&&(I.width=0,I.height=0)},[]);return L.useEffect(()=>O,[O]),E.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:IM(w,A),style:{display:"block",userSelect:"none"},children:m?E.jsx(nH,{}):null})}function sH(r){return"str"in r}function rH(){const r=Rb();_e(r);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:c,pageIndex:h,pageNumber:d,rotate:p,scale:m}=r;_e(c);const[b,v]=vh(),{value:w,error:A}=b,S=L.useRef(null),R=L.useRef(void 0);Pn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function M(){w&&n&&n(w)}function D(){A&&(Pn(!1,A.toString()),e&&e(A))}L.useEffect(function(){v({type:"RESET"})},[c,v]),L.useEffect(function(){if(!c)return;const tt=sg(c.getTextContent()),nt=tt;return tt.promise.then(rt=>{v({type:"RESOLVE",value:rt})}).catch(rt=>{v({type:"REJECT",error:rt})}),()=>oc(nt)},[c,v]),L.useEffect(()=>{if(w!==void 0){if(w===!1){D();return}M()}},[w]);const O=L.useCallback(()=>{o&&o()},[o]),I=L.useCallback(K=>{Pn(!1,K.toString()),a&&a(K)},[a]);function U(){const K=R.current;K&&K.classList.add("active")}function P(){const K=R.current;K&&K.classList.remove("active")}const H=L.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return L.useLayoutEffect(function(){if(!c||!w)return;const{current:tt}=S;if(!tt)return;tt.innerHTML="";const nt=c.streamTextContent({includeMarkedContent:!0}),rt={container:tt,textContentSource:nt,viewport:H},mt=new DM(rt),At=mt;return mt.render().then(()=>{const dt=document.createElement("div");dt.className="endOfContent",tt.append(dt),R.current=dt;const st=tt.querySelectorAll('[role="presentation"]');if(t){let F=0;w.items.forEach((G,V)=>{if(!sH(G))return;const xt=st[F];if(!xt)return;const Tt=t(Object.assign({pageIndex:h,pageNumber:d,itemIndex:V},G));xt.innerHTML=Tt,F+=G.str&&G.hasEOL?2:1})}O()}).catch(I),()=>oc(At)},[t,I,O,c,h,d,w,H]),E.jsx("div",{className:Eh("react-pdf__Page__textContent","textLayer"),onMouseUp:P,onMouseDown:U,ref:S})}function aH(){const r=FM(),t=Rb();_e(t);const e=Object.assign(Object.assign({},r),t),{imageResourcesPath:n,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:d,page:p,pdf:m,renderForms:b,rotate:v,scale:w=1}=e;_e(m),_e(p),_e(a);const[A,S]=vh(),{value:R,error:M}=A,D=L.useRef(null);Pn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function O(){R&&c&&c(R)}function I(){M&&(Pn(!1,M.toString()),o&&o(M))}L.useEffect(function(){S({type:"RESET"})},[S,p]),L.useEffect(function(){if(!p)return;const tt=sg(p.getAnnotations()),nt=tt;return tt.promise.then(rt=>{S({type:"RESOLVE",value:rt})}).catch(rt=>{S({type:"REJECT",error:rt})}),()=>{oc(nt)}},[S,p]),L.useEffect(()=>{if(R!==void 0){if(R===!1){I();return}O()}},[R]);function U(){d&&d()}function P(K){Pn(!1,`${K}`),h&&h(K)}const H=L.useMemo(()=>p.getViewport({scale:w,rotation:v}),[p,v,w]);return L.useEffect(function(){if(!m||!p||!a||!R)return;const{current:tt}=D;if(!tt)return;const nt=H.clone({dontFlip:!0}),rt={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:tt,l10n:null,page:p,viewport:nt},mt={annotations:R,annotationStorage:m.annotationStorage,div:tt,imageResourcesPath:n,linkService:a,page:p,renderForms:b,viewport:nt};tt.innerHTML="";try{new MM(rt).render(mt),U()}catch(At){P(At)}return()=>{}},[R,n,a,p,m,b,H]),E.jsx("div",{className:Eh("react-pdf__Page__annotations","annotationLayer"),ref:D})}var oH=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const RT=1;function lH(r){const t=FM(),e=Object.assign(Object.assign({},t),r),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:c,children:h,className:d,customRenderer:p,customTextRenderer:m,devicePixelRatio:b,error:v="Failed to load the page.",height:w,inputRef:A,loading:S="Loading page",noData:R="No page specified.",onGetAnnotationsError:M,onGetAnnotationsSuccess:D,onGetStructTreeError:O,onGetStructTreeSuccess:I,onGetTextError:U,onGetTextSuccess:P,onLoadError:H,onLoadSuccess:K,onRenderAnnotationLayerError:tt,onRenderAnnotationLayerSuccess:nt,onRenderError:rt,onRenderSuccess:mt,onRenderTextLayerError:At,onRenderTextLayerSuccess:dt,pageIndex:st,pageNumber:F,pdf:G,registerPage:V,renderAnnotationLayer:xt=!0,renderForms:Tt=!1,renderMode:N="canvas",renderTextLayer:q=!0,rotate:Q,scale:it=RT,unregisterPage:ht,width:bt}=e,ot=oH(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Pt,Ot]=vh(),{value:Bt,error:Rn}=Pt,Mn=L.useRef(null);_e(G);const se=Ko(F)?F-1:st??null,Qt=F??(Ko(st)?st+1:null),Ne=Q??(Bt?Bt.rotate:null),ke=L.useMemo(()=>{if(!Bt)return null;let lt=1;const wt=it??RT;if(bt||w){const jt=Bt.getViewport({scale:1,rotation:Ne});bt?lt=bt/jt.width:w&&(lt=w/jt.height)}return wt*lt},[w,Bt,Ne,it,bt]);L.useEffect(function(){return()=>{Ko(se)&&a&&ht&&ht(se)}},[a,G,se,ht]);function Ss(){if(K){if(!Bt||!ke)return;K(eA(Bt,ke))}if(a&&V){if(!Ko(se)||!Mn.current)return;V(se,Mn.current)}}function Es(){Rn&&(Pn(!1,Rn.toString()),H&&H(Rn))}L.useEffect(function(){Ot({type:"RESET"})},[Ot,G,se]),L.useEffect(function(){if(!G||!Qt)return;const wt=sg(G.getPage(Qt)),jt=wt;return wt.promise.then(re=>{Ot({type:"RESOLVE",value:re})}).catch(re=>{Ot({type:"REJECT",error:re})}),()=>oc(jt)},[Ot,G,Qt]),L.useEffect(()=>{if(Bt!==void 0){if(Bt===!1){Es();return}Ss()}},[Bt,ke]);const Co=L.useMemo(()=>Bt&&Ko(se)&&Qt&&Ko(Ne)&&Ko(ke)?{_className:n,canvasBackground:o,customTextRenderer:m,devicePixelRatio:b,onGetAnnotationsError:M,onGetAnnotationsSuccess:D,onGetStructTreeError:O,onGetStructTreeSuccess:I,onGetTextError:U,onGetTextSuccess:P,onRenderAnnotationLayerError:tt,onRenderAnnotationLayerSuccess:nt,onRenderError:rt,onRenderSuccess:mt,onRenderTextLayerError:At,onRenderTextLayerSuccess:dt,page:Bt,pageIndex:se,pageNumber:Qt,renderForms:Tt,renderTextLayer:q,rotate:Ne,scale:ke}:null,[n,o,m,b,M,D,O,I,U,P,tt,nt,rt,mt,At,dt,Bt,se,Qt,Tt,q,Ne,ke]),To=L.useMemo(()=>OM(ot,()=>Bt&&(ke?eA(Bt,ke):void 0)),[ot,Bt,ke]),xs=`${se}@${ke}/${Ne}`;function Dh(){switch(N){case"custom":return _e(p),E.jsx(p,{},`${xs}_custom`);case"none":return null;case"canvas":default:return E.jsx(iH,{canvasRef:c},`${xs}_canvas`)}}function Nh(){return q?E.jsx(rH,{},`${xs}_text`):null}function an(){return xt?E.jsx(aH,{},`${xs}_annotations`):null}function Oh(){return E.jsxs(BM.Provider,{value:Co,children:[Dh(),Nh(),an(),h]})}function at(){return Qt?G===null||Bt===void 0||Bt===null?E.jsx(yu,{type:"loading",children:typeof S=="function"?S():S}):G===!1||Bt===!1?E.jsx(yu,{type:"error",children:typeof v=="function"?v():v}):Oh():E.jsx(yu,{type:"no-data",children:typeof R=="function"?R():R})}return E.jsx("div",Object.assign({className:Eh(n,d),"data-page-number":Qt,ref:IM(A,Mn),style:{"--scale-factor":`${ke}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},To,{children:at()}))}V5();VA.workerSrc="pdf.worker.mjs";VA.workerSrc=new URL("/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();function cH({pdfUrl:r}){const[t,e]=L.useState(0),[n,a]=L.useState(1),[o,c]=L.useState(1),[h,d]=L.useState(null);function p({numPages:S}){console.log("[PDFViewer] PDF loaded successfully, pages:",S),e(S),a(1),d(null)}function m(S){console.error("[PDFViewer] Failed to load PDF:",S),d(S.message||"Failed to load PDF")}const b=()=>{a(S=>Math.max(S-1,1))},v=()=>{a(S=>Math.min(S+1,t))},w=()=>{c(S=>Math.min(S+.2,3))},A=()=>{c(S=>Math.max(S-.2,.5))};return E.jsxs("div",{className:"w-full h-full flex flex-col bg-gray-50 dark:bg-gray-900",children:[E.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-100 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-700",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Te,{variant:"ghost",size:"sm",onClick:b,disabled:n<=1,children:E.jsx(dk,{className:"h-4 w-4"})}),E.jsxs("span",{className:"text-sm text-muted-foreground",children:[n," / ",t||""]}),E.jsx(Te,{variant:"ghost",size:"sm",onClick:v,disabled:n>=t,children:E.jsx(Kj,{className:"h-4 w-4"})})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Te,{variant:"ghost",size:"sm",onClick:A,disabled:o<=.5,children:E.jsx(P3,{className:"h-4 w-4"})}),E.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(o*100),"%"]}),E.jsx(Te,{variant:"ghost",size:"sm",onClick:w,disabled:o>=3,children:E.jsx(j3,{className:"h-4 w-4"})})]})]}),E.jsx("div",{className:"flex-1 overflow-auto flex items-start justify-center p-4",children:h?E.jsxs("div",{className:"text-center p-8",children:[E.jsx("div",{className:"text-destructive text-lg mb-2",children:"Failed to load PDF"}),E.jsx("div",{className:"text-sm text-muted-foreground",children:h}),E.jsxs("div",{className:"text-xs text-muted-foreground mt-4",children:["URL: ",r.substring(0,50),"..."]})]}):E.jsx(Q5,{file:r,onLoadSuccess:p,onLoadError:m,loading:E.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[E.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-2"}),E.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading PDF..."})]}),error:E.jsx("div",{className:"text-center p-8 text-destructive",children:"Error rendering PDF"}),children:E.jsx(lH,{pageNumber:n,scale:o,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-lg"})})})]})}const uH="https://heytex.truyenthong.edu.vn";function hH(){const{projectId:r}=QN(),t=Sh(),{user:e}=uc(),{currentProject:n,setCurrentProject:a,currentFile:o,setCurrentFile:c,files:h,setFiles:d,openFiles:p,addOpenFile:m,removeOpenFile:b,isSidebarOpen:v,toggleSidebar:w,isPreviewOpen:A,togglePreview:S,theme:R,toggleTheme:M,compilationStatus:D,compilationError:O,setCompilationStatus:I,pdfData:U,setPdfData:P,updateFileContent:H}=WT(),[K,tt]=L.useState(!0),[nt,rt]=L.useState(!1),[mt,At]=L.useState(new Set(["/"])),[dt,st]=L.useState([]),[F,G]=L.useState(!1),[V,xt]=L.useState(null),[Tt,N]=L.useState(256),[q,Q]=L.useState(50),[it,ht]=L.useState(null),bt=L.useRef(null),ot=L.useRef(null),Pt=L.useRef(null),Ot=L.useRef(null),Bt=L.useRef(null);L.useEffect(()=>{if(!r)return;(async()=>{var lt;try{const{project:wt}=await Cn.getProject(r);a(wt),d(wt.files||[]);const jt=(lt=wt.files)==null?void 0:lt.find(re=>re.path===`/${wt.mainFile}`);jt&&m(jt)}catch(wt){console.error("Failed to load project:",wt),t("/dashboard")}finally{tt(!1)}})()},[r]),L.useEffect(()=>{if(!o||!n||!e)return;const at=Um(uH,{path:"/collab",transports:["websocket"]});bt.current=at;const lt=new Mh;Pt.current=lt;const wt=`project:${n.id}:${o.path}`;return at.on("connect",()=>{console.log("Connected to collaboration server"),at.emit("join-room",{docName:wt,user:{id:e.id,name:e.name}})}),at.on("sync",jt=>{console.log("Received sync message")}),at.on("update",jt=>{v4(lt,new Uint8Array(jt))}),at.on("user-joined",jt=>{st(re=>re.find(Yn=>Yn.id===jt.id)?re:[...re,jt])}),at.on("user-left",jt=>{st(re=>re.filter(Yn=>Yn.id!==jt))}),()=>{at.disconnect(),bt.current=null,Pt.current=null}},[o==null?void 0:o.id,n==null?void 0:n.id,e]);const Rn=(at,lt)=>{Ot.current=at,lt.languages.register({id:"latex"}),lt.languages.register({id:"typst"}),lt.languages.setMonarchTokensProvider("latex",{tokenizer:{root:[[/\\[a-zA-Z@]+/,"keyword"],[/\\[^a-zA-Z@]/,"keyword"],[/%.*$/,"comment"],[/\{/,"delimiter.curly"],[/\}/,"delimiter.curly"],[/\[/,"delimiter.square"],[/\]/,"delimiter.square"],[/\$\$/,"string","@displaymath"],[/\$/,"string","@inlinemath"],[/\\begin\{[^}]+\}/,"keyword.control"],[/\\end\{[^}]+\}/,"keyword.control"]],inlinemath:[[/[^$]+/,"string"],[/\$/,"string","@pop"]],displaymath:[[/[^$]+/,"string"],[/\$\$/,"string","@pop"]]}}),lt.languages.setMonarchTokensProvider("typst",{tokenizer:{root:[[/#[a-zA-Z]+/,"keyword"],[/\/\/.*$/,"comment"],[/\/\*/,"comment","@comment"],[/\[/,"delimiter.square"],[/\]/,"delimiter.square"],[/\{/,"delimiter.curly"],[/\}/,"delimiter.curly"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"]],comment:[[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/"/,"string","@pop"]]}}),o!=null&&o.content&&at.setValue(o.content)},Mn=at=>{var lt;if(!(!o||at===void 0)&&(H(o.id,at),Bt.current&&clearTimeout(Bt.current),Bt.current=setTimeout(async()=>{await Ne(o.id,at)},1500),Pt.current&&((lt=bt.current)!=null&&lt.connected))){const wt=A4(Pt.current);bt.current.emit("update",wt)}},se=L.useRef(null),Qt=L.useRef(null);L.useRef(null),L.useEffect(()=>((async()=>{console.log(" [HeyTeX v2] Skipping WASM XeTeX/Dvipdfmx engines; using server-side TeXLive compilation");try{const{TypstCompilerEngine:lt}=await nl(async()=>{const{TypstCompilerEngine:jt}=await import("./TypstCompilerEngine-pRJlCa9l.js");return{TypstCompilerEngine:jt}},[]),wt=new lt;Qt.current=wt,console.log("TypstCompilerEngine initialized")}catch(lt){console.error("Failed to init TypstCompilerEngine:",lt)}})(),()=>{se.current,Qt.current&&Qt.current.terminate()}),[]),L.useEffect(()=>{if((n==null?void 0:n.engine)!=="LATEX")return;const at=async()=>{try{const{compilationAPI:wt}=await nl(async()=>{const{compilationAPI:re}=await import("./compilation-P31Xcf3s.js");return{compilationAPI:re}},[]),jt=await wt.getStats();xt(jt.stats)}catch(wt){console.error("[Queue Stats] Failed to fetch:",wt)}};at();const lt=setInterval(at,3e3);return()=>clearInterval(lt)},[n==null?void 0:n.engine]);const Ne=async(at,lt)=>{rt(!0);try{await Cn.updateFile(at,{content:lt})}catch(wt){console.error("Failed to save:",wt)}finally{rt(!1)}},ke=async()=>{if(o!=null&&o.content){I("compiling");try{if(((n==null?void 0:n.engine)||"LATEX")==="TYPST"){if(!Qt.current)throw new Error("Typst engine not ready");const lt=await Qt.current.compile("main.typ",{"main.typ":o.content},"pdf");if(lt.output){const wt=new Blob([lt.output],{type:"application/pdf"}),jt=URL.createObjectURL(wt);P(jt),I("success")}else throw new Error("No output from Typst")}else{const{compilationAPI:lt}=await nl(async()=>{const{compilationAPI:re}=await import("./compilation-P31Xcf3s.js");return{compilationAPI:re}},[]);console.log("[Compile] Submitting job to server...");const wt=await lt.submitJob(o.name,o.content,n==null?void 0:n.id);console.log("[Compile] Job submitted:",wt.jobId,`Queue: ${wt.stats.queued}, Compiling: ${wt.stats.compiling}`);const jt=await lt.pollJobStatus(wt.jobId,re=>{console.log("[Compile] Job status:",re.job.status,re.job.queuePosition?`Position: ${re.job.queuePosition}`:"")});if(jt.job.status==="completed"){console.log("[Compile] Downloading PDF...");const re=await lt.getPDF(wt.jobId),Yn=URL.createObjectURL(re);P(Yn),I("success"),console.log("[Compile] PDF ready")}else if(jt.job.status==="failed"){const re=await lt.getLog(wt.jobId),Yn=xI(re),ko=CI(Yn);I("error",ko||jt.job.error||"Compilation failed")}}}catch(at){console.error("[Compile] Error:",at);const lt=at instanceof Error?at.message:"Unknown error";I("error",lt)}}},Ss=at=>{At(lt=>{const wt=new Set(lt);return wt.has(at)?wt.delete(at):wt.add(at),wt})},Es=async()=>{const at=prompt("Enter file name (e.g., main.tex or document.typ):");if(!(!at||!n))try{const{file:lt}=await Cn.createFile({projectId:n.id,name:at,path:`/${at}`,content:""});d([...h,lt]),m(lt)}catch(lt){console.error("Failed to create file:",lt),alert("Failed to create file")}},Co=async()=>{const at=prompt("Enter folder name:");if(!(!at||!n))try{const{file:lt}=await Cn.createFile({projectId:n.id,name:at,path:`/${at}`,isFolder:!0});d([...h,lt])}catch(lt){console.error("Failed to create folder:",lt),alert("Failed to create folder")}},To=()=>{var at;(at=ot.current)==null||at.click()},xs=async at=>{const lt=at.target.files;if(!(!lt||lt.length===0||!n)){for(const wt of Array.from(lt))try{const jt=new FileReader,re=await new Promise((ko,Ro)=>{jt.onload=()=>{const Ln=jt.result,Cs=Ln.split(",")[1]||Ln;ko(Cs)},jt.onerror=Ro,jt.readAsDataURL(wt)}),{file:Yn}=await Cn.uploadFile({projectId:n.id,path:`/${wt.name}`,name:wt.name,mimeType:wt.type||"application/octet-stream",data:re});d([...h,Yn]),(wt.name.endsWith(".tex")||wt.name.endsWith(".typ")||wt.name.endsWith(".txt"))&&m(Yn)}catch(jt){console.error(`Failed to upload ${wt.name}:`,jt),alert(`Failed to upload ${wt.name}`)}ot.current&&(ot.current.value="")}},Dh=async()=>{if(!o){alert("Please select a file to rename");return}const at=prompt("Enter new name:",o.name);if(!(!at||at===o.name))try{await Cn.updateFile(o.id,{name:at});const lt=h.map(wt=>wt.id===o.id?{...wt,name:at}:wt);d(lt),o.id===o.id&&c({...o,name:at})}catch(lt){console.error("Failed to rename file:",lt),alert("Failed to rename file")}},Nh=async()=>{if(!o){alert("Please select a file to delete");return}if(confirm(`Are you sure you want to delete "${o.name}"?`))try{await Cn.deleteFile(o.id);const at=h.filter(lt=>lt.id!==o.id);d(at),b(o.id),p.length>1?c(p[0]):c(null)}catch(at){console.error("Failed to delete file:",at),alert("Failed to delete file")}},an=at=>lt=>{lt.preventDefault(),ht(at)};L.useEffect(()=>{if(!it)return;const at=wt=>{if(it==="sidebar"){const jt=Math.max(200,Math.min(500,wt.clientX));N(jt)}else if(it==="editor"){const jt=document.querySelector(".editor-preview-container");if(jt){const re=jt.getBoundingClientRect(),Yn=wt.clientX-re.left,ko=Math.max(30,Math.min(70,Yn/re.width*100));Q(ko)}}},lt=()=>{ht(null)};return document.addEventListener("mousemove",at),document.addEventListener("mouseup",lt),()=>{document.removeEventListener("mousemove",at),document.removeEventListener("mouseup",lt)}},[it]);const Oh=()=>{var lt;if(!o)return"plaintext";const at=(lt=o.name.split(".").pop())==null?void 0:lt.toLowerCase();return at==="tex"?"latex":at==="typ"?"typst":at==="bib"?"bibtex":at==="md"?"markdown":"plaintext"};return K?E.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:E.jsx(ws,{size:"lg"})}):E.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[E.jsxs("header",{className:"h-12 flex items-center justify-between px-4 border-b bg-card shrink-0",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>t("/dashboard"),children:E.jsx(dk,{className:"h-5 w-5"})}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Jl,{className:"h-5 w-5 text-primary"}),E.jsx("span",{className:"font-medium",children:n==null?void 0:n.name}),E.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${(n==null?void 0:n.engine)==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:n==null?void 0:n.engine})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[dt.length>0&&E.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[E.jsx(mk,{className:"h-4 w-4 text-muted-foreground"}),E.jsx("div",{className:"flex -space-x-2",children:dt.slice(0,3).map(at=>E.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-background flex items-center justify-center text-xs font-medium text-white",style:{backgroundColor:at.color},title:at.name,children:at.name.charAt(0)},at.id))})]}),E.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[nt?E.jsx(ws,{size:"sm"}):E.jsx(A3,{className:"h-4 w-4"}),E.jsx("span",{children:nt?"ang lu...":" lu"})]}),E.jsxs(Te,{variant:"outline",size:"sm",onClick:()=>G(!0),className:"gap-2",children:[E.jsx(E3,{className:"h-4 w-4"}),"Chia s"]}),(n==null?void 0:n.engine)==="LATEX"&&V&&E.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground border rounded px-2 py-1",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),E.jsxs("span",{children:[V.compiling," ang dch"]})]}),V.queued>0&&E.jsxs(E.Fragment,{children:[E.jsx("span",{children:""}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),E.jsxs("span",{children:[V.queued," ang ch"]})]})]})]}),E.jsxs(Te,{size:"sm",onClick:ke,disabled:D==="compiling"||(n==null?void 0:n.engine)==="LATEX"&&!!(V&&V.available===0),className:"gap-2",title:V&&V.available===0?"Server ang y, vui lng ch...":void 0,children:[D==="compiling"?E.jsx(ws,{size:"sm"}):E.jsx(v3,{className:"h-4 w-4"}),"Bin dch"]}),E.jsx(Te,{variant:"ghost",size:"icon",onClick:M,children:R==="dark"?E.jsx(pk,{className:"h-4 w-4"}):E.jsx(fk,{className:"h-4 w-4"})})]})]}),E.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[E.jsx("input",{ref:ot,type:"file",multiple:!0,className:"hidden",onChange:xs}),E.jsx("aside",{style:{width:v?`${Tt}px`:"0"},className:ia("border-r bg-card flex flex-col transition-all duration-200 shrink-0",!v&&"border-r-0"),children:v&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"px-2 py-1.5 border-b flex items-center justify-between gap-1",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"New file",onClick:Es,children:E.jsx(bC,{className:"h-4 w-4"})}),E.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"New folder",onClick:Co,children:E.jsx(hA,{className:"h-4 w-4"})}),E.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Upload",onClick:To,children:E.jsx(mC,{className:"h-4 w-4 rotate-180"})})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Rename",onClick:Dh,children:E.jsx(Jl,{className:"h-4 w-4"})}),E.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-destructive",title:"Delete",onClick:Nh,children:E.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),E.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:h.filter(at=>!at.path.includes("/",1)||at.path.split("/").length===2).map(at=>E.jsx(GM,{file:at,files:h,isExpanded:mt.has(at.path),onToggle:Ss,onSelect:lt=>{lt.isFolder||m(lt)},isSelected:(o==null?void 0:o.id)===at.id,level:0},at.id))})]})}),v&&E.jsx("div",{onMouseDown:an("sidebar"),className:ia("w-1 hover:w-1.5 bg-border hover:bg-primary/50 cursor-col-resize transition-all shrink-0",it==="sidebar"&&"bg-primary w-1.5")}),E.jsx("button",{onClick:w,className:"w-5 h-full flex items-center justify-center hover:bg-muted transition-colors shrink-0",children:v?E.jsx(g3,{className:"h-4 w-4 text-muted-foreground"}):E.jsx(y3,{className:"h-4 w-4 text-muted-foreground"})}),E.jsxs("div",{className:"flex-1 flex overflow-hidden editor-preview-container",children:[E.jsxs("div",{style:{width:A?`${q}%`:"100%"},className:"flex flex-col min-w-0 transition-all duration-200",children:[E.jsx("div",{className:"h-9 flex items-center border-b bg-card/50 overflow-x-auto shrink-0",children:p.map(at=>E.jsxs("div",{onClick:()=>c(at),className:ia("flex items-center gap-2 px-3 h-full border-r cursor-pointer group",(o==null?void 0:o.id)===at.id?"bg-background border-b-2 border-b-primary":"hover:bg-muted/50"),children:[E.jsx("span",{className:"text-sm",children:uk(at.name)}),E.jsx("span",{className:"text-sm truncate max-w-32",children:at.name}),E.jsx("button",{onClick:lt=>{lt.stopPropagation(),b(at.id)},className:"opacity-0 group-hover:opacity-100 hover:text-destructive",children:""})]},at.id))}),E.jsx("div",{className:"flex-1 min-h-0",children:o?E.jsx(Jz,{height:"100%",language:Oh(),value:o.content||"",onChange:Mn,onMount:Rn,theme:R==="dark"?"vs-dark":"light",options:{fontSize:14,fontFamily:"JetBrains Mono, Consolas, monospace",minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!0,automaticLayout:!0,scrollBeyondLastLine:!1,padding:{top:16},bracketPairColorization:{enabled:!0},matchBrackets:"always",colorDecorators:!0,renderWhitespace:"selection",occurrencesHighlight:"multiFile"}}):E.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:E.jsxs("div",{className:"text-center",children:[E.jsx(bC,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),E.jsx("p",{children:"Chn mt file  bt u bin tp"})]})})})]}),E.jsx("button",{onClick:S,className:"w-5 h-full flex items-center justify-center hover:bg-muted transition-colors shrink-0 border-x",children:A?E.jsx(n3,{className:"h-4 w-4 text-muted-foreground"}):E.jsx(yC,{className:"h-4 w-4 text-muted-foreground"})}),A&&E.jsx("div",{onMouseDown:an("editor"),className:ia("w-1 hover:w-1.5 bg-border hover:bg-primary/50 cursor-col-resize transition-all shrink-0",it==="editor"&&"bg-primary w-1.5")}),A&&E.jsxs("div",{style:{width:`${100-q}%`},className:"flex flex-col bg-muted/30 min-w-0",children:[E.jsxs("div",{className:"h-9 flex items-center justify-between px-4 border-b bg-card/50 shrink-0",children:[E.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"PDF PREVIEW"}),E.jsxs(Te,{variant:"ghost",size:"sm",className:"h-7 gap-2",children:[E.jsx(mC,{className:"h-3 w-3"}),"Export"]})]}),E.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto p-4",children:D==="compiling"?E.jsxs("div",{className:"text-center",children:[E.jsx(ws,{size:"lg"}),E.jsx("p",{className:"mt-4 text-muted-foreground",children:"ang bin dch..."})]}):D==="error"?E.jsxs("div",{className:"w-full h-full overflow-auto p-4",children:[E.jsxs("div",{className:"bg-destructive/10 border border-destructive/30 rounded-lg p-4 mb-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-destructive mb-2",children:" Compilation Failed"}),E.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Compilation encountered errors. Please fix them and try again."})]}),E.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden mb-4",children:[E.jsx("div",{className:"bg-muted px-4 py-2 border-b font-semibold text-sm",children:" Error Details"}),E.jsx("pre",{className:"p-4 text-sm font-mono whitespace-pre-wrap overflow-auto max-h-96",children:O||"Compilation failed. No detailed error message available."})]}),E.jsxs("div",{className:"mt-4 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[E.jsx("h4",{className:"font-semibold text-blue-600 mb-2",children:" Need Help?"}),E.jsxs("ul",{className:"text-sm space-y-2",children:[E.jsx("li",{children:" Check if all required packages are available in the TeXLive distribution"}),E.jsxs("li",{children:[" Missing packages? Install them via ",E.jsx("code",{className:"bg-card px-1 rounded",children:"tlmgr"})," or use alternatives"]}),E.jsx("li",{children:" Copy this log to get help from the community"})]})]})]}):U?E.jsx(cH,{pdfUrl:U}):E.jsxs("div",{className:"text-center text-muted-foreground",children:[E.jsx(yC,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),E.jsx("p",{children:'Nhn "Bin dch"  xem kt qu'})]})})]})]})]}),E.jsxs("footer",{className:"h-6 flex items-center justify-between px-4 border-t bg-card text-xs text-muted-foreground shrink-0",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("span",{children:n==null?void 0:n.engine}),E.jsx("span",{children:o==null?void 0:o.path})]}),E.jsx("div",{className:"flex items-center gap-4",children:E.jsxs("span",{className:ia("flex items-center gap-1",D==="success"&&"text-green-500",D==="error"&&"text-destructive"),children:[D==="idle"&&" Sn sng",D==="compiling"&&" ang bin dch",D==="success"&&" Thnh cng",D==="error"&&" Li"]})})]}),F&&n&&E.jsx(TI,{isOpen:F,onClose:()=>G(!1),projectId:n.id,projectName:n.name,collaborators:n.collaborators||[],onCollaboratorAdded:async()=>{if(r){const{project:at}=await Cn.getProject(r);a(at)}}})]})}function GM({file:r,files:t,isExpanded:e,onToggle:n,onSelect:a,isSelected:o,level:c}){const h=t.filter(d=>(d.path.substring(0,d.path.lastIndexOf("/"))||"/")===r.path&&d.id!==r.id);return E.jsxs("div",{children:[E.jsxs("div",{onClick:()=>r.isFolder?n(r.path):a(r),className:ia("flex items-center gap-2 px-2 py-1 rounded cursor-pointer text-sm",o?"bg-primary/20 text-primary":"hover:bg-muted"),style:{paddingLeft:`${c*12+8}px`},children:[r.isFolder?e?E.jsx(hA,{className:"h-4 w-4 text-yellow-500"}):E.jsx(l3,{className:"h-4 w-4 text-yellow-500"}):E.jsx("span",{children:uk(r.name)}),E.jsx("span",{className:"truncate",children:r.name})]}),r.isFolder&&e&&h.map(d=>E.jsx(GM,{file:d,files:t,isExpanded:e,onToggle:n,onSelect:a,isSelected:o,level:c+1},d.id))]})}function MT({children:r}){const{isAuthenticated:t,isLoading:e}=uc();return e?E.jsx(yk,{message:"ang xc thc..."}):t?E.jsx(E.Fragment,{children:r}):E.jsx(vy,{to:"/login",replace:!0})}function LT({children:r}){const{isAuthenticated:t,isLoading:e}=uc();return e?E.jsx(yk,{message:"ang ti..."}):t?E.jsx(vy,{to:"/dashboard",replace:!0}):E.jsx(E.Fragment,{children:r})}function dH(){const{checkAuth:r}=uc();return L.useEffect(()=>{r()},[r]),E.jsx(jO,{children:E.jsxs(dO,{children:[E.jsx(Wo,{path:"/login",element:E.jsx(LT,{children:E.jsx(B3,{})})}),E.jsx(Wo,{path:"/register",element:E.jsx(LT,{children:E.jsx(U3,{})})}),E.jsx(Wo,{path:"/dashboard",element:E.jsx(MT,{children:E.jsx(H3,{})})}),E.jsx(Wo,{path:"/editor/:projectId",element:E.jsx(MT,{children:E.jsx(hH,{})})}),E.jsx(Wo,{path:"/",element:E.jsx(vy,{to:"/dashboard",replace:!0})}),E.jsx(Wo,{path:"*",element:E.jsx(vy,{to:"/dashboard",replace:!0})})]})})}vN.createRoot(document.getElementById("root")).render(E.jsx(L.StrictMode,{children:E.jsx(dH,{})}));
//# sourceMappingURL=index-DCPZrTUY.js.map
