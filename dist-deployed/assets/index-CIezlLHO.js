var Ij=Object.defineProperty;var eT=s=>{throw TypeError(s)};var zj=(s,t,e)=>t in s?Ij(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var Mt=(s,t,e)=>zj(s,typeof t!="symbol"?t+"":t,e),Nx=(s,t,e)=>t.has(s)||eT("Cannot "+e);var p=(s,t,e)=>(Nx(s,t,"read from private field"),e?e.call(s):t.get(s)),M=(s,t,e)=>t.has(s)?eT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),k=(s,t,e,n)=>(Nx(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),N=(s,t,e)=>(Nx(s,t,"access private method"),e);var _i=(s,t,e,n)=>({set _(a){k(s,t,a,e)},get _(){return p(s,t,n)}});function Uj(s,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in s)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function a_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Mx={exports:{}},$d={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function Bj(){if(nT)return $d;nT=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:s,type:n,key:c,ref:a!==void 0?a:null,props:o}}return $d.Fragment=t,$d.jsx=e,$d.jsxs=e,$d}var iT;function Hj(){return iT||(iT=1,Mx.exports=Bj()),Mx.exports}var x=Hj(),Dx={exports:{}},Dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT;function Vj(){if(sT)return Dt;sT=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=b&&j[b]||j["@@iterator"],typeof j=="function"?j:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function T(j,G,tt){this.props=j,this.context=G,this.refs=C,this.updater=tt||A}T.prototype.isReactComponent={},T.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},T.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function D(){}D.prototype=T.prototype;function L(j,G,tt){this.props=j,this.context=G,this.refs=C,this.updater=tt||A}var P=L.prototype=new D;P.constructor=L,S(P,T.prototype),P.isPureReactComponent=!0;var z=Array.isArray;function U(){}var O={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function Z(j,G,tt){var ot=tt.ref;return{$$typeof:s,type:j,key:G,ref:ot!==void 0?ot:null,props:tt}}function $(j,G){return Z(j.type,G,j.props)}function W(j){return typeof j=="object"&&j!==null&&j.$$typeof===s}function it(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(tt){return G[tt]})}var ct=/\/+/g;function lt(j,G){return typeof j=="object"&&j!==null&&j.key!=null?it(""+j.key):G.toString(36)}function nt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(U,U):(j.status="pending",j.then(function(G){j.status==="pending"&&(j.status="fulfilled",j.value=G)},function(G){j.status==="pending"&&(j.status="rejected",j.reason=G)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function I(j,G,tt,ot,pt){var wt=typeof j;(wt==="undefined"||wt==="boolean")&&(j=null);var ht=!1;if(j===null)ht=!0;else switch(wt){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(j.$$typeof){case s:case t:ht=!0;break;case g:return ht=j._init,I(ht(j._payload),G,tt,ot,pt)}}if(ht)return pt=pt(j),ht=ot===""?"."+lt(j,0):ot,z(pt)?(tt="",ht!=null&&(tt=ht.replace(ct,"$&/")+"/"),I(pt,G,tt,"",function($t){return $t})):pt!=null&&(W(pt)&&(pt=$(pt,tt+(pt.key==null||j&&j.key===pt.key?"":(""+pt.key).replace(ct,"$&/")+"/")+ht)),G.push(pt)),1;ht=0;var Gt=ot===""?".":ot+":";if(z(j))for(var Ft=0;Ft<j.length;Ft++)ot=j[Ft],wt=Gt+lt(ot,Ft),ht+=I(ot,G,tt,wt,pt);else if(Ft=w(j),typeof Ft=="function")for(j=Ft.call(j),Ft=0;!(ot=j.next()).done;)ot=ot.value,wt=Gt+lt(ot,Ft++),ht+=I(ot,G,tt,wt,pt);else if(wt==="object"){if(typeof j.then=="function")return I(nt(j),G,tt,ot,pt);throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ht}function q(j,G,tt){if(j==null)return j;var ot=[],pt=0;return I(j,ot,"","",function(wt){return G.call(tt,wt,pt++)}),ot}function X(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(tt){(j._status===0||j._status===-1)&&(j._status=1,j._result=tt)},function(tt){(j._status===0||j._status===-1)&&(j._status=2,j._result=tt)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var _t=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ct={map:q,forEach:function(j,G,tt){q(j,function(){G.apply(this,arguments)},tt)},count:function(j){var G=0;return q(j,function(){G++}),G},toArray:function(j){return q(j,function(G){return G})||[]},only:function(j){if(!W(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Dt.Activity=y,Dt.Children=Ct,Dt.Component=T,Dt.Fragment=e,Dt.Profiler=a,Dt.PureComponent=L,Dt.StrictMode=n,Dt.Suspense=d,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Dt.__COMPILER_RUNTIME={__proto__:null,c:function(j){return O.H.useMemoCache(j)}},Dt.cache=function(j){return function(){return j.apply(null,arguments)}},Dt.cacheSignal=function(){return null},Dt.cloneElement=function(j,G,tt){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ot=S({},j.props),pt=j.key;if(G!=null)for(wt in G.key!==void 0&&(pt=""+G.key),G)!H.call(G,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&G.ref===void 0||(ot[wt]=G[wt]);var wt=arguments.length-2;if(wt===1)ot.children=tt;else if(1<wt){for(var ht=Array(wt),Gt=0;Gt<wt;Gt++)ht[Gt]=arguments[Gt+2];ot.children=ht}return Z(j.type,pt,ot)},Dt.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},Dt.createElement=function(j,G,tt){var ot,pt={},wt=null;if(G!=null)for(ot in G.key!==void 0&&(wt=""+G.key),G)H.call(G,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(pt[ot]=G[ot]);var ht=arguments.length-2;if(ht===1)pt.children=tt;else if(1<ht){for(var Gt=Array(ht),Ft=0;Ft<ht;Ft++)Gt[Ft]=arguments[Ft+2];pt.children=Gt}if(j&&j.defaultProps)for(ot in ht=j.defaultProps,ht)pt[ot]===void 0&&(pt[ot]=ht[ot]);return Z(j,wt,pt)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(j){return{$$typeof:u,render:j}},Dt.isValidElement=W,Dt.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:X}},Dt.memo=function(j,G){return{$$typeof:f,type:j,compare:G===void 0?null:G}},Dt.startTransition=function(j){var G=O.T,tt={};O.T=tt;try{var ot=j(),pt=O.S;pt!==null&&pt(tt,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(U,_t)}catch(wt){_t(wt)}finally{G!==null&&tt.types!==null&&(G.types=tt.types),O.T=G}},Dt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Dt.use=function(j){return O.H.use(j)},Dt.useActionState=function(j,G,tt){return O.H.useActionState(j,G,tt)},Dt.useCallback=function(j,G){return O.H.useCallback(j,G)},Dt.useContext=function(j){return O.H.useContext(j)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(j,G){return O.H.useDeferredValue(j,G)},Dt.useEffect=function(j,G){return O.H.useEffect(j,G)},Dt.useEffectEvent=function(j){return O.H.useEffectEvent(j)},Dt.useId=function(){return O.H.useId()},Dt.useImperativeHandle=function(j,G,tt){return O.H.useImperativeHandle(j,G,tt)},Dt.useInsertionEffect=function(j,G){return O.H.useInsertionEffect(j,G)},Dt.useLayoutEffect=function(j,G){return O.H.useLayoutEffect(j,G)},Dt.useMemo=function(j,G){return O.H.useMemo(j,G)},Dt.useOptimistic=function(j,G){return O.H.useOptimistic(j,G)},Dt.useReducer=function(j,G,tt){return O.H.useReducer(j,G,tt)},Dt.useRef=function(j){return O.H.useRef(j)},Dt.useState=function(j){return O.H.useState(j)},Dt.useSyncExternalStore=function(j,G,tt){return O.H.useSyncExternalStore(j,G,tt)},Dt.useTransition=function(){return O.H.useTransition()},Dt.version="19.2.1",Dt}var rT;function o_(){return rT||(rT=1,Dx.exports=Vj()),Dx.exports}var E=o_();const mn=a_(E),lR=Uj({__proto__:null,default:mn},[E]);var Lx={exports:{}},Xd={},Ox={exports:{}},jx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function qj(){return aT||(aT=1,(function(s){function t(I,q){var X=I.length;I.push(q);t:for(;0<X;){var _t=X-1>>>1,Ct=I[_t];if(0<a(Ct,q))I[_t]=q,I[X]=Ct,X=_t;else break t}}function e(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var q=I[0],X=I.pop();if(X!==q){I[0]=X;t:for(var _t=0,Ct=I.length,j=Ct>>>1;_t<j;){var G=2*(_t+1)-1,tt=I[G],ot=G+1,pt=I[ot];if(0>a(tt,X))ot<Ct&&0>a(pt,tt)?(I[_t]=pt,I[ot]=X,_t=ot):(I[_t]=tt,I[G]=X,_t=G);else if(ot<Ct&&0>a(pt,X))I[_t]=pt,I[ot]=X,_t=ot;else break t}}return q}function a(I,q){var X=I.sortIndex-q.sortIndex;return X!==0?X:I.id-q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();s.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,b=3,w=!1,A=!1,S=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function P(I){for(var q=e(f);q!==null;){if(q.callback===null)n(f);else if(q.startTime<=I)n(f),q.sortIndex=q.expirationTime,t(d,q);else break;q=e(f)}}function z(I){if(S=!1,P(I),!A)if(e(d)!==null)A=!0,U||(U=!0,it());else{var q=e(f);q!==null&&nt(z,q.startTime-I)}}var U=!1,O=-1,H=5,Z=-1;function $(){return C?!0:!(s.unstable_now()-Z<H)}function W(){if(C=!1,U){var I=s.unstable_now();Z=I;var q=!0;try{t:{A=!1,S&&(S=!1,D(O),O=-1),w=!0;var X=b;try{e:{for(P(I),y=e(d);y!==null&&!(y.expirationTime>I&&$());){var _t=y.callback;if(typeof _t=="function"){y.callback=null,b=y.priorityLevel;var Ct=_t(y.expirationTime<=I);if(I=s.unstable_now(),typeof Ct=="function"){y.callback=Ct,P(I),q=!0;break e}y===e(d)&&n(d),P(I)}else n(d);y=e(d)}if(y!==null)q=!0;else{var j=e(f);j!==null&&nt(z,j.startTime-I),q=!1}}break t}finally{y=null,b=X,w=!1}q=void 0}}finally{q?it():U=!1}}}var it;if(typeof L=="function")it=function(){L(W)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,lt=ct.port2;ct.port1.onmessage=W,it=function(){lt.postMessage(null)}}else it=function(){T(W,0)};function nt(I,q){O=T(function(){I(s.unstable_now())},q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(I){I.callback=null},s.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<I?Math.floor(1e3/I):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(I){switch(b){case 1:case 2:case 3:var q=3;break;default:q=b}var X=b;b=q;try{return I()}finally{b=X}},s.unstable_requestPaint=function(){C=!0},s.unstable_runWithPriority=function(I,q){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var X=b;b=I;try{return q()}finally{b=X}},s.unstable_scheduleCallback=function(I,q,X){var _t=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?_t+X:_t):X=_t,I){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=X+Ct,I={id:g++,callback:q,priorityLevel:I,startTime:X,expirationTime:Ct,sortIndex:-1},X>_t?(I.sortIndex=X,t(f,I),e(d)===null&&I===e(f)&&(S?(D(O),O=-1):S=!0,nt(z,X-_t))):(I.sortIndex=Ct,t(d,I),A||w||(A=!0,U||(U=!0,it()))),I},s.unstable_shouldYield=$,s.unstable_wrapCallback=function(I){var q=b;return function(){var X=b;b=q;try{return I.apply(this,arguments)}finally{b=X}}}})(jx)),jx}var oT;function Gj(){return oT||(oT=1,Ox.exports=qj()),Ox.exports}var Px={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function $j(){if(lT)return jn;lT=1;var s=o_();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},jn.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},jn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},jn.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},jn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},jn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},jn.requestFormReset=function(d){n.d.r(d)},jn.unstable_batchedUpdates=function(d,f){return d(f)},jn.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},jn.useFormStatus=function(){return c.H.useHostTransitionStatus()},jn.version="19.2.1",jn}var cT;function cR(){if(cT)return Px.exports;cT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Px.exports=$j(),Px.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function Xj(){if(uT)return Xd;uT=1;var s=Gj(),t=o_(),e=cR();function n(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function u(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(n(188));return r!==i?null:i}for(var l=i,h=r;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return d(m),i;if(v===h)return d(m),r;v=v.sibling}throw Error(n(188))}if(l.return!==h.return)l=m,h=v;else{for(var _=!1,R=m.child;R;){if(R===l){_=!0,l=m,h=v;break}if(R===h){_=!0,h=m,l=v;break}R=R.sibling}if(!_){for(R=v.child;R;){if(R===l){_=!0,l=v,h=m;break}if(R===h){_=!0,h=v,l=m;break}R=R.sibling}if(!_)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:r}function g(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=g(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),L=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function it(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var ct=Symbol.for("react.client.reference");function lt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ct?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case z:return"Suspense";case U:return"SuspenseList";case Z:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case L:return i.displayName||"Context";case D:return(i._context.displayName||"Context")+".Consumer";case P:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case O:return r=i.displayName||null,r!==null?r:lt(i.type)||"Memo";case H:r=i._payload,i=i._init;try{return lt(i(r))}catch{}}return null}var nt=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},_t=[],Ct=-1;function j(i){return{current:i}}function G(i){0>Ct||(i.current=_t[Ct],_t[Ct]=null,Ct--)}function tt(i,r){Ct++,_t[Ct]=i.current,i.current=r}var ot=j(null),pt=j(null),wt=j(null),ht=j(null);function Gt(i,r){switch(tt(wt,r),tt(pt,i),tt(ot,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?SC(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=SC(r),i=EC(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(ot),tt(ot,i)}function Ft(){G(ot),G(pt),G(wt)}function $t(i){i.memoizedState!==null&&tt(ht,i);var r=ot.current,l=EC(r,i.type);r!==l&&(tt(pt,i),tt(ot,l))}function ce(i){pt.current===i&&(G(ot),G(pt)),ht.current===i&&(G(ht),Hd._currentValue=X)}var cn,re;function le(i){if(cn===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);cn=r&&r[1]||"",re=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cn+i+re}var Le=!1;function Ne(i,r){if(!i||Le)return"";Le=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(J){var Q=J}Reflect.construct(i,[],rt)}else{try{rt.call()}catch(J){Q=J}i.call(rt.prototype)}}else{try{throw Error()}catch(J){Q=J}(rt=i())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),_=v[0],R=v[1];if(_&&R){var F=_.split(`
`),K=R.split(`
`);for(m=h=0;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;for(;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;if(h===F.length||m===K.length)for(h=F.length-1,m=K.length-1;1<=h&&0<=m&&F[h]!==K[m];)m--;for(;1<=h&&0<=m;h--,m--)if(F[h]!==K[m]){if(h!==1||m!==1)do if(h--,m--,0>m||F[h]!==K[m]){var et=`
`+F[h].replace(" at new "," at ");return i.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",i.displayName)),et}while(1<=h&&0<=m);break}}}finally{Le=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?le(l):""}function Vn(i,r){switch(i.tag){case 26:case 27:case 5:return le(i.type);case 16:return le("Lazy");case 13:return i.child!==r&&r!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return Ne(i.type,!1);case 11:return Ne(i.type.render,!1);case 1:return Ne(i.type,!0);case 31:return le("Activity");default:return""}}function hs(i){try{var r="",l=null;do r+=Vn(i,l),l=i,i=i.return;while(i);return r}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var js=Object.prototype.hasOwnProperty,vr=s.unstable_scheduleCallback,gi=s.unstable_cancelCallback,td=s.unstable_shouldYield,Vo=s.unstable_requestPaint,vn=s.unstable_now,ed=s.unstable_getCurrentPriorityLevel,Dc=s.unstable_ImmediatePriority,qn=s.unstable_UserBlockingPriority,ds=s.unstable_NormalPriority,Ra=s.unstable_LowPriority,Na=s.unstable_IdlePriority,mb=s.log,yb=s.unstable_setDisableYieldValue,qo=null,Gn=null;function Ps(i){if(typeof mb=="function"&&yb(i),Gn&&typeof Gn.setStrictMode=="function")try{Gn.setStrictMode(qo,i)}catch{}}var $n=Math.clz32?Math.clz32:nd,Rg=Math.log,vb=Math.LN2;function nd(i){return i>>>=0,i===0?32:31-(Rg(i)/vb|0)|0}var Go=256,at=262144,ut=4194304;function gt(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function jt(i,r,l){var h=i.pendingLanes;if(h===0)return 0;var m=0,v=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var R=h&134217727;return R!==0?(h=R&~v,h!==0?m=gt(h):(_&=R,_!==0?m=gt(_):l||(l=R&~i,l!==0&&(m=gt(l))))):(R=h&~v,R!==0?m=gt(R):_!==0?m=gt(_):l||(l=h&~i,l!==0&&(m=gt(l)))),m===0?0:r!==0&&r!==m&&(r&v)===0&&(v=m&-m,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:m}function kt(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Oe(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Te(){var i=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),i}function Bi(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function br(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ng(i,r,l,h,m,v){var _=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,F=i.expirationTimes,K=i.hiddenUpdates;for(l=_&~l;0<l;){var et=31-$n(l),rt=1<<et;R[et]=0,F[et]=-1;var Q=K[et];if(Q!==null)for(K[et]=null,et=0;et<Q.length;et++){var J=Q[et];J!==null&&(J.lane&=-536870913)}l&=~rt}h!==0&&aS(i,h,0),v!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=v&~(_&~r))}function aS(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var h=31-$n(r);i.entangledLanes|=r,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function oS(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var h=31-$n(l),m=1<<h;m&r|i[h]&r&&(i[h]|=r),l&=~m}}function lS(i,r){var l=r&-r;return l=(l&42)!==0?1:bb(l),(l&(i.suspendedLanes|r))!==0?0:l}function bb(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function xb(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function cS(){var i=q.p;return i!==0?i:(i=window.event,i===void 0?32:YC(i.type))}function uS(i,r){var l=q.p;try{return q.p=i,r()}finally{q.p=l}}var Ma=Math.random().toString(36).slice(2),bn="__reactFiber$"+Ma,ei="__reactProps$"+Ma,Lc="__reactContainer$"+Ma,wb="__reactEvents$"+Ma,TL="__reactListeners$"+Ma,kL="__reactHandles$"+Ma,hS="__reactResources$"+Ma,id="__reactMarker$"+Ma;function Ab(i){delete i[bn],delete i[ei],delete i[wb],delete i[TL],delete i[kL]}function Oc(i){var r=i[bn];if(r)return r;for(var l=i.parentNode;l;){if(r=l[Lc]||l[bn]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=DC(i);i!==null;){if(l=i[bn])return l;i=DC(i)}return r}i=l,l=i.parentNode}return null}function jc(i){if(i=i[bn]||i[Lc]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function sd(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(n(33))}function Pc(i){var r=i[hS];return r||(r=i[hS]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function un(i){i[id]=!0}var dS=new Set,fS={};function $o(i,r){Fc(i,r),Fc(i+"Capture",r)}function Fc(i,r){for(fS[i]=r,i=0;i<r.length;i++)dS.add(r[i])}var RL=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pS={},gS={};function NL(i){return js.call(gS,i)?!0:js.call(pS,i)?!1:RL.test(i)?gS[i]=!0:(pS[i]=!0,!1)}function Mg(i,r,l){if(NL(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function Dg(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function xr(i,r,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+h)}}function Hi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function mS(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ML(i,r,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,v=h.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return m.call(this)},set:function(_){l=""+_,v.call(this,_)}}),Object.defineProperty(i,r,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function _b(i){if(!i._valueTracker){var r=mS(i)?"checked":"value";i._valueTracker=ML(i,r,""+i[r])}}function yS(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),h="";return i&&(h=mS(i)?i.checked?"true":"false":i.value),i=h,i!==l?(r.setValue(i),!0):!1}function Lg(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var DL=/[\n"\\]/g;function Vi(i){return i.replace(DL,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Sb(i,r,l,h,m,v,_,R){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),r!=null?_==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Hi(r)):i.value!==""+Hi(r)&&(i.value=""+Hi(r)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),r!=null?Eb(i,_,Hi(r)):l!=null?Eb(i,_,Hi(l)):h!=null&&i.removeAttribute("value"),m==null&&v!=null&&(i.defaultChecked=!!v),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+Hi(R):i.removeAttribute("name")}function vS(i,r,l,h,m,v,_,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){_b(i);return}l=l!=null?""+Hi(l):"",r=r!=null?""+Hi(r):l,R||r===i.value||(i.value=r),i.defaultValue=r}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=R?i.checked:!!h,i.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),_b(i)}function Eb(i,r,l){r==="number"&&Lg(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Ic(i,r,l,h){if(i=i.options,r){r={};for(var m=0;m<l.length;m++)r["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=r.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Hi(l),r=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}r!==null||i[m].disabled||(r=i[m])}r!==null&&(r.selected=!0)}}function bS(i,r,l){if(r!=null&&(r=""+Hi(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+Hi(l):""}function xS(i,r,l,h){if(r==null){if(h!=null){if(l!=null)throw Error(n(92));if(nt(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),r=l}l=Hi(r),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),_b(i)}function zc(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var LL=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wS(i,r,l){var h=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":h?i.setProperty(r,l):typeof l!="number"||l===0||LL.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function AS(i,r,l){if(r!=null&&typeof r!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var m in r)h=r[m],r.hasOwnProperty(m)&&l[m]!==h&&wS(i,m,h)}else for(var v in r)r.hasOwnProperty(v)&&wS(i,v,r[v])}function Cb(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OL=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jL=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Og(i){return jL.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function wr(){}var Tb=null;function kb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Uc=null,Bc=null;function _S(i){var r=jc(i);if(r&&(i=r.stateNode)){var l=i[ei]||null;t:switch(i=r.stateNode,r.type){case"input":if(Sb(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Vi(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var h=l[r];if(h!==i&&h.form===i.form){var m=h[ei]||null;if(!m)throw Error(n(90));Sb(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<l.length;r++)h=l[r],h.form===i.form&&yS(h)}break t;case"textarea":bS(i,l.value,l.defaultValue);break t;case"select":r=l.value,r!=null&&Ic(i,!!l.multiple,r,!1)}}}var Rb=!1;function SS(i,r,l){if(Rb)return i(r,l);Rb=!0;try{var h=i(r);return h}finally{if(Rb=!1,(Uc!==null||Bc!==null)&&(wm(),Uc&&(r=Uc,i=Bc,Bc=Uc=null,_S(r),i)))for(r=0;r<i.length;r++)_S(i[r])}}function rd(i,r){var l=i.stateNode;if(l===null)return null;var h=l[ei]||null;if(h===null)return null;l=h[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,r,typeof l));return l}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nb=!1;if(Ar)try{var ad={};Object.defineProperty(ad,"passive",{get:function(){Nb=!0}}),window.addEventListener("test",ad,ad),window.removeEventListener("test",ad,ad)}catch{Nb=!1}var Da=null,Mb=null,jg=null;function ES(){if(jg)return jg;var i,r=Mb,l=r.length,h,m="value"in Da?Da.value:Da.textContent,v=m.length;for(i=0;i<l&&r[i]===m[i];i++);var _=l-i;for(h=1;h<=_&&r[l-h]===m[v-h];h++);return jg=m.slice(i,1<h?1-h:void 0)}function Pg(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Fg(){return!0}function CS(){return!1}function ni(i){function r(l,h,m,v,_){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Fg:CS,this.isPropagationStopped=CS,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Fg)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Fg)},persist:function(){},isPersistent:Fg}),r}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ig=ni(Xo),od=y({},Xo,{view:0,detail:0}),PL=ni(od),Db,Lb,ld,zg=y({},od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jb,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ld&&(ld&&i.type==="mousemove"?(Db=i.screenX-ld.screenX,Lb=i.screenY-ld.screenY):Lb=Db=0,ld=i),Db)},movementY:function(i){return"movementY"in i?i.movementY:Lb}}),TS=ni(zg),FL=y({},zg,{dataTransfer:0}),IL=ni(FL),zL=y({},od,{relatedTarget:0}),Ob=ni(zL),UL=y({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),BL=ni(UL),HL=y({},Xo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),VL=ni(HL),qL=y({},Xo,{data:0}),kS=ni(qL),GL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$L={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YL(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=XL[i])?!!r[i]:!1}function jb(){return YL}var KL=y({},od,{key:function(i){if(i.key){var r=GL[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Pg(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?$L[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jb,charCode:function(i){return i.type==="keypress"?Pg(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Pg(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),WL=ni(KL),QL=y({},zg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RS=ni(QL),ZL=y({},od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jb}),JL=ni(ZL),tO=y({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),eO=ni(tO),nO=y({},zg,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),iO=ni(nO),sO=y({},Xo,{newState:0,oldState:0}),rO=ni(sO),aO=[9,13,27,32],Pb=Ar&&"CompositionEvent"in window,cd=null;Ar&&"documentMode"in document&&(cd=document.documentMode);var oO=Ar&&"TextEvent"in window&&!cd,NS=Ar&&(!Pb||cd&&8<cd&&11>=cd),MS=" ",DS=!1;function LS(i,r){switch(i){case"keyup":return aO.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OS(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Hc=!1;function lO(i,r){switch(i){case"compositionend":return OS(r);case"keypress":return r.which!==32?null:(DS=!0,MS);case"textInput":return i=r.data,i===MS&&DS?null:i;default:return null}}function cO(i,r){if(Hc)return i==="compositionend"||!Pb&&LS(i,r)?(i=ES(),jg=Mb=Da=null,Hc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return NS&&r.locale!=="ko"?null:r.data;default:return null}}var uO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jS(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!uO[i.type]:r==="textarea"}function PS(i,r,l,h){Uc?Bc?Bc.push(h):Bc=[h]:Uc=h,r=km(r,"onChange"),0<r.length&&(l=new Ig("onChange","change",null,l,h),i.push({event:l,listeners:r}))}var ud=null,hd=null;function hO(i){vC(i,0)}function Ug(i){var r=sd(i);if(yS(r))return i}function FS(i,r){if(i==="change")return r}var IS=!1;if(Ar){var Fb;if(Ar){var Ib="oninput"in document;if(!Ib){var zS=document.createElement("div");zS.setAttribute("oninput","return;"),Ib=typeof zS.oninput=="function"}Fb=Ib}else Fb=!1;IS=Fb&&(!document.documentMode||9<document.documentMode)}function US(){ud&&(ud.detachEvent("onpropertychange",BS),hd=ud=null)}function BS(i){if(i.propertyName==="value"&&Ug(hd)){var r=[];PS(r,hd,i,kb(i)),SS(hO,r)}}function dO(i,r,l){i==="focusin"?(US(),ud=r,hd=l,ud.attachEvent("onpropertychange",BS)):i==="focusout"&&US()}function fO(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ug(hd)}function pO(i,r){if(i==="click")return Ug(r)}function gO(i,r){if(i==="input"||i==="change")return Ug(r)}function mO(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var mi=typeof Object.is=="function"?Object.is:mO;function dd(i,r){if(mi(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),h=Object.keys(r);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!js.call(r,m)||!mi(i[m],r[m]))return!1}return!0}function HS(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function VS(i,r){var l=HS(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=r&&h>=r)return{node:l,offset:r-i};i=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=HS(l)}}function qS(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?qS(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function GS(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Lg(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=Lg(i.document)}return r}function zb(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var yO=Ar&&"documentMode"in document&&11>=document.documentMode,Vc=null,Ub=null,fd=null,Bb=!1;function $S(i,r,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bb||Vc==null||Vc!==Lg(h)||(h=Vc,"selectionStart"in h&&zb(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),fd&&dd(fd,h)||(fd=h,h=km(Ub,"onSelect"),0<h.length&&(r=new Ig("onSelect","select",null,r,l),i.push({event:r,listeners:h}),r.target=Vc)))}function Yo(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var qc={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionrun:Yo("Transition","TransitionRun"),transitionstart:Yo("Transition","TransitionStart"),transitioncancel:Yo("Transition","TransitionCancel"),transitionend:Yo("Transition","TransitionEnd")},Hb={},XS={};Ar&&(XS=document.createElement("div").style,"AnimationEvent"in window||(delete qc.animationend.animation,delete qc.animationiteration.animation,delete qc.animationstart.animation),"TransitionEvent"in window||delete qc.transitionend.transition);function Ko(i){if(Hb[i])return Hb[i];if(!qc[i])return i;var r=qc[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in XS)return Hb[i]=r[l];return i}var YS=Ko("animationend"),KS=Ko("animationiteration"),WS=Ko("animationstart"),vO=Ko("transitionrun"),bO=Ko("transitionstart"),xO=Ko("transitioncancel"),QS=Ko("transitionend"),ZS=new Map,Vb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vb.push("scrollEnd");function fs(i,r){ZS.set(i,r),$o(r,[i])}var Bg=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},qi=[],Gc=0,qb=0;function Hg(){for(var i=Gc,r=qb=Gc=0;r<i;){var l=qi[r];qi[r++]=null;var h=qi[r];qi[r++]=null;var m=qi[r];qi[r++]=null;var v=qi[r];if(qi[r++]=null,h!==null&&m!==null){var _=h.pending;_===null?m.next=m:(m.next=_.next,_.next=m),h.pending=m}v!==0&&JS(l,m,v)}}function Vg(i,r,l,h){qi[Gc++]=i,qi[Gc++]=r,qi[Gc++]=l,qi[Gc++]=h,qb|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Gb(i,r,l,h){return Vg(i,r,l,h),qg(i)}function Wo(i,r){return Vg(i,null,null,r),qg(i)}function JS(i,r,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var m=!1,v=i.return;v!==null;)v.childLanes|=l,h=v.alternate,h!==null&&(h.childLanes|=l),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(m=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,m&&r!==null&&(m=31-$n(l),i=v.hiddenUpdates,h=i[m],h===null?i[m]=[r]:h.push(r),r.lane=l|536870912),v):null}function qg(i){if(50<jd)throw jd=0,tx=null,Error(n(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var $c={};function wO(i,r,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yi(i,r,l,h){return new wO(i,r,l,h)}function $b(i){return i=i.prototype,!(!i||!i.isReactComponent)}function _r(i,r){var l=i.alternate;return l===null?(l=yi(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function tE(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Gg(i,r,l,h,m,v){var _=0;if(h=i,typeof i=="function")$b(i)&&(_=1);else if(typeof i=="string")_=Cj(i,l,ot.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case Z:return i=yi(31,l,r,m),i.elementType=Z,i.lanes=v,i;case S:return Qo(l.children,m,v,r);case C:_=8,m|=24;break;case T:return i=yi(12,l,r,m|2),i.elementType=T,i.lanes=v,i;case z:return i=yi(13,l,r,m),i.elementType=z,i.lanes=v,i;case U:return i=yi(19,l,r,m),i.elementType=U,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:_=10;break t;case D:_=9;break t;case P:_=11;break t;case O:_=14;break t;case H:_=16,h=null;break t}_=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return r=yi(_,l,r,m),r.elementType=i,r.type=h,r.lanes=v,r}function Qo(i,r,l,h){return i=yi(7,i,h,r),i.lanes=l,i}function Xb(i,r,l){return i=yi(6,i,null,r),i.lanes=l,i}function eE(i){var r=yi(18,null,null,0);return r.stateNode=i,r}function Yb(i,r,l){return r=yi(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var nE=new WeakMap;function Gi(i,r){if(typeof i=="object"&&i!==null){var l=nE.get(i);return l!==void 0?l:(r={value:i,source:r,stack:hs(r)},nE.set(i,r),r)}return{value:i,source:r,stack:hs(r)}}var Xc=[],Yc=0,$g=null,pd=0,$i=[],Xi=0,La=null,Fs=1,Is="";function Sr(i,r){Xc[Yc++]=pd,Xc[Yc++]=$g,$g=i,pd=r}function iE(i,r,l){$i[Xi++]=Fs,$i[Xi++]=Is,$i[Xi++]=La,La=i;var h=Fs;i=Is;var m=32-$n(h)-1;h&=~(1<<m),l+=1;var v=32-$n(r)+m;if(30<v){var _=m-m%5;v=(h&(1<<_)-1).toString(32),h>>=_,m-=_,Fs=1<<32-$n(r)+m|l<<m|h,Is=v+i}else Fs=1<<v|l<<m|h,Is=i}function Kb(i){i.return!==null&&(Sr(i,1),iE(i,1,0))}function Wb(i){for(;i===$g;)$g=Xc[--Yc],Xc[Yc]=null,pd=Xc[--Yc],Xc[Yc]=null;for(;i===La;)La=$i[--Xi],$i[Xi]=null,Is=$i[--Xi],$i[Xi]=null,Fs=$i[--Xi],$i[Xi]=null}function sE(i,r){$i[Xi++]=Fs,$i[Xi++]=Is,$i[Xi++]=La,Fs=r.id,Is=r.overflow,La=i}var xn=null,ke=null,Kt=!1,Oa=null,Yi=!1,Qb=Error(n(519));function ja(i){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gd(Gi(r,i)),Qb}function rE(i){var r=i.stateNode,l=i.type,h=i.memoizedProps;switch(r[bn]=i,r[ei]=h,l){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(l=0;l<Fd.length;l++)Ht(Fd[l],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":Ht("invalid",r),vS(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ht("invalid",r);break;case"textarea":Ht("invalid",r),xS(r,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||h.suppressHydrationWarning===!0||AC(r.textContent,l)?(h.popover!=null&&(Ht("beforetoggle",r),Ht("toggle",r)),h.onScroll!=null&&Ht("scroll",r),h.onScrollEnd!=null&&Ht("scrollend",r),h.onClick!=null&&(r.onclick=wr),r=!0):r=!1,r||ja(i,!0)}function aE(i){for(xn=i.return;xn;)switch(xn.tag){case 5:case 31:case 13:Yi=!1;return;case 27:case 3:Yi=!0;return;default:xn=xn.return}}function Kc(i){if(i!==xn)return!1;if(!Kt)return aE(i),Kt=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||gx(i.type,i.memoizedProps)),l=!l),l&&ke&&ja(i),aE(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));ke=MC(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));ke=MC(i)}else r===27?(r=ke,Ka(i.type)?(i=xx,xx=null,ke=i):ke=r):ke=xn?Wi(i.stateNode.nextSibling):null;return!0}function Zo(){ke=xn=null,Kt=!1}function Zb(){var i=Oa;return i!==null&&(ai===null?ai=i:ai.push.apply(ai,i),Oa=null),i}function gd(i){Oa===null?Oa=[i]:Oa.push(i)}var Jb=j(null),Jo=null,Er=null;function Pa(i,r,l){tt(Jb,r._currentValue),r._currentValue=l}function Cr(i){i._currentValue=Jb.current,G(Jb)}function t0(i,r,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),i===l)break;i=i.return}}function e0(i,r,l,h){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var v=m.dependencies;if(v!==null){var _=m.child;v=v.firstContext;t:for(;v!==null;){var R=v;v=m;for(var F=0;F<r.length;F++)if(R.context===r[F]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),t0(v.return,l,i),h||(_=null);break t}v=R.next}}else if(m.tag===18){if(_=m.return,_===null)throw Error(n(341));_.lanes|=l,v=_.alternate,v!==null&&(v.lanes|=l),t0(_,l,i),_=null}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===i){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}}function Wc(i,r,l,h){i=null;for(var m=r,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var _=m.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var R=m.type;mi(m.pendingProps.value,_.value)||(i!==null?i.push(R):i=[R])}}else if(m===ht.current){if(_=m.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Hd):i=[Hd])}m=m.return}i!==null&&e0(r,i,l,h),r.flags|=262144}function Xg(i){for(i=i.firstContext;i!==null;){if(!mi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function tl(i){Jo=i,Er=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function wn(i){return oE(Jo,i)}function Yg(i,r){return Jo===null&&tl(i),oE(i,r)}function oE(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Er===null){if(i===null)throw Error(n(308));Er=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Er=Er.next=r;return l}var AO=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},_O=s.unstable_scheduleCallback,SO=s.unstable_NormalPriority,qe={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function n0(){return{controller:new AO,data:new Map,refCount:0}}function md(i){i.refCount--,i.refCount===0&&_O(SO,function(){i.controller.abort()})}var yd=null,i0=0,Qc=0,Zc=null;function EO(i,r){if(yd===null){var l=yd=[];i0=0,Qc=ax(),Zc={status:"pending",value:void 0,then:function(h){l.push(h)}}}return i0++,r.then(lE,lE),r}function lE(){if(--i0===0&&yd!==null){Zc!==null&&(Zc.status="fulfilled");var i=yd;yd=null,Qc=0,Zc=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function CO(i,r){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){h.status="fulfilled",h.value=r;for(var m=0;m<l.length;m++)(0,l[m])(r)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var cE=I.S;I.S=function(i,r){$1=vn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&EO(i,r),cE!==null&&cE(i,r)};var el=j(null);function s0(){var i=el.current;return i!==null?i:xe.pooledCache}function Kg(i,r){r===null?tt(el,el.current):tt(el,r.pool)}function uE(){var i=s0();return i===null?null:{parent:qe._currentValue,pool:i}}var Jc=Error(n(460)),r0=Error(n(474)),Wg=Error(n(542)),Qg={then:function(){}};function hE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function dE(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(wr,wr),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,pE(i),i;default:if(typeof r.status=="string")r.then(wr,wr);else{if(i=xe,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=r,i.status="pending",i.then(function(h){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=h}},function(h){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,pE(i),i}throw il=r,Jc}}function nl(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(il=l,Jc):l}}var il=null;function fE(){if(il===null)throw Error(n(459));var i=il;return il=null,i}function pE(i){if(i===Jc||i===Wg)throw Error(n(483))}var tu=null,vd=0;function Zg(i){var r=vd;return vd+=1,tu===null&&(tu=[]),dE(tu,i,r)}function bd(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Jg(i,r){throw r.$$typeof===b?Error(n(525)):(i=Object.prototype.toString.call(r),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function gE(i){function r(V,B){if(i){var Y=V.deletions;Y===null?(V.deletions=[B],V.flags|=16):Y.push(B)}}function l(V,B){if(!i)return null;for(;B!==null;)r(V,B),B=B.sibling;return null}function h(V){for(var B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function m(V,B){return V=_r(V,B),V.index=0,V.sibling=null,V}function v(V,B,Y){return V.index=Y,i?(Y=V.alternate,Y!==null?(Y=Y.index,Y<B?(V.flags|=67108866,B):Y):(V.flags|=67108866,B)):(V.flags|=1048576,B)}function _(V){return i&&V.alternate===null&&(V.flags|=67108866),V}function R(V,B,Y,st){return B===null||B.tag!==6?(B=Xb(Y,V.mode,st),B.return=V,B):(B=m(B,Y),B.return=V,B)}function F(V,B,Y,st){var St=Y.type;return St===S?et(V,B,Y.props.children,st,Y.key):B!==null&&(B.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===H&&nl(St)===B.type)?(B=m(B,Y.props),bd(B,Y),B.return=V,B):(B=Gg(Y.type,Y.key,Y.props,null,V.mode,st),bd(B,Y),B.return=V,B)}function K(V,B,Y,st){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=Yb(Y,V.mode,st),B.return=V,B):(B=m(B,Y.children||[]),B.return=V,B)}function et(V,B,Y,st,St){return B===null||B.tag!==7?(B=Qo(Y,V.mode,st,St),B.return=V,B):(B=m(B,Y),B.return=V,B)}function rt(V,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Xb(""+B,V.mode,Y),B.return=V,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return Y=Gg(B.type,B.key,B.props,null,V.mode,Y),bd(Y,B),Y.return=V,Y;case A:return B=Yb(B,V.mode,Y),B.return=V,B;case H:return B=nl(B),rt(V,B,Y)}if(nt(B)||it(B))return B=Qo(B,V.mode,Y,null),B.return=V,B;if(typeof B.then=="function")return rt(V,Zg(B),Y);if(B.$$typeof===L)return rt(V,Yg(V,B),Y);Jg(V,B)}return null}function Q(V,B,Y,st){var St=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return St!==null?null:R(V,B,""+Y,st);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===St?F(V,B,Y,st):null;case A:return Y.key===St?K(V,B,Y,st):null;case H:return Y=nl(Y),Q(V,B,Y,st)}if(nt(Y)||it(Y))return St!==null?null:et(V,B,Y,st,null);if(typeof Y.then=="function")return Q(V,B,Zg(Y),st);if(Y.$$typeof===L)return Q(V,B,Yg(V,Y),st);Jg(V,Y)}return null}function J(V,B,Y,st,St){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return V=V.get(Y)||null,R(B,V,""+st,St);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case w:return V=V.get(st.key===null?Y:st.key)||null,F(B,V,st,St);case A:return V=V.get(st.key===null?Y:st.key)||null,K(B,V,st,St);case H:return st=nl(st),J(V,B,Y,st,St)}if(nt(st)||it(st))return V=V.get(Y)||null,et(B,V,st,St,null);if(typeof st.then=="function")return J(V,B,Y,Zg(st),St);if(st.$$typeof===L)return J(V,B,Y,Yg(B,st),St);Jg(B,st)}return null}function mt(V,B,Y,st){for(var St=null,ne=null,xt=B,Pt=B=0,Yt=null;xt!==null&&Pt<Y.length;Pt++){xt.index>Pt?(Yt=xt,xt=null):Yt=xt.sibling;var ie=Q(V,xt,Y[Pt],st);if(ie===null){xt===null&&(xt=Yt);break}i&&xt&&ie.alternate===null&&r(V,xt),B=v(ie,B,Pt),ne===null?St=ie:ne.sibling=ie,ne=ie,xt=Yt}if(Pt===Y.length)return l(V,xt),Kt&&Sr(V,Pt),St;if(xt===null){for(;Pt<Y.length;Pt++)xt=rt(V,Y[Pt],st),xt!==null&&(B=v(xt,B,Pt),ne===null?St=xt:ne.sibling=xt,ne=xt);return Kt&&Sr(V,Pt),St}for(xt=h(xt);Pt<Y.length;Pt++)Yt=J(xt,V,Pt,Y[Pt],st),Yt!==null&&(i&&Yt.alternate!==null&&xt.delete(Yt.key===null?Pt:Yt.key),B=v(Yt,B,Pt),ne===null?St=Yt:ne.sibling=Yt,ne=Yt);return i&&xt.forEach(function(to){return r(V,to)}),Kt&&Sr(V,Pt),St}function Tt(V,B,Y,st){if(Y==null)throw Error(n(151));for(var St=null,ne=null,xt=B,Pt=B=0,Yt=null,ie=Y.next();xt!==null&&!ie.done;Pt++,ie=Y.next()){xt.index>Pt?(Yt=xt,xt=null):Yt=xt.sibling;var to=Q(V,xt,ie.value,st);if(to===null){xt===null&&(xt=Yt);break}i&&xt&&to.alternate===null&&r(V,xt),B=v(to,B,Pt),ne===null?St=to:ne.sibling=to,ne=to,xt=Yt}if(ie.done)return l(V,xt),Kt&&Sr(V,Pt),St;if(xt===null){for(;!ie.done;Pt++,ie=Y.next())ie=rt(V,ie.value,st),ie!==null&&(B=v(ie,B,Pt),ne===null?St=ie:ne.sibling=ie,ne=ie);return Kt&&Sr(V,Pt),St}for(xt=h(xt);!ie.done;Pt++,ie=Y.next())ie=J(xt,V,Pt,ie.value,st),ie!==null&&(i&&ie.alternate!==null&&xt.delete(ie.key===null?Pt:ie.key),B=v(ie,B,Pt),ne===null?St=ie:ne.sibling=ie,ne=ie);return i&&xt.forEach(function(Fj){return r(V,Fj)}),Kt&&Sr(V,Pt),St}function me(V,B,Y,st){if(typeof Y=="object"&&Y!==null&&Y.type===S&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:t:{for(var St=Y.key;B!==null;){if(B.key===St){if(St=Y.type,St===S){if(B.tag===7){l(V,B.sibling),st=m(B,Y.props.children),st.return=V,V=st;break t}}else if(B.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===H&&nl(St)===B.type){l(V,B.sibling),st=m(B,Y.props),bd(st,Y),st.return=V,V=st;break t}l(V,B);break}else r(V,B);B=B.sibling}Y.type===S?(st=Qo(Y.props.children,V.mode,st,Y.key),st.return=V,V=st):(st=Gg(Y.type,Y.key,Y.props,null,V.mode,st),bd(st,Y),st.return=V,V=st)}return _(V);case A:t:{for(St=Y.key;B!==null;){if(B.key===St)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){l(V,B.sibling),st=m(B,Y.children||[]),st.return=V,V=st;break t}else{l(V,B);break}else r(V,B);B=B.sibling}st=Yb(Y,V.mode,st),st.return=V,V=st}return _(V);case H:return Y=nl(Y),me(V,B,Y,st)}if(nt(Y))return mt(V,B,Y,st);if(it(Y)){if(St=it(Y),typeof St!="function")throw Error(n(150));return Y=St.call(Y),Tt(V,B,Y,st)}if(typeof Y.then=="function")return me(V,B,Zg(Y),st);if(Y.$$typeof===L)return me(V,B,Yg(V,Y),st);Jg(V,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(l(V,B.sibling),st=m(B,Y),st.return=V,V=st):(l(V,B),st=Xb(Y,V.mode,st),st.return=V,V=st),_(V)):l(V,B)}return function(V,B,Y,st){try{vd=0;var St=me(V,B,Y,st);return tu=null,St}catch(xt){if(xt===Jc||xt===Wg)throw xt;var ne=yi(29,xt,null,V.mode);return ne.lanes=st,ne.return=V,ne}finally{}}}var sl=gE(!0),mE=gE(!1),Fa=!1;function a0(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function o0(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ia(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function za(i,r,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ae&2)!==0){var m=h.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),h.pending=r,r=qg(i),JS(i,null,l),r}return Vg(i,h,r,l),qg(i)}function xd(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,oS(i,l)}}function l0(i,r){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?m=v=_:v=v.next=_,l=l.next}while(l!==null);v===null?m=v=r:v=v.next=r}else m=v=r;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var c0=!1;function wd(){if(c0){var i=Zc;if(i!==null)throw i}}function Ad(i,r,l,h){c0=!1;var m=i.updateQueue;Fa=!1;var v=m.firstBaseUpdate,_=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var F=R,K=F.next;F.next=null,_===null?v=K:_.next=K,_=F;var et=i.alternate;et!==null&&(et=et.updateQueue,R=et.lastBaseUpdate,R!==_&&(R===null?et.firstBaseUpdate=K:R.next=K,et.lastBaseUpdate=F))}if(v!==null){var rt=m.baseState;_=0,et=K=F=null,R=v;do{var Q=R.lane&-536870913,J=Q!==R.lane;if(J?(Xt&Q)===Q:(h&Q)===Q){Q!==0&&Q===Qc&&(c0=!0),et!==null&&(et=et.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var mt=i,Tt=R;Q=r;var me=l;switch(Tt.tag){case 1:if(mt=Tt.payload,typeof mt=="function"){rt=mt.call(me,rt,Q);break t}rt=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=Tt.payload,Q=typeof mt=="function"?mt.call(me,rt,Q):mt,Q==null)break t;rt=y({},rt,Q);break t;case 2:Fa=!0}}Q=R.callback,Q!==null&&(i.flags|=64,J&&(i.flags|=8192),J=m.callbacks,J===null?m.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:R.tag,payload:R.payload,callback:R.callback,next:null},et===null?(K=et=J,F=rt):et=et.next=J,_|=Q;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;J=R,R=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);et===null&&(F=rt),m.baseState=F,m.firstBaseUpdate=K,m.lastBaseUpdate=et,v===null&&(m.shared.lanes=0),qa|=_,i.lanes=_,i.memoizedState=rt}}function yE(i,r){if(typeof i!="function")throw Error(n(191,i));i.call(r)}function vE(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)yE(l[i],r)}var eu=j(null),tm=j(0);function bE(i,r){i=jr,tt(tm,i),tt(eu,r),jr=i|r.baseLanes}function u0(){tt(tm,jr),tt(eu,eu.current)}function h0(){jr=tm.current,G(eu),G(tm)}var vi=j(null),Ki=null;function Ua(i){var r=i.alternate;tt(Ue,Ue.current&1),tt(vi,i),Ki===null&&(r===null||eu.current!==null||r.memoizedState!==null)&&(Ki=i)}function d0(i){tt(Ue,Ue.current),tt(vi,i),Ki===null&&(Ki=i)}function xE(i){i.tag===22?(tt(Ue,Ue.current),tt(vi,i),Ki===null&&(Ki=i)):Ba()}function Ba(){tt(Ue,Ue.current),tt(vi,vi.current)}function bi(i){G(vi),Ki===i&&(Ki=null),G(Ue)}var Ue=j(0);function em(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||vx(l)||bx(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Tr=0,Ot=null,pe=null,Ge=null,nm=!1,nu=!1,rl=!1,im=0,_d=0,iu=null,TO=0;function Fe(){throw Error(n(321))}function f0(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!mi(i[l],r[l]))return!1;return!0}function p0(i,r,l,h,m,v){return Tr=v,Ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,I.H=i===null||i.memoizedState===null?i1:R0,rl=!1,v=l(h,m),rl=!1,nu&&(v=AE(r,l,h,m)),wE(i),v}function wE(i){I.H=Cd;var r=pe!==null&&pe.next!==null;if(Tr=0,Ge=pe=Ot=null,nm=!1,_d=0,iu=null,r)throw Error(n(300));i===null||$e||(i=i.dependencies,i!==null&&Xg(i)&&($e=!0))}function AE(i,r,l,h){Ot=i;var m=0;do{if(nu&&(iu=null),_d=0,nu=!1,25<=m)throw Error(n(301));if(m+=1,Ge=pe=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}I.H=s1,v=r(l,h)}while(nu);return v}function kO(){var i=I.H,r=i.useState()[0];return r=typeof r.then=="function"?Sd(r):r,i=i.useState()[0],(pe!==null?pe.memoizedState:null)!==i&&(Ot.flags|=1024),r}function g0(){var i=im!==0;return im=0,i}function m0(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function y0(i){if(nm){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}nm=!1}Tr=0,Ge=pe=Ot=null,nu=!1,_d=im=0,iu=null}function Xn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ot.memoizedState=Ge=i:Ge=Ge.next=i,Ge}function Be(){if(pe===null){var i=Ot.alternate;i=i!==null?i.memoizedState:null}else i=pe.next;var r=Ge===null?Ot.memoizedState:Ge.next;if(r!==null)Ge=r,pe=i;else{if(i===null)throw Ot.alternate===null?Error(n(467)):Error(n(310));pe=i,i={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},Ge===null?Ot.memoizedState=Ge=i:Ge=Ge.next=i}return Ge}function sm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sd(i){var r=_d;return _d+=1,iu===null&&(iu=[]),i=dE(iu,i,r),r=Ot,(Ge===null?r.memoizedState:Ge.next)===null&&(r=r.alternate,I.H=r===null||r.memoizedState===null?i1:R0),i}function rm(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Sd(i);if(i.$$typeof===L)return wn(i)}throw Error(n(438,String(i)))}function v0(i){var r=null,l=Ot.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var h=Ot.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=sm(),Ot.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),h=0;h<i;h++)l[h]=$;return r.index++,l}function kr(i,r){return typeof r=="function"?r(i):r}function am(i){var r=Be();return b0(r,pe,i)}function b0(i,r,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var m=i.baseQueue,v=h.pending;if(v!==null){if(m!==null){var _=m.next;m.next=v.next,v.next=_}r.baseQueue=m=v,h.pending=null}if(v=i.baseState,m===null)i.memoizedState=v;else{r=m.next;var R=_=null,F=null,K=r,et=!1;do{var rt=K.lane&-536870913;if(rt!==K.lane?(Xt&rt)===rt:(Tr&rt)===rt){var Q=K.revertLane;if(Q===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),rt===Qc&&(et=!0);else if((Tr&Q)===Q){K=K.next,Q===Qc&&(et=!0);continue}else rt={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},F===null?(R=F=rt,_=v):F=F.next=rt,Ot.lanes|=Q,qa|=Q;rt=K.action,rl&&l(v,rt),v=K.hasEagerState?K.eagerState:l(v,rt)}else Q={lane:rt,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},F===null?(R=F=Q,_=v):F=F.next=Q,Ot.lanes|=rt,qa|=rt;K=K.next}while(K!==null&&K!==r);if(F===null?_=v:F.next=R,!mi(v,i.memoizedState)&&($e=!0,et&&(l=Zc,l!==null)))throw l;i.memoizedState=v,i.baseState=_,i.baseQueue=F,h.lastRenderedState=v}return m===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function x0(i){var r=Be(),l=r.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,m=l.pending,v=r.memoizedState;if(m!==null){l.pending=null;var _=m=m.next;do v=i(v,_.action),_=_.next;while(_!==m);mi(v,r.memoizedState)||($e=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,h]}function _E(i,r,l){var h=Ot,m=Be(),v=Kt;if(v){if(l===void 0)throw Error(n(407));l=l()}else l=r();var _=!mi((pe||m).memoizedState,l);if(_&&(m.memoizedState=l,$e=!0),m=m.queue,_0(CE.bind(null,h,m,i),[i]),m.getSnapshot!==r||_||Ge!==null&&Ge.memoizedState.tag&1){if(h.flags|=2048,su(9,{destroy:void 0},EE.bind(null,h,m,l,r),null),xe===null)throw Error(n(349));v||(Tr&127)!==0||SE(h,r,l)}return l}function SE(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=Ot.updateQueue,r===null?(r=sm(),Ot.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function EE(i,r,l,h){r.value=l,r.getSnapshot=h,TE(r)&&kE(i)}function CE(i,r,l){return l(function(){TE(r)&&kE(i)})}function TE(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!mi(i,l)}catch{return!0}}function kE(i){var r=Wo(i,2);r!==null&&oi(r,i,2)}function w0(i){var r=Xn();if(typeof i=="function"){var l=i;if(i=l(),rl){Ps(!0);try{l()}finally{Ps(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:i},r}function RE(i,r,l,h){return i.baseState=l,b0(i,pe,typeof h=="function"?h:kr)}function RO(i,r,l,h,m){if(cm(i))throw Error(n(485));if(i=r.action,i!==null){var v={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){v.listeners.push(_)}};I.T!==null?l(!0):v.isTransition=!1,h(v),l=r.pending,l===null?(v.next=r.pending=v,NE(r,v)):(v.next=l.next,r.pending=l.next=v)}}function NE(i,r){var l=r.action,h=r.payload,m=i.state;if(r.isTransition){var v=I.T,_={};I.T=_;try{var R=l(m,h),F=I.S;F!==null&&F(_,R),ME(i,r,R)}catch(K){A0(i,r,K)}finally{v!==null&&_.types!==null&&(v.types=_.types),I.T=v}}else try{v=l(m,h),ME(i,r,v)}catch(K){A0(i,r,K)}}function ME(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){DE(i,r,h)},function(h){return A0(i,r,h)}):DE(i,r,l)}function DE(i,r,l){r.status="fulfilled",r.value=l,LE(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,NE(i,l)))}function A0(i,r,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=l,LE(r),r=r.next;while(r!==h)}i.action=null}function LE(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function OE(i,r){return r}function jE(i,r){if(Kt){var l=xe.formState;if(l!==null){t:{var h=Ot;if(Kt){if(ke){e:{for(var m=ke,v=Yi;m.nodeType!==8;){if(!v){m=null;break e}if(m=Wi(m.nextSibling),m===null){m=null;break e}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){ke=Wi(m.nextSibling),h=m.data==="F!";break t}}ja(h)}h=!1}h&&(r=l[0])}}return l=Xn(),l.memoizedState=l.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:OE,lastRenderedState:r},l.queue=h,l=t1.bind(null,Ot,h),h.dispatch=l,h=w0(!1),v=k0.bind(null,Ot,!1,h.queue),h=Xn(),m={state:r,dispatch:null,action:i,pending:null},h.queue=m,l=RO.bind(null,Ot,m,v,l),m.dispatch=l,h.memoizedState=i,[r,l,!1]}function PE(i){var r=Be();return FE(r,pe,i)}function FE(i,r,l){if(r=b0(i,r,OE)[0],i=am(kr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=Sd(r)}catch(_){throw _===Jc?Wg:_}else h=r;r=Be();var m=r.queue,v=m.dispatch;return l!==r.memoizedState&&(Ot.flags|=2048,su(9,{destroy:void 0},NO.bind(null,m,l),null)),[h,v,i]}function NO(i,r){i.action=r}function IE(i){var r=Be(),l=pe;if(l!==null)return FE(r,l,i);Be(),r=r.memoizedState,l=Be();var h=l.queue.dispatch;return l.memoizedState=i,[r,h,!1]}function su(i,r,l,h){return i={tag:i,create:l,deps:h,inst:r,next:null},r=Ot.updateQueue,r===null&&(r=sm(),Ot.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,r.lastEffect=i),i}function zE(){return Be().memoizedState}function om(i,r,l,h){var m=Xn();Ot.flags|=i,m.memoizedState=su(1|r,{destroy:void 0},l,h===void 0?null:h)}function lm(i,r,l,h){var m=Be();h=h===void 0?null:h;var v=m.memoizedState.inst;pe!==null&&h!==null&&f0(h,pe.memoizedState.deps)?m.memoizedState=su(r,v,l,h):(Ot.flags|=i,m.memoizedState=su(1|r,v,l,h))}function UE(i,r){om(8390656,8,i,r)}function _0(i,r){lm(2048,8,i,r)}function MO(i){Ot.flags|=4;var r=Ot.updateQueue;if(r===null)r=sm(),Ot.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function BE(i){var r=Be().memoizedState;return MO({ref:r,nextImpl:i}),function(){if((ae&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function HE(i,r){return lm(4,2,i,r)}function VE(i,r){return lm(4,4,i,r)}function qE(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function GE(i,r,l){l=l!=null?l.concat([i]):null,lm(4,4,qE.bind(null,r,i),l)}function S0(){}function $E(i,r){var l=Be();r=r===void 0?null:r;var h=l.memoizedState;return r!==null&&f0(r,h[1])?h[0]:(l.memoizedState=[i,r],i)}function XE(i,r){var l=Be();r=r===void 0?null:r;var h=l.memoizedState;if(r!==null&&f0(r,h[1]))return h[0];if(h=i(),rl){Ps(!0);try{i()}finally{Ps(!1)}}return l.memoizedState=[h,r],h}function E0(i,r,l){return l===void 0||(Tr&1073741824)!==0&&(Xt&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=Y1(),Ot.lanes|=i,qa|=i,l)}function YE(i,r,l,h){return mi(l,r)?l:eu.current!==null?(i=E0(i,l,h),mi(i,r)||($e=!0),i):(Tr&42)===0||(Tr&1073741824)!==0&&(Xt&261930)===0?($e=!0,i.memoizedState=l):(i=Y1(),Ot.lanes|=i,qa|=i,r)}function KE(i,r,l,h,m){var v=q.p;q.p=v!==0&&8>v?v:8;var _=I.T,R={};I.T=R,k0(i,!1,r,l);try{var F=m(),K=I.S;if(K!==null&&K(R,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var et=CO(F,h);Ed(i,r,et,Ai(i))}else Ed(i,r,h,Ai(i))}catch(rt){Ed(i,r,{then:function(){},status:"rejected",reason:rt},Ai())}finally{q.p=v,_!==null&&R.types!==null&&(_.types=R.types),I.T=_}}function DO(){}function C0(i,r,l,h){if(i.tag!==5)throw Error(n(476));var m=WE(i).queue;KE(i,m,r,X,l===null?DO:function(){return QE(i),l(h)})}function WE(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:X},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function QE(i){var r=WE(i);r.next===null&&(r=i.alternate.memoizedState),Ed(i,r.next.queue,{},Ai())}function T0(){return wn(Hd)}function ZE(){return Be().memoizedState}function JE(){return Be().memoizedState}function LO(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=Ai();i=Ia(l);var h=za(r,i,l);h!==null&&(oi(h,r,l),xd(h,r,l)),r={cache:n0()},i.payload=r;return}r=r.return}}function OO(i,r,l){var h=Ai();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},cm(i)?e1(r,l):(l=Gb(i,r,l,h),l!==null&&(oi(l,i,h),n1(l,r,h)))}function t1(i,r,l){var h=Ai();Ed(i,r,l,h)}function Ed(i,r,l,h){var m={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(cm(i))e1(r,m);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var _=r.lastRenderedState,R=v(_,l);if(m.hasEagerState=!0,m.eagerState=R,mi(R,_))return Vg(i,r,m,0),xe===null&&Hg(),!1}catch{}finally{}if(l=Gb(i,r,m,h),l!==null)return oi(l,i,h),n1(l,r,h),!0}return!1}function k0(i,r,l,h){if(h={lane:2,revertLane:ax(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},cm(i)){if(r)throw Error(n(479))}else r=Gb(i,l,h,2),r!==null&&oi(r,i,2)}function cm(i){var r=i.alternate;return i===Ot||r!==null&&r===Ot}function e1(i,r){nu=nm=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function n1(i,r,l){if((l&4194048)!==0){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,oS(i,l)}}var Cd={readContext:wn,use:rm,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};Cd.useEffectEvent=Fe;var i1={readContext:wn,use:rm,useCallback:function(i,r){return Xn().memoizedState=[i,r===void 0?null:r],i},useContext:wn,useEffect:UE,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,om(4194308,4,qE.bind(null,r,i),l)},useLayoutEffect:function(i,r){return om(4194308,4,i,r)},useInsertionEffect:function(i,r){om(4,2,i,r)},useMemo:function(i,r){var l=Xn();r=r===void 0?null:r;var h=i();if(rl){Ps(!0);try{i()}finally{Ps(!1)}}return l.memoizedState=[h,r],h},useReducer:function(i,r,l){var h=Xn();if(l!==void 0){var m=l(r);if(rl){Ps(!0);try{l(r)}finally{Ps(!1)}}}else m=r;return h.memoizedState=h.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},h.queue=i,i=i.dispatch=OO.bind(null,Ot,i),[h.memoizedState,i]},useRef:function(i){var r=Xn();return i={current:i},r.memoizedState=i},useState:function(i){i=w0(i);var r=i.queue,l=t1.bind(null,Ot,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:S0,useDeferredValue:function(i,r){var l=Xn();return E0(l,i,r)},useTransition:function(){var i=w0(!1);return i=KE.bind(null,Ot,i.queue,!0,!1),Xn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var h=Ot,m=Xn();if(Kt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=r(),xe===null)throw Error(n(349));(Xt&127)!==0||SE(h,r,l)}m.memoizedState=l;var v={value:l,getSnapshot:r};return m.queue=v,UE(CE.bind(null,h,v,i),[i]),h.flags|=2048,su(9,{destroy:void 0},EE.bind(null,h,v,l,r),null),l},useId:function(){var i=Xn(),r=xe.identifierPrefix;if(Kt){var l=Is,h=Fs;l=(h&~(1<<32-$n(h)-1)).toString(32)+l,r="_"+r+"R_"+l,l=im++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=TO++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:T0,useFormState:jE,useActionState:jE,useOptimistic:function(i){var r=Xn();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=k0.bind(null,Ot,!0,l),l.dispatch=r,[i,r]},useMemoCache:v0,useCacheRefresh:function(){return Xn().memoizedState=LO.bind(null,Ot)},useEffectEvent:function(i){var r=Xn(),l={impl:i};return r.memoizedState=l,function(){if((ae&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},R0={readContext:wn,use:rm,useCallback:$E,useContext:wn,useEffect:_0,useImperativeHandle:GE,useInsertionEffect:HE,useLayoutEffect:VE,useMemo:XE,useReducer:am,useRef:zE,useState:function(){return am(kr)},useDebugValue:S0,useDeferredValue:function(i,r){var l=Be();return YE(l,pe.memoizedState,i,r)},useTransition:function(){var i=am(kr)[0],r=Be().memoizedState;return[typeof i=="boolean"?i:Sd(i),r]},useSyncExternalStore:_E,useId:ZE,useHostTransitionStatus:T0,useFormState:PE,useActionState:PE,useOptimistic:function(i,r){var l=Be();return RE(l,pe,i,r)},useMemoCache:v0,useCacheRefresh:JE};R0.useEffectEvent=BE;var s1={readContext:wn,use:rm,useCallback:$E,useContext:wn,useEffect:_0,useImperativeHandle:GE,useInsertionEffect:HE,useLayoutEffect:VE,useMemo:XE,useReducer:x0,useRef:zE,useState:function(){return x0(kr)},useDebugValue:S0,useDeferredValue:function(i,r){var l=Be();return pe===null?E0(l,i,r):YE(l,pe.memoizedState,i,r)},useTransition:function(){var i=x0(kr)[0],r=Be().memoizedState;return[typeof i=="boolean"?i:Sd(i),r]},useSyncExternalStore:_E,useId:ZE,useHostTransitionStatus:T0,useFormState:IE,useActionState:IE,useOptimistic:function(i,r){var l=Be();return pe!==null?RE(l,pe,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:v0,useCacheRefresh:JE};s1.useEffectEvent=BE;function N0(i,r,l,h){r=i.memoizedState,l=l(h,r),l=l==null?r:y({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var M0={enqueueSetState:function(i,r,l){i=i._reactInternals;var h=Ai(),m=Ia(h);m.payload=r,l!=null&&(m.callback=l),r=za(i,m,h),r!==null&&(oi(r,i,h),xd(r,i,h))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var h=Ai(),m=Ia(h);m.tag=1,m.payload=r,l!=null&&(m.callback=l),r=za(i,m,h),r!==null&&(oi(r,i,h),xd(r,i,h))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=Ai(),h=Ia(l);h.tag=2,r!=null&&(h.callback=r),r=za(i,h,l),r!==null&&(oi(r,i,l),xd(r,i,l))}};function r1(i,r,l,h,m,v,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,_):r.prototype&&r.prototype.isPureReactComponent?!dd(l,h)||!dd(m,v):!0}function a1(i,r,l,h){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,h),r.state!==i&&M0.enqueueReplaceState(r,r.state,null)}function al(i,r){var l=r;if("ref"in r){l={};for(var h in r)h!=="ref"&&(l[h]=r[h])}if(i=i.defaultProps){l===r&&(l=y({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}function o1(i){Bg(i)}function l1(i){console.error(i)}function c1(i){Bg(i)}function um(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function u1(i,r,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function D0(i,r,l){return l=Ia(l),l.tag=3,l.payload={element:null},l.callback=function(){um(i,r)},l}function h1(i){return i=Ia(i),i.tag=3,i}function d1(i,r,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var v=h.value;i.payload=function(){return m(v)},i.callback=function(){u1(r,l,h)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){u1(r,l,h),typeof m!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function jO(i,r,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=l.alternate,r!==null&&Wc(r,l,m,!0),l=vi.current,l!==null){switch(l.tag){case 31:case 13:return Ki===null?Am():l.alternate===null&&Ie===0&&(Ie=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===Qg?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([h]):r.add(h),ix(i,h,m)),!1;case 22:return l.flags|=65536,h===Qg?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([h]):l.add(h)),ix(i,h,m)),!1}throw Error(n(435,l.tag))}return ix(i,h,m),Am(),!1}if(Kt)return r=vi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,h!==Qb&&(i=Error(n(422),{cause:h}),gd(Gi(i,l)))):(h!==Qb&&(r=Error(n(423),{cause:h}),gd(Gi(r,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,h=Gi(h,l),m=D0(i.stateNode,h,m),l0(i,m),Ie!==4&&(Ie=2)),!1;var v=Error(n(520),{cause:h});if(v=Gi(v,l),Od===null?Od=[v]:Od.push(v),Ie!==4&&(Ie=2),r===null)return!0;h=Gi(h,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=D0(l.stateNode,h,i),l0(l,i),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ga===null||!Ga.has(v))))return l.flags|=65536,m&=-m,l.lanes|=m,m=h1(m),d1(m,i,l,h),l0(l,m),!1}l=l.return}while(l!==null);return!1}var L0=Error(n(461)),$e=!1;function An(i,r,l,h){r.child=i===null?mE(r,null,l,h):sl(r,i.child,l,h)}function f1(i,r,l,h,m){l=l.render;var v=r.ref;if("ref"in h){var _={};for(var R in h)R!=="ref"&&(_[R]=h[R])}else _=h;return tl(r),h=p0(i,r,l,_,v,m),R=g0(),i!==null&&!$e?(m0(i,r,m),Rr(i,r,m)):(Kt&&R&&Kb(r),r.flags|=1,An(i,r,h,m),r.child)}function p1(i,r,l,h,m){if(i===null){var v=l.type;return typeof v=="function"&&!$b(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,g1(i,r,v,h,m)):(i=Gg(l.type,null,h,r,r.mode,m),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!B0(i,m)){var _=v.memoizedProps;if(l=l.compare,l=l!==null?l:dd,l(_,h)&&i.ref===r.ref)return Rr(i,r,m)}return r.flags|=1,i=_r(v,h),i.ref=r.ref,i.return=r,r.child=i}function g1(i,r,l,h,m){if(i!==null){var v=i.memoizedProps;if(dd(v,h)&&i.ref===r.ref)if($e=!1,r.pendingProps=h=v,B0(i,m))(i.flags&131072)!==0&&($e=!0);else return r.lanes=i.lanes,Rr(i,r,m)}return O0(i,r,l,h,m)}function m1(i,r,l,h){var m=h.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,i!==null){for(h=r.child=i.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~v}else h=0,r.child=null;return y1(i,r,v,l,h)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Kg(r,v!==null?v.cachePool:null),v!==null?bE(r,v):u0(),xE(r);else return h=r.lanes=536870912,y1(i,r,v!==null?v.baseLanes|l:l,l,h)}else v!==null?(Kg(r,v.cachePool),bE(r,v),Ba(),r.memoizedState=null):(i!==null&&Kg(r,null),u0(),Ba());return An(i,r,m,l),r.child}function Td(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function y1(i,r,l,h,m){var v=s0();return v=v===null?null:{parent:qe._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},i!==null&&Kg(r,null),u0(),xE(r),i!==null&&Wc(i,r,h,!0),r.childLanes=m,null}function hm(i,r){return r=fm({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function v1(i,r,l){return sl(r,i.child,null,l),i=hm(r,r.pendingProps),i.flags|=2,bi(r),r.memoizedState=null,i}function PO(i,r,l){var h=r.pendingProps,m=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Kt){if(h.mode==="hidden")return i=hm(r,h),r.lanes=536870912,Td(null,i);if(d0(r),(i=ke)?(i=NC(i,Yi),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:La!==null?{id:Fs,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},l=eE(i),l.return=r,r.child=l,xn=r,ke=null)):i=null,i===null)throw ja(r);return r.lanes=536870912,null}return hm(r,h)}var v=i.memoizedState;if(v!==null){var _=v.dehydrated;if(d0(r),m)if(r.flags&256)r.flags&=-257,r=v1(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(n(558));else if($e||Wc(i,r,l,!1),m=(l&i.childLanes)!==0,$e||m){if(h=xe,h!==null&&(_=lS(h,l),_!==0&&_!==v.retryLane))throw v.retryLane=_,Wo(i,_),oi(h,i,_),L0;Am(),r=v1(i,r,l)}else i=v.treeContext,ke=Wi(_.nextSibling),xn=r,Kt=!0,Oa=null,Yi=!1,i!==null&&sE(r,i),r=hm(r,h),r.flags|=4096;return r}return i=_r(i.child,{mode:h.mode,children:h.children}),i.ref=r.ref,r.child=i,i.return=r,i}function dm(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function O0(i,r,l,h,m){return tl(r),l=p0(i,r,l,h,void 0,m),h=g0(),i!==null&&!$e?(m0(i,r,m),Rr(i,r,m)):(Kt&&h&&Kb(r),r.flags|=1,An(i,r,l,m),r.child)}function b1(i,r,l,h,m,v){return tl(r),r.updateQueue=null,l=AE(r,h,l,m),wE(i),h=g0(),i!==null&&!$e?(m0(i,r,v),Rr(i,r,v)):(Kt&&h&&Kb(r),r.flags|=1,An(i,r,l,v),r.child)}function x1(i,r,l,h,m){if(tl(r),r.stateNode===null){var v=$c,_=l.contextType;typeof _=="object"&&_!==null&&(v=wn(_)),v=new l(h,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=M0,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=h,v.state=r.memoizedState,v.refs={},a0(r),_=l.contextType,v.context=typeof _=="object"&&_!==null?wn(_):$c,v.state=r.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(N0(r,l,_,h),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(_=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),_!==v.state&&M0.enqueueReplaceState(v,v.state,null),Ad(r,h,v,m),wd(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(i===null){v=r.stateNode;var R=r.memoizedProps,F=al(l,R);v.props=F;var K=v.context,et=l.contextType;_=$c,typeof et=="object"&&et!==null&&(_=wn(et));var rt=l.getDerivedStateFromProps;et=typeof rt=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,et||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||K!==_)&&a1(r,v,h,_),Fa=!1;var Q=r.memoizedState;v.state=Q,Ad(r,h,v,m),wd(),K=r.memoizedState,R||Q!==K||Fa?(typeof rt=="function"&&(N0(r,l,rt,h),K=r.memoizedState),(F=Fa||r1(r,l,F,h,Q,K,_))?(et||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=K),v.props=h,v.state=K,v.context=_,h=F):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{v=r.stateNode,o0(i,r),_=r.memoizedProps,et=al(l,_),v.props=et,rt=r.pendingProps,Q=v.context,K=l.contextType,F=$c,typeof K=="object"&&K!==null&&(F=wn(K)),R=l.getDerivedStateFromProps,(K=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(_!==rt||Q!==F)&&a1(r,v,h,F),Fa=!1,Q=r.memoizedState,v.state=Q,Ad(r,h,v,m),wd();var J=r.memoizedState;_!==rt||Q!==J||Fa||i!==null&&i.dependencies!==null&&Xg(i.dependencies)?(typeof R=="function"&&(N0(r,l,R,h),J=r.memoizedState),(et=Fa||r1(r,l,et,h,Q,J,F)||i!==null&&i.dependencies!==null&&Xg(i.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,J,F),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,J,F)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=J),v.props=h,v.state=J,v.context=F,h=et):(typeof v.componentDidUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),h=!1)}return v=h,dm(i,r),h=(r.flags&128)!==0,v||h?(v=r.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&h?(r.child=sl(r,i.child,null,m),r.child=sl(r,null,l,m)):An(i,r,l,m),r.memoizedState=v.state,i=r.child):i=Rr(i,r,m),i}function w1(i,r,l,h){return Zo(),r.flags|=256,An(i,r,l,h),r.child}var j0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function P0(i){return{baseLanes:i,cachePool:uE()}}function F0(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=wi),i}function A1(i,r,l){var h=r.pendingProps,m=!1,v=(r.flags&128)!==0,_;if((_=v)||(_=i!==null&&i.memoizedState===null?!1:(Ue.current&2)!==0),_&&(m=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,i===null){if(Kt){if(m?Ua(r):Ba(),(i=ke)?(i=NC(i,Yi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:La!==null?{id:Fs,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},l=eE(i),l.return=r,r.child=l,xn=r,ke=null)):i=null,i===null)throw ja(r);return bx(i)?r.lanes=32:r.lanes=536870912,null}var R=h.children;return h=h.fallback,m?(Ba(),m=r.mode,R=fm({mode:"hidden",children:R},m),h=Qo(h,m,l,null),R.return=r,h.return=r,R.sibling=h,r.child=R,h=r.child,h.memoizedState=P0(l),h.childLanes=F0(i,_,l),r.memoizedState=j0,Td(null,h)):(Ua(r),I0(r,R))}var F=i.memoizedState;if(F!==null&&(R=F.dehydrated,R!==null)){if(v)r.flags&256?(Ua(r),r.flags&=-257,r=z0(i,r,l)):r.memoizedState!==null?(Ba(),r.child=i.child,r.flags|=128,r=null):(Ba(),R=h.fallback,m=r.mode,h=fm({mode:"visible",children:h.children},m),R=Qo(R,m,l,null),R.flags|=2,h.return=r,R.return=r,h.sibling=R,r.child=h,sl(r,i.child,null,l),h=r.child,h.memoizedState=P0(l),h.childLanes=F0(i,_,l),r.memoizedState=j0,r=Td(null,h));else if(Ua(r),bx(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var K=_.dgst;_=K,h=Error(n(419)),h.stack="",h.digest=_,gd({value:h,source:null,stack:null}),r=z0(i,r,l)}else if($e||Wc(i,r,l,!1),_=(l&i.childLanes)!==0,$e||_){if(_=xe,_!==null&&(h=lS(_,l),h!==0&&h!==F.retryLane))throw F.retryLane=h,Wo(i,h),oi(_,i,h),L0;vx(R)||Am(),r=z0(i,r,l)}else vx(R)?(r.flags|=192,r.child=i.child,r=null):(i=F.treeContext,ke=Wi(R.nextSibling),xn=r,Kt=!0,Oa=null,Yi=!1,i!==null&&sE(r,i),r=I0(r,h.children),r.flags|=4096);return r}return m?(Ba(),R=h.fallback,m=r.mode,F=i.child,K=F.sibling,h=_r(F,{mode:"hidden",children:h.children}),h.subtreeFlags=F.subtreeFlags&65011712,K!==null?R=_r(K,R):(R=Qo(R,m,l,null),R.flags|=2),R.return=r,h.return=r,h.sibling=R,r.child=h,Td(null,h),h=r.child,R=i.child.memoizedState,R===null?R=P0(l):(m=R.cachePool,m!==null?(F=qe._currentValue,m=m.parent!==F?{parent:F,pool:F}:m):m=uE(),R={baseLanes:R.baseLanes|l,cachePool:m}),h.memoizedState=R,h.childLanes=F0(i,_,l),r.memoizedState=j0,Td(i.child,h)):(Ua(r),l=i.child,i=l.sibling,l=_r(l,{mode:"visible",children:h.children}),l.return=r,l.sibling=null,i!==null&&(_=r.deletions,_===null?(r.deletions=[i],r.flags|=16):_.push(i)),r.child=l,r.memoizedState=null,l)}function I0(i,r){return r=fm({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function fm(i,r){return i=yi(22,i,null,r),i.lanes=0,i}function z0(i,r,l){return sl(r,i.child,null,l),i=I0(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function _1(i,r,l){i.lanes|=r;var h=i.alternate;h!==null&&(h.lanes|=r),t0(i.return,r,l)}function U0(i,r,l,h,m,v){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m,treeForkCount:v}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=l,_.tailMode=m,_.treeForkCount=v)}function S1(i,r,l){var h=r.pendingProps,m=h.revealOrder,v=h.tail;h=h.children;var _=Ue.current,R=(_&2)!==0;if(R?(_=_&1|2,r.flags|=128):_&=1,tt(Ue,_),An(i,r,h,l),h=Kt?pd:0,!R&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_1(i,l,r);else if(i.tag===19)_1(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(l=r.child,m=null;l!==null;)i=l.alternate,i!==null&&em(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=r.child,r.child=null):(m=l.sibling,l.sibling=null),U0(r,!1,m,l,v,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=r.child,r.child=null;m!==null;){if(i=m.alternate,i!==null&&em(i)===null){r.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}U0(r,!0,l,null,v,h);break;case"together":U0(r,!1,null,null,void 0,h);break;default:r.memoizedState=null}return r.child}function Rr(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),qa|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(Wc(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(n(153));if(r.child!==null){for(i=r.child,l=_r(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=_r(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function B0(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Xg(i)))}function FO(i,r,l){switch(r.tag){case 3:Gt(r,r.stateNode.containerInfo),Pa(r,qe,i.memoizedState.cache),Zo();break;case 27:case 5:$t(r);break;case 4:Gt(r,r.stateNode.containerInfo);break;case 10:Pa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,d0(r),null;break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Ua(r),r.flags|=128,null):(l&r.child.childLanes)!==0?A1(i,r,l):(Ua(r),i=Rr(i,r,l),i!==null?i.sibling:null);Ua(r);break;case 19:var m=(i.flags&128)!==0;if(h=(l&r.childLanes)!==0,h||(Wc(i,r,l,!1),h=(l&r.childLanes)!==0),m){if(h)return S1(i,r,l);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),tt(Ue,Ue.current),h)break;return null;case 22:return r.lanes=0,m1(i,r,l,r.pendingProps);case 24:Pa(r,qe,i.memoizedState.cache)}return Rr(i,r,l)}function E1(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)$e=!0;else{if(!B0(i,l)&&(r.flags&128)===0)return $e=!1,FO(i,r,l);$e=(i.flags&131072)!==0}else $e=!1,Kt&&(r.flags&1048576)!==0&&iE(r,pd,r.index);switch(r.lanes=0,r.tag){case 16:t:{var h=r.pendingProps;if(i=nl(r.elementType),r.type=i,typeof i=="function")$b(i)?(h=al(i,h),r.tag=1,r=x1(null,r,i,h,l)):(r.tag=0,r=O0(null,r,i,h,l));else{if(i!=null){var m=i.$$typeof;if(m===P){r.tag=11,r=f1(null,r,i,h,l);break t}else if(m===O){r.tag=14,r=p1(null,r,i,h,l);break t}}throw r=lt(i)||i,Error(n(306,r,""))}}return r;case 0:return O0(i,r,r.type,r.pendingProps,l);case 1:return h=r.type,m=al(h,r.pendingProps),x1(i,r,h,m,l);case 3:t:{if(Gt(r,r.stateNode.containerInfo),i===null)throw Error(n(387));h=r.pendingProps;var v=r.memoizedState;m=v.element,o0(i,r),Ad(r,h,null,l);var _=r.memoizedState;if(h=_.cache,Pa(r,qe,h),h!==v.cache&&e0(r,[qe],l,!0),wd(),h=_.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=w1(i,r,h,l);break t}else if(h!==m){m=Gi(Error(n(424)),r),gd(m),r=w1(i,r,h,l);break t}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ke=Wi(i.firstChild),xn=r,Kt=!0,Oa=null,Yi=!0,l=mE(r,null,h,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Zo(),h===m){r=Rr(i,r,l);break t}An(i,r,h,l)}r=r.child}return r;case 26:return dm(i,r),i===null?(l=PC(r.type,null,r.pendingProps,null))?r.memoizedState=l:Kt||(l=r.type,i=r.pendingProps,h=Rm(wt.current).createElement(l),h[bn]=r,h[ei]=i,_n(h,l,i),un(h),r.stateNode=h):r.memoizedState=PC(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return $t(r),i===null&&Kt&&(h=r.stateNode=LC(r.type,r.pendingProps,wt.current),xn=r,Yi=!0,m=ke,Ka(r.type)?(xx=m,ke=Wi(h.firstChild)):ke=m),An(i,r,r.pendingProps.children,l),dm(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Kt&&((m=h=ke)&&(h=fj(h,r.type,r.pendingProps,Yi),h!==null?(r.stateNode=h,xn=r,ke=Wi(h.firstChild),Yi=!1,m=!0):m=!1),m||ja(r)),$t(r),m=r.type,v=r.pendingProps,_=i!==null?i.memoizedProps:null,h=v.children,gx(m,v)?h=null:_!==null&&gx(m,_)&&(r.flags|=32),r.memoizedState!==null&&(m=p0(i,r,kO,null,null,l),Hd._currentValue=m),dm(i,r),An(i,r,h,l),r.child;case 6:return i===null&&Kt&&((i=l=ke)&&(l=pj(l,r.pendingProps,Yi),l!==null?(r.stateNode=l,xn=r,ke=null,i=!0):i=!1),i||ja(r)),null;case 13:return A1(i,r,l);case 4:return Gt(r,r.stateNode.containerInfo),h=r.pendingProps,i===null?r.child=sl(r,null,h,l):An(i,r,h,l),r.child;case 11:return f1(i,r,r.type,r.pendingProps,l);case 7:return An(i,r,r.pendingProps,l),r.child;case 8:return An(i,r,r.pendingProps.children,l),r.child;case 12:return An(i,r,r.pendingProps.children,l),r.child;case 10:return h=r.pendingProps,Pa(r,r.type,h.value),An(i,r,h.children,l),r.child;case 9:return m=r.type._context,h=r.pendingProps.children,tl(r),m=wn(m),h=h(m),r.flags|=1,An(i,r,h,l),r.child;case 14:return p1(i,r,r.type,r.pendingProps,l);case 15:return g1(i,r,r.type,r.pendingProps,l);case 19:return S1(i,r,l);case 31:return PO(i,r,l);case 22:return m1(i,r,l,r.pendingProps);case 24:return tl(r),h=wn(qe),i===null?(m=s0(),m===null&&(m=xe,v=n0(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=l),m=v),r.memoizedState={parent:h,cache:m},a0(r),Pa(r,qe,m)):((i.lanes&l)!==0&&(o0(i,r),Ad(r,null,null,l),wd()),m=i.memoizedState,v=r.memoizedState,m.parent!==h?(m={parent:h,cache:h},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Pa(r,qe,h)):(h=v.cache,Pa(r,qe,h),h!==m.cache&&e0(r,[qe],l,!0))),An(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function Nr(i){i.flags|=4}function H0(i,r,l,h,m){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(Z1())i.flags|=8192;else throw il=Qg,r0}else i.flags&=-16777217}function C1(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!BC(r))if(Z1())i.flags|=8192;else throw il=Qg,r0}function pm(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Te():536870912,i.lanes|=r,lu|=r)}function kd(i,r){if(!Kt)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Re(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(r)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=l,r}function IO(i,r,l){var h=r.pendingProps;switch(Wb(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(r),null;case 1:return Re(r),null;case 3:return l=r.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Cr(qe),Ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Kc(r)?Nr(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Zb())),Re(r),null;case 26:var m=r.type,v=r.memoizedState;return i===null?(Nr(r),v!==null?(Re(r),C1(r,v)):(Re(r),H0(r,m,null,h,l))):v?v!==i.memoizedState?(Nr(r),Re(r),C1(r,v)):(Re(r),r.flags&=-16777217):(i=i.memoizedProps,i!==h&&Nr(r),Re(r),H0(r,m,i,h,l)),null;case 27:if(ce(r),l=wt.current,m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==h&&Nr(r);else{if(!h){if(r.stateNode===null)throw Error(n(166));return Re(r),null}i=ot.current,Kc(r)?rE(r):(i=LC(m,h,l),r.stateNode=i,Nr(r))}return Re(r),null;case 5:if(ce(r),m=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==h&&Nr(r);else{if(!h){if(r.stateNode===null)throw Error(n(166));return Re(r),null}if(v=ot.current,Kc(r))rE(r);else{var _=Rm(wt.current);switch(v){case 1:v=_.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:v=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":v=_.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":v=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":v=_.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?v.multiple=!0:h.size&&(v.size=h.size);break;default:v=typeof h.is=="string"?_.createElement(m,{is:h.is}):_.createElement(m)}}v[bn]=r,v[ei]=h;t:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)v.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break t;for(;_.sibling===null;){if(_.return===null||_.return===r)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=v;t:switch(_n(v,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&Nr(r)}}return Re(r),H0(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==h&&Nr(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(n(166));if(i=wt.current,Kc(r)){if(i=r.stateNode,l=r.memoizedProps,h=null,m=xn,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}i[bn]=r,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||AC(i.nodeValue,l)),i||ja(r,!0)}else i=Rm(i).createTextNode(h),i[bn]=r,r.stateNode=i}return Re(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(h=Kc(r),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[bn]=r}else Zo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Re(r),i=!1}else l=Zb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(bi(r),r):(bi(r),null);if((r.flags&128)!==0)throw Error(n(558))}return Re(r),null;case 13:if(h=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Kc(r),h!==null&&h.dehydrated!==null){if(i===null){if(!m)throw Error(n(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[bn]=r}else Zo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Re(r),m=!1}else m=Zb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(bi(r),r):(bi(r),null)}return bi(r),(r.flags&128)!==0?(r.lanes=l,r):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=r.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),v=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),pm(r,r.updateQueue),Re(r),null);case 4:return Ft(),i===null&&ux(r.stateNode.containerInfo),Re(r),null;case 10:return Cr(r.type),Re(r),null;case 19:if(G(Ue),h=r.memoizedState,h===null)return Re(r),null;if(m=(r.flags&128)!==0,v=h.rendering,v===null)if(m)kd(h,!1);else{if(Ie!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=em(i),v!==null){for(r.flags|=128,kd(h,!1),i=v.updateQueue,r.updateQueue=i,pm(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)tE(l,i),l=l.sibling;return tt(Ue,Ue.current&1|2),Kt&&Sr(r,h.treeForkCount),r.child}i=i.sibling}h.tail!==null&&vn()>bm&&(r.flags|=128,m=!0,kd(h,!1),r.lanes=4194304)}else{if(!m)if(i=em(v),i!==null){if(r.flags|=128,m=!0,i=i.updateQueue,r.updateQueue=i,pm(r,i),kd(h,!0),h.tail===null&&h.tailMode==="hidden"&&!v.alternate&&!Kt)return Re(r),null}else 2*vn()-h.renderingStartTime>bm&&l!==536870912&&(r.flags|=128,m=!0,kd(h,!1),r.lanes=4194304);h.isBackwards?(v.sibling=r.child,r.child=v):(i=h.last,i!==null?i.sibling=v:r.child=v,h.last=v)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=vn(),i.sibling=null,l=Ue.current,tt(Ue,m?l&1|2:l&1),Kt&&Sr(r,h.treeForkCount),i):(Re(r),null);case 22:case 23:return bi(r),h0(),h=r.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(l&536870912)!==0&&(r.flags&128)===0&&(Re(r),r.subtreeFlags&6&&(r.flags|=8192)):Re(r),l=r.updateQueue,l!==null&&pm(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==l&&(r.flags|=2048),i!==null&&G(el),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Cr(qe),Re(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function zO(i,r){switch(Wb(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Cr(qe),Ft(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return ce(r),null;case 31:if(r.memoizedState!==null){if(bi(r),r.alternate===null)throw Error(n(340));Zo()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(bi(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Zo()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return G(Ue),null;case 4:return Ft(),null;case 10:return Cr(r.type),null;case 22:case 23:return bi(r),h0(),i!==null&&G(el),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Cr(qe),null;case 25:return null;default:return null}}function T1(i,r){switch(Wb(r),r.tag){case 3:Cr(qe),Ft();break;case 26:case 27:case 5:ce(r);break;case 4:Ft();break;case 31:r.memoizedState!==null&&bi(r);break;case 13:bi(r);break;case 19:G(Ue);break;case 10:Cr(r.type);break;case 22:case 23:bi(r),h0(),i!==null&&G(el);break;case 24:Cr(qe)}}function Rd(i,r){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&i)===i){h=void 0;var v=l.create,_=l.inst;h=v(),_.destroy=h}l=l.next}while(l!==m)}}catch(R){he(r,r.return,R)}}function Ha(i,r,l){try{var h=r.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var v=m.next;h=v;do{if((h.tag&i)===i){var _=h.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,m=r;var F=l,K=R;try{K()}catch(et){he(m,F,et)}}}h=h.next}while(h!==v)}}catch(et){he(r,r.return,et)}}function k1(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{vE(r,l)}catch(h){he(i,i.return,h)}}}function R1(i,r,l){l.props=al(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){he(i,r,h)}}function Nd(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(m){he(i,r,m)}}function zs(i,r){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){he(i,r,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){he(i,r,m)}else l.current=null}function N1(i){var r=i.type,l=i.memoizedProps,h=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){he(i,i.return,m)}}function V0(i,r,l){try{var h=i.stateNode;oj(h,i.type,l,r),h[ei]=r}catch(m){he(i,i.return,m)}}function M1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ka(i.type)||i.tag===4}function q0(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||M1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ka(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function G0(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=wr));else if(h!==4&&(h===27&&Ka(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(G0(i,r,l),i=i.sibling;i!==null;)G0(i,r,l),i=i.sibling}function gm(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(h!==4&&(h===27&&Ka(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(gm(i,r,l),i=i.sibling;i!==null;)gm(i,r,l),i=i.sibling}function D1(i){var r=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);_n(r,h,l),r[bn]=i,r[ei]=l}catch(v){he(i,i.return,v)}}var Mr=!1,Xe=!1,$0=!1,L1=typeof WeakSet=="function"?WeakSet:Set,hn=null;function UO(i,r){if(i=i.containerInfo,fx=Pm,i=GS(i),zb(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break t}var _=0,R=-1,F=-1,K=0,et=0,rt=i,Q=null;e:for(;;){for(var J;rt!==l||m!==0&&rt.nodeType!==3||(R=_+m),rt!==v||h!==0&&rt.nodeType!==3||(F=_+h),rt.nodeType===3&&(_+=rt.nodeValue.length),(J=rt.firstChild)!==null;)Q=rt,rt=J;for(;;){if(rt===i)break e;if(Q===l&&++K===m&&(R=_),Q===v&&++et===h&&(F=_),(J=rt.nextSibling)!==null)break;rt=Q,Q=rt.parentNode}rt=J}l=R===-1||F===-1?null:{start:R,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(px={focusedElem:i,selectionRange:l},Pm=!1,hn=r;hn!==null;)if(r=hn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,hn=i;else for(;hn!==null;){switch(r=hn,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)m=i[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,l=r,m=v.memoizedProps,v=v.memoizedState,h=l.stateNode;try{var mt=al(l.type,m);i=h.getSnapshotBeforeUpdate(mt,v),h.__reactInternalSnapshotBeforeUpdate=i}catch(Tt){he(l,l.return,Tt)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)yx(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":yx(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=r.sibling,i!==null){i.return=r.return,hn=i;break}hn=r.return}}function O1(i,r,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Lr(i,l),h&4&&Rd(5,l);break;case 1:if(Lr(i,l),h&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(_){he(l,l.return,_)}else{var m=al(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(m,r,i.__reactInternalSnapshotBeforeUpdate)}catch(_){he(l,l.return,_)}}h&64&&k1(l),h&512&&Nd(l,l.return);break;case 3:if(Lr(i,l),h&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{vE(i,r)}catch(_){he(l,l.return,_)}}break;case 27:r===null&&h&4&&D1(l);case 26:case 5:Lr(i,l),r===null&&h&4&&N1(l),h&512&&Nd(l,l.return);break;case 12:Lr(i,l);break;case 31:Lr(i,l),h&4&&F1(i,l);break;case 13:Lr(i,l),h&4&&I1(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=KO.bind(null,l),gj(i,l))));break;case 22:if(h=l.memoizedState!==null||Mr,!h){r=r!==null&&r.memoizedState!==null||Xe,m=Mr;var v=Xe;Mr=h,(Xe=r)&&!v?Or(i,l,(l.subtreeFlags&8772)!==0):Lr(i,l),Mr=m,Xe=v}break;case 30:break;default:Lr(i,l)}}function j1(i){var r=i.alternate;r!==null&&(i.alternate=null,j1(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Ab(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Me=null,ii=!1;function Dr(i,r,l){for(l=l.child;l!==null;)P1(i,r,l),l=l.sibling}function P1(i,r,l){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(qo,l)}catch{}switch(l.tag){case 26:Xe||zs(l,r),Dr(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Xe||zs(l,r);var h=Me,m=ii;Ka(l.type)&&(Me=l.stateNode,ii=!1),Dr(i,r,l),zd(l.stateNode),Me=h,ii=m;break;case 5:Xe||zs(l,r);case 6:if(h=Me,m=ii,Me=null,Dr(i,r,l),Me=h,ii=m,Me!==null)if(ii)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(l.stateNode)}catch(v){he(l,r,v)}else try{Me.removeChild(l.stateNode)}catch(v){he(l,r,v)}break;case 18:Me!==null&&(ii?(i=Me,kC(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),mu(i)):kC(Me,l.stateNode));break;case 4:h=Me,m=ii,Me=l.stateNode.containerInfo,ii=!0,Dr(i,r,l),Me=h,ii=m;break;case 0:case 11:case 14:case 15:Ha(2,l,r),Xe||Ha(4,l,r),Dr(i,r,l);break;case 1:Xe||(zs(l,r),h=l.stateNode,typeof h.componentWillUnmount=="function"&&R1(l,r,h)),Dr(i,r,l);break;case 21:Dr(i,r,l);break;case 22:Xe=(h=Xe)||l.memoizedState!==null,Dr(i,r,l),Xe=h;break;default:Dr(i,r,l)}}function F1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{mu(i)}catch(l){he(r,r.return,l)}}}function I1(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{mu(i)}catch(l){he(r,r.return,l)}}function BO(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new L1),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new L1),r;default:throw Error(n(435,i.tag))}}function mm(i,r){var l=BO(i);r.forEach(function(h){if(!l.has(h)){l.add(h);var m=WO.bind(null,i,h);h.then(m,m)}})}function si(i,r){var l=r.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],v=i,_=r,R=_;t:for(;R!==null;){switch(R.tag){case 27:if(Ka(R.type)){Me=R.stateNode,ii=!1;break t}break;case 5:Me=R.stateNode,ii=!1;break t;case 3:case 4:Me=R.stateNode.containerInfo,ii=!0;break t}R=R.return}if(Me===null)throw Error(n(160));P1(v,_,m),Me=null,ii=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)z1(r,i),r=r.sibling}var ps=null;function z1(i,r){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:si(r,i),ri(i),h&4&&(Ha(3,i,i.return),Rd(3,i),Ha(5,i,i.return));break;case 1:si(r,i),ri(i),h&512&&(Xe||l===null||zs(l,l.return)),h&64&&Mr&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=ps;if(si(r,i),ri(i),h&512&&(Xe||l===null||zs(l,l.return)),h&4){var v=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){t:{h=i.type,l=i.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":v=m.getElementsByTagName("title")[0],(!v||v[id]||v[bn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(h),m.head.insertBefore(v,m.querySelector("head > title"))),_n(v,h,l),v[bn]=i,un(v),h=v;break t;case"link":var _=zC("link","href",m).get(h+(l.href||""));if(_){for(var R=0;R<_.length;R++)if(v=_[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(R,1);break e}}v=m.createElement(h),_n(v,h,l),m.head.appendChild(v);break;case"meta":if(_=zC("meta","content",m).get(h+(l.content||""))){for(R=0;R<_.length;R++)if(v=_[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(R,1);break e}}v=m.createElement(h),_n(v,h,l),m.head.appendChild(v);break;default:throw Error(n(468,h))}v[bn]=i,un(v),h=v}i.stateNode=h}else UC(m,i.type,i.stateNode);else i.stateNode=IC(m,h,i.memoizedProps);else v!==h?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,h===null?UC(m,i.type,i.stateNode):IC(m,h,i.memoizedProps)):h===null&&i.stateNode!==null&&V0(i,i.memoizedProps,l.memoizedProps)}break;case 27:si(r,i),ri(i),h&512&&(Xe||l===null||zs(l,l.return)),l!==null&&h&4&&V0(i,i.memoizedProps,l.memoizedProps);break;case 5:if(si(r,i),ri(i),h&512&&(Xe||l===null||zs(l,l.return)),i.flags&32){m=i.stateNode;try{zc(m,"")}catch(mt){he(i,i.return,mt)}}h&4&&i.stateNode!=null&&(m=i.memoizedProps,V0(i,m,l!==null?l.memoizedProps:m)),h&1024&&($0=!0);break;case 6:if(si(r,i),ri(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(mt){he(i,i.return,mt)}}break;case 3:if(Dm=null,m=ps,ps=Nm(r.containerInfo),si(r,i),ps=m,ri(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{mu(r.containerInfo)}catch(mt){he(i,i.return,mt)}$0&&($0=!1,U1(i));break;case 4:h=ps,ps=Nm(i.stateNode.containerInfo),si(r,i),ri(i),ps=h;break;case 12:si(r,i),ri(i);break;case 31:si(r,i),ri(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,mm(i,h)));break;case 13:si(r,i),ri(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(vm=vn()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,mm(i,h)));break;case 22:m=i.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,K=Mr,et=Xe;if(Mr=K||m,Xe=et||F,si(r,i),Xe=et,Mr=K,ri(i),h&8192)t:for(r=i.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(l===null||F||Mr||Xe||ol(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){F=l=r;try{if(v=F.stateNode,m)_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=F.stateNode;var rt=F.memoizedProps.style,Q=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;R.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(mt){he(F,F.return,mt)}}}else if(r.tag===6){if(l===null){F=r;try{F.stateNode.nodeValue=m?"":F.memoizedProps}catch(mt){he(F,F.return,mt)}}}else if(r.tag===18){if(l===null){F=r;try{var J=F.stateNode;m?RC(J,!0):RC(F.stateNode,!1)}catch(mt){he(F,F.return,mt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,mm(i,l))));break;case 19:si(r,i),ri(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,mm(i,h)));break;case 30:break;case 21:break;default:si(r,i),ri(i)}}function ri(i){var r=i.flags;if(r&2){try{for(var l,h=i.return;h!==null;){if(M1(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var m=l.stateNode,v=q0(i);gm(i,v,m);break;case 5:var _=l.stateNode;l.flags&32&&(zc(_,""),l.flags&=-33);var R=q0(i);gm(i,R,_);break;case 3:case 4:var F=l.stateNode.containerInfo,K=q0(i);G0(i,K,F);break;default:throw Error(n(161))}}catch(et){he(i,i.return,et)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function U1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;U1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Lr(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)O1(i,r.alternate,r),r=r.sibling}function ol(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ha(4,r,r.return),ol(r);break;case 1:zs(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&R1(r,r.return,l),ol(r);break;case 27:zd(r.stateNode);case 26:case 5:zs(r,r.return),ol(r);break;case 22:r.memoizedState===null&&ol(r);break;case 30:ol(r);break;default:ol(r)}i=i.sibling}}function Or(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,m=i,v=r,_=v.flags;switch(v.tag){case 0:case 11:case 15:Or(m,v,l),Rd(4,v);break;case 1:if(Or(m,v,l),h=v,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(K){he(h,h.return,K)}if(h=v,m=h.updateQueue,m!==null){var R=h.stateNode;try{var F=m.shared.hiddenCallbacks;if(F!==null)for(m.shared.hiddenCallbacks=null,m=0;m<F.length;m++)yE(F[m],R)}catch(K){he(h,h.return,K)}}l&&_&64&&k1(v),Nd(v,v.return);break;case 27:D1(v);case 26:case 5:Or(m,v,l),l&&h===null&&_&4&&N1(v),Nd(v,v.return);break;case 12:Or(m,v,l);break;case 31:Or(m,v,l),l&&_&4&&F1(m,v);break;case 13:Or(m,v,l),l&&_&4&&I1(m,v);break;case 22:v.memoizedState===null&&Or(m,v,l),Nd(v,v.return);break;case 30:break;default:Or(m,v,l)}r=r.sibling}}function X0(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&md(l))}function Y0(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&md(i))}function gs(i,r,l,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)B1(i,r,l,h),r=r.sibling}function B1(i,r,l,h){var m=r.flags;switch(r.tag){case 0:case 11:case 15:gs(i,r,l,h),m&2048&&Rd(9,r);break;case 1:gs(i,r,l,h);break;case 3:gs(i,r,l,h),m&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&md(i)));break;case 12:if(m&2048){gs(i,r,l,h),i=r.stateNode;try{var v=r.memoizedProps,_=v.id,R=v.onPostCommit;typeof R=="function"&&R(_,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){he(r,r.return,F)}}else gs(i,r,l,h);break;case 31:gs(i,r,l,h);break;case 13:gs(i,r,l,h);break;case 23:break;case 22:v=r.stateNode,_=r.alternate,r.memoizedState!==null?v._visibility&2?gs(i,r,l,h):Md(i,r):v._visibility&2?gs(i,r,l,h):(v._visibility|=2,ru(i,r,l,h,(r.subtreeFlags&10256)!==0||!1)),m&2048&&X0(_,r);break;case 24:gs(i,r,l,h),m&2048&&Y0(r.alternate,r);break;default:gs(i,r,l,h)}}function ru(i,r,l,h,m){for(m=m&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,_=r,R=l,F=h,K=_.flags;switch(_.tag){case 0:case 11:case 15:ru(v,_,R,F,m),Rd(8,_);break;case 23:break;case 22:var et=_.stateNode;_.memoizedState!==null?et._visibility&2?ru(v,_,R,F,m):Md(v,_):(et._visibility|=2,ru(v,_,R,F,m)),m&&K&2048&&X0(_.alternate,_);break;case 24:ru(v,_,R,F,m),m&&K&2048&&Y0(_.alternate,_);break;default:ru(v,_,R,F,m)}r=r.sibling}}function Md(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,h=r,m=h.flags;switch(h.tag){case 22:Md(l,h),m&2048&&X0(h.alternate,h);break;case 24:Md(l,h),m&2048&&Y0(h.alternate,h);break;default:Md(l,h)}r=r.sibling}}var Dd=8192;function au(i,r,l){if(i.subtreeFlags&Dd)for(i=i.child;i!==null;)H1(i,r,l),i=i.sibling}function H1(i,r,l){switch(i.tag){case 26:au(i,r,l),i.flags&Dd&&i.memoizedState!==null&&Tj(l,ps,i.memoizedState,i.memoizedProps);break;case 5:au(i,r,l);break;case 3:case 4:var h=ps;ps=Nm(i.stateNode.containerInfo),au(i,r,l),ps=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=Dd,Dd=16777216,au(i,r,l),Dd=h):au(i,r,l));break;default:au(i,r,l)}}function V1(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Ld(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];hn=h,G1(h,i)}V1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)q1(i),i=i.sibling}function q1(i){switch(i.tag){case 0:case 11:case 15:Ld(i),i.flags&2048&&Ha(9,i,i.return);break;case 3:Ld(i);break;case 12:Ld(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,ym(i)):Ld(i);break;default:Ld(i)}}function ym(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];hn=h,G1(h,i)}V1(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ha(8,r,r.return),ym(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,ym(r));break;default:ym(r)}i=i.sibling}}function G1(i,r){for(;hn!==null;){var l=hn;switch(l.tag){case 0:case 11:case 15:Ha(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:md(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,hn=h;else t:for(l=i;hn!==null;){h=hn;var m=h.sibling,v=h.return;if(j1(h),h===l){hn=null;break t}if(m!==null){m.return=v,hn=m;break t}hn=v}}}var HO={getCacheForType:function(i){var r=wn(qe),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return wn(qe).controller.signal}},VO=typeof WeakMap=="function"?WeakMap:Map,ae=0,xe=null,Bt=null,Xt=0,ue=0,xi=null,Va=!1,ou=!1,K0=!1,jr=0,Ie=0,qa=0,ll=0,W0=0,wi=0,lu=0,Od=null,ai=null,Q0=!1,vm=0,$1=0,bm=1/0,xm=null,Ga=null,Qe=0,$a=null,cu=null,Pr=0,Z0=0,J0=null,X1=null,jd=0,tx=null;function Ai(){return(ae&2)!==0&&Xt!==0?Xt&-Xt:I.T!==null?ax():cS()}function Y1(){if(wi===0)if((Xt&536870912)===0||Kt){var i=at;at<<=1,(at&3932160)===0&&(at=262144),wi=i}else wi=536870912;return i=vi.current,i!==null&&(i.flags|=32),wi}function oi(i,r,l){(i===xe&&(ue===2||ue===9)||i.cancelPendingCommit!==null)&&(uu(i,0),Xa(i,Xt,wi,!1)),br(i,l),((ae&2)===0||i!==xe)&&(i===xe&&((ae&2)===0&&(ll|=l),Ie===4&&Xa(i,Xt,wi,!1)),Us(i))}function K1(i,r,l){if((ae&6)!==0)throw Error(n(327));var h=!l&&(r&127)===0&&(r&i.expiredLanes)===0||kt(i,r),m=h?$O(i,r):nx(i,r,!0),v=h;do{if(m===0){ou&&!h&&Xa(i,r,0,!1);break}else{if(l=i.current.alternate,v&&!qO(l)){m=nx(i,r,!1),v=!1;continue}if(m===2){if(v=r,i.errorRecoveryDisabledLanes&v)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;t:{var R=i;m=Od;var F=R.current.memoizedState.isDehydrated;if(F&&(uu(R,_).flags|=256),_=nx(R,_,!1),_!==2){if(K0&&!F){R.errorRecoveryDisabledLanes|=v,ll|=v,m=4;break t}v=ai,ai=m,v!==null&&(ai===null?ai=v:ai.push.apply(ai,v))}m=_}if(v=!1,m!==2)continue}}if(m===1){uu(i,0),Xa(i,r,0,!0);break}t:{switch(h=i,v=m,v){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:Xa(h,r,wi,!Va);break t;case 2:ai=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(m=vm+300-vn(),10<m)){if(Xa(h,r,wi,!Va),jt(h,0,!0)!==0)break t;Pr=r,h.timeoutHandle=CC(W1.bind(null,h,l,ai,xm,Q0,r,wi,ll,lu,Va,v,"Throttled",-0,0),m);break t}W1(h,l,ai,xm,Q0,r,wi,ll,lu,Va,v,null,-0,0)}}break}while(!0);Us(i)}function W1(i,r,l,h,m,v,_,R,F,K,et,rt,Q,J){if(i.timeoutHandle=-1,rt=r.subtreeFlags,rt&8192||(rt&16785408)===16785408){rt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wr},H1(r,v,rt);var mt=(v&62914560)===v?vm-vn():(v&4194048)===v?$1-vn():0;if(mt=kj(rt,mt),mt!==null){Pr=v,i.cancelPendingCommit=mt(sC.bind(null,i,r,v,l,h,m,_,R,F,et,rt,null,Q,J)),Xa(i,v,_,!K);return}}sC(i,r,v,l,h,m,_,R,F)}function qO(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],v=m.getSnapshot;m=m.value;try{if(!mi(v(),m))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Xa(i,r,l,h){r&=~W0,r&=~ll,i.suspendedLanes|=r,i.pingedLanes&=~r,h&&(i.warmLanes|=r),h=i.expirationTimes;for(var m=r;0<m;){var v=31-$n(m),_=1<<v;h[v]=-1,m&=~_}l!==0&&aS(i,l,r)}function wm(){return(ae&6)===0?(Pd(0),!1):!0}function ex(){if(Bt!==null){if(ue===0)var i=Bt.return;else i=Bt,Er=Jo=null,y0(i),tu=null,vd=0,i=Bt;for(;i!==null;)T1(i.alternate,i),i=i.return;Bt=null}}function uu(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,uj(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Pr=0,ex(),xe=i,Bt=l=_r(i.current,null),Xt=r,ue=0,xi=null,Va=!1,ou=kt(i,r),K0=!1,lu=wi=W0=ll=qa=Ie=0,ai=Od=null,Q0=!1,(r&8)!==0&&(r|=r&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=r;0<h;){var m=31-$n(h),v=1<<m;r|=i[m],h&=~v}return jr=r,Hg(),l}function Q1(i,r){Ot=null,I.H=Cd,r===Jc||r===Wg?(r=fE(),ue=3):r===r0?(r=fE(),ue=4):ue=r===L0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,xi=r,Bt===null&&(Ie=1,um(i,Gi(r,i.current)))}function Z1(){var i=vi.current;return i===null?!0:(Xt&4194048)===Xt?Ki===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?i===Ki:!1}function J1(){var i=I.H;return I.H=Cd,i===null?Cd:i}function tC(){var i=I.A;return I.A=HO,i}function Am(){Ie=4,Va||(Xt&4194048)!==Xt&&vi.current!==null||(ou=!0),(qa&134217727)===0&&(ll&134217727)===0||xe===null||Xa(xe,Xt,wi,!1)}function nx(i,r,l){var h=ae;ae|=2;var m=J1(),v=tC();(xe!==i||Xt!==r)&&(xm=null,uu(i,r)),r=!1;var _=Ie;t:do try{if(ue!==0&&Bt!==null){var R=Bt,F=xi;switch(ue){case 8:ex(),_=6;break t;case 3:case 2:case 9:case 6:vi.current===null&&(r=!0);var K=ue;if(ue=0,xi=null,hu(i,R,F,K),l&&ou){_=0;break t}break;default:K=ue,ue=0,xi=null,hu(i,R,F,K)}}GO(),_=Ie;break}catch(et){Q1(i,et)}while(!0);return r&&i.shellSuspendCounter++,Er=Jo=null,ae=h,I.H=m,I.A=v,Bt===null&&(xe=null,Xt=0,Hg()),_}function GO(){for(;Bt!==null;)eC(Bt)}function $O(i,r){var l=ae;ae|=2;var h=J1(),m=tC();xe!==i||Xt!==r?(xm=null,bm=vn()+500,uu(i,r)):ou=kt(i,r);t:do try{if(ue!==0&&Bt!==null){r=Bt;var v=xi;e:switch(ue){case 1:ue=0,xi=null,hu(i,r,v,1);break;case 2:case 9:if(hE(v)){ue=0,xi=null,nC(r);break}r=function(){ue!==2&&ue!==9||xe!==i||(ue=7),Us(i)},v.then(r,r);break t;case 3:ue=7;break t;case 4:ue=5;break t;case 7:hE(v)?(ue=0,xi=null,nC(r)):(ue=0,xi=null,hu(i,r,v,7));break;case 5:var _=null;switch(Bt.tag){case 26:_=Bt.memoizedState;case 5:case 27:var R=Bt;if(_?BC(_):R.stateNode.complete){ue=0,xi=null;var F=R.sibling;if(F!==null)Bt=F;else{var K=R.return;K!==null?(Bt=K,_m(K)):Bt=null}break e}}ue=0,xi=null,hu(i,r,v,5);break;case 6:ue=0,xi=null,hu(i,r,v,6);break;case 8:ex(),Ie=6;break t;default:throw Error(n(462))}}XO();break}catch(et){Q1(i,et)}while(!0);return Er=Jo=null,I.H=h,I.A=m,ae=l,Bt!==null?0:(xe=null,Xt=0,Hg(),Ie)}function XO(){for(;Bt!==null&&!td();)eC(Bt)}function eC(i){var r=E1(i.alternate,i,jr);i.memoizedProps=i.pendingProps,r===null?_m(i):Bt=r}function nC(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=b1(l,r,r.pendingProps,r.type,void 0,Xt);break;case 11:r=b1(l,r,r.pendingProps,r.type.render,r.ref,Xt);break;case 5:y0(r);default:T1(l,r),r=Bt=tE(r,jr),r=E1(l,r,jr)}i.memoizedProps=i.pendingProps,r===null?_m(i):Bt=r}function hu(i,r,l,h){Er=Jo=null,y0(r),tu=null,vd=0;var m=r.return;try{if(jO(i,m,r,l,Xt)){Ie=1,um(i,Gi(l,i.current)),Bt=null;return}}catch(v){if(m!==null)throw Bt=m,v;Ie=1,um(i,Gi(l,i.current)),Bt=null;return}r.flags&32768?(Kt||h===1?i=!0:ou||(Xt&536870912)!==0?i=!1:(Va=i=!0,(h===2||h===9||h===3||h===6)&&(h=vi.current,h!==null&&h.tag===13&&(h.flags|=16384))),iC(r,i)):_m(r)}function _m(i){var r=i;do{if((r.flags&32768)!==0){iC(r,Va);return}i=r.return;var l=IO(r.alternate,r,jr);if(l!==null){Bt=l;return}if(r=r.sibling,r!==null){Bt=r;return}Bt=r=i}while(r!==null);Ie===0&&(Ie=5)}function iC(i,r){do{var l=zO(i.alternate,i);if(l!==null){l.flags&=32767,Bt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){Bt=i;return}Bt=i=l}while(i!==null);Ie=6,Bt=null}function sC(i,r,l,h,m,v,_,R,F){i.cancelPendingCommit=null;do Sm();while(Qe!==0);if((ae&6)!==0)throw Error(n(327));if(r!==null){if(r===i.current)throw Error(n(177));if(v=r.lanes|r.childLanes,v|=qb,Ng(i,l,v,_,R,F),i===xe&&(Bt=xe=null,Xt=0),cu=r,$a=i,Pr=l,Z0=v,J0=m,X1=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,QO(ds,function(){return cC(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=I.T,I.T=null,m=q.p,q.p=2,_=ae,ae|=4;try{UO(i,r,l)}finally{ae=_,q.p=m,I.T=h}}Qe=1,rC(),aC(),oC()}}function rC(){if(Qe===1){Qe=0;var i=$a,r=cu,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=I.T,I.T=null;var h=q.p;q.p=2;var m=ae;ae|=4;try{z1(r,i);var v=px,_=GS(i.containerInfo),R=v.focusedElem,F=v.selectionRange;if(_!==R&&R&&R.ownerDocument&&qS(R.ownerDocument.documentElement,R)){if(F!==null&&zb(R)){var K=F.start,et=F.end;if(et===void 0&&(et=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(et,R.value.length);else{var rt=R.ownerDocument||document,Q=rt&&rt.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),mt=R.textContent.length,Tt=Math.min(F.start,mt),me=F.end===void 0?Tt:Math.min(F.end,mt);!J.extend&&Tt>me&&(_=me,me=Tt,Tt=_);var V=VS(R,Tt),B=VS(R,me);if(V&&B&&(J.rangeCount!==1||J.anchorNode!==V.node||J.anchorOffset!==V.offset||J.focusNode!==B.node||J.focusOffset!==B.offset)){var Y=rt.createRange();Y.setStart(V.node,V.offset),J.removeAllRanges(),Tt>me?(J.addRange(Y),J.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),J.addRange(Y))}}}}for(rt=[],J=R;J=J.parentNode;)J.nodeType===1&&rt.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<rt.length;R++){var st=rt[R];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}Pm=!!fx,px=fx=null}finally{ae=m,q.p=h,I.T=l}}i.current=r,Qe=2}}function aC(){if(Qe===2){Qe=0;var i=$a,r=cu,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=I.T,I.T=null;var h=q.p;q.p=2;var m=ae;ae|=4;try{O1(i,r.alternate,r)}finally{ae=m,q.p=h,I.T=l}}Qe=3}}function oC(){if(Qe===4||Qe===3){Qe=0,Vo();var i=$a,r=cu,l=Pr,h=X1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Qe=5:(Qe=0,cu=$a=null,lC(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Ga=null),xb(l),r=r.stateNode,Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(qo,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=I.T,m=q.p,q.p=2,I.T=null;try{for(var v=i.onRecoverableError,_=0;_<h.length;_++){var R=h[_];v(R.value,{componentStack:R.stack})}}finally{I.T=r,q.p=m}}(Pr&3)!==0&&Sm(),Us(i),m=i.pendingLanes,(l&261930)!==0&&(m&42)!==0?i===tx?jd++:(jd=0,tx=i):jd=0,Pd(0)}}function lC(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,md(r)))}function Sm(){return rC(),aC(),oC(),cC()}function cC(){if(Qe!==5)return!1;var i=$a,r=Z0;Z0=0;var l=xb(Pr),h=I.T,m=q.p;try{q.p=32>l?32:l,I.T=null,l=J0,J0=null;var v=$a,_=Pr;if(Qe=0,cu=$a=null,Pr=0,(ae&6)!==0)throw Error(n(331));var R=ae;if(ae|=4,q1(v.current),B1(v,v.current,_,l),ae=R,Pd(0,!1),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(qo,v)}catch{}return!0}finally{q.p=m,I.T=h,lC(i,r)}}function uC(i,r,l){r=Gi(l,r),r=D0(i.stateNode,r,2),i=za(i,r,2),i!==null&&(br(i,2),Us(i))}function he(i,r,l){if(i.tag===3)uC(i,i,l);else for(;r!==null;){if(r.tag===3){uC(r,i,l);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ga===null||!Ga.has(h))){i=Gi(l,i),l=h1(2),h=za(r,l,2),h!==null&&(d1(l,h,r,i),br(h,2),Us(h));break}}r=r.return}}function ix(i,r,l){var h=i.pingCache;if(h===null){h=i.pingCache=new VO;var m=new Set;h.set(r,m)}else m=h.get(r),m===void 0&&(m=new Set,h.set(r,m));m.has(l)||(K0=!0,m.add(l),i=YO.bind(null,i,r,l),r.then(i,i))}function YO(i,r,l){var h=i.pingCache;h!==null&&h.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,xe===i&&(Xt&l)===l&&(Ie===4||Ie===3&&(Xt&62914560)===Xt&&300>vn()-vm?(ae&2)===0&&uu(i,0):W0|=l,lu===Xt&&(lu=0)),Us(i)}function hC(i,r){r===0&&(r=Te()),i=Wo(i,r),i!==null&&(br(i,r),Us(i))}function KO(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),hC(i,l)}function WO(i,r){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(r),hC(i,l)}function QO(i,r){return vr(i,r)}var Em=null,du=null,sx=!1,Cm=!1,rx=!1,Ya=0;function Us(i){i!==du&&i.next===null&&(du===null?Em=du=i:du=du.next=i),Cm=!0,sx||(sx=!0,JO())}function Pd(i,r){if(!rx&&Cm){rx=!0;do for(var l=!1,h=Em;h!==null;){if(i!==0){var m=h.pendingLanes;if(m===0)var v=0;else{var _=h.suspendedLanes,R=h.pingedLanes;v=(1<<31-$n(42|i)+1)-1,v&=m&~(_&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,gC(h,v))}else v=Xt,v=jt(h,h===xe?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||kt(h,v)||(l=!0,gC(h,v));h=h.next}while(l);rx=!1}}function ZO(){dC()}function dC(){Cm=sx=!1;var i=0;Ya!==0&&cj()&&(i=Ya);for(var r=vn(),l=null,h=Em;h!==null;){var m=h.next,v=fC(h,r);v===0?(h.next=null,l===null?Em=m:l.next=m,m===null&&(du=l)):(l=h,(i!==0||(v&3)!==0)&&(Cm=!0)),h=m}Qe!==0&&Qe!==5||Pd(i),Ya!==0&&(Ya=0)}function fC(i,r){for(var l=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var _=31-$n(v),R=1<<_,F=m[_];F===-1?((R&l)===0||(R&h)!==0)&&(m[_]=Oe(R,r)):F<=r&&(i.expiredLanes|=R),v&=~R}if(r=xe,l=Xt,l=jt(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===r&&(ue===2||ue===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&gi(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||kt(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(h!==null&&gi(h),xb(l)){case 2:case 8:l=qn;break;case 32:l=ds;break;case 268435456:l=Na;break;default:l=ds}return h=pC.bind(null,i),l=vr(l,h),i.callbackPriority=r,i.callbackNode=l,r}return h!==null&&h!==null&&gi(h),i.callbackPriority=2,i.callbackNode=null,2}function pC(i,r){if(Qe!==0&&Qe!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Sm()&&i.callbackNode!==l)return null;var h=Xt;return h=jt(i,i===xe?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(K1(i,h,r),fC(i,vn()),i.callbackNode!=null&&i.callbackNode===l?pC.bind(null,i):null)}function gC(i,r){if(Sm())return null;K1(i,r,!0)}function JO(){hj(function(){(ae&6)!==0?vr(Dc,ZO):dC()})}function ax(){if(Ya===0){var i=Qc;i===0&&(i=Go,Go<<=1,(Go&261888)===0&&(Go=256)),Ya=i}return Ya}function mC(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Og(""+i)}function yC(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function tj(i,r,l,h,m){if(r==="submit"&&l&&l.stateNode===m){var v=mC((m[ei]||null).action),_=h.submitter;_&&(r=(r=_[ei]||null)?mC(r.formAction):_.getAttribute("formAction"),r!==null&&(v=r,_=null));var R=new Ig("action","action",null,h,m);i.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ya!==0){var F=_?yC(m,_):new FormData(m);C0(l,{pending:!0,data:F,method:m.method,action:v},null,F)}}else typeof v=="function"&&(R.preventDefault(),F=_?yC(m,_):new FormData(m),C0(l,{pending:!0,data:F,method:m.method,action:v},v,F))},currentTarget:m}]})}}for(var ox=0;ox<Vb.length;ox++){var lx=Vb[ox],ej=lx.toLowerCase(),nj=lx[0].toUpperCase()+lx.slice(1);fs(ej,"on"+nj)}fs(YS,"onAnimationEnd"),fs(KS,"onAnimationIteration"),fs(WS,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(vO,"onTransitionRun"),fs(bO,"onTransitionStart"),fs(xO,"onTransitionCancel"),fs(QS,"onTransitionEnd"),Fc("onMouseEnter",["mouseout","mouseover"]),Fc("onMouseLeave",["mouseout","mouseover"]),Fc("onPointerEnter",["pointerout","pointerover"]),Fc("onPointerLeave",["pointerout","pointerover"]),$o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$o("onBeforeInput",["compositionend","keypress","textInput","paste"]),$o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ij=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fd));function vC(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],m=h.event;h=h.listeners;t:{var v=void 0;if(r)for(var _=h.length-1;0<=_;_--){var R=h[_],F=R.instance,K=R.currentTarget;if(R=R.listener,F!==v&&m.isPropagationStopped())break t;v=R,m.currentTarget=K;try{v(m)}catch(et){Bg(et)}m.currentTarget=null,v=F}else for(_=0;_<h.length;_++){if(R=h[_],F=R.instance,K=R.currentTarget,R=R.listener,F!==v&&m.isPropagationStopped())break t;v=R,m.currentTarget=K;try{v(m)}catch(et){Bg(et)}m.currentTarget=null,v=F}}}}function Ht(i,r){var l=r[wb];l===void 0&&(l=r[wb]=new Set);var h=i+"__bubble";l.has(h)||(bC(r,i,2,!1),l.add(h))}function cx(i,r,l){var h=0;r&&(h|=4),bC(l,i,h,r)}var Tm="_reactListening"+Math.random().toString(36).slice(2);function ux(i){if(!i[Tm]){i[Tm]=!0,dS.forEach(function(l){l!=="selectionchange"&&(ij.has(l)||cx(l,!1,i),cx(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Tm]||(r[Tm]=!0,cx("selectionchange",!1,r))}}function bC(i,r,l,h){switch(YC(r)){case 2:var m=Mj;break;case 8:m=Dj;break;default:m=Ex}l=m.bind(null,r,l,i),m=void 0,!Nb||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(r,l,{capture:!0,passive:m}):i.addEventListener(r,l,!0):m!==void 0?i.addEventListener(r,l,{passive:m}):i.addEventListener(r,l,!1)}function hx(i,r,l,h,m){var v=h;if((r&1)===0&&(r&2)===0&&h!==null)t:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var R=h.stateNode.containerInfo;if(R===m)break;if(_===4)for(_=h.return;_!==null;){var F=_.tag;if((F===3||F===4)&&_.stateNode.containerInfo===m)return;_=_.return}for(;R!==null;){if(_=Oc(R),_===null)return;if(F=_.tag,F===5||F===6||F===26||F===27){h=v=_;continue t}R=R.parentNode}}h=h.return}SS(function(){var K=v,et=kb(l),rt=[];t:{var Q=ZS.get(i);if(Q!==void 0){var J=Ig,mt=i;switch(i){case"keypress":if(Pg(l)===0)break t;case"keydown":case"keyup":J=WL;break;case"focusin":mt="focus",J=Ob;break;case"focusout":mt="blur",J=Ob;break;case"beforeblur":case"afterblur":J=Ob;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=TS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=IL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=JL;break;case YS:case KS:case WS:J=BL;break;case QS:J=eO;break;case"scroll":case"scrollend":J=PL;break;case"wheel":J=iO;break;case"copy":case"cut":case"paste":J=VL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=RS;break;case"toggle":case"beforetoggle":J=rO}var Tt=(r&4)!==0,me=!Tt&&(i==="scroll"||i==="scrollend"),V=Tt?Q!==null?Q+"Capture":null:Q;Tt=[];for(var B=K,Y;B!==null;){var st=B;if(Y=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||Y===null||V===null||(st=rd(B,V),st!=null&&Tt.push(Id(B,st,Y))),me)break;B=B.return}0<Tt.length&&(Q=new J(Q,mt,null,l,et),rt.push({event:Q,listeners:Tt}))}}if((r&7)===0){t:{if(Q=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",Q&&l!==Tb&&(mt=l.relatedTarget||l.fromElement)&&(Oc(mt)||mt[Lc]))break t;if((J||Q)&&(Q=et.window===et?et:(Q=et.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(mt=l.relatedTarget||l.toElement,J=K,mt=mt?Oc(mt):null,mt!==null&&(me=o(mt),Tt=mt.tag,mt!==me||Tt!==5&&Tt!==27&&Tt!==6)&&(mt=null)):(J=null,mt=K),J!==mt)){if(Tt=TS,st="onMouseLeave",V="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(Tt=RS,st="onPointerLeave",V="onPointerEnter",B="pointer"),me=J==null?Q:sd(J),Y=mt==null?Q:sd(mt),Q=new Tt(st,B+"leave",J,l,et),Q.target=me,Q.relatedTarget=Y,st=null,Oc(et)===K&&(Tt=new Tt(V,B+"enter",mt,l,et),Tt.target=Y,Tt.relatedTarget=me,st=Tt),me=st,J&&mt)e:{for(Tt=sj,V=J,B=mt,Y=0,st=V;st;st=Tt(st))Y++;st=0;for(var St=B;St;St=Tt(St))st++;for(;0<Y-st;)V=Tt(V),Y--;for(;0<st-Y;)B=Tt(B),st--;for(;Y--;){if(V===B||B!==null&&V===B.alternate){Tt=V;break e}V=Tt(V),B=Tt(B)}Tt=null}else Tt=null;J!==null&&xC(rt,Q,J,Tt,!1),mt!==null&&me!==null&&xC(rt,me,mt,Tt,!0)}}t:{if(Q=K?sd(K):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var ne=FS;else if(jS(Q))if(IS)ne=gO;else{ne=fO;var xt=dO}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&Cb(K.elementType)&&(ne=FS):ne=pO;if(ne&&(ne=ne(i,K))){PS(rt,ne,l,et);break t}xt&&xt(i,Q,K),i==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Eb(Q,"number",Q.value)}switch(xt=K?sd(K):window,i){case"focusin":(jS(xt)||xt.contentEditable==="true")&&(Vc=xt,Ub=K,fd=null);break;case"focusout":fd=Ub=Vc=null;break;case"mousedown":Bb=!0;break;case"contextmenu":case"mouseup":case"dragend":Bb=!1,$S(rt,l,et);break;case"selectionchange":if(yO)break;case"keydown":case"keyup":$S(rt,l,et)}var Pt;if(Pb)t:{switch(i){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else Hc?LS(i,l)&&(Yt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Yt="onCompositionStart");Yt&&(NS&&l.locale!=="ko"&&(Hc||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Hc&&(Pt=ES()):(Da=et,Mb="value"in Da?Da.value:Da.textContent,Hc=!0)),xt=km(K,Yt),0<xt.length&&(Yt=new kS(Yt,i,null,l,et),rt.push({event:Yt,listeners:xt}),Pt?Yt.data=Pt:(Pt=OS(l),Pt!==null&&(Yt.data=Pt)))),(Pt=oO?lO(i,l):cO(i,l))&&(Yt=km(K,"onBeforeInput"),0<Yt.length&&(xt=new kS("onBeforeInput","beforeinput",null,l,et),rt.push({event:xt,listeners:Yt}),xt.data=Pt)),tj(rt,i,K,l,et)}vC(rt,r)})}function Id(i,r,l){return{instance:i,listener:r,currentTarget:l}}function km(i,r){for(var l=r+"Capture",h=[];i!==null;){var m=i,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=rd(i,l),m!=null&&h.unshift(Id(i,m,v)),m=rd(i,r),m!=null&&h.push(Id(i,m,v))),i.tag===3)return h;i=i.return}return[]}function sj(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function xC(i,r,l,h,m){for(var v=r._reactName,_=[];l!==null&&l!==h;){var R=l,F=R.alternate,K=R.stateNode;if(R=R.tag,F!==null&&F===h)break;R!==5&&R!==26&&R!==27||K===null||(F=K,m?(K=rd(l,v),K!=null&&_.unshift(Id(l,K,F))):m||(K=rd(l,v),K!=null&&_.push(Id(l,K,F)))),l=l.return}_.length!==0&&i.push({event:r,listeners:_})}var rj=/\r\n?/g,aj=/\u0000|\uFFFD/g;function wC(i){return(typeof i=="string"?i:""+i).replace(rj,`
`).replace(aj,"")}function AC(i,r){return r=wC(r),wC(i)===r}function ge(i,r,l,h,m,v){switch(l){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||zc(i,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&zc(i,""+h);break;case"className":Dg(i,"class",h);break;case"tabIndex":Dg(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Dg(i,l,h);break;case"style":AS(i,h,v);break;case"data":if(r!=="object"){Dg(i,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Og(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&ge(i,r,"name",m.name,m,null),ge(i,r,"formEncType",m.formEncType,m,null),ge(i,r,"formMethod",m.formMethod,m,null),ge(i,r,"formTarget",m.formTarget,m,null)):(ge(i,r,"encType",m.encType,m,null),ge(i,r,"method",m.method,m,null),ge(i,r,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Og(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=wr);break;case"onScroll":h!=null&&Ht("scroll",i);break;case"onScrollEnd":h!=null&&Ht("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Og(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Ht("beforetoggle",i),Ht("toggle",i),Mg(i,"popover",h);break;case"xlinkActuate":xr(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":xr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":xr(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":xr(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":xr(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":xr(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":xr(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":xr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":xr(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Mg(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=OL.get(l)||l,Mg(i,l,h))}}function dx(i,r,l,h,m,v){switch(l){case"style":AS(i,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?zc(i,h):(typeof h=="number"||typeof h=="bigint")&&zc(i,""+h);break;case"onScroll":h!=null&&Ht("scroll",i);break;case"onScrollEnd":h!=null&&Ht("scrollend",i);break;case"onClick":h!=null&&(i.onclick=wr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fS.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),r=l.slice(2,m?l.length-7:void 0),v=i[ei]||null,v=v!=null?v[l]:null,typeof v=="function"&&i.removeEventListener(r,v,m),typeof h=="function")){typeof v!="function"&&v!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,h,m);break t}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Mg(i,l,h)}}}function _n(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",i),Ht("load",i);var h=!1,m=!1,v;for(v in l)if(l.hasOwnProperty(v)){var _=l[v];if(_!=null)switch(v){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ge(i,r,v,_,l,null)}}m&&ge(i,r,"srcSet",l.srcSet,l,null),h&&ge(i,r,"src",l.src,l,null);return;case"input":Ht("invalid",i);var R=v=_=m=null,F=null,K=null;for(h in l)if(l.hasOwnProperty(h)){var et=l[h];if(et!=null)switch(h){case"name":m=et;break;case"type":_=et;break;case"checked":F=et;break;case"defaultChecked":K=et;break;case"value":v=et;break;case"defaultValue":R=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,r));break;default:ge(i,r,h,et,l,null)}}vS(i,v,R,F,K,_,m,!1);return;case"select":Ht("invalid",i),h=_=v=null;for(m in l)if(l.hasOwnProperty(m)&&(R=l[m],R!=null))switch(m){case"value":v=R;break;case"defaultValue":_=R;break;case"multiple":h=R;default:ge(i,r,m,R,l,null)}r=v,l=_,i.multiple=!!h,r!=null?Ic(i,!!h,r,!1):l!=null&&Ic(i,!!h,l,!0);return;case"textarea":Ht("invalid",i),v=m=h=null;for(_ in l)if(l.hasOwnProperty(_)&&(R=l[_],R!=null))switch(_){case"value":h=R;break;case"defaultValue":m=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:ge(i,r,_,R,l,null)}xS(i,h,m,v);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(h=l[F],h!=null))switch(F){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ge(i,r,F,h,l,null)}return;case"dialog":Ht("beforetoggle",i),Ht("toggle",i),Ht("cancel",i),Ht("close",i);break;case"iframe":case"object":Ht("load",i);break;case"video":case"audio":for(h=0;h<Fd.length;h++)Ht(Fd[h],i);break;case"image":Ht("error",i),Ht("load",i);break;case"details":Ht("toggle",i);break;case"embed":case"source":case"link":Ht("error",i),Ht("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(h=l[K],h!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ge(i,r,K,h,l,null)}return;default:if(Cb(r)){for(et in l)l.hasOwnProperty(et)&&(h=l[et],h!==void 0&&dx(i,r,et,h,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(h=l[R],h!=null&&ge(i,r,R,h,l,null))}function oj(i,r,l,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,_=null,R=null,F=null,K=null,et=null;for(J in l){var rt=l[J];if(l.hasOwnProperty(J)&&rt!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":F=rt;default:h.hasOwnProperty(J)||ge(i,r,J,null,h,rt)}}for(var Q in h){var J=h[Q];if(rt=l[Q],h.hasOwnProperty(Q)&&(J!=null||rt!=null))switch(Q){case"type":v=J;break;case"name":m=J;break;case"checked":K=J;break;case"defaultChecked":et=J;break;case"value":_=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,r));break;default:J!==rt&&ge(i,r,Q,J,h,rt)}}Sb(i,_,R,F,K,et,v,m);return;case"select":J=_=R=Q=null;for(v in l)if(F=l[v],l.hasOwnProperty(v)&&F!=null)switch(v){case"value":break;case"multiple":J=F;default:h.hasOwnProperty(v)||ge(i,r,v,null,h,F)}for(m in h)if(v=h[m],F=l[m],h.hasOwnProperty(m)&&(v!=null||F!=null))switch(m){case"value":Q=v;break;case"defaultValue":R=v;break;case"multiple":_=v;default:v!==F&&ge(i,r,m,v,h,F)}r=R,l=_,h=J,Q!=null?Ic(i,!!l,Q,!1):!!h!=!!l&&(r!=null?Ic(i,!!l,r,!0):Ic(i,!!l,l?[]:"",!1));return;case"textarea":J=Q=null;for(R in l)if(m=l[R],l.hasOwnProperty(R)&&m!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ge(i,r,R,null,h,m)}for(_ in h)if(m=h[_],v=l[_],h.hasOwnProperty(_)&&(m!=null||v!=null))switch(_){case"value":Q=m;break;case"defaultValue":J=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==v&&ge(i,r,_,m,h,v)}bS(i,Q,J);return;case"option":for(var mt in l)if(Q=l[mt],l.hasOwnProperty(mt)&&Q!=null&&!h.hasOwnProperty(mt))switch(mt){case"selected":i.selected=!1;break;default:ge(i,r,mt,null,h,Q)}for(F in h)if(Q=h[F],J=l[F],h.hasOwnProperty(F)&&Q!==J&&(Q!=null||J!=null))switch(F){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ge(i,r,F,Q,h,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in l)Q=l[Tt],l.hasOwnProperty(Tt)&&Q!=null&&!h.hasOwnProperty(Tt)&&ge(i,r,Tt,null,h,Q);for(K in h)if(Q=h[K],J=l[K],h.hasOwnProperty(K)&&Q!==J&&(Q!=null||J!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,r));break;default:ge(i,r,K,Q,h,J)}return;default:if(Cb(r)){for(var me in l)Q=l[me],l.hasOwnProperty(me)&&Q!==void 0&&!h.hasOwnProperty(me)&&dx(i,r,me,void 0,h,Q);for(et in h)Q=h[et],J=l[et],!h.hasOwnProperty(et)||Q===J||Q===void 0&&J===void 0||dx(i,r,et,Q,h,J);return}}for(var V in l)Q=l[V],l.hasOwnProperty(V)&&Q!=null&&!h.hasOwnProperty(V)&&ge(i,r,V,null,h,Q);for(rt in h)Q=h[rt],J=l[rt],!h.hasOwnProperty(rt)||Q===J||Q==null&&J==null||ge(i,r,rt,Q,h,J)}function _C(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lj(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var m=l[h],v=m.transferSize,_=m.initiatorType,R=m.duration;if(v&&R&&_C(_)){for(_=0,R=m.responseEnd,h+=1;h<l.length;h++){var F=l[h],K=F.startTime;if(K>R)break;var et=F.transferSize,rt=F.initiatorType;et&&_C(rt)&&(F=F.responseEnd,_+=et*(F<R?1:(R-K)/(F-K)))}if(--h,r+=8*(v+_)/(m.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var fx=null,px=null;function Rm(i){return i.nodeType===9?i:i.ownerDocument}function SC(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function EC(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function gx(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var mx=null;function cj(){var i=window.event;return i&&i.type==="popstate"?i===mx?!1:(mx=i,!0):(mx=null,!1)}var CC=typeof setTimeout=="function"?setTimeout:void 0,uj=typeof clearTimeout=="function"?clearTimeout:void 0,TC=typeof Promise=="function"?Promise:void 0,hj=typeof queueMicrotask=="function"?queueMicrotask:typeof TC<"u"?function(i){return TC.resolve(null).then(i).catch(dj)}:CC;function dj(i){setTimeout(function(){throw i})}function Ka(i){return i==="head"}function kC(i,r){var l=r,h=0;do{var m=l.nextSibling;if(i.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(m),mu(r);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")zd(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,zd(l);for(var v=l.firstChild;v;){var _=v.nextSibling,R=v.nodeName;v[id]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=_}}else l==="body"&&zd(i.ownerDocument.body);l=m}while(l);mu(r)}function RC(i,r){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function yx(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":yx(l),Ab(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function fj(i,r,l,h){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[id])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Wi(i.nextSibling),i===null)break}return null}function pj(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Wi(i.nextSibling),i===null))return null;return i}function NC(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Wi(i.nextSibling),i===null))return null;return i}function vx(i){return i.data==="$?"||i.data==="$~"}function bx(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function gj(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var h=function(){r(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Wi(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var xx=null;function MC(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return Wi(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function DC(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function LC(i,r,l){switch(r=Rm(l),i){case"html":if(i=r.documentElement,!i)throw Error(n(452));return i;case"head":if(i=r.head,!i)throw Error(n(453));return i;case"body":if(i=r.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function zd(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Ab(i)}var Qi=new Map,OC=new Set;function Nm(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Fr=q.d;q.d={f:mj,r:yj,D:vj,C:bj,L:xj,m:wj,X:_j,S:Aj,M:Sj};function mj(){var i=Fr.f(),r=wm();return i||r}function yj(i){var r=jc(i);r!==null&&r.tag===5&&r.type==="form"?QE(r):Fr.r(i)}var fu=typeof document>"u"?null:document;function jC(i,r,l){var h=fu;if(h&&typeof r=="string"&&r){var m=Vi(r);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),OC.has(m)||(OC.add(m),i={rel:i,crossOrigin:l,href:r},h.querySelector(m)===null&&(r=h.createElement("link"),_n(r,"link",i),un(r),h.head.appendChild(r)))}}function vj(i){Fr.D(i),jC("dns-prefetch",i,null)}function bj(i,r){Fr.C(i,r),jC("preconnect",i,r)}function xj(i,r,l){Fr.L(i,r,l);var h=fu;if(h&&i&&r){var m='link[rel="preload"][as="'+Vi(r)+'"]';r==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Vi(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Vi(l.imageSizes)+'"]')):m+='[href="'+Vi(i)+'"]';var v=m;switch(r){case"style":v=pu(i);break;case"script":v=gu(i)}Qi.has(v)||(i=y({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),Qi.set(v,i),h.querySelector(m)!==null||r==="style"&&h.querySelector(Ud(v))||r==="script"&&h.querySelector(Bd(v))||(r=h.createElement("link"),_n(r,"link",i),un(r),h.head.appendChild(r)))}}function wj(i,r){Fr.m(i,r);var l=fu;if(l&&i){var h=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Vi(h)+'"][href="'+Vi(i)+'"]',v=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=gu(i)}if(!Qi.has(v)&&(i=y({rel:"modulepreload",href:i},r),Qi.set(v,i),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Bd(v)))return}h=l.createElement("link"),_n(h,"link",i),un(h),l.head.appendChild(h)}}}function Aj(i,r,l){Fr.S(i,r,l);var h=fu;if(h&&i){var m=Pc(h).hoistableStyles,v=pu(i);r=r||"default";var _=m.get(v);if(!_){var R={loading:0,preload:null};if(_=h.querySelector(Ud(v)))R.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},l),(l=Qi.get(v))&&wx(i,l);var F=_=h.createElement("link");un(F),_n(F,"link",i),F._p=new Promise(function(K,et){F.onload=K,F.onerror=et}),F.addEventListener("load",function(){R.loading|=1}),F.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Mm(_,r,h)}_={type:"stylesheet",instance:_,count:1,state:R},m.set(v,_)}}}function _j(i,r){Fr.X(i,r);var l=fu;if(l&&i){var h=Pc(l).hoistableScripts,m=gu(i),v=h.get(m);v||(v=l.querySelector(Bd(m)),v||(i=y({src:i,async:!0},r),(r=Qi.get(m))&&Ax(i,r),v=l.createElement("script"),un(v),_n(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function Sj(i,r){Fr.M(i,r);var l=fu;if(l&&i){var h=Pc(l).hoistableScripts,m=gu(i),v=h.get(m);v||(v=l.querySelector(Bd(m)),v||(i=y({src:i,async:!0,type:"module"},r),(r=Qi.get(m))&&Ax(i,r),v=l.createElement("script"),un(v),_n(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function PC(i,r,l,h){var m=(m=wt.current)?Nm(m):null;if(!m)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=pu(l.href),l=Pc(m).hoistableStyles,h=l.get(r),h||(h={type:"style",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=pu(l.href);var v=Pc(m).hoistableStyles,_=v.get(i);if(_||(m=m.ownerDocument||m,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,_),(v=m.querySelector(Ud(i)))&&!v._p&&(_.instance=v,_.state.loading=5),Qi.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qi.set(i,l),v||Ej(m,i,l,_.state))),r&&h===null)throw Error(n(528,""));return _}if(r&&h!==null)throw Error(n(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=gu(l),l=Pc(m).hoistableScripts,h=l.get(r),h||(h={type:"script",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function pu(i){return'href="'+Vi(i)+'"'}function Ud(i){return'link[rel="stylesheet"]['+i+"]"}function FC(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function Ej(i,r,l,h){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=i.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),_n(r,"link",l),un(r),i.head.appendChild(r))}function gu(i){return'[src="'+Vi(i)+'"]'}function Bd(i){return"script[async]"+i}function IC(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var h=i.querySelector('style[data-href~="'+Vi(l.href)+'"]');if(h)return r.instance=h,un(h),h;var m=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),un(h),_n(h,"style",m),Mm(h,l.precedence,i),r.instance=h;case"stylesheet":m=pu(l.href);var v=i.querySelector(Ud(m));if(v)return r.state.loading|=4,r.instance=v,un(v),v;h=FC(l),(m=Qi.get(m))&&wx(h,m),v=(i.ownerDocument||i).createElement("link"),un(v);var _=v;return _._p=new Promise(function(R,F){_.onload=R,_.onerror=F}),_n(v,"link",h),r.state.loading|=4,Mm(v,l.precedence,i),r.instance=v;case"script":return v=gu(l.src),(m=i.querySelector(Bd(v)))?(r.instance=m,un(m),m):(h=l,(m=Qi.get(v))&&(h=y({},l),Ax(h,m)),i=i.ownerDocument||i,m=i.createElement("script"),un(m),_n(m,"link",h),i.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Mm(h,l.precedence,i));return r.instance}function Mm(i,r,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,v=m,_=0;_<h.length;_++){var R=h[_];if(R.dataset.precedence===r)v=R;else if(v!==m)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function wx(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Ax(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Dm=null;function zC(i,r,l){if(Dm===null){var h=new Map,m=Dm=new Map;m.set(l,h)}else m=Dm,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var v=l[m];if(!(v[id]||v[bn]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var _=v.getAttribute(r)||"";_=i+_;var R=h.get(_);R?R.push(v):h.set(_,[v])}}return h}function UC(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function Cj(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function BC(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Tj(i,r,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=pu(h.href),v=r.querySelector(Ud(m));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Lm.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=v,un(v);return}v=r.ownerDocument||r,h=FC(h),(m=Qi.get(m))&&wx(h,m),v=v.createElement("link"),un(v);var _=v;_._p=new Promise(function(R,F){_.onload=R,_.onerror=F}),_n(v,"link",h),l.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Lm.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var _x=0;function kj(i,r){return i.stylesheets&&i.count===0&&jm(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&jm(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&_x===0&&(_x=62500*lj());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&jm(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>_x?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function Lm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Om=null;function jm(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Om=new Map,r.forEach(Rj,i),Om=null,Lm.call(i))}function Rj(i,r){if(!(r.state.loading&4)){var l=Om.get(i);if(l)var h=l.get(null);else{l=new Map,Om.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var _=m[v];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),h=_)}h&&l.set(null,h)}m=r.instance,_=m.getAttribute("data-precedence"),v=l.get(_)||h,v===h&&l.set(null,m),l.set(_,m),this.count++,h=Lm.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),v?v.parentNode.insertBefore(m,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),r.state.loading|=4}}var Hd={$$typeof:L,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Nj(i,r,l,h,m,v,_,R,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.hiddenUpdates=Bi(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function HC(i,r,l,h,m,v,_,R,F,K,et,rt){return i=new Nj(i,r,l,_,F,K,et,rt,R),r=1,v===!0&&(r|=24),v=yi(3,null,null,r),i.current=v,v.stateNode=i,r=n0(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:h,isDehydrated:l,cache:r},a0(v),i}function VC(i){return i?(i=$c,i):$c}function qC(i,r,l,h,m,v){m=VC(m),h.context===null?h.context=m:h.pendingContext=m,h=Ia(r),h.payload={element:l},v=v===void 0?null:v,v!==null&&(h.callback=v),l=za(i,h,r),l!==null&&(oi(l,i,r),xd(l,i,r))}function GC(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function Sx(i,r){GC(i,r),(i=i.alternate)&&GC(i,r)}function $C(i){if(i.tag===13||i.tag===31){var r=Wo(i,67108864);r!==null&&oi(r,i,67108864),Sx(i,67108864)}}function XC(i){if(i.tag===13||i.tag===31){var r=Ai();r=bb(r);var l=Wo(i,r);l!==null&&oi(l,i,r),Sx(i,r)}}var Pm=!0;function Mj(i,r,l,h){var m=I.T;I.T=null;var v=q.p;try{q.p=2,Ex(i,r,l,h)}finally{q.p=v,I.T=m}}function Dj(i,r,l,h){var m=I.T;I.T=null;var v=q.p;try{q.p=8,Ex(i,r,l,h)}finally{q.p=v,I.T=m}}function Ex(i,r,l,h){if(Pm){var m=Cx(h);if(m===null)hx(i,r,h,Fm,l),KC(i,h);else if(Oj(m,i,r,l,h))h.stopPropagation();else if(KC(i,h),r&4&&-1<Lj.indexOf(i)){for(;m!==null;){var v=jc(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var _=gt(v.pendingLanes);if(_!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var F=1<<31-$n(_);R.entanglements[1]|=F,_&=~F}Us(v),(ae&6)===0&&(bm=vn()+500,Pd(0))}}break;case 31:case 13:R=Wo(v,2),R!==null&&oi(R,v,2),wm(),Sx(v,2)}if(v=Cx(h),v===null&&hx(i,r,h,Fm,l),v===m)break;m=v}m!==null&&h.stopPropagation()}else hx(i,r,h,null,l)}}function Cx(i){return i=kb(i),Tx(i)}var Fm=null;function Tx(i){if(Fm=null,i=Oc(i),i!==null){var r=o(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=c(r),i!==null)return i;i=null}else if(l===31){if(i=u(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Fm=i,null}function YC(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ed()){case Dc:return 2;case qn:return 8;case ds:case Ra:return 32;case Na:return 268435456;default:return 32}default:return 32}}var kx=!1,Wa=null,Qa=null,Za=null,Vd=new Map,qd=new Map,Ja=[],Lj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function KC(i,r){switch(i){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Vd.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":qd.delete(r.pointerId)}}function Gd(i,r,l,h,m,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},r!==null&&(r=jc(r),r!==null&&$C(r)),i):(i.eventSystemFlags|=h,r=i.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),i)}function Oj(i,r,l,h,m){switch(r){case"focusin":return Wa=Gd(Wa,i,r,l,h,m),!0;case"dragenter":return Qa=Gd(Qa,i,r,l,h,m),!0;case"mouseover":return Za=Gd(Za,i,r,l,h,m),!0;case"pointerover":var v=m.pointerId;return Vd.set(v,Gd(Vd.get(v)||null,i,r,l,h,m)),!0;case"gotpointercapture":return v=m.pointerId,qd.set(v,Gd(qd.get(v)||null,i,r,l,h,m)),!0}return!1}function WC(i){var r=Oc(i.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){i.blockedOn=r,uS(i.priority,function(){XC(l)});return}}else if(r===31){if(r=u(l),r!==null){i.blockedOn=r,uS(i.priority,function(){XC(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Im(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=Cx(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Tb=h,l.target.dispatchEvent(h),Tb=null}else return r=jc(l),r!==null&&$C(r),i.blockedOn=l,!1;r.shift()}return!0}function QC(i,r,l){Im(i)&&l.delete(r)}function jj(){kx=!1,Wa!==null&&Im(Wa)&&(Wa=null),Qa!==null&&Im(Qa)&&(Qa=null),Za!==null&&Im(Za)&&(Za=null),Vd.forEach(QC),qd.forEach(QC)}function zm(i,r){i.blockedOn===r&&(i.blockedOn=null,kx||(kx=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,jj)))}var Um=null;function ZC(i){Um!==i&&(Um=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Um===i&&(Um=null);for(var r=0;r<i.length;r+=3){var l=i[r],h=i[r+1],m=i[r+2];if(typeof h!="function"){if(Tx(h||l)===null)continue;break}var v=jc(l);v!==null&&(i.splice(r,3),r-=3,C0(v,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function mu(i){function r(F){return zm(F,i)}Wa!==null&&zm(Wa,i),Qa!==null&&zm(Qa,i),Za!==null&&zm(Za,i),Vd.forEach(r),qd.forEach(r);for(var l=0;l<Ja.length;l++){var h=Ja[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Ja.length&&(l=Ja[0],l.blockedOn===null);)WC(l),l.blockedOn===null&&Ja.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],v=l[h+1],_=m[ei]||null;if(typeof v=="function")_||ZC(l);else if(_){var R=null;if(v&&v.hasAttribute("formAction")){if(m=v,_=v[ei]||null)R=_.formAction;else if(Tx(m)!==null)continue}else R=_.action;typeof R=="function"?l[h+1]=R:(l.splice(h,3),h-=3),ZC(l)}}}function JC(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(_){return m=_})},focusReset:"manual",scroll:"manual"})}function r(){m!==null&&(m(),m=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),m!==null&&(m(),m=null)}}}function Rx(i){this._internalRoot=i}Bm.prototype.render=Rx.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(n(409));var l=r.current,h=Ai();qC(l,h,i,r,null,null)},Bm.prototype.unmount=Rx.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;qC(i.current,2,null,i,null,null),wm(),r[Lc]=null}};function Bm(i){this._internalRoot=i}Bm.prototype.unstable_scheduleHydration=function(i){if(i){var r=cS();i={blockedOn:null,target:i,priority:r};for(var l=0;l<Ja.length&&r!==0&&r<Ja[l].priority;l++);Ja.splice(l,0,i),l===0&&WC(i)}};var tT=t.version;if(tT!=="19.2.1")throw Error(n(527,tT,"19.2.1"));q.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(r),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var Pj={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hm.isDisabled&&Hm.supportsFiber)try{qo=Hm.inject(Pj),Gn=Hm}catch{}}return Xd.createRoot=function(i,r){if(!a(i))throw Error(n(299));var l=!1,h="",m=o1,v=l1,_=c1;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=HC(i,1,!1,null,null,l,h,null,m,v,_,JC),i[Lc]=r.current,ux(i),new Rx(r)},Xd.hydrateRoot=function(i,r,l){if(!a(i))throw Error(n(299));var h=!1,m="",v=o1,_=l1,R=c1,F=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),r=HC(i,1,!0,r,l??null,h,m,F,v,_,R,JC),r.context=VC(null),l=r.current,h=Ai(),h=bb(h),m=Ia(h),m.callback=null,za(l,m,h),l=h,r.current.lanes=l,br(r,l),Us(r),i[Lc]=r.current,ux(i),new Bm(r)},Xd.version="19.2.1",Xd}var hT;function Yj(){if(hT)return Lx.exports;hT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Lx.exports=Xj(),Lx.exports}var Kj=Yj();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var dT="popstate";function Wj(s={}){function t(n,a){let{pathname:o,search:c,hash:u}=n.location;return yw("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:Sf(a)}return Zj(t,e,null,s)}function De(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function cs(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qj(){return Math.random().toString(36).substring(2,10)}function fT(s,t){return{usr:s.state,key:s.key,idx:t}}function yw(s,t,e=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?Vh(t):t,state:e,key:t&&t.key||n||Qj()}}function Sf({pathname:s="/",search:t="",hash:e=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(s+=e.charAt(0)==="#"?e:"#"+e),s}function Vh(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substring(e),s=s.substring(0,e));let n=s.indexOf("?");n>=0&&(t.search=s.substring(n),s=s.substring(0,n)),s&&(t.pathname=s)}return t}function Zj(s,t,e,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let C=g(),T=C==null?null:C-f;f=C,d&&d({action:u,location:S.location,delta:T})}function b(C,T){u="PUSH";let D=yw(S.location,C,T);f=g()+1;let L=fT(D,f),P=S.createHref(D);try{c.pushState(L,"",P)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;a.location.assign(P)}o&&d&&d({action:u,location:S.location,delta:1})}function w(C,T){u="REPLACE";let D=yw(S.location,C,T);f=g();let L=fT(D,f),P=S.createHref(D);c.replaceState(L,"",P),o&&d&&d({action:u,location:S.location,delta:0})}function A(C){return Jj(C)}let S={get action(){return u},get location(){return s(a,c)},listen(C){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(dT,y),d=C,()=>{a.removeEventListener(dT,y),d=null}},createHref(C){return t(a,C)},createURL:A,encodeLocation(C){let T=A(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:w,go(C){return c.go(C)}};return S}function Jj(s,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),De(e,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:Sf(s);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function uR(s,t,e="/"){return tP(s,t,e,!1)}function tP(s,t,e,n){let a=typeof t=="string"?Vh(t):t,o=_a(a.pathname||"/",e);if(o==null)return null;let c=hR(s);eP(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=dP(o);u=uP(c[d],f,n)}return u}function hR(s,t=[],e=[],n="",a=!1){let o=(c,u,d=a,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;De(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=ya([n,g.relativePath]),b=e.concat(g);c.children&&c.children.length>0&&(De(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),hR(c.children,t,b,y,d)),!(c.path==null&&!c.index)&&t.push({path:y,score:lP(y,c.index),routesMeta:b})};return s.forEach((c,u)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))o(c,u);else for(let f of dR(c.path))o(c,u,!0,f)}),t}function dR(s){let t=s.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=dR(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...c),u.map(d=>s.startsWith("/")&&d===""?"/":d)}function eP(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:cP(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var nP=/^:[\w-]+$/,iP=3,sP=2,rP=1,aP=10,oP=-2,pT=s=>s==="*";function lP(s,t){let e=s.split("/"),n=e.length;return e.some(pT)&&(n+=oP),t&&(n+=sP),e.filter(a=>!pT(a)).reduce((a,o)=>a+(nP.test(o)?iP:o===""?rP:aP),n)}function cP(s,t){return s.length===t.length&&s.slice(0,-1).every((n,a)=>n===t[a])?s[s.length-1]-t[t.length-1]:0}function uP(s,t,e=!1){let{routesMeta:n}=s,a={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=Xy({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),b=d.route;if(!y&&f&&e&&!n[n.length-1].route.index&&(y=Xy({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:ya([o,y.pathname]),pathnameBase:yP(ya([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=ya([o,y.pathnameBase]))}return c}function Xy(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,n]=hP(s.path,s.caseSensitive,s.end),a=t.match(e);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},b)=>{if(g==="*"){let A=u[b]||"";c=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const w=u[b];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:s}}function hP(s,t=!1,e=!0){cs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function dP(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cs(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function _a(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=s.charAt(e);return n&&n!=="/"?null:s.slice(e)||"/"}var fP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pP=s=>fP.test(s);function gP(s,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof s=="string"?Vh(s):s,o;if(e)if(pP(e))o=e;else{if(e.includes("//")){let c=e;e=e.replace(/\/\/+/g,"/"),cs(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${e}`)}e.startsWith("/")?o=gT(e.substring(1),"/"):o=gT(e,t)}else o=t;return{pathname:o,search:vP(n),hash:bP(a)}}function gT(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Fx(s,t,e,n){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mP(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function l_(s){let t=mP(s);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function c_(s,t,e,n=!1){let a;typeof s=="string"?a=Vh(s):(a={...s},De(!a.pathname||!a.pathname.includes("?"),Fx("?","pathname","search",a)),De(!a.pathname||!a.pathname.includes("#"),Fx("#","pathname","hash",a)),De(!a.search||!a.search.includes("#"),Fx("#","search","hash",a)));let o=s===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=e;else{let y=t.length-1;if(!n&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=gP(a,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ya=s=>s.join("/").replace(/\/\/+/g,"/"),yP=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),vP=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,bP=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function xP(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function wP(s){return s.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fR=["POST","PUT","PATCH","DELETE"];new Set(fR);var AP=["GET",...fR];new Set(AP);var qh=E.createContext(null);qh.displayName="DataRouter";var Fv=E.createContext(null);Fv.displayName="DataRouterState";E.createContext(!1);var pR=E.createContext({isTransitioning:!1});pR.displayName="ViewTransition";var _P=E.createContext(new Map);_P.displayName="Fetchers";var SP=E.createContext(null);SP.displayName="Await";var us=E.createContext(null);us.displayName="Navigation";var pg=E.createContext(null);pg.displayName="Location";var Ls=E.createContext({outlet:null,matches:[],isDataRoute:!1});Ls.displayName="Route";var u_=E.createContext(null);u_.displayName="RouteError";function EP(s,{relative:t}={}){De(Gh(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=E.useContext(us),{hash:a,pathname:o,search:c}=gg(s,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:ya([e,o])),n.createHref({pathname:u,search:c,hash:a})}function Gh(){return E.useContext(pg)!=null}function Uo(){return De(Gh(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(pg).location}var gR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mR(s){E.useContext(us).static||E.useLayoutEffect(s)}function Ec(){let{isDataRoute:s}=E.useContext(Ls);return s?zP():CP()}function CP(){De(Gh(),"useNavigate() may be used only in the context of a <Router> component.");let s=E.useContext(qh),{basename:t,navigator:e}=E.useContext(us),{matches:n}=E.useContext(Ls),{pathname:a}=Uo(),o=JSON.stringify(l_(n)),c=E.useRef(!1);return mR(()=>{c.current=!0}),E.useCallback((d,f={})=>{if(cs(c.current,gR),!c.current)return;if(typeof d=="number"){e.go(d);return}let g=c_(d,JSON.parse(o),a,f.relative==="path");s==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ya([t,g.pathname])),(f.replace?e.replace:e.push)(g,f.state,f)},[t,e,o,a,s])}E.createContext(null);function TP(){let{matches:s}=E.useContext(Ls),t=s[s.length-1];return t?t.params:{}}function gg(s,{relative:t}={}){let{matches:e}=E.useContext(Ls),{pathname:n}=Uo(),a=JSON.stringify(l_(e));return E.useMemo(()=>c_(s,JSON.parse(a),n,t==="path"),[s,a,n,t])}function kP(s,t){return yR(s,t)}function yR(s,t,e,n,a){var D;De(Gh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=E.useContext(us),{matches:c}=E.useContext(Ls),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let L=y&&y.path||"";vR(f,!y||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let b=Uo(),w;if(t){let L=typeof t=="string"?Vh(t):t;De(g==="/"||((D=L.pathname)==null?void 0:D.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),w=L}else w=b;let A=w.pathname||"/",S=A;if(g!=="/"){let L=g.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(L.length).join("/")}let C=uR(s,{pathname:S});cs(y||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),cs(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=LP(C&&C.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:ya([g,o.encodeLocation?o.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:ya([g,o.encodeLocation?o.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),c,e,n,a);return t&&T?E.createElement(pg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},T):T}function RP(){let s=IP(),t=xP(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",s),c=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:o},"ErrorBoundary")," or"," ",E.createElement("code",{style:o},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),e?E.createElement("pre",{style:a},e):null,c)}var NP=E.createElement(RP,null),MP=class extends E.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.onError?this.props.onError(s,t):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?E.createElement(Ls.Provider,{value:this.props.routeContext},E.createElement(u_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DP({routeContext:s,match:t,children:e}){let n=E.useContext(qh);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Ls.Provider,{value:s},e)}function LP(s,t=[],e=null,n=null,a=null){if(s==null){if(!e)return null;if(e.errors)s=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let o=s,c=e==null?void 0:e.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);De(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(e)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:b,errors:w}=e,A=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||A){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=e&&n?(g,y)=>{var b,w;n(g,{location:e.location,params:((w=(b=e.matches)==null?void 0:b[0])==null?void 0:w.params)??{},unstable_pattern:wP(e.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,b)=>{let w,A=!1,S=null,C=null;e&&(w=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||NP,u&&(d<0&&b===0?(vR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,C=null):d===b&&(A=!0,C=y.route.hydrateFallbackElement||null)));let T=t.concat(o.slice(0,b+1)),D=()=>{let L;return w?L=S:A?L=C:y.route.Component?L=E.createElement(y.route.Component,null):y.route.element?L=y.route.element:L=g,E.createElement(DP,{match:y,routeContext:{outlet:g,matches:T,isDataRoute:e!=null},children:L})};return e&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?E.createElement(MP,{location:e.location,revalidation:e.revalidation,component:S,error:w,children:D(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:f}):D()},null)}function h_(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OP(s){let t=E.useContext(qh);return De(t,h_(s)),t}function jP(s){let t=E.useContext(Fv);return De(t,h_(s)),t}function PP(s){let t=E.useContext(Ls);return De(t,h_(s)),t}function d_(s){let t=PP(s),e=t.matches[t.matches.length-1];return De(e.route.id,`${s} can only be used on routes that contain a unique "id"`),e.route.id}function FP(){return d_("useRouteId")}function IP(){var n;let s=E.useContext(u_),t=jP("useRouteError"),e=d_("useRouteError");return s!==void 0?s:(n=t.errors)==null?void 0:n[e]}function zP(){let{router:s}=OP("useNavigate"),t=d_("useNavigate"),e=E.useRef(!1);return mR(()=>{e.current=!0}),E.useCallback(async(a,o={})=>{cs(e.current,gR),e.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:t,...o}))},[s,t])}var mT={};function vR(s,t,e){!t&&!mT[s]&&(mT[s]=!0,cs(!1,e))}E.memo(UP);function UP({routes:s,future:t,state:e,unstable_onError:n}){return yR(s,void 0,e,n,t)}function Yy({to:s,replace:t,state:e,relative:n}){De(Gh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=E.useContext(us);cs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=E.useContext(Ls),{pathname:c}=Uo(),u=Ec(),d=c_(s,l_(o),c,n==="path"),f=JSON.stringify(d);return E.useEffect(()=>{u(JSON.parse(f),{replace:t,state:e,relative:n})},[u,f,n,t,e]),null}function hl(s){De(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BP({basename:s="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:o=!1,unstable_useTransitions:c}){De(!Gh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=s.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:u,navigator:a,static:o,unstable_useTransitions:c,future:{}}),[u,a,o,c]);typeof e=="string"&&(e=Vh(e));let{pathname:f="/",search:g="",hash:y="",state:b=null,key:w="default"}=e,A=E.useMemo(()=>{let S=_a(f,u);return S==null?null:{location:{pathname:S,search:g,hash:y,state:b,key:w},navigationType:n}},[u,f,g,y,b,w,n]);return cs(A!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:E.createElement(us.Provider,{value:d},E.createElement(pg.Provider,{children:t,value:A}))}function HP({children:s,location:t}){return kP(vw(s),t)}function vw(s,t=[]){let e=[];return E.Children.forEach(s,(n,a)=>{if(!E.isValidElement(n))return;let o=[...t,a];if(n.type===E.Fragment){e.push.apply(e,vw(n.props.children,o));return}De(n.type===hl,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),De(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=vw(n.props.children,o)),e.push(c)}),e}var cy="get",uy="application/x-www-form-urlencoded";function Iv(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function VP(s){return Iv(s)&&s.tagName.toLowerCase()==="button"}function qP(s){return Iv(s)&&s.tagName.toLowerCase()==="form"}function GP(s){return Iv(s)&&s.tagName.toLowerCase()==="input"}function $P(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function XP(s,t){return s.button===0&&(!t||t==="_self")&&!$P(s)}var Vm=null;function YP(){if(Vm===null)try{new FormData(document.createElement("form"),0),Vm=!1}catch{Vm=!0}return Vm}var KP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ix(s){return s!=null&&!KP.has(s)?(cs(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uy}"`),null):s}function WP(s,t){let e,n,a,o,c;if(qP(s)){let u=s.getAttribute("action");n=u?_a(u,t):null,e=s.getAttribute("method")||cy,a=Ix(s.getAttribute("enctype"))||uy,o=new FormData(s)}else if(VP(s)||GP(s)&&(s.type==="submit"||s.type==="image")){let u=s.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||u.getAttribute("action");if(n=d?_a(d,t):null,e=s.getAttribute("formmethod")||u.getAttribute("method")||cy,a=Ix(s.getAttribute("formenctype"))||Ix(u.getAttribute("enctype"))||uy,o=new FormData(u,s),!YP()){let{name:f,type:g,value:y}=s;if(g==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,y)}}else{if(Iv(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=cy,n=null,a=uy,c=s}return o&&a==="text/plain"&&(c=o,o=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function f_(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function QP(s,t,e){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&_a(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function ZP(s,t){if(s.id in t)return t[s.id];try{let e=await import(s.module);return t[s.id]=e,e}catch(e){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function JP(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function tF(s,t,e){let n=await Promise.all(s.map(async a=>{let o=t.routes[a.route.id];if(o){let c=await ZP(o,e);return c.links?c.links():[]}return[]}));return sF(n.flat(1).filter(JP).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function yT(s,t,e,n,a,o){let c=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,u=(d,f)=>{var g;return e[f].pathname!==d.pathname||((g=e[f].route.path)==null?void 0:g.endsWith("*"))&&e[f].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{var y;let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((y=e[0])==null?void 0:y.params)||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function eF(s,t,{includeHydrateFallback:e}={}){return nF(s.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function nF(s){return[...new Set(s)]}function iF(s){let t={},e=Object.keys(s).sort();for(let n of e)t[n]=s[n];return t}function sF(s,t){let e=new Set;return new Set(t),s.reduce((n,a)=>{let o=JSON.stringify(iF(a));return e.has(o)||(e.add(o),n.push({key:o,link:a})),n},[])}function bR(){let s=E.useContext(qh);return f_(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function rF(){let s=E.useContext(Fv);return f_(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var p_=E.createContext(void 0);p_.displayName="FrameworkContext";function xR(){let s=E.useContext(p_);return f_(s,"You must render this element inside a <HydratedRouter> element"),s}function aF(s,t){let e=E.useContext(p_),[n,a]=E.useState(!1),[o,c]=E.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,b=E.useRef(null);E.useEffect(()=>{if(s==="render"&&c(!0),s==="viewport"){let S=T=>{T.forEach(D=>{c(D.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return b.current&&C.observe(b.current),()=>{C.disconnect()}}},[s]),E.useEffect(()=>{if(n){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[n]);let w=()=>{a(!0)},A=()=>{a(!1),c(!1)};return e?s!=="intent"?[o,b,{}]:[o,b,{onFocus:Yd(u,w),onBlur:Yd(d,A),onMouseEnter:Yd(f,w),onMouseLeave:Yd(g,A),onTouchStart:Yd(y,w)}]:[!1,b,{}]}function Yd(s,t){return e=>{s&&s(e),e.defaultPrevented||t(e)}}function oF({page:s,...t}){let{router:e}=bR(),n=E.useMemo(()=>uR(e.routes,s,e.basename),[e.routes,s,e.basename]);return n?E.createElement(cF,{page:s,matches:n,...t}):null}function lF(s){let{manifest:t,routeModules:e}=xR(),[n,a]=E.useState([]);return E.useEffect(()=>{let o=!1;return tF(s,t,e).then(c=>{o||a(c)}),()=>{o=!0}},[s,t,e]),n}function cF({page:s,matches:t,...e}){let n=Uo(),{manifest:a,routeModules:o}=xR(),{basename:c}=bR(),{loaderData:u,matches:d}=rF(),f=E.useMemo(()=>yT(s,t,d,a,n,"data"),[s,t,d,a,n]),g=E.useMemo(()=>yT(s,t,d,a,n,"assets"),[s,t,d,a,n]),y=E.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let A=new Set,S=!1;if(t.forEach(T=>{var L;let D=a.routes[T.route.id];!D||!D.hasLoader||(!f.some(P=>P.route.id===T.route.id)&&T.route.id in u&&((L=o[T.route.id])!=null&&L.shouldRevalidate)||D.hasClientLoader?S=!0:A.add(T.route.id))}),A.size===0)return[];let C=QP(s,c,"data");return S&&A.size>0&&C.searchParams.set("_routes",t.filter(T=>A.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[c,u,n,a,f,t,s,o]),b=E.useMemo(()=>eF(g,a),[g,a]),w=lF(g);return E.createElement(E.Fragment,null,y.map(A=>E.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...e})),b.map(A=>E.createElement("link",{key:A,rel:"modulepreload",href:A,...e})),w.map(({key:A,link:S})=>E.createElement("link",{key:A,nonce:e.nonce,...S})))}function uF(...s){return t=>{s.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var wR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wR&&(window.__reactRouterVersion="7.10.1")}catch{}function hF({basename:s,children:t,unstable_useTransitions:e,window:n}){let a=E.useRef();a.current==null&&(a.current=Wj({window:n,v5Compat:!0}));let o=a.current,[c,u]=E.useState({action:o.action,location:o.location}),d=E.useCallback(f=>{e===!1?u(f):E.startTransition(()=>u(f))},[e]);return E.useLayoutEffect(()=>o.listen(d),[o,d]),E.createElement(BP,{basename:s,children:t,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:e===!0})}var AR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zv=E.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...b},w){let{basename:A,unstable_useTransitions:S}=E.useContext(us),C=typeof f=="string"&&AR.test(f),T,D=!1;if(typeof f=="string"&&C&&(T=f,wR))try{let $=new URL(window.location.href),W=f.startsWith("//")?new URL($.protocol+f):new URL(f),it=_a(W.pathname,A);W.origin===$.origin&&it!=null?f=it+W.search+W.hash:D=!0}catch{cs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=EP(f,{relative:a}),[P,z,U]=aF(n,b),O=gF(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:y,unstable_useTransitions:S});function H($){t&&t($),$.defaultPrevented||O($)}let Z=E.createElement("a",{...b,...U,href:T||L,onClick:D||o?t:H,ref:uF(w,z),target:d,"data-discover":!C&&e==="render"?"true":void 0});return P&&!C?E.createElement(E.Fragment,null,Z,E.createElement(oF,{page:L})):Z});zv.displayName="Link";var dF=E.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=gg(c,{relative:f.relative}),b=Uo(),w=E.useContext(Fv),{navigator:A,basename:S}=E.useContext(us),C=w!=null&&xF(y)&&u===!0,T=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,D=b.pathname,L=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;e||(D=D.toLowerCase(),L=L?L.toLowerCase():null,T=T.toLowerCase()),L&&S&&(L=_a(L,S)||L);const P=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let z=D===T||!a&&D.startsWith(T)&&D.charAt(P)==="/",U=L!=null&&(L===T||!a&&L.startsWith(T)&&L.charAt(T.length)==="/"),O={isActive:z,isPending:U,isTransitioning:C},H=z?t:void 0,Z;typeof n=="function"?Z=n(O):Z=[n,z?"active":null,U?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let $=typeof o=="function"?o(O):o;return E.createElement(zv,{...f,"aria-current":H,className:Z,ref:g,style:$,to:c,viewTransition:u},typeof d=="function"?d(O):d)});dF.displayName="NavLink";var fF=E.forwardRef(({discover:s="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:o,method:c=cy,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...b},w)=>{let{unstable_useTransitions:A}=E.useContext(us),S=vF(),C=bF(u,{relative:f}),T=c.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&AR.test(u),L=P=>{if(d&&d(P),P.defaultPrevented)return;P.preventDefault();let z=P.nativeEvent.submitter,U=(z==null?void 0:z.getAttribute("formmethod"))||c,O=()=>S(z||P.currentTarget,{fetcherKey:t,method:U,navigate:e,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:y});A&&e!==!1?E.startTransition(()=>O()):O()};return E.createElement("form",{ref:w,method:T,action:C,onSubmit:n?d:L,...b,"data-discover":!D&&s==="render"?"true":void 0})});fF.displayName="Form";function pF(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _R(s){let t=E.useContext(qh);return De(t,pF(s)),t}function gF(s,{target:t,replace:e,state:n,preventScrollReset:a,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=Ec(),f=Uo(),g=gg(s,{relative:o});return E.useCallback(y=>{if(XP(y,t)){y.preventDefault();let b=e!==void 0?e:Sf(f)===Sf(g),w=()=>d(s,{replace:b,state:n,preventScrollReset:a,relative:o,viewTransition:c});u?E.startTransition(()=>w()):w()}},[f,d,g,e,n,t,s,a,o,c,u])}var mF=0,yF=()=>`__${String(++mF)}__`;function vF(){let{router:s}=_R("useSubmit"),{basename:t}=E.useContext(us),e=FP(),n=s.fetch,a=s.navigate;return E.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=WP(o,t);if(c.navigate===!1){let b=c.fetcherKey||yF();await n(b,e,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,a,t,e])}function bF(s,{relative:t}={}){let{basename:e}=E.useContext(us),n=E.useContext(Ls);De(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...gg(s||".",{relative:t})},c=Uo();if(s==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!s||s===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:ya([e,o.pathname])),Sf(o)}function xF(s,{relative:t}={}){let e=E.useContext(pR);De(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=_R("useViewTransitionState"),a=gg(s,{relative:t});if(!e.isTransitioning)return!1;let o=_a(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=_a(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Xy(a.pathname,c)!=null||Xy(a.pathname,o)!=null}var SR=cR();const wF=a_(SR),vT=s=>{let t;const e=new Set,n=(f,g)=>{const y=typeof f=="function"?f(t):f;if(!Object.is(y,t)){const b=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(w=>w(t,b))}},a=()=>t,u={setState:n,getState:a,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=s(n,a,u);return u},AF=(s=>s?vT(s):vT),_F=s=>s;function SF(s,t=_F){const e=mn.useSyncExternalStore(s.subscribe,mn.useCallback(()=>t(s.getState()),[s,t]),mn.useCallback(()=>t(s.getInitialState()),[s,t]));return mn.useDebugValue(e),e}const bT=s=>{const t=AF(s),e=n=>SF(t,n);return Object.assign(e,t),e},ER=(s=>s?bT(s):bT),EF="/api";class CF{constructor(t){Mt(this,"baseUrl");this.baseUrl=t}getToken(){return localStorage.getItem("heytex_token")}async request(t,e={}){const{method:n="GET",body:a,headers:o={}}=e,c=this.getToken(),u={method:n,headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{},...o}};a&&(u.body=JSON.stringify(a));const d=await fetch(`${this.baseUrl}${t}`,u);if(!d.ok){const f=await d.json().catch(()=>({error:"Unknown error"}));throw new Error(f.error||`HTTP error ${d.status}`)}return e.responseType==="blob"?d.blob():d.json()}async login(t,e){const n=await this.request("/auth/login",{method:"POST",body:{email:t,password:e}});return localStorage.setItem("heytex_token",n.token),n}async register(t,e,n){const a=await this.request("/auth/register",{method:"POST",body:{email:t,password:e,name:n}});return localStorage.setItem("heytex_token",a.token),a}async getMe(){return this.request("/auth/me")}logout(){localStorage.removeItem("heytex_token")}async getProjects(){return this.request("/projects")}async getProject(t){return this.request(`/projects/${t}`)}async createProject(t){return this.request("/projects",{method:"POST",body:t})}async updateProject(t,e){return this.request(`/projects/${t}`,{method:"PATCH",body:e})}async deleteProject(t){return this.request(`/projects/${t}`,{method:"DELETE"})}async addCollaborator(t,e,n){return this.request(`/projects/${t}/collaborators`,{method:"POST",body:{email:e,role:n}})}async removeCollaborator(t,e){return this.request(`/projects/${t}/collaborators/${e}`,{method:"DELETE"})}async getFiles(t){return this.request(`/files/project/${t}`)}async getFile(t){return this.request(`/files/${t}`)}async createFile(t){return this.request("/files",{method:"POST",body:t})}async updateFile(t,e){return this.request(`/files/${t}`,{method:"PATCH",body:e})}async deleteFile(t){return this.request(`/files/${t}`,{method:"DELETE"})}async compile(t){return this.request("/compile/latex",{method:"POST",body:{content:t},responseType:"blob"})}async uploadFile(t){return this.request("/files/upload",{method:"POST",body:t})}}const Mn=new CF(EF),Cc=ER(s=>({user:null,isAuthenticated:!1,isLoading:!0,login:async(t,e)=>{const{user:n}=await Mn.login(t,e);s({user:n,isAuthenticated:!0})},register:async(t,e,n)=>{const{user:a}=await Mn.register(t,e,n);s({user:a,isAuthenticated:!0})},logout:()=>{Mn.logout(),s({user:null,isAuthenticated:!1})},checkAuth:async()=>{try{if(!localStorage.getItem("heytex_token")){s({isLoading:!1});return}const{user:e}=await Mn.getMe();s({user:e,isAuthenticated:!0,isLoading:!1})}catch{localStorage.removeItem("heytex_token"),s({user:null,isAuthenticated:!1,isLoading:!1})}}})),CR=ER((s,t)=>({currentProject:null,currentFile:null,files:[],openFiles:[],isSidebarOpen:!0,isPreviewOpen:!0,theme:localStorage.getItem("heytex_theme")||"light",compilationStatus:"idle",compilationError:null,pdfData:null,setCurrentProject:e=>s({currentProject:e}),setCurrentFile:e=>s({currentFile:e}),setFiles:e=>s({files:e}),addOpenFile:e=>{const{openFiles:n}=t();n.find(a=>a.id===e.id)||s({openFiles:[...n,e]}),s({currentFile:e})},removeOpenFile:e=>{const{openFiles:n,currentFile:a}=t(),o=n.filter(c=>c.id!==e);s({openFiles:o}),(a==null?void 0:a.id)===e&&s({currentFile:o[o.length-1]||null})},toggleSidebar:()=>s(e=>({isSidebarOpen:!e.isSidebarOpen})),togglePreview:()=>s(e=>({isPreviewOpen:!e.isPreviewOpen})),toggleTheme:()=>{const e=t().theme==="light"?"dark":"light";localStorage.setItem("heytex_theme",e),document.documentElement.classList.toggle("dark",e==="dark"),s({theme:e})},setCompilationStatus:(e,n)=>s({compilationStatus:e,compilationError:n||null}),setPdfData:e=>s({pdfData:e}),updateFileContent:(e,n)=>{const{files:a,openFiles:o,currentFile:c}=t(),u=d=>d.id===e?{...d,content:n}:d;s({files:a.map(u),openFiles:o.map(u),currentFile:(c==null?void 0:c.id)===e?{...c,content:n}:c})}}));if(typeof window<"u"){const s=localStorage.getItem("heytex_theme")||"light";document.documentElement.classList.toggle("dark",s==="dark")}function TR(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var a=s.length;for(t=0;t<a;t++)s[t]&&(e=TR(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function $h(){for(var s,t,e=0,n="",a=arguments.length;e<a;e++)(s=arguments[e])&&(t=TR(s))&&(n&&(n+=" "),n+=t);return n}const TF=(s,t)=>{const e=new Array(s.length+t.length);for(let n=0;n<s.length;n++)e[n]=s[n];for(let n=0;n<t.length;n++)e[s.length+n]=t[n];return e},kF=(s,t)=>({classGroupId:s,validator:t}),kR=(s=new Map,t=null,e)=>({nextPart:s,validators:t,classGroupId:e}),Ky="-",xT=[],RF="arbitrary..",NF=s=>{const t=DF(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return MF(c);const u=c.split(Ky),d=u[0]===""&&u.length>1?1:0;return RR(u,d,t)},getConflictingClassGroupIds:(c,u)=>{if(u){const d=n[c],f=e[c];return d?f?TF(f,d):d:f||xT}return e[c]||xT}}},RR=(s,t,e)=>{if(s.length-t===0)return e.classGroupId;const a=s[t],o=e.nextPart.get(a);if(o){const f=RR(s,t+1,o);if(f)return f}const c=e.validators;if(c===null)return;const u=t===0?s.join(Ky):s.slice(t).join(Ky),d=c.length;for(let f=0;f<d;f++){const g=c[f];if(g.validator(u))return g.classGroupId}},MF=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=s.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?RF+n:void 0})(),DF=s=>{const{theme:t,classGroups:e}=s;return LF(e,t)},LF=(s,t)=>{const e=kR();for(const n in s){const a=s[n];g_(a,e,n,t)}return e},g_=(s,t,e,n)=>{const a=s.length;for(let o=0;o<a;o++){const c=s[o];OF(c,t,e,n)}},OF=(s,t,e,n)=>{if(typeof s=="string"){jF(s,t,e);return}if(typeof s=="function"){PF(s,t,e,n);return}FF(s,t,e,n)},jF=(s,t,e)=>{const n=s===""?t:NR(t,s);n.classGroupId=e},PF=(s,t,e,n)=>{if(IF(s)){g_(s(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(kF(e,s))},FF=(s,t,e,n)=>{const a=Object.entries(s),o=a.length;for(let c=0;c<o;c++){const[u,d]=a[c];g_(d,NR(t,u),e,n)}},NR=(s,t)=>{let e=s;const n=t.split(Ky),a=n.length;for(let o=0;o<a;o++){const c=n[o];let u=e.nextPart.get(c);u||(u=kR(),e.nextPart.set(c,u)),e=u}return e},IF=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,zF=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const a=(o,c)=>{e[o]=c,t++,t>s&&(t=0,n=e,e=Object.create(null))};return{get(o){let c=e[o];if(c!==void 0)return c;if((c=n[o])!==void 0)return a(o,c),c},set(o,c){o in e?e[o]=c:a(o,c)}}},bw="!",wT=":",UF=[],AT=(s,t,e,n,a)=>({modifiers:s,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:a}),BF=s=>{const{prefix:t,experimentalParseClassName:e}=s;let n=a=>{const o=[];let c=0,u=0,d=0,f;const g=a.length;for(let S=0;S<g;S++){const C=a[S];if(c===0&&u===0){if(C===wT){o.push(a.slice(d,S)),d=S+1;continue}if(C==="/"){f=S;continue}}C==="["?c++:C==="]"?c--:C==="("?u++:C===")"&&u--}const y=o.length===0?a:a.slice(d);let b=y,w=!1;y.endsWith(bw)?(b=y.slice(0,-1),w=!0):y.startsWith(bw)&&(b=y.slice(1),w=!0);const A=f&&f>d?f-d:void 0;return AT(o,w,b,A)};if(t){const a=t+wT,o=n;n=c=>c.startsWith(a)?o(c.slice(a.length)):AT(UF,!1,c,void 0,!0)}if(e){const a=n;n=o=>e({className:o,parseClassName:a})}return n},HF=s=>{const t=new Map;return s.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let a=[];for(let o=0;o<e.length;o++){const c=e[o],u=c[0]==="[",d=t.has(c);u||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(c)):a.push(c)}return a.length>0&&(a.sort(),n.push(...a)),n}},VF=s=>({cache:zF(s.cacheSize),parseClassName:BF(s),sortModifiers:HF(s),...NF(s)}),qF=/\s+/,GF=(s,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:o}=t,c=[],u=s.trim().split(qF);let d="";for(let f=u.length-1;f>=0;f-=1){const g=u[f],{isExternal:y,modifiers:b,hasImportantModifier:w,baseClassName:A,maybePostfixModifierPosition:S}=e(g);if(y){d=g+(d.length>0?" "+d:d);continue}let C=!!S,T=n(C?A.substring(0,S):A);if(!T){if(!C){d=g+(d.length>0?" "+d:d);continue}if(T=n(A),!T){d=g+(d.length>0?" "+d:d);continue}C=!1}const D=b.length===0?"":b.length===1?b[0]:o(b).join(":"),L=w?D+bw:D,P=L+T;if(c.indexOf(P)>-1)continue;c.push(P);const z=a(T,C);for(let U=0;U<z.length;++U){const O=z[U];c.push(L+O)}d=g+(d.length>0?" "+d:d)}return d},$F=(...s)=>{let t=0,e,n,a="";for(;t<s.length;)(e=s[t++])&&(n=MR(e))&&(a&&(a+=" "),a+=n);return a},MR=s=>{if(typeof s=="string")return s;let t,e="";for(let n=0;n<s.length;n++)s[n]&&(t=MR(s[n]))&&(e&&(e+=" "),e+=t);return e},XF=(s,...t)=>{let e,n,a,o;const c=d=>{const f=t.reduce((g,y)=>y(g),s());return e=VF(f),n=e.cache.get,a=e.cache.set,o=u,u(d)},u=d=>{const f=n(d);if(f)return f;const g=GF(d,e);return a(d,g),g};return o=c,(...d)=>o($F(...d))},YF=[],Ze=s=>{const t=e=>e[s]||YF;return t.isThemeGetter=!0,t},DR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,LR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,KF=/^\d+\/\d+$/,WF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,QF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ZF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,JF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,t3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yu=s=>KF.test(s),It=s=>!!s&&!Number.isNaN(Number(s)),eo=s=>!!s&&Number.isInteger(Number(s)),zx=s=>s.endsWith("%")&&It(s.slice(0,-1)),Ir=s=>WF.test(s),e3=()=>!0,n3=s=>QF.test(s)&&!ZF.test(s),OR=()=>!1,i3=s=>JF.test(s),s3=s=>t3.test(s),r3=s=>!yt(s)&&!vt(s),a3=s=>Xh(s,FR,OR),yt=s=>DR.test(s),cl=s=>Xh(s,IR,n3),Ux=s=>Xh(s,h3,It),_T=s=>Xh(s,jR,OR),o3=s=>Xh(s,PR,s3),qm=s=>Xh(s,zR,i3),vt=s=>LR.test(s),Kd=s=>Yh(s,IR),l3=s=>Yh(s,d3),ST=s=>Yh(s,jR),c3=s=>Yh(s,FR),u3=s=>Yh(s,PR),Gm=s=>Yh(s,zR,!0),Xh=(s,t,e)=>{const n=DR.exec(s);return n?n[1]?t(n[1]):e(n[2]):!1},Yh=(s,t,e=!1)=>{const n=LR.exec(s);return n?n[1]?t(n[1]):e:!1},jR=s=>s==="position"||s==="percentage",PR=s=>s==="image"||s==="url",FR=s=>s==="length"||s==="size"||s==="bg-size",IR=s=>s==="length",h3=s=>s==="number",d3=s=>s==="family-name",zR=s=>s==="shadow",f3=()=>{const s=Ze("color"),t=Ze("font"),e=Ze("text"),n=Ze("font-weight"),a=Ze("tracking"),o=Ze("leading"),c=Ze("breakpoint"),u=Ze("container"),d=Ze("spacing"),f=Ze("radius"),g=Ze("shadow"),y=Ze("inset-shadow"),b=Ze("text-shadow"),w=Ze("drop-shadow"),A=Ze("blur"),S=Ze("perspective"),C=Ze("aspect"),T=Ze("ease"),D=Ze("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...P(),vt,yt],U=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],H=()=>[vt,yt,d],Z=()=>[yu,"full","auto",...H()],$=()=>[eo,"none","subgrid",vt,yt],W=()=>["auto",{span:["full",eo,vt,yt]},eo,vt,yt],it=()=>[eo,"auto",vt,yt],ct=()=>["auto","min","max","fr",vt,yt],lt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],nt=()=>["start","end","center","stretch","center-safe","end-safe"],I=()=>["auto",...H()],q=()=>[yu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],X=()=>[s,vt,yt],_t=()=>[...P(),ST,_T,{position:[vt,yt]}],Ct=()=>["no-repeat",{repeat:["","x","y","space","round"]}],j=()=>["auto","cover","contain",c3,a3,{size:[vt,yt]}],G=()=>[zx,Kd,cl],tt=()=>["","none","full",f,vt,yt],ot=()=>["",It,Kd,cl],pt=()=>["solid","dashed","dotted","double"],wt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ht=()=>[It,zx,ST,_T],Gt=()=>["","none",A,vt,yt],Ft=()=>["none",It,vt,yt],$t=()=>["none",It,vt,yt],ce=()=>[It,vt,yt],cn=()=>[yu,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ir],breakpoint:[Ir],color:[e3],container:[Ir],"drop-shadow":[Ir],ease:["in","out","in-out"],font:[r3],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ir],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ir],shadow:[Ir],spacing:["px",It],text:[Ir],"text-shadow":[Ir],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",yu,yt,vt,C]}],container:["container"],columns:[{columns:[It,yt,vt,u]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Z()}],"inset-x":[{"inset-x":Z()}],"inset-y":[{"inset-y":Z()}],start:[{start:Z()}],end:[{end:Z()}],top:[{top:Z()}],right:[{right:Z()}],bottom:[{bottom:Z()}],left:[{left:Z()}],visibility:["visible","invisible","collapse"],z:[{z:[eo,"auto",vt,yt]}],basis:[{basis:[yu,"full","auto",u,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[It,yu,"auto","initial","none",yt]}],grow:[{grow:["",It,vt,yt]}],shrink:[{shrink:["",It,vt,yt]}],order:[{order:[eo,"first","last","none",vt,yt]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":it()}],"col-end":[{"col-end":it()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":it()}],"row-end":[{"row-end":it()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ct()}],"auto-rows":[{"auto-rows":ct()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...lt(),"normal"]}],"justify-items":[{"justify-items":[...nt(),"normal"]}],"justify-self":[{"justify-self":["auto",...nt()]}],"align-content":[{content:["normal",...lt()]}],"align-items":[{items:[...nt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...nt(),{baseline:["","last"]}]}],"place-content":[{"place-content":lt()}],"place-items":[{"place-items":[...nt(),"baseline"]}],"place-self":[{"place-self":["auto",...nt()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:I()}],mx:[{mx:I()}],my:[{my:I()}],ms:[{ms:I()}],me:[{me:I()}],mt:[{mt:I()}],mr:[{mr:I()}],mb:[{mb:I()}],ml:[{ml:I()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[u,"screen",...q()]}],"min-w":[{"min-w":[u,"screen","none",...q()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",e,Kd,cl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,vt,Ux]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zx,yt]}],"font-family":[{font:[l3,yt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,vt,yt]}],"line-clamp":[{"line-clamp":[It,"none",vt,Ux]}],leading:[{leading:[o,...H()]}],"list-image":[{"list-image":["none",vt,yt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",vt,yt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pt(),"wavy"]}],"text-decoration-thickness":[{decoration:[It,"from-font","auto",vt,cl]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[It,"auto",vt,yt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vt,yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vt,yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_t()}],"bg-repeat":[{bg:Ct()}],"bg-size":[{bg:j()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},eo,vt,yt],radial:["",vt,yt],conic:[eo,vt,yt]},u3,o3]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:tt()}],"rounded-s":[{"rounded-s":tt()}],"rounded-e":[{"rounded-e":tt()}],"rounded-t":[{"rounded-t":tt()}],"rounded-r":[{"rounded-r":tt()}],"rounded-b":[{"rounded-b":tt()}],"rounded-l":[{"rounded-l":tt()}],"rounded-ss":[{"rounded-ss":tt()}],"rounded-se":[{"rounded-se":tt()}],"rounded-ee":[{"rounded-ee":tt()}],"rounded-es":[{"rounded-es":tt()}],"rounded-tl":[{"rounded-tl":tt()}],"rounded-tr":[{"rounded-tr":tt()}],"rounded-br":[{"rounded-br":tt()}],"rounded-bl":[{"rounded-bl":tt()}],"border-w":[{border:ot()}],"border-w-x":[{"border-x":ot()}],"border-w-y":[{"border-y":ot()}],"border-w-s":[{"border-s":ot()}],"border-w-e":[{"border-e":ot()}],"border-w-t":[{"border-t":ot()}],"border-w-r":[{"border-r":ot()}],"border-w-b":[{"border-b":ot()}],"border-w-l":[{"border-l":ot()}],"divide-x":[{"divide-x":ot()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ot()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pt(),"hidden","none"]}],"divide-style":[{divide:[...pt(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...pt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[It,vt,yt]}],"outline-w":[{outline:["",It,Kd,cl]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",g,Gm,qm]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",y,Gm,qm]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:ot()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[It,cl]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":ot()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",b,Gm,qm]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[It,vt,yt]}],"mix-blend":[{"mix-blend":[...wt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":wt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[It]}],"mask-image-linear-from-pos":[{"mask-linear-from":ht()}],"mask-image-linear-to-pos":[{"mask-linear-to":ht()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":ht()}],"mask-image-t-to-pos":[{"mask-t-to":ht()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":ht()}],"mask-image-r-to-pos":[{"mask-r-to":ht()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":ht()}],"mask-image-b-to-pos":[{"mask-b-to":ht()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":ht()}],"mask-image-l-to-pos":[{"mask-l-to":ht()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":ht()}],"mask-image-x-to-pos":[{"mask-x-to":ht()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":ht()}],"mask-image-y-to-pos":[{"mask-y-to":ht()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[vt,yt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ht()}],"mask-image-radial-to-pos":[{"mask-radial-to":ht()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[It]}],"mask-image-conic-from-pos":[{"mask-conic-from":ht()}],"mask-image-conic-to-pos":[{"mask-conic-to":ht()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_t()}],"mask-repeat":[{mask:Ct()}],"mask-size":[{mask:j()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",vt,yt]}],filter:[{filter:["","none",vt,yt]}],blur:[{blur:Gt()}],brightness:[{brightness:[It,vt,yt]}],contrast:[{contrast:[It,vt,yt]}],"drop-shadow":[{"drop-shadow":["","none",w,Gm,qm]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",It,vt,yt]}],"hue-rotate":[{"hue-rotate":[It,vt,yt]}],invert:[{invert:["",It,vt,yt]}],saturate:[{saturate:[It,vt,yt]}],sepia:[{sepia:["",It,vt,yt]}],"backdrop-filter":[{"backdrop-filter":["","none",vt,yt]}],"backdrop-blur":[{"backdrop-blur":Gt()}],"backdrop-brightness":[{"backdrop-brightness":[It,vt,yt]}],"backdrop-contrast":[{"backdrop-contrast":[It,vt,yt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",It,vt,yt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[It,vt,yt]}],"backdrop-invert":[{"backdrop-invert":["",It,vt,yt]}],"backdrop-opacity":[{"backdrop-opacity":[It,vt,yt]}],"backdrop-saturate":[{"backdrop-saturate":[It,vt,yt]}],"backdrop-sepia":[{"backdrop-sepia":["",It,vt,yt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",vt,yt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[It,"initial",vt,yt]}],ease:[{ease:["linear","initial",T,vt,yt]}],delay:[{delay:[It,vt,yt]}],animate:[{animate:["none",D,vt,yt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,vt,yt]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:Ft()}],"rotate-x":[{"rotate-x":Ft()}],"rotate-y":[{"rotate-y":Ft()}],"rotate-z":[{"rotate-z":Ft()}],scale:[{scale:$t()}],"scale-x":[{"scale-x":$t()}],"scale-y":[{"scale-y":$t()}],"scale-z":[{"scale-z":$t()}],"scale-3d":["scale-3d"],skew:[{skew:ce()}],"skew-x":[{"skew-x":ce()}],"skew-y":[{"skew-y":ce()}],transform:[{transform:[vt,yt,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:cn()}],"translate-x":[{"translate-x":cn()}],"translate-y":[{"translate-y":cn()}],"translate-z":[{"translate-z":cn()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vt,yt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vt,yt]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[It,Kd,cl,Ux]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},p3=XF(f3);function Pi(...s){return p3($h(s))}function ET(s){return new Date(s).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})}function g3(s){return s.slice(s.lastIndexOf(".")+1).toLowerCase()}function UR(s){const t=g3(s);return{tex:"",typ:"",pdf:"",png:"",jpg:"",jpeg:"",gif:"",svg:"",bib:"",txt:"",md:""}[t]||""}/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),y3=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),CT=s=>{const t=y3(s);return t.charAt(0).toUpperCase()+t.slice(1)},BR=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),v3=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=E.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:c,...u},d)=>E.createElement("svg",{ref:d,...b3,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:BR("lucide",a),...!o&&!v3(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>E.createElement(f,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=(s,t)=>{const e=E.forwardRef(({className:n,...a},o)=>E.createElement(x3,{ref:o,iconNode:t,className:BR(`lucide-${m3(CT(s))}`,`lucide-${s}`,n),...a}));return e.displayName=CT(s),e};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xw=Lt("calendar",w3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],_3=Lt("camera",A3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],HR=Lt("check",S3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],C3=Lt("chevron-down",E3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],k3=Lt("chevron-left",T3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],TT=Lt("chevron-right",R3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],M3=Lt("chevron-up",N3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],L3=Lt("circle-alert",D3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],j3=Lt("circle-check-big",O3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kT=Lt("clock",P3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],I3=Lt("copy",F3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Wy=Lt("download",z3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],B3=Lt("eye-off",U3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],RT=Lt("eye",H3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],Sa=Lt("file-code-corner",V3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],NT=Lt("file-down",q3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Mo=Lt("file-text",G3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],X3=Lt("file",$3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],m_=Lt("folder-open",Y3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],VR=Lt("folder",K3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Q3=Lt("hard-drive",W3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],MT=Lt("info",Z3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],DT=Lt("key",J3);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],e4=Lt("layout-grid",t4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],i4=Lt("list",n4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],r4=Lt("loader-circle",s4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],o4=Lt("log-out",a4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],qR=Lt("moon",l4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],u4=Lt("panel-left-close",c4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],d4=Lt("panel-left",h4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],p4=Lt("play",f4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],LT=Lt("plus",g4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],GR=Lt("save",m4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ww=Lt("share-2",y4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],b4=Lt("sparkles",v4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],$R=Lt("sun",x4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Aw=Lt("trash-2",w4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_4=Lt("upload",A4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],E4=Lt("user-plus",S4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],XR=Lt("user",C4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qy=Lt("users",T4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oh=Lt("x",k4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],N4=Lt("zoom-in",R4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],D4=Lt("zoom-out",M4);function ar({className:s,size:t="md"}){const e={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return x.jsx(r4,{className:Pi("animate-spin text-primary",e[t],s)})}function YR({message:s="ang ti..."}){return x.jsx("div",{className:"flex h-full w-full items-center justify-center bg-background",children:x.jsxs("div",{className:"flex flex-col items-center gap-4",children:[x.jsx(ar,{size:"lg"}),x.jsx("p",{className:"text-muted-foreground",children:s})]})})}const OT=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,jT=$h,L4=(s,t)=>e=>{var n;if((t==null?void 0:t.variants)==null)return jT(s,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:a,defaultVariants:o}=t,c=Object.keys(a).map(f=>{const g=e==null?void 0:e[f],y=o==null?void 0:o[f];if(g===null)return null;const b=OT(g)||OT(y);return a[f][b]}),u=e&&Object.entries(e).reduce((f,g)=>{let[y,b]=g;return b===void 0||(f[y]=b),f},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,g)=>{let{class:y,className:b,...w}=g;return Object.entries(w).every(A=>{let[S,C]=A;return Array.isArray(C)?C.includes({...o,...u}[S]):{...o,...u}[S]===C})?[...f,y,b]:f},[]);return jT(s,c,d,e==null?void 0:e.class,e==null?void 0:e.className)},O4=L4("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ee=E.forwardRef(({className:s,variant:t,size:e,...n},a)=>x.jsx("button",{className:Pi(O4({variant:t,size:e,className:s})),ref:a,...n}));Ee.displayName="Button";const zi=E.forwardRef(({className:s,type:t,label:e,error:n,...a},o)=>x.jsxs("div",{className:"space-y-1.5",children:[e&&x.jsx("label",{className:"text-sm font-medium text-foreground",children:e}),x.jsx("input",{type:t,className:Pi("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",n&&"border-destructive focus-visible:ring-destructive",s),ref:o,...a}),n&&x.jsx("p",{className:"text-sm text-destructive",children:n})]}));zi.displayName="Input";function j4(){const s=Ec(),{login:t}=Cc(),[e,n]=E.useState(""),[a,o]=E.useState(""),[c,u]=E.useState(""),[d,f]=E.useState(!1),g=async y=>{y.preventDefault(),u(""),f(!0);try{await t(e,a),s("/dashboard")}catch(b){u(b instanceof Error?b.message:"ng nhp tht bi")}finally{f(!1)}};return x.jsxs("div",{className:"flex min-h-screen",children:[x.jsx("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary/20 via-primary/10 to-background items-center justify-center p-12",children:x.jsxs("div",{className:"max-w-md space-y-6",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-3 rounded-xl bg-primary/20",children:x.jsx(Sa,{className:"h-10 w-10 text-primary"})}),x.jsx("span",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"HeyTeX"})]}),x.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Bin tp LaTeX & Typst chuyn nghip"}),x.jsx("p",{className:"text-lg text-muted-foreground",children:"Tri nghim giao din ging VS Code, bin dch Wasm siu tc, v cng tc thi gian thc vi ng nghip."}),x.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[x.jsx(b4,{className:"h-5 w-5"}),x.jsx("span",{children:"Powered by WebAssembly"})]})]})}),x.jsx("div",{className:"flex w-full lg:w-1/2 items-center justify-center p-8",children:x.jsxs("div",{className:"w-full max-w-md space-y-8",children:[x.jsxs("div",{className:"text-center lg:text-left",children:[x.jsxs("div",{className:"flex items-center gap-2 justify-center lg:hidden mb-8",children:[x.jsx(Sa,{className:"h-8 w-8 text-primary"}),x.jsx("span",{className:"text-2xl font-bold",children:"HeyTeX"})]}),x.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"ng nhp"}),x.jsx("p",{className:"mt-2 text-muted-foreground",children:"Cho mng bn quay li! Vui lng nhp thng tin ng nhp."})]}),x.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c&&x.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:c}),x.jsx(zi,{label:"Email",type:"email",placeholder:"email@example.com",value:e,onChange:y=>n(y.target.value),required:!0,autoComplete:"email"}),x.jsx(zi,{label:"Mt khu",type:"password",placeholder:"",value:a,onChange:y=>o(y.target.value),required:!0,autoComplete:"current-password"}),x.jsx(Ee,{type:"submit",className:"w-full",disabled:d,children:d?x.jsx(ar,{size:"sm"}):"ng nhp"})]}),x.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Cha c ti khon?"," ",x.jsx(zv,{to:"/register",className:"text-primary hover:underline font-medium",children:"ng k ngay"})]})]})})]})}function P4(){const s=Ec(),{register:t}=Cc(),[e,n]=E.useState(""),[a,o]=E.useState(""),[c,u]=E.useState(""),[d,f]=E.useState(""),[g,y]=E.useState(""),[b,w]=E.useState(!1),A=async S=>{if(S.preventDefault(),y(""),c!==d){y("Mt khu xc nhn khng khp");return}if(c.length<6){y("Mt khu phi c t nht 6 k t");return}w(!0);try{await t(a,c,e),s("/dashboard")}catch(C){y(C instanceof Error?C.message:"ng k tht bi")}finally{w(!1)}};return x.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-8",children:x.jsxs("div",{className:"w-full max-w-md space-y-8",children:[x.jsxs("div",{className:"text-center",children:[x.jsxs("div",{className:"flex items-center gap-2 justify-center mb-6",children:[x.jsx(Sa,{className:"h-10 w-10 text-primary"}),x.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"HeyTeX"})]}),x.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"To ti khon mi"}),x.jsx("p",{className:"mt-2 text-muted-foreground",children:"Bt u hnh trnh bin tp ti liu chuyn nghip"})]}),x.jsx("div",{className:"glass rounded-2xl p-8 shadow-xl",children:x.jsxs("form",{onSubmit:A,className:"space-y-5",children:[g&&x.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:g}),x.jsx(zi,{label:"H v tn",type:"text",placeholder:"Nguyn Vn A",value:e,onChange:S=>n(S.target.value),required:!0,autoComplete:"name"}),x.jsx(zi,{label:"Email",type:"email",placeholder:"email@example.com",value:a,onChange:S=>o(S.target.value),required:!0,autoComplete:"email"}),x.jsx(zi,{label:"Mt khu",type:"password",placeholder:"",value:c,onChange:S=>u(S.target.value),required:!0,autoComplete:"new-password"}),x.jsx(zi,{label:"Xc nhn mt khu",type:"password",placeholder:"",value:d,onChange:S=>f(S.target.value),required:!0,autoComplete:"new-password"}),x.jsx(Ee,{type:"submit",className:"w-full",disabled:b,children:b?x.jsx(ar,{size:"sm"}):"ng k"})]})}),x.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[" c ti khon?"," ",x.jsx(zv,{to:"/login",className:"text-primary hover:underline font-medium",children:"ng nhp"})]})]})})}function F4({project:s,viewMode:t,onDelete:e,onDownloadZip:n,onDownloadPdf:a,onShowInfo:o}){const c=Ec();return t==="list"?x.jsx("div",{className:"group glass rounded-lg p-4 hover:border-primary/50 transition-all",children:x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:`p-3 rounded-lg cursor-pointer ${s.engine==="TYPST"?"bg-cyan-500/20 text-cyan-500":"bg-orange-500/20 text-orange-500"}`,onClick:()=>c(`/editor/${s.id}`),children:x.jsx(Sa,{className:"h-5 w-5"})}),x.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>c(`/editor/${s.id}`),children:[x.jsx("h3",{className:"font-semibold text-foreground truncate",title:s.name,children:s.name}),x.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(kT,{className:"h-3 w-3"}),ET(s.updatedAt)]}),x.jsx("span",{className:`px-2 py-0.5 rounded-full ${s.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:s.engine})]})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:u=>{u.stopPropagation(),o(s.id)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Thng tin",children:x.jsx(MT,{className:"h-4 w-4"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),n(s)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Ti ZIP",children:x.jsx(Wy,{className:"h-4 w-4"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),a(s)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Ti PDF",children:x.jsx(NT,{className:"h-4 w-4"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),c(`/editor/${s.id}`)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Chia s",children:x.jsx(ww,{className:"h-4 w-4"})}),x.jsx("div",{className:"w-px h-6 bg-border mx-1"}),x.jsx("button",{onClick:u=>{u.stopPropagation(),e(s.id)},className:"p-2 hover:bg-destructive/20 text-destructive rounded-lg transition-colors",title:"Xa",children:x.jsx(Aw,{className:"h-4 w-4"})})]})]})}):x.jsxs("div",{className:"group relative glass rounded-xl p-5 hover:border-primary/50 transition-all",children:[x.jsxs("div",{className:"cursor-pointer",onClick:()=>c(`/editor/${s.id}`),children:[x.jsx("div",{className:"flex items-start justify-between mb-4",children:x.jsx("div",{className:`p-2 rounded-lg ${s.engine==="TYPST"?"bg-cyan-500/20 text-cyan-500":"bg-orange-500/20 text-orange-500"}`,children:x.jsx(Sa,{className:"h-5 w-5"})})}),x.jsx("h3",{className:"font-semibold text-foreground mb-1 truncate",title:s.name,children:s.name}),x.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-3",children:[x.jsxs("span",{className:"flex items-center gap-1",children:[x.jsx(kT,{className:"h-3 w-3"}),ET(s.updatedAt)]}),x.jsx("span",{className:`px-2 py-0.5 rounded-full ${s.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:s.engine})]})]}),x.jsxs("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[x.jsx("button",{onClick:u=>{u.stopPropagation(),o(s.id)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Thng tin",children:x.jsx(MT,{className:"h-3.5 w-3.5"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),n(s)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Ti ZIP",children:x.jsx(Wy,{className:"h-3.5 w-3.5"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),a(s)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Ti PDF",children:x.jsx(NT,{className:"h-3.5 w-3.5"})}),x.jsx("button",{onClick:u=>{u.stopPropagation(),c(`/editor/${s.id}`)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Chia s",children:x.jsx(ww,{className:"h-3.5 w-3.5"})}),x.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),x.jsx("button",{onClick:u=>{u.stopPropagation(),e(s.id)},className:"p-1.5 hover:bg-destructive/20 text-destructive rounded-lg transition-colors glass",title:"Xa",children:x.jsx(Aw,{className:"h-3.5 w-3.5"})})]})]})}function Dn(s,t,{checkForDefaultPrevented:e=!0}={}){return function(a){if(s==null||s(a),e===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function PT(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function KR(...s){return t=>{let e=!1;const n=s.map(a=>{const o=PT(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():PT(s[a],null)}}}}function dr(...s){return E.useCallback(KR(...s),s)}function I4(s,t){const e=E.createContext(t),n=o=>{const{children:c,...u}=o,d=E.useMemo(()=>u,Object.values(u));return x.jsx(e.Provider,{value:d,children:c})};n.displayName=s+"Provider";function a(o){const c=E.useContext(e);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${s}\``)}return[n,a]}function Uv(s,t=[]){let e=[];function n(o,c){const u=E.createContext(c),d=e.length;e=[...e,c];const f=y=>{var T;const{scope:b,children:w,...A}=y,S=((T=b==null?void 0:b[s])==null?void 0:T[d])||u,C=E.useMemo(()=>A,Object.values(A));return x.jsx(S.Provider,{value:C,children:w})};f.displayName=o+"Provider";function g(y,b){var S;const w=((S=b==null?void 0:b[s])==null?void 0:S[d])||u,A=E.useContext(w);if(A)return A;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[f,g]}const a=()=>{const o=e.map(c=>E.createContext(c));return function(u){const d=(u==null?void 0:u[s])||o;return E.useMemo(()=>({[`__scope${s}`]:{...u,[s]:d}}),[u,d])}};return a.scopeName=s,[n,z4(a,...t)]}function z4(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const n=s.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const c=n.reduce((u,{useScope:d,scopeName:f})=>{const y=d(o)[`__scope${f}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return e.scopeName=t.scopeName,e}var Ef=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},U4=lR[" useId ".trim().toString()]||(()=>{}),B4=0;function vf(s){const[t,e]=E.useState(U4());return Ef(()=>{e(n=>n??String(B4++))},[s]),t?`radix-${t}`:""}var H4=lR[" useInsertionEffect ".trim().toString()]||Ef;function y_({prop:s,defaultProp:t,onChange:e=()=>{},caller:n}){const[a,o,c]=V4({defaultProp:t,onChange:e}),u=s!==void 0,d=u?s:a;{const g=E.useRef(s!==void 0);E.useEffect(()=>{const y=g.current;y!==u&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,n])}const f=E.useCallback(g=>{var y;if(u){const b=q4(g)?g(s):g;b!==s&&((y=c.current)==null||y.call(c,b))}else o(g)},[u,s,o,c]);return[d,f]}function V4({defaultProp:s,onChange:t}){const[e,n]=E.useState(s),a=E.useRef(e),o=E.useRef(t);return H4(()=>{o.current=t},[t]),E.useEffect(()=>{var c;a.current!==e&&((c=o.current)==null||c.call(o,e),a.current=e)},[e,a]),[e,n,o]}function q4(s){return typeof s=="function"}function Zy(s){const t=G4(s),e=E.forwardRef((n,a)=>{const{children:o,...c}=n,u=E.Children.toArray(o),d=u.find(X4);if(d){const f=d.props.children,g=u.map(y=>y===d?E.Children.count(f)>1?E.Children.only(null):E.isValidElement(f)?f.props.children:null:y);return x.jsx(t,{...c,ref:a,children:E.isValidElement(f)?E.cloneElement(f,void 0,g):null})}return x.jsx(t,{...c,ref:a,children:o})});return e.displayName=`${s}.Slot`,e}function G4(s){const t=E.forwardRef((e,n)=>{const{children:a,...o}=e;if(E.isValidElement(a)){const c=K4(a),u=Y4(o,a.props);return a.type!==E.Fragment&&(u.ref=n?KR(n,c):c),E.cloneElement(a,u)}return E.Children.count(a)>1?E.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var $4=Symbol("radix.slottable");function X4(s){return E.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===$4}function Y4(s,t){const e={...t};for(const n in t){const a=s[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?e[n]=(...u)=>{const d=o(...u);return a(...u),d}:a&&(e[n]=a):n==="style"?e[n]={...a,...o}:n==="className"&&(e[n]=[a,o].filter(Boolean).join(" "))}return{...s,...e}}function K4(s){var n,a;let t=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(a=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:a.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var W4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ti=W4.reduce((s,t)=>{const e=Zy(`Primitive.${t}`),n=E.forwardRef((a,o)=>{const{asChild:c,...u}=a,d=c?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(d,{...u,ref:o})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{});function Q4(s,t){s&&SR.flushSync(()=>s.dispatchEvent(t))}function jh(s){const t=E.useRef(s);return E.useEffect(()=>{t.current=s}),E.useMemo(()=>(...e)=>{var n;return(n=t.current)==null?void 0:n.call(t,...e)},[])}function Z4(s,t=globalThis==null?void 0:globalThis.document){const e=jh(s);E.useEffect(()=>{const n=a=>{a.key==="Escape"&&e(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[e,t])}var J4="DismissableLayer",_w="dismissableLayer.update",tI="dismissableLayer.pointerDownOutside",eI="dismissableLayer.focusOutside",FT,WR=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),QR=E.forwardRef((s,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:c,onDismiss:u,...d}=s,f=E.useContext(WR),[g,y]=E.useState(null),b=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=E.useState({}),A=dr(t,O=>y(O)),S=Array.from(f.layers),[C]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),T=S.indexOf(C),D=g?S.indexOf(g):-1,L=f.layersWithOutsidePointerEventsDisabled.size>0,P=D>=T,z=sI(O=>{const H=O.target,Z=[...f.branches].some($=>$.contains(H));!P||Z||(a==null||a(O),c==null||c(O),O.defaultPrevented||u==null||u())},b),U=rI(O=>{const H=O.target;[...f.branches].some($=>$.contains(H))||(o==null||o(O),c==null||c(O),O.defaultPrevented||u==null||u())},b);return Z4(O=>{D===f.layers.size-1&&(n==null||n(O),!O.defaultPrevented&&u&&(O.preventDefault(),u()))},b),E.useEffect(()=>{if(g)return e&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(FT=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),IT(),()=>{e&&f.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=FT)}},[g,b,e,f]),E.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),IT())},[g,f]),E.useEffect(()=>{const O=()=>w({});return document.addEventListener(_w,O),()=>document.removeEventListener(_w,O)},[]),x.jsx(ti.div,{...d,ref:A,style:{pointerEvents:L?P?"auto":"none":void 0,...s.style},onFocusCapture:Dn(s.onFocusCapture,U.onFocusCapture),onBlurCapture:Dn(s.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Dn(s.onPointerDownCapture,z.onPointerDownCapture)})});QR.displayName=J4;var nI="DismissableLayerBranch",iI=E.forwardRef((s,t)=>{const e=E.useContext(WR),n=E.useRef(null),a=dr(t,n);return E.useEffect(()=>{const o=n.current;if(o)return e.branches.add(o),()=>{e.branches.delete(o)}},[e.branches]),x.jsx(ti.div,{...s,ref:a})});iI.displayName=nI;function sI(s,t=globalThis==null?void 0:globalThis.document){const e=jh(s),n=E.useRef(!1),a=E.useRef(()=>{});return E.useEffect(()=>{const o=u=>{if(u.target&&!n.current){let d=function(){ZR(tI,e,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,e]),{onPointerDownCapture:()=>n.current=!0}}function rI(s,t=globalThis==null?void 0:globalThis.document){const e=jh(s),n=E.useRef(!1);return E.useEffect(()=>{const a=o=>{o.target&&!n.current&&ZR(eI,e,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function IT(){const s=new CustomEvent(_w);document.dispatchEvent(s)}function ZR(s,t,e,{discrete:n}){const a=e.originalEvent.target,o=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:e});t&&a.addEventListener(s,t,{once:!0}),n?Q4(a,o):a.dispatchEvent(o)}var Bx="focusScope.autoFocusOnMount",Hx="focusScope.autoFocusOnUnmount",zT={bubbles:!1,cancelable:!0},aI="FocusScope",JR=E.forwardRef((s,t)=>{const{loop:e=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...c}=s,[u,d]=E.useState(null),f=jh(a),g=jh(o),y=E.useRef(null),b=dr(t,S=>d(S)),w=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(n){let S=function(L){if(w.paused||!u)return;const P=L.target;u.contains(P)?y.current=P:no(y.current,{select:!0})},C=function(L){if(w.paused||!u)return;const P=L.relatedTarget;P!==null&&(u.contains(P)||no(y.current,{select:!0}))},T=function(L){if(document.activeElement===document.body)for(const z of L)z.removedNodes.length>0&&no(u)};document.addEventListener("focusin",S),document.addEventListener("focusout",C);const D=new MutationObserver(T);return u&&D.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",C),D.disconnect()}}},[n,u,w.paused]),E.useEffect(()=>{if(u){BT.add(w);const S=document.activeElement;if(!u.contains(S)){const T=new CustomEvent(Bx,zT);u.addEventListener(Bx,f),u.dispatchEvent(T),T.defaultPrevented||(oI(dI(t2(u)),{select:!0}),document.activeElement===S&&no(u))}return()=>{u.removeEventListener(Bx,f),setTimeout(()=>{const T=new CustomEvent(Hx,zT);u.addEventListener(Hx,g),u.dispatchEvent(T),T.defaultPrevented||no(S??document.body,{select:!0}),u.removeEventListener(Hx,g),BT.remove(w)},0)}}},[u,f,g,w]);const A=E.useCallback(S=>{if(!e&&!n||w.paused)return;const C=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,T=document.activeElement;if(C&&T){const D=S.currentTarget,[L,P]=lI(D);L&&P?!S.shiftKey&&T===P?(S.preventDefault(),e&&no(L,{select:!0})):S.shiftKey&&T===L&&(S.preventDefault(),e&&no(P,{select:!0})):T===D&&S.preventDefault()}},[e,n,w.paused]);return x.jsx(ti.div,{tabIndex:-1,...c,ref:b,onKeyDown:A})});JR.displayName=aI;function oI(s,{select:t=!1}={}){const e=document.activeElement;for(const n of s)if(no(n,{select:t}),document.activeElement!==e)return}function lI(s){const t=t2(s),e=UT(t,s),n=UT(t.reverse(),s);return[e,n]}function t2(s){const t=[],e=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function UT(s,t){for(const e of s)if(!cI(e,{upTo:t}))return e}function cI(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function uI(s){return s instanceof HTMLInputElement&&"select"in s}function no(s,{select:t=!1}={}){if(s&&s.focus){const e=document.activeElement;s.focus({preventScroll:!0}),s!==e&&uI(s)&&t&&s.select()}}var BT=hI();function hI(){let s=[];return{add(t){const e=s[0];t!==e&&(e==null||e.pause()),s=HT(s,t),s.unshift(t)},remove(t){var e;s=HT(s,t),(e=s[0])==null||e.resume()}}}function HT(s,t){const e=[...s],n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}function dI(s){return s.filter(t=>t.tagName!=="A")}var fI="Portal",e2=E.forwardRef((s,t)=>{var u;const{container:e,...n}=s,[a,o]=E.useState(!1);Ef(()=>o(!0),[]);const c=e||a&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?wF.createPortal(x.jsx(ti.div,{...n,ref:t}),c):null});e2.displayName=fI;function pI(s,t){return E.useReducer((e,n)=>t[e][n]??e,s)}var mg=s=>{const{present:t,children:e}=s,n=gI(t),a=typeof e=="function"?e({present:n.isPresent}):E.Children.only(e),o=dr(n.ref,mI(a));return typeof e=="function"||n.isPresent?E.cloneElement(a,{ref:o}):null};mg.displayName="Presence";function gI(s){const[t,e]=E.useState(),n=E.useRef(null),a=E.useRef(s),o=E.useRef("none"),c=s?"mounted":"unmounted",[u,d]=pI(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=$m(n.current);o.current=u==="mounted"?f:"none"},[u]),Ef(()=>{const f=n.current,g=a.current;if(g!==s){const b=o.current,w=$m(f);s?d("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(g&&b!==w?"ANIMATION_OUT":"UNMOUNT"),a.current=s}},[s,d]),Ef(()=>{if(t){let f;const g=t.ownerDocument.defaultView??window,y=w=>{const S=$m(n.current).includes(CSS.escape(w.animationName));if(w.target===t&&S&&(d("ANIMATION_END"),!a.current)){const C=t.style.animationFillMode;t.style.animationFillMode="forwards",f=g.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=C)})}},b=w=>{w.target===t&&(o.current=$m(n.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",y),t.addEventListener("animationend",y),()=>{g.clearTimeout(f),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",y),t.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(f=>{n.current=f?getComputedStyle(f):null,e(f)},[])}}function $m(s){return(s==null?void 0:s.animationName)||"none"}function mI(s){var n,a;let t=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(a=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:a.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var Vx=0;function yI(){E.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??VT()),document.body.insertAdjacentElement("beforeend",s[1]??VT()),Vx++,()=>{Vx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Vx--}},[])}function VT(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var rr=function(){return rr=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},rr.apply(this,arguments)};function n2(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(e[n[a]]=s[n[a]]);return e}function vI(s,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return s.concat(o||Array.prototype.slice.call(t))}var hy="right-scroll-bar-position",dy="width-before-scroll-bar",bI="with-scroll-bars-hidden",xI="--removed-body-scroll-bar-size";function qx(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function wI(s,t){var e=E.useState(function(){return{value:s,callback:t,facade:{get current(){return e.value},set current(n){var a=e.value;a!==n&&(e.value=n,e.callback(n,a))}}}})[0];return e.callback=t,e.facade}var AI=typeof window<"u"?E.useLayoutEffect:E.useEffect,qT=new WeakMap;function _I(s,t){var e=wI(null,function(n){return s.forEach(function(a){return qx(a,n)})});return AI(function(){var n=qT.get(e);if(n){var a=new Set(n),o=new Set(s),c=e.current;a.forEach(function(u){o.has(u)||qx(u,null)}),o.forEach(function(u){a.has(u)||qx(u,c)})}qT.set(e,s)},[s]),e}function SI(s){return s}function EI(s,t){t===void 0&&(t=SI);var e=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:s},useMedium:function(o){var c=t(o,n);return e.push(c),function(){e=e.filter(function(u){return u!==c})}},assignSyncMedium:function(o){for(n=!0;e.length;){var c=e;e=[],c.forEach(o)}e={push:function(u){return o(u)},filter:function(){return e}}},assignMedium:function(o){n=!0;var c=[];if(e.length){var u=e;e=[],u.forEach(o),c=e}var d=function(){var g=c;c=[],g.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),e={push:function(g){c.push(g),f()},filter:function(g){return c=c.filter(g),e}}}};return a}function CI(s){s===void 0&&(s={});var t=EI(null);return t.options=rr({async:!0,ssr:!1},s),t}var i2=function(s){var t=s.sideCar,e=n2(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return E.createElement(n,rr({},e))};i2.isSideCarExport=!0;function TI(s,t){return s.useMedium(t),i2}var s2=CI(),Gx=function(){},Bv=E.forwardRef(function(s,t){var e=E.useRef(null),n=E.useState({onScrollCapture:Gx,onWheelCapture:Gx,onTouchMoveCapture:Gx}),a=n[0],o=n[1],c=s.forwardProps,u=s.children,d=s.className,f=s.removeScrollBar,g=s.enabled,y=s.shards,b=s.sideCar,w=s.noRelative,A=s.noIsolation,S=s.inert,C=s.allowPinchZoom,T=s.as,D=T===void 0?"div":T,L=s.gapMode,P=n2(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),z=b,U=_I([e,t]),O=rr(rr({},P),a);return E.createElement(E.Fragment,null,g&&E.createElement(z,{sideCar:s2,removeScrollBar:f,shards:y,noRelative:w,noIsolation:A,inert:S,setCallbacks:o,allowPinchZoom:!!C,lockRef:e,gapMode:L}),c?E.cloneElement(E.Children.only(u),rr(rr({},O),{ref:U})):E.createElement(D,rr({},O,{className:d,ref:U}),u))});Bv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bv.classNames={fullWidth:dy,zeroRight:hy};var kI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RI(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=kI();return t&&s.setAttribute("nonce",t),s}function NI(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function MI(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var DI=function(){var s=0,t=null;return{add:function(e){s==0&&(t=RI())&&(NI(t,e),MI(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},LI=function(){var s=DI();return function(t,e){E.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&e])}},r2=function(){var s=LI(),t=function(e){var n=e.styles,a=e.dynamic;return s(n,a),null};return t},OI={left:0,top:0,right:0,gap:0},$x=function(s){return parseInt(s||"",10)||0},jI=function(s){var t=window.getComputedStyle(document.body),e=t[s==="padding"?"paddingLeft":"marginLeft"],n=t[s==="padding"?"paddingTop":"marginTop"],a=t[s==="padding"?"paddingRight":"marginRight"];return[$x(e),$x(n),$x(a)]},PI=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return OI;var t=jI(s),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}},FI=r2(),Nu="data-scroll-locked",II=function(s,t,e,n){var a=s.left,o=s.top,c=s.right,u=s.gap;return e===void 0&&(e="margin"),`
  .`.concat(bI,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(Nu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hy,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(dy,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(hy," .").concat(hy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(dy," .").concat(dy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Nu,`] {
    `).concat(xI,": ").concat(u,`px;
  }
`)},GT=function(){var s=parseInt(document.body.getAttribute(Nu)||"0",10);return isFinite(s)?s:0},zI=function(){E.useEffect(function(){return document.body.setAttribute(Nu,(GT()+1).toString()),function(){var s=GT()-1;s<=0?document.body.removeAttribute(Nu):document.body.setAttribute(Nu,s.toString())}},[])},UI=function(s){var t=s.noRelative,e=s.noImportant,n=s.gapMode,a=n===void 0?"margin":n;zI();var o=E.useMemo(function(){return PI(a)},[a]);return E.createElement(FI,{styles:II(o,!t,a,e?"":"!important")})},Sw=!1;if(typeof window<"u")try{var Xm=Object.defineProperty({},"passive",{get:function(){return Sw=!0,!0}});window.addEventListener("test",Xm,Xm),window.removeEventListener("test",Xm,Xm)}catch{Sw=!1}var vu=Sw?{passive:!1}:!1,BI=function(s){return s.tagName==="TEXTAREA"},a2=function(s,t){if(!(s instanceof Element))return!1;var e=window.getComputedStyle(s);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!BI(s)&&e[t]==="visible")},HI=function(s){return a2(s,"overflowY")},VI=function(s){return a2(s,"overflowX")},$T=function(s,t){var e=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=o2(s,n);if(a){var o=l2(s,n),c=o[1],u=o[2];if(c>u)return!0}n=n.parentNode}while(n&&n!==e.body);return!1},qI=function(s){var t=s.scrollTop,e=s.scrollHeight,n=s.clientHeight;return[t,e,n]},GI=function(s){var t=s.scrollLeft,e=s.scrollWidth,n=s.clientWidth;return[t,e,n]},o2=function(s,t){return s==="v"?HI(t):VI(t)},l2=function(s,t){return s==="v"?qI(t):GI(t)},$I=function(s,t){return s==="h"&&t==="rtl"?-1:1},XI=function(s,t,e,n,a){var o=$I(s,window.getComputedStyle(t).direction),c=o*n,u=e.target,d=t.contains(u),f=!1,g=c>0,y=0,b=0;do{if(!u)break;var w=l2(s,u),A=w[0],S=w[1],C=w[2],T=S-C-o*A;(A||T)&&o2(s,u)&&(y+=T,b+=A);var D=u.parentNode;u=D&&D.nodeType===Node.DOCUMENT_FRAGMENT_NODE?D.host:D}while(!d&&u!==document.body||d&&(t.contains(u)||t===u));return(g&&Math.abs(y)<1||!g&&Math.abs(b)<1)&&(f=!0),f},Ym=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},XT=function(s){return[s.deltaX,s.deltaY]},YT=function(s){return s&&"current"in s?s.current:s},YI=function(s,t){return s[0]===t[0]&&s[1]===t[1]},KI=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},WI=0,bu=[];function QI(s){var t=E.useRef([]),e=E.useRef([0,0]),n=E.useRef(),a=E.useState(WI++)[0],o=E.useState(r2)[0],c=E.useRef(s);E.useEffect(function(){c.current=s},[s]),E.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(a));var S=vI([s.lockRef.current],(s.shards||[]).map(YT),!0).filter(Boolean);return S.forEach(function(C){return C.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),S.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(a))})}}},[s.inert,s.lockRef.current,s.shards]);var u=E.useCallback(function(S,C){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!c.current.allowPinchZoom;var T=Ym(S),D=e.current,L="deltaX"in S?S.deltaX:D[0]-T[0],P="deltaY"in S?S.deltaY:D[1]-T[1],z,U=S.target,O=Math.abs(L)>Math.abs(P)?"h":"v";if("touches"in S&&O==="h"&&U.type==="range")return!1;var H=window.getSelection(),Z=H&&H.anchorNode,$=Z?Z===U||Z.contains(U):!1;if($)return!1;var W=$T(O,U);if(!W)return!0;if(W?z=O:(z=O==="v"?"h":"v",W=$T(O,U)),!W)return!1;if(!n.current&&"changedTouches"in S&&(L||P)&&(n.current=z),!z)return!0;var it=n.current||z;return XI(it,C,S,it==="h"?L:P)},[]),d=E.useCallback(function(S){var C=S;if(!(!bu.length||bu[bu.length-1]!==o)){var T="deltaY"in C?XT(C):Ym(C),D=t.current.filter(function(z){return z.name===C.type&&(z.target===C.target||C.target===z.shadowParent)&&YI(z.delta,T)})[0];if(D&&D.should){C.cancelable&&C.preventDefault();return}if(!D){var L=(c.current.shards||[]).map(YT).filter(Boolean).filter(function(z){return z.contains(C.target)}),P=L.length>0?u(C,L[0]):!c.current.noIsolation;P&&C.cancelable&&C.preventDefault()}}},[]),f=E.useCallback(function(S,C,T,D){var L={name:S,delta:C,target:T,should:D,shadowParent:ZI(T)};t.current.push(L),setTimeout(function(){t.current=t.current.filter(function(P){return P!==L})},1)},[]),g=E.useCallback(function(S){e.current=Ym(S),n.current=void 0},[]),y=E.useCallback(function(S){f(S.type,XT(S),S.target,u(S,s.lockRef.current))},[]),b=E.useCallback(function(S){f(S.type,Ym(S),S.target,u(S,s.lockRef.current))},[]);E.useEffect(function(){return bu.push(o),s.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:b}),document.addEventListener("wheel",d,vu),document.addEventListener("touchmove",d,vu),document.addEventListener("touchstart",g,vu),function(){bu=bu.filter(function(S){return S!==o}),document.removeEventListener("wheel",d,vu),document.removeEventListener("touchmove",d,vu),document.removeEventListener("touchstart",g,vu)}},[]);var w=s.removeScrollBar,A=s.inert;return E.createElement(E.Fragment,null,A?E.createElement(o,{styles:KI(a)}):null,w?E.createElement(UI,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function ZI(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const JI=TI(s2,QI);var c2=E.forwardRef(function(s,t){return E.createElement(Bv,rr({},s,{ref:t,sideCar:JI}))});c2.classNames=Bv.classNames;var tz=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},xu=new WeakMap,Km=new WeakMap,Wm={},Xx=0,u2=function(s){return s&&(s.host||u2(s.parentNode))},ez=function(s,t){return t.map(function(e){if(s.contains(e))return e;var n=u2(e);return n&&s.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",s,". Doing nothing"),null)}).filter(function(e){return!!e})},nz=function(s,t,e,n){var a=ez(t,Array.isArray(s)?s:[s]);Wm[e]||(Wm[e]=new WeakMap);var o=Wm[e],c=[],u=new Set,d=new Set(a),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};a.forEach(f);var g=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(b){if(u.has(b))g(b);else try{var w=b.getAttribute(n),A=w!==null&&w!=="false",S=(xu.get(b)||0)+1,C=(o.get(b)||0)+1;xu.set(b,S),o.set(b,C),c.push(b),S===1&&A&&Km.set(b,!0),C===1&&b.setAttribute(e,"true"),A||b.setAttribute(n,"true")}catch(T){console.error("aria-hidden: cannot operate on ",b,T)}})};return g(t),u.clear(),Xx++,function(){c.forEach(function(y){var b=xu.get(y)-1,w=o.get(y)-1;xu.set(y,b),o.set(y,w),b||(Km.has(y)||y.removeAttribute(n),Km.delete(y)),w||y.removeAttribute(e)}),Xx--,Xx||(xu=new WeakMap,xu=new WeakMap,Km=new WeakMap,Wm={})}},iz=function(s,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),a=tz(s);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),nz(n,a,e,"aria-hidden")):function(){return null}},Hv="Dialog",[h2]=Uv(Hv),[sz,Os]=h2(Hv),d2=s=>{const{__scopeDialog:t,children:e,open:n,defaultOpen:a,onOpenChange:o,modal:c=!0}=s,u=E.useRef(null),d=E.useRef(null),[f,g]=y_({prop:n,defaultProp:a??!1,onChange:o,caller:Hv});return x.jsx(sz,{scope:t,triggerRef:u,contentRef:d,contentId:vf(),titleId:vf(),descriptionId:vf(),open:f,onOpenChange:g,onOpenToggle:E.useCallback(()=>g(y=>!y),[g]),modal:c,children:e})};d2.displayName=Hv;var f2="DialogTrigger",rz=E.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Os(f2,e),o=dr(t,a.triggerRef);return x.jsx(ti.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":x_(a.open),...n,ref:o,onClick:Dn(s.onClick,a.onOpenToggle)})});rz.displayName=f2;var v_="DialogPortal",[az,p2]=h2(v_,{forceMount:void 0}),g2=s=>{const{__scopeDialog:t,forceMount:e,children:n,container:a}=s,o=Os(v_,t);return x.jsx(az,{scope:t,forceMount:e,children:E.Children.map(n,c=>x.jsx(mg,{present:e||o.open,children:x.jsx(e2,{asChild:!0,container:a,children:c})}))})};g2.displayName=v_;var Jy="DialogOverlay",m2=E.forwardRef((s,t)=>{const e=p2(Jy,s.__scopeDialog),{forceMount:n=e.forceMount,...a}=s,o=Os(Jy,s.__scopeDialog);return o.modal?x.jsx(mg,{present:n||o.open,children:x.jsx(lz,{...a,ref:t})}):null});m2.displayName=Jy;var oz=Zy("DialogOverlay.RemoveScroll"),lz=E.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Os(Jy,e);return x.jsx(c2,{as:oz,allowPinchZoom:!0,shards:[a.contentRef],children:x.jsx(ti.div,{"data-state":x_(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),pc="DialogContent",y2=E.forwardRef((s,t)=>{const e=p2(pc,s.__scopeDialog),{forceMount:n=e.forceMount,...a}=s,o=Os(pc,s.__scopeDialog);return x.jsx(mg,{present:n||o.open,children:o.modal?x.jsx(cz,{...a,ref:t}):x.jsx(uz,{...a,ref:t})})});y2.displayName=pc;var cz=E.forwardRef((s,t)=>{const e=Os(pc,s.__scopeDialog),n=E.useRef(null),a=dr(t,e.contentRef,n);return E.useEffect(()=>{const o=n.current;if(o)return iz(o)},[]),x.jsx(v2,{...s,ref:a,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Dn(s.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=e.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Dn(s.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&o.preventDefault()}),onFocusOutside:Dn(s.onFocusOutside,o=>o.preventDefault())})}),uz=E.forwardRef((s,t)=>{const e=Os(pc,s.__scopeDialog),n=E.useRef(!1),a=E.useRef(!1);return x.jsx(v2,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,u;(c=s.onCloseAutoFocus)==null||c.call(s,o),o.defaultPrevented||(n.current||(u=e.triggerRef.current)==null||u.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var d,f;(d=s.onInteractOutside)==null||d.call(s,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((f=e.triggerRef.current)==null?void 0:f.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),v2=E.forwardRef((s,t)=>{const{__scopeDialog:e,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...c}=s,u=Os(pc,e),d=E.useRef(null),f=dr(t,d);return yI(),x.jsxs(x.Fragment,{children:[x.jsx(JR,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:x.jsx(QR,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":x_(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),x.jsxs(x.Fragment,{children:[x.jsx(hz,{titleId:u.titleId}),x.jsx(fz,{contentRef:d,descriptionId:u.descriptionId})]})]})}),b_="DialogTitle",b2=E.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Os(b_,e);return x.jsx(ti.h2,{id:a.titleId,...n,ref:t})});b2.displayName=b_;var x2="DialogDescription",w2=E.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Os(x2,e);return x.jsx(ti.p,{id:a.descriptionId,...n,ref:t})});w2.displayName=x2;var A2="DialogClose",_2=E.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Os(A2,e);return x.jsx(ti.button,{type:"button",...n,ref:t,onClick:Dn(s.onClick,()=>a.onOpenChange(!1))})});_2.displayName=A2;function x_(s){return s?"open":"closed"}var S2="DialogTitleWarning",[mG,E2]=I4(S2,{contentName:pc,titleName:b_,docsSlug:"dialog"}),hz=({titleId:s})=>{const t=E2(S2),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return E.useEffect(()=>{s&&(document.getElementById(s)||console.error(e))},[e,s]),null},dz="DialogDescriptionWarning",fz=({contentRef:s,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${E2(dz).contentName}}.`;return E.useEffect(()=>{var o;const a=(o=s.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,s,t]),null},pz=d2,gz=g2,C2=m2,T2=y2,k2=b2,R2=w2,mz=_2;const w_=pz,yz=gz,N2=E.forwardRef(({className:s,...t},e)=>x.jsx(C2,{ref:e,className:`fixed inset-0 z-50 bg-black/50 backdrop-blur-sm ${s||""}`,...t}));N2.displayName=C2.displayName;const Vv=E.forwardRef(({className:s,children:t,...e},n)=>x.jsxs(yz,{children:[x.jsx(N2,{}),x.jsxs(T2,{ref:n,className:`fixed left-[50%] top-[50%] z-50 w-full max-w-lg translate-x-[-50%] translate-y-[-50%] glass rounded-lg border p-6 shadow-lg ${s||""}`,...e,children:[t,x.jsxs(mz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[x.jsx(Oh,{className:"h-4 w-4"}),x.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Vv.displayName=T2.displayName;const qv=({className:s,...t})=>x.jsx("div",{className:`flex flex-col space-y-1.5 text-center sm:text-left ${s||""}`,...t});qv.displayName="DialogHeader";const Gv=E.forwardRef(({className:s,...t},e)=>x.jsx(k2,{ref:e,className:`text-lg font-semibold leading-none tracking-tight ${s||""}`,...t}));Gv.displayName=k2.displayName;const M2=E.forwardRef(({className:s,...t},e)=>x.jsx(R2,{ref:e,className:`text-sm text-muted-foreground ${s||""}`,...t}));M2.displayName=R2.displayName;function vz({open:s,onOpenChange:t,stats:e}){if(!e)return null;const n=a=>new Date(a).toLocaleString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return x.jsx(w_,{open:s,onOpenChange:t,children:x.jsxs(Vv,{className:"sm:max-w-md",children:[x.jsx(qv,{children:x.jsxs(Gv,{className:"flex items-center gap-2",children:[x.jsx(Sa,{className:"h-5 w-5"}),"Thng tin d n"]})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-lg",children:e.name}),x.jsx("p",{className:"text-sm text-muted-foreground",children:x.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs ${e.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:e.engine})})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4 py-3 border-y",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(X3,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Files"}),x.jsx("p",{className:"font-medium",children:e.fileCount})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(VR,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Folders"}),x.jsx("p",{className:"font-medium",children:e.folderCount})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Qy,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Collaborators"}),x.jsx("p",{className:"font-medium",children:e.collaboratorCount})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Q3,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Dung lng"}),x.jsx("p",{className:"font-medium",children:e.sizeFormatted})]})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx(Qy,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Ch d n"}),x.jsx("p",{className:"text-sm font-medium",children:e.owner.name}),x.jsx("p",{className:"text-xs text-muted-foreground",children:e.owner.email})]})]}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx(xw,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Ngy to"}),x.jsx("p",{className:"text-sm",children:n(e.createdAt)})]})]}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx(xw,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"Truy cp gn nht"}),x.jsx("p",{className:"text-sm",children:n(e.updatedAt)})]})]})]})]})]})})}function bz(s){const t=s+"CollectionProvider",[e,n]=Uv(t),[a,o]=e(t,{collectionRef:{current:null},itemMap:new Map}),c=S=>{const{scope:C,children:T}=S,D=mn.useRef(null),L=mn.useRef(new Map).current;return x.jsx(a,{scope:C,itemMap:L,collectionRef:D,children:T})};c.displayName=t;const u=s+"CollectionSlot",d=Zy(u),f=mn.forwardRef((S,C)=>{const{scope:T,children:D}=S,L=o(u,T),P=dr(C,L.collectionRef);return x.jsx(d,{ref:P,children:D})});f.displayName=u;const g=s+"CollectionItemSlot",y="data-radix-collection-item",b=Zy(g),w=mn.forwardRef((S,C)=>{const{scope:T,children:D,...L}=S,P=mn.useRef(null),z=dr(C,P),U=o(g,T);return mn.useEffect(()=>(U.itemMap.set(P,{ref:P,...L}),()=>void U.itemMap.delete(P))),x.jsx(b,{[y]:"",ref:z,children:D})});w.displayName=g;function A(S){const C=o(s+"CollectionConsumer",S);return mn.useCallback(()=>{const D=C.collectionRef.current;if(!D)return[];const L=Array.from(D.querySelectorAll(`[${y}]`));return Array.from(C.itemMap.values()).sort((U,O)=>L.indexOf(U.ref.current)-L.indexOf(O.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:c,Slot:f,ItemSlot:w},A,n]}var xz=E.createContext(void 0);function D2(s){const t=E.useContext(xz);return s||t||"ltr"}var Yx="rovingFocusGroup.onEntryFocus",wz={bubbles:!1,cancelable:!0},yg="RovingFocusGroup",[Ew,L2,Az]=bz(yg),[_z,O2]=Uv(yg,[Az]),[Sz,Ez]=_z(yg),j2=E.forwardRef((s,t)=>x.jsx(Ew.Provider,{scope:s.__scopeRovingFocusGroup,children:x.jsx(Ew.Slot,{scope:s.__scopeRovingFocusGroup,children:x.jsx(Cz,{...s,ref:t})})}));j2.displayName=yg;var Cz=E.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:e,orientation:n,loop:a=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,...y}=s,b=E.useRef(null),w=dr(t,b),A=D2(o),[S,C]=y_({prop:c,defaultProp:u??null,onChange:d,caller:yg}),[T,D]=E.useState(!1),L=jh(f),P=L2(e),z=E.useRef(!1),[U,O]=E.useState(0);return E.useEffect(()=>{const H=b.current;if(H)return H.addEventListener(Yx,L),()=>H.removeEventListener(Yx,L)},[L]),x.jsx(Sz,{scope:e,orientation:n,dir:A,loop:a,currentTabStopId:S,onItemFocus:E.useCallback(H=>C(H),[C]),onItemShiftTab:E.useCallback(()=>D(!0),[]),onFocusableItemAdd:E.useCallback(()=>O(H=>H+1),[]),onFocusableItemRemove:E.useCallback(()=>O(H=>H-1),[]),children:x.jsx(ti.div,{tabIndex:T||U===0?-1:0,"data-orientation":n,...y,ref:w,style:{outline:"none",...s.style},onMouseDown:Dn(s.onMouseDown,()=>{z.current=!0}),onFocus:Dn(s.onFocus,H=>{const Z=!z.current;if(H.target===H.currentTarget&&Z&&!T){const $=new CustomEvent(Yx,wz);if(H.currentTarget.dispatchEvent($),!$.defaultPrevented){const W=P().filter(I=>I.focusable),it=W.find(I=>I.active),ct=W.find(I=>I.id===S),nt=[it,ct,...W].filter(Boolean).map(I=>I.ref.current);I2(nt,g)}}z.current=!1}),onBlur:Dn(s.onBlur,()=>D(!1))})})}),P2="RovingFocusGroupItem",F2=E.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:e,focusable:n=!0,active:a=!1,tabStopId:o,children:c,...u}=s,d=vf(),f=o||d,g=Ez(P2,e),y=g.currentTabStopId===f,b=L2(e),{onFocusableItemAdd:w,onFocusableItemRemove:A,currentTabStopId:S}=g;return E.useEffect(()=>{if(n)return w(),()=>A()},[n,w,A]),x.jsx(Ew.ItemSlot,{scope:e,id:f,focusable:n,active:a,children:x.jsx(ti.span,{tabIndex:y?0:-1,"data-orientation":g.orientation,...u,ref:t,onMouseDown:Dn(s.onMouseDown,C=>{n?g.onItemFocus(f):C.preventDefault()}),onFocus:Dn(s.onFocus,()=>g.onItemFocus(f)),onKeyDown:Dn(s.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){g.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const T=Rz(C,g.orientation,g.dir);if(T!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let L=b().filter(P=>P.focusable).map(P=>P.ref.current);if(T==="last")L.reverse();else if(T==="prev"||T==="next"){T==="prev"&&L.reverse();const P=L.indexOf(C.currentTarget);L=g.loop?Nz(L,P+1):L.slice(P+1)}setTimeout(()=>I2(L))}}),children:typeof c=="function"?c({isCurrentTabStop:y,hasTabStop:S!=null}):c})})});F2.displayName=P2;var Tz={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kz(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function Rz(s,t,e){const n=kz(s.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Tz[n]}function I2(s,t=!1){const e=document.activeElement;for(const n of s)if(n===e||(n.focus({preventScroll:t}),document.activeElement!==e))return}function Nz(s,t){return s.map((e,n)=>s[(t+n)%s.length])}var Mz=j2,Dz=F2,$v="Tabs",[Lz]=Uv($v,[O2]),z2=O2(),[Oz,A_]=Lz($v),U2=E.forwardRef((s,t)=>{const{__scopeTabs:e,value:n,onValueChange:a,defaultValue:o,orientation:c="horizontal",dir:u,activationMode:d="automatic",...f}=s,g=D2(u),[y,b]=y_({prop:n,onChange:a,defaultProp:o??"",caller:$v});return x.jsx(Oz,{scope:e,baseId:vf(),value:y,onValueChange:b,orientation:c,dir:g,activationMode:d,children:x.jsx(ti.div,{dir:g,"data-orientation":c,...f,ref:t})})});U2.displayName=$v;var B2="TabsList",H2=E.forwardRef((s,t)=>{const{__scopeTabs:e,loop:n=!0,...a}=s,o=A_(B2,e),c=z2(e);return x.jsx(Mz,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:n,children:x.jsx(ti.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});H2.displayName=B2;var V2="TabsTrigger",q2=E.forwardRef((s,t)=>{const{__scopeTabs:e,value:n,disabled:a=!1,...o}=s,c=A_(V2,e),u=z2(e),d=X2(c.baseId,n),f=Y2(c.baseId,n),g=n===c.value;return x.jsx(Dz,{asChild:!0,...u,focusable:!a,active:g,children:x.jsx(ti.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:t,onMouseDown:Dn(s.onMouseDown,y=>{!a&&y.button===0&&y.ctrlKey===!1?c.onValueChange(n):y.preventDefault()}),onKeyDown:Dn(s.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(n)}),onFocus:Dn(s.onFocus,()=>{const y=c.activationMode!=="manual";!g&&!a&&y&&c.onValueChange(n)})})})});q2.displayName=V2;var G2="TabsContent",$2=E.forwardRef((s,t)=>{const{__scopeTabs:e,value:n,forceMount:a,children:o,...c}=s,u=A_(G2,e),d=X2(u.baseId,n),f=Y2(u.baseId,n),g=n===u.value,y=E.useRef(g);return E.useEffect(()=>{const b=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(b)},[]),x.jsx(mg,{present:a||g,children:({present:b})=>x.jsx(ti.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!b,id:f,tabIndex:0,...c,ref:t,style:{...s.style,animationDuration:y.current?"0s":void 0},children:b&&o})})});$2.displayName=G2;function X2(s,t){return`${s}-trigger-${t}`}function Y2(s,t){return`${s}-content-${t}`}var jz=U2,K2=H2,W2=q2,Q2=$2;const Pz=jz,Z2=E.forwardRef(({className:s="",...t},e)=>x.jsx(K2,{ref:e,className:`inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground ${s}`,...t}));Z2.displayName=K2.displayName;const Cw=E.forwardRef(({className:s="",...t},e)=>x.jsx(W2,{ref:e,className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm ${s}`,...t}));Cw.displayName=W2.displayName;const Tw=E.forwardRef(({className:s="",...t},e)=>x.jsx(Q2,{ref:e,className:`mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${s}`,...t}));Tw.displayName=Q2.displayName;function Fz({open:s,onOpenChange:t,user:e,onUpdate:n}){const[a,o]=E.useState(e.name),[c,u]=E.useState(e.avatar||""),[d,f]=E.useState(!1),[g,y]=E.useState(!1),[b,w]=E.useState(e.avatar||""),[A,S]=E.useState(""),[C,T]=E.useState(""),[D,L]=E.useState(""),[P,z]=E.useState(!1),U=async $=>{var it;const W=(it=$.target.files)==null?void 0:it[0];if(W){if(!W.type.startsWith("image/")){alert("Vui lng chn file nh");return}if(W.size>2*1024*1024){alert("Kch thc nh ti a 2MB");return}f(!0);try{const ct=new FileReader;ct.onload=X=>{var _t;w((_t=X.target)==null?void 0:_t.result)},ct.readAsDataURL(W);const lt=new FormData;lt.append("file",W);const nt=localStorage.getItem("heytex_token"),I=await fetch("/api/upload/avatar",{method:"POST",headers:{Authorization:`Bearer ${nt}`},body:lt});if(!I.ok){const X=await I.json();throw new Error(X.error||"Upload failed")}const q=await I.json();u(q.url)}catch(ct){console.error("Upload error:",ct),alert(ct.message||"Khng th ti nh ln"),w(e.avatar||"")}finally{f(!1)}}},O=async()=>{if(!a.trim()){alert("Vui lng nhp tn");return}y(!0);try{const $=localStorage.getItem("heytex_token"),W=await fetch("/api/auth/me",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify({name:a.trim(),avatar:c||void 0})});if(!W.ok){const it=await W.json();throw new Error(it.error||"Update failed")}n(),t(!1)}catch($){console.error("Update error:",$),alert($.message||"Khng th cp nht thng tin")}finally{y(!1)}},H=async()=>{if(!A||!C||!D){alert("Vui lng in y  thng tin");return}if(C.length<6){alert("Mt khu mi phi c t nht 6 k t");return}if(C!==D){alert("Mt khu mi khng khp");return}z(!0);try{const $=localStorage.getItem("heytex_token"),W=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify({currentPassword:A,newPassword:C})});if(!W.ok){const it=await W.json();throw new Error(it.error||"Change password failed")}alert("i mt khu thnh cng"),S(""),T(""),L("")}catch($){console.error("Change password error:",$),alert($.message||"Khng th i mt khu")}finally{z(!1)}},Z=$=>new Date($).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return x.jsx(w_,{open:s,onOpenChange:t,children:x.jsxs(Vv,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[x.jsx(qv,{children:x.jsx(Gv,{children:"Thng tin c nhn"})}),x.jsxs(Pz,{defaultValue:"profile",className:"w-full",children:[x.jsxs(Z2,{className:"grid w-full grid-cols-2",children:[x.jsx(Cw,{value:"profile",children:"Thng tin"}),x.jsx(Cw,{value:"password",children:"i mt khu"})]}),x.jsxs(Tw,{value:"profile",className:"space-y-6 py-4",children:[x.jsxs("div",{className:"flex flex-col items-center gap-4",children:[x.jsxs("div",{className:"relative group",children:[x.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-muted flex items-center justify-center border-2 border-border",children:b?x.jsx("img",{src:b,alt:a,className:"w-full h-full object-cover"}):x.jsx(XR,{className:"w-12 h-12 text-muted-foreground"})}),x.jsx("label",{htmlFor:"avatar-upload",className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:x.jsx(_3,{className:"w-6 h-6 text-white"})}),x.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:U,disabled:d})]}),x.jsx("p",{className:"text-sm text-muted-foreground",children:d?"ang ti ln...":"Click  thay i nh i din"})]}),e.stats&&x.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:x.jsx(Mo,{className:"w-5 h-5 text-blue-500"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"D n LaTeX"}),x.jsx("p",{className:"text-2xl font-bold",children:e.stats.latexProjects})]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:x.jsx(Mo,{className:"w-5 h-5 text-purple-500"})}),x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"D n Typst"}),x.jsx("p",{className:"text-2xl font-bold",children:e.stats.typstProjects})]})]})]}),x.jsxs("div",{className:"space-y-4 p-4 bg-muted/50 rounded-lg",children:[x.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[x.jsx(xw,{className:"w-4 h-4"}),"Thng tin ti khon"]}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"Ngy ng k:"}),x.jsx("span",{className:"font-medium",children:Z(e.createdAt)})]}),e.lastLoginAt&&x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-muted-foreground",children:"ng nhp cui:"}),x.jsx("span",{className:"font-medium",children:Z(e.lastLoginAt)})]})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-sm font-medium",children:"Tn hin th"}),x.jsx(zi,{value:a,onChange:$=>o($.target.value),placeholder:"Nhp tn ca bn",maxLength:50})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-sm font-medium",children:"Email"}),x.jsx(zi,{value:e.email,disabled:!0,className:"bg-muted cursor-not-allowed"}),x.jsx("p",{className:"text-xs text-muted-foreground",children:"Email khng th thay i"})]}),x.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[x.jsxs(Ee,{variant:"outline",onClick:()=>t(!1),disabled:g||d,children:[x.jsx(Oh,{className:"w-4 h-4 mr-2"}),"Hy"]}),x.jsxs(Ee,{onClick:O,disabled:g||d||a.trim()===e.name&&c===e.avatar,children:[x.jsx(GR,{className:"w-4 h-4 mr-2"}),g?"ang lu...":"Lu"]})]})]}),x.jsxs(Tw,{value:"password",className:"space-y-6 py-4",children:[x.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(DT,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("h3",{className:"font-semibold",children:"i mt khu"}),x.jsx("p",{className:"text-sm text-muted-foreground",children:"m bo mt khu ca bn c t nht 6 k t v kh on"})]})]})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-sm font-medium",children:"Mt khu hin ti"}),x.jsx(zi,{type:"password",value:A,onChange:$=>S($.target.value),placeholder:"Nhp mt khu hin ti"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-sm font-medium",children:"Mt khu mi"}),x.jsx(zi,{type:"password",value:C,onChange:$=>T($.target.value),placeholder:"Nhp mt khu mi (ti thiu 6 k t)"})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("label",{className:"text-sm font-medium",children:"Xc nhn mt khu mi"}),x.jsx(zi,{type:"password",value:D,onChange:$=>L($.target.value),placeholder:"Nhp li mt khu mi"})]})]}),x.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[x.jsxs(Ee,{variant:"outline",onClick:()=>{S(""),T(""),L("")},disabled:P,children:[x.jsx(Oh,{className:"w-4 h-4 mr-2"}),"Xa"]}),x.jsxs(Ee,{onClick:H,disabled:P||!A||!C||!D,children:[x.jsx(DT,{className:"w-4 h-4 mr-2"}),P?"ang i...":"i mt khu"]})]})]})]})]})})}function Iz({open:s,onOpenChange:t,onCreate:e}){const[n,a]=E.useState(""),[o,c]=E.useState(null),[u,d]=E.useState(null),[f,g]=E.useState({LATEX:[],TYPST:[]}),[y,b]=E.useState(!1),[w,A]=E.useState(!1);E.useEffect(()=>{s&&S()},[s]);const S=async()=>{b(!0);try{const D=localStorage.getItem("heytex_token"),L=await fetch("/api/templates",{headers:{Authorization:`Bearer ${D}`}});if(L.ok){const P=await L.json();g(P.templates)}}catch(D){console.error("Failed to load templates:",D)}finally{b(!1)}},C=async()=>{if(!(!n.trim()||!o)){A(!0);try{await e({name:n.trim(),engine:o,templateId:u==null?void 0:u.id}),a(""),c(null),d(null),t(!1)}catch(D){console.error("Failed to create project:",D)}finally{A(!1)}}},T=o?f[o]||[]:[];return x.jsx(w_,{open:s,onOpenChange:t,children:x.jsxs(Vv,{className:"max-w-4xl w-full h-[600px] overflow-hidden flex flex-col",children:[x.jsxs(qv,{className:"pb-4",children:[x.jsx(Gv,{children:"To d n mi"}),x.jsx(M2,{children:"Chn engine v template  bt u d n mi"})]}),x.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col gap-4",children:[x.jsx("div",{children:x.jsx(zi,{value:n,onChange:D=>a(D.target.value),placeholder:"Nhp tn d n...",maxLength:100,autoFocus:!0})}),x.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4 min-h-0",children:[x.jsxs("div",{className:"flex flex-col border rounded-lg overflow-hidden",children:[x.jsx("div",{className:"px-4 py-3 bg-muted/50 border-b",children:x.jsx("h3",{className:"text-sm font-semibold",children:"Chn Engine"})}),x.jsx("div",{className:"flex-1 overflow-y-auto",children:y?x.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"ang ti..."}):x.jsxs("div",{className:"divide-y",children:[x.jsxs("button",{type:"button",onClick:()=>{c("TYPST"),d(null)},className:`w-full px-4 py-3 flex items-center justify-between hover:bg-muted/50 transition-colors ${o==="TYPST"?"bg-muted":""}`,children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Mo,{className:"w-5 h-5 text-cyan-500"}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium",children:"Typst"}),x.jsx("div",{className:"text-xs text-muted-foreground",children:"Nhanh, hin i"})]})]}),o==="TYPST"&&x.jsx(TT,{className:"w-4 h-4 text-muted-foreground"})]}),x.jsxs("button",{type:"button",onClick:()=>{c("LATEX"),d(null)},className:`w-full px-4 py-3 flex items-center justify-between hover:bg-muted/50 transition-colors ${o==="LATEX"?"bg-muted":""}`,children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Mo,{className:"w-5 h-5 text-orange-500"}),x.jsxs("div",{className:"text-left",children:[x.jsx("div",{className:"font-medium",children:"LaTeX"}),x.jsx("div",{className:"text-xs text-muted-foreground",children:"Mnh m, truyn thng"})]})]}),o==="LATEX"&&x.jsx(TT,{className:"w-4 h-4 text-muted-foreground"})]})]})})]}),x.jsxs("div",{className:"flex flex-col border rounded-lg overflow-hidden",children:[x.jsx("div",{className:"px-4 py-3 bg-muted/50 border-b",children:x.jsx("h3",{className:"text-sm font-semibold",children:"Chn Template"})}),x.jsx("div",{className:"flex-1 overflow-y-auto",children:o?T.length===0?x.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Khng c template"}):x.jsx("div",{className:"divide-y",children:T.map(D=>x.jsx("button",{type:"button",onClick:()=>d(D),className:`w-full px-4 py-3 flex items-start gap-3 hover:bg-muted/50 transition-colors text-left ${(u==null?void 0:u.id)===D.id?"bg-muted":""}`,children:x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"font-medium flex items-center gap-2",children:[D.name,(u==null?void 0:u.id)===D.id&&x.jsx(HR,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),x.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:D.description})]})},D.id))}):x.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Chn engine  xem templates"})})]})]}),(o||u)&&x.jsx("div",{className:"p-3 bg-muted/50 rounded-lg text-sm",children:x.jsxs("div",{className:"flex items-center gap-4",children:[o&&x.jsxs("div",{children:[x.jsx("span",{className:"text-muted-foreground",children:"Engine:"})," ",x.jsx("span",{className:"font-medium",children:o})]}),u&&x.jsxs("div",{children:[x.jsx("span",{className:"text-muted-foreground",children:"Template:"})," ",x.jsx("span",{className:"font-medium",children:u.name})]})]})})]}),x.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[x.jsxs(Ee,{variant:"outline",onClick:()=>t(!1),disabled:w,children:[x.jsx(Oh,{className:"w-4 h-4 mr-2"}),"Hy"]}),x.jsx(Ee,{onClick:C,disabled:!n.trim()||!o||w,children:w?"ang to...":"To d n"})]})]})})}function zz(){const s=Ec(),{user:t,logout:e}=Cc(),{theme:n,toggleTheme:a}=CR(),[o,c]=E.useState([]),[u,d]=E.useState(!0),[f,g]=E.useState(!1),[y,b]=E.useState("grid"),[w,A]=E.useState(!1),[S,C]=E.useState(null),[T,D]=E.useState(!1);E.useEffect(()=>{L()},[]);const L=async()=>{try{const{projects:W}=await Mn.getProjects();c(W)}catch(W){console.error("Failed to load projects:",W)}finally{d(!1)}},P=async W=>{try{const{project:it}=await Mn.createProject({name:W.name,engine:W.engine,templateId:W.templateId});c([it,...o]),s(`/editor/${it.id}`)}catch(it){throw console.error("Failed to create project:",it),it}},z=async W=>{if(confirm("Bn c chc mun xa d n ny?"))try{await Mn.deleteProject(W),c(o.filter(it=>it.id!==W))}catch(it){console.error("Failed to delete project:",it)}},U=async W=>{try{const ct=await(await fetch(`/api/projects/${W.id}/download/zip`,{headers:{Authorization:`Bearer ${localStorage.getItem("heytex_token")}`}})).blob(),lt=window.URL.createObjectURL(ct),nt=document.createElement("a");nt.href=lt,nt.download=`${W.name}.zip`,nt.click()}catch(it){console.error("Failed to download ZIP:",it)}},O=async W=>{try{const it=await fetch(`/api/projects/${W.id}/download/pdf`,{headers:{Authorization:`Bearer ${localStorage.getItem("heytex_token")}`}});if(!it.ok){alert("PDF cha c bin dch. Vui lng m d n v bin dch trc.");return}const ct=await it.blob(),lt=window.URL.createObjectURL(ct),nt=document.createElement("a");nt.href=lt,nt.download=`${W.name}.pdf`,nt.click()}catch(it){console.error("Failed to download PDF:",it)}},H=async W=>{try{const ct=await(await fetch(`/api/projects/${W}/stats`,{headers:{Authorization:`Bearer ${localStorage.getItem("heytex_token")}`}})).json();C(ct.stats),A(!0)}catch(it){console.error("Failed to load project stats:",it)}},Z=()=>{e(),s("/login")},$=()=>{window.location.reload()};return u?x.jsx("div",{className:"h-screen flex items-center justify-center",children:x.jsx(ar,{size:"lg"})}):x.jsxs("div",{className:"min-h-screen bg-background",children:[x.jsx("header",{className:"sticky top-0 z-50 glass border-b",children:x.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Sa,{className:"h-8 w-8 text-primary"}),x.jsx("span",{className:"text-xl font-bold",children:"HeyTeX"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx(Ee,{variant:"ghost",size:"icon",onClick:a,children:n==="dark"?x.jsx($R,{className:"h-5 w-5"}):x.jsx(qR,{className:"h-5 w-5"})}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{onClick:()=>D(!0),className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center hover:bg-primary/30 transition-colors cursor-pointer",title:"Thng tin c nhn",children:t!=null&&t.avatar?x.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full rounded-full object-cover"}):x.jsx(XR,{className:"h-4 w-4 text-primary"})}),x.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:t==null?void 0:t.name})]}),x.jsx(Ee,{variant:"ghost",size:"icon",onClick:Z,children:x.jsx(o4,{className:"h-5 w-5"})})]})]})}),x.jsxs("main",{className:"container mx-auto px-6 py-8",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"D n ca ti"}),x.jsxs("p",{className:"text-muted-foreground mt-1",children:[o.length," / 50 d n"]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"flex items-center gap-1 p-1 glass rounded-lg",children:[x.jsx("button",{onClick:()=>b("grid"),className:`p-2 rounded transition-colors ${y==="grid"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,title:"Xem dng li",children:x.jsx(e4,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>b("list"),className:`p-2 rounded transition-colors ${y==="list"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,title:"Xem dng danh sch",children:x.jsx(i4,{className:"h-4 w-4"})})]}),x.jsxs(Ee,{onClick:()=>g(!0),className:"gap-2",children:[x.jsx(LT,{className:"h-4 w-4"}),"To d n mi"]})]})]}),o.length===0?x.jsxs("div",{className:"text-center py-16",children:[x.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-muted flex items-center justify-center",children:x.jsx(m_,{className:"h-10 w-10 text-muted-foreground"})}),x.jsx("h3",{className:"text-xl font-medium text-foreground mb-2",children:"Cha c d n no"}),x.jsx("p",{className:"text-muted-foreground mb-6",children:"Bt u bng cch to d n LaTeX hoc Typst u tin ca bn"}),x.jsxs(Ee,{onClick:()=>g(!0),children:[x.jsx(LT,{className:"h-4 w-4 mr-2"}),"To d n u tin"]})]}):x.jsx("div",{className:y==="grid"?"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"space-y-3",children:o.map(W=>x.jsx(F4,{project:W,viewMode:y,onDelete:z,onDownloadZip:U,onDownloadPdf:O,onShowInfo:H},W.id))})]}),x.jsx(vz,{open:w,onOpenChange:A,stats:S}),x.jsx(Iz,{open:f,onOpenChange:g,onCreate:P}),t&&x.jsx(Fz,{open:T,onOpenChange:D,user:{id:t.id,name:t.name,email:t.email,avatar:t.avatar,createdAt:t.createdAt||new Date().toISOString(),lastLoginAt:t.lastLoginAt,stats:t.stats},onUpdate:$})]})}const Uz="modulepreload",Bz=function(s){return"/"+s},KT={},yl=function(t,e,n){let a=Promise.resolve();if(e&&e.length>0){let c=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=c(e.map(f=>{if(f=Bz(f),f in KT)return;KT[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":Uz,g||(b.as="script"),b.crossOrigin="",b.href=f,d&&b.setAttribute("nonce",d),document.head.appendChild(b),g)return new Promise((w,A)=>{b.addEventListener("load",w),b.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};function WT(s,t){(t==null||t>s.length)&&(t=s.length);for(var e=0,n=Array(t);e<t;e++)n[e]=s[e];return n}function Hz(s){if(Array.isArray(s))return s}function Vz(s,t,e){return(t=Wz(t))in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function qz(s,t){var e=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(e!=null){var n,a,o,c,u=[],d=!0,f=!1;try{if(o=(e=e.call(s)).next,t!==0)for(;!(d=(n=o.call(e)).done)&&(u.push(n.value),u.length!==t);d=!0);}catch(g){f=!0,a=g}finally{try{if(!d&&e.return!=null&&(c=e.return(),Object(c)!==c))return}finally{if(f)throw a}}return u}}function Gz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QT(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,n)}return e}function ZT(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?QT(Object(e),!0).forEach(function(n){Vz(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):QT(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}function $z(s,t){if(s==null)return{};var e,n,a=Xz(s,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(n=0;n<o.length;n++)e=o[n],t.indexOf(e)===-1&&{}.propertyIsEnumerable.call(s,e)&&(a[e]=s[e])}return a}function Xz(s,t){if(s==null)return{};var e={};for(var n in s)if({}.hasOwnProperty.call(s,n)){if(t.indexOf(n)!==-1)continue;e[n]=s[n]}return e}function Yz(s,t){return Hz(s)||qz(s,t)||Qz(s,t)||Gz()}function Kz(s,t){if(typeof s!="object"||!s)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var n=e.call(s,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Wz(s){var t=Kz(s,"string");return typeof t=="symbol"?t:t+""}function Qz(s,t){if(s){if(typeof s=="string")return WT(s,t);var e={}.toString.call(s).slice(8,-1);return e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set"?Array.from(s):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?WT(s,t):void 0}}function Zz(s,t,e){return t in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function JT(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),e.push.apply(e,n)}return e}function tk(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?JT(Object(e),!0).forEach(function(n){Zz(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):JT(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}function Jz(){for(var s=arguments.length,t=new Array(s),e=0;e<s;e++)t[e]=arguments[e];return function(n){return t.reduceRight(function(a,o){return o(a)},n)}}function tf(s){return function t(){for(var e=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=s.length?s.apply(this,a):function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return t.apply(e,[].concat(a,u))}}}function tv(s){return{}.toString.call(s).includes("Object")}function t5(s){return!Object.keys(s).length}function Cf(s){return typeof s=="function"}function e5(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function n5(s,t){return tv(t)||Do("changeType"),Object.keys(t).some(function(e){return!e5(s,e)})&&Do("changeField"),t}function i5(s){Cf(s)||Do("selectorType")}function s5(s){Cf(s)||tv(s)||Do("handlerType"),tv(s)&&Object.values(s).some(function(t){return!Cf(t)})&&Do("handlersType")}function r5(s){s||Do("initialIsRequired"),tv(s)||Do("initialType"),t5(s)&&Do("initialContent")}function a5(s,t){throw new Error(s[t]||s.default)}var o5={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Do=tf(a5)(o5),Qm={changes:n5,selector:i5,handler:s5,initial:r5};function l5(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Qm.initial(s),Qm.handler(t);var e={current:s},n=tf(h5)(e,t),a=tf(u5)(e),o=tf(Qm.changes)(s),c=tf(c5)(e);function u(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Qm.selector(f),f(e.current)}function d(f){Jz(n,a,o,c)(f)}return[u,d]}function c5(s,t){return Cf(t)?t(s.current):t}function u5(s,t){return s.current=tk(tk({},s.current),t),t}function h5(s,t,e){return Cf(t)?t(s.current):Object.keys(e).forEach(function(n){var a;return(a=t[n])===null||a===void 0?void 0:a.call(t,s.current[n])}),e}var d5={create:l5},f5={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function p5(s){return function t(){for(var e=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=s.length?s.apply(this,a):function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return t.apply(e,[].concat(a,u))}}}function g5(s){return{}.toString.call(s).includes("Object")}function m5(s){return s||ek("configIsRequired"),g5(s)||ek("configType"),s.urls?(y5(),{paths:{vs:s.urls.monacoBase}}):s}function y5(){console.warn(J2.deprecation)}function v5(s,t){throw new Error(s[t]||s.default)}var J2={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},ek=p5(v5)(J2),b5={config:m5},x5=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(a){return e.reduceRight(function(o,c){return c(o)},a)}};function tN(s,t){return Object.keys(t).forEach(function(e){t[e]instanceof Object&&s[e]&&Object.assign(t[e],tN(s[e],t[e]))}),ZT(ZT({},s),t)}var w5={type:"cancelation",msg:"operation is manually canceled"};function Kx(s){var t=!1,e=new Promise(function(n,a){s.then(function(o){return t?a(w5):n(o)}),s.catch(a)});return e.cancel=function(){return t=!0},e}var A5=["monaco"],_5=d5.create({config:f5,isInitialized:!1,resolve:null,reject:null,monaco:null}),eN=Yz(_5,2),vg=eN[0],Xv=eN[1];function S5(s){var t=b5.config(s),e=t.monaco,n=$z(t,A5);Xv(function(a){return{config:tN(a.config,n),monaco:e}})}function E5(){var s=vg(function(t){var e=t.monaco,n=t.isInitialized,a=t.resolve;return{monaco:e,isInitialized:n,resolve:a}});if(!s.isInitialized){if(Xv({isInitialized:!0}),s.monaco)return s.resolve(s.monaco),Kx(Wx);if(window.monaco&&window.monaco.editor)return nN(window.monaco),s.resolve(window.monaco),Kx(Wx);x5(C5,k5)(R5)}return Kx(Wx)}function C5(s){return document.body.appendChild(s)}function T5(s){var t=document.createElement("script");return s&&(t.src=s),t}function k5(s){var t=vg(function(n){var a=n.config,o=n.reject;return{config:a,reject:o}}),e=T5("".concat(t.config.paths.vs,"/loader.js"));return e.onload=function(){return s()},e.onerror=t.reject,e}function R5(){var s=vg(function(e){var n=e.config,a=e.resolve,o=e.reject;return{config:n,resolve:a,reject:o}}),t=window.require;t.config(s.config),t(["vs/editor/editor.main"],function(e){var n=e.m||e;nN(n),s.resolve(n)},function(e){s.reject(e)})}function nN(s){vg().monaco||Xv({monaco:s})}function N5(){return vg(function(s){var t=s.monaco;return t})}var Wx=new Promise(function(s,t){return Xv({resolve:s,reject:t})}),iN={config:S5,init:E5,__getMonacoInstance:N5},M5={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Qx=M5,D5={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},L5=D5;function O5({children:s}){return mn.createElement("div",{style:L5.container},s)}var j5=O5,P5=j5;function F5({width:s,height:t,isEditorReady:e,loading:n,_ref:a,className:o,wrapperProps:c}){return mn.createElement("section",{style:{...Qx.wrapper,width:s,height:t},...c},!e&&mn.createElement(P5,null,n),mn.createElement("div",{ref:a,style:{...Qx.fullWidth,...!e&&Qx.hide},className:o}))}var I5=F5,sN=E.memo(I5);function z5(s){E.useEffect(s,[])}var rN=z5;function U5(s,t,e=!0){let n=E.useRef(!0);E.useEffect(n.current||!e?()=>{n.current=!1}:s,t)}var Fi=U5;function bf(){}function ku(s,t,e,n){return B5(s,n)||H5(s,t,e,n)}function B5(s,t){return s.editor.getModel(aN(s,t))}function H5(s,t,e,n){return s.editor.createModel(t,e,n?aN(s,n):void 0)}function aN(s,t){return s.Uri.parse(t)}function V5({original:s,modified:t,language:e,originalLanguage:n,modifiedLanguage:a,originalModelPath:o,modifiedModelPath:c,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:d=!1,theme:f="light",loading:g="Loading...",options:y={},height:b="100%",width:w="100%",className:A,wrapperProps:S={},beforeMount:C=bf,onMount:T=bf}){let[D,L]=E.useState(!1),[P,z]=E.useState(!0),U=E.useRef(null),O=E.useRef(null),H=E.useRef(null),Z=E.useRef(T),$=E.useRef(C),W=E.useRef(!1);rN(()=>{let nt=iN.init();return nt.then(I=>(O.current=I)&&z(!1)).catch(I=>(I==null?void 0:I.type)!=="cancelation"&&console.error("Monaco initialization: error:",I)),()=>U.current?lt():nt.cancel()}),Fi(()=>{if(U.current&&O.current){let nt=U.current.getOriginalEditor(),I=ku(O.current,s||"",n||e||"text",o||"");I!==nt.getModel()&&nt.setModel(I)}},[o],D),Fi(()=>{if(U.current&&O.current){let nt=U.current.getModifiedEditor(),I=ku(O.current,t||"",a||e||"text",c||"");I!==nt.getModel()&&nt.setModel(I)}},[c],D),Fi(()=>{let nt=U.current.getModifiedEditor();nt.getOption(O.current.editor.EditorOption.readOnly)?nt.setValue(t||""):t!==nt.getValue()&&(nt.executeEdits("",[{range:nt.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),nt.pushUndoStop())},[t],D),Fi(()=>{var nt,I;(I=(nt=U.current)==null?void 0:nt.getModel())==null||I.original.setValue(s||"")},[s],D),Fi(()=>{let{original:nt,modified:I}=U.current.getModel();O.current.editor.setModelLanguage(nt,n||e||"text"),O.current.editor.setModelLanguage(I,a||e||"text")},[e,n,a],D),Fi(()=>{var nt;(nt=O.current)==null||nt.editor.setTheme(f)},[f],D),Fi(()=>{var nt;(nt=U.current)==null||nt.updateOptions(y)},[y],D);let it=E.useCallback(()=>{var q;if(!O.current)return;$.current(O.current);let nt=ku(O.current,s||"",n||e||"text",o||""),I=ku(O.current,t||"",a||e||"text",c||"");(q=U.current)==null||q.setModel({original:nt,modified:I})},[e,t,a,s,n,o,c]),ct=E.useCallback(()=>{var nt;!W.current&&H.current&&(U.current=O.current.editor.createDiffEditor(H.current,{automaticLayout:!0,...y}),it(),(nt=O.current)==null||nt.editor.setTheme(f),L(!0),W.current=!0)},[y,f,it]);E.useEffect(()=>{D&&Z.current(U.current,O.current)},[D]),E.useEffect(()=>{!P&&!D&&ct()},[P,D,ct]);function lt(){var I,q,X,_t;let nt=(I=U.current)==null?void 0:I.getModel();u||((q=nt==null?void 0:nt.original)==null||q.dispose()),d||((X=nt==null?void 0:nt.modified)==null||X.dispose()),(_t=U.current)==null||_t.dispose()}return mn.createElement(sN,{width:w,height:b,isEditorReady:D,loading:g,_ref:H,className:A,wrapperProps:S})}var q5=V5;E.memo(q5);function G5(s){let t=E.useRef();return E.useEffect(()=>{t.current=s},[s]),t.current}var $5=G5,Zm=new Map;function X5({defaultValue:s,defaultLanguage:t,defaultPath:e,value:n,language:a,path:o,theme:c="light",line:u,loading:d="Loading...",options:f={},overrideServices:g={},saveViewState:y=!0,keepCurrentModel:b=!1,width:w="100%",height:A="100%",className:S,wrapperProps:C={},beforeMount:T=bf,onMount:D=bf,onChange:L,onValidate:P=bf}){let[z,U]=E.useState(!1),[O,H]=E.useState(!0),Z=E.useRef(null),$=E.useRef(null),W=E.useRef(null),it=E.useRef(D),ct=E.useRef(T),lt=E.useRef(),nt=E.useRef(n),I=$5(o),q=E.useRef(!1),X=E.useRef(!1);rN(()=>{let j=iN.init();return j.then(G=>(Z.current=G)&&H(!1)).catch(G=>(G==null?void 0:G.type)!=="cancelation"&&console.error("Monaco initialization: error:",G)),()=>$.current?Ct():j.cancel()}),Fi(()=>{var G,tt,ot,pt;let j=ku(Z.current,s||n||"",t||a||"",o||e||"");j!==((G=$.current)==null?void 0:G.getModel())&&(y&&Zm.set(I,(tt=$.current)==null?void 0:tt.saveViewState()),(ot=$.current)==null||ot.setModel(j),y&&((pt=$.current)==null||pt.restoreViewState(Zm.get(o))))},[o],z),Fi(()=>{var j;(j=$.current)==null||j.updateOptions(f)},[f],z),Fi(()=>{!$.current||n===void 0||($.current.getOption(Z.current.editor.EditorOption.readOnly)?$.current.setValue(n):n!==$.current.getValue()&&(X.current=!0,$.current.executeEdits("",[{range:$.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),$.current.pushUndoStop(),X.current=!1))},[n],z),Fi(()=>{var G,tt;let j=(G=$.current)==null?void 0:G.getModel();j&&a&&((tt=Z.current)==null||tt.editor.setModelLanguage(j,a))},[a],z),Fi(()=>{var j;u!==void 0&&((j=$.current)==null||j.revealLine(u))},[u],z),Fi(()=>{var j;(j=Z.current)==null||j.editor.setTheme(c)},[c],z);let _t=E.useCallback(()=>{var j;if(!(!W.current||!Z.current)&&!q.current){ct.current(Z.current);let G=o||e,tt=ku(Z.current,n||s||"",t||a||"",G||"");$.current=(j=Z.current)==null?void 0:j.editor.create(W.current,{model:tt,automaticLayout:!0,...f},g),y&&$.current.restoreViewState(Zm.get(G)),Z.current.editor.setTheme(c),u!==void 0&&$.current.revealLine(u),U(!0),q.current=!0}},[s,t,e,n,a,o,f,g,y,c,u]);E.useEffect(()=>{z&&it.current($.current,Z.current)},[z]),E.useEffect(()=>{!O&&!z&&_t()},[O,z,_t]),nt.current=n,E.useEffect(()=>{var j,G;z&&L&&((j=lt.current)==null||j.dispose(),lt.current=(G=$.current)==null?void 0:G.onDidChangeModelContent(tt=>{X.current||L($.current.getValue(),tt)}))},[z,L]),E.useEffect(()=>{if(z){let j=Z.current.editor.onDidChangeMarkers(G=>{var ot;let tt=(ot=$.current.getModel())==null?void 0:ot.uri;if(tt&&G.find(pt=>pt.path===tt.path)){let pt=Z.current.editor.getModelMarkers({resource:tt});P==null||P(pt)}});return()=>{j==null||j.dispose()}}return()=>{}},[z,P]);function Ct(){var j,G;(j=lt.current)==null||j.dispose(),b?y&&Zm.set(o,$.current.saveViewState()):(G=$.current.getModel())==null||G.dispose(),$.current.dispose()}return mn.createElement(sN,{width:w,height:A,isEditorReady:z,loading:d,_ref:W,className:S,wrapperProps:C})}var Y5=X5,K5=E.memo(Y5),W5=K5;const fr=Object.create(null);fr.open="0";fr.close="1";fr.ping="2";fr.pong="3";fr.message="4";fr.upgrade="5";fr.noop="6";const fy=Object.create(null);Object.keys(fr).forEach(s=>{fy[fr[s]]=s});const kw={type:"error",data:"parser error"},oN=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",lN=typeof ArrayBuffer=="function",cN=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,__=({type:s,data:t},e,n)=>oN&&t instanceof Blob?e?n(t):nk(t,n):lN&&(t instanceof ArrayBuffer||cN(t))?e?n(t):nk(new Blob([t]),n):n(fr[s]+(t||"")),nk=(s,t)=>{const e=new FileReader;return e.onload=function(){const n=e.result.split(",")[1];t("b"+(n||""))},e.readAsDataURL(s)};function ik(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Zx;function Q5(s,t){if(oN&&s.data instanceof Blob)return s.data.arrayBuffer().then(ik).then(t);if(lN&&(s.data instanceof ArrayBuffer||cN(s.data)))return t(ik(s.data));__(s,!1,e=>{Zx||(Zx=new TextEncoder),t(Zx.encode(e))})}const sk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ef=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<sk.length;s++)ef[sk.charCodeAt(s)]=s;const Z5=s=>{let t=s.length*.75,e=s.length,n,a=0,o,c,u,d;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const f=new ArrayBuffer(t),g=new Uint8Array(f);for(n=0;n<e;n+=4)o=ef[s.charCodeAt(n)],c=ef[s.charCodeAt(n+1)],u=ef[s.charCodeAt(n+2)],d=ef[s.charCodeAt(n+3)],g[a++]=o<<2|c>>4,g[a++]=(c&15)<<4|u>>2,g[a++]=(u&3)<<6|d&63;return f},J5=typeof ArrayBuffer=="function",S_=(s,t)=>{if(typeof s!="string")return{type:"message",data:uN(s,t)};const e=s.charAt(0);return e==="b"?{type:"message",data:tU(s.substring(1),t)}:fy[e]?s.length>1?{type:fy[e],data:s.substring(1)}:{type:fy[e]}:kw},tU=(s,t)=>{if(J5){const e=Z5(s);return uN(e,t)}else return{base64:!0,data:s}},uN=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},hN="",eU=(s,t)=>{const e=s.length,n=new Array(e);let a=0;s.forEach((o,c)=>{__(o,!1,u=>{n[c]=u,++a===e&&t(n.join(hN))})})},nU=(s,t)=>{const e=s.split(hN),n=[];for(let a=0;a<e.length;a++){const o=S_(e[a],t);if(n.push(o),o.type==="error")break}return n};function iU(){return new TransformStream({transform(s,t){Q5(s,e=>{const n=e.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(e)})}})}let Jx;function Jm(s){return s.reduce((t,e)=>t+e.length,0)}function ty(s,t){if(s[0].length===t)return s.shift();const e=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)e[a]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),e}function sU(s,t){Jx||(Jx=new TextDecoder);const e=[];let n=0,a=-1,o=!1;return new TransformStream({transform(c,u){for(e.push(c);;){if(n===0){if(Jm(e)<1)break;const d=ty(e,1);o=(d[0]&128)===128,a=d[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Jm(e)<2)break;const d=ty(e,2);a=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),n=3}else if(n===2){if(Jm(e)<8)break;const d=ty(e,8),f=new DataView(d.buffer,d.byteOffset,d.length),g=f.getUint32(0);if(g>Math.pow(2,21)-1){u.enqueue(kw);break}a=g*Math.pow(2,32)+f.getUint32(4),n=3}else{if(Jm(e)<a)break;const d=ty(e,a);u.enqueue(S_(o?d:Jx.decode(d),t)),n=0}if(a===0||a>s){u.enqueue(kw);break}}}})}const dN=4;function Ke(s){if(s)return rU(s)}function rU(s){for(var t in Ke.prototype)s[t]=Ke.prototype[t];return s}Ke.prototype.on=Ke.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};Ke.prototype.once=function(s,t){function e(){this.off(s,e),t.apply(this,arguments)}return e.fn=t,this.on(s,e),this};Ke.prototype.off=Ke.prototype.removeListener=Ke.prototype.removeAllListeners=Ke.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+s];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,a=0;a<e.length;a++)if(n=e[a],n===t||n.fn===t){e.splice(a,1);break}return e.length===0&&delete this._callbacks["$"+s],this};Ke.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+s],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,a=e.length;n<a;++n)e[n].apply(this,t)}return this};Ke.prototype.emitReserved=Ke.prototype.emit;Ke.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Ke.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Yv=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),ss=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),aU="arraybuffer";function fN(s,...t){return t.reduce((e,n)=>(s.hasOwnProperty(n)&&(e[n]=s[n]),e),{})}const oU=ss.setTimeout,lU=ss.clearTimeout;function Kv(s,t){t.useNativeTimers?(s.setTimeoutFn=oU.bind(ss),s.clearTimeoutFn=lU.bind(ss)):(s.setTimeoutFn=ss.setTimeout.bind(ss),s.clearTimeoutFn=ss.clearTimeout.bind(ss))}const cU=1.33;function uU(s){return typeof s=="string"?hU(s):Math.ceil((s.byteLength||s.size)*cU)}function hU(s){let t=0,e=0;for(let n=0,a=s.length;n<a;n++)t=s.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function pN(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function dU(s){let t="";for(let e in s)s.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(s[e]));return t}function fU(s){let t={},e=s.split("&");for(let n=0,a=e.length;n<a;n++){let o=e[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class pU extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class E_ extends Ke{constructor(t){super(),this.writable=!1,Kv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new pU(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=S_(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=dU(t);return e.length?"?"+e:""}}class gU extends E_{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};nU(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,eU(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=pN()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let gN=!1;try{gN=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const mU=gN;function yU(){}class vU extends gU{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}}class lr extends Ke{constructor(t,e,n){super(),this.createRequest=t,Kv(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const e=fN(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=lr.requestsCount++,lr.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=yU,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete lr.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}lr.requestsCount=0;lr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",rk);else if(typeof addEventListener=="function"){const s="onpagehide"in ss?"pagehide":"unload";addEventListener(s,rk,!1)}}function rk(){for(let s in lr.requests)lr.requests.hasOwnProperty(s)&&lr.requests[s].abort()}const bU=(function(){const s=mN({xdomain:!1});return s&&s.responseType!==null})();class xU extends vU{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=bU&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new lr(mN,this.uri(),t)}}function mN(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||mU))return new XMLHttpRequest}catch{}if(!t)try{return new ss[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const yN=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class wU extends E_{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,n=yN?{}:fN(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],a=e===t.length-1;__(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}a&&Yv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=pN()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const tw=ss.WebSocket||ss.MozWebSocket;class AU extends wU{createSocket(t,e,n){return yN?new tw(t,e,n):e?new tw(t,e):new tw(t)}doWrite(t,e){this.ws.send(e)}}class _U extends E_{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=sU(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),a=iU();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const o=()=>{n.read().then(({done:u,value:d})=>{u||(this.onPacket(d),o())}).catch(u=>{})};o();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],a=e===t.length-1;this._writer.write(n).then(()=>{a&&Yv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const SU={websocket:AU,webtransport:_U,polling:xU},EU=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,CU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Rw(s){if(s.length>8e3)throw"URI too long";const t=s,e=s.indexOf("["),n=s.indexOf("]");e!=-1&&n!=-1&&(s=s.substring(0,e)+s.substring(e,n).replace(/:/g,";")+s.substring(n,s.length));let a=EU.exec(s||""),o={},c=14;for(;c--;)o[CU[c]]=a[c]||"";return e!=-1&&n!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=TU(o,o.path),o.queryKey=kU(o,o.query),o}function TU(s,t){const e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function kU(s,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,o){a&&(e[a]=o)}),e}const Nw=typeof addEventListener=="function"&&typeof removeEventListener=="function",py=[];Nw&&addEventListener("offline",()=>{py.forEach(s=>s())},!1);class Lo extends Ke{constructor(t,e){if(super(),this.binaryType=aU,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const n=Rw(t);e.hostname=n.host,e.secure=n.protocol==="https"||n.protocol==="wss",e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=Rw(e.host).host);Kv(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fU(this.opts.query)),Nw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},py.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=dN,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Lo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Lo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(e+=uU(a)),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Yv(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,n){return this._sendPacket("message",t,e,n),this}send(t,e,n){return this._sendPacket("message",t,e,n),this}_sendPacket(t,e,n,a){if(typeof e=="function"&&(a=e,e=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Lo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Nw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=py.indexOf(this._offlineEventListener);n!==-1&&py.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}Lo.protocol=dN;class RU extends Lo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;Lo.priorWebsocketSuccess=!1;const a=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",y=>{if(!n)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Lo.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(g(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=e.name,this.emitReserved("upgradeError",b)}}))};function o(){n||(n=!0,g(),e.close(),e=null)}const c=y=>{const b=new Error("probe error: "+y);b.transport=e.name,o(),this.emitReserved("upgradeError",b)};function u(){c("transport closed")}function d(){c("socket closed")}function f(y){e&&y.name!==e.name&&o()}const g=()=>{e.removeListener("open",a),e.removeListener("error",c),e.removeListener("close",u),this.off("close",d),this.off("upgrading",f)};e.once("open",a),e.once("error",c),e.once("close",u),this.once("close",d),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}let NU=class extends RU{constructor(t,e={}){const n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>SU[a]).filter(a=>!!a)),super(t,n)}};function MU(s,t="",e){let n=s;e=e||typeof location<"u"&&location,s==null&&(s=e.protocol+"//"+e.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=e.protocol+s:s=e.host+s),/^(https?|wss?):\/\//.test(s)||(typeof e<"u"?s=e.protocol+"//"+s:s="https://"+s),n=Rw(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+t,n.href=n.protocol+"://"+o+(e&&e.port===n.port?"":":"+n.port),n}const DU=typeof ArrayBuffer=="function",LU=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,vN=Object.prototype.toString,OU=typeof Blob=="function"||typeof Blob<"u"&&vN.call(Blob)==="[object BlobConstructor]",jU=typeof File=="function"||typeof File<"u"&&vN.call(File)==="[object FileConstructor]";function C_(s){return DU&&(s instanceof ArrayBuffer||LU(s))||OU&&s instanceof Blob||jU&&s instanceof File}function gy(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let e=0,n=s.length;e<n;e++)if(gy(s[e]))return!0;return!1}if(C_(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return gy(s.toJSON(),!0);for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&gy(s[e]))return!0;return!1}function PU(s){const t=[],e=s.data,n=s;return n.data=Mw(e,t),n.attachments=t.length,{packet:n,buffers:t}}function Mw(s,t){if(!s)return s;if(C_(s)){const e={_placeholder:!0,num:t.length};return t.push(s),e}else if(Array.isArray(s)){const e=new Array(s.length);for(let n=0;n<s.length;n++)e[n]=Mw(s[n],t);return e}else if(typeof s=="object"&&!(s instanceof Date)){const e={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=Mw(s[n],t));return e}return s}function FU(s,t){return s.data=Dw(s.data,t),delete s.attachments,s}function Dw(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let e=0;e<s.length;e++)s[e]=Dw(s[e],t);else if(typeof s=="object")for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(s[e]=Dw(s[e],t));return s}const IU=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],zU=5;var Qt;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(Qt||(Qt={}));let UU=class{constructor(t){this.replacer=t}encode(t){return(t.type===Qt.EVENT||t.type===Qt.ACK)&&gy(t)?this.encodeAsBinary({type:t.type===Qt.EVENT?Qt.BINARY_EVENT:Qt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Qt.BINARY_EVENT||t.type===Qt.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=PU(t),n=this.encodeAsString(e.packet),a=e.buffers;return a.unshift(n),a}};function ak(s){return Object.prototype.toString.call(s)==="[object Object]"}let BU=class bN extends Ke{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===Qt.BINARY_EVENT;n||e.type===Qt.BINARY_ACK?(e.type=n?Qt.EVENT:Qt.ACK,this.reconstructor=new HU(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(C_(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(Qt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Qt.BINARY_EVENT||n.type===Qt.BINARY_ACK){const o=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const c=t.substring(o,e);if(c!=Number(c)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(c)}if(t.charAt(e+1)==="/"){const o=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(o,e)}else n.nsp="/";const a=t.charAt(e+1);if(a!==""&&Number(a)==a){const o=e+1;for(;++e;){const c=t.charAt(e);if(c==null||Number(c)!=c){--e;break}if(e===t.length)break}n.id=Number(t.substring(o,e+1))}if(t.charAt(++e)){const o=this.tryParse(t.substr(e));if(bN.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case Qt.CONNECT:return ak(e);case Qt.DISCONNECT:return e===void 0;case Qt.CONNECT_ERROR:return typeof e=="string"||ak(e);case Qt.EVENT:case Qt.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&IU.indexOf(e[0])===-1);case Qt.ACK:case Qt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class HU{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=FU(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const VU=Object.freeze(Object.defineProperty({__proto__:null,Decoder:BU,Encoder:UU,get PacketType(){return Qt},protocol:zU},Symbol.toStringTag,{value:"Module"}));function Ms(s,t,e){return s.on(t,e),function(){s.off(t,e)}}const qU=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class xN extends Ke{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ms(t,"open",this.onopen.bind(this)),Ms(t,"packet",this.onpacket.bind(this)),Ms(t,"error",this.onerror.bind(this)),Ms(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,a,o;if(qU.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const c={type:Qt.EVENT,data:e};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const g=this.ids++,y=e.pop();this._registerAckCallback(g,y),c.id=g}const u=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,d=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!u||(d?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,e){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=e;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===t&&this.sendBuffer.splice(u,1);e.call(this,new Error("operation has timed out"))},a),c=(...u)=>{this.io.clearTimeoutFn(o),e.apply(this,u)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...e){return new Promise((n,a)=>{const o=(c,u)=>c?a(c):n(u);o.withError=!0,e.push(o),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...o)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(a)):(this._queue.shift(),e&&e(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Qt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Qt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Qt.EVENT:case Qt.BINARY_EVENT:this.onevent(t);break;case Qt.ACK:case Qt.BINARY_ACK:this.onack(t);break;case Qt.DISCONNECT:this.ondisconnect();break;case Qt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...a){n||(n=!0,e.packet({type:Qt.ACK,id:t,data:a}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Qt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function Kh(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Kh.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*s);s=(Math.floor(t*10)&1)==0?s-e:s+e}return Math.min(s,this.max)|0};Kh.prototype.reset=function(){this.attempts=0};Kh.prototype.setMin=function(s){this.ms=s};Kh.prototype.setMax=function(s){this.max=s};Kh.prototype.setJitter=function(s){this.jitter=s};class Lw extends Ke{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Kv(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Kh({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const a=e.parser||VU;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new NU(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Ms(e,"open",function(){n.onopen(),t&&t()}),o=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),t?t(u):this.maybeReconnectOnOpen()},c=Ms(e,"error",o);if(this._timeout!==!1){const u=this._timeout,d=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),e.close()},u);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(a),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ms(t,"ping",this.onping.bind(this)),Ms(t,"data",this.ondata.bind(this)),Ms(t,"error",this.onerror.bind(this)),Ms(t,"close",this.onclose.bind(this)),Ms(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Yv(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new xN(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Wd={};function my(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const e=MU(s,t.path||"/socket.io"),n=e.source,a=e.id,o=e.path,c=Wd[a]&&o in Wd[a].nsps,u=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let d;return u?d=new Lw(n,t):(Wd[a]||(Wd[a]=new Lw(n,t)),d=Wd[a]),e.query&&!t.query&&(t.query=e.queryKey),d.socket(e.path,t)}Object.assign(my,{Manager:Lw,Socket:xN,io:my,connect:my});const Ds=()=>new Map,Ow=s=>{const t=Ds();return s.forEach((e,n)=>{t.set(n,e)}),t},Bo=(s,t,e)=>{let n=s.get(t);return n===void 0&&s.set(t,n=e()),n},GU=(s,t)=>{const e=[];for(const[n,a]of s)e.push(t(a,n));return e},$U=(s,t)=>{for(const[e,n]of s)if(t(n,e))return!0;return!1},Ph=()=>new Set,ew=s=>s[s.length-1],XU=(s,t)=>{for(let e=0;e<t.length;e++)s.push(t[e])},gc=Array.from,YU=Array.isArray;class KU{constructor(){this._observers=Ds()}on(t,e){return Bo(this._observers,t,Ph).add(e),e}once(t,e){const n=(...a)=>{this.off(t,n),e(...a)};this.on(t,n)}off(t,e){const n=this._observers.get(t);n!==void 0&&(n.delete(e),n.size===0&&this._observers.delete(t))}emit(t,e){return gc((this._observers.get(t)||Ds()).values()).forEach(n=>n(...e))}destroy(){this._observers=Ds()}}const Oo=Math.floor,yy=Math.abs,wN=(s,t)=>s<t?s:t,Tc=(s,t)=>s>t?s:t,AN=s=>s!==0?s<0:1/s<0,ok=1,lk=2,nw=4,iw=8,Tf=32,va=64,Ui=128,Wv=31,jw=63,fc=127,WU=2147483647,_N=Number.MAX_SAFE_INTEGER,QU=Number.isInteger||(s=>typeof s=="number"&&isFinite(s)&&Oo(s)===s),ZU=s=>s.toLowerCase(),JU=/^\s*/g,tB=s=>s.replace(JU,""),eB=/([A-Z])/g,ck=(s,t)=>tB(s.replace(eB,e=>`${t}${ZU(e)}`)),nB=s=>{const t=unescape(encodeURIComponent(s)),e=t.length,n=new Uint8Array(e);for(let a=0;a<e;a++)n[a]=t.codePointAt(a);return n},kf=typeof TextEncoder<"u"?new TextEncoder:null,iB=s=>kf.encode(s),sB=kf?iB:nB;let xf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});xf&&xf.decode(new Uint8Array).length===1&&(xf=null);class bg{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Qv=()=>new bg,rB=s=>{let t=s.cpos;for(let e=0;e<s.bufs.length;e++)t+=s.bufs[e].length;return t},or=s=>{const t=new Uint8Array(rB(s));let e=0;for(let n=0;n<s.bufs.length;n++){const a=s.bufs[n];t.set(a,e),e+=a.length}return t.set(new Uint8Array(s.cbuf.buffer,0,s.cpos),e),t},aB=(s,t)=>{const e=s.cbuf.length;e-s.cpos<t&&(s.bufs.push(new Uint8Array(s.cbuf.buffer,0,s.cpos)),s.cbuf=new Uint8Array(Tc(e,t)*2),s.cpos=0)},gn=(s,t)=>{const e=s.cbuf.length;s.cpos===e&&(s.bufs.push(s.cbuf),s.cbuf=new Uint8Array(e*2),s.cpos=0),s.cbuf[s.cpos++]=t},Pw=gn,te=(s,t)=>{for(;t>fc;)gn(s,Ui|fc&t),t=Oo(t/128);gn(s,fc&t)},T_=(s,t)=>{const e=AN(t);for(e&&(t=-t),gn(s,(t>jw?Ui:0)|(e?va:0)|jw&t),t=Oo(t/64);t>0;)gn(s,(t>fc?Ui:0)|fc&t),t=Oo(t/128)},Fw=new Uint8Array(3e4),oB=Fw.length/3,lB=(s,t)=>{if(t.length<oB){const e=kf.encodeInto(t,Fw).written||0;te(s,e);for(let n=0;n<e;n++)gn(s,Fw[n])}else Ci(s,sB(t))},cB=(s,t)=>{const e=unescape(encodeURIComponent(t)),n=e.length;te(s,n);for(let a=0;a<n;a++)gn(s,e.codePointAt(a))},Mu=kf&&kf.encodeInto?lB:cB,Zv=(s,t)=>{const e=s.cbuf.length,n=s.cpos,a=wN(e-n,t.length),o=t.length-a;s.cbuf.set(t.subarray(0,a),n),s.cpos+=a,o>0&&(s.bufs.push(s.cbuf),s.cbuf=new Uint8Array(Tc(e*2,o)),s.cbuf.set(t.subarray(a)),s.cpos=o)},Ci=(s,t)=>{te(s,t.byteLength),Zv(s,t)},k_=(s,t)=>{aB(s,t);const e=new DataView(s.cbuf.buffer,s.cpos,t);return s.cpos+=t,e},uB=(s,t)=>k_(s,4).setFloat32(0,t,!1),hB=(s,t)=>k_(s,8).setFloat64(0,t,!1),dB=(s,t)=>k_(s,8).setBigInt64(0,t,!1),uk=new DataView(new ArrayBuffer(4)),fB=s=>(uk.setFloat32(0,s),uk.getFloat32(0)===s),Rf=(s,t)=>{switch(typeof t){case"string":gn(s,119),Mu(s,t);break;case"number":QU(t)&&yy(t)<=WU?(gn(s,125),T_(s,t)):fB(t)?(gn(s,124),uB(s,t)):(gn(s,123),hB(s,t));break;case"bigint":gn(s,122),dB(s,t);break;case"object":if(t===null)gn(s,126);else if(YU(t)){gn(s,117),te(s,t.length);for(let e=0;e<t.length;e++)Rf(s,t[e])}else if(t instanceof Uint8Array)gn(s,116),Ci(s,t);else{gn(s,118);const e=Object.keys(t);te(s,e.length);for(let n=0;n<e.length;n++){const a=e[n];Mu(s,a),Rf(s,t[a])}}break;case"boolean":gn(s,t?120:121);break;default:gn(s,127)}};class hk extends bg{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&te(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const dk=s=>{s.count>0&&(T_(s.encoder,s.count===1?s.s:-s.s),s.count>1&&te(s.encoder,s.count-2))};class vy{constructor(){this.encoder=new bg,this.s=0,this.count=0}write(t){this.s===t?this.count++:(dk(this),this.count=1,this.s=t)}toUint8Array(){return dk(this),or(this.encoder)}}const fk=s=>{if(s.count>0){const t=s.diff*2+(s.count===1?0:1);T_(s.encoder,t),s.count>1&&te(s.encoder,s.count-2)}};class sw{constructor(){this.encoder=new bg,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(fk(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return fk(this),or(this.encoder)}}class pB{constructor(){this.sarr=[],this.s="",this.lensE=new vy}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new bg;return this.sarr.push(this.s),this.s="",Mu(t,this.sarr.join("")),Zv(t,this.lensE.toUint8Array()),or(t)}}const jo=s=>new Error(s),cr=()=>{throw jo("Method unimplemented")},pr=()=>{throw jo("Unexpected case")},SN=jo("Unexpected end of array"),EN=jo("Integer out of Range");class Jv{constructor(t){this.arr=t,this.pos=0}}const Wh=s=>new Jv(s),gB=s=>s.pos!==s.arr.length,mB=(s,t)=>{const e=new Uint8Array(s.arr.buffer,s.pos+s.arr.byteOffset,t);return s.pos+=t,e},Ti=s=>mB(s,Ut(s)),Fh=s=>s.arr[s.pos++],Ut=s=>{let t=0,e=1;const n=s.arr.length;for(;s.pos<n;){const a=s.arr[s.pos++];if(t=t+(a&fc)*e,e*=128,a<Ui)return t;if(t>_N)throw EN}throw SN},R_=s=>{let t=s.arr[s.pos++],e=t&jw,n=64;const a=(t&va)>0?-1:1;if((t&Ui)===0)return a*e;const o=s.arr.length;for(;s.pos<o;){if(t=s.arr[s.pos++],e=e+(t&fc)*n,n*=128,t<Ui)return a*e;if(e>_N)throw EN}throw SN},yB=s=>{let t=Ut(s);if(t===0)return"";{let e=String.fromCodePoint(Fh(s));if(--t<100)for(;t--;)e+=String.fromCodePoint(Fh(s));else for(;t>0;){const n=t<1e4?t:1e4,a=s.arr.subarray(s.pos,s.pos+n);s.pos+=n,e+=String.fromCodePoint.apply(null,a),t-=n}return decodeURIComponent(escape(e))}},vB=s=>xf.decode(Ti(s)),Du=xf?vB:yB,N_=(s,t)=>{const e=new DataView(s.arr.buffer,s.arr.byteOffset+s.pos,t);return s.pos+=t,e},bB=s=>N_(s,4).getFloat32(0,!1),xB=s=>N_(s,8).getFloat64(0,!1),wB=s=>N_(s,8).getBigInt64(0,!1),AB=[s=>{},s=>null,R_,bB,xB,wB,s=>!1,s=>!0,Du,s=>{const t=Ut(s),e={};for(let n=0;n<t;n++){const a=Du(s);e[a]=Nf(s)}return e},s=>{const t=Ut(s),e=[];for(let n=0;n<t;n++)e.push(Nf(s));return e},Ti],Nf=s=>AB[127-Fh(s)](s);class pk extends Jv{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),gB(this)?this.count=Ut(this)+1:this.count=-1),this.count--,this.s}}class by extends Jv{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=R_(this);const t=AN(this.s);this.count=1,t&&(this.s=-this.s,this.count=Ut(this)+2)}return this.count--,this.s}}class rw extends Jv{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=R_(this),e=t&1;this.diff=Oo(t/2),this.count=1,e&&(this.count=Ut(this)+2)}return this.s+=this.diff,this.count--,this.s}}class _B{constructor(t){this.decoder=new by(t),this.str=Du(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}const SB=crypto.getRandomValues.bind(crypto),CN=()=>SB(new Uint32Array(1))[0],EB="10000000-1000-4000-8000"+-1e11,CB=()=>EB.replace(/[018]/g,s=>(s^CN()&15>>s/4).toString(16)),gk=s=>new Promise(s);Promise.all.bind(Promise);const mk=s=>s===void 0?null:s;class TB{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let TN=new TB,kB=!0;try{typeof localStorage<"u"&&localStorage&&(TN=localStorage,kB=!1)}catch{}const RB=TN,NB=Object.assign,MB=Object.keys,DB=(s,t)=>{for(const e in s)t(s[e],e)},yk=s=>MB(s).length,LB=s=>{for(const t in s)return!1;return!0},OB=(s,t)=>{for(const e in s)if(!t(s[e],e))return!1;return!0},jB=(s,t)=>Object.prototype.hasOwnProperty.call(s,t),PB=(s,t)=>s===t||yk(s)===yk(t)&&OB(s,(e,n)=>(e!==void 0||jB(t,n))&&t[n]===e),FB=Object.freeze,kN=s=>{for(const t in s){const e=s[t];(typeof e=="object"||typeof e=="function")&&kN(s[t])}return FB(s)},M_=(s,t,e=0)=>{try{for(;e<s.length;e++)s[e](...t)}finally{e<s.length&&M_(s,t,e+1)}},IB=s=>s,zB=(s,t)=>t.includes(s);var RN={};const Mf=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Bs;const UB=()=>{if(Bs===void 0)if(Mf){Bs=Ds();const s=process.argv;let t=null;for(let e=0;e<s.length;e++){const n=s[e];n[0]==="-"?(t!==null&&Bs.set(t,""),t=n):t!==null&&(Bs.set(t,n),t=null)}t!==null&&Bs.set(t,"")}else typeof location=="object"?(Bs=Ds(),(location.search||"?").slice(1).split("&").forEach(s=>{if(s.length!==0){const[t,e]=s.split("=");Bs.set(`--${ck(t,"-")}`,e),Bs.set(`-${ck(t,"-")}`,e)}})):Bs=Ds();return Bs},Iw=s=>UB().has(s),ev=s=>mk(Mf?RN[s.toUpperCase().replaceAll("-","_")]:RB.getItem(s)),NN=s=>Iw("--"+s)||ev(s)!==null;NN("production");const BB=Mf&&zB(RN.FORCE_COLOR,["true","1","2"]),HB=BB||!Iw("--no-colors")&&!NN("no-color")&&(!Mf||process.stdout.isTTY)&&(!Mf||Iw("--color")||ev("COLORTERM")!==null||(ev("TERM")||"").includes("color")),VB=s=>new Uint8Array(s),qB=s=>{const t=VB(s.byteLength);return t.set(s),t};class GB{constructor(t,e){this.left=t,this.right=e}}const zr=(s,t)=>new GB(s,t);typeof DOMParser<"u"&&new DOMParser;const $B=s=>GU(s,(t,e)=>`${e}:${t};`).join(""),Ta=Symbol,MN=Ta(),DN=Ta(),XB=Ta(),YB=Ta(),KB=Ta(),LN=Ta(),WB=Ta(),D_=Ta(),QB=Ta(),ZB=s=>{var a;s.length===1&&((a=s[0])==null?void 0:a.constructor)===Function&&(s=s[0]());const t=[],e=[];let n=0;for(;n<s.length;n++){const o=s[n];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)t.push(o);else if(o.constructor===Object)break}for(n>0&&e.push(t.join(""));n<s.length;n++){const o=s[n];o instanceof Symbol||e.push(o)}return e},JB={[MN]:zr("font-weight","bold"),[DN]:zr("font-weight","normal"),[XB]:zr("color","blue"),[KB]:zr("color","green"),[YB]:zr("color","grey"),[LN]:zr("color","red"),[WB]:zr("color","purple"),[D_]:zr("color","orange"),[QB]:zr("color","black")},tH=s=>{var c;s.length===1&&((c=s[0])==null?void 0:c.constructor)===Function&&(s=s[0]());const t=[],e=[],n=Ds();let a=[],o=0;for(;o<s.length;o++){const u=s[o],d=JB[u];if(d!==void 0)n.set(d.left,d.right);else{if(u===void 0)break;if(u.constructor===String||u.constructor===Number){const f=$B(n);o>0||f.length>0?(t.push("%c"+u),e.push(f)):t.push(u)}else break}}for(o>0&&(a=e,a.unshift(t.join("")));o<s.length;o++){const u=s[o];u instanceof Symbol||a.push(u)}return a},ON=HB?tH:ZB,eH=(...s)=>{console.log(...ON(s)),jN.forEach(t=>t.print(s))},nH=(...s)=>{console.warn(...ON(s)),s.unshift(D_),jN.forEach(t=>t.print(s))},jN=Ph(),PN=s=>({[Symbol.iterator](){return this},next:s}),iH=(s,t)=>PN(()=>{let e;do e=s.next();while(!e.done&&!t(e.value));return e}),aw=(s,t)=>PN(()=>{const{done:e,value:n}=s.next();return{done:e,value:e?void 0:t(n)}});class L_{constructor(t,e){this.clock=t,this.len=e}}class xg{constructor(){this.clients=new Map}}const FN=(s,t,e)=>t.clients.forEach((n,a)=>{const o=s.doc.store.clients.get(a);if(o!=null){const c=o[o.length-1],u=c.id.clock+c.length;for(let d=0,f=n[d];d<n.length&&f.clock<u;f=n[++d])XN(s,o,f.clock,f.len,e)}}),sH=(s,t)=>{let e=0,n=s.length-1;for(;e<=n;){const a=Oo((e+n)/2),o=s[a],c=o.clock;if(c<=t){if(t<c+o.len)return a;e=a+1}else n=a-1}return null},IN=(s,t)=>{const e=s.clients.get(t.client);return e!==void 0&&sH(e,t.clock)!==null},O_=s=>{s.clients.forEach(t=>{t.sort((a,o)=>a.clock-o.clock);let e,n;for(e=1,n=1;e<t.length;e++){const a=t[n-1],o=t[e];a.clock+a.len>=o.clock?a.len=Tc(a.len,o.clock+o.len-a.clock):(n<e&&(t[n]=o),n++)}t.length=n})},rH=s=>{const t=new xg;for(let e=0;e<s.length;e++)s[e].clients.forEach((n,a)=>{if(!t.clients.has(a)){const o=n.slice();for(let c=e+1;c<s.length;c++)XU(o,s[c].clients.get(a)||[]);t.clients.set(a,o)}});return O_(t),t},nv=(s,t,e,n)=>{Bo(s.clients,t,()=>[]).push(new L_(e,n))},aH=()=>new xg,oH=s=>{const t=aH();return s.clients.forEach((e,n)=>{const a=[];for(let o=0;o<e.length;o++){const c=e[o];if(c.deleted){const u=c.id.clock;let d=c.length;if(o+1<e.length)for(let f=e[o+1];o+1<e.length&&f.deleted;f=e[++o+1])d+=f.length;a.push(new L_(u,d))}}a.length>0&&t.clients.set(n,a)}),t},Qh=(s,t)=>{te(s.restEncoder,t.clients.size),gc(t.clients.entries()).sort((e,n)=>n[0]-e[0]).forEach(([e,n])=>{s.resetDsCurVal(),te(s.restEncoder,e);const a=n.length;te(s.restEncoder,a);for(let o=0;o<a;o++){const c=n[o];s.writeDsClock(c.clock),s.writeDsLen(c.len)}})},j_=s=>{const t=new xg,e=Ut(s.restDecoder);for(let n=0;n<e;n++){s.resetDsCurVal();const a=Ut(s.restDecoder),o=Ut(s.restDecoder);if(o>0){const c=Bo(t.clients,a,()=>[]);for(let u=0;u<o;u++)c.push(new L_(s.readDsClock(),s.readDsLen()))}}return t},vk=(s,t,e)=>{const n=new xg,a=Ut(s.restDecoder);for(let o=0;o<a;o++){s.resetDsCurVal();const c=Ut(s.restDecoder),u=Ut(s.restDecoder),d=e.clients.get(c)||[],f=yn(e,c);for(let g=0;g<u;g++){const y=s.readDsClock(),b=y+s.readDsLen();if(y<f){f<b&&nv(n,c,f,b-f);let w=gr(d,y),A=d[w];for(!A.deleted&&A.id.clock<y&&(d.splice(w+1,0,cv(t,A,y-A.id.clock)),w++);w<d.length&&(A=d[w++],A.id.clock<b);)A.deleted||(b<A.id.clock+A.length&&d.splice(w,0,cv(t,A,b-A.id.clock)),A.delete(t))}else nv(n,c,y,b-y)}}if(n.clients.size>0){const o=new mc;return te(o.restEncoder,0),Qh(o,n),o.toUint8Array()}return null},zN=CN;class Zh extends KU{constructor({guid:t=CB(),collectionid:e=null,gc:n=!0,gcFilter:a=()=>!0,meta:o=null,autoLoad:c=!1,shouldLoad:u=!0}={}){super(),this.gc=n,this.gcFilter=a,this.clientID=zN(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new GN,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=u,this.autoLoad=c,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=gk(f=>{this.on("load",()=>{this.isLoaded=!0,f(this)})});const d=()=>gk(f=>{const g=y=>{(y===void 0||y===!0)&&(this.off("sync",g),f())};this.on("sync",g)});this.on("sync",f=>{f===!1&&this.isSynced&&(this.whenSynced=d()),this.isSynced=f===void 0||f===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=d()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Ce(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(gc(this.subdocs).map(t=>t.guid))}transact(t,e=null){return Ce(this,t,e)}get(t,e=Ln){const n=Bo(this.share,t,()=>{const o=new e;return o._integrate(this,null),o}),a=n.constructor;if(e!==Ln&&a!==e)if(a===Ln){const o=new e;o._map=n._map,n._map.forEach(c=>{for(;c!==null;c=c.left)c.parent=o}),o._start=n._start;for(let c=o._start;c!==null;c=c.right)c.parent=o;return o._length=n._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return n}getArray(t=""){return this.get(t,Ou)}getText(t=""){return this.get(t,Uh)}getMap(t=""){return this.get(t,zh)}getXmlElement(t=""){return this.get(t,Bh)}getXmlFragment(t=""){return this.get(t,yc)}toJSON(){const t={};return this.share.forEach((e,n)=>{t[n]=e.toJSON()}),t}destroy(){this.isDestroyed=!0,gc(this.subdocs).forEach(e=>e.destroy());const t=this._item;if(t!==null){this._item=null;const e=t.content;e.doc=new Zh({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Ce(t.parent.doc,n=>{const a=e.doc;t.deleted||n.subdocsAdded.add(a),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class UN{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return Ut(this.restDecoder)}readDsLen(){return Ut(this.restDecoder)}}class BN extends UN{readLeftID(){return Zt(Ut(this.restDecoder),Ut(this.restDecoder))}readRightID(){return Zt(Ut(this.restDecoder),Ut(this.restDecoder))}readClient(){return Ut(this.restDecoder)}readInfo(){return Fh(this.restDecoder)}readString(){return Du(this.restDecoder)}readParentInfo(){return Ut(this.restDecoder)===1}readTypeRef(){return Ut(this.restDecoder)}readLen(){return Ut(this.restDecoder)}readAny(){return Nf(this.restDecoder)}readBuf(){return qB(Ti(this.restDecoder))}readJSON(){return JSON.parse(Du(this.restDecoder))}readKey(){return Du(this.restDecoder)}}class lH{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ut(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Ut(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Ih extends lH{constructor(t){super(t),this.keys=[],Ut(t),this.keyClockDecoder=new rw(Ti(t)),this.clientDecoder=new by(Ti(t)),this.leftClockDecoder=new rw(Ti(t)),this.rightClockDecoder=new rw(Ti(t)),this.infoDecoder=new pk(Ti(t),Fh),this.stringDecoder=new _B(Ti(t)),this.parentInfoDecoder=new pk(Ti(t),Fh),this.typeRefDecoder=new by(Ti(t)),this.lenDecoder=new by(Ti(t))}readLeftID(){return new Lu(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Lu(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Nf(this.restDecoder)}readBuf(){return Ti(this.restDecoder)}readJSON(){return Nf(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class cH{constructor(){this.restEncoder=Qv()}toUint8Array(){return or(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){te(this.restEncoder,t)}writeDsLen(t){te(this.restEncoder,t)}}class wg extends cH{writeLeftID(t){te(this.restEncoder,t.client),te(this.restEncoder,t.clock)}writeRightID(t){te(this.restEncoder,t.client),te(this.restEncoder,t.clock)}writeClient(t){te(this.restEncoder,t)}writeInfo(t){Pw(this.restEncoder,t)}writeString(t){Mu(this.restEncoder,t)}writeParentInfo(t){te(this.restEncoder,t?1:0)}writeTypeRef(t){te(this.restEncoder,t)}writeLen(t){te(this.restEncoder,t)}writeAny(t){Rf(this.restEncoder,t)}writeBuf(t){Ci(this.restEncoder,t)}writeJSON(t){Mu(this.restEncoder,JSON.stringify(t))}writeKey(t){Mu(this.restEncoder,t)}}class uH{constructor(){this.restEncoder=Qv(),this.dsCurrVal=0}toUint8Array(){return or(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,te(this.restEncoder,e)}writeDsLen(t){t===0&&pr(),te(this.restEncoder,t-1),this.dsCurrVal+=t}}class mc extends uH{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new sw,this.clientEncoder=new vy,this.leftClockEncoder=new sw,this.rightClockEncoder=new sw,this.infoEncoder=new hk(Pw),this.stringEncoder=new pB,this.parentInfoEncoder=new hk(Pw),this.typeRefEncoder=new vy,this.lenEncoder=new vy}toUint8Array(){const t=Qv();return te(t,0),Ci(t,this.keyClockEncoder.toUint8Array()),Ci(t,this.clientEncoder.toUint8Array()),Ci(t,this.leftClockEncoder.toUint8Array()),Ci(t,this.rightClockEncoder.toUint8Array()),Ci(t,or(this.infoEncoder)),Ci(t,this.stringEncoder.toUint8Array()),Ci(t,or(this.parentInfoEncoder)),Ci(t,this.typeRefEncoder.toUint8Array()),Ci(t,this.lenEncoder.toUint8Array()),Zv(t,or(this.restEncoder)),or(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Rf(this.restEncoder,t)}writeBuf(t){Ci(this.restEncoder,t)}writeJSON(t){Rf(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);e===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const hH=(s,t,e,n)=>{n=Tc(n,t[0].id.clock);const a=gr(t,n);te(s.restEncoder,t.length-a),s.writeClient(e),te(s.restEncoder,n);const o=t[a];o.write(s,n-o.id.clock);for(let c=a+1;c<t.length;c++)t[c].write(s,0)},P_=(s,t,e)=>{const n=new Map;e.forEach((a,o)=>{yn(t,o)>a&&n.set(o,a)}),F_(t).forEach((a,o)=>{e.has(o)||n.set(o,0)}),te(s.restEncoder,n.size),gc(n.entries()).sort((a,o)=>o[0]-a[0]).forEach(([a,o])=>{hH(s,t.clients.get(a),a,o)})},dH=(s,t)=>{const e=Ds(),n=Ut(s.restDecoder);for(let a=0;a<n;a++){const o=Ut(s.restDecoder),c=new Array(o),u=s.readClient();let d=Ut(s.restDecoder);e.set(u,{i:0,refs:c});for(let f=0;f<o;f++){const g=s.readInfo();switch(Wv&g){case 0:{const y=s.readLen();c[f]=new rs(Zt(u,d),y),d+=y;break}case 10:{const y=Ut(s.restDecoder);c[f]=new as(Zt(u,d),y),d+=y;break}default:{const y=(g&(va|Ui))===0,b=new on(Zt(u,d),null,(g&Ui)===Ui?s.readLeftID():null,null,(g&va)===va?s.readRightID():null,y?s.readParentInfo()?t.get(s.readString()):s.readLeftID():null,y&&(g&Tf)===Tf?s.readString():null,dM(s,g));c[f]=b,d+=b.length}}}}return e},fH=(s,t,e)=>{const n=[];let a=gc(e.keys()).sort((w,A)=>w-A);if(a.length===0)return null;const o=()=>{if(a.length===0)return null;let w=e.get(a[a.length-1]);for(;w.refs.length===w.i;)if(a.pop(),a.length>0)w=e.get(a[a.length-1]);else return null;return w};let c=o();if(c===null)return null;const u=new GN,d=new Map,f=(w,A)=>{const S=d.get(w);(S==null||S>A)&&d.set(w,A)};let g=c.refs[c.i++];const y=new Map,b=()=>{for(const w of n){const A=w.id.client,S=e.get(A);S?(S.i--,u.clients.set(A,S.refs.slice(S.i)),e.delete(A),S.i=0,S.refs=[]):u.clients.set(A,[w]),a=a.filter(C=>C!==A)}n.length=0};for(;;){if(g.constructor!==as){const A=Bo(y,g.id.client,()=>yn(t,g.id.client))-g.id.clock;if(A<0)n.push(g),f(g.id.client,g.id.clock-1),b();else{const S=g.getMissing(s,t);if(S!==null){n.push(g);const C=e.get(S)||{refs:[],i:0};if(C.refs.length===C.i)f(S,yn(t,S)),b();else{g=C.refs[C.i++];continue}}else(A===0||A<g.length)&&(g.integrate(s,A),y.set(g.id.client,g.id.clock+g.length))}}if(n.length>0)g=n.pop();else if(c!==null&&c.i<c.refs.length)g=c.refs[c.i++];else{if(c=o(),c===null)break;g=c.refs[c.i++]}}if(u.clients.size>0){const w=new mc;return P_(w,u,new Map),te(w.restEncoder,0),{missing:d,update:w.toUint8Array()}}return null},pH=(s,t)=>P_(s,t.doc.store,t.beforeState),gH=(s,t,e,n=new Ih(s))=>Ce(t,a=>{a.local=!1;let o=!1;const c=a.doc,u=c.store,d=dH(n,c),f=fH(a,u,d),g=u.pendingStructs;if(g){for(const[b,w]of g.missing)if(w<yn(u,b)){o=!0;break}if(f){for(const[b,w]of f.missing){const A=g.missing.get(b);(A==null||A>w)&&g.missing.set(b,w)}g.update=iv([g.update,f.update])}}else u.pendingStructs=f;const y=vk(n,a,u);if(u.pendingDs){const b=new Ih(Wh(u.pendingDs));Ut(b.restDecoder);const w=vk(b,a,u);y&&w?u.pendingDs=iv([y,w]):u.pendingDs=y||w}else u.pendingDs=y;if(o){const b=u.pendingStructs.update;u.pendingStructs=null,HN(a.doc,b)}},e,!1),HN=(s,t,e,n=Ih)=>{const a=Wh(t);gH(a,s,e,new n(a))},mH=(s,t,e)=>HN(s,t,e,BN),yH=(s,t,e=new Map)=>{P_(s,t.store,e),Qh(s,oH(t.store))},vH=(s,t=new Uint8Array([0]),e=new mc)=>{const n=VN(t);yH(e,s,n);const a=[e.toUint8Array()];if(s.store.pendingDs&&a.push(s.store.pendingDs),s.store.pendingStructs&&a.push(MH(s.store.pendingStructs.update,t)),a.length>1){if(e.constructor===wg)return RH(a.map((o,c)=>c===0?o:LH(o)));if(e.constructor===mc)return iv(a)}return a[0]},bH=(s,t)=>vH(s,t,new wg),xH=s=>{const t=new Map,e=Ut(s.restDecoder);for(let n=0;n<e;n++){const a=Ut(s.restDecoder),o=Ut(s.restDecoder);t.set(a,o)}return t},VN=s=>xH(new UN(Wh(s)));class wH{constructor(){this.l=[]}}const bk=()=>new wH,xk=(s,t)=>s.l.push(t),wk=(s,t)=>{const e=s.l,n=e.length;s.l=e.filter(a=>t!==a),n===s.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},qN=(s,t,e)=>M_(s.l,[t,e]);class Lu{constructor(t,e){this.client=t,this.clock=e}}const ey=(s,t)=>s===t||s!==null&&t!==null&&s.client===t.client&&s.clock===t.clock,Zt=(s,t)=>new Lu(s,t),AH=s=>{for(const[t,e]of s.doc.share.entries())if(e===s)return t;throw pr()},wu=(s,t)=>t===void 0?!s.deleted:t.sv.has(s.id.client)&&(t.sv.get(s.id.client)||0)>s.id.clock&&!IN(t.ds,s.id),zw=(s,t)=>{const e=Bo(s.meta,zw,Ph),n=s.doc.store;e.has(t)||(t.sv.forEach((a,o)=>{a<yn(n,o)&&Po(s,Zt(o,a))}),FN(s,t.ds,a=>{}),e.add(t))};class GN{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const F_=s=>{const t=new Map;return s.clients.forEach((e,n)=>{const a=e[e.length-1];t.set(n,a.id.clock+a.length)}),t},yn=(s,t)=>{const e=s.clients.get(t);if(e===void 0)return 0;const n=e[e.length-1];return n.id.clock+n.length},$N=(s,t)=>{let e=s.clients.get(t.id.client);if(e===void 0)e=[],s.clients.set(t.id.client,e);else{const n=e[e.length-1];if(n.id.clock+n.length!==t.id.clock)throw pr()}e.push(t)},gr=(s,t)=>{let e=0,n=s.length-1,a=s[n],o=a.id.clock;if(o===t)return n;let c=Oo(t/(o+a.length-1)*n);for(;e<=n;){if(a=s[c],o=a.id.clock,o<=t){if(t<o+a.length)return c;e=c+1}else n=c-1;c=Oo((e+n)/2)}throw pr()},_H=(s,t)=>{const e=s.clients.get(t.client);return e[gr(e,t.clock)]},ow=_H,Uw=(s,t,e)=>{const n=gr(t,e),a=t[n];return a.id.clock<e&&a instanceof on?(t.splice(n+1,0,cv(s,a,e-a.id.clock)),n+1):n},Po=(s,t)=>{const e=s.doc.store.clients.get(t.client);return e[Uw(s,e,t.clock)]},Ak=(s,t,e)=>{const n=t.clients.get(e.client),a=gr(n,e.clock),o=n[a];return e.clock!==o.id.clock+o.length-1&&o.constructor!==rs&&n.splice(a+1,0,cv(s,o,e.clock-o.id.clock+1)),o},SH=(s,t,e)=>{const n=s.clients.get(t.id.client);n[gr(n,t.id.clock)]=e},XN=(s,t,e,n,a)=>{if(n===0)return;const o=e+n;let c=Uw(s,t,e),u;do u=t[c++],o<u.id.clock+u.length&&Uw(s,t,o),a(u);while(c<t.length&&t[c].id.clock<o)};class EH{constructor(t,e,n){this.doc=t,this.deleteSet=new xg,this.beforeState=F_(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const _k=(s,t)=>t.deleteSet.clients.size===0&&!$U(t.afterState,(e,n)=>t.beforeState.get(n)!==e)?!1:(O_(t.deleteSet),pH(s,t),Qh(s,t.deleteSet),!0),Sk=(s,t,e)=>{const n=t._item;(n===null||n.id.clock<(s.beforeState.get(n.id.client)||0)&&!n.deleted)&&Bo(s.changed,t,Ph).add(e)},xy=(s,t)=>{let e=s[t],n=s[t-1],a=t;for(;a>0;e=n,n=s[--a-1]){if(n.deleted===e.deleted&&n.constructor===e.constructor&&n.mergeWith(e)){e instanceof on&&e.parentSub!==null&&e.parent._map.get(e.parentSub)===e&&e.parent._map.set(e.parentSub,n);continue}break}const o=t-a;return o&&s.splice(t+1-o,o),o},CH=(s,t,e)=>{for(const[n,a]of s.clients.entries()){const o=t.clients.get(n);for(let c=a.length-1;c>=0;c--){const u=a[c],d=u.clock+u.len;for(let f=gr(o,u.clock),g=o[f];f<o.length&&g.id.clock<d;g=o[++f]){const y=o[f];if(u.clock+u.len<=y.id.clock)break;y instanceof on&&y.deleted&&!y.keep&&e(y)&&y.gc(t,!1)}}}},TH=(s,t)=>{s.clients.forEach((e,n)=>{const a=t.clients.get(n);for(let o=e.length-1;o>=0;o--){const c=e[o],u=wN(a.length-1,1+gr(a,c.clock+c.len-1));for(let d=u,f=a[d];d>0&&f.id.clock>=c.clock;f=a[d])d-=1+xy(a,d)}})},YN=(s,t)=>{if(t<s.length){const e=s[t],n=e.doc,a=n.store,o=e.deleteSet,c=e._mergeStructs;try{O_(o),e.afterState=F_(e.doc.store),n.emit("beforeObserverCalls",[e,n]);const u=[];e.changed.forEach((d,f)=>u.push(()=>{(f._item===null||!f._item.deleted)&&f._callObserver(e,d)})),u.push(()=>{e.changedParentTypes.forEach((d,f)=>{f._dEH.l.length>0&&(f._item===null||!f._item.deleted)&&(d=d.filter(g=>g.target._item===null||!g.target._item.deleted),d.forEach(g=>{g.currentTarget=f,g._path=null}),d.sort((g,y)=>g.path.length-y.path.length),qN(f._dEH,d,e))})}),u.push(()=>n.emit("afterTransaction",[e,n])),M_(u,[]),e._needFormattingCleanup&&XH(e)}finally{n.gc&&CH(o,a,n.gcFilter),TH(o,a),e.afterState.forEach((g,y)=>{const b=e.beforeState.get(y)||0;if(b!==g){const w=a.clients.get(y),A=Tc(gr(w,b),1);for(let S=w.length-1;S>=A;)S-=1+xy(w,S)}});for(let g=c.length-1;g>=0;g--){const{client:y,clock:b}=c[g].id,w=a.clients.get(y),A=gr(w,b);A+1<w.length&&xy(w,A+1)>1||A>0&&xy(w,A)}if(!e.local&&e.afterState.get(n.clientID)!==e.beforeState.get(n.clientID)&&(eH(D_,MN,"[yjs] ",DN,LN,"Changed the client-id because another client seems to be using it."),n.clientID=zN()),n.emit("afterTransactionCleanup",[e,n]),n._observers.has("update")){const g=new wg;_k(g,e)&&n.emit("update",[g.toUint8Array(),e.origin,n,e])}if(n._observers.has("updateV2")){const g=new mc;_k(g,e)&&n.emit("updateV2",[g.toUint8Array(),e.origin,n,e])}const{subdocsAdded:u,subdocsLoaded:d,subdocsRemoved:f}=e;(u.size>0||f.size>0||d.size>0)&&(u.forEach(g=>{g.clientID=n.clientID,g.collectionid==null&&(g.collectionid=n.collectionid),n.subdocs.add(g)}),f.forEach(g=>n.subdocs.delete(g)),n.emit("subdocs",[{loaded:d,added:u,removed:f},n,e]),f.forEach(g=>g.destroy())),s.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,s])):YN(s,t+1)}}},Ce=(s,t,e=null,n=!0)=>{const a=s._transactionCleanups;let o=!1,c=null;s._transaction===null&&(o=!0,s._transaction=new EH(s,e,n),a.push(s._transaction),a.length===1&&s.emit("beforeAllTransactions",[s]),s.emit("beforeTransaction",[s._transaction,s]));try{c=t(s._transaction)}finally{if(o){const u=s._transaction===a[0];s._transaction=null,u&&YN(a,0)}}return c};function*kH(s){const t=Ut(s.restDecoder);for(let e=0;e<t;e++){const n=Ut(s.restDecoder),a=s.readClient();let o=Ut(s.restDecoder);for(let c=0;c<n;c++){const u=s.readInfo();if(u===10){const d=Ut(s.restDecoder);yield new as(Zt(a,o),d),o+=d}else if((Wv&u)!==0){const d=(u&(va|Ui))===0,f=new on(Zt(a,o),null,(u&Ui)===Ui?s.readLeftID():null,null,(u&va)===va?s.readRightID():null,d?s.readParentInfo()?s.readString():s.readLeftID():null,d&&(u&Tf)===Tf?s.readString():null,dM(s,u));yield f,o+=f.length}else{const d=s.readLen();yield new rs(Zt(a,o),d),o+=d}}}}class I_{constructor(t,e){this.gen=kH(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===as);return this.curr}}class z_{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const RH=s=>iv(s,BN,wg),NH=(s,t)=>{if(s.constructor===rs){const{client:e,clock:n}=s.id;return new rs(Zt(e,n+t),s.length-t)}else if(s.constructor===as){const{client:e,clock:n}=s.id;return new as(Zt(e,n+t),s.length-t)}else{const e=s,{client:n,clock:a}=e.id;return new on(Zt(n,a+t),null,Zt(n,a+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},iv=(s,t=Ih,e=mc)=>{if(s.length===1)return s[0];const n=s.map(g=>new t(Wh(g)));let a=n.map(g=>new I_(g,!0)),o=null;const c=new e,u=new z_(c);for(;a=a.filter(b=>b.curr!==null),a.sort((b,w)=>{if(b.curr.id.client===w.curr.id.client){const A=b.curr.id.clock-w.curr.id.clock;return A===0?b.curr.constructor===w.curr.constructor?0:b.curr.constructor===as?1:-1:A}else return w.curr.id.client-b.curr.id.client}),a.length!==0;){const g=a[0],y=g.curr.id.client;if(o!==null){let b=g.curr,w=!1;for(;b!==null&&b.id.clock+b.length<=o.struct.id.clock+o.struct.length&&b.id.client>=o.struct.id.client;)b=g.next(),w=!0;if(b===null||b.id.client!==y||w&&b.id.clock>o.struct.id.clock+o.struct.length)continue;if(y!==o.struct.id.client)ao(u,o.struct,o.offset),o={struct:b,offset:0},g.next();else if(o.struct.id.clock+o.struct.length<b.id.clock)if(o.struct.constructor===as)o.struct.length=b.id.clock+b.length-o.struct.id.clock;else{ao(u,o.struct,o.offset);const A=b.id.clock-o.struct.id.clock-o.struct.length;o={struct:new as(Zt(y,o.struct.id.clock+o.struct.length),A),offset:0}}else{const A=o.struct.id.clock+o.struct.length-b.id.clock;A>0&&(o.struct.constructor===as?o.struct.length-=A:b=NH(b,A)),o.struct.mergeWith(b)||(ao(u,o.struct,o.offset),o={struct:b,offset:0},g.next())}}else o={struct:g.curr,offset:0},g.next();for(let b=g.curr;b!==null&&b.id.client===y&&b.id.clock===o.struct.id.clock+o.struct.length&&b.constructor!==as;b=g.next())ao(u,o.struct,o.offset),o={struct:b,offset:0}}o!==null&&(ao(u,o.struct,o.offset),o=null),U_(u);const d=n.map(g=>j_(g)),f=rH(d);return Qh(c,f),c.toUint8Array()},MH=(s,t,e=Ih,n=mc)=>{const a=VN(t),o=new n,c=new z_(o),u=new e(Wh(s)),d=new I_(u,!1);for(;d.curr;){const g=d.curr,y=g.id.client,b=a.get(y)||0;if(d.curr.constructor===as){d.next();continue}if(g.id.clock+g.length>b)for(ao(c,g,Tc(b-g.id.clock,0)),d.next();d.curr&&d.curr.id.client===y;)ao(c,d.curr,0),d.next();else for(;d.curr&&d.curr.id.client===y&&d.curr.id.clock+d.curr.length<=b;)d.next()}U_(c);const f=j_(u);return Qh(o,f),o.toUint8Array()},KN=s=>{s.written>0&&(s.clientStructs.push({written:s.written,restEncoder:or(s.encoder.restEncoder)}),s.encoder.restEncoder=Qv(),s.written=0)},ao=(s,t,e)=>{s.written>0&&s.currClient!==t.id.client&&KN(s),s.written===0&&(s.currClient=t.id.client,s.encoder.writeClient(t.id.client),te(s.encoder.restEncoder,t.id.clock+e)),t.write(s.encoder,e),s.written++},U_=s=>{KN(s);const t=s.encoder.restEncoder;te(t,s.clientStructs.length);for(let e=0;e<s.clientStructs.length;e++){const n=s.clientStructs[e];te(t,n.written),Zv(t,n.restEncoder)}},DH=(s,t,e,n)=>{const a=new e(Wh(s)),o=new I_(a,!1),c=new n,u=new z_(c);for(let f=o.curr;f!==null;f=o.next())ao(u,t(f),0);U_(u);const d=j_(a);return Qh(c,d),c.toUint8Array()},LH=s=>DH(s,IB,Ih,wg),Ek="You must not compute changes after the event-handler fired.";class tb{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=OH(this.currentTarget,this.target))}deletes(t){return IN(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw jo(Ek);const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(a=>{if(a!==null){const o=e._map.get(a);let c,u;if(this.adds(o)){let d=o.left;for(;d!==null&&this.adds(d);)d=d.left;if(this.deletes(o))if(d!==null&&this.deletes(d))c="delete",u=ew(d.content.getContent());else return;else d!==null&&this.deletes(d)?(c="update",u=ew(d.content.getContent())):(c="add",u=void 0)}else if(this.deletes(o))c="delete",u=ew(o.content.getContent());else return;t.set(a,{action:c,oldValue:u})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw jo(Ek);const e=this.target,n=Ph(),a=Ph(),o=[];if(t={added:n,deleted:a,delta:o,keys:this.keys},this.transaction.changed.get(e).has(null)){let u=null;const d=()=>{u&&o.push(u)};for(let f=e._start;f!==null;f=f.right)f.deleted?this.deletes(f)&&!this.adds(f)&&((u===null||u.delete===void 0)&&(d(),u={delete:0}),u.delete+=f.length,a.add(f)):this.adds(f)?((u===null||u.insert===void 0)&&(d(),u={insert:[]}),u.insert=u.insert.concat(f.content.getContent()),n.add(f)):((u===null||u.retain===void 0)&&(d(),u={retain:0}),u.retain+=f.length);u!==null&&u.retain===void 0&&d()}this._changes=t}return t}}const OH=(s,t)=>{const e=[];for(;t._item!==null&&t!==s;){if(t._item.parentSub!==null)e.unshift(t._item.parentSub);else{let n=0,a=t._item.parent._start;for(;a!==t._item&&a!==null;)!a.deleted&&a.countable&&(n+=a.length),a=a.right;e.unshift(n)}t=t._item.parent}return e},Hn=()=>{nH("Invalid access: Add Yjs type to a document before reading data.")},WN=80;let B_=0;class jH{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=B_++}}const PH=s=>{s.timestamp=B_++},QN=(s,t,e)=>{s.p.marker=!1,s.p=t,t.marker=!0,s.index=e,s.timestamp=B_++},FH=(s,t,e)=>{if(s.length>=WN){const n=s.reduce((a,o)=>a.timestamp<o.timestamp?a:o);return QN(n,t,e),n}else{const n=new jH(t,e);return s.push(n),n}},eb=(s,t)=>{if(s._start===null||t===0||s._searchMarker===null)return null;const e=s._searchMarker.length===0?null:s._searchMarker.reduce((o,c)=>yy(t-o.index)<yy(t-c.index)?o:c);let n=s._start,a=0;for(e!==null&&(n=e.p,a=e.index,PH(e));n.right!==null&&a<t;){if(!n.deleted&&n.countable){if(t<a+n.length)break;a+=n.length}n=n.right}for(;n.left!==null&&a>t;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);return e!==null&&yy(e.index-a)<n.parent.length/WN?(QN(e,n,a),e):FH(s._searchMarker,n,a)},Df=(s,t,e)=>{for(let n=s.length-1;n>=0;n--){const a=s[n];if(e>0){let o=a.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(a.index-=o.length);if(o===null||o.marker===!0){s.splice(n,1);continue}a.p=o,o.marker=!0}(t<a.index||e>0&&t===a.index)&&(a.index=Tc(t,a.index+e))}},nb=(s,t,e)=>{const n=s,a=t.changedParentTypes;for(;Bo(a,s,()=>[]).push(e),s._item!==null;)s=s._item.parent;qN(n._eH,e,t)};class Ln{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=bk(),this._dEH=bk(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw cr()}clone(){throw cr()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){xk(this._eH,t)}observeDeep(t){xk(this._dEH,t)}unobserve(t){wk(this._eH,t)}unobserveDeep(t){wk(this._dEH,t)}toJSON(){}}const ZN=(s,t,e)=>{s.doc??Hn(),t<0&&(t=s._length+t),e<0&&(e=s._length+e);let n=e-t;const a=[];let o=s._start;for(;o!==null&&n>0;){if(o.countable&&!o.deleted){const c=o.content.getContent();if(c.length<=t)t-=c.length;else{for(let u=t;u<c.length&&n>0;u++)a.push(c[u]),n--;t=0}}o=o.right}return a},JN=s=>{s.doc??Hn();const t=[];let e=s._start;for(;e!==null;){if(e.countable&&!e.deleted){const n=e.content.getContent();for(let a=0;a<n.length;a++)t.push(n[a])}e=e.right}return t},Lf=(s,t)=>{let e=0,n=s._start;for(s.doc??Hn();n!==null;){if(n.countable&&!n.deleted){const a=n.content.getContent();for(let o=0;o<a.length;o++)t(a[o],e++,s)}n=n.right}},tM=(s,t)=>{const e=[];return Lf(s,(n,a)=>{e.push(t(n,a,s))}),e},IH=s=>{let t=s._start,e=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(e===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};e=t.content.getContent(),n=0,t=t.right}const a=e[n++];return e.length<=n&&(e=null),{done:!1,value:a}}}},eM=(s,t)=>{s.doc??Hn();const e=eb(s,t);let n=s._start;for(e!==null&&(n=e.p,t-=e.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},sv=(s,t,e,n)=>{let a=e;const o=s.doc,c=o.clientID,u=o.store,d=e===null?t._start:e.right;let f=[];const g=()=>{f.length>0&&(a=new on(Zt(c,yn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new vc(f)),a.integrate(s,0),f=[])};n.forEach(y=>{if(y===null)f.push(y);else switch(y.constructor){case Number:case Object:case Boolean:case Array:case String:f.push(y);break;default:switch(g(),y.constructor){case Uint8Array:case ArrayBuffer:a=new on(Zt(c,yn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new Ag(new Uint8Array(y))),a.integrate(s,0);break;case Zh:a=new on(Zt(c,yn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new _g(y)),a.integrate(s,0);break;default:if(y instanceof Ln)a=new on(Zt(c,yn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new ka(y)),a.integrate(s,0);else throw new Error("Unexpected content type in insert operation")}}}),g()},nM=()=>jo("Length exceeded!"),iM=(s,t,e,n)=>{if(e>t._length)throw nM();if(e===0)return t._searchMarker&&Df(t._searchMarker,e,n.length),sv(s,t,null,n);const a=e,o=eb(t,e);let c=t._start;for(o!==null&&(c=o.p,e-=o.index,e===0&&(c=c.prev,e+=c&&c.countable&&!c.deleted?c.length:0));c!==null;c=c.right)if(!c.deleted&&c.countable){if(e<=c.length){e<c.length&&Po(s,Zt(c.id.client,c.id.clock+e));break}e-=c.length}return t._searchMarker&&Df(t._searchMarker,a,n.length),sv(s,t,c,n)},zH=(s,t,e)=>{let a=(t._searchMarker||[]).reduce((o,c)=>c.index>o.index?c:o,{index:0,p:t._start}).p;if(a)for(;a.right;)a=a.right;return sv(s,t,a,e)},sM=(s,t,e,n)=>{if(n===0)return;const a=e,o=n,c=eb(t,e);let u=t._start;for(c!==null&&(u=c.p,e-=c.index);u!==null&&e>0;u=u.right)!u.deleted&&u.countable&&(e<u.length&&Po(s,Zt(u.id.client,u.id.clock+e)),e-=u.length);for(;n>0&&u!==null;)u.deleted||(n<u.length&&Po(s,Zt(u.id.client,u.id.clock+n)),u.delete(s),n-=u.length),u=u.right;if(n>0)throw nM();t._searchMarker&&Df(t._searchMarker,a,-o+n)},rv=(s,t,e)=>{const n=t._map.get(e);n!==void 0&&n.delete(s)},H_=(s,t,e,n)=>{const a=t._map.get(e)||null,o=s.doc,c=o.clientID;let u;if(n==null)u=new vc([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:u=new vc([n]);break;case Uint8Array:u=new Ag(n);break;case Zh:u=new _g(n);break;default:if(n instanceof Ln)u=new ka(n);else throw new Error("Unexpected content type")}new on(Zt(c,yn(o.store,c)),a,a&&a.lastId,null,null,t,e,u).integrate(s,0)},V_=(s,t)=>{s.doc??Hn();const e=s._map.get(t);return e!==void 0&&!e.deleted?e.content.getContent()[e.length-1]:void 0},rM=s=>{const t={};return s.doc??Hn(),s._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},aM=(s,t)=>{s.doc??Hn();const e=s._map.get(t);return e!==void 0&&!e.deleted},UH=(s,t)=>{const e={};return s._map.forEach((n,a)=>{let o=n;for(;o!==null&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;o!==null&&wu(o,t)&&(e[a]=o.content.getContent()[o.length-1])}),e},ny=s=>(s.doc??Hn(),iH(s._map.entries(),t=>!t[1].deleted));class BH extends tb{}class Ou extends Ln{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Ou;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ou}clone(){const t=new Ou;return t.insert(0,this.toArray().map(e=>e instanceof Ln?e.clone():e)),t}get length(){return this.doc??Hn(),this._length}_callObserver(t,e){super._callObserver(t,e),nb(this,t,new BH(this,t))}insert(t,e){this.doc!==null?Ce(this.doc,n=>{iM(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.doc!==null?Ce(this.doc,e=>{zH(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){this.doc!==null?Ce(this.doc,n=>{sM(n,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return eM(this,t)}toArray(){return JN(this)}slice(t=0,e=this.length){return ZN(this,t,e)}toJSON(){return this.map(t=>t instanceof Ln?t.toJSON():t)}map(t){return tM(this,t)}forEach(t){Lf(this,t)}[Symbol.iterator](){return IH(this)}_write(t){t.writeTypeRef(d6)}}const HH=s=>new Ou;class VH extends tb{constructor(t,e,n){super(t,e),this.keysChanged=n}}class zh extends Ln{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((n,a)=>{this.set(a,n)}),this._prelimContent=null}_copy(){return new zh}clone(){const t=new zh;return this.forEach((e,n)=>{t.set(n,e instanceof Ln?e.clone():e)}),t}_callObserver(t,e){nb(this,t,new VH(this,t,e))}toJSON(){this.doc??Hn();const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const a=e.content.getContent()[e.length-1];t[n]=a instanceof Ln?a.toJSON():a}}),t}get size(){return[...ny(this)].length}keys(){return aw(ny(this),t=>t[0])}values(){return aw(ny(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return aw(ny(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??Hn(),this._map.forEach((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Ce(this.doc,e=>{rv(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return this.doc!==null?Ce(this.doc,n=>{H_(n,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return V_(this,t)}has(t){return aM(this,t)}clear(){this.doc!==null?Ce(this.doc,t=>{this.forEach(function(e,n,a){rv(t,a,n)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(f6)}}const qH=s=>new zh,No=(s,t)=>s===t||typeof s=="object"&&typeof t=="object"&&s&&t&&PB(s,t);class Bw{constructor(t,e,n,a){this.left=t,this.right=e,this.index=n,this.currentAttributes=a}forward(){switch(this.right===null&&pr(),this.right.content.constructor){case ln:this.right.deleted||Jh(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Ck=(s,t,e)=>{for(;t.right!==null&&e>0;){switch(t.right.content.constructor){case ln:t.right.deleted||Jh(t.currentAttributes,t.right.content);break;default:t.right.deleted||(e<t.right.length&&Po(s,Zt(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},iy=(s,t,e,n)=>{const a=new Map,o=n?eb(t,e):null;if(o){const c=new Bw(o.p.left,o.p,o.index,a);return Ck(s,c,e-o.index)}else{const c=new Bw(null,t._start,0,a);return Ck(s,c,e)}},oM=(s,t,e,n)=>{for(;e.right!==null&&(e.right.deleted===!0||e.right.content.constructor===ln&&No(n.get(e.right.content.key),e.right.content.value));)e.right.deleted||n.delete(e.right.content.key),e.forward();const a=s.doc,o=a.clientID;n.forEach((c,u)=>{const d=e.left,f=e.right,g=new on(Zt(o,yn(a.store,o)),d,d&&d.lastId,f,f&&f.id,t,null,new ln(u,c));g.integrate(s,0),e.right=g,e.forward()})},Jh=(s,t)=>{const{key:e,value:n}=t;n===null?s.delete(e):s.set(e,n)},lM=(s,t)=>{for(;s.right!==null;){if(!(s.right.deleted||s.right.content.constructor===ln&&No(t[s.right.content.key]??null,s.right.content.value)))break;s.forward()}},cM=(s,t,e,n)=>{const a=s.doc,o=a.clientID,c=new Map;for(const u in n){const d=n[u],f=e.currentAttributes.get(u)??null;if(!No(f,d)){c.set(u,f);const{left:g,right:y}=e;e.right=new on(Zt(o,yn(a.store,o)),g,g&&g.lastId,y,y&&y.id,t,null,new ln(u,d)),e.right.integrate(s,0),e.forward()}}return c},lw=(s,t,e,n,a)=>{e.currentAttributes.forEach((b,w)=>{a[w]===void 0&&(a[w]=null)});const o=s.doc,c=o.clientID;lM(e,a);const u=cM(s,t,e,a),d=n.constructor===String?new mr(n):n instanceof Ln?new ka(n):new kc(n);let{left:f,right:g,index:y}=e;t._searchMarker&&Df(t._searchMarker,e.index,d.getLength()),g=new on(Zt(c,yn(o.store,c)),f,f&&f.lastId,g,g&&g.id,t,null,d),g.integrate(s,0),e.right=g,e.index=y,e.forward(),oM(s,t,e,u)},Tk=(s,t,e,n,a)=>{const o=s.doc,c=o.clientID;lM(e,a);const u=cM(s,t,e,a);t:for(;e.right!==null&&(n>0||u.size>0&&(e.right.deleted||e.right.content.constructor===ln));){if(!e.right.deleted)switch(e.right.content.constructor){case ln:{const{key:d,value:f}=e.right.content,g=a[d];if(g!==void 0){if(No(g,f))u.delete(d);else{if(n===0)break t;u.set(d,f)}e.right.delete(s)}else e.currentAttributes.set(d,f);break}default:n<e.right.length&&Po(s,Zt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length;break}e.forward()}if(n>0){let d="";for(;n>0;n--)d+=`
`;e.right=new on(Zt(c,yn(o.store,c)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new mr(d)),e.right.integrate(s,0),e.forward()}oM(s,t,e,u)},uM=(s,t,e,n,a)=>{let o=t;const c=Ds();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===ln){const f=o.content;c.set(f.key,f)}o=o.right}let u=0,d=!1;for(;t!==o;){if(e===t&&(d=!0),!t.deleted){const f=t.content;switch(f.constructor){case ln:{const{key:g,value:y}=f,b=n.get(g)??null;(c.get(g)!==f||b===y)&&(t.delete(s),u++,!d&&(a.get(g)??null)===y&&b!==y&&(b===null?a.delete(g):a.set(g,b))),!d&&!t.deleted&&Jh(a,f);break}}}t=t.right}return u},GH=(s,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===ln){const n=t.content.key;e.has(n)?t.delete(s):e.add(n)}t=t.left}},$H=s=>{let t=0;return Ce(s.doc,e=>{let n=s._start,a=s._start,o=Ds();const c=Ow(o);for(;a;){if(a.deleted===!1)switch(a.content.constructor){case ln:Jh(c,a.content);break;default:t+=uM(e,n,a,o,c),o=Ow(c),n=a;break}a=a.right}}),t},XH=s=>{const t=new Set,e=s.doc;for(const[n,a]of s.afterState.entries()){const o=s.beforeState.get(n)||0;a!==o&&XN(s,e.store.clients.get(n),o,a,c=>{!c.deleted&&c.content.constructor===ln&&c.constructor!==rs&&t.add(c.parent)})}Ce(e,n=>{FN(s,s.deleteSet,a=>{if(a instanceof rs||!a.parent._hasFormatting||t.has(a.parent))return;const o=a.parent;a.content.constructor===ln?t.add(o):GH(n,a)});for(const a of t)$H(a)})},kk=(s,t,e)=>{const n=e,a=Ow(t.currentAttributes),o=t.right;for(;e>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case ka:case kc:case mr:e<t.right.length&&Po(s,Zt(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(s);break}t.forward()}o&&uM(s,o,t.right,a,t.currentAttributes);const c=(t.left||t.right).parent;return c._searchMarker&&Df(c._searchMarker,t.index,-n+e),t};class YH extends tb{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(a=>{a===null?this.childListChanged=!0:this.keysChanged.add(a)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,e=[];Ce(t,n=>{const a=new Map,o=new Map;let c=this.target._start,u=null;const d={};let f="",g=0,y=0;const b=()=>{if(u!==null){let w=null;switch(u){case"delete":y>0&&(w={delete:y}),y=0;break;case"insert":(typeof f=="object"||f.length>0)&&(w={insert:f},a.size>0&&(w.attributes={},a.forEach((A,S)=>{A!==null&&(w.attributes[S]=A)}))),f="";break;case"retain":g>0&&(w={retain:g},LB(d)||(w.attributes=NB({},d))),g=0;break}w&&e.push(w),u=null}};for(;c!==null;){switch(c.content.constructor){case ka:case kc:this.adds(c)?this.deletes(c)||(b(),u="insert",f=c.content.getContent()[0],b()):this.deletes(c)?(u!=="delete"&&(b(),u="delete"),y+=1):c.deleted||(u!=="retain"&&(b(),u="retain"),g+=1);break;case mr:this.adds(c)?this.deletes(c)||(u!=="insert"&&(b(),u="insert"),f+=c.content.str):this.deletes(c)?(u!=="delete"&&(b(),u="delete"),y+=c.length):c.deleted||(u!=="retain"&&(b(),u="retain"),g+=c.length);break;case ln:{const{key:w,value:A}=c.content;if(this.adds(c)){if(!this.deletes(c)){const S=a.get(w)??null;No(S,A)?A!==null&&c.delete(n):(u==="retain"&&b(),No(A,o.get(w)??null)?delete d[w]:d[w]=A)}}else if(this.deletes(c)){o.set(w,A);const S=a.get(w)??null;No(S,A)||(u==="retain"&&b(),d[w]=S)}else if(!c.deleted){o.set(w,A);const S=d[w];S!==void 0&&(No(S,A)?S!==null&&c.delete(n):(u==="retain"&&b(),A===null?delete d[w]:d[w]=A))}c.deleted||(u==="insert"&&b(),Jh(a,c.content));break}}c=c.right}for(b();e.length>0;){const w=e[e.length-1];if(w.retain!==void 0&&w.attributes===void 0)e.pop();else break}}),this._delta=e}return this._delta}}class Uh extends Ln{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Hn(),this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new Uh}clone(){const t=new Uh;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new YH(this,t,e);nb(this,t,n),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??Hn();let t="",e=this._start;for(;e!==null;)!e.deleted&&e.countable&&e.content.constructor===mr&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){this.doc!==null?Ce(this.doc,n=>{const a=new Bw(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const c=t[o];if(c.insert!==void 0){const u=!e&&typeof c.insert=="string"&&o===t.length-1&&a.right===null&&c.insert.slice(-1)===`
`?c.insert.slice(0,-1):c.insert;(typeof u!="string"||u.length>0)&&lw(n,this,a,u,c.attributes||{})}else c.retain!==void 0?Tk(n,this,a,c.retain,c.attributes||{}):c.delete!==void 0&&kk(n,a,c.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,n){this.doc??Hn();const a=[],o=new Map,c=this.doc;let u="",d=this._start;function f(){if(u.length>0){const y={};let b=!1;o.forEach((A,S)=>{b=!0,y[S]=A});const w={insert:u};b&&(w.attributes=y),a.push(w),u=""}}const g=()=>{for(;d!==null;){if(wu(d,t)||e!==void 0&&wu(d,e))switch(d.content.constructor){case mr:{const y=o.get("ychange");t!==void 0&&!wu(d,t)?(y===void 0||y.user!==d.id.client||y.type!=="removed")&&(f(),o.set("ychange",n?n("removed",d.id):{type:"removed"})):e!==void 0&&!wu(d,e)?(y===void 0||y.user!==d.id.client||y.type!=="added")&&(f(),o.set("ychange",n?n("added",d.id):{type:"added"})):y!==void 0&&(f(),o.delete("ychange")),u+=d.content.str;break}case ka:case kc:{f();const y={insert:d.content.getContent()[0]};if(o.size>0){const b={};y.attributes=b,o.forEach((w,A)=>{b[A]=w})}a.push(y);break}case ln:wu(d,t)&&(f(),Jh(o,d.content));break}d=d.right}f()};return t||e?Ce(c,y=>{t&&zw(y,t),e&&zw(y,e),g()},"cleanup"):g(),a}insert(t,e,n){if(e.length<=0)return;const a=this.doc;a!==null?Ce(a,o=>{const c=iy(o,this,t,!n);n||(n={},c.currentAttributes.forEach((u,d)=>{n[d]=u})),lw(o,this,c,e,n)}):this._pending.push(()=>this.insert(t,e,n))}insertEmbed(t,e,n){const a=this.doc;a!==null?Ce(a,o=>{const c=iy(o,this,t,!n);lw(o,this,c,e,n||{})}):this._pending.push(()=>this.insertEmbed(t,e,n||{}))}delete(t,e){if(e===0)return;const n=this.doc;n!==null?Ce(n,a=>{kk(a,iy(a,this,t,!0),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,n){if(e===0)return;const a=this.doc;a!==null?Ce(a,o=>{const c=iy(o,this,t,!1);c.right!==null&&Tk(o,this,c,e,n)}):this._pending.push(()=>this.format(t,e,n))}removeAttribute(t){this.doc!==null?Ce(this.doc,e=>{rv(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){this.doc!==null?Ce(this.doc,n=>{H_(n,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return V_(this,t)}getAttributes(){return rM(this)}_write(t){t.writeTypeRef(p6)}}const KH=s=>new Uh;class cw{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??Hn()}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(e)))do if(e=t.content.type,!t.deleted&&(e.constructor===Bh||e.constructor===yc)&&e._start!==null)t=e._start;else for(;t!==null;){const n=t.next;if(n!==null){t=n;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class yc extends Ln{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new yc}clone(){const t=new yc;return t.insert(0,this.toArray().map(e=>e instanceof Ln?e.clone():e)),t}get length(){return this.doc??Hn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new cw(this,t)}querySelector(t){t=t.toUpperCase();const n=new cw(this,a=>a.nodeName&&a.nodeName.toUpperCase()===t).next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),gc(new cw(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){nb(this,t,new ZH(this,e,t))}toString(){return tM(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const a=t.createDocumentFragment();return n!==void 0&&n._createAssociation(a,this),Lf(this,o=>{a.insertBefore(o.toDOM(t,e,n),null)}),a}insert(t,e){this.doc!==null?Ce(this.doc,n=>{iM(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(this.doc!==null)Ce(this.doc,n=>{const a=t&&t instanceof Ln?t._item:t;sv(n,this,a,e)});else{const n=this._prelimContent,a=t===null?0:n.findIndex(o=>o===t)+1;if(a===0&&t!==null)throw jo("Reference item not found");n.splice(a,0,...e)}}delete(t,e=1){this.doc!==null?Ce(this.doc,n=>{sM(n,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return JN(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return eM(this,t)}slice(t=0,e=this.length){return ZN(this,t,e)}forEach(t){Lf(this,t)}_write(t){t.writeTypeRef(m6)}}const WH=s=>new yc;class Bh extends yc{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((n,a)=>{this.setAttribute(a,n)}),this._prelimAttrs=null}_copy(){return new Bh(this.nodeName)}clone(){const t=new Bh(this.nodeName),e=this.getAttributes();return DB(e,(n,a)=>{typeof n=="string"&&t.setAttribute(a,n)}),t.insert(0,this.toArray().map(n=>n instanceof Ln?n.clone():n)),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const u in t)n.push(u);n.sort();const a=n.length;for(let u=0;u<a;u++){const d=n[u];e.push(d+'="'+t[d]+'"')}const o=this.nodeName.toLocaleLowerCase(),c=e.length>0?" "+e.join(" "):"";return`<${o}${c}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Ce(this.doc,e=>{rv(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){this.doc!==null?Ce(this.doc,n=>{H_(n,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return V_(this,t)}hasAttribute(t){return aM(this,t)}getAttributes(t){return t?UH(this,t):rM(this)}toDOM(t=document,e={},n){const a=t.createElement(this.nodeName),o=this.getAttributes();for(const c in o){const u=o[c];typeof u=="string"&&a.setAttribute(c,u)}return Lf(this,c=>{a.appendChild(c.toDOM(t,e,n))}),n!==void 0&&n._createAssociation(a,this),a}_write(t){t.writeTypeRef(g6),t.writeKey(this.nodeName)}}const QH=s=>new Bh(s.readKey());class ZH extends tb{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(a=>{a===null?this.childListChanged=!0:this.attributesChanged.add(a)})}}class av extends zh{constructor(t){super(),this.hookName=t}_copy(){return new av(this.hookName)}clone(){const t=new av(this.hookName);return this.forEach((e,n)=>{t.set(n,e)}),t}toDOM(t=document,e={},n){const a=e[this.hookName];let o;return a!==void 0?o=a.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(o,this),o}_write(t){t.writeTypeRef(y6),t.writeKey(this.hookName)}}const JH=s=>new av(s.readKey());class ov extends Uh{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new ov}clone(){const t=new ov;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const a=t.createTextNode(this.toString());return n!==void 0&&n._createAssociation(a,this),a}toString(){return this.toDelta().map(t=>{const e=[];for(const a in t.attributes){const o=[];for(const c in t.attributes[a])o.push({key:c,value:t.attributes[a][c]});o.sort((c,u)=>c.key<u.key?-1:1),e.push({nodeName:a,attrs:o})}e.sort((a,o)=>a.nodeName<o.nodeName?-1:1);let n="";for(let a=0;a<e.length;a++){const o=e[a];n+=`<${o.nodeName}`;for(let c=0;c<o.attrs.length;c++){const u=o.attrs[c];n+=` ${u.key}="${u.value}"`}n+=">"}n+=t.insert;for(let a=e.length-1;a>=0;a--)n+=`</${e[a].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(v6)}}const t6=s=>new ov;class q_{constructor(t,e){this.id=t,this.length=e}get deleted(){throw cr()}mergeWith(t){return!1}write(t,e,n){throw cr()}integrate(t,e){throw cr()}}const e6=0;class rs extends q_{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),$N(t.doc.store,this)}write(t,e){t.writeInfo(e6),t.writeLen(this.length-e)}getMissing(t,e){return null}}class Ag{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ag(this.content)}splice(t){throw cr()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const n6=s=>new Ag(s.readBuf());class Of{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Of(this.len)}splice(t){const e=new Of(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){nv(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const i6=s=>new Of(s.readLen()),hM=(s,t)=>new Zh({guid:s,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class _g{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),t.meta!==null&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new _g(hM(this.doc.guid,this.opts))}splice(t){throw cr()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const s6=s=>new _g(hM(s.readString(),s.readAny()));class kc{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new kc(this.embed)}splice(t){throw cr()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const r6=s=>new kc(s.readJSON());class ln{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ln(this.key,this.value)}splice(t){throw cr()}mergeWith(t){return!1}integrate(t,e){const n=e.parent;n._searchMarker=null,n._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const a6=s=>new ln(s.readKey(),s.readJSON());class lv{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new lv(this.arr)}splice(t){const e=new lv(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const o=this.arr[a];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const o6=s=>{const t=s.readLen(),e=[];for(let n=0;n<t;n++){const a=s.readString();a==="undefined"?e.push(void 0):e.push(JSON.parse(a))}return new lv(e)},l6=ev("node_env")==="development";class vc{constructor(t){this.arr=t,l6&&kN(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new vc(this.arr)}splice(t){const e=new vc(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const o=this.arr[a];t.writeAny(o)}}getRef(){return 8}}const c6=s=>{const t=s.readLen(),e=[];for(let n=0;n<t;n++)e.push(s.readAny());return new vc(e)};class mr{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new mr(this.str)}splice(t){const e=new mr(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"",e.str=""+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(e===0?this.str:this.str.slice(e))}getRef(){return 4}}const u6=s=>new mr(s.readString()),h6=[HH,qH,KH,QH,WH,JH,t6],d6=0,f6=1,p6=2,g6=3,m6=4,y6=5,v6=6;class ka{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new ka(this.type._copy())}splice(t){throw cr()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;e!==null;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;e!==null;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(t,!0),n=n.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const b6=s=>new ka(h6[s.readTypeRef()](s)),cv=(s,t,e)=>{const{client:n,clock:a}=t.id,o=new on(Zt(n,a+e),t,Zt(n,a+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=Zt(t.redone.client,t.redone.clock+e)),t.right=o,o.right!==null&&(o.right.left=o),s._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=e,o};class on extends q_{constructor(t,e,n,a,o,c,u,d){super(t,d.getLength()),this.origin=n,this.left=e,this.right=a,this.rightOrigin=o,this.parent=c,this.parentSub=u,this.redone=null,this.content=d,this.info=this.content.isCountable()?lk:0}set marker(t){(this.info&iw)>0!==t&&(this.info^=iw)}get marker(){return(this.info&iw)>0}get keep(){return(this.info&ok)>0}set keep(t){this.keep!==t&&(this.info^=ok)}get countable(){return(this.info&lk)>0}get deleted(){return(this.info&nw)>0}set deleted(t){this.deleted!==t&&(this.info^=nw)}markDeleted(){this.info|=nw}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=yn(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=yn(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Lu&&this.id.client!==this.parent.client&&this.parent.clock>=yn(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Ak(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Po(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===rs||this.right&&this.right.constructor===rs)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===on?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===on&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Lu){const n=ow(e,this.parent);n.constructor===rs?this.parent=null:this.parent=n.content.type}return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=Ak(t,t.doc.store,Zt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,a;if(n!==null)a=n.right;else if(this.parentSub!==null)for(a=this.parent._map.get(this.parentSub)||null;a!==null&&a.left!==null;)a=a.left;else a=this.parent._start;const o=new Set,c=new Set;for(;a!==null&&a!==this.right;){if(c.add(a),o.add(a),ey(this.origin,a.origin)){if(a.id.client<this.id.client)n=a,o.clear();else if(ey(this.rightOrigin,a.rightOrigin))break}else if(a.origin!==null&&c.has(ow(t.doc.store,a.origin)))o.has(ow(t.doc.store,a.origin))||(n=a,o.clear());else break;a=a.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),$N(t.doc.store,this),this.content.integrate(t,this),Sk(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new rs(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Zt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&ey(t.origin,this.lastId)&&this.right===t&&ey(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(n=>{n.p===t&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&this.parentSub===null&&(e._length-=this.length),this.markDeleted(),nv(t.deleteSet,this.id.client,this.id.clock,this.length),Sk(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw pr();this.content.gc(t),e?SH(t,this,new rs(this.id,this.length)):this.content=new Of(this.length)}write(t,e){const n=e>0?Zt(this.id.client,this.id.clock+e-1):this.origin,a=this.rightOrigin,o=this.parentSub,c=this.content.getRef()&Wv|(n===null?0:Ui)|(a===null?0:va)|(o===null?0:Tf);if(t.writeInfo(c),n!==null&&t.writeLeftID(n),a!==null&&t.writeRightID(a),n===null&&a===null){const u=this.parent;if(u._item!==void 0){const d=u._item;if(d===null){const f=AH(u);t.writeParentInfo(!0),t.writeString(f)}else t.writeParentInfo(!1),t.writeLeftID(d.id)}else u.constructor===String?(t.writeParentInfo(!0),t.writeString(u)):u.constructor===Lu?(t.writeParentInfo(!1),t.writeLeftID(u)):pr();o!==null&&t.writeString(o)}this.content.write(t,e)}}const dM=(s,t)=>x6[t&Wv](s),x6=[()=>{pr()},i6,o6,n6,u6,r6,a6,b6,c6,s6,()=>{pr()}],w6=10;class as extends q_{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){pr()}write(t,e){t.writeInfo(w6),te(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const fM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},pM="__ $YJS$ __";fM[pM]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");fM[pM]=!0;const Rk=["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"];function A6(s){return s.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2)}function _6(s){const t=s.split("").reduce((e,n)=>e+n.charCodeAt(0),0);return Rk[t%Rk.length]}function S6({collaborators:s,maxShow:t=5}){const e=s.slice(0,t),n=Math.max(0,s.length-t);return s.length===0?null:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Qy,{className:"h-4 w-4 text-muted-foreground"}),x.jsxs("div",{className:"flex -space-x-2",children:[e.map(a=>x.jsx("div",{className:`
                            relative h-8 w-8 rounded-full border-2 border-background
                            flex items-center justify-center text-white text-xs font-medium
                            ${_6(a.id)}
                            hover:z-10 hover:scale-110 transition-transform cursor-pointer
                        `,title:`${a.name}${a.email?` (${a.email})`:""}`,children:A6(a.name)},a.id)),n>0&&x.jsxs("div",{className:`
                            relative h-8 w-8 rounded-full border-2 border-background
                            flex items-center justify-center bg-muted text-muted-foreground text-xs font-medium
                            hover:z-10 hover:scale-110 transition-transform cursor-pointer
                        `,title:`+${n} more collaborators`,children:["+",n]})]})]})}function E6(s){var a;const t=[],e=s.split(`
`);let n="main.tex";for(let o=0;o<e.length;o++){const c=e[o],u=c.match(/^\(([^)]+\.(?:tex|sty|cls|def))/);if(u&&(n=u[1]),c.startsWith("!")){const d=c.substring(1).trim();let f,g,y=d;for(let b=o+1;b<Math.min(o+5,e.length);b++){const w=e[b],A=w.match(/^l\.(\d+)\s+(.*)/);if(A&&(f=parseInt(A[1]),g=A[2]),w&&!w.startsWith("!")&&!w.startsWith("l.")&&(y+=`
`+w.trim()),A||b-o>3)break}t.push({type:"error",message:d,line:f,file:n,lineContent:g,fullMessage:y})}if(c.includes("Warning:")||c.includes("warning:")){const d=c.match(/(?:LaTeX|Package|Class)\s+(\w+)?\s*Warning:\s*(.+)/);if(d){const f=d[2],g=c.match(/on input line (\d+)/);t.push({type:"warning",message:f,line:g?parseInt(g[1]):void 0,file:n})}}if(c.includes("File")&&c.includes("not found")){const d=c.match(/File\s+['`"]([^'"]+)[''"]\s+not found/);d&&t.push({type:"error",message:`File not found: ${d[1]}`,file:n,fullMessage:"This file is required but could not be loaded. Make sure it exists in your project or is available in the TeXLive distribution."})}if(c.includes("Package")&&c.includes("not found")){const d=c.match(/Package\s+['`"]?(\w+)['`"]?\s+(?:not found|Error)/i);d&&t.push({type:"error",message:`Package not found: ${d[1]}`,fullMessage:`The package '${d[1]}' is not available. Install it via your TeXLive distribution or remove it from your document.`})}if(c.includes("Undefined control sequence")){const d=(a=e[o+1])==null?void 0:a.match(/\\([a-zA-Z]+)/);t.push({type:"error",message:`Undefined control sequence${d?`: \\${d[1]}`:""}`,line:void 0,file:n,fullMessage:"A command was used that LaTeX doesn't recognize. Check for typos or missing packages."})}}return t}function C6(s){if(s.length===0)return" No errors found";const t=s.filter(a=>a.type==="error").length,e=s.filter(a=>a.type==="warning").length;let n=` Compilation Summary:
`;return n+=`    ${t} error(s)
`,n+=`     ${e} warning(s)

`,s.forEach((a,o)=>{const c=a.type==="error"?"":a.type==="warning"?"":"";n+=`${c} ${a.type.toUpperCase()}`,a.line&&(n+=` at line ${a.line}`),a.file&&a.file!=="main.tex"&&(n+=` in ${a.file}`),n+=`
   ${a.message}
`,a.lineContent&&(n+=`   Code: ${a.lineContent}
`),o<s.length-1&&(n+=`
`)}),n}function T6({isOpen:s,onClose:t,projectId:e,projectName:n,collaborators:a,onCollaboratorAdded:o}){const[c,u]=E.useState(""),[d,f]=E.useState("EDITOR"),[g,y]=E.useState(!1),[b,w]=E.useState(null),[A,S]=E.useState(""),[C,T]=E.useState(!1),D=`${window.location.origin}/editor/${e}`,L=()=>{navigator.clipboard.writeText(D),T(!0),setTimeout(()=>T(!1),2e3)},P=async U=>{U.preventDefault(),S(""),y(!0);try{await Mn.addCollaborator(e,c,d),u(""),o==null||o()}catch(O){S(O.message||"Khng th thm cng tc vin")}finally{y(!1)}},z=async U=>{w(U);try{await Mn.removeCollaborator(e,U),o==null||o()}catch(O){S(O.message||"Khng th xa cng tc vin")}finally{w(null)}};return s?x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-card border rounded-lg shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Qy,{className:"h-5 w-5 text-primary"}),x.jsx("h2",{className:"font-semibold",children:"Chia s d n"})]}),x.jsx("button",{onClick:t,className:"p-1 hover:bg-accent rounded",children:x.jsx(Oh,{className:"h-5 w-5"})})]}),x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-muted-foreground",children:"D n"}),x.jsx("p",{className:"font-medium",children:n})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Link chia s"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:D,readOnly:!0,className:"flex-1 px-3 py-2 bg-muted border rounded text-sm"}),x.jsx(Ee,{variant:"outline",size:"sm",onClick:L,className:"gap-2",children:C?x.jsxs(x.Fragment,{children:[x.jsx(HR,{className:"h-4 w-4"})," copy"]}):x.jsxs(x.Fragment,{children:[x.jsx(I3,{className:"h-4 w-4"}),"Copy"]})})]})]}),x.jsxs("form",{onSubmit:P,className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Thm cng tc vin"}),x.jsx("input",{type:"email",value:c,onChange:U=>u(U.target.value),placeholder:"Email ngi dng",className:"w-full px-3 py-2 bg-background border rounded",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quyn truy cp"}),x.jsxs("select",{value:d,onChange:U=>f(U.target.value),className:"w-full px-3 py-2 bg-background border rounded",children:[x.jsx("option",{value:"VIEWER",children:"Viewer (Ch xem)"}),x.jsx("option",{value:"EDITOR",children:"Editor (Chnh sa)"})]})]}),A&&x.jsx("p",{className:"text-sm text-destructive",children:A}),x.jsxs(Ee,{type:"submit",disabled:g||!c,className:"w-full gap-2",children:[g?x.jsx(ar,{size:"sm"}):x.jsx(E4,{className:"h-4 w-4"}),"Thm cng tc vin"]})]}),a.length>0&&x.jsxs("div",{children:[x.jsxs("h3",{className:"text-sm font-medium mb-2",children:["Cng tc vin (",a.length,")"]}),x.jsx("div",{className:"space-y-2",children:a.map(U=>x.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-sm",children:U.user.name}),x.jsx("p",{className:"text-xs text-muted-foreground",children:U.user.email})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:`text-xs px-2 py-1 rounded ${U.role==="VIEWER"?"bg-blue-500/10 text-blue-500":"bg-green-500/10 text-green-500"}`,children:U.role==="VIEWER"?"Viewer":"Editor"}),x.jsx("button",{onClick:()=>z(U.user.id),disabled:b===U.user.id,className:"p-1 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-50",title:"Xa cng tc vin",children:b===U.user.id?x.jsx(ar,{size:"sm"}):x.jsx(Aw,{className:"h-4 w-4"})})]})]},U.id))})]})]})]})}):null}var wf={};wf.d=(s,t)=>{for(var e in t)wf.o(t,e)&&!wf.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};wf.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var Rt=globalThis.pdfjsLib={};wf.d(Rt,{AbortException:()=>Nc,AnnotationEditorLayer:()=>QA,AnnotationEditorParamsType:()=>Nt,AnnotationEditorType:()=>Jt,AnnotationEditorUIManager:()=>xc,AnnotationLayer:()=>EV,AnnotationMode:()=>oo,CMapCompressionType:()=>Vw,ColorPicker:()=>mv,DOMSVGFactory:()=>X_,DrawLayer:()=>e_,FeatureTest:()=>di,GlobalWorkerOptions:()=>ba,ImageKind:()=>wy,InvalidPDFException:()=>mM,MissingPDFException:()=>Rc,OPS:()=>ys,Outliner:()=>DA,PDFDataRangeTransport:()=>hD,PDFDateString:()=>_M,PDFWorker:()=>Pu,PasswordResponses:()=>M6,PermissionFlag:()=>N6,PixelsPerInch:()=>Fo,RenderingCancelledException:()=>Y_,TextLayer:()=>pv,UnexpectedResponseException:()=>ab,Util:()=>At,VerbosityLevel:()=>ib,XfaLayer:()=>fD,build:()=>rV,createValidAbsoluteUrl:()=>j6,fetchData:()=>hb,getDocument:()=>W8,getFilenameFromUrl:()=>G6,getPdfFilenameFromUrl:()=>$6,getXfaPageViewport:()=>X6,isDataScheme:()=>K_,isPdfFile:()=>W_,noContextMenu:()=>pi,normalizeUnicode:()=>B6,renderTextLayer:()=>B8,setLayerDimensions:()=>bc,shadow:()=>ee,updateTextLayer:()=>H8,version:()=>sV});const Bn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),gM=[1,0,0,1,0,0],Hw=[.001,0,0,.001,0,0],k6=1e7,uw=1.35,is={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},oo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},R6="pdfjs_internal_editor_",Jt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Nt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},N6={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Pn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},wy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Je={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Qd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ib={ERRORS:0,WARNINGS:1,INFOS:5},Vw={NONE:0,BINARY:1},ys={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},M6={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let sb=ib.WARNINGS;function D6(s){Number.isInteger(s)&&(sb=s)}function L6(){return sb}function rb(s){sb>=ib.INFOS&&console.log(`Info: ${s}`)}function zt(s){sb>=ib.WARNINGS&&console.log(`Warning: ${s}`)}function ve(s){throw new Error(s)}function an(s,t){s||ve(t)}function O6(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function j6(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const a=s.match(/\./g);(a==null?void 0:a.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=U6(s)}catch{}}const n=t?new URL(s,t):new URL(s);if(O6(n))return n}catch{}return null}function ee(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Ho=(function(){function t(e,n){this.constructor===t&&ve("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class qw extends Ho{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Gw extends Ho{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class mM extends Ho{constructor(t){super(t,"InvalidPDFException")}}class Rc extends Ho{constructor(t){super(t,"MissingPDFException")}}class ab extends Ho{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class P6 extends Ho{constructor(t){super(t,"FormatError")}}class Nc extends Ho{constructor(t){super(t,"AbortException")}}function yM(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&ve("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),c=s.subarray(a,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function ob(s){typeof s!="string"&&ve("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function F6(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function G_(s){const t=Object.create(null);for(const[e,n]of s)t[e]=n;return t}function I6(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function z6(){try{return new Function(""),!0}catch{return!1}}class di{static get isLittleEndian(){return ee(this,"isLittleEndian",I6())}static get isEvalSupported(){return ee(this,"isEvalSupported",z6())}static get isOffscreenCanvasSupported(){return ee(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ee(this,"platform",{isMac:navigator.platform.includes("Mac")}):ee(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return ee(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const hw=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var wa,Ay,$w;class At{static makeHexColor(t,e,n){return`#${hw[t]}${hw[e]}${hw[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],a=t[0]*e[1]+t[1]*e[3]+e[5];return[n,a]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],a=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,o=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[a,o]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),a=this.applyTransform(t.slice(2,4),e),o=this.applyTransform([t[0],t[3]],e),c=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],a[0],o[0],c[0]),Math.min(n[1],a[1],o[1],c[1]),Math.max(n[0],a[0],o[0],c[0]),Math.max(n[1],a[1],o[1],c[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],a=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],c=t[2]*e[1]+t[3]*e[3],u=(n+c)/2,d=Math.sqrt((n+c)**2-4*(n*c-o*a))/2,f=u+d||1,g=u-d||1;return[Math.sqrt(f),Math.sqrt(g)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[n,o,a,c]}static bezierBoundingBox(t,e,n,a,o,c,u,d,f){return f?(f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d)):f=[Math.min(t,u),Math.min(e,d),Math.max(t,u),Math.max(e,d)],N(this,wa,$w).call(this,t,n,o,u,e,a,c,d,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),N(this,wa,$w).call(this,t,n,o,u,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f),f}}wa=new WeakSet,Ay=function(t,e,n,a,o,c,u,d,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,w=b*f,A=y*(y*(y*t+3*f*e)+3*b*n)+w*a,S=y*(y*(y*o+3*f*c)+3*b*u)+w*d;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],S)},$w=function(t,e,n,a,o,c,u,d,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&N(this,wa,Ay).call(this,t,e,n,a,o,c,u,d,-y/g,b);return}const w=g**2-4*y*f;if(w<0)return;const A=Math.sqrt(w),S=2*f;N(this,wa,Ay).call(this,t,e,n,a,o,c,u,d,(-g+A)/S,b),N(this,wa,Ay).call(this,t,e,n,a,o,c,u,d,(-g-A)/S,b)},M(At,wa);function U6(s){return decodeURIComponent(escape(s))}let dw=null,Nk=null;function B6(s){return dw||(dw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Nk=new Map([["","t"]])),s.replaceAll(dw,(t,e,n)=>e?e.normalize("NFKC"):Nk.get(n))}function H6(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const s=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(s);else for(let t=0;t<32;t++)s[t]=Math.floor(Math.random()*255);return yM(s)}const vM="pdfjs_internal_id_",Ur={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class lb{constructor(){this.constructor===lb&&ve("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,o){return"none"}destroy(t=!1){}}var Pf;const nS=class nS{constructor({enableHWA:t=!1}={}){M(this,Pf,!1);this.constructor===nS&&ve("Cannot initialize BaseCanvasFactory."),k(this,Pf,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!p(this,Pf)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ve("Abstract method `_createCanvas` called.")}};Pf=new WeakMap;let uv=nS;class cb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===cb&&ve("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?Vw.BINARY:Vw.NONE;return this._fetchData(e,n).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){ve("Abstract method `_fetchData` called.")}}class ub{constructor({baseUrl:t=null}){this.constructor===ub&&ve("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){ve("Abstract method `_fetchData` called.")}}class $_{constructor(){this.constructor===$_&&ve("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ve("Abstract method `_createSVG` called.")}}const Hr="http://www.w3.org/2000/svg",gl=class gl{};Mt(gl,"CSS",96),Mt(gl,"PDF",72),Mt(gl,"PDF_TO_CSS_UNITS",gl.CSS/gl.PDF);let Fo=gl;var vl,Vs,Xr,ci,vv,bl,bt,Fn,Au,_u,_y,bM,Xw,Su,nf,sf,Yw,rf;class V6 extends lb{constructor({docId:e,ownerDocument:n=globalThis.document}={}){super();M(this,bt);M(this,vl);M(this,Vs);M(this,Xr);M(this,ci);M(this,vv);M(this,bl,0);k(this,Xr,e),k(this,ci,n)}addFilter(e){if(!e)return"none";let n=p(this,bt,Fn).get(e);if(n)return n;const[a,o,c]=N(this,bt,_y).call(this,e),u=e.length===1?a:`${a}${o}${c}`;if(n=p(this,bt,Fn).get(u),n)return p(this,bt,Fn).set(e,n),n;const d=`g_${p(this,Xr)}_transfer_map_${_i(this,bl)._++}`,f=`url(#${d})`;p(this,bt,Fn).set(e,f),p(this,bt,Fn).set(u,f);const g=N(this,bt,Su).call(this,d);return N(this,bt,sf).call(this,a,o,c,g),f}addHCMFilter(e,n){var A;const a=`${e}-${n}`,o="base";let c=p(this,bt,Au).get(o);if((c==null?void 0:c.key)===a||(c?((A=c.filter)==null||A.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},p(this,bt,Au).set(o,c)),!e||!n))return c.url;const u=N(this,bt,rf).call(this,e);e=At.makeHexColor(...u);const d=N(this,bt,rf).call(this,n);if(n=At.makeHexColor(...d),p(this,bt,_u).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const f=new Array(256);for(let S=0;S<=255;S++){const C=S/255;f[S]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const g=f.join(","),y=`g_${p(this,Xr)}_hcm_filter`,b=c.filter=N(this,bt,Su).call(this,y);N(this,bt,sf).call(this,g,g,g,b),N(this,bt,Xw).call(this,b);const w=(S,C)=>{const T=u[S]/255,D=d[S]/255,L=new Array(C+1);for(let P=0;P<=C;P++)L[P]=T+P/C*(D-T);return L.join(",")};return N(this,bt,sf).call(this,w(0,5),w(1,5),w(2,5),b),c.url=`url(#${y})`,c.url}addAlphaFilter(e){let n=p(this,bt,Fn).get(e);if(n)return n;const[a]=N(this,bt,_y).call(this,[e]),o=`alpha_${a}`;if(n=p(this,bt,Fn).get(o),n)return p(this,bt,Fn).set(e,n),n;const c=`g_${p(this,Xr)}_alpha_map_${_i(this,bl)._++}`,u=`url(#${c})`;p(this,bt,Fn).set(e,u),p(this,bt,Fn).set(o,u);const d=N(this,bt,Su).call(this,c);return N(this,bt,Yw).call(this,a,d),u}addLuminosityFilter(e){let n=p(this,bt,Fn).get(e||"luminosity");if(n)return n;let a,o;if(e?([a]=N(this,bt,_y).call(this,[e]),o=`luminosity_${a}`):o="luminosity",n=p(this,bt,Fn).get(o),n)return p(this,bt,Fn).set(e,n),n;const c=`g_${p(this,Xr)}_luminosity_map_${_i(this,bl)._++}`,u=`url(#${c})`;p(this,bt,Fn).set(e,u),p(this,bt,Fn).set(o,u);const d=N(this,bt,Su).call(this,c);return N(this,bt,bM).call(this,d),e&&N(this,bt,Yw).call(this,a,d),u}addHighlightHCMFilter(e,n,a,o,c){var D;const u=`${n}-${a}-${o}-${c}`;let d=p(this,bt,Au).get(e);if((d==null?void 0:d.key)===u||(d?((D=d.filter)==null||D.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},p(this,bt,Au).set(e,d)),!n||!a))return d.url;const[f,g]=[n,a].map(N(this,bt,rf).bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),b=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[w,A]=[o,c].map(N(this,bt,rf).bind(this));b<y&&([y,b,w,A]=[b,y,A,w]),p(this,bt,_u).style.color="";const S=(L,P,z)=>{const U=new Array(256),O=(b-y)/z,H=L/255,Z=(P-L)/(255*z);let $=0;for(let W=0;W<=z;W++){const it=Math.round(y+W*O),ct=H+W*Z;for(let lt=$;lt<=it;lt++)U[lt]=ct;$=it+1}for(let W=$;W<256;W++)U[W]=U[$-1];return U.join(",")},C=`g_${p(this,Xr)}_hcm_${e}_filter`,T=d.filter=N(this,bt,Su).call(this,C);return N(this,bt,Xw).call(this,T),N(this,bt,sf).call(this,S(w[0],A[0],5),S(w[1],A[1],5),S(w[2],A[2],5),T),d.url=`url(#${C})`,d.url}destroy(e=!1){e&&p(this,bt,Au).size!==0||(p(this,Vs)&&(p(this,Vs).parentNode.parentNode.remove(),k(this,Vs,null)),p(this,vl)&&(p(this,vl).clear(),k(this,vl,null)),k(this,bl,0))}}vl=new WeakMap,Vs=new WeakMap,Xr=new WeakMap,ci=new WeakMap,vv=new WeakMap,bl=new WeakMap,bt=new WeakSet,Fn=function(){return p(this,vl)||k(this,vl,new Map)},Au=function(){return p(this,vv)||k(this,vv,new Map)},_u=function(){if(!p(this,Vs)){const e=p(this,ci).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=p(this,ci).createElementNS(Hr,"svg");a.setAttribute("width",0),a.setAttribute("height",0),k(this,Vs,p(this,ci).createElementNS(Hr,"defs")),e.append(a),a.append(p(this,Vs)),p(this,ci).body.append(e)}return p(this,Vs)},_y=function(e){if(e.length===1){const f=e[0],g=new Array(256);for(let b=0;b<256;b++)g[b]=f[b]/255;const y=g.join(",");return[y,y,y]}const[n,a,o]=e,c=new Array(256),u=new Array(256),d=new Array(256);for(let f=0;f<256;f++)c[f]=n[f]/255,u[f]=a[f]/255,d[f]=o[f]/255;return[c.join(","),u.join(","),d.join(",")]},bM=function(e){const n=p(this,ci).createElementNS(Hr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Xw=function(e){const n=p(this,ci).createElementNS(Hr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Su=function(e){const n=p(this,ci).createElementNS(Hr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),p(this,bt,_u).append(n),n},nf=function(e,n,a){const o=p(this,ci).createElementNS(Hr,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",a),e.append(o)},sf=function(e,n,a,o){const c=p(this,ci).createElementNS(Hr,"feComponentTransfer");o.append(c),N(this,bt,nf).call(this,c,"feFuncR",e),N(this,bt,nf).call(this,c,"feFuncG",n),N(this,bt,nf).call(this,c,"feFuncB",a)},Yw=function(e,n){const a=p(this,ci).createElementNS(Hr,"feComponentTransfer");n.append(a),N(this,bt,nf).call(this,a,"feFuncA",e)},rf=function(e){return p(this,bt,_u).style.color=e,Q_(getComputedStyle(p(this,bt,_u)).getPropertyValue("color"))};class q6 extends uv{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}async function hb(s,t="text"){if(af(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",s,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class xM extends cb{_fetchData(t,e){return hb(t,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):ob(n),compressionType:e}))}}class wM extends ub{_fetchData(t){return hb(t,"arraybuffer").then(e=>new Uint8Array(e))}}class X_ extends $_{_createSVG(t){return document.createElementNS(Hr,t)}}class Sg{constructor({viewBox:t,scale:e,rotation:n,offsetX:a=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=a,this.offsetY=o;const u=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let f,g,y,b;switch(n%=360,n<0&&(n+=360),n){case 180:f=-1,g=0,y=0,b=1;break;case 90:f=0,g=1,y=1,b=0;break;case 270:f=0,g=-1,y=-1,b=0;break;case 0:f=1,g=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,b=-b);let w,A,S,C;f===0?(w=Math.abs(d-t[1])*e+a,A=Math.abs(u-t[0])*e+o,S=(t[3]-t[1])*e,C=(t[2]-t[0])*e):(w=Math.abs(u-t[0])*e+a,A=Math.abs(d-t[1])*e+o,S=(t[2]-t[0])*e,C=(t[3]-t[1])*e),this.transform=[f*e,g*e,y*e,b*e,w-f*e*u-y*e*d,A-g*e*u-b*e*d],this.width=S,this.height=C}get rawDims(){const{viewBox:t}=this;return ee(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new Sg({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){return At.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=At.applyTransform([t[0],t[1]],this.transform),n=At.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return At.applyInverseTransform([t,e],this.transform)}}class Y_ extends Ho{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function K_(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function W_(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function G6(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function $6(s,t="document.pdf"){if(typeof s!="string")return t;if(K_(s))return zt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=e.exec(s);let o=n.exec(a[1])||n.exec(a[2])||n.exec(a[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||t}class Mk{constructor(){Mt(this,"started",Object.create(null));Mt(this,"times",[])}time(t){t in this.started&&zt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||zt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-a}ms
`);return t.join("")}}function af(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function pi(s){s.preventDefault()}function AM(s){console.log("Deprecated API usage: "+s)}let Dk;class _M{static toDateObject(t){if(!t||typeof t!="string")return null;Dk||(Dk=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=Dk.exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,u+=y):f==="+"&&(c-=g,u-=y),new Date(Date.UTC(n,a,o,c,u,d))}}function X6(s,{scale:t=1,rotation:e=0}){const{width:n,height:a}=s.attributes.style,o=[0,0,parseInt(n),parseInt(a)];return new Sg({viewBox:o,scale:t,rotation:e})}function Q_(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(zt(`Not a valid color format: "${s}"`),[0,0,0])}function Y6(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,Q_(n))}t.remove()}function Pe(s){const{a:t,b:e,c:n,d:a,e:o,f:c}=s.getTransform();return[t,e,n,a,o,c]}function Br(s){const{a:t,b:e,c:n,d:a,e:o,f:c}=s.getTransform().invertSelf();return[t,e,n,a,o,c]}function bc(s,t,e=!1,n=!0){if(t instanceof Sg){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:c}=s,u=di.isCSSRoundSupported,d=`var(--scale-factor) * ${a}px`,f=`var(--scale-factor) * ${o}px`,g=u?`round(${d}, 1px)`:`calc(${d})`,y=u?`round(${f}, 1px)`:`calc(${f})`;!e||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}n&&s.setAttribute("data-main-rotation",t.rotation)}var xl,wl,ki,Al,bv,SM,Zn,EM,CM,Sy,TM,Ww;const xv=class xv{constructor(t){M(this,Zn);M(this,xl,null);M(this,wl,null);M(this,ki);M(this,Al,null);k(this,ki,t)}render(){const t=k(this,xl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=p(this,ki)._uiManager._signal;t.addEventListener("contextmenu",pi,{signal:e}),t.addEventListener("pointerdown",N(xv,bv,SM),{signal:e});const n=k(this,Al,document.createElement("div"));n.className="buttons",t.append(n);const a=p(this,ki).toolbarPosition;if(a){const{style:o}=t,c=p(this,ki)._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return N(this,Zn,TM).call(this),t}hide(){var t;p(this,xl).classList.add("hidden"),(t=p(this,wl))==null||t.hideDropdown()}show(){p(this,xl).classList.remove("hidden")}addAltTextButton(t){N(this,Zn,Sy).call(this,t),p(this,Al).prepend(t,p(this,Zn,Ww))}addColorPicker(t){k(this,wl,t);const e=t.renderButton();N(this,Zn,Sy).call(this,e),p(this,Al).prepend(e,p(this,Zn,Ww))}remove(){var t;p(this,xl).remove(),(t=p(this,wl))==null||t.destroy(),k(this,wl,null)}};xl=new WeakMap,wl=new WeakMap,ki=new WeakMap,Al=new WeakMap,bv=new WeakSet,SM=function(t){t.stopPropagation()},Zn=new WeakSet,EM=function(t){p(this,ki)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},CM=function(t){p(this,ki)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},Sy=function(t){const e=p(this,ki)._uiManager._signal;t.addEventListener("focusin",N(this,Zn,EM).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",N(this,Zn,CM).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",pi,{signal:e})},TM=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${p(this,ki).editorType}-button`),N(this,Zn,Sy).call(this,t),t.addEventListener("click",e=>{p(this,ki)._uiManager.delete()},{signal:p(this,ki)._uiManager._signal}),p(this,Al).append(t)},Ww=function(){const t=document.createElement("div");return t.className="divider",t},M(xv,bv);let Kw=xv;var Ff,_l,Sl,Io,kM,RM,NM;class K6{constructor(t){M(this,Io);M(this,Ff,null);M(this,_l,null);M(this,Sl);k(this,Sl,t)}show(t,e,n){const[a,o]=N(this,Io,RM).call(this,e,n),{style:c}=p(this,_l)||k(this,_l,N(this,Io,kM).call(this));t.append(p(this,_l)),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){p(this,_l).remove()}}Ff=new WeakMap,_l=new WeakMap,Sl=new WeakMap,Io=new WeakSet,kM=function(){const t=k(this,_l,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",pi,{signal:p(this,Sl)._signal});const e=k(this,Ff,document.createElement("div"));return e.className="buttons",t.append(e),N(this,Io,NM).call(this),t},RM=function(t,e){let n=0,a=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const u=o.x+(e?o.width:0);if(c>n){a=u,n=c;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,n]},NM=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=p(this,Sl)._signal;t.addEventListener("contextmenu",pi,{signal:n}),t.addEventListener("click",()=>{p(this,Sl).highlightSelection("floating_button")},{signal:n}),p(this,Ff).append(t)};function hv(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}function W6(s){return Math.round(Math.min(255,Math.max(1,255*s))).toString(16).padStart(2,"0")}var wv;class Q6{constructor(){M(this,wv,0)}get id(){return`${R6}${_i(this,wv)._++}`}}wv=new WeakMap;var If,Av,Ji,zf,Zw;const iS=class iS{constructor(){M(this,zf);M(this,If,H6());M(this,Av,0);M(this,Ji,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ee(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:o}=t;return N(this,zf,Zw).call(this,`${e}_${n}_${a}_${o}`,t)}async getFromUrl(t){return N(this,zf,Zw).call(this,t,t)}async getFromId(t){p(this,Ji)||k(this,Ji,new Map);const e=p(this,Ji).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=p(this,Ji).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){p(this,Ji)||k(this,Ji,new Map);const e=p(this,Ji).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${p(this,If)}_`)}};If=new WeakMap,Av=new WeakMap,Ji=new WeakMap,zf=new WeakSet,Zw=async function(t,e){p(this,Ji)||k(this,Ji,new Map);let n=p(this,Ji).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${p(this,If)}_${_i(this,Av)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await hb(e,"blob")):a=n.file=e,a.type==="image/svg+xml"){const o=iS._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},c.onload=async()=>{const y=n.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=g});c.readAsDataURL(a),await d}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){console.error(a),n=null}return p(this,Ji).set(t,n),n&&p(this,Ji).set(n.id,n),n};let Qw=iS;var fn,lo,Uf,pn;class Z6{constructor(t=128){M(this,fn,[]);M(this,lo,!1);M(this,Uf);M(this,pn,-1);k(this,Uf,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&t(),p(this,lo))return;const d={cmd:t,undo:e,post:n,type:o};if(p(this,pn)===-1){p(this,fn).length>0&&(p(this,fn).length=0),k(this,pn,0),p(this,fn).push(d);return}if(c&&p(this,fn)[p(this,pn)].type===o){u&&(d.undo=p(this,fn)[p(this,pn)].undo),p(this,fn)[p(this,pn)]=d;return}const f=p(this,pn)+1;f===p(this,Uf)?p(this,fn).splice(0,1):(k(this,pn,f),f<p(this,fn).length&&p(this,fn).splice(f)),p(this,fn).push(d)}undo(){if(p(this,pn)===-1)return;k(this,lo,!0);const{undo:t,post:e}=p(this,fn)[p(this,pn)];t(),e==null||e(),k(this,lo,!1),k(this,pn,p(this,pn)-1)}redo(){if(p(this,pn)<p(this,fn).length-1){k(this,pn,p(this,pn)+1),k(this,lo,!0);const{cmd:t,post:e}=p(this,fn)[p(this,pn)];t(),e==null||e(),k(this,lo,!1)}}hasSomethingToUndo(){return p(this,pn)!==-1}hasSomethingToRedo(){return p(this,pn)<p(this,fn).length-1}destroy(){k(this,fn,null)}}fn=new WeakMap,lo=new WeakMap,Uf=new WeakMap,pn=new WeakMap;var _v,MM;class Eg{constructor(t){M(this,_v);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=di.platform;for(const[n,a,o={}]of t)for(const c of n){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(N(this,_v,MM).call(this,e));if(!n)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:u=null}}=n;u&&!u(t,e)||(a.bind(t,...c,e)(),o||(e.stopPropagation(),e.preventDefault()))}}_v=new WeakSet,MM=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Sv=class Sv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Y6(t),ee(this,"_colors",t)}convert(t){const e=Q_(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((o,c)=>o===e[c]))return Sv._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?At.makeHexColor(...e):t}};Mt(Sv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Jw=Sv;var zu,Ri,tn,En,Uu,Yr,Bu,vs,Hu,El,qs,bs,Cl,Bf,Hf,Gs,Vu,co,$s,Ev,uo,Vf,Tl,qf,qu,Cn,de,Kr,kl,Gf,$f,Xf,Yf,Kf,Wf,Qf,Zf,Jf,tp,ep,np,ip,ho,Xs,Wr,sp,dt,Ey,DM,LM,Cy,OM,jM,PM,tA,FM,eA,nA,IM,Yn,io,zM,UM,iA,BM,of,sA;const Ru=class Ru{constructor(t,e,n,a,o,c,u,d,f){M(this,dt);M(this,zu,new AbortController);M(this,Ri,null);M(this,tn,new Map);M(this,En,new Map);M(this,Uu,null);M(this,Yr,null);M(this,Bu,null);M(this,vs,new Z6);M(this,Hu,0);M(this,El,new Set);M(this,qs,null);M(this,bs,null);M(this,Cl,new Set);M(this,Bf,!1);M(this,Hf,null);M(this,Gs,null);M(this,Vu,null);M(this,co,!1);M(this,$s,null);M(this,Ev,new Q6);M(this,uo,!1);M(this,Vf,!1);M(this,Tl,null);M(this,qf,null);M(this,qu,null);M(this,Cn,Jt.NONE);M(this,de,new Set);M(this,Kr,null);M(this,kl,null);M(this,Gf,null);M(this,$f,this.blur.bind(this));M(this,Xf,this.focus.bind(this));M(this,Yf,this.copy.bind(this));M(this,Kf,this.cut.bind(this));M(this,Wf,this.paste.bind(this));M(this,Qf,this.keydown.bind(this));M(this,Zf,this.keyup.bind(this));M(this,Jf,this.onEditingAction.bind(this));M(this,tp,this.onPageChanging.bind(this));M(this,ep,this.onScaleChanging.bind(this));M(this,np,this.onRotationChanging.bind(this));M(this,ip,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});M(this,ho,[0,0]);M(this,Xs,null);M(this,Wr,null);M(this,sp,null);this._signal=p(this,zu).signal,k(this,Wr,t),k(this,sp,e),k(this,Uu,n),this._eventBus=a,this._eventBus._on("editingaction",p(this,Jf)),this._eventBus._on("pagechanging",p(this,tp)),this._eventBus._on("scalechanging",p(this,ep)),this._eventBus._on("rotationchanging",p(this,np)),N(this,dt,OM).call(this),N(this,dt,IM).call(this),N(this,dt,tA).call(this),k(this,Yr,o.annotationStorage),k(this,Hf,o.filterFactory),k(this,kl,c),k(this,Vu,u||null),k(this,Bf,d),k(this,qu,f||null),this.viewParameters={realScale:Fo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=Ru.prototype,e=c=>p(c,Wr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return ee(this,"_keyboardManager",new Eg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&p(c,Wr).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&p(c,Wr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n;(t=p(this,zu))==null||t.abort(),k(this,zu,null),this._signal=null,this._eventBus._off("editingaction",p(this,Jf)),this._eventBus._off("pagechanging",p(this,tp)),this._eventBus._off("scalechanging",p(this,ep)),this._eventBus._off("rotationchanging",p(this,np));for(const a of p(this,En).values())a.destroy();p(this,En).clear(),p(this,tn).clear(),p(this,Cl).clear(),k(this,Ri,null),p(this,de).clear(),p(this,vs).destroy(),(e=p(this,Uu))==null||e.destroy(),(n=p(this,$s))==null||n.hide(),k(this,$s,null),p(this,Gs)&&(clearTimeout(p(this,Gs)),k(this,Gs,null)),p(this,Xs)&&(clearTimeout(p(this,Xs)),k(this,Xs,null))}async mlGuess(t){var e;return((e=p(this,qu))==null?void 0:e.guess(t))||null}get hasMLManager(){return!!p(this,qu)}get hcmFilter(){return ee(this,"hcmFilter",p(this,kl)?p(this,Hf).addHCMFilter(p(this,kl).foreground,p(this,kl).background):"none")}get direction(){return ee(this,"direction",getComputedStyle(p(this,Wr)).direction)}get highlightColors(){return ee(this,"highlightColors",p(this,Vu)?new Map(p(this,Vu).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return ee(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){k(this,qf,t)}editAltText(t){var e;(e=p(this,Uu))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){k(this,Hu,t-1)}focusMainContainer(){p(this,Wr).focus()}findParent(t,e){for(const n of p(this,En).values()){const{x:a,y:o,width:c,height:u}=n.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){p(this,sp).classList.toggle("noUserSelect",t)}addShouldRescale(t){p(this,Cl).add(t)}removeShouldRescale(t){p(this,Cl).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Fo.PDF_TO_CSS_UNITS;for(const e of p(this,Cl))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c}=e,u=e.toString(),f=N(this,dt,Ey).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(f);if(g){e.empty(),p(this,Cn)===Jt.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Jt.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const y of p(this,En).values())if(y.hasTextLayer(f)){y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c,text:u});break}}}addToAnnotationStorage(t){!t.isEmpty()&&p(this,Yr)&&!p(this,Yr).has(t.id)&&p(this,Yr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,p(this,co)&&(k(this,co,!1),N(this,dt,Cy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of p(this,de))if(e.div.contains(t)){k(this,Tl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!p(this,Tl))return;const[t,e]=p(this,Tl);k(this,Tl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){N(this,dt,tA).call(this),N(this,dt,eA).call(this)}removeEditListeners(){N(this,dt,FM).call(this),N(this,dt,nA).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of p(this,bs))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of p(this,bs))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=p(this,Ri))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of p(this,de)){const o=a.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of p(this,bs))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){zt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of n){const f=a.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)N(this,dt,iA).call(this,d);N(this,dt,sA).call(this,o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){zt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),p(this,Cn)!==Jt.NONE&&!this.isEditorHandlingKeyboard&&Ru._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,p(this,co)&&(k(this,co,!1),N(this,dt,Cy).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(N(this,dt,jM).call(this),N(this,dt,eA).call(this),N(this,dt,Yn).call(this,{isEditing:p(this,Cn)!==Jt.NONE,isEmpty:N(this,dt,of).call(this),hasSomethingToUndo:p(this,vs).hasSomethingToUndo(),hasSomethingToRedo:p(this,vs).hasSomethingToRedo(),hasSelectedEditor:!1})):(N(this,dt,PM).call(this),N(this,dt,nA).call(this),N(this,dt,Yn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!p(this,bs)){k(this,bs,t);for(const e of p(this,bs))N(this,dt,io).call(this,e.defaultPropertiesToUpdate)}}getId(){return p(this,Ev).id}get currentLayer(){return p(this,En).get(p(this,Hu))}getLayer(t){return p(this,En).get(t)}get currentPageIndex(){return p(this,Hu)}addLayer(t){p(this,En).set(t.pageIndex,t),p(this,uo)?t.enable():t.disable()}removeLayer(t){p(this,En).delete(t.pageIndex)}updateMode(t,e=null,n=!1){if(p(this,Cn)!==t){if(k(this,Cn,t),t===Jt.NONE){this.setEditingState(!1),N(this,dt,UM).call(this);return}this.setEditingState(!0),N(this,dt,zM).call(this),this.unselectAll();for(const a of p(this,En).values())a.updateMode(t);if(!e&&n){this.addNewEditorFromKeyboard();return}if(e){for(const a of p(this,tn).values())if(a.annotationElementId===e){this.setSelected(a),a.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==p(this,Cn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(p(this,bs)){switch(t){case Nt.CREATE:this.currentLayer.addNewEditor();return;case Nt.HIGHLIGHT_DEFAULT_COLOR:(n=p(this,qf))==null||n.updateColor(e);break;case Nt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(p(this,Gf)||k(this,Gf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const a of p(this,de))a.updateParams(t,e);for(const a of p(this,bs))a.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const c of p(this,tn).values())c.editorType===t&&c.show(e);(((o=p(this,Gf))==null?void 0:o.get(Nt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&N(this,dt,io).call(this,[[Nt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(p(this,Vf)!==t){k(this,Vf,t);for(const e of p(this,En).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of p(this,tn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return p(this,tn).get(t)}addEditor(t){p(this,tn).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(p(this,Gs)&&clearTimeout(p(this,Gs)),k(this,Gs,setTimeout(()=>{this.focusMainContainer(),k(this,Gs,null)},0))),p(this,tn).delete(t.id),this.unselect(t),(!t.annotationElementId||!p(this,El).has(t.annotationElementId))&&((e=p(this,Yr))==null||e.remove(t.id))}addDeletedAnnotationElement(t){p(this,El).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return p(this,El).has(t)}removeDeletedAnnotationElement(t){p(this,El).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){p(this,Ri)!==t&&(k(this,Ri,t),t&&N(this,dt,io).call(this,t.propertiesToUpdate))}updateUI(t){p(this,dt,BM)===t&&N(this,dt,io).call(this,t.propertiesToUpdate)}toggleSelected(t){if(p(this,de).has(t)){p(this,de).delete(t),t.unselect(),N(this,dt,Yn).call(this,{hasSelectedEditor:this.hasSelection});return}p(this,de).add(t),t.select(),N(this,dt,io).call(this,t.propertiesToUpdate),N(this,dt,Yn).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of p(this,de))e!==t&&e.unselect();p(this,de).clear(),p(this,de).add(t),t.select(),N(this,dt,io).call(this,t.propertiesToUpdate),N(this,dt,Yn).call(this,{hasSelectedEditor:!0})}isSelected(t){return p(this,de).has(t)}get firstSelectedEditor(){return p(this,de).values().next().value}unselect(t){t.unselect(),p(this,de).delete(t),N(this,dt,Yn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return p(this,de).size!==0}get isEnterHandled(){return p(this,de).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){p(this,vs).undo(),N(this,dt,Yn).call(this,{hasSomethingToUndo:p(this,vs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:N(this,dt,of).call(this)})}redo(){p(this,vs).redo(),N(this,dt,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:p(this,vs).hasSomethingToRedo(),isEmpty:N(this,dt,of).call(this)})}addCommands(t){p(this,vs).add(t),N(this,dt,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:N(this,dt,of).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...p(this,de)],e=()=>{for(const a of t)a.remove()},n=()=>{for(const a of t)N(this,dt,iA).call(this,a)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=p(this,Ri))==null||t.commitOrRemove()}hasSomethingToControl(){return p(this,Ri)||this.hasSelection}selectAll(){for(const t of p(this,de))t.commit();N(this,dt,sA).call(this,p(this,tn).values())}unselectAll(){if(!(p(this,Ri)&&(p(this,Ri).commitOrRemove(),p(this,Cn)!==Jt.NONE))&&this.hasSelection){for(const t of p(this,de))t.unselect();p(this,de).clear(),N(this,dt,Yn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;p(this,ho)[0]+=t,p(this,ho)[1]+=e;const[a,o]=p(this,ho),c=[...p(this,de)],u=1e3;p(this,Xs)&&clearTimeout(p(this,Xs)),k(this,Xs,setTimeout(()=>{k(this,Xs,null),p(this,ho)[0]=p(this,ho)[1]=0,this.addCommands({cmd:()=>{for(const d of c)p(this,tn).has(d.id)&&d.translateInPage(a,o)},undo:()=>{for(const d of c)p(this,tn).has(d.id)&&d.translateInPage(-a,-o)},mustExec:!1})},u));for(const d of c)d.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(this,qs,new Map);for(const t of p(this,de))p(this,qs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!p(this,qs))return!1;this.disableUserSelect(!1);const t=p(this,qs);k(this,qs,null);let e=!1;for(const[{x:a,y:o,pageIndex:c},u]of t)u.newX=a,u.newY=o,u.newPageIndex=c,e||(e=a!==u.savedX||o!==u.savedY||c!==u.savedPageIndex);if(!e)return!1;const n=(a,o,c,u)=>{if(p(this,tn).has(a.id)){const d=p(this,En).get(u);d?a._setParentAndPosition(d,o,c):(a.pageIndex=u,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:u}]of t)n(a,o,c,u)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:u}]of t)n(a,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(p(this,qs))for(const n of p(this,qs).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||p(this,de).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return p(this,Ri)===t}getActive(){return p(this,Ri)}getMode(){return p(this,Cn)}get imageManager(){return ee(this,"imageManager",new Qw)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:a,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,b)=>({x:(g-a)/c,y:1-(f+y-n)/o,width:b/c,height:y/o});break;case"180":u=(f,g,y,b)=>({x:1-(f+y-n)/o,y:1-(g+b-a)/c,width:y/o,height:b/c});break;case"270":u=(f,g,y,b)=>({x:1-(g+b-a)/c,y:(f-n)/o,width:b/c,height:y/o});break;default:u=(f,g,y,b)=>({x:(f-n)/o,y:(g-a)/c,width:y/o,height:b/c});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:w,width:A,height:S}of y.getClientRects())A===0||S===0||d.push(u(b,w,A,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(p(this,Bu)||k(this,Bu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=p(this,Bu))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=p(this,Bu))==null?void 0:a.get(t.data.id);if(!e)return;const n=p(this,Yr).getRawValue(e);n&&(p(this,Cn)===Jt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};zu=new WeakMap,Ri=new WeakMap,tn=new WeakMap,En=new WeakMap,Uu=new WeakMap,Yr=new WeakMap,Bu=new WeakMap,vs=new WeakMap,Hu=new WeakMap,El=new WeakMap,qs=new WeakMap,bs=new WeakMap,Cl=new WeakMap,Bf=new WeakMap,Hf=new WeakMap,Gs=new WeakMap,Vu=new WeakMap,co=new WeakMap,$s=new WeakMap,Ev=new WeakMap,uo=new WeakMap,Vf=new WeakMap,Tl=new WeakMap,qf=new WeakMap,qu=new WeakMap,Cn=new WeakMap,de=new WeakMap,Kr=new WeakMap,kl=new WeakMap,Gf=new WeakMap,$f=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Wf=new WeakMap,Qf=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,tp=new WeakMap,ep=new WeakMap,np=new WeakMap,ip=new WeakMap,ho=new WeakMap,Xs=new WeakMap,Wr=new WeakMap,sp=new WeakMap,dt=new WeakSet,Ey=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},DM=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=N(this,dt,Ey).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(p(this,$s)||k(this,$s,new K6(this)),p(this,$s).show(n,a,this.direction==="ltr"))},LM=function(){var o,c,u;const t=document.getSelection();if(!t||t.isCollapsed){p(this,Kr)&&((o=p(this,$s))==null||o.hide(),k(this,Kr,null),N(this,dt,Yn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===p(this,Kr))return;if(!N(this,dt,Ey).call(this,t).closest(".textLayer")){p(this,Kr)&&((c=p(this,$s))==null||c.hide(),k(this,Kr,null),N(this,dt,Yn).call(this,{hasSelectedText:!1}));return}if((u=p(this,$s))==null||u.hide(),k(this,Kr,e),N(this,dt,Yn).call(this,{hasSelectedText:!0}),!(p(this,Cn)!==Jt.HIGHLIGHT&&p(this,Cn)!==Jt.NONE)&&(p(this,Cn)===Jt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(this,co,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=this._signal,f=g=>{g.type==="pointerup"&&g.button!==0||(window.removeEventListener("pointerup",f),window.removeEventListener("blur",f),g.type==="pointerup"&&N(this,dt,Cy).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("blur",f,{signal:d})}},Cy=function(t=""){p(this,Cn)===Jt.HIGHLIGHT?this.highlightSelection(t):p(this,Bf)&&N(this,dt,DM).call(this)},OM=function(){document.addEventListener("selectionchange",N(this,dt,LM).bind(this),{signal:this._signal})},jM=function(){const t=this._signal;window.addEventListener("focus",p(this,Xf),{signal:t}),window.addEventListener("blur",p(this,$f),{signal:t})},PM=function(){window.removeEventListener("focus",p(this,Xf)),window.removeEventListener("blur",p(this,$f))},tA=function(){const t=this._signal;window.addEventListener("keydown",p(this,Qf),{signal:t}),window.addEventListener("keyup",p(this,Zf),{signal:t})},FM=function(){window.removeEventListener("keydown",p(this,Qf)),window.removeEventListener("keyup",p(this,Zf))},eA=function(){const t=this._signal;document.addEventListener("copy",p(this,Yf),{signal:t}),document.addEventListener("cut",p(this,Kf),{signal:t}),document.addEventListener("paste",p(this,Wf),{signal:t})},nA=function(){document.removeEventListener("copy",p(this,Yf)),document.removeEventListener("cut",p(this,Kf)),document.removeEventListener("paste",p(this,Wf))},IM=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Yn=function(t){Object.entries(t).some(([n,a])=>p(this,ip)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(p(this,ip),t)}),p(this,Cn)===Jt.HIGHLIGHT&&t.hasSelectedEditor===!1&&N(this,dt,io).call(this,[[Nt.HIGHLIGHT_FREE,!0]]))},io=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},zM=function(){if(!p(this,uo)){k(this,uo,!0);for(const t of p(this,En).values())t.enable();for(const t of p(this,tn).values())t.enable()}},UM=function(){if(this.unselectAll(),p(this,uo)){k(this,uo,!1);for(const t of p(this,En).values())t.disable();for(const t of p(this,tn).values())t.disable()}},iA=function(t){const e=p(this,En).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},BM=function(){let t=null;for(t of p(this,de));return t},of=function(){if(p(this,tn).size===0)return!0;if(p(this,tn).size===1)for(const t of p(this,tn).values())return t.isEmpty();return!1},sA=function(t){for(const e of p(this,de))e.unselect();p(this,de).clear();for(const e of t)e.isEmpty()||(p(this,de).add(e),e.select());N(this,dt,Yn).call(this,{hasSelectedEditor:this.hasSelection})},Mt(Ru,"TRANSLATE_SMALL",1),Mt(Ru,"TRANSLATE_BIG",10);let xc=Ru;var Qr,Zr,xs,Jr,Ni,Gu,ws,rp,rA;const Vr=class Vr{constructor(t){M(this,rp);M(this,Qr,"");M(this,Zr,!1);M(this,xs,null);M(this,Jr,null);M(this,Ni,null);M(this,Gu,!1);M(this,ws,null);k(this,ws,t)}static initialize(t){Vr._l10nPromise||(Vr._l10nPromise=t)}async render(){const t=k(this,xs,document.createElement("button"));t.className="altText";const e=await Vr._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const n=p(this,ws)._uiManager._signal;t.addEventListener("contextmenu",pi,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),p(this,ws)._uiManager.editAltText(p(this,ws))};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(k(this,Gu,!0),a(o))},{signal:n}),await N(this,rp,rA).call(this),t}finish(){p(this,xs)&&(p(this,xs).focus({focusVisible:p(this,Gu)}),k(this,Gu,!1))}isEmpty(){return!p(this,Qr)&&!p(this,Zr)}get data(){return{altText:p(this,Qr),decorative:p(this,Zr)}}set data({altText:t,decorative:e}){p(this,Qr)===t&&p(this,Zr)===e||(k(this,Qr,t),k(this,Zr,e),N(this,rp,rA).call(this))}toggle(t=!1){p(this,xs)&&(!t&&p(this,Ni)&&(clearTimeout(p(this,Ni)),k(this,Ni,null)),p(this,xs).disabled=!t)}destroy(){var t;(t=p(this,xs))==null||t.remove(),k(this,xs,null),k(this,Jr,null)}};Qr=new WeakMap,Zr=new WeakMap,xs=new WeakMap,Jr=new WeakMap,Ni=new WeakMap,Gu=new WeakMap,ws=new WeakMap,rp=new WeakSet,rA=async function(){var a;const t=p(this,xs);if(!t)return;if(!p(this,Qr)&&!p(this,Zr)){t.classList.remove("done"),(a=p(this,Jr))==null||a.remove();return}t.classList.add("done"),Vr._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(o=>{t.setAttribute("aria-label",o)});let e=p(this,Jr);if(!e){k(this,Jr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const o=e.id=`alt-text-tooltip-${p(this,ws).id}`;t.setAttribute("aria-describedby",o);const c=100,u=p(this,ws)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(p(this,Ni)),k(this,Ni,null)},{once:!0}),t.addEventListener("mouseenter",()=>{k(this,Ni,setTimeout(()=>{k(this,Ni,null),p(this,Jr).classList.add("show"),p(this,ws)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:u}),t.addEventListener("mouseleave",()=>{var d;p(this,Ni)&&(clearTimeout(p(this,Ni)),k(this,Ni,null)),(d=p(this,Jr))==null||d.classList.remove("show")},{signal:u})}e.innerText=p(this,Zr)?await Vr._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):p(this,Qr),e.parentNode||t.append(e);const n=p(this,ws).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},Mt(Vr,"_l10nPromise",null);let dv=Vr;var Rl,As,In,$u,Nl,Tn,Ml,Xu,Yu,zn,ap,Dl,fo,op,Ll,ta,Ys,Ku,Wu,ts,lp,Cv,Vt,aA,cp,oA,lA,HM,VM,cA,uA,hA,qM,GM,$M,XM,dA,lf;const we=class we{constructor(t){M(this,Vt);M(this,Rl,null);M(this,As,null);M(this,In,null);M(this,$u,!1);M(this,Nl,!1);M(this,Tn,null);M(this,Ml,null);M(this,Xu,this.focusin.bind(this));M(this,Yu,this.focusout.bind(this));M(this,zn,null);M(this,ap,"");M(this,Dl,!1);M(this,fo,null);M(this,op,!1);M(this,Ll,!1);M(this,ta,!1);M(this,Ys,null);M(this,Ku,0);M(this,Wu,0);M(this,ts,null);Mt(this,"_initialOptions",Object.create(null));Mt(this,"_isVisible",!0);Mt(this,"_uiManager",null);Mt(this,"_focusEventsAllowed",!0);Mt(this,"_l10nPromise",null);M(this,lp,!1);M(this,Cv,we._zIndex++);this.constructor===we&&ve("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=we.prototype._resizeWithKeyboard,e=xc.TRANSLATE_SMALL,n=xc.TRANSLATE_BIG;return ee(this,"_resizerKeyboardManager",new Eg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],we.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ee(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new J6({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,n){if(we._l10nPromise||(we._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(o=>[o,t.get(o.replaceAll(/([A-Z])/g,c=>`-${c.toLowerCase()}`))]))),n!=null&&n.strings)for(const o of n.strings)we._l10nPromise.set(o,t.get(o));if(we._borderLineWidth!==-1)return;const a=getComputedStyle(document.documentElement);we._borderLineWidth=parseFloat(a.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ve("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return p(this,lp)}set _isDraggable(t){var e;k(this,lp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=p(this,Cv)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):N(this,Vt,lf).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(p(this,Dl)?k(this,Dl,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[o,c]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/o,this.y=(e+a)/c,this.fixAndSetPosition()}translate(t,e){N(this,Vt,aA).call(this,this.parentDimensions,t,e)}translateInPage(t,e){p(this,fo)||k(this,fo,[this.x,this.y]),N(this,Vt,aA).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){p(this,fo)||k(this,fo,[this.x,this.y]);const[n,a]=this.parentDimensions;if(this.x+=t/n,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,d]=this.getBaseTranslation();o+=u,c+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!p(this,fo)&&(p(this,fo)[0]!==this.x||p(this,fo)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=we,a=n/t,o=n/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:a,y:o,width:c,height:u}=this;if(c*=e,u*=n,a*=e,o*=n,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(e-c,a)),o=Math.max(0,Math.min(n-u,o));break;case 90:a=Math.max(0,Math.min(e-u,a)),o=Math.min(n,Math.max(c,o));break;case 180:a=Math.min(e,Math.max(c,a)),o=Math.min(n,Math.max(u,o));break;case 270:a=Math.min(e,Math.max(u,a)),o=Math.max(0,Math.min(n-c,o));break}this.x=a/=e,this.y=o/=n;const[d,f]=this.getBaseTranslation();a+=d,o+=f;const{style:g}=this.div;g.left=`${(100*a).toFixed(2)}%`,g.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return N(n=we,cp,oA).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return N(n=we,cp,oA).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this,a=e*t,o=n*t;return di.isCSSRoundSupported?[Math.round(a),Math.round(o)]:[a,o]}setDims(t,e){const[n,a]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,p(this,Nl)||(this.div.style.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,a=n.endsWith("%"),o=!p(this,Nl)&&e.endsWith("%");if(a&&o)return;const[c,u]=this.parentDimensions;a||(t.width=`${(100*parseFloat(n)/c).toFixed(2)}%`),!p(this,Nl)&&!o&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=p(this,In))==null||t.finish()}async addEditToolbar(){return p(this,zn)||p(this,Ll)?p(this,zn):(k(this,zn,new Kw(this)),this.div.append(p(this,zn).render()),p(this,In)&&p(this,zn).addAltTextButton(await p(this,In).render()),p(this,zn))}removeEditToolbar(){var t;p(this,zn)&&(p(this,zn).remove(),k(this,zn,null),(t=p(this,In))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){p(this,In)||(dv.initialize(we._l10nPromise),k(this,In,new dv(this)),p(this,Rl)&&(p(this,In).data=p(this,Rl),k(this,Rl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=p(this,In))==null?void 0:t.data}set altTextData(t){p(this,In)&&(p(this,In).data=t)}hasAltText(){var t;return!((t=p(this,In))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=p(this,$u)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",p(this,Xu),{signal:t}),this.div.addEventListener("focusout",p(this,Yu),{signal:t});const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),hv(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=di.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(k(this,Dl,!0),this._isDraggable){N(this,Vt,qM).call(this,t);return}N(this,Vt,hA).call(this,t)}moveInDOM(){p(this,Ys)&&clearTimeout(p(this,Ys)),k(this,Ys,setTimeout(()=>{var t;k(this,Ys,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,g=e/a,y=this.x*o,b=this.y*c,w=this.width*o,A=this.height*c;switch(n){case 0:return[y+f+u,c-b-g-A+d,y+f+w+u,c-b-g+d];case 90:return[y+g+u,c-b+f+d,y+g+A+u,c-b+f+w+d];case 180:return[y-f-w+u,c-b+g+d,y-f+u,c-b+g+A+d];case 270:return[y-g-A+u,c-b-f-w+d,y-g+u,c-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,o,c]=t,u=o-n,d=c-a;switch(this.rotation){case 0:return[n,e-c,u,d];case 90:return[n,e-a,d,u];case 180:return[o,e-a,u,d];case 270:return[o,e-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){k(this,Ll,!0)}disableEditMode(){k(this,Ll,!1)}isInEditMode(){return p(this,Ll)}shouldGetKeyboardEvents(){return p(this,ta)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,n;const t=this._uiManager._signal;(e=this.div)==null||e.addEventListener("focusin",p(this,Xu),{signal:t}),(n=this.div)==null||n.addEventListener("focusout",p(this,Yu),{signal:t})}rotate(t){}serialize(t=!1,e=null){ve("An editor must be serializable")}static deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});a.rotation=t.rotation,k(a,Rl,t.accessibilityData);const[o,c]=a.pageDimensions,[u,d,f,g]=a.getRectInCurrentCoords(t.rect,c);return a.x=u/o,a.y=d/c,a.width=f/o,a.height=g/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",p(this,Xu)),this.div.removeEventListener("focusout",p(this,Yu)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),p(this,Ys)&&(clearTimeout(p(this,Ys)),k(this,Ys,null)),N(this,Vt,lf).call(this),this.removeEditToolbar(),p(this,ts)){for(const t of p(this,ts).values())clearTimeout(t);k(this,ts,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(N(this,Vt,HM).call(this),p(this,Tn).classList.remove("hidden"),hv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),k(this,Ml,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=p(this,Tn).children;if(!p(this,As)){k(this,As,Array.from(e));const c=N(this,Vt,GM).bind(this),u=N(this,Vt,$M).bind(this),d=this._uiManager._signal;for(const f of p(this,As)){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",N(this,Vt,XM).bind(this,g),{signal:d}),we._l10nPromise.get(`pdfjs-editor-resizer-label-${g}`).then(y=>f.setAttribute("aria-label",y))}}const n=p(this,As)[0];let a=0;for(const c of e){if(c===n)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(p(this,As).length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)p(this,Tn).append(p(this,Tn).firstChild);else if(o>a)for(let u=0;u<o-a;u++)p(this,Tn).firstChild.before(p(this,Tn).lastChild);let c=0;for(const u of e){const f=p(this,As)[c++].getAttribute("data-resizer-name");we._l10nPromise.get(`pdfjs-editor-resizer-label-${f}`).then(g=>u.setAttribute("aria-label",g))}}N(this,Vt,dA).call(this,0),k(this,ta,!0),p(this,Tn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){p(this,ta)&&N(this,Vt,uA).call(this,p(this,ap),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){N(this,Vt,lf).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!p(this,zn)){this.addEditToolbar().then(()=>{var n,a;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((a=p(this,zn))==null||a.show())});return}(e=p(this,zn))==null||e.show()}unselect(){var t,e,n,a;(t=p(this,Tn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=p(this,zn))==null||a.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return p(this,op)}set isEditing(t){k(this,op,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){k(this,Nl,!0);const n=t/e,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){p(this,ts)||k(this,ts,new Map);const{action:n}=t;let a=p(this,ts).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),p(this,ts).delete(n),p(this,ts).size===0&&k(this,ts,null)},we._telemetryTimeout),p(this,ts).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),k(this,$u,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(this,$u,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Rl=new WeakMap,As=new WeakMap,In=new WeakMap,$u=new WeakMap,Nl=new WeakMap,Tn=new WeakMap,Ml=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,zn=new WeakMap,ap=new WeakMap,Dl=new WeakMap,fo=new WeakMap,op=new WeakMap,Ll=new WeakMap,ta=new WeakMap,Ys=new WeakMap,Ku=new WeakMap,Wu=new WeakMap,ts=new WeakMap,lp=new WeakMap,Cv=new WeakMap,Vt=new WeakSet,aA=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this.fixAndSetPosition()},cp=new WeakSet,oA=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},lA=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},HM=function(){if(p(this,Tn))return;k(this,Tn,document.createElement("div")),p(this,Tn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");p(this,Tn).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",N(this,Vt,VM).bind(this,n),{signal:e}),a.addEventListener("contextmenu",pi,{signal:e}),a.tabIndex=-1}this.div.prepend(p(this,Tn))},VM=function(t,e){var S;e.preventDefault();const{isMac:n}=di.platform;if(e.button!==0||e.ctrlKey&&n)return;(S=p(this,In))==null||S.toggle(!1);const a=N(this,Vt,uA).bind(this,t),o=this._isDraggable;this._isDraggable=!1;const c=this._uiManager._signal,u={passive:!0,capture:!0,signal:c};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",a,u),window.addEventListener("contextmenu",pi,{signal:c});const d=this.x,f=this.y,g=this.width,y=this.height,b=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const A=()=>{var C;this.parent.togglePointerEvents(!0),(C=p(this,In))==null||C.toggle(!0),this._isDraggable=o,window.removeEventListener("pointerup",A),window.removeEventListener("blur",A),window.removeEventListener("pointermove",a,u),window.removeEventListener("contextmenu",pi),this.parent.div.style.cursor=b,this.div.style.cursor=w,N(this,Vt,cA).call(this,d,f,g,y)};window.addEventListener("pointerup",A,{signal:c}),window.addEventListener("blur",A,{signal:c})},cA=function(t,e,n,a){const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===e&&u===n&&d===a||this.addCommands({cmd:()=>{this.width=u,this.height=d,this.x=o,this.y=c;const[f,g]=this.parentDimensions;this.setDims(f*u,g*d),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=a,this.x=t,this.y=e;const[f,g]=this.parentDimensions;this.setDims(f*n,g*a),this.fixAndSetPosition()},mustExec:!0})},uA=function(t,e){const[n,a]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,f=we.MIN_SIZE/n,g=we.MIN_SIZE/a,y=q=>Math.round(q*1e4)/1e4,b=N(this,Vt,lA).call(this,this.rotation),w=(q,X)=>[b[0]*q+b[2]*X,b[1]*q+b[3]*X],A=N(this,Vt,lA).call(this,360-this.rotation),S=(q,X)=>[A[0]*q+A[2]*X,A[1]*q+A[3]*X];let C,T,D=!1,L=!1;switch(t){case"topLeft":D=!0,C=(q,X)=>[0,0],T=(q,X)=>[q,X];break;case"topMiddle":C=(q,X)=>[q/2,0],T=(q,X)=>[q/2,X];break;case"topRight":D=!0,C=(q,X)=>[q,0],T=(q,X)=>[0,X];break;case"middleRight":L=!0,C=(q,X)=>[q,X/2],T=(q,X)=>[0,X/2];break;case"bottomRight":D=!0,C=(q,X)=>[q,X],T=(q,X)=>[0,0];break;case"bottomMiddle":C=(q,X)=>[q/2,X],T=(q,X)=>[q/2,0];break;case"bottomLeft":D=!0,C=(q,X)=>[0,X],T=(q,X)=>[q,0];break;case"middleLeft":L=!0,C=(q,X)=>[0,X/2],T=(q,X)=>[q,X/2];break}const P=C(u,d),z=T(u,d);let U=w(...z);const O=y(o+U[0]),H=y(c+U[1]);let Z=1,$=1,[W,it]=this.screenToPageTranslation(e.movementX,e.movementY);if([W,it]=S(W/n,it/a),D){const q=Math.hypot(u,d);Z=$=Math.max(Math.min(Math.hypot(z[0]-P[0]-W,z[1]-P[1]-it)/q,1/u,1/d),f/u,g/d)}else L?Z=Math.max(f,Math.min(1,Math.abs(z[0]-P[0]-W)))/u:$=Math.max(g,Math.min(1,Math.abs(z[1]-P[1]-it)))/d;const ct=y(u*Z),lt=y(d*$);U=w(...T(ct,lt));const nt=O-U[0],I=H-U[1];this.width=ct,this.height=lt,this.x=nt,this.y=I,this.setDims(n*ct,a*lt),this.fixAndSetPosition()},hA=function(t){const{isMac:e}=di.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},qM=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let n,a;const o=this._uiManager._signal;e&&(this.div.classList.add("moving"),n={passive:!0,capture:!0,signal:o},k(this,Ku,t.clientX),k(this,Wu,t.clientY),a=u=>{const{clientX:d,clientY:f}=u,[g,y]=this.screenToPageTranslation(d-p(this,Ku),f-p(this,Wu));k(this,Ku,d),k(this,Wu,f),this._uiManager.dragSelectedEditors(g,y)},window.addEventListener("pointermove",a,n));const c=()=>{window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",a,n)),k(this,Dl,!1),this._uiManager.endDragSession()||N(this,Vt,hA).call(this,t)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},GM=function(t){we._resizerKeyboardManager.exec(this,t)},$M=function(t){var e;p(this,ta)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==p(this,Tn)&&N(this,Vt,lf).call(this)},XM=function(t){k(this,ap,p(this,ta)?t:"")},dA=function(t){if(p(this,As))for(const e of p(this,As))e.tabIndex=t},lf=function(){if(k(this,ta,!1),N(this,Vt,dA).call(this,-1),p(this,Ml)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=p(this,Ml);N(this,Vt,cA).call(this,t,e,n,a),k(this,Ml,null)}},M(we,cp),Mt(we,"_borderLineWidth",-1),Mt(we,"_colorManager",new Jw),Mt(we,"_zIndex",1),Mt(we,"_telemetryTimeout",1e3);let fe=we;class J6 extends fe{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Lk=3285377520,Zi=4294901760,Hs=65535;class YM{constructor(t){this.h1=t?t&4294967295:Lk,this.h2=t?t&4294967295:Lk}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let S=0,C=t.length;S<C;S++){const T=t.charCodeAt(S);T<=255?e[n++]=T:(e[n++]=T>>>8,e[n++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,o=n-a*4,c=new Uint32Array(e.buffer,0,a);let u=0,d=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,w=y&Hs,A=b&Hs;for(let S=0;S<a;S++)S&1?(u=c[S],u=u*y&Zi|u*w&Hs,u=u<<15|u>>>17,u=u*b&Zi|u*A&Hs,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[S],d=d*y&Zi|d*w&Hs,d=d<<15|d>>>17,d=d*b&Zi|d*A&Hs,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*y&Zi|u*w&Hs,u=u<<15|u>>>17,u=u*b&Zi|u*A&Hs,a&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Zi|t*36045&Hs,e=e*4283543511&Zi|((e<<16|t>>>16)*2950163797&Zi)>>>16,t^=e>>>1,t=t*444984403&Zi|t*60499&Hs,e=e*3301882366&Zi|((e<<16|t>>>16)*3120437893&Zi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const fA=Object.freeze({map:null,hash:"",transfer:void 0});var Ol,kn,Tv,KM;class Z_{constructor(){M(this,Tv);M(this,Ol,!1);M(this,kn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=p(this,kn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return p(this,kn).get(t)}remove(t){if(p(this,kn).delete(t),p(this,kn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of p(this,kn).values())if(e instanceof fe)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=p(this,kn).get(t);let a=!1;if(n!==void 0)for(const[o,c]of Object.entries(e))n[o]!==c&&(a=!0,n[o]=c);else a=!0,p(this,kn).set(t,e);a&&N(this,Tv,KM).call(this),e instanceof fe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return p(this,kn).has(t)}getAll(){return p(this,kn).size>0?G_(p(this,kn)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return p(this,kn).size}resetModified(){p(this,Ol)&&(k(this,Ol,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new WM(this)}get serializable(){if(p(this,kn).size===0)return fA;const t=new Map,e=new YM,n=[],a=Object.create(null);let o=!1;for(const[c,u]of p(this,kn)){const d=u instanceof fe?u.serialize(!1,a):u;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:fA}get editorStats(){let t=null;const e=new Map;for(const n of p(this,kn).values()){if(!(n instanceof fe))continue;const a=n.telemetryFinalData;if(!a)continue;const{type:o}=a;e.has(o)||e.set(o,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const c=t[o]||(t[o]=new Map);for(const[u,d]of Object.entries(a)){if(u==="type")continue;let f=c.get(u);f||(f=new Map,c.set(u,f));const g=f.get(d)??0;f.set(d,g+1)}}for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}}Ol=new WeakMap,kn=new WeakMap,Tv=new WeakSet,KM=function(){p(this,Ol)||(k(this,Ol,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var up;class WM extends Z_{constructor(e){super();M(this,up);const{map:n,hash:a,transfer:o}=e.serializable,c=structuredClone(n,o?{transfer:o}:null);k(this,up,{map:c,hash:a,transfer:o})}get print(){ve("Should not call PrintAnnotationStorage.print")}get serializable(){return p(this,up)}}up=new WeakMap;var Qu;class t8{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){M(this,Qu,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),p(this,Qu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||p(this,Qu).has(t.loadedName))){if(an(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:a,style:o}=t,c=new FontFace(n,a,o);this.addNativeFontFace(c);try{await c.load(),p(this,Qu).add(n),e==null||e(t)}catch{zt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}ve("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw zt(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return ee(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Bn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),ee(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(an(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ee(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(P,z){return P.charCodeAt(z)<<24|P.charCodeAt(z+1)<<16|P.charCodeAt(z+2)<<8|P.charCodeAt(z+3)&255}function a(P,z,U,O){const H=P.substring(0,z),Z=P.substring(z+U);return H+O+Z}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(P,z){if(++f>30){zt("Load test font never loaded."),z();return}if(d.font="30px "+P,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(g.bind(null,P,z))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const A=16,S=1482184792;let C=n(b,A);for(o=0,c=y.length-3;o<c;o+=4)C=C-S+n(y,o)|0;o<y.length&&(C=C-S+n(y+"XXX",o)|0),b=a(b,A,4,F6(C));const T=`url(data:font/opentype;base64,${btoa(b)});`,D=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(D);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const P of[t.loadedName,y]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=P,L.append(z)}this._document.body.append(L),g(y,()=>{L.remove(),e.complete()})}}Qu=new WeakMap;class e8{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var a;if(!this.data||this.disableFontFace)return null;const t=yM(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let o=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(o+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${o}src:${e}}`}return(a=this._inspectFont)==null||a.call(this,this,e),n}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(o){zt(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(o,c){};const a=[];for(let o=0,c=n.length;o<c;)switch(n[o++]){case Ur.BEZIER_CURVE_TO:{const[u,d,f,g,y,b]=n.slice(o,o+6);a.push(w=>w.bezierCurveTo(u,d,f,g,y,b)),o+=6}break;case Ur.MOVE_TO:{const[u,d]=n.slice(o,o+2);a.push(f=>f.moveTo(u,d)),o+=2}break;case Ur.LINE_TO:{const[u,d]=n.slice(o,o+2);a.push(f=>f.lineTo(u,d)),o+=2}break;case Ur.QUADRATIC_CURVE_TO:{const[u,d,f,g]=n.slice(o,o+4);a.push(y=>y.quadraticCurveTo(u,d,f,g)),o+=4}break;case Ur.RESTORE:a.push(u=>u.restore());break;case Ur.SAVE:a.push(u=>u.save());break;case Ur.SCALE:an(a.length===2,"Scale command is only valid at the third position.");break;case Ur.TRANSFORM:{const[u,d,f,g,y,b]=n.slice(o,o+6);a.push(w=>w.transform(u,d,f,g,y,b)),o+=6}break;case Ur.TRANSLATE:{const[u,d]=n.slice(o,o+2);a.push(f=>f.translate(u,d)),o+=2}break}return this.compiledGlyphs[e]=function(c,u){a[0](c),a[1](c),c.scale(u,-u);for(let d=2,f=a.length;d<f;d++)a[d](c)}}}if(Bn){var pA=Promise.withResolvers(),Af=null;(async()=>{const t=await yl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await yl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await yl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),a=await yl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:t,http:e,https:n,url:a,canvas:o,path2d:c}))})().then(t=>{Af=t,pA.resolve()},t=>{zt(`loadPackages: ${t}`),Af=new Map,pA.resolve()})}class yr{static get promise(){return pA.promise}static get(t){return Af==null?void 0:Af.get(t)}}const QM=function(s){return yr.get("fs").promises.readFile(s).then(e=>new Uint8Array(e))};class n8 extends lb{}class i8 extends uv{_createCanvas(t,e){return yr.get("canvas").createCanvas(t,e)}}class s8 extends cb{_fetchData(t,e){return QM(t).then(n=>({cMapData:n,compressionType:e}))}}class r8 extends ub{_fetchData(t){return QM(t)}}const Qn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function gA(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),s.clip(a)}class Cg{constructor(){this.constructor===Cg&&ve("Cannot initialize BaseShadingPattern.")}getPattern(){ve("Abstract method `getPattern` called.")}}class a8 extends Cg{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let o;if(a===Qn.STROKE||a===Qn.FILL){const c=e.current.getClippedPathBoundingBox(a,Pe(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d,!0),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),n=At.transform(n,[1,0,0,1,c[0],c[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),gA(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else gA(t,this._bbox),o=this._createGradient(t);return o}}function fw(s,t,e,n,a,o,c,u){const d=t.coords,f=t.colors,g=s.data,y=s.width*4;let b;d[e+1]>d[n+1]&&(b=e,e=n,n=b,b=o,o=c,c=b),d[n+1]>d[a+1]&&(b=n,n=a,a=b,b=c,c=u,u=b),d[e+1]>d[n+1]&&(b=e,e=n,n=b,b=o,o=c,c=b);const w=(d[e]+t.offsetX)*t.scaleX,A=(d[e+1]+t.offsetY)*t.scaleY,S=(d[n]+t.offsetX)*t.scaleX,C=(d[n+1]+t.offsetY)*t.scaleY,T=(d[a]+t.offsetX)*t.scaleX,D=(d[a+1]+t.offsetY)*t.scaleY;if(A>=D)return;const L=f[o],P=f[o+1],z=f[o+2],U=f[c],O=f[c+1],H=f[c+2],Z=f[u],$=f[u+1],W=f[u+2],it=Math.round(A),ct=Math.round(D);let lt,nt,I,q,X,_t,Ct,j;for(let G=it;G<=ct;G++){if(G<C){const ht=G<A?0:(A-G)/(A-C);lt=w-(w-S)*ht,nt=L-(L-U)*ht,I=P-(P-O)*ht,q=z-(z-H)*ht}else{let ht;G>D?ht=1:C===D?ht=0:ht=(C-G)/(C-D),lt=S-(S-T)*ht,nt=U-(U-Z)*ht,I=O-(O-$)*ht,q=H-(H-W)*ht}let tt;G<A?tt=0:G>D?tt=1:tt=(A-G)/(A-D),X=w-(w-T)*tt,_t=L-(L-Z)*tt,Ct=P-(P-$)*tt,j=z-(z-W)*tt;const ot=Math.round(Math.min(lt,X)),pt=Math.round(Math.max(lt,X));let wt=y*G+ot*4;for(let ht=ot;ht<=pt;ht++)tt=(lt-ht)/(lt-X),tt<0?tt=0:tt>1&&(tt=1),g[wt++]=nt-(nt-_t)*tt|0,g[wt++]=I-(I-Ct)*tt|0,g[wt++]=q-(q-j)*tt|0,g[wt++]=255}}function o8(s,t,e){const n=t.coords,a=t.colors;let o,c;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<f;y++,g++)fw(s,e,n[g],n[g+1],n[g+u],a[g],a[g+1],a[g+u]),fw(s,e,n[g+u+1],n[g+1],n[g+u],a[g+u+1],a[g+1],a[g+u])}break;case"triangles":for(o=0,c=n.length;o<c;o+=3)fw(s,e,n[o],n[o+1],n[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class l8 extends Cg{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),w=f/y,A=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/w,scaleY:1/A},C=y+4,T=b+4,D=n.getCanvas("mesh",C,T,!1),L=D.context,P=L.createImageData(y,b);if(e){const U=P.data;for(let O=0,H=U.length;O<H;O+=4)U[O]=e[0],U[O+1]=e[1],U[O+2]=e[2],U[O+3]=255}for(const U of this._figures)o8(P,U,S);return L.putImageData(P,2,2),{canvas:D.canvas,offsetX:u-2*w,offsetY:d-2*A,scaleX:w,scaleY:A}}getPattern(t,e,n,a){gA(t,this._bbox);let o;if(a===Qn.SHADING)o=At.singularValueDecompose2dScale(Pe(t));else if(o=At.singularValueDecompose2dScale(e.baseTransform),this.matrix){const u=At.singularValueDecompose2dScale(this.matrix);o=[o[0]*u[0],o[1]*u[1]]}const c=this._createMeshCanvas(o,a===Qn.SHADING?null:this._background,e.cachedCanvases);return a!==Qn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class c8 extends Cg{getPattern(){return"hotpink"}}function u8(s){switch(s[0]){case"RadialAxial":return new a8(s);case"Mesh":return new l8(s);case"Dummy":return new c8}throw new Error(`Unknown IR type: ${s[0]}`)}const Ok={COLORED:1,UNCOLORED:2},kv=class kv{constructor(t,e,n,a,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=a,this.baseTransform=o}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,a=this.xstep,o=this.ystep,c=this.paintType,u=this.tilingType,d=this.color,f=this.canvasGraphicsFactory;rb("TilingType: "+u);const g=n[0],y=n[1],b=n[2],w=n[3],A=At.singularValueDecompose2dScale(this.matrix),S=At.singularValueDecompose2dScale(this.baseTransform),C=[A[0]*S[0],A[1]*S[1]],T=this.getSizeAndScale(a,this.ctx.canvas.width,C[0]),D=this.getSizeAndScale(o,this.ctx.canvas.height,C[1]),L=t.cachedCanvases.getCanvas("pattern",T.size,D.size,!0),P=L.context,z=f.createCanvasGraphics(P);z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(z,c,d);let U=g,O=y,H=b,Z=w;return g<0&&(U=0,H+=Math.abs(g)),y<0&&(O=0,Z+=Math.abs(y)),P.translate(-(T.scale*U),-(D.scale*O)),z.transform(T.scale,0,0,D.scale,0,0),P.save(),this.clipBbox(z,U,O,H,Z),z.baseTransform=Pe(z.ctx),z.executeOperatorList(e),z.endDrawing(),{canvas:L.canvas,scaleX:T.scale,scaleY:D.scale,offsetX:U,offsetY:O}}getSizeAndScale(t,e,n){t=Math.abs(t);const a=Math.max(kv.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=a?o=a:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,a,o){const c=a-e,u=o-n;t.ctx.rect(e,n,c,u),t.current.updateRectMinMax(Pe(t.ctx),[e,n,a,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,o=t.current;switch(e){case Ok.COLORED:const c=this.ctx;a.fillStyle=c.fillStyle,a.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case Ok.UNCOLORED:const u=At.makeHexColor(n[0],n[1],n[2]);a.fillStyle=u,a.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new P6(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,a){let o=n;a!==Qn.SHADING&&(o=At.transform(o,e.baseTransform),this.matrix&&(o=At.transform(o,this.matrix)));const c=this.createPatternCanvas(e);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(u),d}};Mt(kv,"MAX_PATTERN_SIZE",3e3);let mA=kv;function h8({src:s,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=di.isLittleEndian?4278190080:255,[d,f]=c?[o,u]:[u,o],g=n>>3,y=n&7,b=s.length;e=new Uint32Array(e.buffer);let w=0;for(let A=0;A<a;A++){for(const C=t+g;t<C;t++){const T=t<b?s[t]:255;e[w++]=T&128?f:d,e[w++]=T&64?f:d,e[w++]=T&32?f:d,e[w++]=T&16?f:d,e[w++]=T&8?f:d,e[w++]=T&4?f:d,e[w++]=T&2?f:d,e[w++]=T&1?f:d}if(y===0)continue;const S=t<b?s[t++]:255;for(let C=0;C<y;C++)e[w++]=S&1<<7-C?f:d}return{srcPos:t,destPos:w}}const jk=16,Pk=100,d8=15,Fk=10,Ik=1e3,hi=16;function f8(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(n,a){t.translate(n,a),this.__originalTranslate(n,a)},s.scale=function(n,a){t.scale(n,a),this.__originalScale(n,a)},s.transform=function(n,a,o,c,u,d){t.transform(n,a,o,c,u,d),this.__originalTransform(n,a,o,c,u,d)},s.setTransform=function(n,a,o,c,u,d){t.setTransform(n,a,o,c,u,d),this.__originalSetTransform(n,a,o,c,u,d)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){t.rotate(n),this.__originalRotate(n)},s.clip=function(n){t.clip(n),this.__originalClip(n)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,a,o,c,u){t.bezierCurveTo(e,n,a,o,c,u),this.__originalBezierCurveTo(e,n,a,o,c,u)},s.rect=function(e,n,a,o){t.rect(e,n,a,o),this.__originalRect(e,n,a,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class p8{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function sy(s,t,e,n,a,o,c,u,d,f){const[g,y,b,w,A,S]=Pe(s);if(y===0&&b===0){const D=c*g+A,L=Math.round(D),P=u*w+S,z=Math.round(P),U=(c+d)*g+A,O=Math.abs(Math.round(U)-L)||1,H=(u+f)*w+S,Z=Math.abs(Math.round(H)-z)||1;return s.setTransform(Math.sign(g),0,0,Math.sign(w),L,z),s.drawImage(t,e,n,a,o,0,0,O,Z),s.setTransform(g,y,b,w,A,S),[O,Z]}if(g===0&&w===0){const D=u*b+A,L=Math.round(D),P=c*y+S,z=Math.round(P),U=(u+f)*b+A,O=Math.abs(Math.round(U)-L)||1,H=(c+d)*y+S,Z=Math.abs(Math.round(H)-z)||1;return s.setTransform(0,Math.sign(y),Math.sign(b),0,L,z),s.drawImage(t,e,n,a,o,0,0,Z,O),s.setTransform(g,y,b,w,A,S),[Z,O]}s.drawImage(t,e,n,a,o,c,u,d,f);const C=Math.hypot(g,y),T=Math.hypot(b,w);return[C*d,T*f]}function g8(s){const{width:t,height:e}=s;if(t>Ik||e>Ik)return null;const n=1e3,a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let c=new Uint8Array(o*(e+1)),u,d,f;const g=t+7&-8;let y=new Uint8Array(g*e),b=0;for(const T of s.data){let D=128;for(;D>0;)y[b++]=T&D?0:255,D>>=1}let w=0;for(b=0,y[b]!==0&&(c[0]=1,++w),d=1;d<t;d++)y[b]!==y[b+1]&&(c[d]=y[b]?2:1,++w),b++;for(y[b]!==0&&(c[d]=2,++w),u=1;u<e;u++){b=u*g,f=u*o,y[b-g]!==y[b]&&(c[f]=y[b]?1:8,++w);let T=(y[b]?4:0)+(y[b-g]?8:0);for(d=1;d<t;d++)T=(T>>2)+(y[b+1]?4:0)+(y[b-g+1]?8:0),a[T]&&(c[f+d]=a[T],++w),b++;if(y[b-g]!==y[b]&&(c[f+d]=y[b]?2:4,++w),w>n)return null}for(b=g*(e-1),f=u*o,y[b]!==0&&(c[f]=8,++w),d=1;d<t;d++)y[b]!==y[b+1]&&(c[f+d]=y[b]?4:8,++w),b++;if(y[b]!==0&&(c[f+d]=4,++w),w>n)return null;const A=new Int32Array([0,o,-1,0,-o,0,0,0,1]),S=new Path2D;for(u=0;w&&u<=e;u++){let T=u*o;const D=T+t;for(;T<D&&!c[T];)T++;if(T===D)continue;S.moveTo(T%o,u);const L=T;let P=c[T];do{const z=A[P];do T+=z;while(!c[T]);const U=c[T];U!==5&&U!==10?(P=U,c[T]=0):(P=U&51*P>>4,c[T]&=P>>2|P<<2),S.lineTo(T%o,T/o|0),c[T]||--w}while(L!==T);--u}return y=null,c=null,function(T){T.save(),T.scale(1/t,-1/e),T.translate(0,-e),T.fill(S),T.beginPath(),T.restore()}}class zk{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=gM,this.textMatrixScale=1,this.fontMatrix=Hw,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Pn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=At.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=At.applyTransform(e,t),a=At.applyTransform(e.slice(2),t),o=At.applyTransform([e[0],e[3]],t),c=At.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],a[0],o[0],c[0]),this.minY=Math.min(this.minY,n[1],a[1],o[1],c[1]),this.maxX=Math.max(this.maxX,n[0],a[0],o[0],c[0]),this.maxY=Math.max(this.maxY,n[1],a[1],o[1],c[1])}updateScalingPathMinMax(t,e){At.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,a,o,c,u,d,f,g){const y=At.bezierBoundingBox(e,n,a,o,c,u,d,f,g);g||this.updateRectMinMax(t,y)}getPathBoundingBox(t=Qn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Qn.STROKE){e||ve("Stroke bounding box must include transform.");const a=At.singularValueDecompose2dScale(e),o=a[0]*this.lineWidth/2,c=a[1]*this.lineWidth/2;n[0]-=o,n[1]-=c,n[2]+=o,n[3]+=c}return n}updateClipFromPath(){const t=At.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Qn.FILL,e=null){return At.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Uk(s,t){if(typeof ImageData<"u"&&t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%hi,o=(e-a)/hi,c=a===0?o:o+1,u=s.createImageData(n,hi);let d=0,f;const g=t.data,y=u.data;let b,w,A,S;if(t.kind===wy.GRAYSCALE_1BPP){const C=g.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),D=T.length,L=n+7>>3,P=4294967295,z=di.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(A=b<o?hi:a,f=0,w=0;w<A;w++){const U=C-d;let O=0;const H=U>L?n:U*8-7,Z=H&-8;let $=0,W=0;for(;O<Z;O+=8)W=g[d++],T[f++]=W&128?P:z,T[f++]=W&64?P:z,T[f++]=W&32?P:z,T[f++]=W&16?P:z,T[f++]=W&8?P:z,T[f++]=W&4?P:z,T[f++]=W&2?P:z,T[f++]=W&1?P:z;for(;O<H;O++)$===0&&(W=g[d++],$=128),T[f++]=W&$?P:z,$>>=1}for(;f<D;)T[f++]=0;s.putImageData(u,0,b*hi)}}else if(t.kind===wy.RGBA_32BPP){for(w=0,S=n*hi*4,b=0;b<o;b++)y.set(g.subarray(d,d+S)),d+=S,s.putImageData(u,0,w),w+=hi;b<c&&(S=n*a*4,y.set(g.subarray(d,d+S)),s.putImageData(u,0,w))}else if(t.kind===wy.RGB_24BPP)for(A=hi,S=n*A,b=0;b<c;b++){for(b>=o&&(A=a,S=n*A),f=0,w=S;w--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;s.putImageData(u,0,b*hi)}else throw new Error(`bad image kind: ${t.kind}`)}function Bk(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%hi,o=(e-a)/hi,c=a===0?o:o+1,u=s.createImageData(n,hi);let d=0;const f=t.data,g=u.data;for(let y=0;y<c;y++){const b=y<o?hi:a;({srcPos:d}=h8({src:f,srcPos:d,dest:g,width:n,height:b,nonBlackColor:0})),s.putImageData(u,0,y*hi)}}function Zd(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function ry(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!Bn){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function Hk(s,t){if(t)return!0;const e=At.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Fo.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const m8=["butt","round","square"],y8=["miter","round","bevel"],v8={},Vk={};var zo,yA,vA;const sS=class sS{constructor(t,e,n,a,o,{optionalContentConfig:c,markedContentStack:u=null},d,f){M(this,zo);this.ctx=t,this.current=new zk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new p8(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Pe(this.compositeCtx))}this.ctx.save(),ry(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Pe(this.ctx)}executeOperatorList(t,e,n,a){const o=t.argsArray,c=t.fnArray;let u=e||0;const d=o.length;if(d===u)return u;const f=d-u>Fk&&typeof n=="function",g=f?Date.now()+d8:0;let y=0;const b=this.commonObjs,w=this.objs;let A;for(;;){if(a!==void 0&&u===a.nextBreakPoint)return a.breakIt(u,n),u;if(A=c[u],A!==ys.dependency)this[A].apply(this,o[u]);else for(const S of o[u]){const C=S.startsWith("g_")?b:w;if(!C.has(S))return C.get(S,n),u}if(u++,u===d)return u;if(f&&++y>Fk){if(Date.now()>g)return n(),u;y=0}}}endDrawing(){N(this,zo,yA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),N(this,zo,vA).call(this)}_scaleImage(t,e){const n=t.width,a=t.height;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=a,f="prescale1",g,y;for(;o>2&&u>1||c>2&&d>1;){let b=u,w=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),c>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/w),g=this.cachedCanvases.getCanvas(f,b,w),y=g.context,y.clearRect(0,0,b,w),y.drawImage(t,0,0,u,d,0,0,b,w),t=g.canvas,u=b,d=w,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:a}=t,o=this.current.fillColor,c=this.current.patternFill,u=Pe(e);let d,f,g,y;if((t.bitmap||t.data)&&t.count>1){const H=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(H),d||(d=new Map,this._cachedBitmapsMap.set(H,d));const Z=d.get(f);if(Z&&!c){const $=Math.round(Math.min(u[0],u[2])+u[4]),W=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:Z,offsetX:$,offsetY:W}}g=Z}g||(y=this.cachedCanvases.getCanvas("maskCanvas",n,a),Bk(y.context,t));let b=At.transform(u,[1/n,0,0,-1/a,0,0]);b=At.transform(b,[1,0,0,1,0,-a]);const[w,A,S,C]=At.getAxialAlignedBoundingBox([0,0,n,a],b),T=Math.round(S-w)||1,D=Math.round(C-A)||1,L=this.cachedCanvases.getCanvas("fillCanvas",T,D),P=L.context,z=w,U=A;P.translate(-z,-U),P.transform(...b),g||(g=this._scaleImage(y.canvas,Br(P)),g=g.img,d&&c&&d.set(f,g)),P.imageSmoothingEnabled=Hk(Pe(P),t.interpolate),sy(P,g,0,0,g.width,g.height,0,0,n,a),P.globalCompositeOperation="source-in";const O=At.transform(Br(P),[1,0,0,1,-z,-U]);return P.fillStyle=c?o.getPattern(e,this,O,Qn.FILL):o,P.fillRect(0,0,n,a),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,L.canvas)),{canvas:L.canvas,offsetX:Math.round(z),offsetY:Math.round(U)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=m8[t]}setLineJoin(t){this.ctx.lineJoin=y8[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=a.context;const o=this.ctx;o.setTransform(...Pe(this.suspendedCtx)),Zd(this.suspendedCtx,o),f8(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Zd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const o=a[0],c=a[1],u=a[2]-o,d=a[3]-c;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,o,c,u,d,f,g,y){let b=t.canvas,w=d-g,A=f-y;if(c){if(w<0||A<0||w+n>b.width||A+a>b.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,a),T=C.context;T.drawImage(b,-w,-A),c.some(D=>D!==0)&&(T.globalCompositeOperation="destination-atop",T.fillStyle=At.makeHexColor(...c),T.fillRect(0,0,n,a),T.globalCompositeOperation="source-over"),b=C.canvas,w=A=0}else if(c.some(C=>C!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(w,A,n,a),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=At.makeHexColor(...c),t.fillRect(w,A,n,a),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,n,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,w,A,n,a,d,f,n,a),e.restore()}save(){this.inSMaskMode?(Zd(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Zd(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,a,o,c){this.ctx.transform(t,e,n,a,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const a=this.ctx,o=this.current;let c=o.x,u=o.y,d,f;const g=Pe(a),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,b=y?n.slice(0):null;for(let w=0,A=0,S=t.length;w<S;w++)switch(t[w]|0){case ys.rectangle:c=e[A++],u=e[A++];const C=e[A++],T=e[A++],D=c+C,L=u+T;a.moveTo(c,u),C===0||T===0?a.lineTo(D,L):(a.lineTo(D,u),a.lineTo(D,L),a.lineTo(c,L)),y||o.updateRectMinMax(g,[c,u,D,L]),a.closePath();break;case ys.moveTo:c=e[A++],u=e[A++],a.moveTo(c,u),y||o.updatePathMinMax(g,c,u);break;case ys.lineTo:c=e[A++],u=e[A++],a.lineTo(c,u),y||o.updatePathMinMax(g,c,u);break;case ys.curveTo:d=c,f=u,c=e[A+4],u=e[A+5],a.bezierCurveTo(e[A],e[A+1],e[A+2],e[A+3],c,u),o.updateCurvePathMinMax(g,d,f,e[A],e[A+1],e[A+2],e[A+3],c,u,b),A+=6;break;case ys.curveTo2:d=c,f=u,a.bezierCurveTo(c,u,e[A],e[A+1],e[A+2],e[A+3]),o.updateCurvePathMinMax(g,d,f,c,u,e[A],e[A+1],e[A+2],e[A+3],b),c=e[A+2],u=e[A+3],A+=4;break;case ys.curveTo3:d=c,f=u,c=e[A+2],u=e[A+3],a.bezierCurveTo(e[A],e[A+1],c,u,c,u),o.updateCurvePathMinMax(g,d,f,e[A],e[A+1],c,u,c,u,b),A+=4;break;case ys.closePath:a.closePath();break}y&&o.updateScalingPathMinMax(g,b),o.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,Br(e),Qn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;let o=!1;a&&(e.save(),e.fillStyle=n.getPattern(e,this,Br(e),Qn.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),o&&e.restore(),t&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=v8}eoClip(){this.pendingClip=Vk}beginText(){this.current.textMatrix=gM,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const n=this.commonObjs.get(t),a=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=n.fontMatrix||Hw,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&zt("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const o=n.loadedName||"sans-serif",c=((g=n.systemFontInfo)==null?void 0:g.css)||`"${o}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const d=n.italic?"italic":"normal";let f=e;e<jk?f=jk:e>Pk&&(f=Pk),this.current.fontSizeScale=e/f,this.ctx.font=`${d} ${u} ${f}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,a,o,c){this.current.textMatrix=[t,e,n,a,o,c],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,a){const o=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,f=c.fontSize/c.fontSizeScale,g=d&Pn.FILL_STROKE_MASK,y=!!(d&Pn.ADD_TO_PATH_FLAG),b=c.patternFill&&!u.missingFile;let w;(u.disableFontFace||y||b)&&(w=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||b?(o.save(),o.translate(e,n),o.beginPath(),w(o,f),a&&o.setTransform(...a),(g===Pn.FILL||g===Pn.FILL_STROKE)&&o.fill(),(g===Pn.STROKE||g===Pn.FILL_STROKE)&&o.stroke(),o.restore()):((g===Pn.FILL||g===Pn.FILL_STROKE)&&o.fillText(t,e,n),(g===Pn.STROKE||g===Pn.FILL_STROKE)&&o.strokeText(t,e,n)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pe(o),x:e,y:n,fontSize:f,addToPath:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return ee(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const o=this.ctx,c=e.fontSizeScale,u=e.charSpacing,d=e.wordSpacing,f=e.fontDirection,g=e.textHScale*f,y=t.length,b=n.vertical,w=b?1:-1,A=n.defaultVMetrics,S=a*e.fontMatrix[0],C=e.textRenderingMode===Pn.FILL&&!n.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),f>0?o.scale(g,-1):o.scale(g,1);let T;if(e.patternFill){o.save();const U=e.fillColor.getPattern(o,this,Br(o),Qn.FILL);T=Pe(o),o.restore(),o.fillStyle=U}let D=e.lineWidth;const L=e.textMatrixScale;if(L===0||D===0){const U=e.textRenderingMode&Pn.FILL_STROKE_MASK;(U===Pn.STROKE||U===Pn.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=L;if(c!==1&&(o.scale(c,c),D/=c),o.lineWidth=D,n.isInvalidPDFjsFont){const U=[];let O=0;for(const H of t)U.push(H.unicode),O+=H.width;o.fillText(U.join(""),0,0),e.x+=O*S*g,o.restore(),this.compose();return}let P=0,z;for(z=0;z<y;++z){const U=t[z];if(typeof U=="number"){P+=w*U*a/1e3;continue}let O=!1;const H=(U.isSpace?d:0)+u,Z=U.fontChar,$=U.accent;let W,it,ct=U.width;if(b){const nt=U.vmetric||A,I=-(U.vmetric?nt[1]:ct*.5)*S,q=nt[2]*S;ct=nt?-nt[0]:ct,W=I/c,it=(P+q)/c}else W=P/c,it=0;if(n.remeasure&&ct>0){const nt=o.measureText(Z).width*1e3/a*c;if(ct<nt&&this.isFontSubpixelAAEnabled){const I=ct/nt;O=!0,o.save(),o.scale(I,1),W/=I}else ct!==nt&&(W+=(ct-nt)/2e3*a/c)}if(this.contentVisible&&(U.isInFont||n.missingFile)){if(C&&!$)o.fillText(Z,W,it);else if(this.paintChar(Z,W,it,T),$){const nt=W+a*$.offset.x/c,I=it-a*$.offset.y/c;this.paintChar($.fontChar,nt,I,T)}}const lt=b?ct*S-H*f:ct*S+H*f;P+=lt,O&&o.restore()}b?e.y-=P:e.x+=P*g,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,a=n.font,o=n.fontSize,c=n.fontDirection,u=a.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,g=n.textHScale*c,y=n.fontMatrix||Hw,b=t.length,w=n.textRenderingMode===Pn.INVISIBLE;let A,S,C,T;if(!(w||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(g,c),A=0;A<b;++A){if(S=t[A],typeof S=="number"){T=u*S*o/1e3,this.ctx.translate(T,0),n.x+=T*g;continue}const D=(S.isSpace?f:0)+d,L=a.charProcOperatorList[S.operatorListId];if(!L){zt(`Type3 character "${S.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=S,this.save(),e.scale(o,o),e.transform(...y),this.executeOperatorList(L),this.restore()),C=At.applyTransform([S.width,0],y)[0]*o+D,e.translate(C,0),n.x+=C*g}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,a,o,c){this.ctx.rect(n,a,o-n,c-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],a=this.baseTransform||Pe(this.ctx),o={createCanvasGraphics:c=>new sS(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new mA(t,n,this.ctx,o,a)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const a=At.makeHexColor(t,e,n);this.ctx.strokeStyle=a,this.current.strokeColor=a}setFillRGBColor(t,e,n){const a=At.makeHexColor(t,e,n);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=u8(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Br(e),Qn.SHADING);const a=Br(e);if(a){const{width:o,height:c}=e.canvas,[u,d,f,g]=At.getAxialAlignedBoundingBox([0,0,o,c],a);this.ctx.fillRect(u,d,f-u,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ve("Should not call beginInlineImage")}beginImageData(){ve("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Pe(this.ctx),e)){const n=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],n,a),this.current.updateRectMinMax(Pe(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||rb("TODO: Support non-isolated groups."),t.knockout&&zt("Knockout groups not supported.");const n=Pe(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=At.getAxialAlignedBoundingBox(t.bbox,Pe(e));const o=[0,0,e.canvas.width,e.canvas.height];a=At.intersect(a,o)||[0,0,0,0];const c=Math.floor(a[0]),u=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-c,1),f=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,f),b=y.context;b.translate(-c,-u),b.transform(...n),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(c,u),e.save()),Zd(e,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=Pe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const o=At.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,n,a,o){if(N(this,zo,yA).call(this),ry(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const c=e[2]-e[0],u=e[3]-e[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=c,e[3]=u;const[d,f]=At.singularValueDecompose2dScale(Pe(this.ctx)),{viewportScale:g}=this,y=Math.ceil(c*this.outputScaleX*g),b=Math.ceil(u*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,b);const{canvas:w,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,u*f),ry(this.ctx)}else ry(this.ctx),this.ctx.rect(e[0],e[1],c,u),this.ctx.clip(),this.endPath()}this.current=new zk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),N(this,zo,vA).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,a=this.processingType3;if(a&&(a.compiled===void 0&&(a.compiled=g8(t)),a.compiled)){a.compiled(n);return}const o=this._createMaskCanvas(t),c=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(c,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,a=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=Pe(u);u.transform(e,n,a,o,0,0);const f=this._createMaskCanvas(t);u.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let g=0,y=c.length;g<y;g+=2){const b=At.transform(d,[e,n,a,o,c[g],c[g+1]]),[w,A]=At.applyTransform([0,0],b);u.drawImage(f.canvas,w,A)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(const o of t){const{data:c,width:u,height:d,transform:f}=o,g=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=g.context;y.save();const b=this.getObject(c,o);Bk(y,b),y.globalCompositeOperation="source-in",y.fillStyle=a?n.getPattern(y,this,Br(e),Qn.FILL):n,y.fillRect(0,0,u,d),y.restore(),e.save(),e.transform(...f),e.scale(1,-1),sy(e,g.canvas,0,0,u,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){zt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,a){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){zt("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let f=0,g=a.length;f<g;f+=2)d.push({transform:[e,0,0,n,a[f],a[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,a=this.ctx;if(this.save(),!Bn){const{filter:u}=a;u!=="none"&&u!==""&&(a.filter="none")}a.scale(1/e,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Uk(d,t),o=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(o,Br(a));a.imageSmoothingEnabled=Hk(Pe(a),t.interpolate),sy(a,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;Uk(d,t),a=this.applyTransferMapsToCanvas(d)}for(const o of e)n.save(),n.transform(...o.transform),n.scale(1,-1),sy(n,a,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===Vk?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Pe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:o}=this.ctx.getTransform();let c,u;if(n===0&&a===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)c=u=1/d;else{const g=d*t;c=u=g<1?1/g:1}else if(t===0)c=1/d,u=1/f;else{const g=d*t,y=f*t;c=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(e*o-n*a),f=Math.hypot(e,n),g=Math.hypot(a,o);if(t===0)c=g/d,u=f/d;else{const y=t*d;c=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[a,o]=this.getScaleForStroking();if(e.lineWidth=n||1,a===1&&o===1){e.stroke();return}const c=e.getLineDash();if(t&&e.save(),e.scale(a,o),c.length>0){const u=Math.max(a,o);e.setLineDash(c.map(d=>d/u)),e.lineDashOffset/=u}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};zo=new WeakSet,yA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},vA=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let ju=sS;for(const s in ys)ju.prototype[s]!==void 0&&(ju.prototype[ys[s]]=ju.prototype[s]);var hp,dp;class ba{static get workerPort(){return p(this,hp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");k(this,hp,t)}static get workerSrc(){return p(this,dp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");k(this,dp,t)}}hp=new WeakMap,dp=new WeakMap,M(ba,hp,null),M(ba,dp,"");const ay={DATA:1,ERROR:2},Ye={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Si(s){switch(s instanceof Error||typeof s=="object"&&s!==null||ve('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Nc(s.message);case"MissingPDFException":return new Rc(s.message);case"PasswordException":return new qw(s.message,s.code);case"UnexpectedResponseException":return new ab(s.message,s.status);case"UnknownErrorException":return new Gw(s.message,s.details);default:return new Gw(s.message,s.toString())}}var ur,ZM,JM,Ty;class cf{constructor(t,e,n){M(this,ur);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=a=>{const o=a.data;if(o.targetName!==this.sourceName)return;if(o.stream){N(this,ur,JM).call(this,o);return}if(o.callback){const u=o.callbackId,d=this.callbackCapabilities[u];if(!d)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],o.callback===ay.DATA)d.resolve(o.data);else if(o.callback===ay.ERROR)d.reject(Si(o.reason));else throw new Error("Unexpected callback case");return}const c=this.actionHandler[o.action];if(!c)throw new Error(`Unknown action from worker: ${o.action}`);if(o.callbackId){const u=this.sourceName,d=o.sourceName;new Promise(function(f){f(c(o.data))}).then(function(f){n.postMessage({sourceName:u,targetName:d,callback:ay.DATA,callbackId:o.callbackId,data:f})},function(f){n.postMessage({sourceName:u,targetName:d,callback:ay.ERROR,callbackId:o.callbackId,reason:Si(f)})});return}if(o.streamId){N(this,ur,ZM).call(this,o);return}c(o.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,n,a){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:c,targetName:u,stream:Ye.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{an(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:Ye.CANCEL,streamId:o,reason:Si(f)}),g.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ur=new WeakSet,ZM=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:a,stream:Ye.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ye.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){an(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ye.ERROR,streamId:e,reason:Si(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,new Promise(function(f){f(u(t.data,d))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ye.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:a,stream:Ye.START_COMPLETE,streamId:e,reason:Si(f)})})},JM=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case Ye.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Si(t.reason));break;case Ye.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Si(t.reason));break;case Ye.PULL:if(!u){o.postMessage({sourceName:n,targetName:a,stream:Ye.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,new Promise(function(d){var f;d((f=u.onPull)==null?void 0:f.call(u))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ye.PULL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:n,targetName:a,stream:Ye.PULL_COMPLETE,streamId:e,reason:Si(d)})});break;case Ye.ENQUEUE:if(an(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Ye.CLOSE:if(an(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),N(this,ur,Ty).call(this,c,e);break;case Ye.ERROR:an(c,"error should have stream controller"),c.controller.error(Si(t.reason)),N(this,ur,Ty).call(this,c,e);break;case Ye.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Si(t.reason)),N(this,ur,Ty).call(this,c,e);break;case Ye.CANCEL:if(!u)break;new Promise(function(d){var f;d((f=u.onCancel)==null?void 0:f.call(u,Si(t.reason)))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ye.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:n,targetName:a,stream:Ye.CANCEL_COMPLETE,streamId:e,reason:Si(d)})}),u.sinkCapability.reject(Si(t.reason)),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ty=async function(t,e){var n,a,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var jl,fp;class b8{constructor({parsedData:t,rawData:e}){M(this,jl);M(this,fp);k(this,jl,t),k(this,fp,e)}getRaw(){return p(this,fp)}get(t){return p(this,jl).get(t)??null}getAll(){return G_(p(this,jl))}has(t){return p(this,jl).has(t)}}jl=new WeakMap,fp=new WeakMap;const so=Symbol("INTERNAL");var pp,gp,mp,Zu;class x8{constructor(t,{name:e,intent:n,usage:a}){M(this,pp,!1);M(this,gp,!1);M(this,mp,!1);M(this,Zu,!0);k(this,pp,!!(t&is.DISPLAY)),k(this,gp,!!(t&is.PRINT)),this.name=e,this.intent=n,this.usage=a}get visible(){if(p(this,mp))return p(this,Zu);if(!p(this,Zu))return!1;const{print:t,view:e}=this.usage;return p(this,pp)?(e==null?void 0:e.viewState)!=="OFF":p(this,gp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==so&&ve("Internal method `_setVisible` called."),k(this,mp,n),k(this,Zu,e)}}pp=new WeakMap,gp=new WeakMap,mp=new WeakMap,Zu=new WeakMap;var po,ye,Ju,th,yp,bA;class w8{constructor(t,e=is.DISPLAY){M(this,yp);M(this,po,null);M(this,ye,new Map);M(this,Ju,null);M(this,th,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,k(this,th,t.order);for(const n of t.groups)p(this,ye).set(n.id,new x8(e,n));if(t.baseState==="OFF")for(const n of p(this,ye).values())n._setVisible(so,!1);for(const n of t.on)p(this,ye).get(n)._setVisible(so,!0);for(const n of t.off)p(this,ye).get(n)._setVisible(so,!1);k(this,Ju,this.getHash())}}isVisible(t){if(p(this,ye).size===0)return!0;if(!t)return rb("Optional content group not defined."),!0;if(t.type==="OCG")return p(this,ye).has(t.id)?p(this,ye).get(t.id).visible:(zt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return N(this,yp,bA).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!p(this,ye).has(e))return zt(`Optional content group not found: ${e}`),!0;if(p(this,ye).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!p(this,ye).has(e))return zt(`Optional content group not found: ${e}`),!0;if(!p(this,ye).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!p(this,ye).has(e))return zt(`Optional content group not found: ${e}`),!0;if(!p(this,ye).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!p(this,ye).has(e))return zt(`Optional content group not found: ${e}`),!0;if(p(this,ye).get(e).visible)return!1}return!0}return zt(`Unknown optional content policy ${t.policy}.`),!0}return zt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const n=p(this,ye).get(t);if(!n){zt(`Optional content group not found: ${t}`);return}n._setVisible(so,!!e,!0),k(this,po,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const o=p(this,ye).get(a);if(o)switch(n){case"ON":o._setVisible(so,!0);break;case"OFF":o._setVisible(so,!1);break;case"Toggle":o._setVisible(so,!o.visible);break}}k(this,po,null)}get hasInitialVisibility(){return p(this,Ju)===null||this.getHash()===p(this,Ju)}getOrder(){return p(this,ye).size?p(this,th)?p(this,th).slice():[...p(this,ye).keys()]:null}getGroups(){return p(this,ye).size>0?G_(p(this,ye)):null}getGroup(t){return p(this,ye).get(t)||null}getHash(){if(p(this,po)!==null)return p(this,po);const t=new YM;for(const[e,n]of p(this,ye))t.update(`${e}:${n.visible}`);return k(this,po,t.hexdigest())}}po=new WeakMap,ye=new WeakMap,Ju=new WeakMap,th=new WeakMap,yp=new WeakSet,bA=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const o=t[a];let c;if(Array.isArray(o))c=N(this,yp,bA).call(this,o);else if(p(this,ye).has(o))c=p(this,ye).get(o).visible;else return zt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class A8{constructor(t,{disableRange:e=!1,disableStream:n=!1}){an(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});an(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||o.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){an(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new _8(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new S8(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class _8{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=W_(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class S8{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function E8(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let g=u(e);return g=unescape(g),g=d(g),g=f(g),o(g)}if(e=c(s),e){const g=f(e);return o(g)}if(e=n("filename","i").exec(s),e){e=e[1];let g=u(e);return g=f(g),o(g)}function n(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),w=ob(y);y=b.decode(w),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function c(g){const y=[];let b;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=w.exec(g))!==null;){let[,S,C,T]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[C,T]}const A=[];for(let S=0;S<y.length&&S in y;++S){let[C,T]=y[S];T=u(T),C&&(T=unescape(T),S===0&&(T=d(T))),A.push(T)}return A.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const w=y[b].indexOf('"');w!==-1&&(y[b]=y[b].slice(0,w),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),A=g.slice(y+1).replace(/^[^']*'/,"");return a(b,A)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),a(b,A);try{A=atob(A)}catch{}return a(b,A)})}return""}function J_({getResponseHeader:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||n||!t||s("Accept-Ranges")!=="bytes"||(s("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function tS(s){const t=s("Content-Disposition");if(t){let e=E8(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(W_(e))return e}return null}function db(s,t){return s===404||s===0&&t.startsWith("file:")?new Rc('Missing PDF "'+t+'".'):new ab(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function tD(s){return s===200||s===206}function eD(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function nD(s){const t=new Headers;for(const e in s){const n=s[e];n!==void 0&&t.append(e,n)}return t}function iD(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(zt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class qk{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return an(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new C8(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new T8(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class C8{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=nD(this._stream.httpHeaders);const n=e.url;fetch(n,eD(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!tD(a.status))throw db(a.status,n);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=d=>a.headers.get(d),{allowRangeRequests:c,suggestedLength:u}=J_({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=tS(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Nc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:iD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class T8{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController,this._headers=nD(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const o=a.url;fetch(o,eD(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!tD(c.status))throw db(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:iD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const pw=200,gw=206;function k8(s){const t=s.response;return typeof t!="string"?t:ob(t).buffer}class R8{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const a={begin:t,end:e};for(const o in n)a[o]=n[o];return this.request(a)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const c=this.httpHeaders[o];c!==void 0&&e.setRequestHeader(o,c)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=gw):a.expectedStatus=pw,e.responseType="arraybuffer",t.onError&&(e.onerror=function(o){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){var d,f,g;const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){(d=n.onError)==null||d.call(n,a.status);return}const o=a.status||pw;if(!(o===pw&&n.expectedStatus===gw)&&o!==n.expectedStatus){(f=n.onError)==null||f.call(n,a.status);return}const u=k8(a);if(o===gw){const y=a.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);n.onDone({begin:parseInt(b[1],10),chunk:u})}else u?n.onDone({begin:0,chunk:u}):(g=n.onError)==null||g.call(n,a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class N8{constructor(t){this._source=t,this._manager=new R8(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return an(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new M8(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new D8(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class M8{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=c=>e.getResponseHeader(c),{allowRangeRequests:a,suggestedLength:o}=J_({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=tS(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=db(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class D8{constructor(t,e,n){this._manager=t;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=db(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const sD=/^file:\/\/\/[a-zA-Z]:\//;function L8(s){const t=yr.get("url"),e=t.parse(s);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(s)?t.parse(`file:///${s}`):(e.host||(e.protocol="file:"),e)}class O8{constructor(t){this.source=t,this.url=L8(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return an(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new F8(this):new j8(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new I8(this,t,e):new P8(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class rD{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Nc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class aD{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function fv(s,t){return{protocol:s.protocol,auth:s.auth,host:s.hostname,port:s.port,path:s.path,method:"GET",headers:t}}class j8 extends rD{constructor(t){super(t);const e=n=>{if(n.statusCode===404){const u=new Rc(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(n);const a=u=>this._readableStream.headers[u.toLowerCase()],{allowRangeRequests:o,suggestedLength:c}=J_({getResponseHeader:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=tS(a)};if(this._request=null,this._url.protocol==="http:"){const n=yr.get("http");this._request=n.request(fv(this._url,t.httpHeaders),e)}else{const n=yr.get("https");this._request=n.request(fv(this._url,t.httpHeaders),e)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class P8 extends aD{constructor(t,e,n){super(t),this._httpHeaders={};for(const o in t.httpHeaders){const c=t.httpHeaders[o];c!==void 0&&(this._httpHeaders[o]=c)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const a=o=>{if(o.statusCode===404){const c=new Rc(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(o)};if(this._request=null,this._url.protocol==="http:"){const o=yr.get("http");this._request=o.request(fv(this._url,this._httpHeaders),a)}else{const o=yr.get("https");this._request=o.request(fv(this._url,this._httpHeaders),a)}this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class F8 extends rD{constructor(t){super(t);let e=decodeURIComponent(this._url.path);sD.test(this._url.href)&&(e=e.replace(/^\//,""));const n=yr.get("fs");n.promises.lstat(e).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(e)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=new Rc(`Missing PDF "${e}".`)),this._storedError=a,this._headersCapability.reject(a)})}}class I8 extends aD{constructor(t,e,n){super(t);let a=decodeURIComponent(this._url.path);sD.test(this._url.href)&&(a=a.replace(/^\//,""));const o=yr.get("fs");this._setReadableStream(o.createReadStream(a,{start:e,end:n-1}))}}const z8=1e5,li=30,U8=.8;var aR,go,ui,vp,bp,Pl,ea,xp,wp,Fl,eh,nh,mo,ih,Ap,sh,Il,_p,Sp,rn,zl,Ul,yo,rh,Ea,oD,lD,xA,hr,ky,cD,uD;let pv=(rn=class{constructor({textContentSource:t,container:e,viewport:n}){M(this,Ea);M(this,go,Promise.withResolvers());M(this,ui,null);M(this,vp,!1);M(this,bp,!!((aR=globalThis.FontInspector)!=null&&aR.enabled));M(this,Pl,null);M(this,ea,null);M(this,xp,0);M(this,wp,0);M(this,Fl,null);M(this,eh,null);M(this,nh,0);M(this,mo,0);M(this,ih,Object.create(null));M(this,Ap,[]);M(this,sh,null);M(this,Il,[]);M(this,_p,new WeakMap);M(this,Sp,null);var d;if(t instanceof ReadableStream)k(this,sh,t);else if(typeof t=="object")k(this,sh,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');k(this,ui,k(this,eh,e)),k(this,mo,n.scale*(globalThis.devicePixelRatio||1)),k(this,nh,n.rotation),k(this,ea,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:o,pageX:c,pageY:u}=n.rawDims;k(this,Sp,[1,0,0,-1,-c,u+o]),k(this,wp,a),k(this,xp,o),N(d=rn,hr,cD).call(d),bc(e,n),p(this,go).promise.catch(()=>{}).then(()=>{p(rn,rh).delete(this),k(this,ea,null),k(this,ih,null)})}render(){const t=()=>{p(this,Fl).read().then(({value:e,done:n})=>{if(n){p(this,go).resolve();return}p(this,Pl)??k(this,Pl,e.lang),Object.assign(p(this,ih),e.styles),N(this,Ea,oD).call(this,e.items),t()},p(this,go).reject)};return k(this,Fl,p(this,sh).getReader()),p(rn,rh).add(this),t(),p(this,go).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*(globalThis.devicePixelRatio||1),a=t.rotation;if(a!==p(this,nh)&&(e==null||e(),k(this,nh,a),bc(p(this,eh),{rotation:a})),n!==p(this,mo)){e==null||e(),k(this,mo,n);const c={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:N(o=rn,hr,ky).call(o,p(this,Pl))};for(const u of p(this,Il))c.properties=p(this,_p).get(u),c.div=u,N(this,Ea,xA).call(this,c)}}cancel(){var e;const t=new Nc("TextLayer task cancelled.");(e=p(this,Fl))==null||e.cancel(t).catch(()=>{}),k(this,Fl,null),p(this,go).reject(t)}get textDivs(){return p(this,Il)}get textContentItemsStr(){return p(this,Ap)}static cleanup(){if(!(p(this,rh).size>0)){p(this,zl).clear();for(const{canvas:t}of p(this,Ul).values())t.remove();p(this,Ul).clear()}}},go=new WeakMap,ui=new WeakMap,vp=new WeakMap,bp=new WeakMap,Pl=new WeakMap,ea=new WeakMap,xp=new WeakMap,wp=new WeakMap,Fl=new WeakMap,eh=new WeakMap,nh=new WeakMap,mo=new WeakMap,ih=new WeakMap,Ap=new WeakMap,sh=new WeakMap,Il=new WeakMap,_p=new WeakMap,Sp=new WeakMap,zl=new WeakMap,Ul=new WeakMap,yo=new WeakMap,rh=new WeakMap,Ea=new WeakSet,oD=function(t){var a,o;if(p(this,vp))return;(o=p(this,ea)).ctx??(o.ctx=N(a=rn,hr,ky).call(a,p(this,Pl)));const e=p(this,Il),n=p(this,Ap);for(const c of t){if(e.length>z8){zt("Ignoring additional textDivs for performance reasons."),k(this,vp,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=p(this,ui);k(this,ui,document.createElement("span")),p(this,ui).classList.add("markedContent"),c.id!==null&&p(this,ui).setAttribute("id",`${c.id}`),u.append(p(this,ui))}else c.type==="endMarkedContent"&&k(this,ui,p(this,ui).parentNode);continue}n.push(c.str),N(this,Ea,lD).call(this,c)}},lD=function(t){var S;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};p(this,Il).push(e);const a=At.transform(p(this,Sp),t.transform);let o=Math.atan2(a[1],a[0]);const c=p(this,ih)[t.fontName];c.vertical&&(o+=Math.PI/2);const u=p(this,bp)&&c.fontSubstitution||c.fontFamily,d=Math.hypot(a[2],a[3]),f=d*N(S=rn,hr,uD).call(S,u,p(this,Pl));let g,y;o===0?(g=a[4],y=a[5]-f):(g=a[4]+f*Math.sin(o),y=a[5]-f*Math.cos(o));const b="calc(var(--scale-factor)*",w=e.style;p(this,ui)===p(this,eh)?(w.left=`${(100*g/p(this,wp)).toFixed(2)}%`,w.top=`${(100*y/p(this,xp)).toFixed(2)}%`):(w.left=`${b}${g.toFixed(2)}px)`,w.top=`${b}${y.toFixed(2)}px)`),w.fontSize=`${b}${(p(rn,yo)*d).toFixed(2)}px)`,w.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,p(this,bp)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const C=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);C!==T&&Math.max(C,T)/Math.min(C,T)>1.5&&(A=!0)}if(A&&(n.canvasWidth=c.vertical?t.height:t.width),p(this,_p).set(e,n),p(this,ea).div=e,p(this,ea).properties=n,N(this,Ea,xA).call(this,p(this,ea)),n.hasText&&p(this,ui).append(e),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),p(this,ui).append(C)}},xA=function(t){const{div:e,properties:n,ctx:a,prevFontSize:o,prevFontFamily:c}=t,{style:u}=e;let d="";if(p(rn,yo)>1&&(d=`scale(${1/p(rn,yo)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=u,{canvasWidth:g,fontSize:y}=n;(o!==y||c!==f)&&(a.font=`${y*p(this,mo)}px ${f}`,t.prevFontSize=y,t.prevFontFamily=f);const{width:b}=a.measureText(e.textContent);b>0&&(d=`scaleX(${g*p(this,mo)/b}) ${d}`)}n.angle!==0&&(d=`rotate(${n.angle}deg) ${d}`),d.length>0&&(u.transform=d)},hr=new WeakSet,ky=function(t=null){let e=p(this,Ul).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),p(this,Ul).set(t,e)}return e},cD=function(){if(p(this,yo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.textContent="X",document.body.append(t),k(this,yo,t.getBoundingClientRect().height),t.remove()},uD=function(t,e){const n=p(this,zl).get(t);if(n)return n;const a=N(this,hr,ky).call(this,e),o=a.font;a.canvas.width=a.canvas.height=li,a.font=`${li}px ${t}`;const c=a.measureText("");let u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);if(u){const y=u/(u+d);return p(this,zl).set(t,y),a.canvas.width=a.canvas.height=0,a.font=o,y}a.strokeStyle="red",a.clearRect(0,0,li,li),a.strokeText("g",0,0);let f=a.getImageData(0,0,li,li).data;d=0;for(let y=f.length-1-3;y>=0;y-=4)if(f[y]>0){d=Math.ceil(y/4/li);break}a.clearRect(0,0,li,li),a.strokeText("A",0,li),f=a.getImageData(0,0,li,li).data,u=0;for(let y=0,b=f.length;y<b;y+=4)if(f[y]>0){u=li-Math.floor(y/4/li);break}a.canvas.width=a.canvas.height=0,a.font=o;const g=u?u/(u+d):U8;return p(this,zl).set(t,g),g},M(rn,hr),M(rn,zl,new Map),M(rn,Ul,new Map),M(rn,yo,null),M(rn,rh,new Set),rn);function B8(){AM("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:s,container:t,viewport:e,...n}=arguments[0],a=Object.keys(n);a.length>0&&zt("Ignoring `renderTextLayer` parameters: "+a.join(", "));const o=new pv({textContentSource:s,container:t,viewport:e}),{textDivs:c,textContentItemsStr:u}=o;return{promise:o.render(),textDivs:c,textContentItemsStr:u}}function H8(){AM("`updateTextLayer`, please use `TextLayer` instead.")}class jf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(o){var d;if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(jf.shouldBuildText(u))(d=o==null?void 0:o.attributes)!=null&&d.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const f of o.children)a(f)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const V8=65536,q8=100,G8=5e3,$8=Bn?i8:q6,X8=Bn?s8:xM,Y8=Bn?n8:V6,K8=Bn?r8:wM;function W8(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new wA,{docId:e}=t,n=s.url?Q8(s.url):null,a=s.data?Z8(s.data):null,o=s.httpHeaders||null,c=s.withCredentials===!0,u=s.password??null,d=s.range instanceof hD?s.range:null,f=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:V8;let g=s.worker instanceof Pu?s.worker:null;const y=s.verbosity,b=typeof s.docBaseUrl=="string"&&!K_(s.docBaseUrl)?s.docBaseUrl:null,w=typeof s.cMapUrl=="string"?s.cMapUrl:null,A=s.cMapPacked!==!1,S=s.CMapReaderFactory||X8,C=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,T=s.StandardFontDataFactory||K8,D=s.stopAtErrors!==!0,L=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,P=s.isEvalSupported!==!1,z=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Bn,U=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,O=typeof s.disableFontFace=="boolean"?s.disableFontFace:Bn,H=s.fontExtraProperties===!0,Z=s.enableXfa===!0,$=s.ownerDocument||globalThis.document,W=s.disableRange===!0,it=s.disableStream===!0,ct=s.disableAutoFetch===!0,lt=s.pdfBug===!0,nt=s.enableHWA===!0,I=d?d.length:s.length??NaN,q=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Bn&&!O,X=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:S===xM&&T===wM&&w&&C&&af(w,document.baseURI)&&af(C,document.baseURI),_t=s.canvasFactory||new $8({ownerDocument:$,enableHWA:nt}),Ct=s.filterFactory||new Y8({docId:e,ownerDocument:$}),j=null;D6(y);const G={canvasFactory:_t,filterFactory:Ct};if(X||(G.cMapReaderFactory=new S({baseUrl:w,isCompressed:A}),G.standardFontDataFactory=new T({baseUrl:C})),!g){const pt={verbosity:y,port:ba.workerPort};g=pt.port?Pu.fromPort(pt):new Pu(pt),t._worker=g}const tt={docId:e,apiVersion:"4.4.168",data:a,password:u,disableAutoFetch:ct,rangeChunkSize:f,length:I,docBaseUrl:b,enableXfa:Z,evaluatorOptions:{maxImageSize:L,disableFontFace:O,ignoreErrors:D,isEvalSupported:P,isOffscreenCanvasSupported:z,canvasMaxAreaInBytes:U,fontExtraProperties:H,useSystemFonts:q,cMapUrl:X?w:null,standardFontDataUrl:X?C:null}},ot={disableFontFace:O,fontExtraProperties:H,ownerDocument:$,pdfBug:lt,styleElement:j,loadingParams:{disableAutoFetch:ct,enableXfa:Z}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const pt=g.messageHandler.sendWithPromise("GetDocRequest",tt,a?[a.buffer]:null);let wt;if(d)wt=new A8(d,{disableRange:W,disableStream:it});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");wt=(Gt=>Bn?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&af(Gt.url)?new qk(Gt):new O8(Gt):af(Gt.url)?new qk(Gt):new N8(Gt))({url:n,length:I,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:W,disableStream:it})}return pt.then(ht=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Gt=new cf(e,ht,g.port),Ft=new nV(Gt,t,wt,ot,G);t._transport=Ft,Gt.send("Ready",null)})}).catch(t._capability.reject),t}function Q8(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(Bn&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Z8(s){if(Bn&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return ob(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Gk(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var Rv;const Nv=class Nv{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${_i(Nv,Rv)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Rv=new WeakMap,M(Nv,Rv,0);let wA=Nv,hD=class{constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ve("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class J8{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ee(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var vo,na,os,Eu,Ry;class tV{constructor(t,e,n,a=!1){M(this,os);M(this,vo,null);M(this,na,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new Mk:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new dD,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}={}){return new Sg({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ee(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:a=oo.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:g=null}){var L,P;(L=this._stats)==null||L.time("Overall");const y=this._transport.getRenderingIntent(n,a,g),{renderingIntent:b,cacheKey:w}=y;k(this,na,!1),N(this,os,Ry).call(this),u||(u=this._transport.getOptionalContentConfig(b));let A=this._intentStates.get(w);A||(A=Object.create(null),this._intentStates.set(w,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const S=!!(b&is.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(P=this._stats)==null||P.time("Page Request"),this._pumpOperatorList(y));const C=z=>{var U;A.renderTasks.delete(T),(this._maybeCleanupAfterRender||S)&&k(this,na,!0),N(this,os,Eu).call(this,!S),z?(T.capability.reject(z),this._abortOperatorList({intentState:A,reason:z instanceof Error?z:new Error(z)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new _A({callback:C,params:{canvasContext:t,viewport:e,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:f});(A.renderTasks||(A.renderTasks=new Set)).add(T);const D=T.task;return Promise.all([A.displayReadyCapability.promise,u]).then(([z,U])=>{var O;if(this.destroyed){C();return}if((O=this._stats)==null||O.time("Rendering"),!(U.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:z,optionalContentConfig:U}),T.operatorListChanged()}).catch(C),D}getOperatorList({intent:t="display",annotationMode:e=oo.ENABLE,printAnnotationStorage:n=null}={}){var d;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(t,e,n,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>jf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function o(){c.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),k(this,na,!1),N(this,os,Ry).call(this),Promise.all(t)}cleanup(t=!1){k(this,na,!0);const e=N(this,os,Eu).call(this,!1);return t&&e&&this._stats&&(this._stats=new Mk),e}_startRenderPage(t,e){var a,o;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&N(this,os,Eu).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n}){const{map:a,transfer:o}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a},o).getReader(),d=this._intentStates.get(e);d.streamReader=u;const f=()=>{u.read().then(({value:g,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,d),f())},g=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();N(this,os,Eu).call(this,!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(g);else if(d.opListReadCapability)d.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Y_){let a=q8;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Nc(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}vo=new WeakMap,na=new WeakMap,os=new WeakSet,Eu=function(t=!1){if(N(this,os,Ry).call(this),!p(this,na)||this.destroyed)return!1;if(t)return k(this,vo,setTimeout(()=>{k(this,vo,null),N(this,os,Eu).call(this,!1)},G8)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(this,na,!1),!0},Ry=function(){p(this,vo)&&(clearTimeout(p(this,vo)),k(this,vo,null))};var Bl,Mv;class eV{constructor(){M(this,Bl,new Set);M(this,Mv,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};p(this,Mv).then(()=>{for(const a of p(this,Bl))a.call(this,n)})}addEventListener(t,e){p(this,Bl).add(e)}removeEventListener(t,e){p(this,Bl).delete(e)}terminate(){p(this,Bl).clear()}}Bl=new WeakMap,Mv=new WeakMap;const $r={isWorkerDisabled:!1,fakeWorkerId:0};Bn&&($r.isWorkerDisabled=!0,ba.workerSrc||(ba.workerSrc="./pdf.worker.mjs")),$r.isSameOrigin=function(s,t){let e;try{if(e=new URL(s),!e.origin||e.origin==="null")return!1}catch{return!1}const n=new URL(t,e);return e.origin===n.origin},$r.createCDNWrapper=function(s){const t=`await import("${s}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var Hl,ah,Ny,oh,My;const Ei=class Ei{constructor({name:t=null,port:e=null,verbosity:n=L6()}={}){M(this,ah);var a;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((a=p(Ei,Hl))!=null&&a.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(p(Ei,Hl)||k(Ei,Hl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return Bn?Promise.all([yr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new cf("main","worker",t),this._messageHandler.on("ready",function(){}),N(this,ah,Ny).call(this)}_initialize(){if($r.isWorkerDisabled||p(Ei,oh,My)){this._setupFakeWorker();return}let{workerSrc:t}=Ei;try{$r.isSameOrigin(window.location.href,t)||(t=$r.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new cf("main","worker",e),a=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||a()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}this._messageHandler=n,this._port=e,this._webWorker=e,N(this,ah,Ny).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};c();return}catch{rb("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){$r.isWorkerDisabled||(zt("Setting up fake worker."),$r.isWorkerDisabled=!0),Ei._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new eV;this._port=e;const n=`fake${$r.fakeWorkerId++}`,a=new cf(n+"_worker",n,e);t.setup(a,e),this._messageHandler=new cf(n,n+"_worker",e),N(this,ah,Ny).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=p(Ei,Hl))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=p(this,Hl))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ei(t)}static get workerSrc(){if(ba.workerSrc)return ba.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ee(this,"_setupFakeWorkerGlobal",(async()=>p(this,oh,My)?p(this,oh,My):(await import(this.workerSrc)).WorkerMessageHandler)())}};Hl=new WeakMap,ah=new WeakSet,Ny=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},oh=new WeakSet,My=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},M(Ei,oh),M(Ei,Hl);let Pu=Ei;var ia,Ks,lh,ch,Ws,Vl,uf;class nV{constructor(t,e,n,a,o){M(this,Vl);M(this,ia,new Map);M(this,Ks,new Map);M(this,lh,new Map);M(this,ch,new Map);M(this,Ws,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new dD,this.fontLoader=new t8({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ee(this,"annotationStorage",new Z_)}getRenderingIntent(t,e=oo.ENABLE,n=null,a=!1){let o=is.DISPLAY,c=fA;switch(t){case"any":o=is.ANY;break;case"display":break;case"print":o=is.PRINT;break;default:zt(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case oo.DISABLE:o+=is.ANNOTATIONS_DISABLE;break;case oo.ENABLE:break;case oo.ENABLE_FORMS:o+=is.ANNOTATIONS_FORMS;break;case oo.ENABLE_STORAGE:o+=is.ANNOTATIONS_STORAGE,c=(o&is.PRINT&&n instanceof WM?n:this.annotationStorage).serializable;break;default:zt(`getRenderingIntent - invalid annotationMode: ${e}`)}return a&&(o+=is.OPLIST),{renderingIntent:o,cacheKey:`${o}_${c.hash}`,annotationStorageSerializable:c}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=p(this,Ws))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of p(this,Ks).values())t.push(a._destroy());p(this,Ks).clear(),p(this,lh).clear(),p(this,ch).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a;this.commonObjs.clear(),this.fontLoader.clear(),p(this,ia).clear(),this.filterFactory.destroy(),pv.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new Nc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{an(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){a.close();return}an(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",n=>{const a=Promise.withResolvers(),o=this._fullReader;return o.headersReady.then(()=>{var c;(!o.isStreamingSupported||!o.isRangeSupported)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),o.onProgress=u=>{var d;(d=e.onProgress)==null||d.call(e,{loaded:u.loaded,total:u.total})}),a.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},a.reject),a.promise}),t.on("GetRangeReader",(n,a)=>{an(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){a.close();return}an(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new J8(n,this))}),t.on("DocException",function(n){let a;switch(n.name){case"PasswordException":a=new qw(n.message,n.code);break;case"InvalidPDFException":a=new mM(n.message);break;case"MissingPDFException":a=new Rc(n.message);break;case"UnexpectedResponseException":a=new ab(n.message,n.status);break;case"UnknownErrorException":a=new Gw(n.message,n.details);break;default:ve("DocException - expected a valid Error.")}e._capability.reject(a)}),t.on("PasswordRequest",n=>{if(k(this,Ws,Promise.withResolvers()),e.onPassword){const a=o=>{o instanceof Error?p(this,Ws).reject(o):p(this,Ws).resolve({password:o})};try{e.onPassword(a,n.code)}catch(o){p(this,Ws).reject(o)}}else p(this,Ws).reject(new qw(n.message,n.code));return p(this,Ws).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;p(this,Ks).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,o])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":const{disableFontFace:u,fontExtraProperties:d,pdfBug:f}=this._params;if("error"in o){const w=o.error;zt(`Error during font loading: ${w}`),this.commonObjs.resolve(n,w);break}const g=f&&((c=globalThis.FontInspector)!=null&&c.enabled)?(w,A)=>globalThis.FontInspector.fontAdded(w,A):null,y=new e8(o,{disableFontFace:u,inspectFont:g});this.fontLoader.bind(y).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&y.data&&(y.data=null),this.commonObjs.resolve(n,y)});break;case"CopyLocalImage":const{imageRef:b}=o;an(b,"The imageRef must be defined.");for(const w of p(this,Ks).values())for(const[,A]of w.objs)if((A==null?void 0:A.ref)===b)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,o,c])=>{var d;if(this.destroyed)return;const u=p(this,Ks).get(a);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=c==null?void 0:c.bitmap)==null||d.close();return}switch(o){case"Image":u.objs.resolve(n,c),(c==null?void 0:c.dataLen)>k6&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&zt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=p(this,lh).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&p(this,ch).set(o.refStr,t);const c=new tV(e,o,this,this._params.pdfBug);return p(this,Ks).set(e,c),c});return p(this,lh).set(e,a),a}getPageIndex(t){return Gk(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return N(this,Vl,uf).call(this,"GetFieldObjects")}hasJSActions(){return N(this,Vl,uf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return N(this,Vl,uf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return N(this,Vl,uf).call(this,"GetOptionalContentConfig").then(e=>new w8(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=p(this,ia).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var o,c;return{info:a[0],metadata:a[1]?new b8(a[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return p(this,ia).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of p(this,Ks).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),p(this,ia).clear(),this.filterFactory.destroy(!0),pv.cleanup()}}cachedPageNumber(t){if(!Gk(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return p(this,ch).get(e)??null}}ia=new WeakMap,Ks=new WeakMap,lh=new WeakMap,ch=new WeakMap,Ws=new WeakMap,Vl=new WeakSet,uf=function(t,e=null){const n=p(this,ia).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return p(this,ia).set(t,a),a};const oy=Symbol("INITIAL_DATA");var _s,Ep,AA;class dD{constructor(){M(this,Ep);M(this,_s,Object.create(null))}get(t,e=null){if(e){const a=N(this,Ep,AA).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=p(this,_s)[t];if(!n||n.data===oy)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=p(this,_s)[t];return!!e&&e.data!==oy}resolve(t,e=null){const n=N(this,Ep,AA).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in p(this,_s)){const{data:n}=p(this,_s)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}k(this,_s,Object.create(null))}*[Symbol.iterator](){for(const t in p(this,_s)){const{data:e}=p(this,_s)[t];e!==oy&&(yield[t,e])}}}_s=new WeakMap,Ep=new WeakSet,AA=function(t){var e;return(e=p(this,_s))[t]||(e[t]={...Promise.withResolvers(),data:oy})};var bo;class iV{constructor(t){M(this,bo,null);k(this,bo,t),this.onContinue=null}get promise(){return p(this,bo).capability.promise}cancel(t=0){p(this,bo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=p(this,bo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=p(this,bo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}bo=new WeakMap;var xo,ql;const ml=class ml{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null}){M(this,xo,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new iV(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var u,d;if(this.cancelled)return;if(this._canvas){if(p(ml,ql).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");p(ml,ql).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:a,transform:o,background:c}=this.params;this.gfx=new ju(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),p(this,xo)&&(window.cancelAnimationFrame(p(this,xo)),k(this,xo,null)),p(ml,ql).delete(this._canvas),this.callback(t||new Y_(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(this,xo,window.requestAnimationFrame(()=>{k(this,xo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),p(ml,ql).delete(this._canvas),this.callback())))}};xo=new WeakMap,ql=new WeakMap,M(ml,ql,new WeakSet);let _A=ml;const sV="4.4.168",rV="19fbc8998";function $k(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Jd(s){return Math.max(0,Math.min(255,255*s))}class Xk{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Jd(t),[t,t,t]}static G_HTML([t]){const e=$k(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Jd)}static RGB_HTML(t){return`#${t.map($k).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[Jd(1-Math.min(1,t+a)),Jd(1-Math.min(1,n+a)),Jd(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,o=1-e,c=1-n,u=Math.min(a,o,c);return["CMYK",a,o,c,u]}}class fD{static setupStorage(t,e,n,a,o){const c=a.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of n.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:o}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){var y,b;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,o=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:n});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const w=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=w}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const w=document.createTextNode(a.value);c.append(w),u&&jf.shouldBuildText(a.name)&&f.push(w)}return{textDivs:f}}const g=[[a,-1,c]];for(;g.length>0;){const[w,A,S]=g.at(-1);if(A+1===w.children.length){g.pop();continue}const C=w.children[++g.at(-1)[1]];if(C===null)continue;const{name:T}=C;if(T==="#text"){const L=document.createTextNode(C.value);f.push(L),S.append(L);continue}const D=(y=C==null?void 0:C.attributes)!=null&&y.xmlns?document.createElementNS(C.attributes.xmlns,T):document.createElement(T);if(S.append(D),C.attributes&&this.setAttributes({html:D,element:C,storage:e,intent:o,linkService:n}),((b=C.children)==null?void 0:b.length)>0)g.push([C,-1,D]);else if(C.value){const L=document.createTextNode(C.value);u&&jf.shouldBuildText(T)&&f.push(L),D.append(L)}}for(const w of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Tg=1e3,aV=9,wc=new WeakSet;function xa(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class oV{static create(t){switch(t.data.annotationType){case Je.LINK:return new pD(t);case Je.TEXT:return new lV(t);case Je.WIDGET:switch(t.data.fieldType){case"Tx":return new cV(t);case"Btn":return t.data.radioButton?new yD(t):t.data.checkBox?new hV(t):new dV(t);case"Ch":return new fV(t);case"Sig":return new uV(t)}return new Mc(t);case Je.POPUP:return new EA(t);case Je.FREETEXT:return new AD(t);case Je.LINE:return new gV(t);case Je.SQUARE:return new mV(t);case Je.CIRCLE:return new yV(t);case Je.POLYLINE:return new _D(t);case Je.CARET:return new bV(t);case Je.INK:return new SD(t);case Je.POLYGON:return new vV(t);case Je.HIGHLIGHT:return new xV(t);case Je.UNDERLINE:return new wV(t);case Je.SQUIGGLY:return new AV(t);case Je.STRIKEOUT:return new _V(t);case Je.STAMP:return new ED(t);case Je.FILEATTACHMENT:return new SV(t);default:return new Ve(t)}}}var Gl,uh,hh,Cp,SA;const rS=class rS{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){M(this,Cp);M(this,Gl,null);M(this,uh,!1);M(this,hh,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get hasPopupData(){return rS._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;p(this,Gl)||k(this,Gl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&N(this,Cp,SA).call(this,e),(n=p(this,hh))==null||n.popup.updateEdited(t)}resetEdited(){var t;p(this,Gl)&&(N(this,Cp,SA).call(this,p(this,Gl).rect),(t=p(this,hh))==null||t.popup.resetEdited(),k(this,Gl,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof Mc||(o.tabIndex=Tg);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,e.popupRef&&o.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof EA){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=xa(e.rect);if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(S>0||C>0){const D=`calc(${S}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;c.borderRadius=D}else if(this instanceof yD){const D=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;c.borderRadius=D}switch(e.borderStyle.style){case Qd.SOLID:c.borderStyle="solid";break;case Qd.DASHED:c.borderStyle="dashed";break;case Qd.BEVELED:zt("Unimplemented border style: beveled");break;case Qd.INSET:zt("Unimplemented border style: inset");break;case Qd.UNDERLINE:c.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(k(this,uh,!0),c.borderColor=At.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):c.borderWidth=0}const f=At.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:w}=a.rawDims;c.left=`${100*(f[0]-b)/g}%`,c.top=`${100*(f[1]-w)/y}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(c.width=`${100*u/g}%`,c.height=`${100*d/y}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims,{width:o,height:c}=xa(this.data.rect);let u,d;t%180===0?(u=100*o/n,d=100*c/a):(u=100*c/n,d=100*o/a),e.style.width=`${u}%`,e.style.height=`${d}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const o=a.detail[e],c=o[0],u=o.slice(1);a.target.style[n]=Xk[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:Xk[`${c}_rgb`](u)})};return ee(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const o=t[a]||n[a];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,o]of Object.entries(e)){const c=n[a];if(c){const u={detail:{[a]:o},target:t};c(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,C,T,D]=t.subarray(2,6);if(a===S&&o===C&&e===T&&n===D)return}const{style:c}=this.container;let u;if(p(this,uh)){const{borderColor:S,borderWidth:C}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=a-e,f=o-n,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const b=g.createElement("defs");y.append(b);const w=g.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),b.append(w);for(let S=2,C=t.length;S<C;S+=8){const T=t[S],D=t[S+1],L=t[S+2],P=t[S+3],z=g.createElement("rect"),U=(L-e)/d,O=(o-D)/f,H=(T-L)/d,Z=(D-P)/f;z.setAttribute("x",U),z.setAttribute("y",O),z.setAttribute("width",H),z.setAttribute("height",Z),w.append(z),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${O}" width="${H}" height="${Z}"/>`)}p(this,uh)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const n=k(this,hh,new EA({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){ve("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:c,exportValues:u}of a){if(o===-1||c===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!wc.has(f)){zt(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:d,domElement:f})}return n}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==e&&wc.has(a)&&n.push({id:c,exportValue:o,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Gl=new WeakMap,uh=new WeakMap,hh=new WeakMap,Cp=new WeakSet,SA=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:g}=xa(t);e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*f/o}%`,e.height=`${100*g/c}%`):this.setRotation(a)};let Ve=rS;var Ii,dl,gD,mD;class pD extends Ve{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});M(this,Ii);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(a,e.action),o=!0):e.attachment?(N(this,Ii,gD).call(this,a,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(N(this,Ii,mD).call(this,a,e.setOCGState),o=!0):e.dest?(this._bindLink(a,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),o=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(a,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(a),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&N(this,Ii,dl).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),N(this,Ii,dl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const c=a.get(o);c&&(e[c]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),N(this,Ii,dl).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),N(this,Ii,dl).call(this),!this._fieldObjects){zt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var y;a==null||a();const{fields:o,refs:c,include:u}=n,d=[];if(o.length!==0||c.length!==0){const b=new Set(c);for(const w of o){const A=this._fieldObjects[w]||[];for(const{id:S}of A)b.add(S)}for(const w of Object.values(this._fieldObjects))for(const A of w)b.has(A.id)===u&&d.push(A)}else for(const b of Object.values(this._fieldObjects))d.push(...b);const f=this.annotationStorage,g=[];for(const b of d){const{id:w}=b;switch(g.push(w),b.type){case"text":{const S=b.defaultValue||"";f.setValue(w,{value:S});break}case"checkbox":case"radiobutton":{const S=b.defaultValue===b.exportValues;f.setValue(w,{value:S});break}case"combobox":case"listbox":{const S=b.defaultValue||"";f.setValue(w,{value:S});break}default:continue}const A=document.querySelector(`[data-element-id="${w}"]`);if(A){if(!wc.has(A)){zt(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}Ii=new WeakSet,dl=function(){this.container.setAttribute("data-internal-link","")},gD=function(e,n,a=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,a),!1},N(this,Ii,dl).call(this)},mD=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),N(this,Ii,dl).call(this)};class lV extends Ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Mc extends Ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return di.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,o){n.includes("mouse")?t.addEventListener(n,c=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{var u;if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}}))})}_setEventListeners(t,e,n,a){var o,c,u;for(const[d,f]of n)(f==="Action"||(o=this.data.actions)!=null&&o[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,f,a),f==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":At.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||aV,o=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(uw*a))||1,y=f/g;c=Math.min(a,d(y/uw))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,d(f/uw))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=At.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class cV extends Mc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),o.setValue(c.id,{[a]:n})}render(){var a,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let u=c.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let f=c.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const g={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),wc.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Tg,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",b=>{t.setValue(e,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",b=>{const w=this.data.defaultFieldValue??"";n.value=g.userValue=w,g.formattedValue=null});let y=b=>{const{formattedValue:w}=g;w!=null&&(b.target.value=w),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{var S;if(g.focused)return;const{target:A}=w;g.userValue&&(A.value=g.userValue),g.lastCommittedValue=A.value,g.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const A={value(S){g.userValue=S.detail.value??"",t.setValue(e,{value:g.userValue.toString()}),S.target.value=g.userValue},formattedValue(S){const{formattedValue:C}=S.detail;g.formattedValue=C,C!=null&&S.target!==document.activeElement&&(S.target.value=C),t.setValue(e,{formattedValue:C})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var L;const{charLimit:C}=S.detail,{target:T}=S;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let D=g.userValue;!D||D.length<=C||(D=D.slice(0,C),T.value=g.userValue=D,t.setValue(e,{value:D}),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(A,w)}),n.addEventListener("keydown",w=>{var C;g.commitKey=1;let A=-1;if(w.key==="Escape"?A=0:w.key==="Enter"&&!this.data.multiLine?A=2:w.key==="Tab"&&(g.commitKey=3),A===-1)return;const{value:S}=w.target;g.lastCommittedValue!==S&&(g.lastCommittedValue=S,g.userValue=S,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:A,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const b=y;y=null,n.addEventListener("blur",w=>{var S,C;if(!g.focused||!w.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(g.focused=!1);const{value:A}=w.target;g.userValue=A,g.lastCommittedValue!==A&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:g.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),b(w)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",w=>{var z;g.lastCommittedValue=null;const{data:A,target:S}=w,{value:C,selectionStart:T,selectionEnd:D}=S;let L=T,P=D;switch(w.inputType){case"deleteWordBackward":{const U=C.substring(0,T).match(/\w*[^\w]*$/);U&&(L-=U[0].length);break}case"deleteWordForward":{const U=C.substring(T).match(/^[^\w]*\w*/);U&&(P+=U[0].length);break}case"deleteContentBackward":T===D&&(L-=1);break;case"deleteContentForward":T===D&&(P+=1);break}w.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:A||"",willCommit:!1,selStart:L,selEnd:P}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class uV extends Mc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class hV extends Mc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return wc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=Tg,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class yD extends Mc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(wc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=Tg,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===n;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class dV extends pD{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class fV extends Mc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");wc.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=Tg;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,n.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),c=()=>{g.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:w}=a;return w?Array.prototype.filter.call(b,A=>A.selected).map(A=>A[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){c==null||c();const w=b.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const S of a.options)S.selected=A.has(S.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const w=a.options,A=b.detail.remove;w[A].selected=!1,a.remove(A),w.length>0&&Array.prototype.findIndex.call(w,C=>C.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(b){const{index:w,displayValue:A,exportValue:S}=b.detail.insert,C=a.children[w],T=document.createElement("option");T.textContent=A,T.value=S,C?C.before(T):a.append(T),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},items(b){const{items:w}=b.detail;for(;a.length!==0;)a.remove(0);for(const A of w){const{displayValue:S,exportValue:C}=A,T=document.createElement("option");T.textContent=S,T.value=C,a.append(T)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},indices(b){const w=new Set(b.detail.indices);for(const A of b.target.options)A.selected=w.has(A.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{var w;const y=u(!0),b=u(!1);t.setValue(e,{value:y}),g.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class EA extends Ve{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Ve._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new pV({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${vM}${n}`).join(",")),this.container}}var dh,Dv,Lv,fh,$l,ze,sa,Xl,Tp,kp,ph,ra,Ss,aa,Rp,oa,Np,Yl,Kl,be,Dy,CA,vD,bD,xD,wD,Ly,Oy,TA;class pV{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:f,parentRect:g,open:y}){M(this,be);M(this,dh,N(this,be,xD).bind(this));M(this,Dv,N(this,be,TA).bind(this));M(this,Lv,N(this,be,Oy).bind(this));M(this,fh,N(this,be,Ly).bind(this));M(this,$l,null);M(this,ze,null);M(this,sa,null);M(this,Xl,null);M(this,Tp,null);M(this,kp,null);M(this,ph,null);M(this,ra,!1);M(this,Ss,null);M(this,aa,null);M(this,Rp,null);M(this,oa,null);M(this,Np,null);M(this,Yl,null);M(this,Kl,!1);var b;k(this,ze,t),k(this,Np,a),k(this,sa,c),k(this,oa,u),k(this,kp,d),k(this,$l,e),k(this,Rp,f),k(this,ph,g),k(this,Tp,n),k(this,Xl,_M.toDateObject(o)),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup());for(const w of this.trigger)w.addEventListener("click",p(this,fh)),w.addEventListener("mouseenter",p(this,Lv)),w.addEventListener("mouseleave",p(this,Dv)),w.classList.add("popupTriggerArea");for(const w of n)(b=w.container)==null||b.addEventListener("keydown",p(this,dh));p(this,ze).hidden=!0,y&&N(this,be,Ly).call(this)}render(){if(p(this,Ss))return;const t=k(this,Ss,document.createElement("div"));if(t.className="popup",p(this,$l)){const o=t.style.outlineColor=At.makeHexColor(...p(this,$l));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=At.makeHexColor(...p(this,$l).map(u=>Math.floor(.7*(255-u)+u)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=p(this,Np),t.append(e),p(this,Xl)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),o.setAttribute("data-l10n-args",JSON.stringify({date:p(this,Xl).toLocaleDateString(),time:p(this,Xl).toLocaleTimeString()})),e.append(o)}const a=p(this,be,Dy);if(a)fD.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(p(this,sa));t.append(o)}p(this,ze).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let o=0,c=a.length;o<c;++o){const u=a[o];n.append(document.createTextNode(u)),o<c-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;p(this,Yl)||k(this,Yl,{contentsObj:p(this,sa),richText:p(this,oa)}),t&&k(this,aa,null),e&&(k(this,oa,N(this,be,bD).call(this,e)),k(this,sa,null)),(n=p(this,Ss))==null||n.remove(),k(this,Ss,null)}resetEdited(){var t;p(this,Yl)&&({contentsObj:_i(this,sa)._,richText:_i(this,oa)._}=p(this,Yl),k(this,Yl,null),(t=p(this,Ss))==null||t.remove(),k(this,Ss,null),k(this,aa,null))}forceHide(){k(this,Kl,this.isVisible),p(this,Kl)&&(p(this,ze).hidden=!0)}maybeShow(){p(this,Kl)&&(p(this,Ss)||N(this,be,Oy).call(this),k(this,Kl,!1),p(this,ze).hidden=!1)}get isVisible(){return p(this,ze).hidden===!1}}dh=new WeakMap,Dv=new WeakMap,Lv=new WeakMap,fh=new WeakMap,$l=new WeakMap,ze=new WeakMap,sa=new WeakMap,Xl=new WeakMap,Tp=new WeakMap,kp=new WeakMap,ph=new WeakMap,ra=new WeakMap,Ss=new WeakMap,aa=new WeakMap,Rp=new WeakMap,oa=new WeakMap,Np=new WeakMap,Yl=new WeakMap,Kl=new WeakMap,be=new WeakSet,Dy=function(){const t=p(this,oa),e=p(this,sa);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&p(this,oa).html||null},CA=function(){var t,e,n;return((n=(e=(t=p(this,be,Dy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},vD=function(){var t,e,n;return((n=(e=(t=p(this,be,Dy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},bD=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:p(this,be,vD),fontSize:p(this,be,CA)?`calc(${p(this,be,CA)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return n},xD=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&p(this,ra))&&N(this,be,Ly).call(this)},wD=function(){if(p(this,aa)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:o}}}=p(this,kp);let c=!!p(this,ph),u=c?p(this,ph):p(this,Rp);for(const A of p(this,Tp))if(!u||At.intersect(A.data.rect,u)!==null){u=A.data.rect,c=!0;break}const d=At.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=c?u[2]-u[0]+5:0,y=d[0]+g,b=d[1];k(this,aa,[100*(y-a)/e,100*(b-o)/n]);const{style:w}=p(this,ze);w.left=`${p(this,aa)[0]}%`,w.top=`${p(this,aa)[1]}%`},Ly=function(){k(this,ra,!p(this,ra)),p(this,ra)?(N(this,be,Oy).call(this),p(this,ze).addEventListener("click",p(this,fh)),p(this,ze).addEventListener("keydown",p(this,dh))):(N(this,be,TA).call(this),p(this,ze).removeEventListener("click",p(this,fh)),p(this,ze).removeEventListener("keydown",p(this,dh)))},Oy=function(){p(this,Ss)||this.render(),this.isVisible?p(this,ra)&&p(this,ze).classList.add("focused"):(N(this,be,wD).call(this),p(this,ze).hidden=!1,p(this,ze).style.zIndex=parseInt(p(this,ze).style.zIndex)+1e3)},TA=function(){p(this,ze).classList.remove("focused"),!(p(this,ra)||!this.isVisible)&&(p(this,ze).hidden=!0,p(this,ze).style.zIndex=parseInt(p(this,ze).style.zIndex)-1e3)};class AD extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Jt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Mp;class gV extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Mp,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:a}=xa(e.rect),o=this.svgFactory.create(n,a,!0),c=k(this,Mp,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Mp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mp=new WeakMap;var Dp;class mV extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Dp,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:a}=xa(e.rect),o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,u=k(this,Dp,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",n-c),u.setAttribute("height",a-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Dp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dp=new WeakMap;var Lp;class yV extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Lp,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:a}=xa(e.rect),o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,u=k(this,Lp,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",a/2),u.setAttribute("rx",n/2-c/2),u.setAttribute("ry",a/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Lp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lp=new WeakMap;var Op;class _D extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Op,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:o}}=this;if(!n)return this.container;const{width:c,height:u}=xa(e),d=this.svgFactory.create(c,u,!0);let f=[];for(let y=0,b=n.length;y<b;y+=2){const w=n[y]-e[0],A=e[3]-n[y+1];f.push(`${w},${A}`)}f=f.join(" ");const g=k(this,Op,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",f),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Op)}addHighlightArea(){this.container.classList.add("highlightArea")}}Op=new WeakMap;class vV extends _D{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class bV extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var jp;class SD extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,jp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Jt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:a,popupRef:o}}=this,{width:c,height:u}=xa(e),d=this.svgFactory.create(c,u,!0);for(const f of n){let g=[];for(let b=0,w=f.length;b<w;b+=2){const A=f[b]-e[0],S=e[3]-f[b+1];g.push(`${A},${S}`)}g=g.join(" ");const y=this.svgFactory.createElement(this.svgElementName);p(this,jp).push(y),y.setAttribute("points",g),y.setAttribute("stroke-width",a.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),!o&&this.hasPopupData&&this._createPopup(),d.append(y)}return this.container.append(d),this.container}getElementsToTriggerPopup(){return p(this,jp)}addHighlightArea(){this.container.classList.add("highlightArea")}}jp=new WeakMap;class xV extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class wV extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class AV extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class _V extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ED extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Pp,Fp,kA;class SV extends Ve{constructor(e){var a;super(e,{isRenderable:!0});M(this,Fp);M(this,Pp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",N(this,Fp,kA).bind(this)),k(this,Pp,a);const{isMac:o}=di.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&N(this,Fp,kA).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return p(this,Pp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pp=new WeakMap,Fp=new WeakSet,kA=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Ip,Wl,gh,_c,CD,RA,oR;let EV=(oR=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:o,viewport:c}){M(this,_c);M(this,Ip,null);M(this,Wl,null);M(this,gh,new Map);this.div=t,k(this,Ip,e),k(this,Wl,n),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a}async render(t){var c;const{annotations:e}=t,n=this.div;bc(n,this.viewport);const a=new Map,o={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new X_,annotationStorage:t.annotationStorage||new Z_,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===Je.POPUP;if(d){const y=a.get(u.id);if(!y)continue;o.elements=y}else{const{width:y,height:b}=xa(u.rect);if(y<=0||b<=0)continue}o.data=u;const f=oV.create(o);if(!f.isRenderable)continue;if(!d&&u.popupRef){const y=a.get(u.popupRef);y?y.push(f):a.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),N(this,_c,CD).call(this,g,u.id),f.annotationEditorType>0&&(p(this,gh).set(f.data.id,f),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(f))}N(this,_c,RA).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,bc(e,{rotation:t.rotation}),N(this,_c,RA).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(p(this,gh).values())}getEditableAnnotation(t){return p(this,gh).get(t)}},Ip=new WeakMap,Wl=new WeakMap,gh=new WeakMap,_c=new WeakSet,CD=function(t,e){var a;const n=t.firstChild||t;n.id=`${vM}${e}`,this.div.append(t),(a=p(this,Ip))==null||a.moveElementInDOM(this.div,t,n,!1)},RA=function(){if(!p(this,Wl))return;const t=this.div;for(const[e,n]of p(this,Wl)){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;n.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):a.append(n)}p(this,Wl).clear()},oR);const ly=/\r\n?|\n/g;var zp,Up,Bp,Hp,Vp,Es,Mi,qp,Di,mh,We,TD,kD,RD,jy,Aa,Py,Fy,ND,MA,MD;const Se=class Se extends fe{constructor(e){super({...e,name:"freeTextEditor"});M(this,We);M(this,zp,this.editorDivBlur.bind(this));M(this,Up,this.editorDivFocus.bind(this));M(this,Bp,this.editorDivInput.bind(this));M(this,Hp,this.editorDivKeydown.bind(this));M(this,Vp,this.editorDivPaste.bind(this));M(this,Es);M(this,Mi,"");M(this,qp,`${this.id}-editor`);M(this,Di);M(this,mh,null);k(this,Es,e.color||Se._defaultColor||fe._defaultLineColor),k(this,Di,e.fontSize||Se._defaultFontSize)}static get _keyboardManager(){const e=Se.prototype,n=c=>c.isEmpty(),a=xc.TRANSLATE_SMALL,o=xc.TRANSLATE_BIG;return ee(this,"_keyboardManager",new Eg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){fe.initialize(e,n,{strings:["pdfjs-free-text-default-content"]});const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Nt.FREETEXT_SIZE:Se._defaultFontSize=n;break;case Nt.FREETEXT_COLOR:Se._defaultColor=n;break}}updateParams(e,n){switch(e){case Nt.FREETEXT_SIZE:N(this,We,TD).call(this,n);break;case Nt.FREETEXT_COLOR:N(this,We,kD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Nt.FREETEXT_SIZE,Se._defaultFontSize],[Nt.FREETEXT_COLOR,Se._defaultColor||fe._defaultLineColor]]}get propertiesToUpdate(){return[[Nt.FREETEXT_SIZE,p(this,Di)],[Nt.FREETEXT_COLOR,p(this,Es)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Se._internalPadding*e,-(Se._internalPadding+p(this,Di))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Jt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",p(this,Hp),{signal:e}),this.editorDiv.addEventListener("focus",p(this,Up),{signal:e}),this.editorDiv.addEventListener("blur",p(this,zp),{signal:e}),this.editorDiv.addEventListener("input",p(this,Bp),{signal:e}),this.editorDiv.addEventListener("paste",p(this,Vp),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",p(this,qp)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",p(this,Hp)),this.editorDiv.removeEventListener("focus",p(this,Up)),this.editorDiv.removeEventListener("blur",p(this,zp)),this.editorDiv.removeEventListener("input",p(this,Bp)),this.editorDiv.removeEventListener("paste",p(this,Vp)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=p(this,Mi),n=k(this,Mi,N(this,We,RD).call(this).trimEnd());if(e===n)return;const a=o=>{if(k(this,Mi,o),!o){this.remove();return}N(this,We,Fy).call(this),this._uiManager.rebuild(this),N(this,We,jy).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),N(this,We,jy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Se._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",p(this,qp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),fe._l10nPromise.get("pdfjs-free-text-default-content").then(o=>{var c;return(c=this.editorDiv)==null?void 0:c.setAttribute("default-content",o)}),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${p(this,Di)}px * var(--scale-factor))`,a.color=p(this,Es),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),hv(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=p(this,mh);let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[g,y]=this.pageDimensions,[b,w]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=e+(u[0]-b)/g,S=n+this.height-(u[1]-w)/y;break;case 90:A=e+(u[0]-b)/g,S=n-(u[1]-w)/y,[d,f]=[f,-d];break;case 180:A=e-this.width+(u[0]-b)/g,S=n-(u[1]-w)/y,[d,f]=[-d,-f];break;case 270:A=e+(u[0]-b-this.height*y)/g,S=n+(u[1]-w-this.width*g)/y,[d,f]=[-f,d];break}this.setAt(A*o,S*c,d,f)}else this.setAt(e*o,n*c,this.width*o,this.height*c);N(this,We,Fy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var A,S,C;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const o=N(A=Se,Aa,MA).call(A,n.getData("text")||"").replaceAll(ly,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:d,startOffset:f}=u,g=[],y=[];if(d.nodeType===Node.TEXT_NODE){const T=d.parentElement;if(y.push(d.nodeValue.slice(f).replaceAll(ly,"")),T!==this.editorDiv){let D=g;for(const L of this.editorDiv.childNodes){if(L===T){D=y;continue}D.push(N(S=Se,Aa,Py).call(S,L))}}g.push(d.nodeValue.slice(0,f).replaceAll(ly,""))}else if(d===this.editorDiv){let T=g,D=0;for(const L of this.editorDiv.childNodes)D++===f&&(T=y),T.push(N(C=Se,Aa,Py).call(C,L))}k(this,Mi,`${g.join(`
`)}${o}${y.join(`
`)}`),N(this,We,Fy).call(this);const b=new Range;let w=g.reduce((T,D)=>T+D.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const D=T.nodeValue.length;if(w<=D){b.setStart(T,w),b.setEnd(T,w);break}w-=D}c.removeAllRanges(),c.addRange(b)}get contentDiv(){return this.editorDiv}static deserialize(e,n,a){var u;let o=null;if(e instanceof AD){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:g,rotation:y,id:b},textContent:w,textPosition:A,parent:{page:{pageNumber:S}}}=e;if(!w||w.length===0)return null;o=e={annotationType:Jt.FREETEXT,color:Array.from(f),fontSize:d,value:w.join(`
`),position:A,pageIndex:S-1,rect:g.slice(0),rotation:y,id:b,deleted:!1}}const c=super.deserialize(e,n,a);return k(c,Di,e.fontSize),k(c,Es,At.makeHexColor(...e.color)),k(c,Mi,N(u=Se,Aa,MA).call(u,e.value)),c.annotationElementId=e.id||null,k(c,mh,o),c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=Se._internalPadding*this.parentScale,a=this.getRect(n,n),o=fe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:p(this,Es)),c={annotationType:Jt.FREETEXT,color:o,fontSize:p(this,Di),value:N(this,We,ND).call(this),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!N(this,We,MD).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:a}=n;a.fontSize=`calc(${p(this,Di)}px * var(--scale-factor))`,a.color=p(this,Es),n.replaceChildren();for(const c of p(this,Mi).split(`
`)){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),n.append(u)}const o=Se._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:p(this,Mi)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};zp=new WeakMap,Up=new WeakMap,Bp=new WeakMap,Hp=new WeakMap,Vp=new WeakMap,Es=new WeakMap,Mi=new WeakMap,qp=new WeakMap,Di=new WeakMap,mh=new WeakMap,We=new WeakSet,TD=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-p(this,Di))*this.parentScale),k(this,Di,o),N(this,We,jy).call(this)},a=p(this,Di);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},kD=function(e){const n=o=>{k(this,Es,this.editorDiv.style.color=o)},a=p(this,Es);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RD=function(){var n;const e=[];this.editorDiv.normalize();for(const a of this.editorDiv.childNodes)e.push(N(n=Se,Aa,Py).call(n,a));return e.join(`
`)},jy=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,u=c.style.display,d=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),a=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},Aa=new WeakSet,Py=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(ly,"")},Fy=function(){if(this.editorDiv.replaceChildren(),!!p(this,Mi))for(const e of p(this,Mi).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},ND=function(){return p(this,Mi).replaceAll(""," ")},MA=function(e){return e.replaceAll(" ","")},MD=function(e){const{value:n,fontSize:a,color:o,pageIndex:c}=p(this,mh);return this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((u,d)=>u!==o[d])||e.pageIndex!==c},M(Se,Aa),Mt(Se,"_freeTextDefaultContent",""),Mt(Se,"_internalPadding",0),Mt(Se,"_defaultColor",null),Mt(Se,"_defaultFontSize",10),Mt(Se,"_type","freetext"),Mt(Se,"_editorType",Jt.FREETEXT);let NA=Se;var Gp,wo,Cs,Jn,DD,Iy,LD,OD,LA;class DA{constructor(t,e=0,n=0,a=!0){M(this,Jn);M(this,Gp);M(this,wo,[]);M(this,Cs,[]);let o=1/0,c=-1/0,u=1/0,d=-1/0;const f=10**-4;for(const{x:C,y:T,width:D,height:L}of t){const P=Math.floor((C-e)/f)*f,z=Math.ceil((C+D+e)/f)*f,U=Math.floor((T-e)/f)*f,O=Math.ceil((T+L+e)/f)*f,H=[P,U,O,!0],Z=[z,U,O,!1];p(this,wo).push(H,Z),o=Math.min(o,P),c=Math.max(c,z),u=Math.min(u,U),d=Math.max(d,O)}const g=c-o+2*n,y=d-u+2*n,b=o-n,w=u-n,A=p(this,wo).at(a?-1:-2),S=[A[0],A[2]];for(const C of p(this,wo)){const[T,D,L]=C;C[0]=(T-b)/g,C[1]=(D-w)/y,C[2]=(L-w)/y}k(this,Gp,{x:b,y:w,width:g,height:y,lastPoint:S})}getOutlines(){p(this,wo).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of p(this,wo))e[3]?(t.push(...N(this,Jn,LA).call(this,e)),N(this,Jn,LD).call(this,e)):(N(this,Jn,OD).call(this,e),t.push(...N(this,Jn,LA).call(this,e)));return N(this,Jn,DD).call(this,t)}}Gp=new WeakMap,wo=new WeakMap,Cs=new WeakMap,Jn=new WeakSet,DD=function(t){const e=[],n=new Set;for(const c of t){const[u,d,f]=c;e.push([u,d,c],[u,f,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const a=[];let o;for(;n.size>0;){const c=n.values().next().value;let[u,d,f,g,y]=c;n.delete(c);let b=u,w=d;for(o=[u,f],a.push(o);;){let A;if(n.has(g))A=g;else if(n.has(y))A=y;else break;n.delete(A),[u,d,f,g,y]=A,b!==u&&(o.push(b,w,u,w===d?d:f),b=u),w=w===d?f:d}o.push(b,w)}return new CV(a,p(this,Gp))},Iy=function(t){const e=p(this,Cs);let n=0,a=e.length-1;for(;n<=a;){const o=n+a>>1,c=e[o][0];if(c===t)return o;c<t?n=o+1:a=o-1}return a+1},LD=function([,t,e]){const n=N(this,Jn,Iy).call(this,t);p(this,Cs).splice(n,0,[t,e])},OD=function([,t,e]){const n=N(this,Jn,Iy).call(this,t);for(let a=n;a<p(this,Cs).length;a++){const[o,c]=p(this,Cs)[a];if(o!==t)break;if(o===t&&c===e){p(this,Cs).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[o,c]=p(this,Cs)[a];if(o!==t)break;if(o===t&&c===e){p(this,Cs).splice(a,1);return}}},LA=function(t){const[e,n,a]=t,o=[[e,n,a]],c=N(this,Jn,Iy).call(this,a);for(let u=0;u<c;u++){const[d,f]=p(this,Cs)[u];for(let g=0,y=o.length;g<y;g++){const[,b,w]=o[g];if(!(f<=b||w<=d)){if(b>=d){if(w>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,w>f&&o.push([e,f,w])}}}return o};class jD{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof jA}}var $p,yh;class CV extends jD{constructor(e,n){super();M(this,$p);M(this,yh);k(this,yh,e),k(this,$p,n)}toSVGPath(){const e=[];for(const n of p(this,yh)){let[a,o]=n;e.push(`M${a} ${o}`);for(let c=2;c<n.length;c+=2){const u=n[c],d=n[c+1];u===a?(e.push(`V${d}`),o=d):d===o&&(e.push(`H${u}`),a=u)}e.push("Z")}return e.join(" ")}serialize([e,n,a,o],c){const u=[],d=a-e,f=o-n;for(const g of p(this,yh)){const y=new Array(g.length);for(let b=0;b<g.length;b+=2)y[b]=e+g[b]*d,y[b+1]=o-g[b+1]*f;u.push(y)}return u}get box(){return p(this,$p)}}$p=new WeakMap,yh=new WeakMap;var Qs,la,vh,bh,Zs,Wt,Ql,Zl,Xp,Yp,xh,wh,Ao,Kp,Ov,jv,Wp,OA;const qr=class qr{constructor({x:t,y:e},n,a,o,c,u=0){M(this,Wp);M(this,Qs);M(this,la,[]);M(this,vh);M(this,bh);M(this,Zs,[]);M(this,Wt,new Float64Array(18));M(this,Ql);M(this,Zl);M(this,Xp);M(this,Yp);M(this,xh);M(this,wh);M(this,Ao,[]);k(this,Qs,n),k(this,wh,o*a),k(this,bh,c),p(this,Wt).set([NaN,NaN,NaN,NaN,t,e],6),k(this,vh,u),k(this,Yp,p(qr,Kp)*a),k(this,Xp,p(qr,jv)*a),k(this,xh,a),p(this,Ao).push(t,e)}get free(){return!0}isEmpty(){return isNaN(p(this,Wt)[8])}add({x:t,y:e}){var Z;k(this,Ql,t),k(this,Zl,e);const[n,a,o,c]=p(this,Qs);let[u,d,f,g]=p(this,Wt).subarray(8,12);const y=t-f,b=e-g,w=Math.hypot(y,b);if(w<p(this,Xp))return!1;const A=w-p(this,Yp),S=A/w,C=S*y,T=S*b;let D=u,L=d;u=f,d=g,f+=C,g+=T,(Z=p(this,Ao))==null||Z.push(t,e);const P=-T/A,z=C/A,U=P*p(this,wh),O=z*p(this,wh);return p(this,Wt).set(p(this,Wt).subarray(2,8),0),p(this,Wt).set([f+U,g+O],4),p(this,Wt).set(p(this,Wt).subarray(14,18),12),p(this,Wt).set([f-U,g-O],16),isNaN(p(this,Wt)[6])?(p(this,Zs).length===0&&(p(this,Wt).set([u+U,d+O],2),p(this,Zs).push(NaN,NaN,NaN,NaN,(u+U-n)/o,(d+O-a)/c),p(this,Wt).set([u-U,d-O],14),p(this,la).push(NaN,NaN,NaN,NaN,(u-U-n)/o,(d-O-a)/c)),p(this,Wt).set([D,L,u,d,f,g],6),!this.isEmpty()):(p(this,Wt).set([D,L,u,d,f,g],6),Math.abs(Math.atan2(L-d,D-u)-Math.atan2(T,C))<Math.PI/2?([u,d,f,g]=p(this,Wt).subarray(2,6),p(this,Zs).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((d+g)/2-a)/c),[u,d,D,L]=p(this,Wt).subarray(14,18),p(this,la).push(NaN,NaN,NaN,NaN,((D+u)/2-n)/o,((L+d)/2-a)/c),!0):([D,L,u,d,f,g]=p(this,Wt).subarray(0,6),p(this,Zs).push(((D+5*u)/6-n)/o,((L+5*d)/6-a)/c,((5*u+f)/6-n)/o,((5*d+g)/6-a)/c,((u+f)/2-n)/o,((d+g)/2-a)/c),[f,g,u,d,D,L]=p(this,Wt).subarray(12,18),p(this,la).push(((D+5*u)/6-n)/o,((L+5*d)/6-a)/c,((5*u+f)/6-n)/o,((5*d+g)/6-a)/c,((u+f)/2-n)/o,((d+g)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=p(this,Zs),e=p(this,la),n=p(this,Wt).subarray(4,6),a=p(this,Wt).subarray(16,18),[o,c,u,d]=p(this,Qs),[f,g,y,b]=N(this,Wp,OA).call(this);if(isNaN(p(this,Wt)[6])&&!this.isEmpty())return`M${(p(this,Wt)[2]-o)/u} ${(p(this,Wt)[3]-c)/d} L${(p(this,Wt)[4]-o)/u} ${(p(this,Wt)[5]-c)/d} L${f} ${g} L${y} ${b} L${(p(this,Wt)[16]-o)/u} ${(p(this,Wt)[17]-c)/d} L${(p(this,Wt)[14]-o)/u} ${(p(this,Wt)[15]-c)/d} Z`;const w=[];w.push(`M${t[4]} ${t[5]}`);for(let A=6;A<t.length;A+=6)isNaN(t[A])?w.push(`L${t[A+4]} ${t[A+5]}`):w.push(`C${t[A]} ${t[A+1]} ${t[A+2]} ${t[A+3]} ${t[A+4]} ${t[A+5]}`);w.push(`L${(n[0]-o)/u} ${(n[1]-c)/d} L${f} ${g} L${y} ${b} L${(a[0]-o)/u} ${(a[1]-c)/d}`);for(let A=e.length-6;A>=6;A-=6)isNaN(e[A])?w.push(`L${e[A+4]} ${e[A+5]}`):w.push(`C${e[A]} ${e[A+1]} ${e[A+2]} ${e[A+3]} ${e[A+4]} ${e[A+5]}`);return w.push(`L${e[4]} ${e[5]} Z`),w.join(" ")}getOutlines(){var T;const t=p(this,Zs),e=p(this,la),n=p(this,Wt),a=n.subarray(4,6),o=n.subarray(16,18),[c,u,d,f]=p(this,Qs),g=new Float64Array((((T=p(this,Ao))==null?void 0:T.length)??0)+2);for(let D=0,L=g.length-2;D<L;D+=2)g[D]=(p(this,Ao)[D]-c)/d,g[D+1]=(p(this,Ao)[D+1]-u)/f;g[g.length-2]=(p(this,Ql)-c)/d,g[g.length-1]=(p(this,Zl)-u)/f;const[y,b,w,A]=N(this,Wp,OA).call(this);if(isNaN(n[6])&&!this.isEmpty()){const D=new Float64Array(36);return D.set([NaN,NaN,NaN,NaN,(n[2]-c)/d,(n[3]-u)/f,NaN,NaN,NaN,NaN,(n[4]-c)/d,(n[5]-u)/f,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,w,A,NaN,NaN,NaN,NaN,(n[16]-c)/d,(n[17]-u)/f,NaN,NaN,NaN,NaN,(n[14]-c)/d,(n[15]-u)/f],0),new jA(D,g,p(this,Qs),p(this,xh),p(this,vh),p(this,bh))}const S=new Float64Array(p(this,Zs).length+24+p(this,la).length);let C=t.length;for(let D=0;D<C;D+=2){if(isNaN(t[D])){S[D]=S[D+1]=NaN;continue}S[D]=t[D],S[D+1]=t[D+1]}S.set([NaN,NaN,NaN,NaN,(a[0]-c)/d,(a[1]-u)/f,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,w,A,NaN,NaN,NaN,NaN,(o[0]-c)/d,(o[1]-u)/f],C),C+=24;for(let D=e.length-6;D>=6;D-=6)for(let L=0;L<6;L+=2){if(isNaN(e[D+L])){S[C]=S[C+1]=NaN,C+=2;continue}S[C]=e[D+L],S[C+1]=e[D+L+1],C+=2}return S.set([NaN,NaN,NaN,NaN,e[4],e[5]],C),new jA(S,g,p(this,Qs),p(this,xh),p(this,vh),p(this,bh))}};Qs=new WeakMap,la=new WeakMap,vh=new WeakMap,bh=new WeakMap,Zs=new WeakMap,Wt=new WeakMap,Ql=new WeakMap,Zl=new WeakMap,Xp=new WeakMap,Yp=new WeakMap,xh=new WeakMap,wh=new WeakMap,Ao=new WeakMap,Kp=new WeakMap,Ov=new WeakMap,jv=new WeakMap,Wp=new WeakSet,OA=function(){const t=p(this,Wt).subarray(4,6),e=p(this,Wt).subarray(16,18),[n,a,o,c]=p(this,Qs);return[(p(this,Ql)+(t[0]-e[0])/2-n)/o,(p(this,Zl)+(t[1]-e[1])/2-a)/c,(p(this,Ql)+(e[0]-t[0])/2-n)/o,(p(this,Zl)+(e[1]-t[1])/2-a)/c]},M(qr,Kp,8),M(qr,Ov,2),M(qr,jv,p(qr,Kp)+p(qr,Ov));let gv=qr;var Ah,Jl,ca,Qp,Li,Zp,He,fi,hf,df,PD;class jA extends jD{constructor(e,n,a,o,c,u){super();M(this,fi);M(this,Ah);M(this,Jl,null);M(this,ca);M(this,Qp);M(this,Li);M(this,Zp);M(this,He);k(this,He,e),k(this,Li,n),k(this,Ah,a),k(this,Zp,o),k(this,ca,c),k(this,Qp,u),N(this,fi,PD).call(this,u);const{x:d,y:f,width:g,height:y}=p(this,Jl);for(let b=0,w=e.length;b<w;b+=2)e[b]=(e[b]-d)/g,e[b+1]=(e[b+1]-f)/y;for(let b=0,w=n.length;b<w;b+=2)n[b]=(n[b]-d)/g,n[b+1]=(n[b+1]-f)/y}toSVGPath(){const e=[`M${p(this,He)[4]} ${p(this,He)[5]}`];for(let n=6,a=p(this,He).length;n<a;n+=6){if(isNaN(p(this,He)[n])){e.push(`L${p(this,He)[n+4]} ${p(this,He)[n+5]}`);continue}e.push(`C${p(this,He)[n]} ${p(this,He)[n+1]} ${p(this,He)[n+2]} ${p(this,He)[n+3]} ${p(this,He)[n+4]} ${p(this,He)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,o],c){const u=a-e,d=o-n;let f,g;switch(c){case 0:f=N(this,fi,hf).call(this,p(this,He),e,o,u,-d),g=N(this,fi,hf).call(this,p(this,Li),e,o,u,-d);break;case 90:f=N(this,fi,df).call(this,p(this,He),e,n,u,d),g=N(this,fi,df).call(this,p(this,Li),e,n,u,d);break;case 180:f=N(this,fi,hf).call(this,p(this,He),a,n,-u,d),g=N(this,fi,hf).call(this,p(this,Li),a,n,-u,d);break;case 270:f=N(this,fi,df).call(this,p(this,He),a,o,-u,-d),g=N(this,fi,df).call(this,p(this,Li),a,o,-u,-d);break}return{outline:Array.from(f),points:[Array.from(g)]}}get box(){return p(this,Jl)}getNewOutline(e,n){const{x:a,y:o,width:c,height:u}=p(this,Jl),[d,f,g,y]=p(this,Ah),b=c*g,w=u*y,A=a*g+d,S=o*y+f,C=new gv({x:p(this,Li)[0]*b+A,y:p(this,Li)[1]*w+S},p(this,Ah),p(this,Zp),e,p(this,Qp),n??p(this,ca));for(let T=2;T<p(this,Li).length;T+=2)C.add({x:p(this,Li)[T]*b+A,y:p(this,Li)[T+1]*w+S});return C.getOutlines()}}Ah=new WeakMap,Jl=new WeakMap,ca=new WeakMap,Qp=new WeakMap,Li=new WeakMap,Zp=new WeakMap,He=new WeakMap,fi=new WeakSet,hf=function(e,n,a,o,c){const u=new Float64Array(e.length);for(let d=0,f=e.length;d<f;d+=2)u[d]=n+e[d]*o,u[d+1]=a+e[d+1]*c;return u},df=function(e,n,a,o,c){const u=new Float64Array(e.length);for(let d=0,f=e.length;d<f;d+=2)u[d]=n+e[d+1]*o,u[d+1]=a+e[d]*c;return u},PD=function(e){const n=p(this,He);let a=n[4],o=n[5],c=a,u=o,d=a,f=o,g=a,y=o;const b=e?Math.max:Math.min;for(let T=6,D=n.length;T<D;T+=6){if(isNaN(n[T]))c=Math.min(c,n[T+4]),u=Math.min(u,n[T+5]),d=Math.max(d,n[T+4]),f=Math.max(f,n[T+5]),y<n[T+5]?(g=n[T+4],y=n[T+5]):y===n[T+5]&&(g=b(g,n[T+4]));else{const L=At.bezierBoundingBox(a,o,...n.slice(T,T+6));c=Math.min(c,L[0]),u=Math.min(u,L[1]),d=Math.max(d,L[2]),f=Math.max(f,L[3]),y<L[3]?(g=L[2],y=L[3]):y===L[3]&&(g=b(g,L[2]))}a=n[T+4],o=n[T+5]}const w=c-p(this,ca),A=u-p(this,ca),S=d-c+2*p(this,ca),C=f-u+2*p(this,ca);k(this,Jl,{x:w,y:A,width:S,height:C,lastPoint:[g,y]})};var Jp,tg,Ts,tc,_h,en,eg,Sh,ng,ig,ks,Eh,_e,PA,FA,FD,fl,ID,ro;const Gr=class Gr{constructor({editor:t=null,uiManager:e=null}){M(this,_e);M(this,Jp,N(this,_e,FD).bind(this));M(this,tg,N(this,_e,ID).bind(this));M(this,Ts,null);M(this,tc,null);M(this,_h);M(this,en,null);M(this,eg,!1);M(this,Sh,!1);M(this,ng,null);M(this,ig);M(this,ks,null);M(this,Eh);var n;t?(k(this,Sh,!1),k(this,Eh,Nt.HIGHLIGHT_COLOR),k(this,ng,t)):(k(this,Sh,!0),k(this,Eh,Nt.HIGHLIGHT_DEFAULT_COLOR)),k(this,ks,(t==null?void 0:t._uiManager)||e),k(this,ig,p(this,ks)._eventBus),k(this,_h,(t==null?void 0:t.color)||((n=p(this,ks))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return ee(this,"_keyboardManager",new Eg([[["Escape","mac+Escape"],Gr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Gr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Gr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Gr.prototype._moveToPrevious],[["Home","mac+Home"],Gr.prototype._moveToBeginning],[["End","mac+End"],Gr.prototype._moveToEnd]]))}renderButton(){const t=k(this,Ts,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=p(this,ks)._signal;t.addEventListener("click",N(this,_e,fl).bind(this),{signal:e}),t.addEventListener("keydown",p(this,Jp),{signal:e});const n=k(this,tc,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=p(this,_h),t.append(n),t}renderMainDropdown(){const t=k(this,en,N(this,_e,PA).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===p(this,Ts)){N(this,_e,fl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&N(this,_e,FA).call(this,e,t)}_moveToNext(t){var e,n;if(!p(this,_e,ro)){N(this,_e,fl).call(this,t);return}if(t.target===p(this,Ts)){(e=p(this,en).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=p(this,en))==null?void 0:e.firstChild)||t.target===p(this,Ts)){p(this,_e,ro)&&this._hideDropdownFromKeyboard();return}p(this,_e,ro)||N(this,_e,fl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!p(this,_e,ro)){N(this,_e,fl).call(this,t);return}(e=p(this,en).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!p(this,_e,ro)){N(this,_e,fl).call(this,t);return}(e=p(this,en).lastChild)==null||e.focus()}hideDropdown(){var t;(t=p(this,en))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",p(this,tg))}_hideDropdownFromKeyboard(){var t;if(!p(this,Sh)){if(!p(this,_e,ro)){(t=p(this,ng))==null||t.unselect();return}this.hideDropdown(),p(this,Ts).focus({preventScroll:!0,focusVisible:p(this,eg)})}}updateColor(t){if(p(this,tc)&&(p(this,tc).style.backgroundColor=t),!p(this,en))return;const e=p(this,ks).highlightColors.values();for(const n of p(this,en).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=p(this,Ts))==null||t.remove(),k(this,Ts,null),k(this,tc,null),(e=p(this,en))==null||e.remove(),k(this,en,null)}};Jp=new WeakMap,tg=new WeakMap,Ts=new WeakMap,tc=new WeakMap,_h=new WeakMap,en=new WeakMap,eg=new WeakMap,Sh=new WeakMap,ng=new WeakMap,ig=new WeakMap,ks=new WeakMap,Eh=new WeakMap,_e=new WeakSet,PA=function(){const t=document.createElement("div"),e=p(this,ks)._signal;t.addEventListener("contextmenu",pi,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,a]of p(this,ks).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=n,o.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${n}`);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.setAttribute("aria-selected",a===p(this,_h)),o.addEventListener("click",N(this,_e,FA).bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",p(this,Jp),{signal:e}),t},FA=function(t,e){e.stopPropagation(),p(this,ig).dispatch("switchannotationeditorparams",{source:this,type:p(this,Eh),value:t})},FD=function(t){Gr._keyboardManager.exec(this,t)},fl=function(t){if(p(this,_e,ro)){this.hideDropdown();return}if(k(this,eg,t.detail===0),window.addEventListener("pointerdown",p(this,tg),{signal:p(this,ks)._signal}),p(this,en)){p(this,en).classList.remove("hidden");return}const e=k(this,en,N(this,_e,PA).call(this));p(this,Ts).append(e)},ID=function(t){var e;(e=p(this,en))!=null&&e.contains(t.target)||this.hideDropdown()},ro=function(){return p(this,en)&&!p(this,en).classList.contains("hidden")};let mv=Gr;var Ch,sg,_o,ec,Th,es,rg,ag,nc,Rs,Kn,Oi,Pv,kh,ic,nn,Rh,Js,og,qt,IA,zA,zD,UD,BD,UA,ff,ls,Cu,HD,zy,pf,VD,qD,GD,$D;const oe=class oe extends fe{constructor(e){super({...e,name:"highlightEditor"});M(this,qt);M(this,Ch,null);M(this,sg,0);M(this,_o);M(this,ec,null);M(this,Th,null);M(this,es,null);M(this,rg,null);M(this,ag,0);M(this,nc,null);M(this,Rs,null);M(this,Kn,null);M(this,Oi,!1);M(this,Pv,N(this,qt,HD).bind(this));M(this,kh,null);M(this,ic);M(this,nn,null);M(this,Rh,"");M(this,Js);M(this,og,"");this.color=e.color||oe._defaultColor,k(this,Js,e.thickness||oe._defaultThickness),k(this,ic,e.opacity||oe._defaultOpacity),k(this,_o,e.boxes||null),k(this,og,e.methodOfCreation||""),k(this,Rh,e.text||""),this._isDraggable=!1,e.highlightId>-1?(k(this,Oi,!0),N(this,qt,zA).call(this,e),N(this,qt,ff).call(this)):(k(this,Ch,e.anchorNode),k(this,sg,e.anchorOffset),k(this,rg,e.focusNode),k(this,ag,e.focusOffset),N(this,qt,IA).call(this),N(this,qt,ff).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=oe.prototype;return ee(this,"_keyboardManager",new Eg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:p(this,Oi)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:p(this,Js),methodOfCreation:p(this,og)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;fe.initialize(e,n),oe._defaultColor||(oe._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Nt.HIGHLIGHT_DEFAULT_COLOR:oe._defaultColor=n;break;case Nt.HIGHLIGHT_THICKNESS:oe._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return p(this,kh)}updateParams(e,n){switch(e){case Nt.HIGHLIGHT_COLOR:N(this,qt,zD).call(this,n);break;case Nt.HIGHLIGHT_THICKNESS:N(this,qt,UD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Nt.HIGHLIGHT_DEFAULT_COLOR,oe._defaultColor],[Nt.HIGHLIGHT_THICKNESS,oe._defaultThickness]]}get propertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,this.color||oe._defaultColor],[Nt.HIGHLIGHT_THICKNESS,p(this,Js)||oe._defaultThickness],[Nt.HIGHLIGHT_FREE,p(this,Oi)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(k(this,Th,new mv({editor:this})),e.addColorPicker(p(this,Th))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(N(this,qt,pf).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,N(this,qt,pf).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){N(this,qt,UA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(N(this,qt,ff).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?N(this,qt,UA).call(this):e&&(N(this,qt,ff).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,c,u;const{drawLayer:n}=this.parent;let a;p(this,Oi)?(e=(e-this.rotation+360)%360,a=N(o=oe,ls,Cu).call(o,p(this,Rs).box,e)):a=N(c=oe,ls,Cu).call(c,this,e),n.rotate(p(this,Kn),e),n.rotate(p(this,nn),e),n.updateBox(p(this,Kn),a),n.updateBox(p(this,nn),N(u=oe,ls,Cu).call(u,p(this,es).box,e))}render(){if(this.div)return this.div;const e=super.render();p(this,Rh)&&(e.setAttribute("aria-label",p(this,Rh)),e.setAttribute("role","mark")),p(this,Oi)?e.classList.add("free"):this.div.addEventListener("keydown",p(this,Pv),{signal:this._uiManager._signal});const n=k(this,nc,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=p(this,ec);const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),hv(this,p(this,nc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(p(this,nn),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(p(this,nn),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:N(this,qt,zy).call(this,!0);break;case 1:case 3:N(this,qt,zy).call(this,!1);break}}select(){var e,n;super.select(),p(this,nn)&&((e=this.parent)==null||e.drawLayer.removeClass(p(this,nn),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(p(this,nn),"selected"))}unselect(){var e;super.unselect(),p(this,nn)&&((e=this.parent)==null||e.drawLayer.removeClass(p(this,nn),"selected"),p(this,Oi)||N(this,qt,zy).call(this,!1))}get _mustFixPosition(){return!p(this,Oi)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(p(this,Kn),e),this.parent.drawLayer.show(p(this,nn),e))}static startHighlighting(e,n,{target:a,x:o,y:c}){const{x:u,y:d,width:f,height:g}=a.getBoundingClientRect(),y=C=>{N(this,ls,GD).call(this,e,C)},b=e._signal,w={capture:!0,passive:!1,signal:b},A=C=>{C.preventDefault(),C.stopPropagation()},S=C=>{a.removeEventListener("pointermove",y),window.removeEventListener("blur",S),window.removeEventListener("pointerup",S),window.removeEventListener("pointerdown",A,w),window.removeEventListener("contextmenu",pi),N(this,ls,$D).call(this,e,C)};window.addEventListener("blur",S,{signal:b}),window.addEventListener("pointerup",S,{signal:b}),window.addEventListener("pointerdown",A,w),window.addEventListener("contextmenu",pi,{signal:b}),a.addEventListener("pointermove",y,{signal:b}),this._freeHighlight=new gv({x:o,y:c},[u,d,f,g],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,n,a){var S;const o=super.deserialize(e,n,a),{rect:[c,u,d,f],color:g,quadPoints:y}=e;o.color=At.makeHexColor(...g),k(o,ic,e.opacity);const[b,w]=o.pageDimensions;o.width=(d-c)/b,o.height=(f-u)/w;const A=k(o,_o,[]);for(let C=0;C<y.length;C+=8)A.push({x:(y[4]-d)/b,y:(f-(1-y[C+5]))/w,width:(y[C+2]-y[C])/b,height:(y[C+5]-y[C+1])/w});return N(S=o,qt,IA).call(S),o}serialize(e=!1){if(this.isEmpty()||e)return null;const n=this.getRect(0,0),a=fe._colorManager.convert(this.color);return{annotationType:Jt.HIGHLIGHT,color:a,opacity:p(this,ic),thickness:p(this,Js),quadPoints:N(this,qt,VD).call(this),outlines:N(this,qt,qD).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:N(this,qt,pf).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Ch=new WeakMap,sg=new WeakMap,_o=new WeakMap,ec=new WeakMap,Th=new WeakMap,es=new WeakMap,rg=new WeakMap,ag=new WeakMap,nc=new WeakMap,Rs=new WeakMap,Kn=new WeakMap,Oi=new WeakMap,Pv=new WeakMap,kh=new WeakMap,ic=new WeakMap,nn=new WeakMap,Rh=new WeakMap,Js=new WeakMap,og=new WeakMap,qt=new WeakSet,IA=function(){const e=new DA(p(this,_o),.001);k(this,Rs,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=p(this,Rs).box;const n=new DA(p(this,_o),.0025,.001,this._uiManager.direction==="ltr");k(this,es,n.getOutlines());const{lastPoint:a}=p(this,es).box;k(this,kh,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},zA=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var y,b;if(k(this,Rs,e),k(this,es,e.getNewOutline(p(this,Js)/2+1.5,.0025)),n>=0)k(this,Kn,n),k(this,ec,a),this.parent.drawLayer.finalizeLine(n,e),k(this,nn,this.parent.drawLayer.highlightOutline(p(this,es)));else if(this.parent){const w=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(p(this,Kn),e),this.parent.drawLayer.updateBox(p(this,Kn),N(y=oe,ls,Cu).call(y,p(this,Rs).box,(w-this.rotation+360)%360)),this.parent.drawLayer.updateLine(p(this,nn),p(this,es)),this.parent.drawLayer.updateBox(p(this,nn),N(b=oe,ls,Cu).call(b,p(this,es).box,w))}const{x:c,y:u,width:d,height:f}=e.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=d,this.height=f;break;case 90:{const[w,A]=this.parentDimensions;this.x=u,this.y=1-c,this.width=d*A/w,this.height=f*w/A;break}case 180:this.x=1-c,this.y=1-u,this.width=d,this.height=f;break;case 270:{const[w,A]=this.parentDimensions;this.x=1-u,this.y=c,this.width=d*A/w,this.height=f*w/A;break}}const{lastPoint:g}=p(this,es).box;k(this,kh,[(g[0]-c)/d,(g[1]-u)/f])},zD=function(e){const n=o=>{var c,u;this.color=o,(c=this.parent)==null||c.drawLayer.changeColor(p(this,Kn),o),(u=p(this,Th))==null||u.updateColor(o)},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},UD=function(e){const n=p(this,Js),a=o=>{k(this,Js,o),N(this,qt,BD).call(this,o)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},BD=function(e){if(!p(this,Oi))return;N(this,qt,zA).call(this,{highlightOutlines:p(this,Rs).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)},UA=function(){p(this,Kn)===null||!this.parent||(this.parent.drawLayer.remove(p(this,Kn)),k(this,Kn,null),this.parent.drawLayer.remove(p(this,nn)),k(this,nn,null))},ff=function(e=this.parent){p(this,Kn)===null&&({id:_i(this,Kn)._,clipPathId:_i(this,ec)._}=e.drawLayer.highlight(p(this,Rs),this.color,p(this,ic)),k(this,nn,e.drawLayer.highlightOutline(p(this,es))),p(this,nc)&&(p(this,nc).style.clipPath=p(this,ec)))},ls=new WeakSet,Cu=function({x:e,y:n,width:a,height:o},c){switch(c){case 90:return{x:1-n-o,y:e,width:o,height:a};case 180:return{x:1-e-a,y:1-n-o,width:a,height:o};case 270:return{x:n,y:1-e-a,width:o,height:a}}return{x:e,y:n,width:a,height:o}},HD=function(e){oe._keyboardManager.exec(this,e)},zy=function(e){if(!p(this,Ch))return;const n=window.getSelection();e?n.setPosition(p(this,Ch),p(this,sg)):n.setPosition(p(this,rg),p(this,ag))},pf=function(){return p(this,Oi)?this.rotation:0},VD=function(){if(p(this,Oi))return null;const[e,n]=this.pageDimensions,a=p(this,_o),o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:d,width:f,height:g}of a){const y=u*e,b=(1-d-g)*n;o[c]=o[c+4]=y,o[c+1]=o[c+3]=b,o[c+2]=o[c+6]=y+f*e,o[c+5]=o[c+7]=b+g*n,c+=8}return o},qD=function(e){return p(this,Rs).serialize(e,N(this,qt,pf).call(this))},GD=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},$D=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},M(oe,ls),Mt(oe,"_defaultColor",null),Mt(oe,"_defaultOpacity",1),Mt(oe,"_defaultThickness",12),Mt(oe,"_l10nPromise"),Mt(oe,"_type","highlight"),Mt(oe,"_editorType",Jt.HIGHLIGHT),Mt(oe,"_freeHighlightId",-1),Mt(oe,"_freeHighlight",null),Mt(oe,"_freeHighlightClipId","");let yv=oe;var sc,rc,lg,cg,ug,ac,tr,ua,ns,oc,lc,ha,cc,uc,So,ft,XD,YD,KD,WD,HA,QD,VA,ZD,JD,tL,eL,nL,pl,qA,Uy,By,Tu,GA,Hy,Ca,iL,$A,sL,rL,XA,Vy,gf;const je=class je extends fe{constructor(e){super({...e,name:"inkEditor"});M(this,ft);M(this,sc,0);M(this,rc,0);M(this,lg,this.canvasPointermove.bind(this));M(this,cg,this.canvasPointerleave.bind(this));M(this,ug,this.canvasPointerup.bind(this));M(this,ac,this.canvasPointerdown.bind(this));M(this,tr,null);M(this,ua,new Path2D);M(this,ns,!1);M(this,oc,!1);M(this,lc,!1);M(this,ha,null);M(this,cc,0);M(this,uc,0);M(this,So,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){fe.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Nt.INK_THICKNESS:je._defaultThickness=n;break;case Nt.INK_COLOR:je._defaultColor=n;break;case Nt.INK_OPACITY:je._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case Nt.INK_THICKNESS:N(this,ft,XD).call(this,n);break;case Nt.INK_COLOR:N(this,ft,YD).call(this,n);break;case Nt.INK_OPACITY:N(this,ft,KD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Nt.INK_THICKNESS,je._defaultThickness],[Nt.INK_COLOR,je._defaultColor||fe._defaultLineColor],[Nt.INK_OPACITY,Math.round(je._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Nt.INK_THICKNESS,this.thickness||je._defaultThickness],[Nt.INK_COLOR,this.color||je._defaultColor||fe._defaultLineColor],[Nt.INK_OPACITY,Math.round(100*(this.opacity??je._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(N(this,ft,Uy).call(this),N(this,ft,By).call(this)),this.isAttachedToDOM||(this.parent.add(this),N(this,ft,Tu).call(this)),N(this,ft,gf).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,p(this,tr)&&(clearTimeout(p(this,tr)),k(this,tr,null)),(e=p(this,ha))==null||e.disconnect(),k(this,ha,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,a=this.width*e,o=this.height*n;this.setDimensions(a,o)}enableEditMode(){p(this,ns)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",p(this,ac),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",p(this,ac)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){p(this,ns)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),k(this,ns,!0),this.div.classList.add("disabled"),N(this,ft,gf).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||p(this,ns)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),N(this,ft,QD).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),N(this,ft,VA).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),N(this,ft,qA).call(this,e)}canvasPointerleave(e){N(this,ft,qA).call(this,e)}get isResizable(){return!this.isEmpty()&&p(this,ns)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[a,o,c,u]=N(this,ft,WD).call(this);if(this.setAt(a,o,0,0),this.setDims(c,u),N(this,ft,Uy).call(this),this.width){const[d,f]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*f),this.setAt(e*d,n*f,this.width*d,this.height*f),k(this,lc,!0),N(this,ft,Tu).call(this),this.setDims(this.width*d,this.height*f),N(this,ft,pl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return N(this,ft,By).call(this),this.div}setDimensions(e,n){const a=Math.round(e),o=Math.round(n);if(p(this,cc)===a&&p(this,uc)===o)return;k(this,cc,a),k(this,uc,o),this.canvas.style.visibility="hidden";const[c,u]=this.parentDimensions;this.width=e/c,this.height=n/u,this.fixAndSetPosition(),p(this,ns)&&N(this,ft,GA).call(this,e,n),N(this,ft,Tu).call(this),N(this,ft,pl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,n,a){var C,T,D;if(e instanceof SD)return null;const o=super.deserialize(e,n,a);o.thickness=e.thickness,o.color=At.makeHexColor(...e.color),o.opacity=e.opacity;const[c,u]=o.pageDimensions,d=o.width*c,f=o.height*u,g=o.parentScale,y=e.thickness/2;k(o,ns,!0),k(o,cc,Math.round(d)),k(o,uc,Math.round(f));const{paths:b,rect:w,rotation:A}=e;for(let{bezier:L}of b){L=N(C=je,Ca,sL).call(C,L,w,A);const P=[];o.paths.push(P);let z=g*(L[0]-y),U=g*(L[1]-y);for(let H=2,Z=L.length;H<Z;H+=6){const $=g*(L[H]-y),W=g*(L[H+1]-y),it=g*(L[H+2]-y),ct=g*(L[H+3]-y),lt=g*(L[H+4]-y),nt=g*(L[H+5]-y);P.push([[z,U],[$,W],[it,ct],[lt,nt]]),z=lt,U=nt}const O=N(this,Ca,iL).call(this,P);o.bezierPath2D.push(O)}const S=N(T=o,ft,XA).call(T);return k(o,rc,Math.max(fe.MIN_SIZE,S[2]-S[0])),k(o,sc,Math.max(fe.MIN_SIZE,S[3]-S[1])),N(D=o,ft,GA).call(D,d,f),o}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=fe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Jt.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:N(this,ft,rL).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};sc=new WeakMap,rc=new WeakMap,lg=new WeakMap,cg=new WeakMap,ug=new WeakMap,ac=new WeakMap,tr=new WeakMap,ua=new WeakMap,ns=new WeakMap,oc=new WeakMap,lc=new WeakMap,ha=new WeakMap,cc=new WeakMap,uc=new WeakMap,So=new WeakMap,ft=new WeakSet,XD=function(e){const n=o=>{this.thickness=o,N(this,ft,gf).call(this)},a=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},YD=function(e){const n=o=>{this.color=o,N(this,ft,pl).call(this)},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},KD=function(e){const n=o=>{this.opacity=o,N(this,ft,pl).call(this)};e/=100;const a=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},WD=function(){const{parentRotation:e,parentDimensions:[n,a]}=this;switch(e){case 90:return[0,a,a,n];case 180:return[n,a,n,a];case 270:return[n,0,a,n];default:return[0,0,n,a]}},HA=function(){const{ctx:e,color:n,opacity:a,thickness:o,parentScale:c,scaleFactor:u}=this;e.lineWidth=o*c/u,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${W6(a)}`},QD=function(e,n){const a=this._uiManager._signal;this.canvas.addEventListener("contextmenu",pi,{signal:a}),this.canvas.addEventListener("pointerleave",p(this,cg),{signal:a}),this.canvas.addEventListener("pointermove",p(this,lg),{signal:a}),this.canvas.addEventListener("pointerup",p(this,ug),{signal:a}),this.canvas.removeEventListener("pointerdown",p(this,ac)),this.isEditing=!0,p(this,lc)||(k(this,lc,!0),N(this,ft,Tu).call(this),this.thickness||(this.thickness=je._defaultThickness),this.color||(this.color=je._defaultColor||fe._defaultLineColor),this.opacity??(this.opacity=je._defaultOpacity)),this.currentPath.push([e,n]),k(this,oc,!1),N(this,ft,HA).call(this),k(this,So,()=>{N(this,ft,tL).call(this),p(this,So)&&window.requestAnimationFrame(p(this,So))}),window.requestAnimationFrame(p(this,So))},VA=function(e,n){const[a,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===a&&n===o)return;const c=this.currentPath;let u=p(this,ua);if(c.push([e,n]),k(this,oc,!0),c.length<=2){u.moveTo(...c[0]),u.lineTo(e,n);return}c.length===3&&(k(this,ua,u=new Path2D),u.moveTo(...c[0])),N(this,ft,eL).call(this,u,...c.at(-3),...c.at(-2),e,n)},ZD=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);p(this,ua).lineTo(...e)},JD=function(e,n){k(this,So,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),N(this,ft,VA).call(this,e,n),N(this,ft,ZD).call(this);let a;if(this.currentPath.length!==1)a=N(this,ft,nL).call(this);else{const f=[e,n];a=[[f,f.slice(),f.slice(),f]]}const o=p(this,ua),c=this.currentPath;this.currentPath=[],k(this,ua,new Path2D);const u=()=>{this.allRawPaths.push(c),this.paths.push(a),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(N(this,ft,Uy).call(this),N(this,ft,By).call(this)),N(this,ft,gf).call(this))};this.addCommands({cmd:u,undo:d,mustExec:!0})},tL=function(){if(!p(this,oc))return;k(this,oc,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),a=n.map(u=>u[0]),o=n.map(u=>u[1]);Math.min(...a)-e,Math.max(...a)+e,Math.min(...o)-e,Math.max(...o)+e;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)c.stroke(u);c.stroke(p(this,ua)),c.restore()},eL=function(e,n,a,o,c,u,d){const f=(n+o)/2,g=(a+c)/2,y=(o+u)/2,b=(c+d)/2;e.bezierCurveTo(f+2*(o-f)/3,g+2*(c-g)/3,y+2*(o-y)/3,b+2*(c-b)/3,y,b)},nL=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let a,[o,c]=e[0];for(a=1;a<e.length-2;a++){const[w,A]=e[a],[S,C]=e[a+1],T=(w+S)/2,D=(A+C)/2,L=[o+2*(w-o)/3,c+2*(A-c)/3],P=[T+2*(w-T)/3,D+2*(A-D)/3];n.push([[o,c],L,P,[T,D]]),[o,c]=[T,D]}const[u,d]=e[a],[f,g]=e[a+1],y=[o+2*(u-o)/3,c+2*(d-c)/3],b=[f+2*(u-f)/3,g+2*(d-g)/3];return n.push([[o,c],y,b,[f,g]]),n},pl=function(){if(this.isEmpty()){N(this,ft,Hy).call(this);return}N(this,ft,HA).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),N(this,ft,Hy).call(this);for(const a of this.bezierPath2D)n.stroke(a)},qA=function(e){this.canvas.removeEventListener("pointerleave",p(this,cg)),this.canvas.removeEventListener("pointermove",p(this,lg)),this.canvas.removeEventListener("pointerup",p(this,ug)),this.canvas.addEventListener("pointerdown",p(this,ac),{signal:this._uiManager._signal}),p(this,tr)&&clearTimeout(p(this,tr)),k(this,tr,setTimeout(()=>{k(this,tr,null),this.canvas.removeEventListener("contextmenu",pi)},10)),N(this,ft,JD).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Uy=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},By=function(){k(this,ha,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),p(this,ha).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=p(this,ha))==null||e.disconnect(),k(this,ha,null)},{once:!0})},Tu=function(){if(!p(this,lc))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),N(this,ft,Hy).call(this)},GA=function(e,n){const a=N(this,ft,Vy).call(this),o=(e-a)/p(this,rc),c=(n-a)/p(this,sc);this.scaleFactor=Math.min(o,c)},Hy=function(){const e=N(this,ft,Vy).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Ca=new WeakSet,iL=function(e){const n=new Path2D;for(let a=0,o=e.length;a<o;a++){const[c,u,d,f]=e[a];a===0&&n.moveTo(...c),n.bezierCurveTo(u[0],u[1],d[0],d[1],f[0],f[1])}return n},$A=function(e,n,a){const[o,c,u,d]=n;switch(a){case 0:for(let f=0,g=e.length;f<g;f+=2)e[f]+=o,e[f+1]=d-e[f+1];break;case 90:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=e[f+1]+o,e[f+1]=y+c}break;case 180:for(let f=0,g=e.length;f<g;f+=2)e[f]=u-e[f],e[f+1]+=c;break;case 270:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=u-e[f+1],e[f+1]=d-y}break;default:throw new Error("Invalid rotation")}return e},sL=function(e,n,a){const[o,c,u,d]=n;switch(a){case 0:for(let f=0,g=e.length;f<g;f+=2)e[f]-=o,e[f+1]=d-e[f+1];break;case 90:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=e[f+1]-c,e[f+1]=y-o}break;case 180:for(let f=0,g=e.length;f<g;f+=2)e[f]=u-e[f],e[f+1]-=c;break;case 270:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=d-e[f+1],e[f+1]=u-y}break;default:throw new Error("Invalid rotation")}return e},rL=function(e,n,a,o){var g,y;const c=[],u=this.thickness/2,d=e*n+u,f=e*a+u;for(const b of this.paths){const w=[],A=[];for(let S=0,C=b.length;S<C;S++){const[T,D,L,P]=b[S];if(T[0]===P[0]&&T[1]===P[1]&&C===1){const ct=e*T[0]+d,lt=e*T[1]+f;w.push(ct,lt),A.push(ct,lt);break}const z=e*T[0]+d,U=e*T[1]+f,O=e*D[0]+d,H=e*D[1]+f,Z=e*L[0]+d,$=e*L[1]+f,W=e*P[0]+d,it=e*P[1]+f;S===0&&(w.push(z,U),A.push(z,U)),w.push(O,H,Z,$,W,it),A.push(O,H),S===C-1&&A.push(W,it)}c.push({bezier:N(g=je,Ca,$A).call(g,w,o,this.rotation),points:N(y=je,Ca,$A).call(y,A,o,this.rotation)})}return c},XA=function(){let e=1/0,n=-1/0,a=1/0,o=-1/0;for(const c of this.paths)for(const[u,d,f,g]of c){const y=At.bezierBoundingBox(...u,...d,...f,...g);e=Math.min(e,y[0]),a=Math.min(a,y[1]),n=Math.max(n,y[2]),o=Math.max(o,y[3])}return[e,a,n,o]},Vy=function(){return p(this,ns)?Math.ceil(this.thickness*this.parentScale):0},gf=function(e=!1){if(this.isEmpty())return;if(!p(this,ns)){N(this,ft,pl).call(this);return}const n=N(this,ft,XA).call(this),a=N(this,ft,Vy).call(this);k(this,rc,Math.max(fe.MIN_SIZE,n[2]-n[0])),k(this,sc,Math.max(fe.MIN_SIZE,n[3]-n[1]));const o=Math.ceil(a+p(this,rc)*this.scaleFactor),c=Math.ceil(a+p(this,sc)*this.scaleFactor),[u,d]=this.parentDimensions;this.width=o/u,this.height=c/d,this.setAspectRatio(o,c);const f=this.translationX,g=this.translationY;this.translationX=-n[0],this.translationY=-n[1],N(this,ft,Tu).call(this),N(this,ft,pl).call(this),k(this,cc,o),k(this,uc,c),this.setDims(o,c);const y=e?a/this.scaleFactor/2:0;this.translate(f-this.translationX-y,g-this.translationY-y)},M(je,Ca),Mt(je,"_defaultColor",null),Mt(je,"_defaultOpacity",1),Mt(je,"_defaultThickness",1),Mt(je,"_type","ink"),Mt(je,"_editorType",Jt.INK);let BA=je;var Rn,Nn,Eo,da,Co,Nh,er,fa,nr,Ns,hg,se,mf,yf,qy,KA,aL,oL,WA,Gy,lL;const _f=class _f extends fe{constructor(e){super({...e,name:"stampEditor"});M(this,se);M(this,Rn,null);M(this,Nn,null);M(this,Eo,null);M(this,da,null);M(this,Co,null);M(this,Nh,"");M(this,er,null);M(this,fa,null);M(this,nr,null);M(this,Ns,!1);M(this,hg,!1);k(this,da,e.bitmapUrl),k(this,Co,e.bitmapFile)}static initialize(e,n){fe.initialize(e,n)}static get supportedTypes(){return ee(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return ee(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(Jt.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,n;p(this,Nn)&&(k(this,Rn,null),this._uiManager.imageManager.deleteId(p(this,Nn)),(e=p(this,er))==null||e.remove(),k(this,er,null),(n=p(this,fa))==null||n.disconnect(),k(this,fa,null),p(this,nr)&&(clearTimeout(p(this,nr)),k(this,nr,null))),super.remove()}rebuild(){if(!this.parent){p(this,Nn)&&N(this,se,qy).call(this);return}super.rebuild(),this.div!==null&&(p(this,Nn)&&p(this,er)===null&&N(this,se,qy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(p(this,Eo)||p(this,Rn)||p(this,da)||p(this,Co)||p(this,Nn))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),p(this,Rn)?N(this,se,KA).call(this):N(this,se,qy).call(this),this.width){const[a,o]=this.parentDimensions;this.setAt(e*a,n*o,this.width*a,this.height*o)}return this.div}getImageForAltText(){return p(this,er)}static deserialize(e,n,a){if(e instanceof ED)return null;const o=super.deserialize(e,n,a),{rect:c,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:g}=e;d&&a.imageManager.isValidId(d)?k(o,Nn,d):k(o,da,u),k(o,Ns,f);const[y,b]=o.pageDimensions;return o.width=(c[2]-c[0])/y,o.height=(c[3]-c[1])/b,g&&(o.altTextData=g),o}serialize(e=!1,n=null){if(this.isEmpty())return null;const a={annotationType:Jt.STAMP,bitmapId:p(this,Nn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:p(this,Ns),structTreeParentId:this._structTreeParentId};if(e)return a.bitmapUrl=N(this,se,Gy).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:o,altText:c}=this.altTextData;if(!o&&c&&(a.accessibilityData={type:"Figure",alt:c}),n===null)return a;n.stamps||(n.stamps=new Map);const u=p(this,Ns)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(p(this,Nn)))n.stamps.set(p(this,Nn),{area:u,serialized:a}),a.bitmap=N(this,se,Gy).call(this,!1);else if(p(this,Ns)){const d=n.stamps.get(p(this,Nn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=N(this,se,Gy).call(this,!1))}return a}};Rn=new WeakMap,Nn=new WeakMap,Eo=new WeakMap,da=new WeakMap,Co=new WeakMap,Nh=new WeakMap,er=new WeakMap,fa=new WeakMap,nr=new WeakMap,Ns=new WeakMap,hg=new WeakMap,se=new WeakSet,mf=function(e,n=!1){if(!e){this.remove();return}k(this,Rn,e.bitmap),n||(k(this,Nn,e.id),k(this,Ns,e.isSvg)),e.file&&k(this,Nh,e.file.name),N(this,se,KA).call(this)},yf=function(){k(this,Eo,null),this._uiManager.enableWaiting(!1),p(this,er)&&this.div.focus()},qy=function(){if(p(this,Nn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(p(this,Nn)).then(a=>N(this,se,mf).call(this,a,!0)).finally(()=>N(this,se,yf).call(this));return}if(p(this,da)){const a=p(this,da);k(this,da,null),this._uiManager.enableWaiting(!0),k(this,Eo,this._uiManager.imageManager.getFromUrl(a).then(o=>N(this,se,mf).call(this,o)).finally(()=>N(this,se,yf).call(this)));return}if(p(this,Co)){const a=p(this,Co);k(this,Co,null),this._uiManager.enableWaiting(!0),k(this,Eo,this._uiManager.imageManager.getFromFile(a).then(o=>N(this,se,mf).call(this,o)).finally(()=>N(this,se,yf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=_f.supportedTypesStr;const n=this._uiManager._signal;k(this,Eo,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);N(this,se,mf).call(this,o)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>N(this,se,yf).call(this))),e.click()},KA=function(){const{div:e}=this;let{width:n,height:a}=p(this,Rn);const[o,c]=this.pageDimensions,u=.75;if(this.width)n=this.width*o,a=this.height*c;else if(n>u*o||a>u*c){const y=Math.min(u*o/n,u*c/a);n*=y,a*=y}const[d,f]=this.parentDimensions;this.setDims(n*d/o,a*f/c),this._uiManager.enableWaiting(!1);const g=k(this,er,document.createElement("canvas"));e.append(g),e.hidden=!1,N(this,se,WA).call(this,n,a),N(this,se,lL).call(this),p(this,hg)||(this.parent.addUndoableEditor(this),k(this,hg,!0)),this._reportTelemetry({action:"inserted_image"}),p(this,Nh)&&g.setAttribute("aria-label",p(this,Nh))},aL=function(e,n){var u;const[a,o]=this.parentDimensions;this.width=e/a,this.height=n/o,this.setDims(e,n),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,p(this,nr)!==null&&clearTimeout(p(this,nr)),k(this,nr,setTimeout(()=>{k(this,nr,null),N(this,se,WA).call(this,e,n)},200))},oL=function(e,n){const{width:a,height:o}=p(this,Rn);let c=a,u=o,d=p(this,Rn);for(;c>2*e||u>2*n;){const f=c,g=u;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(c,u);y.getContext("2d").drawImage(d,0,0,f,g,0,0,c,u),d=y.transferToImageBitmap()}return d},WA=function(e,n){e=Math.ceil(e),n=Math.ceil(n);const a=p(this,er);if(!a||a.width===e&&a.height===n)return;a.width=e,a.height=n;const o=p(this,Ns)?p(this,Rn):N(this,se,oL).call(this,e,n);if(this._uiManager.hasMLManager&&!this.hasAltText()){const d=new OffscreenCanvas(e,n).getContext("2d");d.drawImage(o,0,0,o.width,o.height,0,0,e,n),this._uiManager.mlGuess({service:"image-to-text",request:{data:d.getImageData(0,0,e,n).data,width:e,height:n,channels:4}}).then(f=>{const g=(f==null?void 0:f.output)||"";this.parent&&g&&!this.hasAltText()&&(this.altTextData={altText:g,decorative:!1})})}const c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(o,0,0,o.width,o.height,0,0,e,n)},Gy=function(e){if(e){if(p(this,Ns)){const o=this._uiManager.imageManager.getSvgUrl(p(this,Nn));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=p(this,Rn),n.getContext("2d").drawImage(p(this,Rn),0,0),n.toDataURL()}if(p(this,Ns)){const[n,a]=this.pageDimensions,o=Math.round(this.width*n*Fo.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*Fo.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,c);return u.getContext("2d").drawImage(p(this,Rn),0,0,p(this,Rn).width,p(this,Rn).height,0,0,o,c),u.transferToImageBitmap()}return structuredClone(p(this,Rn))},lL=function(){this._uiManager._signal&&(k(this,fa,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&N(this,se,aL).call(this,n.width,n.height)})),p(this,fa).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=p(this,fa))==null||e.disconnect(),k(this,fa,null)},{once:!0}))},Mt(_f,"_type","stamp"),Mt(_f,"_editorType",Jt.STAMP);let YA=_f;var hc,Mh,ir,dc,pa,ga,ma,ji,To,Dh,Lh,Wn,Et,ko,On,cL,ZA,JA,t_,$y;const ms=class ms{constructor({uiManager:t,pageIndex:e,div:n,accessibilityManager:a,annotationLayer:o,drawLayer:c,textLayer:u,viewport:d,l10n:f}){M(this,On);M(this,hc);M(this,Mh,!1);M(this,ir,null);M(this,dc,null);M(this,pa,null);M(this,ga,null);M(this,ma,null);M(this,ji,new Map);M(this,To,!1);M(this,Dh,!1);M(this,Lh,!1);M(this,Wn,null);M(this,Et);const g=[...p(ms,ko).values()];if(!ms._initialized){ms._initialized=!0;for(const y of g)y.initialize(f,t)}t.registerEditorTypes(g),k(this,Et,t),this.pageIndex=e,this.div=n,k(this,hc,a),k(this,ir,o),this.viewport=d,k(this,Wn,u),this.drawLayer=c,p(this,Et).addLayer(this)}get isEmpty(){return p(this,ji).size===0}get isInvisible(){return this.isEmpty&&p(this,Et).getMode()===Jt.NONE}updateToolbar(t){p(this,Et).updateToolbar(t)}updateMode(t=p(this,Et).getMode()){switch(N(this,On,$y).call(this),t){case Jt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Jt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Jt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of p(ms,ko).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=p(this,Wn))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(p(this,Et).getMode()!==Jt.INK)return;if(!t){for(const n of p(this,ji).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){p(this,Et).setEditingState(t)}addCommands(t){p(this,Et).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=p(this,ir))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of p(this,ji).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(p(this,Et).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!p(this,ir))return;const e=p(this,ir).getEditableAnnotations();for(const n of e){if(n.hide(),p(this,Et).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}}disable(){var a;k(this,Lh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of p(this,ji).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(a=this.getEditableAnnotation(o.annotationElementId))==null||a.show(),o.remove()}if(p(this,ir)){const o=p(this,ir).getEditableAnnotations();for(const c of o){const{id:u}=c.data;if(p(this,Et).isDeletedAnnotationElement(u))continue;let d=e.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=t.get(u),d&&(p(this,Et).addChangedExistingAnnotation(d),d.renderAnnotationElement(c),d.show(!1)),c.show()}}N(this,On,$y).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of p(ms,ko).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),k(this,Lh,!1)}getEditableAnnotation(t){var e;return((e=p(this,ir))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){p(this,Et).getActive()!==t&&p(this,Et).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=p(this,Wn))!=null&&t.div&&!p(this,ga)&&(k(this,ga,N(this,On,cL).bind(this)),p(this,Wn).div.addEventListener("pointerdown",p(this,ga),{signal:p(this,Et)._signal}),p(this,Wn).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=p(this,Wn))!=null&&t.div&&p(this,ga)&&(p(this,Wn).div.removeEventListener("pointerdown",p(this,ga)),k(this,ga,null),p(this,Wn).div.classList.remove("highlighting"))}enableClick(){if(p(this,pa))return;const t=p(this,Et)._signal;k(this,pa,this.pointerdown.bind(this)),k(this,dc,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",p(this,pa),{signal:t}),this.div.addEventListener("pointerup",p(this,dc),{signal:t})}disableClick(){p(this,pa)&&(this.div.removeEventListener("pointerdown",p(this,pa)),this.div.removeEventListener("pointerup",p(this,dc)),k(this,pa,null),k(this,dc,null))}attach(t){p(this,ji).set(t.id,t);const{annotationElementId:e}=t;e&&p(this,Et).isDeletedAnnotationElement(e)&&p(this,Et).removeDeletedAnnotationElement(t)}detach(t){var e;p(this,ji).delete(t.id),(e=p(this,hc))==null||e.removePointerInTextLayer(t.contentDiv),!p(this,Lh)&&t.annotationElementId&&p(this,Et).addDeletedAnnotationElement(t)}remove(t){this.detach(t),p(this,Et).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,p(this,Dh)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(p(this,Et).addDeletedAnnotationElement(t.annotationElementId),fe.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),p(this,Et).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),p(this,Et).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!p(this,ma)&&(t._focusEventsAllowed=!1,k(this,ma,setTimeout(()=>{k(this,ma,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:p(this,Et)._signal}),e.focus())},0))),t._structTreeParentId=(n=p(this,hc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return p(this,Et).getId()}get _signal(){return p(this,Et)._signal}canCreateNewEmptyEditor(){var t;return(t=p(this,On,ZA))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){p(this,Et).updateToolbar(t),p(this,Et).updateMode(t);const{offsetX:n,offsetY:a}=N(this,On,t_).call(this),o=this.getNextId(),c=N(this,On,JA).call(this,{parent:this,id:o,x:n,y:a,uiManager:p(this,Et),isCentered:!0,...e});c&&this.add(c)}deserialize(t){var e;return((e=p(ms,ko).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,p(this,Et)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),o=N(this,On,JA).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:p(this,Et),isCentered:e,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(N(this,On,t_).call(this),!0)}setSelected(t){p(this,Et).setSelected(t)}toggleSelected(t){p(this,Et).toggleSelected(t)}isSelected(t){return p(this,Et).isSelected(t)}unselect(t){p(this,Et).unselect(t)}pointerup(t){const{isMac:e}=di.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&p(this,To)){if(k(this,To,!1),!p(this,Mh)){k(this,Mh,!0);return}if(p(this,Et).getMode()===Jt.STAMP){p(this,Et).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(p(this,Et).getMode()===Jt.HIGHLIGHT&&this.enableTextSelection(),p(this,To)){k(this,To,!1);return}const{isMac:e}=di.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;k(this,To,!0);const n=p(this,Et).getActive();k(this,Mh,!n||n.isEmpty())}findNewParent(t,e,n){const a=p(this,Et).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}destroy(){var t,e;((t=p(this,Et).getActive())==null?void 0:t.parent)===this&&(p(this,Et).commitOrRemove(),p(this,Et).setActiveEditor(null)),p(this,ma)&&(clearTimeout(p(this,ma)),k(this,ma,null));for(const n of p(this,ji).values())(e=p(this,hc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,p(this,ji).clear(),p(this,Et).removeLayer(this)}render({viewport:t}){this.viewport=t,bc(this.div,t);for(const e of p(this,Et).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){p(this,Et).commitOrRemove(),N(this,On,$y).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,bc(this.div,{rotation:n}),e!==n)for(const a of p(this,ji).values())a.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return p(this,Et).viewParameters.realScale}};hc=new WeakMap,Mh=new WeakMap,ir=new WeakMap,dc=new WeakMap,pa=new WeakMap,ga=new WeakMap,ma=new WeakMap,ji=new WeakMap,To=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,Wn=new WeakMap,Et=new WeakMap,ko=new WeakMap,On=new WeakSet,cL=function(t){if(p(this,Et).unselectAll(),t.target===p(this,Wn).div){const{isMac:e}=di.platform;if(t.button!==0||t.ctrlKey&&e)return;p(this,Et).showAllEditors("highlight",!0,!0),p(this,Wn).div.classList.add("free"),yv.startHighlighting(this,p(this,Et).direction==="ltr",t),p(this,Wn).div.addEventListener("pointerup",()=>{p(this,Wn).div.classList.remove("free")},{once:!0,signal:p(this,Et)._signal}),t.preventDefault()}},ZA=function(){return p(ms,ko).get(p(this,Et).getMode())},JA=function(t){const e=p(this,On,ZA);return e?new e.prototype.constructor(t):null},t_=function(){const{x:t,y:e,width:n,height:a}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+a),f=(o+u)/2-t,g=(c+d)/2-e,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}},$y=function(){k(this,Dh,!0);for(const t of p(this,ji).values())t.isEmpty()&&t.remove();k(this,Dh,!1)},Mt(ms,"_initialized",!1),M(ms,ko,new Map([NA,BA,YA,yv].map(t=>[t._editorType,t])));let QA=ms;var sr,dg,sn,Ro,fg,n_,Sc,i_,uL;const Sn=class Sn{constructor({pageIndex:t}){M(this,Sc);M(this,sr,null);M(this,dg,0);M(this,sn,new Map);M(this,Ro,new Map);this.pageIndex=t}setParent(t){if(!p(this,sr)){k(this,sr,t);return}if(p(this,sr)!==t){if(p(this,sn).size>0)for(const e of p(this,sn).values())e.remove(),t.append(e);k(this,sr,t)}}static get _svgFactory(){return ee(this,"_svgFactory",new X_)}highlight(t,e,n,a=!1){const o=_i(this,dg)._++,c=N(this,Sc,i_).call(this,t.box);c.classList.add("highlight"),t.free&&c.classList.add("free");const u=Sn._svgFactory.createElement("defs");c.append(u);const d=Sn._svgFactory.createElement("path");u.append(d);const f=`path_p${this.pageIndex}_${o}`;d.setAttribute("id",f),d.setAttribute("d",t.toSVGPath()),a&&p(this,Ro).set(o,d);const g=N(this,Sc,uL).call(this,u,f),y=Sn._svgFactory.createElement("use");return c.append(y),c.setAttribute("fill",e),c.setAttribute("fill-opacity",n),y.setAttribute("href",`#${f}`),p(this,sn).set(o,c),{id:o,clipPathId:`url(#${g})`}}highlightOutline(t){const e=_i(this,dg)._++,n=N(this,Sc,i_).call(this,t.box);n.classList.add("highlightOutline");const a=Sn._svgFactory.createElement("defs");n.append(a);const o=Sn._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${e}`;o.setAttribute("id",c),o.setAttribute("d",t.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t.free){n.classList.add("free");const g=Sn._svgFactory.createElement("mask");a.append(g),u=`mask_p${this.pageIndex}_${e}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const y=Sn._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=Sn._svgFactory.createElement("use");g.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const d=Sn._svgFactory.createElement("use");n.append(d),d.setAttribute("href",`#${c}`),u&&d.setAttribute("mask",`url(#${u})`);const f=d.cloneNode();return n.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),p(this,sn).set(e,n),e}finalizeLine(t,e){const n=p(this,Ro).get(t);p(this,Ro).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){p(this,sn).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),p(this,Ro).delete(t)}updatePath(t,e){p(this,Ro).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;N(n=Sn,fg,n_).call(n,p(this,sn).get(t),e)}show(t,e){p(this,sn).get(t).classList.toggle("hidden",!e)}rotate(t,e){p(this,sn).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){p(this,sn).get(t).setAttribute("fill",e)}changeOpacity(t,e){p(this,sn).get(t).setAttribute("fill-opacity",e)}addClass(t,e){p(this,sn).get(t).classList.add(e)}removeClass(t,e){p(this,sn).get(t).classList.remove(e)}remove(t){p(this,sr)!==null&&(p(this,sn).get(t).remove(),p(this,sn).delete(t))}destroy(){k(this,sr,null);for(const t of p(this,sn).values())t.remove();p(this,sn).clear()}};sr=new WeakMap,dg=new WeakMap,sn=new WeakMap,Ro=new WeakMap,fg=new WeakSet,n_=function(t,{x:e=0,y:n=0,width:a=1,height:o=1}={}){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*o}%`},Sc=new WeakSet,i_=function(t){var n;const e=Sn._svgFactory.create(1,1,!0);return p(this,sr).append(e),e.setAttribute("aria-hidden",!0),N(n=Sn,fg,n_).call(n,e,t),e},uL=function(t,e){const n=Sn._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Sn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a},M(Sn,fg);let e_=Sn;var TV=Rt.AbortException,kV=Rt.AnnotationEditorLayer,RV=Rt.AnnotationEditorParamsType,NV=Rt.AnnotationEditorType,MV=Rt.AnnotationEditorUIManager,hL=Rt.AnnotationLayer,dL=Rt.AnnotationMode,DV=Rt.CMapCompressionType,LV=Rt.ColorPicker,OV=Rt.DOMSVGFactory,jV=Rt.DrawLayer,PV=Rt.FeatureTest,eS=Rt.GlobalWorkerOptions,FV=Rt.ImageKind,IV=Rt.InvalidPDFException,zV=Rt.MissingPDFException,UV=Rt.OPS,BV=Rt.Outliner,HV=Rt.PDFDataRangeTransport,VV=Rt.PDFDateString,qV=Rt.PDFWorker,GV=Rt.PasswordResponses,$V=Rt.PermissionFlag,XV=Rt.PixelsPerInch,YV=Rt.RenderingCancelledException,fL=Rt.TextLayer,KV=Rt.UnexpectedResponseException,WV=Rt.Util,QV=Rt.VerbosityLevel,ZV=Rt.XfaLayer,JV=Rt.build,tq=Rt.createValidAbsoluteUrl,eq=Rt.fetchData,pL=Rt.getDocument,nq=Rt.getFilenameFromUrl,iq=Rt.getPdfFilenameFromUrl,sq=Rt.getXfaPageViewport,rq=Rt.isDataScheme,aq=Rt.isPdfFile,oq=Rt.noContextMenu,lq=Rt.normalizeUnicode,cq=Rt.renderTextLayer,uq=Rt.setLayerDimensions,hq=Rt.shadow,dq=Rt.updateTextLayer,fq=Rt.version;const pq=Object.freeze(Object.defineProperty({__proto__:null,AbortException:TV,AnnotationEditorLayer:kV,AnnotationEditorParamsType:RV,AnnotationEditorType:NV,AnnotationEditorUIManager:MV,AnnotationLayer:hL,AnnotationMode:dL,CMapCompressionType:DV,ColorPicker:LV,DOMSVGFactory:OV,DrawLayer:jV,FeatureTest:PV,GlobalWorkerOptions:eS,ImageKind:FV,InvalidPDFException:IV,MissingPDFException:zV,OPS:UV,Outliner:BV,PDFDataRangeTransport:HV,PDFDateString:VV,PDFWorker:qV,PasswordResponses:GV,PermissionFlag:$V,PixelsPerInch:XV,RenderingCancelledException:YV,TextLayer:fL,UnexpectedResponseException:KV,Util:WV,VerbosityLevel:QV,XfaLayer:ZV,build:JV,createValidAbsoluteUrl:tq,fetchData:eq,getDocument:pL,getFilenameFromUrl:nq,getPdfFilenameFromUrl:iq,getXfaPageViewport:sq,isDataScheme:rq,isPdfFile:aq,noContextMenu:oq,normalizeUnicode:lq,renderTextLayer:cq,setLayerDimensions:uq,shadow:hq,updateTextLayer:dq,version:fq},Symbol.toStringTag,{value:"Module"}));var dn=function(s,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return s.concat(o||Array.prototype.slice.call(t))},gq=["onCopy","onCut","onPaste"],mq=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],yq=["onFocus","onBlur"],vq=["onInput","onInvalid","onReset","onSubmit"],bq=["onLoad","onError"],xq=["onKeyDown","onKeyPress","onKeyUp"],wq=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Aq=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],_q=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Sq=["onSelect"],Eq=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Cq=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Tq=["onScroll"],kq=["onWheel"],Rq=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Nq=["onTransitionEnd"],Mq=["onToggle"],Dq=["onChange"],Lq=dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn([],gq,!0),mq,!0),yq,!0),vq,!0),bq,!0),xq,!0),wq,!0),Aq,!0),_q,!0),Sq,!0),Eq,!0),Cq,!0),Tq,!0),kq,!0),Rq,!0),Nq,!0),Dq,!0),Mq,!0);function gL(s,t){var e={};return Lq.forEach(function(n){var a=s[n];a&&(t?e[n]=(function(o){return a(o,t(n))}):e[n]=a)}),e}function kg(s){var t=!1,e=new Promise(function(n,a){s.then(function(o){return!t&&n(o)}).catch(function(o){return!t&&a(o)})});return{promise:e,cancel:function(){t=!0}}}var Oq="Invariant failed";function Ae(s,t){if(!s)throw new Error(Oq)}var mw,Yk;function jq(){if(Yk)return mw;Yk=1;var s=function(){};return mw=s,mw}var Pq=jq();const Un=a_(Pq);var Kk=Object.prototype.hasOwnProperty;function Wk(s,t,e){for(e of s.keys())if(Fu(e,t))return e}function Fu(s,t){var e,n,a;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&Fu(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(a=n,a&&typeof a=="object"&&(a=Wk(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(a=n[0],a&&typeof a=="object"&&(a=Wk(t,a),!a)||!Fu(n[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(Kk.call(s,e)&&++n&&!Kk.call(t,e)||!(e in t)||!Fu(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}const mL=E.createContext(null);function Iu({children:s,type:t}){return x.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const Fq="noopener noreferrer nofollow";class Iq{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ae(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Ae(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{Ae(this.pdfDocument),Ae(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Ae(Array.isArray(e));const n=e[0];new Promise(a=>{Ae(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{a(o)}).catch(()=>{Ae(!1)}):typeof n=="number"?a(n):Ae(!1)}).then(a=>{const o=a+1;Ae(this.pdfViewer),Ae(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;Ae(this.pdfViewer),Ae(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||Fq,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Qk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},fb=typeof window<"u",yL=fb&&window.location.protocol==="file:";function zq(s){return typeof s<"u"}function ul(s){return zq(s)&&s!==null}function Uq(s){return typeof s=="string"}function Bq(s){return s instanceof ArrayBuffer}function Hq(s){return Ae(fb),s instanceof Blob}function s_(s){return Uq(s)&&/^data:/.test(s)}function Zk(s){Ae(s_(s));const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function Vq(){return fb&&window.devicePixelRatio||1}const vL="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Jk(){Un(!yL,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${vL}`)}function qq(){Un(!yL,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${vL}`)}function Ac(s){s!=null&&s.cancel&&s.cancel()}function r_(s,t){return Object.defineProperty(s,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.view[3]},configurable:!0}),s}function Gq(s){return s.name==="RenderingCancelledException"}function $q(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}function Xq(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function Hh(){return E.useReducer(Xq,{value:void 0,error:void 0})}var Yq=function(s,t,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return new(e||(e=Promise))(function(o,c){function u(g){try{f(n.next(g))}catch(y){c(y)}}function d(g){try{f(n.throw(g))}catch(y){c(y)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((n=n.apply(s,t||[])).next())})},tR=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(e[n[a]]=s[n[a]]);return e};const{PDFDataRangeTransport:Kq}=pq,Wq=(s,t)=>{switch(t){case Qk.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case Qk.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function eR(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const Qq=E.forwardRef(function(t,e){var{children:n,className:a,error:o="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:u,file:d,inputRef:f,imageResourcesPath:g,loading:y="Loading PDF",noData:b="No PDF file specified.",onItemClick:w,onLoadError:A,onLoadProgress:S,onLoadSuccess:C,onPassword:T=Wq,onSourceError:D,onSourceSuccess:L,options:P,renderMode:z,rotate:U}=t,O=tR(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[H,Z]=Hh(),{value:$,error:W}=H,[it,ct]=Hh(),{value:lt,error:nt}=it,I=E.useRef(new Iq),q=E.useRef([]),X=E.useRef(void 0),_t=E.useRef(void 0);d&&d!==X.current&&eR(d)&&(Un(!Fu(d,X.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),X.current=d),P&&P!==_t.current&&(Un(!Fu(P,_t.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),_t.current=P);const Ct=E.useRef({scrollPageIntoView:re=>{const{dest:le,pageNumber:Le,pageIndex:Ne=Le-1}=re;if(w){w({dest:le,pageIndex:Ne,pageNumber:Le});return}const Vn=q.current[Ne];if(Vn){Vn.scrollIntoView();return}Un(!1,`An internal link leading to page ${Le} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});E.useImperativeHandle(e,()=>({linkService:I,pages:q,viewer:Ct}),[]);function j(){L&&L()}function G(){W&&(Un(!1,W.toString()),D&&D(W))}function tt(){Z({type:"RESET"})}E.useEffect(tt,[d,Z]);const ot=E.useCallback(()=>Yq(this,void 0,void 0,function*(){if(!d)return null;if(typeof d=="string")return s_(d)?{data:Zk(d)}:(Jk(),{url:d});if(d instanceof Kq)return{range:d};if(Bq(d))return{data:d};if(fb&&Hq(d))return{data:yield $q(d)};if(Ae(typeof d=="object"),Ae(eR(d)),"url"in d&&typeof d.url=="string"){if(s_(d.url)){const{url:re}=d,le=tR(d,["url"]),Le=Zk(re);return Object.assign({data:Le},le)}Jk()}return d}),[d]);E.useEffect(()=>{const re=kg(ot());return re.promise.then(le=>{Z({type:"RESOLVE",value:le})}).catch(le=>{Z({type:"REJECT",error:le})}),()=>{Ac(re)}},[ot,Z]),E.useEffect(()=>{if(!(typeof $>"u")){if($===!1){G();return}j()}},[$]);function pt(){lt&&(C&&C(lt),q.current=new Array(lt.numPages),I.current.setDocument(lt))}function wt(){nt&&(Un(!1,nt.toString()),A&&A(nt))}E.useEffect(function(){ct({type:"RESET"})},[ct,$]),E.useEffect(function(){if(!$)return;const le=P?Object.assign(Object.assign({},$),P):$,Le=pL(le);S&&(Le.onProgress=S),T&&(Le.onPassword=T);const Ne=Le,Vn=Ne.promise.then(hs=>{ct({type:"RESOLVE",value:hs})}).catch(hs=>{Ne.destroyed||ct({type:"REJECT",error:hs})});return()=>{Vn.finally(()=>Ne.destroy())}},[P,ct,$]),E.useEffect(()=>{if(!(typeof lt>"u")){if(lt===!1){wt();return}pt()}},[lt]),E.useEffect(function(){I.current.setViewer(Ct.current),I.current.setExternalLinkRel(c),I.current.setExternalLinkTarget(u)},[c,u]);const ht=E.useCallback((re,le)=>{q.current[re]=le},[]),Gt=E.useCallback(re=>{delete q.current[re]},[]),Ft=E.useMemo(()=>({imageResourcesPath:g,linkService:I.current,onItemClick:w,pdf:lt,registerPage:ht,renderMode:z,rotate:U,unregisterPage:Gt}),[g,w,lt,ht,z,U,Gt]),$t=E.useMemo(()=>gL(O,()=>lt),[O,lt]);function ce(){return x.jsx(mL.Provider,{value:Ft,children:n})}function cn(){return d?lt==null?x.jsx(Iu,{type:"loading",children:typeof y=="function"?y():y}):lt===!1?x.jsx(Iu,{type:"error",children:typeof o=="function"?o():o}):ce():x.jsx(Iu,{type:"no-data",children:typeof b=="function"?b():b})}return x.jsx("div",Object.assign({className:$h("react-pdf__Document",a),ref:f,style:{"--scale-factor":"1"}},$t,{children:cn()}))});function bL(){return E.useContext(mL)}function xL(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(o){e.forEach(function(c){typeof c=="function"?c(o):c&&(c.current=o)})}}const wL=E.createContext(null),AL={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Zq=/^H(\d+)$/;function Jq(s){return s in AL}function pb(s){return"children"in s}function _L(s){return pb(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function tG(s){const t={};if(pb(s)){const{role:e}=s,n=e.match(Zq);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(Jq(e)){const a=AL[e];a&&(t.role=a)}}return t}function SL(s){const t={};if(pb(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),_L(s)){const[e]=s.children;if(e){const n=SL(e);return Object.assign(Object.assign({},t),n)}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function eG(s){return s?Object.assign(Object.assign({},tG(s)),SL(s)):null}function EL({className:s,node:t}){const e=E.useMemo(()=>eG(t),[t]),n=E.useMemo(()=>!pb(t)||_L(t)?null:t.children.map((a,o)=>x.jsx(EL,{node:a},o)),[t]);return x.jsx("span",Object.assign({className:s},e,{children:n}))}function gb(){return E.useContext(wL)}function nG(){const s=gb();Ae(s);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,a]=Hh(),{value:o,error:c}=n,{customTextRenderer:u,page:d}=s;function f(){o&&e&&e(o)}function g(){c&&(Un(!1,c.toString()),t&&t(c))}return E.useEffect(function(){a({type:"RESET"})},[a,d]),E.useEffect(function(){if(u||!d)return;const b=kg(d.getStructTree()),w=b;return b.promise.then(A=>{a({type:"RESOLVE",value:A})}).catch(A=>{a({type:"REJECT",error:A})}),()=>Ac(w)},[u,d,a]),E.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}f()}},[o]),o?x.jsx(EL,{className:"react-pdf__Page__structTree structTree",node:o}):null}const nR=dL;function iG(s){const t=gb();Ae(t);const e=Object.assign(Object.assign({},t),s),{_className:n,canvasBackground:a,devicePixelRatio:o=Vq(),onRenderError:c,onRenderSuccess:u,page:d,renderForms:f,renderTextLayer:g,rotate:y,scale:b}=e,{canvasRef:w}=s;Ae(d);const A=E.useRef(null);function S(){d&&u&&u(r_(d,b))}function C(P){Gq(P)||(Un(!1,P.toString()),c&&c(P))}const T=E.useMemo(()=>d.getViewport({scale:b*o,rotation:y}),[o,d,y,b]),D=E.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);E.useEffect(function(){if(!d)return;d.cleanup();const{current:z}=A;if(!z)return;z.width=T.width,z.height=T.height,z.style.width=`${Math.floor(D.width)}px`,z.style.height=`${Math.floor(D.height)}px`,z.style.visibility="hidden";const U={annotationMode:f?nR.ENABLE_FORMS:nR.ENABLE,canvasContext:z.getContext("2d",{alpha:!1}),viewport:T};a&&(U.background=a);const O=d.render(U),H=O;return O.promise.then(()=>{z.style.visibility="",S()}).catch(C),()=>Ac(H)},[a,d,f,T,D]);const L=E.useCallback(()=>{const{current:P}=A;P&&(P.width=0,P.height=0)},[]);return E.useEffect(()=>L,[L]),x.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:xL(w,A),style:{display:"block",userSelect:"none"},children:g?x.jsx(nG,{}):null})}function sG(s){return"str"in s}function rG(){const s=gb();Ae(s);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:c,pageIndex:u,pageNumber:d,rotate:f,scale:g}=s;Ae(c);const[y,b]=Hh(),{value:w,error:A}=y,S=E.useRef(null),C=E.useRef(void 0);Un(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function T(){w&&n&&n(w)}function D(){A&&(Un(!1,A.toString()),e&&e(A))}E.useEffect(function(){b({type:"RESET"})},[c,b]),E.useEffect(function(){if(!c)return;const Z=kg(c.getTextContent()),$=Z;return Z.promise.then(W=>{b({type:"RESOLVE",value:W})}).catch(W=>{b({type:"REJECT",error:W})}),()=>Ac($)},[c,b]),E.useEffect(()=>{if(w!==void 0){if(w===!1){D();return}T()}},[w]);const L=E.useCallback(()=>{o&&o()},[o]),P=E.useCallback(H=>{Un(!1,H.toString()),a&&a(H)},[a]);function z(){const H=C.current;H&&H.classList.add("active")}function U(){const H=C.current;H&&H.classList.remove("active")}const O=E.useMemo(()=>c.getViewport({scale:g,rotation:f}),[c,f,g]);return E.useLayoutEffect(function(){if(!c||!w)return;const{current:Z}=S;if(!Z)return;Z.innerHTML="";const $=c.streamTextContent({includeMarkedContent:!0}),W={container:Z,textContentSource:$,viewport:O},it=new fL(W),ct=it;return it.render().then(()=>{const lt=document.createElement("div");lt.className="endOfContent",Z.append(lt),C.current=lt;const nt=Z.querySelectorAll('[role="presentation"]');if(t){let I=0;w.items.forEach((q,X)=>{if(!sG(q))return;const _t=nt[I];if(!_t)return;const Ct=t(Object.assign({pageIndex:u,pageNumber:d,itemIndex:X},q));_t.innerHTML=Ct,I+=q.str&&q.hasEOL?2:1})}L()}).catch(P),()=>Ac(ct)},[t,P,L,c,u,d,w,O]),x.jsx("div",{className:$h("react-pdf__Page__textContent","textLayer"),onMouseUp:U,onMouseDown:z,ref:S})}function aG(){const s=bL(),t=gb();Ae(t);const e=Object.assign(Object.assign({},s),t),{imageResourcesPath:n,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:f,pdf:g,renderForms:y,rotate:b,scale:w=1}=e;Ae(g),Ae(f),Ae(a);const[A,S]=Hh(),{value:C,error:T}=A,D=E.useRef(null);Un(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function L(){C&&c&&c(C)}function P(){T&&(Un(!1,T.toString()),o&&o(T))}E.useEffect(function(){S({type:"RESET"})},[S,f]),E.useEffect(function(){if(!f)return;const Z=kg(f.getAnnotations()),$=Z;return Z.promise.then(W=>{S({type:"RESOLVE",value:W})}).catch(W=>{S({type:"REJECT",error:W})}),()=>{Ac($)}},[S,f]),E.useEffect(()=>{if(C!==void 0){if(C===!1){P();return}L()}},[C]);function z(){d&&d()}function U(H){Un(!1,`${H}`),u&&u(H)}const O=E.useMemo(()=>f.getViewport({scale:w,rotation:b}),[f,b,w]);return E.useEffect(function(){if(!g||!f||!a||!C)return;const{current:Z}=D;if(!Z)return;const $=O.clone({dontFlip:!0}),W={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:Z,l10n:null,page:f,viewport:$},it={annotations:C,annotationStorage:g.annotationStorage,div:Z,imageResourcesPath:n,linkService:a,page:f,renderForms:y,viewport:$};Z.innerHTML="";try{new hL(W).render(it),z()}catch(ct){U(ct)}return()=>{}},[C,n,a,f,g,y,O]),x.jsx("div",{className:$h("react-pdf__Page__annotations","annotationLayer"),ref:D})}var oG=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(e[n[a]]=s[n[a]]);return e};const iR=1;function lG(s){const t=bL(),e=Object.assign(Object.assign({},t),s),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:c,children:u,className:d,customRenderer:f,customTextRenderer:g,devicePixelRatio:y,error:b="Failed to load the page.",height:w,inputRef:A,loading:S="Loading page",noData:C="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:D,onGetStructTreeError:L,onGetStructTreeSuccess:P,onGetTextError:z,onGetTextSuccess:U,onLoadError:O,onLoadSuccess:H,onRenderAnnotationLayerError:Z,onRenderAnnotationLayerSuccess:$,onRenderError:W,onRenderSuccess:it,onRenderTextLayerError:ct,onRenderTextLayerSuccess:lt,pageIndex:nt,pageNumber:I,pdf:q,registerPage:X,renderAnnotationLayer:_t=!0,renderForms:Ct=!1,renderMode:j="canvas",renderTextLayer:G=!0,rotate:tt,scale:ot=iR,unregisterPage:pt,width:wt}=e,ht=oG(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Gt,Ft]=Hh(),{value:$t,error:ce}=Gt,cn=E.useRef(null);Ae(q);const re=ul(I)?I-1:nt??null,le=I??(ul(nt)?nt+1:null),Le=tt??($t?$t.rotate:null),Ne=E.useMemo(()=>{if(!$t)return null;let qn=1;const ds=ot??iR;if(wt||w){const Ra=$t.getViewport({scale:1,rotation:Le});wt?qn=wt/Ra.width:w&&(qn=w/Ra.height)}return ds*qn},[w,$t,Le,ot,wt]);E.useEffect(function(){return()=>{ul(re)&&a&&pt&&pt(re)}},[a,q,re,pt]);function Vn(){if(H){if(!$t||!Ne)return;H(r_($t,Ne))}if(a&&X){if(!ul(re)||!cn.current)return;X(re,cn.current)}}function hs(){ce&&(Un(!1,ce.toString()),O&&O(ce))}E.useEffect(function(){Ft({type:"RESET"})},[Ft,q,re]),E.useEffect(function(){if(!q||!le)return;const ds=kg(q.getPage(le)),Ra=ds;return ds.promise.then(Na=>{Ft({type:"RESOLVE",value:Na})}).catch(Na=>{Ft({type:"REJECT",error:Na})}),()=>Ac(Ra)},[Ft,q,le]),E.useEffect(()=>{if($t!==void 0){if($t===!1){hs();return}Vn()}},[$t,Ne]);const js=E.useMemo(()=>$t&&ul(re)&&le&&ul(Le)&&ul(Ne)?{_className:n,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:T,onGetAnnotationsSuccess:D,onGetStructTreeError:L,onGetStructTreeSuccess:P,onGetTextError:z,onGetTextSuccess:U,onRenderAnnotationLayerError:Z,onRenderAnnotationLayerSuccess:$,onRenderError:W,onRenderSuccess:it,onRenderTextLayerError:ct,onRenderTextLayerSuccess:lt,page:$t,pageIndex:re,pageNumber:le,renderForms:Ct,renderTextLayer:G,rotate:Le,scale:Ne}:null,[n,o,g,y,T,D,L,P,z,U,Z,$,W,it,ct,lt,$t,re,le,Ct,G,Le,Ne]),vr=E.useMemo(()=>gL(ht,()=>$t&&(Ne?r_($t,Ne):void 0)),[ht,$t,Ne]),gi=`${re}@${Ne}/${Le}`;function td(){switch(j){case"custom":return Ae(f),x.jsx(f,{},`${gi}_custom`);case"none":return null;case"canvas":default:return x.jsx(iG,{canvasRef:c},`${gi}_canvas`)}}function Vo(){return G?x.jsx(rG,{},`${gi}_text`):null}function vn(){return _t?x.jsx(aG,{},`${gi}_annotations`):null}function ed(){return x.jsxs(wL.Provider,{value:js,children:[td(),Vo(),vn(),u]})}function Dc(){return le?q===null||$t===void 0||$t===null?x.jsx(Iu,{type:"loading",children:typeof S=="function"?S():S}):q===!1||$t===!1?x.jsx(Iu,{type:"error",children:typeof b=="function"?b():b}):ed():x.jsx(Iu,{type:"no-data",children:typeof C=="function"?C():C})}return x.jsx("div",Object.assign({className:$h(n,d),"data-page-number":le,ref:xL(A,cn),style:{"--scale-factor":`${Ne}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},vr,{children:Dc()}))}qq();eS.workerSrc="pdf.worker.mjs";eS.workerSrc=new URL("/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();function cG({pdfUrl:s}){const[t,e]=E.useState(0),[n,a]=E.useState(1),[o,c]=E.useState(1),[u,d]=E.useState(null),f=E.useRef(null);function g({numPages:T}){console.log("[PDFViewer] PDF loaded successfully, pages:",T),e(T),a(1),d(null)}function y(T){console.error("[PDFViewer] Failed to load PDF:",T),d(T.message||"Failed to load PDF")}const b=()=>{const T=Math.max(n-1,1);a(T),A(T)},w=()=>{const T=Math.min(n+1,t);a(T),A(T)},A=T=>{const D=document.getElementById(`pdf-page-${T}`);D&&f.current&&D.scrollIntoView({behavior:"smooth",block:"start"})},S=()=>{c(T=>Math.min(T+.2,3))},C=()=>{c(T=>Math.max(T-.2,.5))};return x.jsxs("div",{className:"w-full h-full flex flex-col bg-gray-50 dark:bg-gray-900 relative",children:[x.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shrink-0 sticky top-0 z-50 shadow-sm",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:b,disabled:n<=1,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Trang trc ()",children:x.jsx(M3,{className:"h-5 w-5"})}),x.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 min-w-[60px] text-center font-medium",children:[n," / ",t||""]}),x.jsx("button",{onClick:w,disabled:n>=t,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Trang sau ()",children:x.jsx(C3,{className:"h-5 w-5"})})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:C,disabled:o<=.5,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Thu nh ()",children:x.jsx(D4,{className:"h-5 w-5"})}),x.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 min-w-[50px] text-center font-medium",children:[Math.round(o*100),"%"]}),x.jsx("button",{onClick:S,disabled:o>=3,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Phng to (+)",children:x.jsx(N4,{className:"h-5 w-5"})})]})]}),x.jsx("div",{ref:f,className:"flex-1 overflow-y-auto overflow-x-hidden flex flex-col items-center py-4 px-2 bg-gray-100 dark:bg-gray-900",style:{scrollBehavior:"smooth"},children:u?x.jsxs("div",{className:"text-center p-8",children:[x.jsx("div",{className:"text-destructive text-lg mb-2",children:"Failed to load PDF"}),x.jsx("div",{className:"text-sm text-muted-foreground",children:u}),x.jsxs("div",{className:"text-xs text-muted-foreground mt-4",children:["URL: ",s.substring(0,50),"..."]})]}):x.jsx(Qq,{file:s,onLoadSuccess:g,onLoadError:y,loading:x.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-2"}),x.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading PDF..."})]}),error:x.jsx("div",{className:"text-center p-8 text-destructive",children:"Error rendering PDF"}),children:Array.from(new Array(t),(T,D)=>x.jsx("div",{id:`pdf-page-${D+1}`,className:"mb-4",children:x.jsx(lG,{pageNumber:D+1,scale:o,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-lg"})},`page_${D+1}`))})})]})}const uG="/api";function hG({projectId:s,targetPath:t="/",onClose:e,onSuccess:n,onUploadComplete:a}){const[o,c]=E.useState([]),[u,d]=E.useState(!1),[f,g]=E.useState(!1),y=E.useRef(null),b=E.useRef(null),w=E.useCallback(O=>{O.preventDefault(),O.stopPropagation(),d(!0)},[]),A=E.useCallback(O=>{O.preventDefault(),O.stopPropagation(),O.currentTarget===O.target&&d(!1)},[]),S=E.useCallback(O=>{O.preventDefault(),O.stopPropagation()},[]),C=E.useCallback(async O=>{O.preventDefault(),O.stopPropagation(),d(!1);const H=Array.from(O.dataTransfer.files),Z=Array.from(O.dataTransfer.items),$=[];if(Z.length>0&&Z[0].webkitGetAsEntry!==void 0){for(let it=0;it<Z.length;it++){const ct=Z[it];if(ct.kind==="file"||ct.kind===""){const lt=ct.webkitGetAsEntry();if(lt)try{const nt=await T(lt);$.push(...nt)}catch(nt){console.error("[Upload] Error processing entry:",lt==null?void 0:lt.name,nt)}else{const nt=ct.getAsFile();nt&&$.push(nt)}}}$.length<H.length&&($.length=0,$.push(...H))}else $.push(...H);L($)},[]),T=async(O,H="")=>new Promise((Z,$)=>{if(O.isFile)O.file(W=>{const it=H+W.name,ct=new File([W],it,{type:W.type});ct.relativePath=it,Z([ct])},$);else if(O.isDirectory){const W=O.createReader(),it=[],ct=()=>{W.readEntries(async lt=>{if(lt.length===0){const nt=[];for(const I of it){const q=await T(I,H+O.name+"/");nt.push(...q)}Z(nt)}else it.push(...lt),ct()},$)};ct()}else Z([])}),D=O=>{const H=O.target.files;if(H){const $=Array.from(H).map(W=>(W.webkitRelativePath&&(W.relativePath=W.webkitRelativePath),W));L($)}},L=O=>{const H=O.map(Z=>({file:Z,progress:0,status:"pending"}));c(Z=>[...Z,...H])},P=O=>{c(H=>H.filter((Z,$)=>$!==O))},z=async()=>{g(!0);const O=[],H=localStorage.getItem("heytex_token");for(let $=0;$<o.length;$++){const W=o[$];try{c(I=>{const q=[...I];return q[$]={...q[$],status:"uploading",progress:0},q});const it=new FormData;it.append("files",W.file),it.append("projectId",s);const ct=W.file.relativePath||W.file.name;it.append("relativePath",ct),it.append("targetPath",t);const lt=await fetch(`${uG}/upload/files`,{method:"POST",headers:{...H?{Authorization:`Bearer ${H}`}:{}},body:it});if(!lt.ok){const I=await lt.json().catch(()=>({error:"Upload failed"}));throw new Error(I.error||"Upload failed")}const nt=await lt.json();nt.files&&nt.files.length>0&&O.push(...nt.files),c(I=>{const q=[...I];return q[$]={...q[$],status:"success",progress:100},q})}catch(it){c(ct=>{const lt=[...ct];return lt[$]={...lt[$],status:"error",error:it instanceof Error?it.message:"Upload failed"},lt})}}g(!1),O.length>0&&(n==null||n(),a==null||a(O)),o.every(($,W)=>{const it=o[W];return(it==null?void 0:it.status)==="success"})&&setTimeout(e,1e3)},U=O=>{if(O===0)return"0 Bytes";const H=1024,Z=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(O)/Math.log(H));return Math.round(O/Math.pow(H,$)*100)/100+" "+Z[$]};return x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-[90%] max-w-2xl max-h-[80vh] flex flex-col shadow-xl",onClick:O=>O.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t==="/"?"Upload Files":`Upload to ${t}`}),x.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:x.jsx(Oh,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})})]}),x.jsxs("div",{className:"flex-1 p-5 overflow-y-auto",children:[x.jsxs("div",{className:`
                            border-2 border-dashed rounded-lg p-10 text-center cursor-pointer
                            transition-all duration-200
                            ${u?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900/50 hover:border-blue-400 hover:bg-blue-50/50"}
                        `,onDragEnter:w,onDragLeave:A,onDragOver:S,onDrop:C,onClick:()=>{var O;return(O=y.current)==null?void 0:O.click()},children:[x.jsx(_4,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),x.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:u?"Drop files or folders here":"Drag & drop files or folders here"}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Supports multiple files, folders, and ZIP archives"}),x.jsxs("div",{className:"flex gap-2 justify-center",onClick:O=>O.stopPropagation(),children:[x.jsx("button",{onClick:()=>{var O;return(O=y.current)==null?void 0:O.click()},className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Select Files"}),x.jsx("button",{onClick:()=>{var O;return(O=b.current)==null?void 0:O.click()},className:"px-4 py-2 text-sm bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors",children:"Select Folder"})]}),x.jsx("input",{ref:y,type:"file",multiple:!0,onChange:D,className:"hidden"}),x.jsx("input",{ref:b,type:"file",webkitdirectory:"",directory:"",multiple:!0,onChange:D,className:"hidden"})]}),o.length>0&&x.jsxs("div",{className:"mt-6",children:[x.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Selected Files (",o.length,")"]}),x.jsx("div",{className:"space-y-2",children:o.map((O,H)=>x.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[x.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[x.jsx(Mo,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:O.file.relativePath||O.file.name}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:U(O.file.size)})]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[O.status==="uploading"&&x.jsx("div",{className:"w-24 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${O.progress}%`}})}),O.status==="success"&&x.jsx(j3,{className:"h-5 w-5 text-green-500"}),O.status==="error"&&x.jsx("div",{title:O.error,children:x.jsx(L3,{className:"h-5 w-5 text-red-500"})}),O.status==="pending"&&x.jsx("button",{onClick:()=>P(H),disabled:f,className:"px-3 py-1 text-xs font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded disabled:opacity-50",children:"Remove"})]})]},H))})]})]}),x.jsxs("div",{className:"flex items-center justify-end gap-3 p-5 border-t border-gray-200 dark:border-gray-700",children:[x.jsx("button",{onClick:e,disabled:f,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg disabled:opacity-50 transition-colors",children:"Cancel"}),x.jsx("button",{onClick:()=>{o.every(H=>H.status==="success"||H.status==="error")&&!f?e():z()},disabled:o.length===0||f,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.every(H=>H.status==="success"||H.status==="error")&&!f?"Close":f?"Uploading...":`Upload ${o.length} file${o.length!==1?"s":""}`})]})]})})}const dG="/";function fG(){const{projectId:s}=TP(),t=Ec(),{user:e}=Cc(),{currentProject:n,setCurrentProject:a,currentFile:o,setCurrentFile:c,files:u,setFiles:d,openFiles:f,addOpenFile:g,removeOpenFile:y,isSidebarOpen:b,toggleSidebar:w,isPreviewOpen:A,togglePreview:S,theme:C,toggleTheme:T,compilationStatus:D,compilationError:L,setCompilationStatus:P,pdfData:z,setPdfData:U,updateFileContent:O}=CR(),[H,Z]=E.useState(!0),[$,W]=E.useState(!1),[it,ct]=E.useState(new Set(["/"])),[lt,nt]=E.useState([]),[I,q]=E.useState(!1),[X,_t]=E.useState(!1),[Ct,j]=E.useState(null),[G,tt]=E.useState(null),[ot,pt]=E.useState(null),[wt,ht]=E.useState("pdf"),[Gt,Ft]=E.useState(""),[$t,ce]=E.useState(""),cn=E.useRef(null),[re,le]=E.useState(256),[Le,Ne]=E.useState(50),[Vn,hs]=E.useState(null),js=E.useRef(null),vr=E.useRef(null),gi=E.useRef(null),td=E.useRef(null),Vo=E.useRef(null);E.useEffect(()=>{if(!s)return;(async()=>{var ut;try{const{project:gt}=await Mn.getProject(s);a(gt),d(gt.files||[]);const jt=(ut=gt.files)==null?void 0:ut.find(kt=>kt.path===`/${gt.mainFile}`);jt&&g(jt)}catch(gt){console.error("Failed to load project:",gt),t("/dashboard")}finally{Z(!1)}})()},[s]),E.useEffect(()=>{D==="compiling"&&cn.current&&cn.current.scrollIntoView({behavior:"smooth"})},[$t,D]),E.useEffect(()=>{if(!o||!nd()){pt(null);return}(async()=>{try{const ut=localStorage.getItem("heytex_token"),gt=await fetch(`/api/files/${o.id}/content`,{headers:{...ut?{Authorization:`Bearer ${ut}`}:{}}});if(!gt.ok)throw new Error("Failed to load image");const jt=await gt.blob(),kt=URL.createObjectURL(jt);return pt(kt),()=>{kt&&URL.revokeObjectURL(kt)}}catch(ut){console.error("Error loading image:",ut),pt(null)}})()},[o==null?void 0:o.id]),E.useEffect(()=>{if(!o||!n||!e)return;const at=my(dG,{path:"/collab",transports:["websocket"]});js.current=at;const ut=new Zh;gi.current=ut;const gt=`project:${n.id}:${o.path}`;return at.on("connect",()=>{console.log("Connected to collaboration server"),at.emit("join-room",{docName:gt,user:{id:e.id,name:e.name}})}),at.on("sync",jt=>{console.log("Received sync message")}),at.on("update",jt=>{mH(ut,new Uint8Array(jt))}),at.on("current-users",jt=>{const kt=Array.from(new Map(jt.map(Oe=>[Oe.id,Oe])).values());nt(kt)}),at.on("user-joined",jt=>{nt(kt=>[...kt.filter(Te=>Te.id!==jt.id),jt])}),at.on("user-left",jt=>{nt(kt=>kt.filter(Oe=>Oe.id!==jt))}),()=>{(at.connected||at.io.engine)&&at.disconnect(),js.current=null,gi.current=null}},[o==null?void 0:o.id,n==null?void 0:n.id,e]);const vn=(at,ut)=>{td.current=at,ut.languages.register({id:"latex"}),ut.languages.register({id:"typst"}),ut.languages.setMonarchTokensProvider("latex",{tokenizer:{root:[[/\\[a-zA-Z@]+/,"keyword"],[/\\[^a-zA-Z@]/,"keyword"],[/%.*$/,"comment"],[/\{/,"delimiter.curly"],[/\}/,"delimiter.curly"],[/\[/,"delimiter.square"],[/\]/,"delimiter.square"],[/\$\$/,"string","@displaymath"],[/\$/,"string","@inlinemath"],[/\\begin\{[^}]+\}/,"keyword.control"],[/\\end\{[^}]+\}/,"keyword.control"]],inlinemath:[[/[^$]+/,"string"],[/\$/,"string","@pop"]],displaymath:[[/[^$]+/,"string"],[/\$\$/,"string","@pop"]]}}),ut.languages.setMonarchTokensProvider("typst",{tokenizer:{root:[[/#[a-zA-Z]+/,"keyword"],[/\/\/.*$/,"comment"],[/\/\*/,"comment","@comment"],[/\[/,"delimiter.square"],[/\]/,"delimiter.square"],[/\{/,"delimiter.curly"],[/\}/,"delimiter.curly"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"]],comment:[[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/"/,"string","@pop"]]}}),o!=null&&o.content&&at.setValue(o.content)},ed=at=>{var ut;if(!(!o||at===void 0)&&(O(o.id,at),Vo.current&&clearTimeout(Vo.current),Vo.current=setTimeout(async()=>{await ds(o.id,at)},1500),gi.current&&((ut=js.current)!=null&&ut.connected))){const gt=bH(gi.current);js.current.emit("update",gt)}},Dc=E.useRef(null),qn=E.useRef(null);E.useRef(null),E.useEffect(()=>((async()=>{console.log(" [HeyTeX v2] Skipping WASM XeTeX/Dvipdfmx engines; using server-side TeXLive compilation");try{const{TypstCompilerEngine:ut}=await yl(async()=>{const{TypstCompilerEngine:jt}=await import("./TypstCompilerEngine-pRJlCa9l.js");return{TypstCompilerEngine:jt}},[]),gt=new ut;qn.current=gt,console.log("TypstCompilerEngine initialized")}catch(ut){console.error("Failed to init TypstCompilerEngine:",ut)}})(),()=>{Dc.current,qn.current&&qn.current.terminate()}),[]),E.useEffect(()=>{if((n==null?void 0:n.engine)!=="LATEX")return;const at=async()=>{try{const{compilationAPI:gt}=await yl(async()=>{const{compilationAPI:kt}=await import("./compilation-CsLgiDcZ.js");return{compilationAPI:kt}},[]),jt=await gt.getStats();tt(jt.stats)}catch(gt){console.error("[Queue Stats] Failed to fetch:",gt)}};at();const ut=setInterval(at,3e3);return()=>clearInterval(ut)},[n==null?void 0:n.engine]);const ds=async(at,ut)=>{W(!0);try{await Mn.updateFile(at,{content:ut})}catch(gt){console.error("Failed to save:",gt)}finally{W(!1)}},Ra=async()=>{if(o!=null&&o.content){P("compiling"),ce("");try{if(((n==null?void 0:n.engine)||"LATEX")==="TYPST"){if(ce(` Starting Typst compilation...
`),!qn.current)throw new Error("Typst engine not ready");ce(gt=>gt+" Compiling "+o.name+`...
`);const ut=await qn.current.compile("main.typ",{"main.typ":o.content},"pdf");if(ut.output){ce(kt=>kt+` Compilation successful!
`);const gt=new Blob([ut.output],{type:"application/pdf"}),jt=URL.createObjectURL(gt);U(jt),P("success")}else throw new Error("No output from Typst")}else{ce(` Starting LaTeX compilation on server...
`);const{compilationAPI:ut}=await yl(async()=>{const{compilationAPI:kt}=await import("./compilation-CsLgiDcZ.js");return{compilationAPI:kt}},[]);console.log("[Compile] Submitting job to server..."),ce(kt=>kt+` Submitting ${o.name} to compilation queue...
`);const gt=await ut.submitJob(o.name,o.content,n==null?void 0:n.id);console.log("[Compile] Job submitted:",gt.jobId,`Queue: ${gt.stats.queued}, Compiling: ${gt.stats.compiling}`),ce(kt=>kt+` Job submitted: ${gt.jobId}
 Queue stats: ${gt.stats.compiling} compiling, ${gt.stats.queued} queued
 Waiting for compilation to complete...
`);const jt=await ut.pollJobStatus(gt.jobId,kt=>{console.log("[Compile] Job status:",kt.job.status,kt.job.queuePosition?`Position: ${kt.job.queuePosition}`:""),kt.job.queuePosition!==void 0&&kt.job.queuePosition>0?ce(Oe=>{var Bi;const Te=Oe.split(`
`);return(Bi=Te[Te.length-2])!=null&&Bi.includes("Queue position:")&&Te.splice(-2,1),Te.join(`
`)+` Queue position: ${kt.job.queuePosition}
`}):kt.job.status==="compiling"&&ce(Oe=>Oe.includes(" Compiling...")?Oe:Oe+` Compiling... (running xelatex 3 times)

`)},kt=>{console.log("[Compile] Log update, length:",kt.length);const Te=kt.split(`
`).slice(-50).join(`
`);ce(Bi=>Bi.split(`
`).slice(0,5).join(`
`)+`

 LaTeX Output:
`+Te)});if(jt.job.status==="completed"){console.log("[Compile] Downloading PDF..."),ce(Te=>Te+` Downloading PDF output...
`);const kt=await ut.getPDF(gt.jobId),Oe=URL.createObjectURL(kt);U(Oe),ce(Te=>Te+` Compilation completed successfully!
 PDF size: ${(kt.size/1024).toFixed(2)} KB
`),P("success"),console.log("[Compile] PDF ready");try{const Te=await ut.getLog(gt.jobId);Ft(Te||"No log available")}catch(Te){console.warn("[Compile] Failed to get log:",Te)}}else if(jt.job.status==="failed"){ce(Bi=>Bi+` Compilation failed!
`);const kt=await ut.getLog(gt.jobId);Ft(kt||"No log available");const Oe=E6(kt),Te=C6(Oe);P("error",Te||jt.job.error||"Compilation failed"),ht("logs")}}}catch(at){console.error("[Compile] Error:",at);const ut=at instanceof Error?at.message:"Unknown error";ce(gt=>gt+`
 Error: ${ut}
`),P("error",ut),ht("logs")}}},Na=at=>{ct(ut=>{const gt=new Set(ut);return gt.has(at)?gt.delete(at):gt.add(at),gt})},mb=async()=>{const at=prompt("Enter file name (e.g., main.tex or document.typ):");if(!(!at||!n))try{const{file:ut}=await Mn.createFile({projectId:n.id,name:at,path:`/${at}`,content:""});d([...u,ut]),g(ut)}catch(ut){console.error("Failed to create file:",ut),alert("Failed to create file")}},yb=async()=>{const at=prompt("Enter folder name:");if(!(!at||!n))try{const{file:ut}=await Mn.createFile({projectId:n.id,name:at,path:`/${at}`,isFolder:!0});d([...u,ut])}catch(ut){console.error("Failed to create folder:",ut),alert("Failed to create folder")}},qo=()=>{_t(!0)},Gn=async at=>{const ut=at.target.files;if(!(!ut||ut.length===0||!n)){for(const gt of Array.from(ut))try{const jt=new FileReader,kt=await new Promise((Te,Bi)=>{jt.onload=()=>{const br=jt.result,Ng=br.split(",")[1]||br;Te(Ng)},jt.onerror=Bi,jt.readAsDataURL(gt)}),{file:Oe}=await Mn.uploadFile({projectId:n.id,path:`/${gt.name}`,name:gt.name,mimeType:gt.type||"application/octet-stream",data:kt});d([...u,Oe]),(gt.name.endsWith(".tex")||gt.name.endsWith(".typ")||gt.name.endsWith(".txt"))&&g(Oe)}catch(jt){console.error(`Failed to upload ${gt.name}:`,jt),alert(`Failed to upload ${gt.name}`)}vr.current&&(vr.current.value="")}},Ps=async()=>{if(!o){alert("Please select a file to rename");return}const at=prompt("Enter new name:",o.name);if(!(!at||at===o.name))try{await Mn.updateFile(o.id,{name:at});const ut=u.map(gt=>gt.id===o.id?{...gt,name:at}:gt);d(ut),o.id===o.id&&c({...o,name:at})}catch(ut){console.error("Failed to rename file:",ut),alert("Failed to rename file")}},$n=async()=>{if(!o){alert("Please select a file to delete");return}if(confirm(`Are you sure you want to delete "${o.name}"?`))try{await Mn.deleteFile(o.id);const at=u.filter(ut=>ut.id!==o.id);d(at),y(o.id),f.length>1?c(f[0]):c(null)}catch(at){console.error("Failed to delete file:",at),alert("Failed to delete file")}},Rg=at=>ut=>{ut.preventDefault(),hs(at)};E.useEffect(()=>{if(!Vn)return;const at=gt=>{if(Vn==="sidebar"){const jt=Math.max(200,Math.min(500,gt.clientX));le(jt)}else if(Vn==="editor"){const jt=document.querySelector(".editor-preview-container");if(jt){const kt=jt.getBoundingClientRect(),Oe=gt.clientX-kt.left,Te=Math.max(30,Math.min(70,Oe/kt.width*100));Ne(Te)}}},ut=()=>{hs(null)};return document.addEventListener("mousemove",at),document.addEventListener("mouseup",ut),()=>{document.removeEventListener("mousemove",at),document.removeEventListener("mouseup",ut)}},[Vn]);const vb=()=>{var ut;if(!o)return"plaintext";const at=(ut=o.name.split(".").pop())==null?void 0:ut.toLowerCase();return at==="tex"?"latex":at==="typ"?"typst":at==="bib"||at==="bbl"?"bibtex":at==="md"?"markdown":at==="json"?"json":at==="yaml"||at==="yml"?"yaml":at==="xml"?"xml":at==="html"?"html":at==="css"?"css":at==="js"?"javascript":at==="ts"?"typescript":at==="py"?"python":"plaintext"},nd=()=>{var ut;if(!o)return!1;const at=(ut=o.name.split(".").pop())==null?void 0:ut.toLowerCase();return["png","jpg","jpeg","gif","svg","webp","bmp","ico"].includes(at||"")},Go=()=>o?o.name.toLowerCase().endsWith(".pdf"):!1;return H?x.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:x.jsx(ar,{size:"lg"})}):x.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[x.jsxs("header",{className:"h-12 flex items-center justify-between px-4 border-b bg-card shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx(Ee,{variant:"ghost",size:"icon",onClick:()=>t("/dashboard"),children:x.jsx(k3,{className:"h-5 w-5"})}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Sa,{className:"h-5 w-5 text-primary"}),x.jsx("span",{className:"font-medium",children:n==null?void 0:n.name}),x.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${(n==null?void 0:n.engine)==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:n==null?void 0:n.engine})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs(Ee,{size:"sm",onClick:Ra,disabled:D==="compiling"||(n==null?void 0:n.engine)==="LATEX"&&!!(G&&G.available===0),className:"gap-2",title:G&&G.available===0?"Server ang y, vui lng ch...":void 0,children:[D==="compiling"?x.jsx(ar,{size:"sm"}):x.jsx(p4,{className:"h-4 w-4"}),"Bin dch"]}),x.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[$?x.jsx(ar,{size:"sm"}):x.jsx(GR,{className:"h-4 w-4"}),x.jsx("span",{children:$?"ang lu...":" lu"})]}),x.jsxs(Ee,{variant:"outline",size:"sm",onClick:()=>q(!0),className:"gap-2",children:[x.jsx(ww,{className:"h-4 w-4"}),"Chia s"]}),(n==null?void 0:n.engine)==="LATEX"&&G&&x.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground border rounded px-2 py-1",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),x.jsxs("span",{children:[G.compiling," ang dch"]})]}),G.queued>0&&x.jsxs(x.Fragment,{children:[x.jsx("span",{children:""}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),x.jsxs("span",{children:[G.queued," ang ch"]})]})]})]}),x.jsx(S6,{collaborators:lt,maxShow:5}),x.jsx(Ee,{variant:"ghost",size:"icon",onClick:T,children:C==="dark"?x.jsx($R,{className:"h-4 w-4"}):x.jsx(qR,{className:"h-4 w-4"})})]})]}),x.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[x.jsx("input",{ref:vr,type:"file",multiple:!0,className:"hidden",onChange:Gn}),x.jsx("aside",{style:{width:b?`${re}px`:"0"},className:Pi("border-r bg-card flex flex-col transition-all duration-200 shrink-0",!b&&"border-r-0"),children:b&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"px-2 py-1.5 border-b flex items-center justify-between gap-1",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(Ee,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"New file",onClick:mb,children:x.jsx(Mo,{className:"h-4 w-4"})}),x.jsx(Ee,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"New folder",onClick:yb,children:x.jsx(m_,{className:"h-4 w-4"})}),x.jsx(Ee,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Upload",onClick:qo,children:x.jsx(Wy,{className:"h-4 w-4 rotate-180"})})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx(Ee,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Rename",onClick:Ps,children:x.jsx(Sa,{className:"h-4 w-4"})}),x.jsx(Ee,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-destructive",title:"Delete",onClick:$n,children:x.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:u.filter(at=>!at.path.includes("/",1)||at.path.split("/").length===2).map(at=>x.jsx(CL,{file:at,files:u,isExpanded:it.has(at.path),onToggle:Na,onSelect:ut=>{ut.isFolder?(j(ut),c(null)):(j(null),g(ut))},selectedFileId:o==null?void 0:o.id,selectedFolderId:Ct==null?void 0:Ct.id,expandedFolders:it,level:0},at.id))})]})}),b&&x.jsx("div",{onMouseDown:Rg("sidebar"),className:Pi("w-1 hover:w-1.5 bg-border hover:bg-primary/50 cursor-col-resize transition-all shrink-0",Vn==="sidebar"&&"bg-primary w-1.5")}),x.jsx("button",{onClick:w,className:"w-5 h-full flex items-center justify-center hover:bg-muted transition-colors shrink-0",children:b?x.jsx(u4,{className:"h-4 w-4 text-muted-foreground"}):x.jsx(d4,{className:"h-4 w-4 text-muted-foreground"})}),x.jsxs("div",{className:"flex-1 flex overflow-hidden editor-preview-container",children:[x.jsxs("div",{style:{width:A?`${Le}%`:"100%"},className:"flex flex-col min-w-0 transition-all duration-200",children:[x.jsx("div",{className:"h-9 flex items-center border-b bg-card/50 overflow-x-auto shrink-0",children:f.map(at=>x.jsxs("div",{onClick:()=>c(at),className:Pi("flex items-center gap-2 px-3 h-full border-r cursor-pointer group",(o==null?void 0:o.id)===at.id?"bg-background border-b-2 border-b-primary":"hover:bg-muted/50"),children:[x.jsx("span",{className:"text-sm",children:UR(at.name)}),x.jsx("span",{className:"text-sm truncate max-w-32",children:at.name}),x.jsx("button",{onClick:ut=>{ut.stopPropagation(),y(at.id)},className:"opacity-0 group-hover:opacity-100 hover:text-destructive",children:""})]},at.id))}),x.jsx("div",{className:"flex-1 min-h-0",children:o?x.jsx(x.Fragment,{children:nd()?x.jsx("div",{className:"h-full flex items-center justify-center bg-muted/10 p-4 overflow-auto",children:x.jsxs("div",{className:"text-center",children:[ot?x.jsx("img",{src:ot,alt:o.name,className:"max-w-full max-h-full object-contain rounded shadow-lg"}):x.jsxs("div",{className:"text-muted-foreground",children:[x.jsx(ar,{size:"lg"}),x.jsx("p",{className:"mt-4",children:"Loading image..."})]}),x.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:o.name}),x.jsx("p",{className:"text-xs text-muted-foreground",children:o.size?`${(o.size/1024).toFixed(2)} KB`:""})]})}):Go()?x.jsx("div",{className:"h-full flex items-center justify-center bg-muted/10",children:x.jsxs("div",{className:"text-center text-muted-foreground",children:[x.jsx(Mo,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),x.jsx("p",{children:"PDF preview not yet implemented"}),x.jsx("p",{className:"text-sm mt-2",children:o.name})]})}):x.jsx(W5,{height:"100%",language:vb(),value:o.content||"",onChange:ed,onMount:vn,theme:C==="dark"?"vs-dark":"light",options:{fontSize:14,fontFamily:"JetBrains Mono, Consolas, monospace",minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!0,automaticLayout:!0,scrollBeyondLastLine:!1,padding:{top:16},bracketPairColorization:{enabled:!0},matchBrackets:"always",colorDecorators:!0,renderWhitespace:"selection",occurrencesHighlight:"multiFile",readOnly:nd()||Go()}})}):x.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:x.jsxs("div",{className:"text-center",children:[x.jsx(Mo,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),x.jsx("p",{children:"Chn mt file  bt u bin tp"})]})})})]}),x.jsx("button",{onClick:S,className:"w-5 h-full flex items-center justify-center hover:bg-muted transition-colors shrink-0 border-x",children:A?x.jsx(B3,{className:"h-4 w-4 text-muted-foreground"}):x.jsx(RT,{className:"h-4 w-4 text-muted-foreground"})}),A&&x.jsx("div",{onMouseDown:Rg("editor"),className:Pi("w-1 hover:w-1.5 bg-border hover:bg-primary/50 cursor-col-resize transition-all shrink-0",Vn==="editor"&&"bg-primary w-1.5")}),A&&x.jsxs("div",{style:{width:`${100-Le}%`},className:"flex flex-col bg-muted/30 min-w-0",children:[x.jsxs("div",{className:"h-9 flex items-center justify-between px-4 border-b bg-card/50 shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:()=>ht("pdf"),className:Pi("px-3 py-1 text-sm font-medium rounded transition-colors",wt==="pdf"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:"PDF"}),x.jsx("button",{onClick:()=>ht("logs"),className:Pi("px-3 py-1 text-sm font-medium rounded transition-colors",wt==="logs"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:"Logs & Output"})]}),x.jsxs(Ee,{variant:"ghost",size:"sm",className:"h-7 gap-2",disabled:!z,children:[x.jsx(Wy,{className:"h-3 w-3"}),"Export"]})]}),x.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto",children:D==="compiling"?x.jsx("div",{className:"w-full h-full flex flex-col p-4",children:x.jsx("div",{className:"flex-1 border rounded-lg overflow-auto bg-card",children:x.jsxs("div",{className:"p-4",children:[x.jsx("pre",{className:"font-mono text-sm whitespace-pre-wrap text-foreground",children:$t||`Initializing...
`}),x.jsx("div",{ref:cn})]})})}):wt==="logs"?x.jsxs("div",{className:"w-full h-full overflow-auto p-4",children:[x.jsxs("div",{className:Pi("border rounded-lg p-4 mb-4",D==="error"?"bg-destructive/10 border-destructive/30":"bg-muted/50 border-border"),children:[x.jsx("h3",{className:Pi("text-lg font-semibold mb-2",D==="error"?"text-destructive":"text-foreground"),children:D==="error"?" Compilation Failed":" Compilation Log"}),D==="error"&&L&&x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden",children:[x.jsx("div",{className:"bg-muted px-4 py-2 border-b font-semibold text-sm",children:" Error Details"}),x.jsx("pre",{className:"p-4 text-sm font-mono whitespace-pre-wrap overflow-auto max-h-96",children:L})]})})]}),x.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden",children:[x.jsxs("div",{className:"bg-muted px-4 py-2 border-b font-semibold text-sm flex items-center justify-between",children:[x.jsx("span",{children:" Full Compilation Log"}),x.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Gt)},className:"text-xs px-2 py-1 bg-primary/10 hover:bg-primary/20 rounded",children:"Copy to clipboard"})]}),x.jsx("pre",{className:"p-4 text-xs font-mono whitespace-pre-wrap overflow-auto max-h-[600px] bg-gray-900 text-gray-100",children:Gt||"No logs available. Compile your document to see logs."})]})]}):D==="error"?x.jsxs("div",{className:"text-center text-muted-foreground p-8",children:[x.jsx("div",{className:"text-destructive text-lg mb-4",children:" Compilation Failed"}),x.jsx("p",{className:"mb-4",children:'Check the "Logs & Output" tab for details'}),x.jsx(Ee,{onClick:()=>ht("logs"),variant:"outline",children:"View Logs"})]}):z?x.jsx(cG,{pdfUrl:z}):x.jsxs("div",{className:"text-center text-muted-foreground",children:[x.jsx(RT,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),x.jsx("p",{children:'Nhn "Bin dch"  xem kt qu'})]})})]})]})]}),x.jsxs("footer",{className:"h-6 flex items-center justify-between px-4 border-t bg-card text-xs text-muted-foreground shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("span",{children:n==null?void 0:n.engine}),x.jsx("span",{children:o==null?void 0:o.path})]}),x.jsx("div",{className:"flex items-center gap-4",children:x.jsxs("span",{className:Pi("flex items-center gap-1",D==="success"&&"text-green-500",D==="error"&&"text-destructive"),children:[D==="idle"&&" Sn sng",D==="compiling"&&" ang bin dch",D==="success"&&" Thnh cng",D==="error"&&" Li"]})})]}),I&&n&&x.jsx(T6,{isOpen:I,onClose:()=>q(!1),projectId:n.id,projectName:n.name,collaborators:n.collaborators||[],onCollaboratorAdded:async()=>{if(s){const{project:at}=await Mn.getProject(s);a(at)}}}),X&&n&&x.jsx(hG,{projectId:n.id,targetPath:(Ct==null?void 0:Ct.path)||"/",onClose:()=>_t(!1),onUploadComplete:at=>{d([...u,...at]);const ut=at.find(gt=>gt.name.endsWith(".tex")||gt.name.endsWith(".typ")||gt.name.endsWith(".txt"));ut&&g(ut)}})]})}function CL({file:s,files:t,isExpanded:e,onToggle:n,onSelect:a,selectedFileId:o,selectedFolderId:c,expandedFolders:u,level:d}){const f=t.filter(y=>(y.path.substring(0,y.path.lastIndexOf("/"))||"/")===s.path&&y.id!==s.id),g=s.isFolder?c===s.id:o===s.id;return x.jsxs("div",{children:[x.jsxs("div",{onClick:()=>{s.isFolder&&n(s.path),a(s)},className:Pi("flex items-center gap-2 px-2 py-1 rounded cursor-pointer text-sm",g?"bg-primary/20 text-primary":"hover:bg-muted"),style:{paddingLeft:`${d*12+8}px`},children:[s.isFolder?e?x.jsx(m_,{className:"h-4 w-4 text-yellow-500"}):x.jsx(VR,{className:"h-4 w-4 text-yellow-500"}):x.jsx("span",{children:UR(s.name)}),x.jsx("span",{className:"truncate",children:s.name})]}),s.isFolder&&e&&f.map(y=>x.jsx(CL,{file:y,files:t,isExpanded:u.has(y.path),onToggle:n,onSelect:a,selectedFileId:o,selectedFolderId:c,expandedFolders:u,level:d+1},y.id))]})}function sR({children:s}){const{isAuthenticated:t,isLoading:e}=Cc();return e?x.jsx(YR,{message:"ang xc thc..."}):t?x.jsx(x.Fragment,{children:s}):x.jsx(Yy,{to:"/login",replace:!0})}function rR({children:s}){const{isAuthenticated:t,isLoading:e}=Cc();return e?x.jsx(YR,{message:"ang ti..."}):t?x.jsx(Yy,{to:"/dashboard",replace:!0}):x.jsx(x.Fragment,{children:s})}function pG(){const{checkAuth:s}=Cc();return E.useEffect(()=>{s()},[s]),x.jsx(hF,{children:x.jsxs(HP,{children:[x.jsx(hl,{path:"/login",element:x.jsx(rR,{children:x.jsx(j4,{})})}),x.jsx(hl,{path:"/register",element:x.jsx(rR,{children:x.jsx(P4,{})})}),x.jsx(hl,{path:"/dashboard",element:x.jsx(sR,{children:x.jsx(zz,{})})}),x.jsx(hl,{path:"/editor/:projectId",element:x.jsx(sR,{children:x.jsx(fG,{})})}),x.jsx(hl,{path:"/",element:x.jsx(Yy,{to:"/dashboard",replace:!0})}),x.jsx(hl,{path:"*",element:x.jsx(Yy,{to:"/dashboard",replace:!0})})]})})}Kj.createRoot(document.getElementById("root")).render(x.jsx(E.StrictMode,{children:x.jsx(pG,{})}));
//# sourceMappingURL=index-CIezlLHO.js.map
