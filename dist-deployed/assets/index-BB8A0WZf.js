var zj=Object.defineProperty;var sT=i=>{throw TypeError(i)};var Uj=(i,t,e)=>t in i?zj(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Dt=(i,t,e)=>Uj(i,typeof t!="symbol"?t+"":t,e),Mx=(i,t,e)=>t.has(i)||sT("Cannot "+e);var p=(i,t,e)=>(Mx(i,t,"read from private field"),e?e.call(i):t.get(i)),D=(i,t,e)=>t.has(i)?sT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),k=(i,t,e,n)=>(Mx(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),M=(i,t,e)=>(Mx(i,t,"access private method"),e);var Ss=(i,t,e,n)=>({set _(a){k(i,t,a,e)},get _(){return p(i,t,n)}});function Bj(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in i)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(i,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function l_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Dx={exports:{}},Xd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function Hj(){if(iT)return Xd;iT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:i,type:n,key:c,ref:a!==void 0?a:null,props:o}}return Xd.Fragment=t,Xd.jsx=e,Xd.jsxs=e,Xd}var rT;function Vj(){return rT||(rT=1,Dx.exports=Hj()),Dx.exports}var b=Vj(),Lx={exports:{}},Lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function qj(){if(aT)return Lt;aT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=x&&P[x]||P["@@iterator"],typeof P=="function"?P:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function T(P,G,tt){this.props=P,this.context=G,this.refs=C,this.updater=tt||A}T.prototype.isReactComponent={},T.prototype.setState=function(P,G){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,G,"setState")},T.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function R(){}R.prototype=T.prototype;function L(P,G,tt){this.props=P,this.context=G,this.refs=C,this.updater=tt||A}var j=L.prototype=new R;j.constructor=L,S(j,T.prototype),j.isPureReactComponent=!0;var I=Array.isArray;function U(){}var O={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function Z(P,G,tt){var ot=tt.ref;return{$$typeof:i,type:P,key:G,ref:ot!==void 0?ot:null,props:tt}}function $(P,G){return Z(P.type,G,P.props)}function W(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function st(P){var G={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(tt){return G[tt]})}var ct=/\/+/g;function lt(P,G){return typeof P=="object"&&P!==null&&P.key!=null?st(""+P.key):G.toString(36)}function nt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(U,U):(P.status="pending",P.then(function(G){P.status==="pending"&&(P.status="fulfilled",P.value=G)},function(G){P.status==="pending"&&(P.status="rejected",P.reason=G)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function z(P,G,tt,ot,pt){var wt=typeof P;(wt==="undefined"||wt==="boolean")&&(P=null);var ht=!1;if(P===null)ht=!0;else switch(wt){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(P.$$typeof){case i:case t:ht=!0;break;case g:return ht=P._init,z(ht(P._payload),G,tt,ot,pt)}}if(ht)return pt=pt(P),ht=ot===""?"."+lt(P,0):ot,I(pt)?(tt="",ht!=null&&(tt=ht.replace(ct,"$&/")+"/"),z(pt,G,tt,"",function($t){return $t})):pt!=null&&(W(pt)&&(pt=$(pt,tt+(pt.key==null||P&&P.key===pt.key?"":(""+pt.key).replace(ct,"$&/")+"/")+ht)),G.push(pt)),1;ht=0;var Gt=ot===""?".":ot+":";if(I(P))for(var Ft=0;Ft<P.length;Ft++)ot=P[Ft],wt=Gt+lt(ot,Ft),ht+=z(ot,G,tt,wt,pt);else if(Ft=w(P),typeof Ft=="function")for(P=Ft.call(P),Ft=0;!(ot=P.next()).done;)ot=ot.value,wt=Gt+lt(ot,Ft++),ht+=z(ot,G,tt,wt,pt);else if(wt==="object"){if(typeof P.then=="function")return z(nt(P),G,tt,ot,pt);throw G=String(P),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ht}function q(P,G,tt){if(P==null)return P;var ot=[],pt=0;return z(P,ot,"","",function(wt){return G.call(tt,wt,pt++)}),ot}function X(P){if(P._status===-1){var G=P._result;G=G(),G.then(function(tt){(P._status===0||P._status===-1)&&(P._status=1,P._result=tt)},function(tt){(P._status===0||P._status===-1)&&(P._status=2,P._result=tt)}),P._status===-1&&(P._status=0,P._result=G)}if(P._status===1)return P._result.default;throw P._result}var _t=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Ct={map:q,forEach:function(P,G,tt){q(P,function(){G.apply(this,arguments)},tt)},count:function(P){var G=0;return q(P,function(){G++}),G},toArray:function(P){return q(P,function(G){return G})||[]},only:function(P){if(!W(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Lt.Activity=y,Lt.Children=Ct,Lt.Component=T,Lt.Fragment=e,Lt.Profiler=a,Lt.PureComponent=L,Lt.StrictMode=n,Lt.Suspense=d,Lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Lt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return O.H.useMemoCache(P)}},Lt.cache=function(P){return function(){return P.apply(null,arguments)}},Lt.cacheSignal=function(){return null},Lt.cloneElement=function(P,G,tt){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ot=S({},P.props),pt=P.key;if(G!=null)for(wt in G.key!==void 0&&(pt=""+G.key),G)!H.call(G,wt)||wt==="key"||wt==="__self"||wt==="__source"||wt==="ref"&&G.ref===void 0||(ot[wt]=G[wt]);var wt=arguments.length-2;if(wt===1)ot.children=tt;else if(1<wt){for(var ht=Array(wt),Gt=0;Gt<wt;Gt++)ht[Gt]=arguments[Gt+2];ot.children=ht}return Z(P.type,pt,ot)},Lt.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:o,_context:P},P},Lt.createElement=function(P,G,tt){var ot,pt={},wt=null;if(G!=null)for(ot in G.key!==void 0&&(wt=""+G.key),G)H.call(G,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(pt[ot]=G[ot]);var ht=arguments.length-2;if(ht===1)pt.children=tt;else if(1<ht){for(var Gt=Array(ht),Ft=0;Ft<ht;Ft++)Gt[Ft]=arguments[Ft+2];pt.children=Gt}if(P&&P.defaultProps)for(ot in ht=P.defaultProps,ht)pt[ot]===void 0&&(pt[ot]=ht[ot]);return Z(P,wt,pt)},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(P){return{$$typeof:u,render:P}},Lt.isValidElement=W,Lt.lazy=function(P){return{$$typeof:g,_payload:{_status:-1,_result:P},_init:X}},Lt.memo=function(P,G){return{$$typeof:f,type:P,compare:G===void 0?null:G}},Lt.startTransition=function(P){var G=O.T,tt={};O.T=tt;try{var ot=P(),pt=O.S;pt!==null&&pt(tt,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(U,_t)}catch(wt){_t(wt)}finally{G!==null&&tt.types!==null&&(G.types=tt.types),O.T=G}},Lt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Lt.use=function(P){return O.H.use(P)},Lt.useActionState=function(P,G,tt){return O.H.useActionState(P,G,tt)},Lt.useCallback=function(P,G){return O.H.useCallback(P,G)},Lt.useContext=function(P){return O.H.useContext(P)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(P,G){return O.H.useDeferredValue(P,G)},Lt.useEffect=function(P,G){return O.H.useEffect(P,G)},Lt.useEffectEvent=function(P){return O.H.useEffectEvent(P)},Lt.useId=function(){return O.H.useId()},Lt.useImperativeHandle=function(P,G,tt){return O.H.useImperativeHandle(P,G,tt)},Lt.useInsertionEffect=function(P,G){return O.H.useInsertionEffect(P,G)},Lt.useLayoutEffect=function(P,G){return O.H.useLayoutEffect(P,G)},Lt.useMemo=function(P,G){return O.H.useMemo(P,G)},Lt.useOptimistic=function(P,G){return O.H.useOptimistic(P,G)},Lt.useReducer=function(P,G,tt){return O.H.useReducer(P,G,tt)},Lt.useRef=function(P){return O.H.useRef(P)},Lt.useState=function(P){return O.H.useState(P)},Lt.useSyncExternalStore=function(P,G,tt){return O.H.useSyncExternalStore(P,G,tt)},Lt.useTransition=function(){return O.H.useTransition()},Lt.version="19.2.1",Lt}var oT;function c_(){return oT||(oT=1,Lx.exports=qj()),Lx.exports}var E=c_();const mn=l_(E),lR=Bj({__proto__:null,default:mn},[E]);var Ox={exports:{}},Yd={},jx={exports:{}},Px={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function Gj(){return lT||(lT=1,(function(i){function t(z,q){var X=z.length;z.push(q);t:for(;0<X;){var _t=X-1>>>1,Ct=z[_t];if(0<a(Ct,q))z[_t]=q,z[X]=Ct,X=_t;else break t}}function e(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var q=z[0],X=z.pop();if(X!==q){z[0]=X;t:for(var _t=0,Ct=z.length,P=Ct>>>1;_t<P;){var G=2*(_t+1)-1,tt=z[G],ot=G+1,pt=z[ot];if(0>a(tt,X))ot<Ct&&0>a(pt,tt)?(z[_t]=pt,z[ot]=X,_t=ot):(z[_t]=tt,z[G]=X,_t=G);else if(ot<Ct&&0>a(pt,X))z[_t]=pt,z[ot]=X,_t=ot;else break t}}return q}function a(z,q){var X=z.sortIndex-q.sortIndex;return X!==0?X:z.id-q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();i.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,x=3,w=!1,A=!1,S=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function j(z){for(var q=e(f);q!==null;){if(q.callback===null)n(f);else if(q.startTime<=z)n(f),q.sortIndex=q.expirationTime,t(d,q);else break;q=e(f)}}function I(z){if(S=!1,j(z),!A)if(e(d)!==null)A=!0,U||(U=!0,st());else{var q=e(f);q!==null&&nt(I,q.startTime-z)}}var U=!1,O=-1,H=5,Z=-1;function $(){return C?!0:!(i.unstable_now()-Z<H)}function W(){if(C=!1,U){var z=i.unstable_now();Z=z;var q=!0;try{t:{A=!1,S&&(S=!1,R(O),O=-1),w=!0;var X=x;try{e:{for(j(z),y=e(d);y!==null&&!(y.expirationTime>z&&$());){var _t=y.callback;if(typeof _t=="function"){y.callback=null,x=y.priorityLevel;var Ct=_t(y.expirationTime<=z);if(z=i.unstable_now(),typeof Ct=="function"){y.callback=Ct,j(z),q=!0;break e}y===e(d)&&n(d),j(z)}else n(d);y=e(d)}if(y!==null)q=!0;else{var P=e(f);P!==null&&nt(I,P.startTime-z),q=!1}}break t}finally{y=null,x=X,w=!1}q=void 0}}finally{q?st():U=!1}}}var st;if(typeof L=="function")st=function(){L(W)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,lt=ct.port2;ct.port1.onmessage=W,st=function(){lt.postMessage(null)}}else st=function(){T(W,0)};function nt(z,q){O=T(function(){z(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(z){switch(x){case 1:case 2:case 3:var q=3;break;default:q=x}var X=x;x=q;try{return z()}finally{x=X}},i.unstable_requestPaint=function(){C=!0},i.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=x;x=z;try{return q()}finally{x=X}},i.unstable_scheduleCallback=function(z,q,X){var _t=i.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?_t+X:_t):X=_t,z){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=X+Ct,z={id:g++,callback:q,priorityLevel:z,startTime:X,expirationTime:Ct,sortIndex:-1},X>_t?(z.sortIndex=X,t(f,z),e(d)===null&&z===e(f)&&(S?(R(O),O=-1):S=!0,nt(I,X-_t))):(z.sortIndex=Ct,t(d,z),A||w||(A=!0,U||(U=!0,st()))),z},i.unstable_shouldYield=$,i.unstable_wrapCallback=function(z){var q=x;return function(){var X=x;x=q;try{return z.apply(this,arguments)}finally{x=X}}}})(Px)),Px}var cT;function $j(){return cT||(cT=1,jx.exports=Gj()),jx.exports}var Fx={exports:{}},Pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uT;function Xj(){if(uT)return Pn;uT=1;var i=c_();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Pn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},Pn.flushSync=function(d){var f=c.T,g=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=g,n.d.f()}},Pn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Pn.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Pn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:w}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Pn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Pn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Pn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Pn.requestFormReset=function(d){n.d.r(d)},Pn.unstable_batchedUpdates=function(d,f){return d(f)},Pn.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},Pn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Pn.version="19.2.1",Pn}var hT;function cR(){if(hT)return Fx.exports;hT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Fx.exports=Xj(),Fx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dT;function Yj(){if(dT)return Yd;dT=1;var i=$j(),t=c_(),e=cR();function n(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function c(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function u(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(n(188))}function f(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(n(188));return r!==s?null:s}for(var l=s,h=r;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return d(m),s;if(v===h)return d(m),r;v=v.sibling}throw Error(n(188))}if(l.return!==h.return)l=m,h=v;else{for(var _=!1,N=m.child;N;){if(N===l){_=!0,l=m,h=v;break}if(N===h){_=!0,h=m,l=v;break}N=N.sibling}if(!_){for(N=v.child;N;){if(N===l){_=!0,l=v,h=m;break}if(N===h){_=!0,h=v,l=m;break}N=N.sibling}if(!_)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?s:r}function g(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=g(s),r!==null)return r;s=s.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),L=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function st(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var ct=Symbol.for("react.client.reference");function lt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ct?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case U:return"SuspenseList";case Z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case L:return s.displayName||"Context";case R:return(s._context.displayName||"Context")+".Consumer";case j:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return r=s.displayName||null,r!==null?r:lt(s.type)||"Memo";case H:r=s._payload,s=s._init;try{return lt(s(r))}catch{}}return null}var nt=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},_t=[],Ct=-1;function P(s){return{current:s}}function G(s){0>Ct||(s.current=_t[Ct],_t[Ct]=null,Ct--)}function tt(s,r){Ct++,_t[Ct]=s.current,s.current=r}var ot=P(null),pt=P(null),wt=P(null),ht=P(null);function Gt(s,r){switch(tt(wt,r),tt(pt,s),tt(ot,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?CC(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=CC(r),s=TC(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}G(ot),tt(ot,s)}function Ft(){G(ot),G(pt),G(wt)}function $t(s){s.memoizedState!==null&&tt(ht,s);var r=ot.current,l=TC(r,s.type);r!==l&&(tt(pt,s),tt(ot,l))}function ue(s){pt.current===s&&(G(ot),G(pt)),ht.current===s&&(G(ht),Vd._currentValue=X)}var cn,ae;function ce(s){if(cn===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);cn=r&&r[1]||"",ae=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cn+s+ae}var Le=!1;function Ne(s,r){if(!s||Le)return"";Le=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(J){var Q=J}Reflect.construct(s,[],rt)}else{try{rt.call()}catch(J){Q=J}s.call(rt.prototype)}}else{try{throw Error()}catch(J){Q=J}(rt=s())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),_=v[0],N=v[1];if(_&&N){var F=_.split(`
`),K=N.split(`
`);for(m=h=0;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;for(;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;if(h===F.length||m===K.length)for(h=F.length-1,m=K.length-1;1<=h&&0<=m&&F[h]!==K[m];)m--;for(;1<=h&&0<=m;h--,m--)if(F[h]!==K[m]){if(h!==1||m!==1)do if(h--,m--,0>m||F[h]!==K[m]){var et=`
`+F[h].replace(" at new "," at ");return s.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",s.displayName)),et}while(1<=h&&0<=m);break}}}finally{Le=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?ce(l):""}function qn(s,r){switch(s.tag){case 26:case 27:case 5:return ce(s.type);case 16:return ce("Lazy");case 13:return s.child!==r&&r!==null?ce("Suspense Fallback"):ce("Suspense");case 19:return ce("SuspenseList");case 0:case 15:return Ne(s.type,!1);case 11:return Ne(s.type.render,!1);case 1:return Ne(s.type,!0);case 31:return ce("Activity");default:return""}}function hi(s){try{var r="",l=null;do r+=qn(s,l),l=s,s=s.return;while(s);return r}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Pi=Object.prototype.hasOwnProperty,br=i.unstable_scheduleCallback,ms=i.unstable_cancelCallback,ed=i.unstable_shouldYield,$o=i.unstable_requestPaint,vn=i.unstable_now,nd=i.unstable_getCurrentPriorityLevel,Dc=i.unstable_ImmediatePriority,Gn=i.unstable_UserBlockingPriority,di=i.unstable_NormalPriority,Na=i.unstable_LowPriority,Ma=i.unstable_IdlePriority,yb=i.log,vb=i.unstable_setDisableYieldValue,Xo=null,$n=null;function Fi(s){if(typeof yb=="function"&&vb(s),$n&&typeof $n.setStrictMode=="function")try{$n.setStrictMode(Xo,s)}catch{}}var Xn=Math.clz32?Math.clz32:sd,Ng=Math.log,bb=Math.LN2;function sd(s){return s>>>=0,s===0?32:31-(Ng(s)/bb|0)|0}var Yo=256,at=262144,ut=4194304;function gt(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function jt(s,r,l){var h=s.pendingLanes;if(h===0)return 0;var m=0,v=s.suspendedLanes,_=s.pingedLanes;s=s.warmLanes;var N=h&134217727;return N!==0?(h=N&~v,h!==0?m=gt(h):(_&=N,_!==0?m=gt(_):l||(l=N&~s,l!==0&&(m=gt(l))))):(N=h&~v,N!==0?m=gt(N):_!==0?m=gt(_):l||(l=h&~s,l!==0&&(m=gt(l)))),m===0?0:r!==0&&r!==m&&(r&v)===0&&(v=m&-m,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:m}function kt(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Oe(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Te(){var s=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),s}function Bs(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function xr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Mg(s,r,l,h,m,v){var _=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var N=s.entanglements,F=s.expirationTimes,K=s.hiddenUpdates;for(l=_&~l;0<l;){var et=31-Xn(l),rt=1<<et;N[et]=0,F[et]=-1;var Q=K[et];if(Q!==null)for(K[et]=null,et=0;et<Q.length;et++){var J=Q[et];J!==null&&(J.lane&=-536870913)}l&=~rt}h!==0&&lS(s,h,0),v!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=v&~(_&~r))}function lS(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var h=31-Xn(r);s.entangledLanes|=r,s.entanglements[h]=s.entanglements[h]|1073741824|l&261930}function cS(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var h=31-Xn(l),m=1<<h;m&r|s[h]&r&&(s[h]|=r),l&=~m}}function uS(s,r){var l=r&-r;return l=(l&42)!==0?1:xb(l),(l&(s.suspendedLanes|r))!==0?0:l}function xb(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function wb(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function hS(){var s=q.p;return s!==0?s:(s=window.event,s===void 0?32:WC(s.type))}function dS(s,r){var l=q.p;try{return q.p=s,r()}finally{q.p=l}}var Da=Math.random().toString(36).slice(2),bn="__reactFiber$"+Da,ns="__reactProps$"+Da,Lc="__reactContainer$"+Da,Ab="__reactEvents$"+Da,kL="__reactListeners$"+Da,RL="__reactHandles$"+Da,fS="__reactResources$"+Da,id="__reactMarker$"+Da;function _b(s){delete s[bn],delete s[ns],delete s[Ab],delete s[kL],delete s[RL]}function Oc(s){var r=s[bn];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Lc]||l[bn]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=OC(s);s!==null;){if(l=s[bn])return l;s=OC(s)}return r}s=l,l=s.parentNode}return null}function jc(s){if(s=s[bn]||s[Lc]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function rd(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(n(33))}function Pc(s){var r=s[fS];return r||(r=s[fS]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function un(s){s[id]=!0}var pS=new Set,gS={};function Ko(s,r){Fc(s,r),Fc(s+"Capture",r)}function Fc(s,r){for(gS[s]=r,s=0;s<r.length;s++)pS.add(r[s])}var NL=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mS={},yS={};function ML(s){return Pi.call(yS,s)?!0:Pi.call(mS,s)?!1:NL.test(s)?yS[s]=!0:(mS[s]=!0,!1)}function Dg(s,r,l){if(ML(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Lg(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function wr(s,r,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+h)}}function Hs(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function vS(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function DL(s,r,l){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,v=h.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return m.call(this)},set:function(_){l=""+_,v.call(this,_)}}),Object.defineProperty(s,r,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Sb(s){if(!s._valueTracker){var r=vS(s)?"checked":"value";s._valueTracker=DL(s,r,""+s[r])}}function bS(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),h="";return s&&(h=vS(s)?s.checked?"true":"false":s.value),s=h,s!==l?(r.setValue(s),!0):!1}function Og(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var LL=/[\n"\\]/g;function Vs(s){return s.replace(LL,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Eb(s,r,l,h,m,v,_,N){s.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.type=_:s.removeAttribute("type"),r!=null?_==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Hs(r)):s.value!==""+Hs(r)&&(s.value=""+Hs(r)):_!=="submit"&&_!=="reset"||s.removeAttribute("value"),r!=null?Cb(s,_,Hs(r)):l!=null?Cb(s,_,Hs(l)):h!=null&&s.removeAttribute("value"),m==null&&v!=null&&(s.defaultChecked=!!v),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.name=""+Hs(N):s.removeAttribute("name")}function xS(s,r,l,h,m,v,_,N){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){Sb(s);return}l=l!=null?""+Hs(l):"",r=r!=null?""+Hs(r):l,N||r===s.value||(s.value=r),s.defaultValue=r}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=N?s.checked:!!h,s.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.name=_),Sb(s)}function Cb(s,r,l){r==="number"&&Og(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Ic(s,r,l,h){if(s=s.options,r){r={};for(var m=0;m<l.length;m++)r["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=r.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&h&&(s[l].defaultSelected=!0)}else{for(l=""+Hs(l),r=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}r!==null||s[m].disabled||(r=s[m])}r!==null&&(r.selected=!0)}}function wS(s,r,l){if(r!=null&&(r=""+Hs(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+Hs(l):""}function AS(s,r,l,h){if(r==null){if(h!=null){if(l!=null)throw Error(n(92));if(nt(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),r=l}l=Hs(r),s.defaultValue=l,h=s.textContent,h===l&&h!==""&&h!==null&&(s.value=h),Sb(s)}function zc(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var OL=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _S(s,r,l){var h=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":h?s.setProperty(r,l):typeof l!="number"||l===0||OL.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function SS(s,r,l){if(r!=null&&typeof r!="object")throw Error(n(62));if(s=s.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in r)h=r[m],r.hasOwnProperty(m)&&l[m]!==h&&_S(s,m,h)}else for(var v in r)r.hasOwnProperty(v)&&_S(s,v,r[v])}function Tb(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jL=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PL=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jg(s){return PL.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ar(){}var kb=null;function Rb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Uc=null,Bc=null;function ES(s){var r=jc(s);if(r&&(s=r.stateNode)){var l=s[ns]||null;t:switch(s=r.stateNode,r.type){case"input":if(Eb(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Vs(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var h=l[r];if(h!==s&&h.form===s.form){var m=h[ns]||null;if(!m)throw Error(n(90));Eb(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<l.length;r++)h=l[r],h.form===s.form&&bS(h)}break t;case"textarea":wS(s,l.value,l.defaultValue);break t;case"select":r=l.value,r!=null&&Ic(s,!!l.multiple,r,!1)}}}var Nb=!1;function CS(s,r,l){if(Nb)return s(r,l);Nb=!0;try{var h=s(r);return h}finally{if(Nb=!1,(Uc!==null||Bc!==null)&&(Am(),Uc&&(r=Uc,s=Bc,Bc=Uc=null,ES(r),s)))for(r=0;r<s.length;r++)ES(s[r])}}function ad(s,r){var l=s.stateNode;if(l===null)return null;var h=l[ns]||null;if(h===null)return null;l=h[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(n(231,r,typeof l));return l}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mb=!1;if(_r)try{var od={};Object.defineProperty(od,"passive",{get:function(){Mb=!0}}),window.addEventListener("test",od,od),window.removeEventListener("test",od,od)}catch{Mb=!1}var La=null,Db=null,Pg=null;function TS(){if(Pg)return Pg;var s,r=Db,l=r.length,h,m="value"in La?La.value:La.textContent,v=m.length;for(s=0;s<l&&r[s]===m[s];s++);var _=l-s;for(h=1;h<=_&&r[l-h]===m[v-h];h++);return Pg=m.slice(s,1<h?1-h:void 0)}function Fg(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Ig(){return!0}function kS(){return!1}function ss(s){function r(l,h,m,v,_){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(l=s[N],this[N]=l?l(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ig:kS,this.isPropagationStopped=kS,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ig)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ig)},persist:function(){},isPersistent:Ig}),r}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zg=ss(Wo),ld=y({},Wo,{view:0,detail:0}),FL=ss(ld),Lb,Ob,cd,Ug=y({},ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pb,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==cd&&(cd&&s.type==="mousemove"?(Lb=s.screenX-cd.screenX,Ob=s.screenY-cd.screenY):Ob=Lb=0,cd=s),Lb)},movementY:function(s){return"movementY"in s?s.movementY:Ob}}),RS=ss(Ug),IL=y({},Ug,{dataTransfer:0}),zL=ss(IL),UL=y({},ld,{relatedTarget:0}),jb=ss(UL),BL=y({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),HL=ss(BL),VL=y({},Wo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qL=ss(VL),GL=y({},Wo,{data:0}),NS=ss(GL),$L={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KL(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=YL[s])?!!r[s]:!1}function Pb(){return KL}var WL=y({},ld,{key:function(s){if(s.key){var r=$L[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Fg(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?XL[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pb,charCode:function(s){return s.type==="keypress"?Fg(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Fg(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),QL=ss(WL),ZL=y({},Ug,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MS=ss(ZL),JL=y({},ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pb}),tO=ss(JL),eO=y({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),nO=ss(eO),sO=y({},Ug,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),iO=ss(sO),rO=y({},Wo,{newState:0,oldState:0}),aO=ss(rO),oO=[9,13,27,32],Fb=_r&&"CompositionEvent"in window,ud=null;_r&&"documentMode"in document&&(ud=document.documentMode);var lO=_r&&"TextEvent"in window&&!ud,DS=_r&&(!Fb||ud&&8<ud&&11>=ud),LS=" ",OS=!1;function jS(s,r){switch(s){case"keyup":return oO.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PS(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Hc=!1;function cO(s,r){switch(s){case"compositionend":return PS(r);case"keypress":return r.which!==32?null:(OS=!0,LS);case"textInput":return s=r.data,s===LS&&OS?null:s;default:return null}}function uO(s,r){if(Hc)return s==="compositionend"||!Fb&&jS(s,r)?(s=TS(),Pg=Db=La=null,Hc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return DS&&r.locale!=="ko"?null:r.data;default:return null}}var hO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FS(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!hO[s.type]:r==="textarea"}function IS(s,r,l,h){Uc?Bc?Bc.push(h):Bc=[h]:Uc=h,r=Rm(r,"onChange"),0<r.length&&(l=new zg("onChange","change",null,l,h),s.push({event:l,listeners:r}))}var hd=null,dd=null;function dO(s){xC(s,0)}function Bg(s){var r=rd(s);if(bS(r))return s}function zS(s,r){if(s==="change")return r}var US=!1;if(_r){var Ib;if(_r){var zb="oninput"in document;if(!zb){var BS=document.createElement("div");BS.setAttribute("oninput","return;"),zb=typeof BS.oninput=="function"}Ib=zb}else Ib=!1;US=Ib&&(!document.documentMode||9<document.documentMode)}function HS(){hd&&(hd.detachEvent("onpropertychange",VS),dd=hd=null)}function VS(s){if(s.propertyName==="value"&&Bg(dd)){var r=[];IS(r,dd,s,Rb(s)),CS(dO,r)}}function fO(s,r,l){s==="focusin"?(HS(),hd=r,dd=l,hd.attachEvent("onpropertychange",VS)):s==="focusout"&&HS()}function pO(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Bg(dd)}function gO(s,r){if(s==="click")return Bg(r)}function mO(s,r){if(s==="input"||s==="change")return Bg(r)}function yO(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var ys=typeof Object.is=="function"?Object.is:yO;function fd(s,r){if(ys(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),h=Object.keys(r);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!Pi.call(r,m)||!ys(s[m],r[m]))return!1}return!0}function qS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function GS(s,r){var l=qS(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=r&&h>=r)return{node:l,offset:r-s};s=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=qS(l)}}function $S(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?$S(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function XS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Og(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Og(s.document)}return r}function Ub(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var vO=_r&&"documentMode"in document&&11>=document.documentMode,Vc=null,Bb=null,pd=null,Hb=!1;function YS(s,r,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Hb||Vc==null||Vc!==Og(h)||(h=Vc,"selectionStart"in h&&Ub(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),pd&&fd(pd,h)||(pd=h,h=Rm(Bb,"onSelect"),0<h.length&&(r=new zg("onSelect","select",null,r,l),s.push({event:r,listeners:h}),r.target=Vc)))}function Qo(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var qc={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionrun:Qo("Transition","TransitionRun"),transitionstart:Qo("Transition","TransitionStart"),transitioncancel:Qo("Transition","TransitionCancel"),transitionend:Qo("Transition","TransitionEnd")},Vb={},KS={};_r&&(KS=document.createElement("div").style,"AnimationEvent"in window||(delete qc.animationend.animation,delete qc.animationiteration.animation,delete qc.animationstart.animation),"TransitionEvent"in window||delete qc.transitionend.transition);function Zo(s){if(Vb[s])return Vb[s];if(!qc[s])return s;var r=qc[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in KS)return Vb[s]=r[l];return s}var WS=Zo("animationend"),QS=Zo("animationiteration"),ZS=Zo("animationstart"),bO=Zo("transitionrun"),xO=Zo("transitionstart"),wO=Zo("transitioncancel"),JS=Zo("transitionend"),t1=new Map,qb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qb.push("scrollEnd");function fi(s,r){t1.set(s,r),Ko(r,[s])}var Hg=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},qs=[],Gc=0,Gb=0;function Vg(){for(var s=Gc,r=Gb=Gc=0;r<s;){var l=qs[r];qs[r++]=null;var h=qs[r];qs[r++]=null;var m=qs[r];qs[r++]=null;var v=qs[r];if(qs[r++]=null,h!==null&&m!==null){var _=h.pending;_===null?m.next=m:(m.next=_.next,_.next=m),h.pending=m}v!==0&&e1(l,m,v)}}function qg(s,r,l,h){qs[Gc++]=s,qs[Gc++]=r,qs[Gc++]=l,qs[Gc++]=h,Gb|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function $b(s,r,l,h){return qg(s,r,l,h),Gg(s)}function Jo(s,r){return qg(s,null,null,r),Gg(s)}function e1(s,r,l){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l);for(var m=!1,v=s.return;v!==null;)v.childLanes|=l,h=v.alternate,h!==null&&(h.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(m=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,m&&r!==null&&(m=31-Xn(l),s=v.hiddenUpdates,h=s[m],h===null?s[m]=[r]:h.push(r),r.lane=l|536870912),v):null}function Gg(s){if(50<Pd)throw Pd=0,ex=null,Error(n(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var $c={};function AO(s,r,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(s,r,l,h){return new AO(s,r,l,h)}function Xb(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Sr(s,r){var l=s.alternate;return l===null?(l=vs(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function n1(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function $g(s,r,l,h,m,v){var _=0;if(h=s,typeof s=="function")Xb(s)&&(_=1);else if(typeof s=="string")_=Tj(s,l,ot.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case Z:return s=vs(31,l,r,m),s.elementType=Z,s.lanes=v,s;case S:return tl(l.children,m,v,r);case C:_=8,m|=24;break;case T:return s=vs(12,l,r,m|2),s.elementType=T,s.lanes=v,s;case I:return s=vs(13,l,r,m),s.elementType=I,s.lanes=v,s;case U:return s=vs(19,l,r,m),s.elementType=U,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case L:_=10;break t;case R:_=9;break t;case j:_=11;break t;case O:_=14;break t;case H:_=16,h=null;break t}_=29,l=Error(n(130,s===null?"null":typeof s,"")),h=null}return r=vs(_,l,r,m),r.elementType=s,r.type=h,r.lanes=v,r}function tl(s,r,l,h){return s=vs(7,s,h,r),s.lanes=l,s}function Yb(s,r,l){return s=vs(6,s,null,r),s.lanes=l,s}function s1(s){var r=vs(18,null,null,0);return r.stateNode=s,r}function Kb(s,r,l){return r=vs(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var i1=new WeakMap;function Gs(s,r){if(typeof s=="object"&&s!==null){var l=i1.get(s);return l!==void 0?l:(r={value:s,source:r,stack:hi(r)},i1.set(s,r),r)}return{value:s,source:r,stack:hi(r)}}var Xc=[],Yc=0,Xg=null,gd=0,$s=[],Xs=0,Oa=null,Ii=1,zi="";function Er(s,r){Xc[Yc++]=gd,Xc[Yc++]=Xg,Xg=s,gd=r}function r1(s,r,l){$s[Xs++]=Ii,$s[Xs++]=zi,$s[Xs++]=Oa,Oa=s;var h=Ii;s=zi;var m=32-Xn(h)-1;h&=~(1<<m),l+=1;var v=32-Xn(r)+m;if(30<v){var _=m-m%5;v=(h&(1<<_)-1).toString(32),h>>=_,m-=_,Ii=1<<32-Xn(r)+m|l<<m|h,zi=v+s}else Ii=1<<v|l<<m|h,zi=s}function Wb(s){s.return!==null&&(Er(s,1),r1(s,1,0))}function Qb(s){for(;s===Xg;)Xg=Xc[--Yc],Xc[Yc]=null,gd=Xc[--Yc],Xc[Yc]=null;for(;s===Oa;)Oa=$s[--Xs],$s[Xs]=null,zi=$s[--Xs],$s[Xs]=null,Ii=$s[--Xs],$s[Xs]=null}function a1(s,r){$s[Xs++]=Ii,$s[Xs++]=zi,$s[Xs++]=Oa,Ii=r.id,zi=r.overflow,Oa=s}var xn=null,ke=null,Kt=!1,ja=null,Ys=!1,Zb=Error(n(519));function Pa(s){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw md(Gs(r,s)),Zb}function o1(s){var r=s.stateNode,l=s.type,h=s.memoizedProps;switch(r[bn]=s,r[ns]=h,l){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(l=0;l<Id.length;l++)Ht(Id[l],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":Ht("invalid",r),xS(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ht("invalid",r);break;case"textarea":Ht("invalid",r),AS(r,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||h.suppressHydrationWarning===!0||SC(r.textContent,l)?(h.popover!=null&&(Ht("beforetoggle",r),Ht("toggle",r)),h.onScroll!=null&&Ht("scroll",r),h.onScrollEnd!=null&&Ht("scrollend",r),h.onClick!=null&&(r.onclick=Ar),r=!0):r=!1,r||Pa(s,!0)}function l1(s){for(xn=s.return;xn;)switch(xn.tag){case 5:case 31:case 13:Ys=!1;return;case 27:case 3:Ys=!0;return;default:xn=xn.return}}function Kc(s){if(s!==xn)return!1;if(!Kt)return l1(s),Kt=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||mx(s.type,s.memoizedProps)),l=!l),l&&ke&&Pa(s),l1(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));ke=LC(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));ke=LC(s)}else r===27?(r=ke,Wa(s.type)?(s=wx,wx=null,ke=s):ke=r):ke=xn?Ws(s.stateNode.nextSibling):null;return!0}function el(){ke=xn=null,Kt=!1}function Jb(){var s=ja;return s!==null&&(os===null?os=s:os.push.apply(os,s),ja=null),s}function md(s){ja===null?ja=[s]:ja.push(s)}var t0=P(null),nl=null,Cr=null;function Fa(s,r,l){tt(t0,r._currentValue),r._currentValue=l}function Tr(s){s._currentValue=t0.current,G(t0)}function e0(s,r,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),s===l)break;s=s.return}}function n0(s,r,l,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var v=m.dependencies;if(v!==null){var _=m.child;v=v.firstContext;t:for(;v!==null;){var N=v;v=m;for(var F=0;F<r.length;F++)if(N.context===r[F]){v.lanes|=l,N=v.alternate,N!==null&&(N.lanes|=l),e0(v.return,l,s),h||(_=null);break t}v=N.next}}else if(m.tag===18){if(_=m.return,_===null)throw Error(n(341));_.lanes|=l,v=_.alternate,v!==null&&(v.lanes|=l),e0(_,l,s),_=null}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===s){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}}function Wc(s,r,l,h){s=null;for(var m=r,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var _=m.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var N=m.type;ys(m.pendingProps.value,_.value)||(s!==null?s.push(N):s=[N])}}else if(m===ht.current){if(_=m.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Vd):s=[Vd])}m=m.return}s!==null&&n0(r,s,l,h),r.flags|=262144}function Yg(s){for(s=s.firstContext;s!==null;){if(!ys(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function sl(s){nl=s,Cr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function wn(s){return c1(nl,s)}function Kg(s,r){return nl===null&&sl(s),c1(s,r)}function c1(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Cr===null){if(s===null)throw Error(n(308));Cr=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Cr=Cr.next=r;return l}var _O=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,h){s.push(h)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},SO=i.unstable_scheduleCallback,EO=i.unstable_NormalPriority,qe={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function s0(){return{controller:new _O,data:new Map,refCount:0}}function yd(s){s.refCount--,s.refCount===0&&SO(EO,function(){s.controller.abort()})}var vd=null,i0=0,Qc=0,Zc=null;function CO(s,r){if(vd===null){var l=vd=[];i0=0,Qc=ox(),Zc={status:"pending",value:void 0,then:function(h){l.push(h)}}}return i0++,r.then(u1,u1),r}function u1(){if(--i0===0&&vd!==null){Zc!==null&&(Zc.status="fulfilled");var s=vd;vd=null,Qc=0,Zc=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function TO(s,r){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){h.status="fulfilled",h.value=r;for(var m=0;m<l.length;m++)(0,l[m])(r)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var h1=z.S;z.S=function(s,r){YE=vn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&CO(s,r),h1!==null&&h1(s,r)};var il=P(null);function r0(){var s=il.current;return s!==null?s:we.pooledCache}function Wg(s,r){r===null?tt(il,il.current):tt(il,r.pool)}function d1(){var s=r0();return s===null?null:{parent:qe._currentValue,pool:s}}var Jc=Error(n(460)),a0=Error(n(474)),Qg=Error(n(542)),Zg={then:function(){}};function f1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function p1(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Ar,Ar),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,m1(s),s;default:if(typeof r.status=="string")r.then(Ar,Ar);else{if(s=we,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=r,s.status="pending",s.then(function(h){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=h}},function(h){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,m1(s),s}throw al=r,Jc}}function rl(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(al=l,Jc):l}}var al=null;function g1(){if(al===null)throw Error(n(459));var s=al;return al=null,s}function m1(s){if(s===Jc||s===Qg)throw Error(n(483))}var tu=null,bd=0;function Jg(s){var r=bd;return bd+=1,tu===null&&(tu=[]),p1(tu,s,r)}function xd(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function tm(s,r){throw r.$$typeof===x?Error(n(525)):(s=Object.prototype.toString.call(r),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function y1(s){function r(V,B){if(s){var Y=V.deletions;Y===null?(V.deletions=[B],V.flags|=16):Y.push(B)}}function l(V,B){if(!s)return null;for(;B!==null;)r(V,B),B=B.sibling;return null}function h(V){for(var B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function m(V,B){return V=Sr(V,B),V.index=0,V.sibling=null,V}function v(V,B,Y){return V.index=Y,s?(Y=V.alternate,Y!==null?(Y=Y.index,Y<B?(V.flags|=67108866,B):Y):(V.flags|=67108866,B)):(V.flags|=1048576,B)}function _(V){return s&&V.alternate===null&&(V.flags|=67108866),V}function N(V,B,Y,it){return B===null||B.tag!==6?(B=Yb(Y,V.mode,it),B.return=V,B):(B=m(B,Y),B.return=V,B)}function F(V,B,Y,it){var St=Y.type;return St===S?et(V,B,Y.props.children,it,Y.key):B!==null&&(B.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===H&&rl(St)===B.type)?(B=m(B,Y.props),xd(B,Y),B.return=V,B):(B=$g(Y.type,Y.key,Y.props,null,V.mode,it),xd(B,Y),B.return=V,B)}function K(V,B,Y,it){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=Kb(Y,V.mode,it),B.return=V,B):(B=m(B,Y.children||[]),B.return=V,B)}function et(V,B,Y,it,St){return B===null||B.tag!==7?(B=tl(Y,V.mode,it,St),B.return=V,B):(B=m(B,Y),B.return=V,B)}function rt(V,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Yb(""+B,V.mode,Y),B.return=V,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case w:return Y=$g(B.type,B.key,B.props,null,V.mode,Y),xd(Y,B),Y.return=V,Y;case A:return B=Kb(B,V.mode,Y),B.return=V,B;case H:return B=rl(B),rt(V,B,Y)}if(nt(B)||st(B))return B=tl(B,V.mode,Y,null),B.return=V,B;if(typeof B.then=="function")return rt(V,Jg(B),Y);if(B.$$typeof===L)return rt(V,Kg(V,B),Y);tm(V,B)}return null}function Q(V,B,Y,it){var St=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return St!==null?null:N(V,B,""+Y,it);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return Y.key===St?F(V,B,Y,it):null;case A:return Y.key===St?K(V,B,Y,it):null;case H:return Y=rl(Y),Q(V,B,Y,it)}if(nt(Y)||st(Y))return St!==null?null:et(V,B,Y,it,null);if(typeof Y.then=="function")return Q(V,B,Jg(Y),it);if(Y.$$typeof===L)return Q(V,B,Kg(V,Y),it);tm(V,Y)}return null}function J(V,B,Y,it,St){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return V=V.get(Y)||null,N(B,V,""+it,St);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case w:return V=V.get(it.key===null?Y:it.key)||null,F(B,V,it,St);case A:return V=V.get(it.key===null?Y:it.key)||null,K(B,V,it,St);case H:return it=rl(it),J(V,B,Y,it,St)}if(nt(it)||st(it))return V=V.get(Y)||null,et(B,V,it,St,null);if(typeof it.then=="function")return J(V,B,Y,Jg(it),St);if(it.$$typeof===L)return J(V,B,Y,Kg(B,it),St);tm(B,it)}return null}function mt(V,B,Y,it){for(var St=null,se=null,xt=B,Pt=B=0,Yt=null;xt!==null&&Pt<Y.length;Pt++){xt.index>Pt?(Yt=xt,xt=null):Yt=xt.sibling;var ie=Q(V,xt,Y[Pt],it);if(ie===null){xt===null&&(xt=Yt);break}s&&xt&&ie.alternate===null&&r(V,xt),B=v(ie,B,Pt),se===null?St=ie:se.sibling=ie,se=ie,xt=Yt}if(Pt===Y.length)return l(V,xt),Kt&&Er(V,Pt),St;if(xt===null){for(;Pt<Y.length;Pt++)xt=rt(V,Y[Pt],it),xt!==null&&(B=v(xt,B,Pt),se===null?St=xt:se.sibling=xt,se=xt);return Kt&&Er(V,Pt),St}for(xt=h(xt);Pt<Y.length;Pt++)Yt=J(xt,V,Pt,Y[Pt],it),Yt!==null&&(s&&Yt.alternate!==null&&xt.delete(Yt.key===null?Pt:Yt.key),B=v(Yt,B,Pt),se===null?St=Yt:se.sibling=Yt,se=Yt);return s&&xt.forEach(function(eo){return r(V,eo)}),Kt&&Er(V,Pt),St}function Tt(V,B,Y,it){if(Y==null)throw Error(n(151));for(var St=null,se=null,xt=B,Pt=B=0,Yt=null,ie=Y.next();xt!==null&&!ie.done;Pt++,ie=Y.next()){xt.index>Pt?(Yt=xt,xt=null):Yt=xt.sibling;var eo=Q(V,xt,ie.value,it);if(eo===null){xt===null&&(xt=Yt);break}s&&xt&&eo.alternate===null&&r(V,xt),B=v(eo,B,Pt),se===null?St=eo:se.sibling=eo,se=eo,xt=Yt}if(ie.done)return l(V,xt),Kt&&Er(V,Pt),St;if(xt===null){for(;!ie.done;Pt++,ie=Y.next())ie=rt(V,ie.value,it),ie!==null&&(B=v(ie,B,Pt),se===null?St=ie:se.sibling=ie,se=ie);return Kt&&Er(V,Pt),St}for(xt=h(xt);!ie.done;Pt++,ie=Y.next())ie=J(xt,V,Pt,ie.value,it),ie!==null&&(s&&ie.alternate!==null&&xt.delete(ie.key===null?Pt:ie.key),B=v(ie,B,Pt),se===null?St=ie:se.sibling=ie,se=ie);return s&&xt.forEach(function(Ij){return r(V,Ij)}),Kt&&Er(V,Pt),St}function ye(V,B,Y,it){if(typeof Y=="object"&&Y!==null&&Y.type===S&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:t:{for(var St=Y.key;B!==null;){if(B.key===St){if(St=Y.type,St===S){if(B.tag===7){l(V,B.sibling),it=m(B,Y.props.children),it.return=V,V=it;break t}}else if(B.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===H&&rl(St)===B.type){l(V,B.sibling),it=m(B,Y.props),xd(it,Y),it.return=V,V=it;break t}l(V,B);break}else r(V,B);B=B.sibling}Y.type===S?(it=tl(Y.props.children,V.mode,it,Y.key),it.return=V,V=it):(it=$g(Y.type,Y.key,Y.props,null,V.mode,it),xd(it,Y),it.return=V,V=it)}return _(V);case A:t:{for(St=Y.key;B!==null;){if(B.key===St)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){l(V,B.sibling),it=m(B,Y.children||[]),it.return=V,V=it;break t}else{l(V,B);break}else r(V,B);B=B.sibling}it=Kb(Y,V.mode,it),it.return=V,V=it}return _(V);case H:return Y=rl(Y),ye(V,B,Y,it)}if(nt(Y))return mt(V,B,Y,it);if(st(Y)){if(St=st(Y),typeof St!="function")throw Error(n(150));return Y=St.call(Y),Tt(V,B,Y,it)}if(typeof Y.then=="function")return ye(V,B,Jg(Y),it);if(Y.$$typeof===L)return ye(V,B,Kg(V,Y),it);tm(V,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(l(V,B.sibling),it=m(B,Y),it.return=V,V=it):(l(V,B),it=Yb(Y,V.mode,it),it.return=V,V=it),_(V)):l(V,B)}return function(V,B,Y,it){try{bd=0;var St=ye(V,B,Y,it);return tu=null,St}catch(xt){if(xt===Jc||xt===Qg)throw xt;var se=vs(29,xt,null,V.mode);return se.lanes=it,se.return=V,se}finally{}}}var ol=y1(!0),v1=y1(!1),Ia=!1;function o0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function l0(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function za(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ua(s,r,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(oe&2)!==0){var m=h.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),h.pending=r,r=Gg(s),e1(s,null,l),r}return qg(s,h,r,l),Gg(s)}function wd(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var h=r.lanes;h&=s.pendingLanes,l|=h,r.lanes=l,cS(s,l)}}function c0(s,r){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?m=v=_:v=v.next=_,l=l.next}while(l!==null);v===null?m=v=r:v=v.next=r}else m=v=r;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var u0=!1;function Ad(){if(u0){var s=Zc;if(s!==null)throw s}}function _d(s,r,l,h){u0=!1;var m=s.updateQueue;Ia=!1;var v=m.firstBaseUpdate,_=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var F=N,K=F.next;F.next=null,_===null?v=K:_.next=K,_=F;var et=s.alternate;et!==null&&(et=et.updateQueue,N=et.lastBaseUpdate,N!==_&&(N===null?et.firstBaseUpdate=K:N.next=K,et.lastBaseUpdate=F))}if(v!==null){var rt=m.baseState;_=0,et=K=F=null,N=v;do{var Q=N.lane&-536870913,J=Q!==N.lane;if(J?(Xt&Q)===Q:(h&Q)===Q){Q!==0&&Q===Qc&&(u0=!0),et!==null&&(et=et.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});t:{var mt=s,Tt=N;Q=r;var ye=l;switch(Tt.tag){case 1:if(mt=Tt.payload,typeof mt=="function"){rt=mt.call(ye,rt,Q);break t}rt=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=Tt.payload,Q=typeof mt=="function"?mt.call(ye,rt,Q):mt,Q==null)break t;rt=y({},rt,Q);break t;case 2:Ia=!0}}Q=N.callback,Q!==null&&(s.flags|=64,J&&(s.flags|=8192),J=m.callbacks,J===null?m.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:N.tag,payload:N.payload,callback:N.callback,next:null},et===null?(K=et=J,F=rt):et=et.next=J,_|=Q;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;J=N,N=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);et===null&&(F=rt),m.baseState=F,m.firstBaseUpdate=K,m.lastBaseUpdate=et,v===null&&(m.shared.lanes=0),Ga|=_,s.lanes=_,s.memoizedState=rt}}function b1(s,r){if(typeof s!="function")throw Error(n(191,s));s.call(r)}function x1(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)b1(l[s],r)}var eu=P(null),em=P(0);function w1(s,r){s=Pr,tt(em,s),tt(eu,r),Pr=s|r.baseLanes}function h0(){tt(em,Pr),tt(eu,eu.current)}function d0(){Pr=em.current,G(eu),G(em)}var bs=P(null),Ks=null;function Ba(s){var r=s.alternate;tt(Ue,Ue.current&1),tt(bs,s),Ks===null&&(r===null||eu.current!==null||r.memoizedState!==null)&&(Ks=s)}function f0(s){tt(Ue,Ue.current),tt(bs,s),Ks===null&&(Ks=s)}function A1(s){s.tag===22?(tt(Ue,Ue.current),tt(bs,s),Ks===null&&(Ks=s)):Ha()}function Ha(){tt(Ue,Ue.current),tt(bs,bs.current)}function xs(s){G(bs),Ks===s&&(Ks=null),G(Ue)}var Ue=P(0);function nm(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||bx(l)||xx(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var kr=0,Ot=null,ge=null,Ge=null,sm=!1,nu=!1,ll=!1,im=0,Sd=0,su=null,kO=0;function Fe(){throw Error(n(321))}function p0(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!ys(s[l],r[l]))return!1;return!0}function g0(s,r,l,h,m,v){return kr=v,Ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=s===null||s.memoizedState===null?rE:N0,ll=!1,v=l(h,m),ll=!1,nu&&(v=S1(r,l,h,m)),_1(s),v}function _1(s){z.H=Td;var r=ge!==null&&ge.next!==null;if(kr=0,Ge=ge=Ot=null,sm=!1,Sd=0,su=null,r)throw Error(n(300));s===null||$e||(s=s.dependencies,s!==null&&Yg(s)&&($e=!0))}function S1(s,r,l,h){Ot=s;var m=0;do{if(nu&&(su=null),Sd=0,nu=!1,25<=m)throw Error(n(301));if(m+=1,Ge=ge=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}z.H=aE,v=r(l,h)}while(nu);return v}function RO(){var s=z.H,r=s.useState()[0];return r=typeof r.then=="function"?Ed(r):r,s=s.useState()[0],(ge!==null?ge.memoizedState:null)!==s&&(Ot.flags|=1024),r}function m0(){var s=im!==0;return im=0,s}function y0(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function v0(s){if(sm){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}sm=!1}kr=0,Ge=ge=Ot=null,nu=!1,Sd=im=0,su=null}function Yn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ot.memoizedState=Ge=s:Ge=Ge.next=s,Ge}function Be(){if(ge===null){var s=Ot.alternate;s=s!==null?s.memoizedState:null}else s=ge.next;var r=Ge===null?Ot.memoizedState:Ge.next;if(r!==null)Ge=r,ge=s;else{if(s===null)throw Ot.alternate===null?Error(n(467)):Error(n(310));ge=s,s={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},Ge===null?Ot.memoizedState=Ge=s:Ge=Ge.next=s}return Ge}function rm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ed(s){var r=Sd;return Sd+=1,su===null&&(su=[]),s=p1(su,s,r),r=Ot,(Ge===null?r.memoizedState:Ge.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?rE:N0),s}function am(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ed(s);if(s.$$typeof===L)return wn(s)}throw Error(n(438,String(s)))}function b0(s){var r=null,l=Ot.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var h=Ot.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=rm(),Ot.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),h=0;h<s;h++)l[h]=$;return r.index++,l}function Rr(s,r){return typeof r=="function"?r(s):r}function om(s){var r=Be();return x0(r,ge,s)}function x0(s,r,l){var h=s.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var m=s.baseQueue,v=h.pending;if(v!==null){if(m!==null){var _=m.next;m.next=v.next,v.next=_}r.baseQueue=m=v,h.pending=null}if(v=s.baseState,m===null)s.memoizedState=v;else{r=m.next;var N=_=null,F=null,K=r,et=!1;do{var rt=K.lane&-536870913;if(rt!==K.lane?(Xt&rt)===rt:(kr&rt)===rt){var Q=K.revertLane;if(Q===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),rt===Qc&&(et=!0);else if((kr&Q)===Q){K=K.next,Q===Qc&&(et=!0);continue}else rt={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},F===null?(N=F=rt,_=v):F=F.next=rt,Ot.lanes|=Q,Ga|=Q;rt=K.action,ll&&l(v,rt),v=K.hasEagerState?K.eagerState:l(v,rt)}else Q={lane:rt,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},F===null?(N=F=Q,_=v):F=F.next=Q,Ot.lanes|=rt,Ga|=rt;K=K.next}while(K!==null&&K!==r);if(F===null?_=v:F.next=N,!ys(v,s.memoizedState)&&($e=!0,et&&(l=Zc,l!==null)))throw l;s.memoizedState=v,s.baseState=_,s.baseQueue=F,h.lastRenderedState=v}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function w0(s){var r=Be(),l=r.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=s;var h=l.dispatch,m=l.pending,v=r.memoizedState;if(m!==null){l.pending=null;var _=m=m.next;do v=s(v,_.action),_=_.next;while(_!==m);ys(v,r.memoizedState)||($e=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,h]}function E1(s,r,l){var h=Ot,m=Be(),v=Kt;if(v){if(l===void 0)throw Error(n(407));l=l()}else l=r();var _=!ys((ge||m).memoizedState,l);if(_&&(m.memoizedState=l,$e=!0),m=m.queue,S0(k1.bind(null,h,m,s),[s]),m.getSnapshot!==r||_||Ge!==null&&Ge.memoizedState.tag&1){if(h.flags|=2048,iu(9,{destroy:void 0},T1.bind(null,h,m,l,r),null),we===null)throw Error(n(349));v||(kr&127)!==0||C1(h,r,l)}return l}function C1(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Ot.updateQueue,r===null?(r=rm(),Ot.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function T1(s,r,l,h){r.value=l,r.getSnapshot=h,R1(r)&&N1(s)}function k1(s,r,l){return l(function(){R1(r)&&N1(s)})}function R1(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!ys(s,l)}catch{return!0}}function N1(s){var r=Jo(s,2);r!==null&&ls(r,s,2)}function A0(s){var r=Yn();if(typeof s=="function"){var l=s;if(s=l(),ll){Fi(!0);try{l()}finally{Fi(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:s},r}function M1(s,r,l,h){return s.baseState=l,x0(s,ge,typeof h=="function"?h:Rr)}function NO(s,r,l,h,m){if(um(s))throw Error(n(485));if(s=r.action,s!==null){var v={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){v.listeners.push(_)}};z.T!==null?l(!0):v.isTransition=!1,h(v),l=r.pending,l===null?(v.next=r.pending=v,D1(r,v)):(v.next=l.next,r.pending=l.next=v)}}function D1(s,r){var l=r.action,h=r.payload,m=s.state;if(r.isTransition){var v=z.T,_={};z.T=_;try{var N=l(m,h),F=z.S;F!==null&&F(_,N),L1(s,r,N)}catch(K){_0(s,r,K)}finally{v!==null&&_.types!==null&&(v.types=_.types),z.T=v}}else try{v=l(m,h),L1(s,r,v)}catch(K){_0(s,r,K)}}function L1(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){O1(s,r,h)},function(h){return _0(s,r,h)}):O1(s,r,l)}function O1(s,r,l){r.status="fulfilled",r.value=l,j1(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,D1(s,l)))}function _0(s,r,l){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=l,j1(r),r=r.next;while(r!==h)}s.action=null}function j1(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function P1(s,r){return r}function F1(s,r){if(Kt){var l=we.formState;if(l!==null){t:{var h=Ot;if(Kt){if(ke){e:{for(var m=ke,v=Ys;m.nodeType!==8;){if(!v){m=null;break e}if(m=Ws(m.nextSibling),m===null){m=null;break e}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){ke=Ws(m.nextSibling),h=m.data==="F!";break t}}Pa(h)}h=!1}h&&(r=l[0])}}return l=Yn(),l.memoizedState=l.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P1,lastRenderedState:r},l.queue=h,l=nE.bind(null,Ot,h),h.dispatch=l,h=A0(!1),v=R0.bind(null,Ot,!1,h.queue),h=Yn(),m={state:r,dispatch:null,action:s,pending:null},h.queue=m,l=NO.bind(null,Ot,m,v,l),m.dispatch=l,h.memoizedState=s,[r,l,!1]}function I1(s){var r=Be();return z1(r,ge,s)}function z1(s,r,l){if(r=x0(s,r,P1)[0],s=om(Rr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=Ed(r)}catch(_){throw _===Jc?Qg:_}else h=r;r=Be();var m=r.queue,v=m.dispatch;return l!==r.memoizedState&&(Ot.flags|=2048,iu(9,{destroy:void 0},MO.bind(null,m,l),null)),[h,v,s]}function MO(s,r){s.action=r}function U1(s){var r=Be(),l=ge;if(l!==null)return z1(r,l,s);Be(),r=r.memoizedState,l=Be();var h=l.queue.dispatch;return l.memoizedState=s,[r,h,!1]}function iu(s,r,l,h){return s={tag:s,create:l,deps:h,inst:r,next:null},r=Ot.updateQueue,r===null&&(r=rm(),Ot.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,r.lastEffect=s),s}function B1(){return Be().memoizedState}function lm(s,r,l,h){var m=Yn();Ot.flags|=s,m.memoizedState=iu(1|r,{destroy:void 0},l,h===void 0?null:h)}function cm(s,r,l,h){var m=Be();h=h===void 0?null:h;var v=m.memoizedState.inst;ge!==null&&h!==null&&p0(h,ge.memoizedState.deps)?m.memoizedState=iu(r,v,l,h):(Ot.flags|=s,m.memoizedState=iu(1|r,v,l,h))}function H1(s,r){lm(8390656,8,s,r)}function S0(s,r){cm(2048,8,s,r)}function DO(s){Ot.flags|=4;var r=Ot.updateQueue;if(r===null)r=rm(),Ot.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function V1(s){var r=Be().memoizedState;return DO({ref:r,nextImpl:s}),function(){if((oe&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function q1(s,r){return cm(4,2,s,r)}function G1(s,r){return cm(4,4,s,r)}function $1(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function X1(s,r,l){l=l!=null?l.concat([s]):null,cm(4,4,$1.bind(null,r,s),l)}function E0(){}function Y1(s,r){var l=Be();r=r===void 0?null:r;var h=l.memoizedState;return r!==null&&p0(r,h[1])?h[0]:(l.memoizedState=[s,r],s)}function K1(s,r){var l=Be();r=r===void 0?null:r;var h=l.memoizedState;if(r!==null&&p0(r,h[1]))return h[0];if(h=s(),ll){Fi(!0);try{s()}finally{Fi(!1)}}return l.memoizedState=[h,r],h}function C0(s,r,l){return l===void 0||(kr&1073741824)!==0&&(Xt&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=WE(),Ot.lanes|=s,Ga|=s,l)}function W1(s,r,l,h){return ys(l,r)?l:eu.current!==null?(s=C0(s,l,h),ys(s,r)||($e=!0),s):(kr&42)===0||(kr&1073741824)!==0&&(Xt&261930)===0?($e=!0,s.memoizedState=l):(s=WE(),Ot.lanes|=s,Ga|=s,r)}function Q1(s,r,l,h,m){var v=q.p;q.p=v!==0&&8>v?v:8;var _=z.T,N={};z.T=N,R0(s,!1,r,l);try{var F=m(),K=z.S;if(K!==null&&K(N,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var et=TO(F,h);Cd(s,r,et,_s(s))}else Cd(s,r,h,_s(s))}catch(rt){Cd(s,r,{then:function(){},status:"rejected",reason:rt},_s())}finally{q.p=v,_!==null&&N.types!==null&&(_.types=N.types),z.T=_}}function LO(){}function T0(s,r,l,h){if(s.tag!==5)throw Error(n(476));var m=Z1(s).queue;Q1(s,m,r,X,l===null?LO:function(){return J1(s),l(h)})}function Z1(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:X},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function J1(s){var r=Z1(s);r.next===null&&(r=s.alternate.memoizedState),Cd(s,r.next.queue,{},_s())}function k0(){return wn(Vd)}function tE(){return Be().memoizedState}function eE(){return Be().memoizedState}function OO(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=_s();s=za(l);var h=Ua(r,s,l);h!==null&&(ls(h,r,l),wd(h,r,l)),r={cache:s0()},s.payload=r;return}r=r.return}}function jO(s,r,l){var h=_s();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},um(s)?sE(r,l):(l=$b(s,r,l,h),l!==null&&(ls(l,s,h),iE(l,r,h)))}function nE(s,r,l){var h=_s();Cd(s,r,l,h)}function Cd(s,r,l,h){var m={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(um(s))sE(r,m);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var _=r.lastRenderedState,N=v(_,l);if(m.hasEagerState=!0,m.eagerState=N,ys(N,_))return qg(s,r,m,0),we===null&&Vg(),!1}catch{}finally{}if(l=$b(s,r,m,h),l!==null)return ls(l,s,h),iE(l,r,h),!0}return!1}function R0(s,r,l,h){if(h={lane:2,revertLane:ox(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},um(s)){if(r)throw Error(n(479))}else r=$b(s,l,h,2),r!==null&&ls(r,s,2)}function um(s){var r=s.alternate;return s===Ot||r!==null&&r===Ot}function sE(s,r){nu=sm=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function iE(s,r,l){if((l&4194048)!==0){var h=r.lanes;h&=s.pendingLanes,l|=h,r.lanes=l,cS(s,l)}}var Td={readContext:wn,use:am,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};Td.useEffectEvent=Fe;var rE={readContext:wn,use:am,useCallback:function(s,r){return Yn().memoizedState=[s,r===void 0?null:r],s},useContext:wn,useEffect:H1,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,lm(4194308,4,$1.bind(null,r,s),l)},useLayoutEffect:function(s,r){return lm(4194308,4,s,r)},useInsertionEffect:function(s,r){lm(4,2,s,r)},useMemo:function(s,r){var l=Yn();r=r===void 0?null:r;var h=s();if(ll){Fi(!0);try{s()}finally{Fi(!1)}}return l.memoizedState=[h,r],h},useReducer:function(s,r,l){var h=Yn();if(l!==void 0){var m=l(r);if(ll){Fi(!0);try{l(r)}finally{Fi(!1)}}}else m=r;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=jO.bind(null,Ot,s),[h.memoizedState,s]},useRef:function(s){var r=Yn();return s={current:s},r.memoizedState=s},useState:function(s){s=A0(s);var r=s.queue,l=nE.bind(null,Ot,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:E0,useDeferredValue:function(s,r){var l=Yn();return C0(l,s,r)},useTransition:function(){var s=A0(!1);return s=Q1.bind(null,Ot,s.queue,!0,!1),Yn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var h=Ot,m=Yn();if(Kt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=r(),we===null)throw Error(n(349));(Xt&127)!==0||C1(h,r,l)}m.memoizedState=l;var v={value:l,getSnapshot:r};return m.queue=v,H1(k1.bind(null,h,v,s),[s]),h.flags|=2048,iu(9,{destroy:void 0},T1.bind(null,h,v,l,r),null),l},useId:function(){var s=Yn(),r=we.identifierPrefix;if(Kt){var l=zi,h=Ii;l=(h&~(1<<32-Xn(h)-1)).toString(32)+l,r="_"+r+"R_"+l,l=im++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=kO++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:k0,useFormState:F1,useActionState:F1,useOptimistic:function(s){var r=Yn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=R0.bind(null,Ot,!0,l),l.dispatch=r,[s,r]},useMemoCache:b0,useCacheRefresh:function(){return Yn().memoizedState=OO.bind(null,Ot)},useEffectEvent:function(s){var r=Yn(),l={impl:s};return r.memoizedState=l,function(){if((oe&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},N0={readContext:wn,use:am,useCallback:Y1,useContext:wn,useEffect:S0,useImperativeHandle:X1,useInsertionEffect:q1,useLayoutEffect:G1,useMemo:K1,useReducer:om,useRef:B1,useState:function(){return om(Rr)},useDebugValue:E0,useDeferredValue:function(s,r){var l=Be();return W1(l,ge.memoizedState,s,r)},useTransition:function(){var s=om(Rr)[0],r=Be().memoizedState;return[typeof s=="boolean"?s:Ed(s),r]},useSyncExternalStore:E1,useId:tE,useHostTransitionStatus:k0,useFormState:I1,useActionState:I1,useOptimistic:function(s,r){var l=Be();return M1(l,ge,s,r)},useMemoCache:b0,useCacheRefresh:eE};N0.useEffectEvent=V1;var aE={readContext:wn,use:am,useCallback:Y1,useContext:wn,useEffect:S0,useImperativeHandle:X1,useInsertionEffect:q1,useLayoutEffect:G1,useMemo:K1,useReducer:w0,useRef:B1,useState:function(){return w0(Rr)},useDebugValue:E0,useDeferredValue:function(s,r){var l=Be();return ge===null?C0(l,s,r):W1(l,ge.memoizedState,s,r)},useTransition:function(){var s=w0(Rr)[0],r=Be().memoizedState;return[typeof s=="boolean"?s:Ed(s),r]},useSyncExternalStore:E1,useId:tE,useHostTransitionStatus:k0,useFormState:U1,useActionState:U1,useOptimistic:function(s,r){var l=Be();return ge!==null?M1(l,ge,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:b0,useCacheRefresh:eE};aE.useEffectEvent=V1;function M0(s,r,l,h){r=s.memoizedState,l=l(h,r),l=l==null?r:y({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var D0={enqueueSetState:function(s,r,l){s=s._reactInternals;var h=_s(),m=za(h);m.payload=r,l!=null&&(m.callback=l),r=Ua(s,m,h),r!==null&&(ls(r,s,h),wd(r,s,h))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var h=_s(),m=za(h);m.tag=1,m.payload=r,l!=null&&(m.callback=l),r=Ua(s,m,h),r!==null&&(ls(r,s,h),wd(r,s,h))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=_s(),h=za(l);h.tag=2,r!=null&&(h.callback=r),r=Ua(s,h,l),r!==null&&(ls(r,s,l),wd(r,s,l))}};function oE(s,r,l,h,m,v,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,v,_):r.prototype&&r.prototype.isPureReactComponent?!fd(l,h)||!fd(m,v):!0}function lE(s,r,l,h){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,h),r.state!==s&&D0.enqueueReplaceState(r,r.state,null)}function cl(s,r){var l=r;if("ref"in r){l={};for(var h in r)h!=="ref"&&(l[h]=r[h])}if(s=s.defaultProps){l===r&&(l=y({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}function cE(s){Hg(s)}function uE(s){console.error(s)}function hE(s){Hg(s)}function hm(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function dE(s,r,l){try{var h=s.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function L0(s,r,l){return l=za(l),l.tag=3,l.payload={element:null},l.callback=function(){hm(s,r)},l}function fE(s){return s=za(s),s.tag=3,s}function pE(s,r,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var v=h.value;s.payload=function(){return m(v)},s.callback=function(){dE(r,l,h)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){dE(r,l,h),typeof m!="function"&&($a===null?$a=new Set([this]):$a.add(this));var N=h.stack;this.componentDidCatch(h.value,{componentStack:N!==null?N:""})})}function PO(s,r,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=l.alternate,r!==null&&Wc(r,l,m,!0),l=bs.current,l!==null){switch(l.tag){case 31:case 13:return Ks===null?_m():l.alternate===null&&Ie===0&&(Ie=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===Zg?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([h]):r.add(h),ix(s,h,m)),!1;case 22:return l.flags|=65536,h===Zg?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([h]):l.add(h)),ix(s,h,m)),!1}throw Error(n(435,l.tag))}return ix(s,h,m),_m(),!1}if(Kt)return r=bs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,h!==Zb&&(s=Error(n(422),{cause:h}),md(Gs(s,l)))):(h!==Zb&&(r=Error(n(423),{cause:h}),md(Gs(r,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=Gs(h,l),m=L0(s.stateNode,h,m),c0(s,m),Ie!==4&&(Ie=2)),!1;var v=Error(n(520),{cause:h});if(v=Gs(v,l),jd===null?jd=[v]:jd.push(v),Ie!==4&&(Ie=2),r===null)return!0;h=Gs(h,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=L0(l.stateNode,h,s),c0(l,s),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&($a===null||!$a.has(v))))return l.flags|=65536,m&=-m,l.lanes|=m,m=fE(m),pE(m,s,l,h),c0(l,m),!1}l=l.return}while(l!==null);return!1}var O0=Error(n(461)),$e=!1;function An(s,r,l,h){r.child=s===null?v1(r,null,l,h):ol(r,s.child,l,h)}function gE(s,r,l,h,m){l=l.render;var v=r.ref;if("ref"in h){var _={};for(var N in h)N!=="ref"&&(_[N]=h[N])}else _=h;return sl(r),h=g0(s,r,l,_,v,m),N=m0(),s!==null&&!$e?(y0(s,r,m),Nr(s,r,m)):(Kt&&N&&Wb(r),r.flags|=1,An(s,r,h,m),r.child)}function mE(s,r,l,h,m){if(s===null){var v=l.type;return typeof v=="function"&&!Xb(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,yE(s,r,v,h,m)):(s=$g(l.type,null,h,r,r.mode,m),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!H0(s,m)){var _=v.memoizedProps;if(l=l.compare,l=l!==null?l:fd,l(_,h)&&s.ref===r.ref)return Nr(s,r,m)}return r.flags|=1,s=Sr(v,h),s.ref=r.ref,s.return=r,r.child=s}function yE(s,r,l,h,m){if(s!==null){var v=s.memoizedProps;if(fd(v,h)&&s.ref===r.ref)if($e=!1,r.pendingProps=h=v,H0(s,m))(s.flags&131072)!==0&&($e=!0);else return r.lanes=s.lanes,Nr(s,r,m)}return j0(s,r,l,h,m)}function vE(s,r,l,h){var m=h.children,v=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(h=r.child=s.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~v}else h=0,r.child=null;return bE(s,r,v,l,h)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Wg(r,v!==null?v.cachePool:null),v!==null?w1(r,v):h0(),A1(r);else return h=r.lanes=536870912,bE(s,r,v!==null?v.baseLanes|l:l,l,h)}else v!==null?(Wg(r,v.cachePool),w1(r,v),Ha(),r.memoizedState=null):(s!==null&&Wg(r,null),h0(),Ha());return An(s,r,m,l),r.child}function kd(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function bE(s,r,l,h,m){var v=r0();return v=v===null?null:{parent:qe._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},s!==null&&Wg(r,null),h0(),A1(r),s!==null&&Wc(s,r,h,!0),r.childLanes=m,null}function dm(s,r){return r=pm({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function xE(s,r,l){return ol(r,s.child,null,l),s=dm(r,r.pendingProps),s.flags|=2,xs(r),r.memoizedState=null,s}function FO(s,r,l){var h=r.pendingProps,m=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Kt){if(h.mode==="hidden")return s=dm(r,h),r.lanes=536870912,kd(null,s);if(f0(r),(s=ke)?(s=DC(s,Ys),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Oa!==null?{id:Ii,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},l=s1(s),l.return=r,r.child=l,xn=r,ke=null)):s=null,s===null)throw Pa(r);return r.lanes=536870912,null}return dm(r,h)}var v=s.memoizedState;if(v!==null){var _=v.dehydrated;if(f0(r),m)if(r.flags&256)r.flags&=-257,r=xE(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(n(558));else if($e||Wc(s,r,l,!1),m=(l&s.childLanes)!==0,$e||m){if(h=we,h!==null&&(_=uS(h,l),_!==0&&_!==v.retryLane))throw v.retryLane=_,Jo(s,_),ls(h,s,_),O0;_m(),r=xE(s,r,l)}else s=v.treeContext,ke=Ws(_.nextSibling),xn=r,Kt=!0,ja=null,Ys=!1,s!==null&&a1(r,s),r=dm(r,h),r.flags|=4096;return r}return s=Sr(s.child,{mode:h.mode,children:h.children}),s.ref=r.ref,r.child=s,s.return=r,s}function fm(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function j0(s,r,l,h,m){return sl(r),l=g0(s,r,l,h,void 0,m),h=m0(),s!==null&&!$e?(y0(s,r,m),Nr(s,r,m)):(Kt&&h&&Wb(r),r.flags|=1,An(s,r,l,m),r.child)}function wE(s,r,l,h,m,v){return sl(r),r.updateQueue=null,l=S1(r,h,l,m),_1(s),h=m0(),s!==null&&!$e?(y0(s,r,v),Nr(s,r,v)):(Kt&&h&&Wb(r),r.flags|=1,An(s,r,l,v),r.child)}function AE(s,r,l,h,m){if(sl(r),r.stateNode===null){var v=$c,_=l.contextType;typeof _=="object"&&_!==null&&(v=wn(_)),v=new l(h,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=D0,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=h,v.state=r.memoizedState,v.refs={},o0(r),_=l.contextType,v.context=typeof _=="object"&&_!==null?wn(_):$c,v.state=r.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(M0(r,l,_,h),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(_=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),_!==v.state&&D0.enqueueReplaceState(v,v.state,null),_d(r,h,v,m),Ad(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(s===null){v=r.stateNode;var N=r.memoizedProps,F=cl(l,N);v.props=F;var K=v.context,et=l.contextType;_=$c,typeof et=="object"&&et!==null&&(_=wn(et));var rt=l.getDerivedStateFromProps;et=typeof rt=="function"||typeof v.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,et||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(N||K!==_)&&lE(r,v,h,_),Ia=!1;var Q=r.memoizedState;v.state=Q,_d(r,h,v,m),Ad(),K=r.memoizedState,N||Q!==K||Ia?(typeof rt=="function"&&(M0(r,l,rt,h),K=r.memoizedState),(F=Ia||oE(r,l,F,h,Q,K,_))?(et||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=K),v.props=h,v.state=K,v.context=_,h=F):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{v=r.stateNode,l0(s,r),_=r.memoizedProps,et=cl(l,_),v.props=et,rt=r.pendingProps,Q=v.context,K=l.contextType,F=$c,typeof K=="object"&&K!==null&&(F=wn(K)),N=l.getDerivedStateFromProps,(K=typeof N=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(_!==rt||Q!==F)&&lE(r,v,h,F),Ia=!1,Q=r.memoizedState,v.state=Q,_d(r,h,v,m),Ad();var J=r.memoizedState;_!==rt||Q!==J||Ia||s!==null&&s.dependencies!==null&&Yg(s.dependencies)?(typeof N=="function"&&(M0(r,l,N,h),J=r.memoizedState),(et=Ia||oE(r,l,et,h,Q,J,F)||s!==null&&s.dependencies!==null&&Yg(s.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,J,F),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,J,F)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||_===s.memoizedProps&&Q===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&Q===s.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=J),v.props=h,v.state=J,v.context=F,h=et):(typeof v.componentDidUpdate!="function"||_===s.memoizedProps&&Q===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&Q===s.memoizedState||(r.flags|=1024),h=!1)}return v=h,fm(s,r),h=(r.flags&128)!==0,v||h?(v=r.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&h?(r.child=ol(r,s.child,null,m),r.child=ol(r,null,l,m)):An(s,r,l,m),r.memoizedState=v.state,s=r.child):s=Nr(s,r,m),s}function _E(s,r,l,h){return el(),r.flags|=256,An(s,r,l,h),r.child}var P0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function F0(s){return{baseLanes:s,cachePool:d1()}}function I0(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=As),s}function SE(s,r,l){var h=r.pendingProps,m=!1,v=(r.flags&128)!==0,_;if((_=v)||(_=s!==null&&s.memoizedState===null?!1:(Ue.current&2)!==0),_&&(m=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,s===null){if(Kt){if(m?Ba(r):Ha(),(s=ke)?(s=DC(s,Ys),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Oa!==null?{id:Ii,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},l=s1(s),l.return=r,r.child=l,xn=r,ke=null)):s=null,s===null)throw Pa(r);return xx(s)?r.lanes=32:r.lanes=536870912,null}var N=h.children;return h=h.fallback,m?(Ha(),m=r.mode,N=pm({mode:"hidden",children:N},m),h=tl(h,m,l,null),N.return=r,h.return=r,N.sibling=h,r.child=N,h=r.child,h.memoizedState=F0(l),h.childLanes=I0(s,_,l),r.memoizedState=P0,kd(null,h)):(Ba(r),z0(r,N))}var F=s.memoizedState;if(F!==null&&(N=F.dehydrated,N!==null)){if(v)r.flags&256?(Ba(r),r.flags&=-257,r=U0(s,r,l)):r.memoizedState!==null?(Ha(),r.child=s.child,r.flags|=128,r=null):(Ha(),N=h.fallback,m=r.mode,h=pm({mode:"visible",children:h.children},m),N=tl(N,m,l,null),N.flags|=2,h.return=r,N.return=r,h.sibling=N,r.child=h,ol(r,s.child,null,l),h=r.child,h.memoizedState=F0(l),h.childLanes=I0(s,_,l),r.memoizedState=P0,r=kd(null,h));else if(Ba(r),xx(N)){if(_=N.nextSibling&&N.nextSibling.dataset,_)var K=_.dgst;_=K,h=Error(n(419)),h.stack="",h.digest=_,md({value:h,source:null,stack:null}),r=U0(s,r,l)}else if($e||Wc(s,r,l,!1),_=(l&s.childLanes)!==0,$e||_){if(_=we,_!==null&&(h=uS(_,l),h!==0&&h!==F.retryLane))throw F.retryLane=h,Jo(s,h),ls(_,s,h),O0;bx(N)||_m(),r=U0(s,r,l)}else bx(N)?(r.flags|=192,r.child=s.child,r=null):(s=F.treeContext,ke=Ws(N.nextSibling),xn=r,Kt=!0,ja=null,Ys=!1,s!==null&&a1(r,s),r=z0(r,h.children),r.flags|=4096);return r}return m?(Ha(),N=h.fallback,m=r.mode,F=s.child,K=F.sibling,h=Sr(F,{mode:"hidden",children:h.children}),h.subtreeFlags=F.subtreeFlags&65011712,K!==null?N=Sr(K,N):(N=tl(N,m,l,null),N.flags|=2),N.return=r,h.return=r,h.sibling=N,r.child=h,kd(null,h),h=r.child,N=s.child.memoizedState,N===null?N=F0(l):(m=N.cachePool,m!==null?(F=qe._currentValue,m=m.parent!==F?{parent:F,pool:F}:m):m=d1(),N={baseLanes:N.baseLanes|l,cachePool:m}),h.memoizedState=N,h.childLanes=I0(s,_,l),r.memoizedState=P0,kd(s.child,h)):(Ba(r),l=s.child,s=l.sibling,l=Sr(l,{mode:"visible",children:h.children}),l.return=r,l.sibling=null,s!==null&&(_=r.deletions,_===null?(r.deletions=[s],r.flags|=16):_.push(s)),r.child=l,r.memoizedState=null,l)}function z0(s,r){return r=pm({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function pm(s,r){return s=vs(22,s,null,r),s.lanes=0,s}function U0(s,r,l){return ol(r,s.child,null,l),s=z0(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function EE(s,r,l){s.lanes|=r;var h=s.alternate;h!==null&&(h.lanes|=r),e0(s.return,r,l)}function B0(s,r,l,h,m,v){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m,treeForkCount:v}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=l,_.tailMode=m,_.treeForkCount=v)}function CE(s,r,l){var h=r.pendingProps,m=h.revealOrder,v=h.tail;h=h.children;var _=Ue.current,N=(_&2)!==0;if(N?(_=_&1|2,r.flags|=128):_&=1,tt(Ue,_),An(s,r,h,l),h=Kt?gd:0,!N&&s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&EE(s,l,r);else if(s.tag===19)EE(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(l=r.child,m=null;l!==null;)s=l.alternate,s!==null&&nm(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=r.child,r.child=null):(m=l.sibling,l.sibling=null),B0(r,!1,m,l,v,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=r.child,r.child=null;m!==null;){if(s=m.alternate,s!==null&&nm(s)===null){r.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}B0(r,!0,l,null,v,h);break;case"together":B0(r,!1,null,null,void 0,h);break;default:r.memoizedState=null}return r.child}function Nr(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Ga|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Wc(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(n(153));if(r.child!==null){for(s=r.child,l=Sr(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Sr(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function H0(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Yg(s)))}function IO(s,r,l){switch(r.tag){case 3:Gt(r,r.stateNode.containerInfo),Fa(r,qe,s.memoizedState.cache),el();break;case 27:case 5:$t(r);break;case 4:Gt(r,r.stateNode.containerInfo);break;case 10:Fa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,f0(r),null;break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Ba(r),r.flags|=128,null):(l&r.child.childLanes)!==0?SE(s,r,l):(Ba(r),s=Nr(s,r,l),s!==null?s.sibling:null);Ba(r);break;case 19:var m=(s.flags&128)!==0;if(h=(l&r.childLanes)!==0,h||(Wc(s,r,l,!1),h=(l&r.childLanes)!==0),m){if(h)return CE(s,r,l);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),tt(Ue,Ue.current),h)break;return null;case 22:return r.lanes=0,vE(s,r,l,r.pendingProps);case 24:Fa(r,qe,s.memoizedState.cache)}return Nr(s,r,l)}function TE(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)$e=!0;else{if(!H0(s,l)&&(r.flags&128)===0)return $e=!1,IO(s,r,l);$e=(s.flags&131072)!==0}else $e=!1,Kt&&(r.flags&1048576)!==0&&r1(r,gd,r.index);switch(r.lanes=0,r.tag){case 16:t:{var h=r.pendingProps;if(s=rl(r.elementType),r.type=s,typeof s=="function")Xb(s)?(h=cl(s,h),r.tag=1,r=AE(null,r,s,h,l)):(r.tag=0,r=j0(null,r,s,h,l));else{if(s!=null){var m=s.$$typeof;if(m===j){r.tag=11,r=gE(null,r,s,h,l);break t}else if(m===O){r.tag=14,r=mE(null,r,s,h,l);break t}}throw r=lt(s)||s,Error(n(306,r,""))}}return r;case 0:return j0(s,r,r.type,r.pendingProps,l);case 1:return h=r.type,m=cl(h,r.pendingProps),AE(s,r,h,m,l);case 3:t:{if(Gt(r,r.stateNode.containerInfo),s===null)throw Error(n(387));h=r.pendingProps;var v=r.memoizedState;m=v.element,l0(s,r),_d(r,h,null,l);var _=r.memoizedState;if(h=_.cache,Fa(r,qe,h),h!==v.cache&&n0(r,[qe],l,!0),Ad(),h=_.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=_E(s,r,h,l);break t}else if(h!==m){m=Gs(Error(n(424)),r),md(m),r=_E(s,r,h,l);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ke=Ws(s.firstChild),xn=r,Kt=!0,ja=null,Ys=!0,l=v1(r,null,h,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(el(),h===m){r=Nr(s,r,l);break t}An(s,r,h,l)}r=r.child}return r;case 26:return fm(s,r),s===null?(l=IC(r.type,null,r.pendingProps,null))?r.memoizedState=l:Kt||(l=r.type,s=r.pendingProps,h=Nm(wt.current).createElement(l),h[bn]=r,h[ns]=s,_n(h,l,s),un(h),r.stateNode=h):r.memoizedState=IC(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return $t(r),s===null&&Kt&&(h=r.stateNode=jC(r.type,r.pendingProps,wt.current),xn=r,Ys=!0,m=ke,Wa(r.type)?(wx=m,ke=Ws(h.firstChild)):ke=m),An(s,r,r.pendingProps.children,l),fm(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Kt&&((m=h=ke)&&(h=pj(h,r.type,r.pendingProps,Ys),h!==null?(r.stateNode=h,xn=r,ke=Ws(h.firstChild),Ys=!1,m=!0):m=!1),m||Pa(r)),$t(r),m=r.type,v=r.pendingProps,_=s!==null?s.memoizedProps:null,h=v.children,mx(m,v)?h=null:_!==null&&mx(m,_)&&(r.flags|=32),r.memoizedState!==null&&(m=g0(s,r,RO,null,null,l),Vd._currentValue=m),fm(s,r),An(s,r,h,l),r.child;case 6:return s===null&&Kt&&((s=l=ke)&&(l=gj(l,r.pendingProps,Ys),l!==null?(r.stateNode=l,xn=r,ke=null,s=!0):s=!1),s||Pa(r)),null;case 13:return SE(s,r,l);case 4:return Gt(r,r.stateNode.containerInfo),h=r.pendingProps,s===null?r.child=ol(r,null,h,l):An(s,r,h,l),r.child;case 11:return gE(s,r,r.type,r.pendingProps,l);case 7:return An(s,r,r.pendingProps,l),r.child;case 8:return An(s,r,r.pendingProps.children,l),r.child;case 12:return An(s,r,r.pendingProps.children,l),r.child;case 10:return h=r.pendingProps,Fa(r,r.type,h.value),An(s,r,h.children,l),r.child;case 9:return m=r.type._context,h=r.pendingProps.children,sl(r),m=wn(m),h=h(m),r.flags|=1,An(s,r,h,l),r.child;case 14:return mE(s,r,r.type,r.pendingProps,l);case 15:return yE(s,r,r.type,r.pendingProps,l);case 19:return CE(s,r,l);case 31:return FO(s,r,l);case 22:return vE(s,r,l,r.pendingProps);case 24:return sl(r),h=wn(qe),s===null?(m=r0(),m===null&&(m=we,v=s0(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=l),m=v),r.memoizedState={parent:h,cache:m},o0(r),Fa(r,qe,m)):((s.lanes&l)!==0&&(l0(s,r),_d(r,null,null,l),Ad()),m=s.memoizedState,v=r.memoizedState,m.parent!==h?(m={parent:h,cache:h},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Fa(r,qe,h)):(h=v.cache,Fa(r,qe,h),h!==m.cache&&n0(r,[qe],l,!0))),An(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function Mr(s){s.flags|=4}function V0(s,r,l,h,m){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(tC())s.flags|=8192;else throw al=Zg,a0}else s.flags&=-16777217}function kE(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!VC(r))if(tC())s.flags|=8192;else throw al=Zg,a0}function gm(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Te():536870912,s.lanes|=r,lu|=r)}function Rd(s,r){if(!Kt)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Re(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(r)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=l,r}function zO(s,r,l){var h=r.pendingProps;switch(Qb(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(r),null;case 1:return Re(r),null;case 3:return l=r.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Tr(qe),Ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Kc(r)?Mr(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Jb())),Re(r),null;case 26:var m=r.type,v=r.memoizedState;return s===null?(Mr(r),v!==null?(Re(r),kE(r,v)):(Re(r),V0(r,m,null,h,l))):v?v!==s.memoizedState?(Mr(r),Re(r),kE(r,v)):(Re(r),r.flags&=-16777217):(s=s.memoizedProps,s!==h&&Mr(r),Re(r),V0(r,m,s,h,l)),null;case 27:if(ue(r),l=wt.current,m=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==h&&Mr(r);else{if(!h){if(r.stateNode===null)throw Error(n(166));return Re(r),null}s=ot.current,Kc(r)?o1(r):(s=jC(m,h,l),r.stateNode=s,Mr(r))}return Re(r),null;case 5:if(ue(r),m=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==h&&Mr(r);else{if(!h){if(r.stateNode===null)throw Error(n(166));return Re(r),null}if(v=ot.current,Kc(r))o1(r);else{var _=Nm(wt.current);switch(v){case 1:v=_.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:v=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":v=_.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":v=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":v=_.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?v.multiple=!0:h.size&&(v.size=h.size);break;default:v=typeof h.is=="string"?_.createElement(m,{is:h.is}):_.createElement(m)}}v[bn]=r,v[ns]=h;t:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)v.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break t;for(;_.sibling===null;){if(_.return===null||_.return===r)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=v;t:switch(_n(v,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&Mr(r)}}return Re(r),V0(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==h&&Mr(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(n(166));if(s=wt.current,Kc(r)){if(s=r.stateNode,l=r.memoizedProps,h=null,m=xn,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[bn]=r,s=!!(s.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||SC(s.nodeValue,l)),s||Pa(r,!0)}else s=Nm(s).createTextNode(h),s[bn]=r,r.stateNode=s}return Re(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(h=Kc(r),l!==null){if(s===null){if(!h)throw Error(n(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[bn]=r}else el(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Re(r),s=!1}else l=Jb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(xs(r),r):(xs(r),null);if((r.flags&128)!==0)throw Error(n(558))}return Re(r),null;case 13:if(h=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Kc(r),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(n(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[bn]=r}else el(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Re(r),m=!1}else m=Jb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(xs(r),r):(xs(r),null)}return xs(r),(r.flags&128)!==0?(r.lanes=l,r):(l=h!==null,s=s!==null&&s.memoizedState!==null,l&&(h=r.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),v=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),gm(r,r.updateQueue),Re(r),null);case 4:return Ft(),s===null&&hx(r.stateNode.containerInfo),Re(r),null;case 10:return Tr(r.type),Re(r),null;case 19:if(G(Ue),h=r.memoizedState,h===null)return Re(r),null;if(m=(r.flags&128)!==0,v=h.rendering,v===null)if(m)Rd(h,!1);else{if(Ie!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=nm(s),v!==null){for(r.flags|=128,Rd(h,!1),s=v.updateQueue,r.updateQueue=s,gm(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)n1(l,s),l=l.sibling;return tt(Ue,Ue.current&1|2),Kt&&Er(r,h.treeForkCount),r.child}s=s.sibling}h.tail!==null&&vn()>xm&&(r.flags|=128,m=!0,Rd(h,!1),r.lanes=4194304)}else{if(!m)if(s=nm(v),s!==null){if(r.flags|=128,m=!0,s=s.updateQueue,r.updateQueue=s,gm(r,s),Rd(h,!0),h.tail===null&&h.tailMode==="hidden"&&!v.alternate&&!Kt)return Re(r),null}else 2*vn()-h.renderingStartTime>xm&&l!==536870912&&(r.flags|=128,m=!0,Rd(h,!1),r.lanes=4194304);h.isBackwards?(v.sibling=r.child,r.child=v):(s=h.last,s!==null?s.sibling=v:r.child=v,h.last=v)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=vn(),s.sibling=null,l=Ue.current,tt(Ue,m?l&1|2:l&1),Kt&&Er(r,h.treeForkCount),s):(Re(r),null);case 22:case 23:return xs(r),d0(),h=r.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(l&536870912)!==0&&(r.flags&128)===0&&(Re(r),r.subtreeFlags&6&&(r.flags|=8192)):Re(r),l=r.updateQueue,l!==null&&gm(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==l&&(r.flags|=2048),s!==null&&G(il),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Tr(qe),Re(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function UO(s,r){switch(Qb(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Tr(qe),Ft(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ue(r),null;case 31:if(r.memoizedState!==null){if(xs(r),r.alternate===null)throw Error(n(340));el()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(xs(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(n(340));el()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return G(Ue),null;case 4:return Ft(),null;case 10:return Tr(r.type),null;case 22:case 23:return xs(r),d0(),s!==null&&G(il),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Tr(qe),null;case 25:return null;default:return null}}function RE(s,r){switch(Qb(r),r.tag){case 3:Tr(qe),Ft();break;case 26:case 27:case 5:ue(r);break;case 4:Ft();break;case 31:r.memoizedState!==null&&xs(r);break;case 13:xs(r);break;case 19:G(Ue);break;case 10:Tr(r.type);break;case 22:case 23:xs(r),d0(),s!==null&&G(il);break;case 24:Tr(qe)}}function Nd(s,r){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&s)===s){h=void 0;var v=l.create,_=l.inst;h=v(),_.destroy=h}l=l.next}while(l!==m)}}catch(N){de(r,r.return,N)}}function Va(s,r,l){try{var h=r.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var v=m.next;h=v;do{if((h.tag&s)===s){var _=h.inst,N=_.destroy;if(N!==void 0){_.destroy=void 0,m=r;var F=l,K=N;try{K()}catch(et){de(m,F,et)}}}h=h.next}while(h!==v)}}catch(et){de(r,r.return,et)}}function NE(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{x1(r,l)}catch(h){de(s,s.return,h)}}}function ME(s,r,l){l.props=cl(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(h){de(s,r,h)}}function Md(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof l=="function"?s.refCleanup=l(h):l.current=h}}catch(m){de(s,r,m)}}function Ui(s,r){var l=s.ref,h=s.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){de(s,r,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){de(s,r,m)}else l.current=null}function DE(s){var r=s.type,l=s.memoizedProps,h=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){de(s,s.return,m)}}function q0(s,r,l){try{var h=s.stateNode;lj(h,s.type,l,r),h[ns]=r}catch(m){de(s,s.return,m)}}function LE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Wa(s.type)||s.tag===4}function G0(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||LE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Wa(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function $0(s,r,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ar));else if(h!==4&&(h===27&&Wa(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for($0(s,r,l),s=s.sibling;s!==null;)$0(s,r,l),s=s.sibling}function mm(s,r,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(h!==4&&(h===27&&Wa(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(mm(s,r,l),s=s.sibling;s!==null;)mm(s,r,l),s=s.sibling}function OE(s){var r=s.stateNode,l=s.memoizedProps;try{for(var h=s.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);_n(r,h,l),r[bn]=s,r[ns]=l}catch(v){de(s,s.return,v)}}var Dr=!1,Xe=!1,X0=!1,jE=typeof WeakSet=="function"?WeakSet:Set,hn=null;function BO(s,r){if(s=s.containerInfo,px=Fm,s=XS(s),Ub(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break t}var _=0,N=-1,F=-1,K=0,et=0,rt=s,Q=null;e:for(;;){for(var J;rt!==l||m!==0&&rt.nodeType!==3||(N=_+m),rt!==v||h!==0&&rt.nodeType!==3||(F=_+h),rt.nodeType===3&&(_+=rt.nodeValue.length),(J=rt.firstChild)!==null;)Q=rt,rt=J;for(;;){if(rt===s)break e;if(Q===l&&++K===m&&(N=_),Q===v&&++et===h&&(F=_),(J=rt.nextSibling)!==null)break;rt=Q,Q=rt.parentNode}rt=J}l=N===-1||F===-1?null:{start:N,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(gx={focusedElem:s,selectionRange:l},Fm=!1,hn=r;hn!==null;)if(r=hn,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,hn=s;else for(;hn!==null;){switch(r=hn,v=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)m=s[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=r,m=v.memoizedProps,v=v.memoizedState,h=l.stateNode;try{var mt=cl(l.type,m);s=h.getSnapshotBeforeUpdate(mt,v),h.__reactInternalSnapshotBeforeUpdate=s}catch(Tt){de(l,l.return,Tt)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)vx(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":vx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=r.sibling,s!==null){s.return=r.return,hn=s;break}hn=r.return}}function PE(s,r,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Or(s,l),h&4&&Nd(5,l);break;case 1:if(Or(s,l),h&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(_){de(l,l.return,_)}else{var m=cl(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(m,r,s.__reactInternalSnapshotBeforeUpdate)}catch(_){de(l,l.return,_)}}h&64&&NE(l),h&512&&Md(l,l.return);break;case 3:if(Or(s,l),h&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{x1(s,r)}catch(_){de(l,l.return,_)}}break;case 27:r===null&&h&4&&OE(l);case 26:case 5:Or(s,l),r===null&&h&4&&DE(l),h&512&&Md(l,l.return);break;case 12:Or(s,l);break;case 31:Or(s,l),h&4&&zE(s,l);break;case 13:Or(s,l),h&4&&UE(s,l),h&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=WO.bind(null,l),mj(s,l))));break;case 22:if(h=l.memoizedState!==null||Dr,!h){r=r!==null&&r.memoizedState!==null||Xe,m=Dr;var v=Xe;Dr=h,(Xe=r)&&!v?jr(s,l,(l.subtreeFlags&8772)!==0):Or(s,l),Dr=m,Xe=v}break;case 30:break;default:Or(s,l)}}function FE(s){var r=s.alternate;r!==null&&(s.alternate=null,FE(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&_b(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Me=null,is=!1;function Lr(s,r,l){for(l=l.child;l!==null;)IE(s,r,l),l=l.sibling}function IE(s,r,l){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Xo,l)}catch{}switch(l.tag){case 26:Xe||Ui(l,r),Lr(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Xe||Ui(l,r);var h=Me,m=is;Wa(l.type)&&(Me=l.stateNode,is=!1),Lr(s,r,l),Ud(l.stateNode),Me=h,is=m;break;case 5:Xe||Ui(l,r);case 6:if(h=Me,m=is,Me=null,Lr(s,r,l),Me=h,is=m,Me!==null)if(is)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(l.stateNode)}catch(v){de(l,r,v)}else try{Me.removeChild(l.stateNode)}catch(v){de(l,r,v)}break;case 18:Me!==null&&(is?(s=Me,NC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),mu(s)):NC(Me,l.stateNode));break;case 4:h=Me,m=is,Me=l.stateNode.containerInfo,is=!0,Lr(s,r,l),Me=h,is=m;break;case 0:case 11:case 14:case 15:Va(2,l,r),Xe||Va(4,l,r),Lr(s,r,l);break;case 1:Xe||(Ui(l,r),h=l.stateNode,typeof h.componentWillUnmount=="function"&&ME(l,r,h)),Lr(s,r,l);break;case 21:Lr(s,r,l);break;case 22:Xe=(h=Xe)||l.memoizedState!==null,Lr(s,r,l),Xe=h;break;default:Lr(s,r,l)}}function zE(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{mu(s)}catch(l){de(r,r.return,l)}}}function UE(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{mu(s)}catch(l){de(r,r.return,l)}}function HO(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new jE),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new jE),r;default:throw Error(n(435,s.tag))}}function ym(s,r){var l=HO(s);r.forEach(function(h){if(!l.has(h)){l.add(h);var m=QO.bind(null,s,h);h.then(m,m)}})}function rs(s,r){var l=r.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],v=s,_=r,N=_;t:for(;N!==null;){switch(N.tag){case 27:if(Wa(N.type)){Me=N.stateNode,is=!1;break t}break;case 5:Me=N.stateNode,is=!1;break t;case 3:case 4:Me=N.stateNode.containerInfo,is=!0;break t}N=N.return}if(Me===null)throw Error(n(160));IE(v,_,m),Me=null,is=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)BE(r,s),r=r.sibling}var pi=null;function BE(s,r){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:rs(r,s),as(s),h&4&&(Va(3,s,s.return),Nd(3,s),Va(5,s,s.return));break;case 1:rs(r,s),as(s),h&512&&(Xe||l===null||Ui(l,l.return)),h&64&&Dr&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=pi;if(rs(r,s),as(s),h&512&&(Xe||l===null||Ui(l,l.return)),h&4){var v=l!==null?l.memoizedState:null;if(h=s.memoizedState,l===null)if(h===null)if(s.stateNode===null){t:{h=s.type,l=s.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":v=m.getElementsByTagName("title")[0],(!v||v[id]||v[bn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(h),m.head.insertBefore(v,m.querySelector("head > title"))),_n(v,h,l),v[bn]=s,un(v),h=v;break t;case"link":var _=BC("link","href",m).get(h+(l.href||""));if(_){for(var N=0;N<_.length;N++)if(v=_[N],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(N,1);break e}}v=m.createElement(h),_n(v,h,l),m.head.appendChild(v);break;case"meta":if(_=BC("meta","content",m).get(h+(l.content||""))){for(N=0;N<_.length;N++)if(v=_[N],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(N,1);break e}}v=m.createElement(h),_n(v,h,l),m.head.appendChild(v);break;default:throw Error(n(468,h))}v[bn]=s,un(v),h=v}s.stateNode=h}else HC(m,s.type,s.stateNode);else s.stateNode=UC(m,h,s.memoizedProps);else v!==h?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,h===null?HC(m,s.type,s.stateNode):UC(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&q0(s,s.memoizedProps,l.memoizedProps)}break;case 27:rs(r,s),as(s),h&512&&(Xe||l===null||Ui(l,l.return)),l!==null&&h&4&&q0(s,s.memoizedProps,l.memoizedProps);break;case 5:if(rs(r,s),as(s),h&512&&(Xe||l===null||Ui(l,l.return)),s.flags&32){m=s.stateNode;try{zc(m,"")}catch(mt){de(s,s.return,mt)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,q0(s,m,l!==null?l.memoizedProps:m)),h&1024&&(X0=!0);break;case 6:if(rs(r,s),as(s),h&4){if(s.stateNode===null)throw Error(n(162));h=s.memoizedProps,l=s.stateNode;try{l.nodeValue=h}catch(mt){de(s,s.return,mt)}}break;case 3:if(Lm=null,m=pi,pi=Mm(r.containerInfo),rs(r,s),pi=m,as(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{mu(r.containerInfo)}catch(mt){de(s,s.return,mt)}X0&&(X0=!1,HE(s));break;case 4:h=pi,pi=Mm(s.stateNode.containerInfo),rs(r,s),as(s),pi=h;break;case 12:rs(r,s),as(s);break;case 31:rs(r,s),as(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ym(s,h)));break;case 13:rs(r,s),as(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(bm=vn()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ym(s,h)));break;case 22:m=s.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,K=Dr,et=Xe;if(Dr=K||m,Xe=et||F,rs(r,s),Xe=et,Dr=K,as(s),h&8192)t:for(r=s.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(l===null||F||Dr||Xe||ul(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){F=l=r;try{if(v=F.stateNode,m)_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{N=F.stateNode;var rt=F.memoizedProps.style,Q=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;N.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(mt){de(F,F.return,mt)}}}else if(r.tag===6){if(l===null){F=r;try{F.stateNode.nodeValue=m?"":F.memoizedProps}catch(mt){de(F,F.return,mt)}}}else if(r.tag===18){if(l===null){F=r;try{var J=F.stateNode;m?MC(J,!0):MC(F.stateNode,!1)}catch(mt){de(F,F.return,mt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=s.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,ym(s,l))));break;case 19:rs(r,s),as(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ym(s,h)));break;case 30:break;case 21:break;default:rs(r,s),as(s)}}function as(s){var r=s.flags;if(r&2){try{for(var l,h=s.return;h!==null;){if(LE(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var m=l.stateNode,v=G0(s);mm(s,v,m);break;case 5:var _=l.stateNode;l.flags&32&&(zc(_,""),l.flags&=-33);var N=G0(s);mm(s,N,_);break;case 3:case 4:var F=l.stateNode.containerInfo,K=G0(s);$0(s,K,F);break;default:throw Error(n(161))}}catch(et){de(s,s.return,et)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function HE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;HE(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Or(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)PE(s,r.alternate,r),r=r.sibling}function ul(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Va(4,r,r.return),ul(r);break;case 1:Ui(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&ME(r,r.return,l),ul(r);break;case 27:Ud(r.stateNode);case 26:case 5:Ui(r,r.return),ul(r);break;case 22:r.memoizedState===null&&ul(r);break;case 30:ul(r);break;default:ul(r)}s=s.sibling}}function jr(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,m=s,v=r,_=v.flags;switch(v.tag){case 0:case 11:case 15:jr(m,v,l),Nd(4,v);break;case 1:if(jr(m,v,l),h=v,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(K){de(h,h.return,K)}if(h=v,m=h.updateQueue,m!==null){var N=h.stateNode;try{var F=m.shared.hiddenCallbacks;if(F!==null)for(m.shared.hiddenCallbacks=null,m=0;m<F.length;m++)b1(F[m],N)}catch(K){de(h,h.return,K)}}l&&_&64&&NE(v),Md(v,v.return);break;case 27:OE(v);case 26:case 5:jr(m,v,l),l&&h===null&&_&4&&DE(v),Md(v,v.return);break;case 12:jr(m,v,l);break;case 31:jr(m,v,l),l&&_&4&&zE(m,v);break;case 13:jr(m,v,l),l&&_&4&&UE(m,v);break;case 22:v.memoizedState===null&&jr(m,v,l),Md(v,v.return);break;case 30:break;default:jr(m,v,l)}r=r.sibling}}function Y0(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&yd(l))}function K0(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&yd(s))}function gi(s,r,l,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)VE(s,r,l,h),r=r.sibling}function VE(s,r,l,h){var m=r.flags;switch(r.tag){case 0:case 11:case 15:gi(s,r,l,h),m&2048&&Nd(9,r);break;case 1:gi(s,r,l,h);break;case 3:gi(s,r,l,h),m&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&yd(s)));break;case 12:if(m&2048){gi(s,r,l,h),s=r.stateNode;try{var v=r.memoizedProps,_=v.id,N=v.onPostCommit;typeof N=="function"&&N(_,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(F){de(r,r.return,F)}}else gi(s,r,l,h);break;case 31:gi(s,r,l,h);break;case 13:gi(s,r,l,h);break;case 23:break;case 22:v=r.stateNode,_=r.alternate,r.memoizedState!==null?v._visibility&2?gi(s,r,l,h):Dd(s,r):v._visibility&2?gi(s,r,l,h):(v._visibility|=2,ru(s,r,l,h,(r.subtreeFlags&10256)!==0||!1)),m&2048&&Y0(_,r);break;case 24:gi(s,r,l,h),m&2048&&K0(r.alternate,r);break;default:gi(s,r,l,h)}}function ru(s,r,l,h,m){for(m=m&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=s,_=r,N=l,F=h,K=_.flags;switch(_.tag){case 0:case 11:case 15:ru(v,_,N,F,m),Nd(8,_);break;case 23:break;case 22:var et=_.stateNode;_.memoizedState!==null?et._visibility&2?ru(v,_,N,F,m):Dd(v,_):(et._visibility|=2,ru(v,_,N,F,m)),m&&K&2048&&Y0(_.alternate,_);break;case 24:ru(v,_,N,F,m),m&&K&2048&&K0(_.alternate,_);break;default:ru(v,_,N,F,m)}r=r.sibling}}function Dd(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,h=r,m=h.flags;switch(h.tag){case 22:Dd(l,h),m&2048&&Y0(h.alternate,h);break;case 24:Dd(l,h),m&2048&&K0(h.alternate,h);break;default:Dd(l,h)}r=r.sibling}}var Ld=8192;function au(s,r,l){if(s.subtreeFlags&Ld)for(s=s.child;s!==null;)qE(s,r,l),s=s.sibling}function qE(s,r,l){switch(s.tag){case 26:au(s,r,l),s.flags&Ld&&s.memoizedState!==null&&kj(l,pi,s.memoizedState,s.memoizedProps);break;case 5:au(s,r,l);break;case 3:case 4:var h=pi;pi=Mm(s.stateNode.containerInfo),au(s,r,l),pi=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=Ld,Ld=16777216,au(s,r,l),Ld=h):au(s,r,l));break;default:au(s,r,l)}}function GE(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Od(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];hn=h,XE(h,s)}GE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$E(s),s=s.sibling}function $E(s){switch(s.tag){case 0:case 11:case 15:Od(s),s.flags&2048&&Va(9,s,s.return);break;case 3:Od(s);break;case 12:Od(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,vm(s)):Od(s);break;default:Od(s)}}function vm(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];hn=h,XE(h,s)}GE(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Va(8,r,r.return),vm(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,vm(r));break;default:vm(r)}s=s.sibling}}function XE(s,r){for(;hn!==null;){var l=hn;switch(l.tag){case 0:case 11:case 15:Va(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:yd(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,hn=h;else t:for(l=s;hn!==null;){h=hn;var m=h.sibling,v=h.return;if(FE(h),h===l){hn=null;break t}if(m!==null){m.return=v,hn=m;break t}hn=v}}}var VO={getCacheForType:function(s){var r=wn(qe),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return wn(qe).controller.signal}},qO=typeof WeakMap=="function"?WeakMap:Map,oe=0,we=null,Bt=null,Xt=0,he=0,ws=null,qa=!1,ou=!1,W0=!1,Pr=0,Ie=0,Ga=0,hl=0,Q0=0,As=0,lu=0,jd=null,os=null,Z0=!1,bm=0,YE=0,xm=1/0,wm=null,$a=null,Qe=0,Xa=null,cu=null,Fr=0,J0=0,tx=null,KE=null,Pd=0,ex=null;function _s(){return(oe&2)!==0&&Xt!==0?Xt&-Xt:z.T!==null?ox():hS()}function WE(){if(As===0)if((Xt&536870912)===0||Kt){var s=at;at<<=1,(at&3932160)===0&&(at=262144),As=s}else As=536870912;return s=bs.current,s!==null&&(s.flags|=32),As}function ls(s,r,l){(s===we&&(he===2||he===9)||s.cancelPendingCommit!==null)&&(uu(s,0),Ya(s,Xt,As,!1)),xr(s,l),((oe&2)===0||s!==we)&&(s===we&&((oe&2)===0&&(hl|=l),Ie===4&&Ya(s,Xt,As,!1)),Bi(s))}function QE(s,r,l){if((oe&6)!==0)throw Error(n(327));var h=!l&&(r&127)===0&&(r&s.expiredLanes)===0||kt(s,r),m=h?XO(s,r):sx(s,r,!0),v=h;do{if(m===0){ou&&!h&&Ya(s,r,0,!1);break}else{if(l=s.current.alternate,v&&!GO(l)){m=sx(s,r,!1),v=!1;continue}if(m===2){if(v=r,s.errorRecoveryDisabledLanes&v)var _=0;else _=s.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;t:{var N=s;m=jd;var F=N.current.memoizedState.isDehydrated;if(F&&(uu(N,_).flags|=256),_=sx(N,_,!1),_!==2){if(W0&&!F){N.errorRecoveryDisabledLanes|=v,hl|=v,m=4;break t}v=os,os=m,v!==null&&(os===null?os=v:os.push.apply(os,v))}m=_}if(v=!1,m!==2)continue}}if(m===1){uu(s,0),Ya(s,r,0,!0);break}t:{switch(h=s,v=m,v){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:Ya(h,r,As,!qa);break t;case 2:os=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(m=bm+300-vn(),10<m)){if(Ya(h,r,As,!qa),jt(h,0,!0)!==0)break t;Fr=r,h.timeoutHandle=kC(ZE.bind(null,h,l,os,wm,Z0,r,As,hl,lu,qa,v,"Throttled",-0,0),m);break t}ZE(h,l,os,wm,Z0,r,As,hl,lu,qa,v,null,-0,0)}}break}while(!0);Bi(s)}function ZE(s,r,l,h,m,v,_,N,F,K,et,rt,Q,J){if(s.timeoutHandle=-1,rt=r.subtreeFlags,rt&8192||(rt&16785408)===16785408){rt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ar},qE(r,v,rt);var mt=(v&62914560)===v?bm-vn():(v&4194048)===v?YE-vn():0;if(mt=Rj(rt,mt),mt!==null){Fr=v,s.cancelPendingCommit=mt(aC.bind(null,s,r,v,l,h,m,_,N,F,et,rt,null,Q,J)),Ya(s,v,_,!K);return}}aC(s,r,v,l,h,m,_,N,F)}function GO(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],v=m.getSnapshot;m=m.value;try{if(!ys(v(),m))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ya(s,r,l,h){r&=~Q0,r&=~hl,s.suspendedLanes|=r,s.pingedLanes&=~r,h&&(s.warmLanes|=r),h=s.expirationTimes;for(var m=r;0<m;){var v=31-Xn(m),_=1<<v;h[v]=-1,m&=~_}l!==0&&lS(s,l,r)}function Am(){return(oe&6)===0?(Fd(0),!1):!0}function nx(){if(Bt!==null){if(he===0)var s=Bt.return;else s=Bt,Cr=nl=null,v0(s),tu=null,bd=0,s=Bt;for(;s!==null;)RE(s.alternate,s),s=s.return;Bt=null}}function uu(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,hj(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Fr=0,nx(),we=s,Bt=l=Sr(s.current,null),Xt=r,he=0,ws=null,qa=!1,ou=kt(s,r),W0=!1,lu=As=Q0=hl=Ga=Ie=0,os=jd=null,Z0=!1,(r&8)!==0&&(r|=r&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=r;0<h;){var m=31-Xn(h),v=1<<m;r|=s[m],h&=~v}return Pr=r,Vg(),l}function JE(s,r){Ot=null,z.H=Td,r===Jc||r===Qg?(r=g1(),he=3):r===a0?(r=g1(),he=4):he=r===O0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ws=r,Bt===null&&(Ie=1,hm(s,Gs(r,s.current)))}function tC(){var s=bs.current;return s===null?!0:(Xt&4194048)===Xt?Ks===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?s===Ks:!1}function eC(){var s=z.H;return z.H=Td,s===null?Td:s}function nC(){var s=z.A;return z.A=VO,s}function _m(){Ie=4,qa||(Xt&4194048)!==Xt&&bs.current!==null||(ou=!0),(Ga&134217727)===0&&(hl&134217727)===0||we===null||Ya(we,Xt,As,!1)}function sx(s,r,l){var h=oe;oe|=2;var m=eC(),v=nC();(we!==s||Xt!==r)&&(wm=null,uu(s,r)),r=!1;var _=Ie;t:do try{if(he!==0&&Bt!==null){var N=Bt,F=ws;switch(he){case 8:nx(),_=6;break t;case 3:case 2:case 9:case 6:bs.current===null&&(r=!0);var K=he;if(he=0,ws=null,hu(s,N,F,K),l&&ou){_=0;break t}break;default:K=he,he=0,ws=null,hu(s,N,F,K)}}$O(),_=Ie;break}catch(et){JE(s,et)}while(!0);return r&&s.shellSuspendCounter++,Cr=nl=null,oe=h,z.H=m,z.A=v,Bt===null&&(we=null,Xt=0,Vg()),_}function $O(){for(;Bt!==null;)sC(Bt)}function XO(s,r){var l=oe;oe|=2;var h=eC(),m=nC();we!==s||Xt!==r?(wm=null,xm=vn()+500,uu(s,r)):ou=kt(s,r);t:do try{if(he!==0&&Bt!==null){r=Bt;var v=ws;e:switch(he){case 1:he=0,ws=null,hu(s,r,v,1);break;case 2:case 9:if(f1(v)){he=0,ws=null,iC(r);break}r=function(){he!==2&&he!==9||we!==s||(he=7),Bi(s)},v.then(r,r);break t;case 3:he=7;break t;case 4:he=5;break t;case 7:f1(v)?(he=0,ws=null,iC(r)):(he=0,ws=null,hu(s,r,v,7));break;case 5:var _=null;switch(Bt.tag){case 26:_=Bt.memoizedState;case 5:case 27:var N=Bt;if(_?VC(_):N.stateNode.complete){he=0,ws=null;var F=N.sibling;if(F!==null)Bt=F;else{var K=N.return;K!==null?(Bt=K,Sm(K)):Bt=null}break e}}he=0,ws=null,hu(s,r,v,5);break;case 6:he=0,ws=null,hu(s,r,v,6);break;case 8:nx(),Ie=6;break t;default:throw Error(n(462))}}YO();break}catch(et){JE(s,et)}while(!0);return Cr=nl=null,z.H=h,z.A=m,oe=l,Bt!==null?0:(we=null,Xt=0,Vg(),Ie)}function YO(){for(;Bt!==null&&!ed();)sC(Bt)}function sC(s){var r=TE(s.alternate,s,Pr);s.memoizedProps=s.pendingProps,r===null?Sm(s):Bt=r}function iC(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=wE(l,r,r.pendingProps,r.type,void 0,Xt);break;case 11:r=wE(l,r,r.pendingProps,r.type.render,r.ref,Xt);break;case 5:v0(r);default:RE(l,r),r=Bt=n1(r,Pr),r=TE(l,r,Pr)}s.memoizedProps=s.pendingProps,r===null?Sm(s):Bt=r}function hu(s,r,l,h){Cr=nl=null,v0(r),tu=null,bd=0;var m=r.return;try{if(PO(s,m,r,l,Xt)){Ie=1,hm(s,Gs(l,s.current)),Bt=null;return}}catch(v){if(m!==null)throw Bt=m,v;Ie=1,hm(s,Gs(l,s.current)),Bt=null;return}r.flags&32768?(Kt||h===1?s=!0:ou||(Xt&536870912)!==0?s=!1:(qa=s=!0,(h===2||h===9||h===3||h===6)&&(h=bs.current,h!==null&&h.tag===13&&(h.flags|=16384))),rC(r,s)):Sm(r)}function Sm(s){var r=s;do{if((r.flags&32768)!==0){rC(r,qa);return}s=r.return;var l=zO(r.alternate,r,Pr);if(l!==null){Bt=l;return}if(r=r.sibling,r!==null){Bt=r;return}Bt=r=s}while(r!==null);Ie===0&&(Ie=5)}function rC(s,r){do{var l=UO(s.alternate,s);if(l!==null){l.flags&=32767,Bt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Bt=s;return}Bt=s=l}while(s!==null);Ie=6,Bt=null}function aC(s,r,l,h,m,v,_,N,F){s.cancelPendingCommit=null;do Em();while(Qe!==0);if((oe&6)!==0)throw Error(n(327));if(r!==null){if(r===s.current)throw Error(n(177));if(v=r.lanes|r.childLanes,v|=Gb,Mg(s,l,v,_,N,F),s===we&&(Bt=we=null,Xt=0),cu=r,Xa=s,Fr=l,J0=v,tx=m,KE=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,ZO(di,function(){return hC(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=z.T,z.T=null,m=q.p,q.p=2,_=oe,oe|=4;try{BO(s,r,l)}finally{oe=_,q.p=m,z.T=h}}Qe=1,oC(),lC(),cC()}}function oC(){if(Qe===1){Qe=0;var s=Xa,r=cu,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=z.T,z.T=null;var h=q.p;q.p=2;var m=oe;oe|=4;try{BE(r,s);var v=gx,_=XS(s.containerInfo),N=v.focusedElem,F=v.selectionRange;if(_!==N&&N&&N.ownerDocument&&$S(N.ownerDocument.documentElement,N)){if(F!==null&&Ub(N)){var K=F.start,et=F.end;if(et===void 0&&(et=K),"selectionStart"in N)N.selectionStart=K,N.selectionEnd=Math.min(et,N.value.length);else{var rt=N.ownerDocument||document,Q=rt&&rt.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),mt=N.textContent.length,Tt=Math.min(F.start,mt),ye=F.end===void 0?Tt:Math.min(F.end,mt);!J.extend&&Tt>ye&&(_=ye,ye=Tt,Tt=_);var V=GS(N,Tt),B=GS(N,ye);if(V&&B&&(J.rangeCount!==1||J.anchorNode!==V.node||J.anchorOffset!==V.offset||J.focusNode!==B.node||J.focusOffset!==B.offset)){var Y=rt.createRange();Y.setStart(V.node,V.offset),J.removeAllRanges(),Tt>ye?(J.addRange(Y),J.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),J.addRange(Y))}}}}for(rt=[],J=N;J=J.parentNode;)J.nodeType===1&&rt.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<rt.length;N++){var it=rt[N];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}Fm=!!px,gx=px=null}finally{oe=m,q.p=h,z.T=l}}s.current=r,Qe=2}}function lC(){if(Qe===2){Qe=0;var s=Xa,r=cu,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=z.T,z.T=null;var h=q.p;q.p=2;var m=oe;oe|=4;try{PE(s,r.alternate,r)}finally{oe=m,q.p=h,z.T=l}}Qe=3}}function cC(){if(Qe===4||Qe===3){Qe=0,$o();var s=Xa,r=cu,l=Fr,h=KE;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Qe=5:(Qe=0,cu=Xa=null,uC(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&($a=null),wb(l),r=r.stateNode,$n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Xo,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=z.T,m=q.p,q.p=2,z.T=null;try{for(var v=s.onRecoverableError,_=0;_<h.length;_++){var N=h[_];v(N.value,{componentStack:N.stack})}}finally{z.T=r,q.p=m}}(Fr&3)!==0&&Em(),Bi(s),m=s.pendingLanes,(l&261930)!==0&&(m&42)!==0?s===ex?Pd++:(Pd=0,ex=s):Pd=0,Fd(0)}}function uC(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,yd(r)))}function Em(){return oC(),lC(),cC(),hC()}function hC(){if(Qe!==5)return!1;var s=Xa,r=J0;J0=0;var l=wb(Fr),h=z.T,m=q.p;try{q.p=32>l?32:l,z.T=null,l=tx,tx=null;var v=Xa,_=Fr;if(Qe=0,cu=Xa=null,Fr=0,(oe&6)!==0)throw Error(n(331));var N=oe;if(oe|=4,$E(v.current),VE(v,v.current,_,l),oe=N,Fd(0,!1),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Xo,v)}catch{}return!0}finally{q.p=m,z.T=h,uC(s,r)}}function dC(s,r,l){r=Gs(l,r),r=L0(s.stateNode,r,2),s=Ua(s,r,2),s!==null&&(xr(s,2),Bi(s))}function de(s,r,l){if(s.tag===3)dC(s,s,l);else for(;r!==null;){if(r.tag===3){dC(r,s,l);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&($a===null||!$a.has(h))){s=Gs(l,s),l=fE(2),h=Ua(r,l,2),h!==null&&(pE(l,h,r,s),xr(h,2),Bi(h));break}}r=r.return}}function ix(s,r,l){var h=s.pingCache;if(h===null){h=s.pingCache=new qO;var m=new Set;h.set(r,m)}else m=h.get(r),m===void 0&&(m=new Set,h.set(r,m));m.has(l)||(W0=!0,m.add(l),s=KO.bind(null,s,r,l),r.then(s,s))}function KO(s,r,l){var h=s.pingCache;h!==null&&h.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,we===s&&(Xt&l)===l&&(Ie===4||Ie===3&&(Xt&62914560)===Xt&&300>vn()-bm?(oe&2)===0&&uu(s,0):Q0|=l,lu===Xt&&(lu=0)),Bi(s)}function fC(s,r){r===0&&(r=Te()),s=Jo(s,r),s!==null&&(xr(s,r),Bi(s))}function WO(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),fC(s,l)}function QO(s,r){var l=0;switch(s.tag){case 31:case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(r),fC(s,l)}function ZO(s,r){return br(s,r)}var Cm=null,du=null,rx=!1,Tm=!1,ax=!1,Ka=0;function Bi(s){s!==du&&s.next===null&&(du===null?Cm=du=s:du=du.next=s),Tm=!0,rx||(rx=!0,tj())}function Fd(s,r){if(!ax&&Tm){ax=!0;do for(var l=!1,h=Cm;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var v=0;else{var _=h.suspendedLanes,N=h.pingedLanes;v=(1<<31-Xn(42|s)+1)-1,v&=m&~(_&~N),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,yC(h,v))}else v=Xt,v=jt(h,h===we?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||kt(h,v)||(l=!0,yC(h,v));h=h.next}while(l);ax=!1}}function JO(){pC()}function pC(){Tm=rx=!1;var s=0;Ka!==0&&uj()&&(s=Ka);for(var r=vn(),l=null,h=Cm;h!==null;){var m=h.next,v=gC(h,r);v===0?(h.next=null,l===null?Cm=m:l.next=m,m===null&&(du=l)):(l=h,(s!==0||(v&3)!==0)&&(Tm=!0)),h=m}Qe!==0&&Qe!==5||Fd(s),Ka!==0&&(Ka=0)}function gC(s,r){for(var l=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var _=31-Xn(v),N=1<<_,F=m[_];F===-1?((N&l)===0||(N&h)!==0)&&(m[_]=Oe(N,r)):F<=r&&(s.expiredLanes|=N),v&=~N}if(r=we,l=Xt,l=jt(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,l===0||s===r&&(he===2||he===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&ms(h),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||kt(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(h!==null&&ms(h),wb(l)){case 2:case 8:l=Gn;break;case 32:l=di;break;case 268435456:l=Ma;break;default:l=di}return h=mC.bind(null,s),l=br(l,h),s.callbackPriority=r,s.callbackNode=l,r}return h!==null&&h!==null&&ms(h),s.callbackPriority=2,s.callbackNode=null,2}function mC(s,r){if(Qe!==0&&Qe!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Em()&&s.callbackNode!==l)return null;var h=Xt;return h=jt(s,s===we?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(QE(s,h,r),gC(s,vn()),s.callbackNode!=null&&s.callbackNode===l?mC.bind(null,s):null)}function yC(s,r){if(Em())return null;QE(s,r,!0)}function tj(){dj(function(){(oe&6)!==0?br(Dc,JO):pC()})}function ox(){if(Ka===0){var s=Qc;s===0&&(s=Yo,Yo<<=1,(Yo&261888)===0&&(Yo=256)),Ka=s}return Ka}function vC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:jg(""+s)}function bC(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function ej(s,r,l,h,m){if(r==="submit"&&l&&l.stateNode===m){var v=vC((m[ns]||null).action),_=h.submitter;_&&(r=(r=_[ns]||null)?vC(r.formAction):_.getAttribute("formAction"),r!==null&&(v=r,_=null));var N=new zg("action","action",null,h,m);s.push({event:N,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ka!==0){var F=_?bC(m,_):new FormData(m);T0(l,{pending:!0,data:F,method:m.method,action:v},null,F)}}else typeof v=="function"&&(N.preventDefault(),F=_?bC(m,_):new FormData(m),T0(l,{pending:!0,data:F,method:m.method,action:v},v,F))},currentTarget:m}]})}}for(var lx=0;lx<qb.length;lx++){var cx=qb[lx],nj=cx.toLowerCase(),sj=cx[0].toUpperCase()+cx.slice(1);fi(nj,"on"+sj)}fi(WS,"onAnimationEnd"),fi(QS,"onAnimationIteration"),fi(ZS,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(bO,"onTransitionRun"),fi(xO,"onTransitionStart"),fi(wO,"onTransitionCancel"),fi(JS,"onTransitionEnd"),Fc("onMouseEnter",["mouseout","mouseover"]),Fc("onMouseLeave",["mouseout","mouseover"]),Fc("onPointerEnter",["pointerout","pointerover"]),Fc("onPointerLeave",["pointerout","pointerover"]),Ko("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ko("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ko("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ko("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ko("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ko("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ij=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Id));function xC(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],m=h.event;h=h.listeners;t:{var v=void 0;if(r)for(var _=h.length-1;0<=_;_--){var N=h[_],F=N.instance,K=N.currentTarget;if(N=N.listener,F!==v&&m.isPropagationStopped())break t;v=N,m.currentTarget=K;try{v(m)}catch(et){Hg(et)}m.currentTarget=null,v=F}else for(_=0;_<h.length;_++){if(N=h[_],F=N.instance,K=N.currentTarget,N=N.listener,F!==v&&m.isPropagationStopped())break t;v=N,m.currentTarget=K;try{v(m)}catch(et){Hg(et)}m.currentTarget=null,v=F}}}}function Ht(s,r){var l=r[Ab];l===void 0&&(l=r[Ab]=new Set);var h=s+"__bubble";l.has(h)||(wC(r,s,2,!1),l.add(h))}function ux(s,r,l){var h=0;r&&(h|=4),wC(l,s,h,r)}var km="_reactListening"+Math.random().toString(36).slice(2);function hx(s){if(!s[km]){s[km]=!0,pS.forEach(function(l){l!=="selectionchange"&&(ij.has(l)||ux(l,!1,s),ux(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[km]||(r[km]=!0,ux("selectionchange",!1,r))}}function wC(s,r,l,h){switch(WC(r)){case 2:var m=Dj;break;case 8:m=Lj;break;default:m=Cx}l=m.bind(null,r,l,s),m=void 0,!Mb||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(r,l,{capture:!0,passive:m}):s.addEventListener(r,l,!0):m!==void 0?s.addEventListener(r,l,{passive:m}):s.addEventListener(r,l,!1)}function dx(s,r,l,h,m){var v=h;if((r&1)===0&&(r&2)===0&&h!==null)t:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var N=h.stateNode.containerInfo;if(N===m)break;if(_===4)for(_=h.return;_!==null;){var F=_.tag;if((F===3||F===4)&&_.stateNode.containerInfo===m)return;_=_.return}for(;N!==null;){if(_=Oc(N),_===null)return;if(F=_.tag,F===5||F===6||F===26||F===27){h=v=_;continue t}N=N.parentNode}}h=h.return}CS(function(){var K=v,et=Rb(l),rt=[];t:{var Q=t1.get(s);if(Q!==void 0){var J=zg,mt=s;switch(s){case"keypress":if(Fg(l)===0)break t;case"keydown":case"keyup":J=QL;break;case"focusin":mt="focus",J=jb;break;case"focusout":mt="blur",J=jb;break;case"beforeblur":case"afterblur":J=jb;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=RS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=zL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=tO;break;case WS:case QS:case ZS:J=HL;break;case JS:J=nO;break;case"scroll":case"scrollend":J=FL;break;case"wheel":J=iO;break;case"copy":case"cut":case"paste":J=qL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=MS;break;case"toggle":case"beforetoggle":J=aO}var Tt=(r&4)!==0,ye=!Tt&&(s==="scroll"||s==="scrollend"),V=Tt?Q!==null?Q+"Capture":null:Q;Tt=[];for(var B=K,Y;B!==null;){var it=B;if(Y=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||Y===null||V===null||(it=ad(B,V),it!=null&&Tt.push(zd(B,it,Y))),ye)break;B=B.return}0<Tt.length&&(Q=new J(Q,mt,null,l,et),rt.push({event:Q,listeners:Tt}))}}if((r&7)===0){t:{if(Q=s==="mouseover"||s==="pointerover",J=s==="mouseout"||s==="pointerout",Q&&l!==kb&&(mt=l.relatedTarget||l.fromElement)&&(Oc(mt)||mt[Lc]))break t;if((J||Q)&&(Q=et.window===et?et:(Q=et.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(mt=l.relatedTarget||l.toElement,J=K,mt=mt?Oc(mt):null,mt!==null&&(ye=o(mt),Tt=mt.tag,mt!==ye||Tt!==5&&Tt!==27&&Tt!==6)&&(mt=null)):(J=null,mt=K),J!==mt)){if(Tt=RS,it="onMouseLeave",V="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Tt=MS,it="onPointerLeave",V="onPointerEnter",B="pointer"),ye=J==null?Q:rd(J),Y=mt==null?Q:rd(mt),Q=new Tt(it,B+"leave",J,l,et),Q.target=ye,Q.relatedTarget=Y,it=null,Oc(et)===K&&(Tt=new Tt(V,B+"enter",mt,l,et),Tt.target=Y,Tt.relatedTarget=ye,it=Tt),ye=it,J&&mt)e:{for(Tt=rj,V=J,B=mt,Y=0,it=V;it;it=Tt(it))Y++;it=0;for(var St=B;St;St=Tt(St))it++;for(;0<Y-it;)V=Tt(V),Y--;for(;0<it-Y;)B=Tt(B),it--;for(;Y--;){if(V===B||B!==null&&V===B.alternate){Tt=V;break e}V=Tt(V),B=Tt(B)}Tt=null}else Tt=null;J!==null&&AC(rt,Q,J,Tt,!1),mt!==null&&ye!==null&&AC(rt,ye,mt,Tt,!0)}}t:{if(Q=K?rd(K):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var se=zS;else if(FS(Q))if(US)se=mO;else{se=pO;var xt=fO}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&Tb(K.elementType)&&(se=zS):se=gO;if(se&&(se=se(s,K))){IS(rt,se,l,et);break t}xt&&xt(s,Q,K),s==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Cb(Q,"number",Q.value)}switch(xt=K?rd(K):window,s){case"focusin":(FS(xt)||xt.contentEditable==="true")&&(Vc=xt,Bb=K,pd=null);break;case"focusout":pd=Bb=Vc=null;break;case"mousedown":Hb=!0;break;case"contextmenu":case"mouseup":case"dragend":Hb=!1,YS(rt,l,et);break;case"selectionchange":if(vO)break;case"keydown":case"keyup":YS(rt,l,et)}var Pt;if(Fb)t:{switch(s){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else Hc?jS(s,l)&&(Yt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Yt="onCompositionStart");Yt&&(DS&&l.locale!=="ko"&&(Hc||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Hc&&(Pt=TS()):(La=et,Db="value"in La?La.value:La.textContent,Hc=!0)),xt=Rm(K,Yt),0<xt.length&&(Yt=new NS(Yt,s,null,l,et),rt.push({event:Yt,listeners:xt}),Pt?Yt.data=Pt:(Pt=PS(l),Pt!==null&&(Yt.data=Pt)))),(Pt=lO?cO(s,l):uO(s,l))&&(Yt=Rm(K,"onBeforeInput"),0<Yt.length&&(xt=new NS("onBeforeInput","beforeinput",null,l,et),rt.push({event:xt,listeners:Yt}),xt.data=Pt)),ej(rt,s,K,l,et)}xC(rt,r)})}function zd(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Rm(s,r){for(var l=r+"Capture",h=[];s!==null;){var m=s,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=ad(s,l),m!=null&&h.unshift(zd(s,m,v)),m=ad(s,r),m!=null&&h.push(zd(s,m,v))),s.tag===3)return h;s=s.return}return[]}function rj(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function AC(s,r,l,h,m){for(var v=r._reactName,_=[];l!==null&&l!==h;){var N=l,F=N.alternate,K=N.stateNode;if(N=N.tag,F!==null&&F===h)break;N!==5&&N!==26&&N!==27||K===null||(F=K,m?(K=ad(l,v),K!=null&&_.unshift(zd(l,K,F))):m||(K=ad(l,v),K!=null&&_.push(zd(l,K,F)))),l=l.return}_.length!==0&&s.push({event:r,listeners:_})}var aj=/\r\n?/g,oj=/\u0000|\uFFFD/g;function _C(s){return(typeof s=="string"?s:""+s).replace(aj,`
`).replace(oj,"")}function SC(s,r){return r=_C(r),_C(s)===r}function me(s,r,l,h,m,v){switch(l){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||zc(s,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&zc(s,""+h);break;case"className":Lg(s,"class",h);break;case"tabIndex":Lg(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Lg(s,l,h);break;case"style":SS(s,h,v);break;case"data":if(r!=="object"){Lg(s,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=jg(""+h),s.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&me(s,r,"name",m.name,m,null),me(s,r,"formEncType",m.formEncType,m,null),me(s,r,"formMethod",m.formMethod,m,null),me(s,r,"formTarget",m.formTarget,m,null)):(me(s,r,"encType",m.encType,m,null),me(s,r,"method",m.method,m,null),me(s,r,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=jg(""+h),s.setAttribute(l,h);break;case"onClick":h!=null&&(s.onclick=Ar);break;case"onScroll":h!=null&&Ht("scroll",s);break;case"onScrollEnd":h!=null&&Ht("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}l=jg(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""+h):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":h===!0?s.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,h):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(l,h):s.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(l):s.setAttribute(l,h);break;case"popover":Ht("beforetoggle",s),Ht("toggle",s),Dg(s,"popover",h);break;case"xlinkActuate":wr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":wr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":wr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":wr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":wr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":wr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":wr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":wr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":wr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Dg(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=jL.get(l)||l,Dg(s,l,h))}}function fx(s,r,l,h,m,v){switch(l){case"style":SS(s,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"children":typeof h=="string"?zc(s,h):(typeof h=="number"||typeof h=="bigint")&&zc(s,""+h);break;case"onScroll":h!=null&&Ht("scroll",s);break;case"onScrollEnd":h!=null&&Ht("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gS.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),r=l.slice(2,m?l.length-7:void 0),v=s[ns]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(r,v,m),typeof h=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,h,m);break t}l in s?s[l]=h:h===!0?s.setAttribute(l,""):Dg(s,l,h)}}}function _n(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",s),Ht("load",s);var h=!1,m=!1,v;for(v in l)if(l.hasOwnProperty(v)){var _=l[v];if(_!=null)switch(v){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:me(s,r,v,_,l,null)}}m&&me(s,r,"srcSet",l.srcSet,l,null),h&&me(s,r,"src",l.src,l,null);return;case"input":Ht("invalid",s);var N=v=_=m=null,F=null,K=null;for(h in l)if(l.hasOwnProperty(h)){var et=l[h];if(et!=null)switch(h){case"name":m=et;break;case"type":_=et;break;case"checked":F=et;break;case"defaultChecked":K=et;break;case"value":v=et;break;case"defaultValue":N=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,r));break;default:me(s,r,h,et,l,null)}}xS(s,v,N,F,K,_,m,!1);return;case"select":Ht("invalid",s),h=_=v=null;for(m in l)if(l.hasOwnProperty(m)&&(N=l[m],N!=null))switch(m){case"value":v=N;break;case"defaultValue":_=N;break;case"multiple":h=N;default:me(s,r,m,N,l,null)}r=v,l=_,s.multiple=!!h,r!=null?Ic(s,!!h,r,!1):l!=null&&Ic(s,!!h,l,!0);return;case"textarea":Ht("invalid",s),v=m=h=null;for(_ in l)if(l.hasOwnProperty(_)&&(N=l[_],N!=null))switch(_){case"value":h=N;break;case"defaultValue":m=N;break;case"children":v=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:me(s,r,_,N,l,null)}AS(s,h,m,v);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(h=l[F],h!=null))switch(F){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:me(s,r,F,h,l,null)}return;case"dialog":Ht("beforetoggle",s),Ht("toggle",s),Ht("cancel",s),Ht("close",s);break;case"iframe":case"object":Ht("load",s);break;case"video":case"audio":for(h=0;h<Id.length;h++)Ht(Id[h],s);break;case"image":Ht("error",s),Ht("load",s);break;case"details":Ht("toggle",s);break;case"embed":case"source":case"link":Ht("error",s),Ht("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(h=l[K],h!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:me(s,r,K,h,l,null)}return;default:if(Tb(r)){for(et in l)l.hasOwnProperty(et)&&(h=l[et],h!==void 0&&fx(s,r,et,h,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(h=l[N],h!=null&&me(s,r,N,h,l,null))}function lj(s,r,l,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,_=null,N=null,F=null,K=null,et=null;for(J in l){var rt=l[J];if(l.hasOwnProperty(J)&&rt!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":F=rt;default:h.hasOwnProperty(J)||me(s,r,J,null,h,rt)}}for(var Q in h){var J=h[Q];if(rt=l[Q],h.hasOwnProperty(Q)&&(J!=null||rt!=null))switch(Q){case"type":v=J;break;case"name":m=J;break;case"checked":K=J;break;case"defaultChecked":et=J;break;case"value":_=J;break;case"defaultValue":N=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,r));break;default:J!==rt&&me(s,r,Q,J,h,rt)}}Eb(s,_,N,F,K,et,v,m);return;case"select":J=_=N=Q=null;for(v in l)if(F=l[v],l.hasOwnProperty(v)&&F!=null)switch(v){case"value":break;case"multiple":J=F;default:h.hasOwnProperty(v)||me(s,r,v,null,h,F)}for(m in h)if(v=h[m],F=l[m],h.hasOwnProperty(m)&&(v!=null||F!=null))switch(m){case"value":Q=v;break;case"defaultValue":N=v;break;case"multiple":_=v;default:v!==F&&me(s,r,m,v,h,F)}r=N,l=_,h=J,Q!=null?Ic(s,!!l,Q,!1):!!h!=!!l&&(r!=null?Ic(s,!!l,r,!0):Ic(s,!!l,l?[]:"",!1));return;case"textarea":J=Q=null;for(N in l)if(m=l[N],l.hasOwnProperty(N)&&m!=null&&!h.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:me(s,r,N,null,h,m)}for(_ in h)if(m=h[_],v=l[_],h.hasOwnProperty(_)&&(m!=null||v!=null))switch(_){case"value":Q=m;break;case"defaultValue":J=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==v&&me(s,r,_,m,h,v)}wS(s,Q,J);return;case"option":for(var mt in l)if(Q=l[mt],l.hasOwnProperty(mt)&&Q!=null&&!h.hasOwnProperty(mt))switch(mt){case"selected":s.selected=!1;break;default:me(s,r,mt,null,h,Q)}for(F in h)if(Q=h[F],J=l[F],h.hasOwnProperty(F)&&Q!==J&&(Q!=null||J!=null))switch(F){case"selected":s.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:me(s,r,F,Q,h,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in l)Q=l[Tt],l.hasOwnProperty(Tt)&&Q!=null&&!h.hasOwnProperty(Tt)&&me(s,r,Tt,null,h,Q);for(K in h)if(Q=h[K],J=l[K],h.hasOwnProperty(K)&&Q!==J&&(Q!=null||J!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,r));break;default:me(s,r,K,Q,h,J)}return;default:if(Tb(r)){for(var ye in l)Q=l[ye],l.hasOwnProperty(ye)&&Q!==void 0&&!h.hasOwnProperty(ye)&&fx(s,r,ye,void 0,h,Q);for(et in h)Q=h[et],J=l[et],!h.hasOwnProperty(et)||Q===J||Q===void 0&&J===void 0||fx(s,r,et,Q,h,J);return}}for(var V in l)Q=l[V],l.hasOwnProperty(V)&&Q!=null&&!h.hasOwnProperty(V)&&me(s,r,V,null,h,Q);for(rt in h)Q=h[rt],J=l[rt],!h.hasOwnProperty(rt)||Q===J||Q==null&&J==null||me(s,r,rt,Q,h,J)}function EC(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cj(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var m=l[h],v=m.transferSize,_=m.initiatorType,N=m.duration;if(v&&N&&EC(_)){for(_=0,N=m.responseEnd,h+=1;h<l.length;h++){var F=l[h],K=F.startTime;if(K>N)break;var et=F.transferSize,rt=F.initiatorType;et&&EC(rt)&&(F=F.responseEnd,_+=et*(F<N?1:(N-K)/(F-K)))}if(--h,r+=8*(v+_)/(m.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var px=null,gx=null;function Nm(s){return s.nodeType===9?s:s.ownerDocument}function CC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TC(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function mx(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var yx=null;function uj(){var s=window.event;return s&&s.type==="popstate"?s===yx?!1:(yx=s,!0):(yx=null,!1)}var kC=typeof setTimeout=="function"?setTimeout:void 0,hj=typeof clearTimeout=="function"?clearTimeout:void 0,RC=typeof Promise=="function"?Promise:void 0,dj=typeof queueMicrotask=="function"?queueMicrotask:typeof RC<"u"?function(s){return RC.resolve(null).then(s).catch(fj)}:kC;function fj(s){setTimeout(function(){throw s})}function Wa(s){return s==="head"}function NC(s,r){var l=r,h=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(h===0){s.removeChild(m),mu(r);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")Ud(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Ud(l);for(var v=l.firstChild;v;){var _=v.nextSibling,N=v.nodeName;v[id]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=_}}else l==="body"&&Ud(s.ownerDocument.body);l=m}while(l);mu(r)}function MC(s,r){var l=s;s=0;do{var h=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=h}while(l)}function vx(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":vx(l),_b(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function pj(s,r,l,h){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[id])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Ws(s.nextSibling),s===null)break}return null}function gj(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Ws(s.nextSibling),s===null))return null;return s}function DC(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Ws(s.nextSibling),s===null))return null;return s}function bx(s){return s.data==="$?"||s.data==="$~"}function xx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function mj(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var h=function(){r(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Ws(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var wx=null;function LC(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Ws(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function OC(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function jC(s,r,l){switch(r=Nm(l),s){case"html":if(s=r.documentElement,!s)throw Error(n(452));return s;case"head":if(s=r.head,!s)throw Error(n(453));return s;case"body":if(s=r.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Ud(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);_b(s)}var Qs=new Map,PC=new Set;function Mm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ir=q.d;q.d={f:yj,r:vj,D:bj,C:xj,L:wj,m:Aj,X:Sj,S:_j,M:Ej};function yj(){var s=Ir.f(),r=Am();return s||r}function vj(s){var r=jc(s);r!==null&&r.tag===5&&r.type==="form"?J1(r):Ir.r(s)}var fu=typeof document>"u"?null:document;function FC(s,r,l){var h=fu;if(h&&typeof r=="string"&&r){var m=Vs(r);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),PC.has(m)||(PC.add(m),s={rel:s,crossOrigin:l,href:r},h.querySelector(m)===null&&(r=h.createElement("link"),_n(r,"link",s),un(r),h.head.appendChild(r)))}}function bj(s){Ir.D(s),FC("dns-prefetch",s,null)}function xj(s,r){Ir.C(s,r),FC("preconnect",s,r)}function wj(s,r,l){Ir.L(s,r,l);var h=fu;if(h&&s&&r){var m='link[rel="preload"][as="'+Vs(r)+'"]';r==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Vs(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Vs(l.imageSizes)+'"]')):m+='[href="'+Vs(s)+'"]';var v=m;switch(r){case"style":v=pu(s);break;case"script":v=gu(s)}Qs.has(v)||(s=y({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Qs.set(v,s),h.querySelector(m)!==null||r==="style"&&h.querySelector(Bd(v))||r==="script"&&h.querySelector(Hd(v))||(r=h.createElement("link"),_n(r,"link",s),un(r),h.head.appendChild(r)))}}function Aj(s,r){Ir.m(s,r);var l=fu;if(l&&s){var h=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Vs(h)+'"][href="'+Vs(s)+'"]',v=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=gu(s)}if(!Qs.has(v)&&(s=y({rel:"modulepreload",href:s},r),Qs.set(v,s),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Hd(v)))return}h=l.createElement("link"),_n(h,"link",s),un(h),l.head.appendChild(h)}}}function _j(s,r,l){Ir.S(s,r,l);var h=fu;if(h&&s){var m=Pc(h).hoistableStyles,v=pu(s);r=r||"default";var _=m.get(v);if(!_){var N={loading:0,preload:null};if(_=h.querySelector(Bd(v)))N.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Qs.get(v))&&Ax(s,l);var F=_=h.createElement("link");un(F),_n(F,"link",s),F._p=new Promise(function(K,et){F.onload=K,F.onerror=et}),F.addEventListener("load",function(){N.loading|=1}),F.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Dm(_,r,h)}_={type:"stylesheet",instance:_,count:1,state:N},m.set(v,_)}}}function Sj(s,r){Ir.X(s,r);var l=fu;if(l&&s){var h=Pc(l).hoistableScripts,m=gu(s),v=h.get(m);v||(v=l.querySelector(Hd(m)),v||(s=y({src:s,async:!0},r),(r=Qs.get(m))&&_x(s,r),v=l.createElement("script"),un(v),_n(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function Ej(s,r){Ir.M(s,r);var l=fu;if(l&&s){var h=Pc(l).hoistableScripts,m=gu(s),v=h.get(m);v||(v=l.querySelector(Hd(m)),v||(s=y({src:s,async:!0,type:"module"},r),(r=Qs.get(m))&&_x(s,r),v=l.createElement("script"),un(v),_n(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function IC(s,r,l,h){var m=(m=wt.current)?Mm(m):null;if(!m)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=pu(l.href),l=Pc(m).hoistableStyles,h=l.get(r),h||(h={type:"style",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=pu(l.href);var v=Pc(m).hoistableStyles,_=v.get(s);if(_||(m=m.ownerDocument||m,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,_),(v=m.querySelector(Bd(s)))&&!v._p&&(_.instance=v,_.state.loading=5),Qs.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qs.set(s,l),v||Cj(m,s,l,_.state))),r&&h===null)throw Error(n(528,""));return _}if(r&&h!==null)throw Error(n(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=gu(l),l=Pc(m).hoistableScripts,h=l.get(r),h||(h={type:"script",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function pu(s){return'href="'+Vs(s)+'"'}function Bd(s){return'link[rel="stylesheet"]['+s+"]"}function zC(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function Cj(s,r,l,h){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=s.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),_n(r,"link",l),un(r),s.head.appendChild(r))}function gu(s){return'[src="'+Vs(s)+'"]'}function Hd(s){return"script[async]"+s}function UC(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var h=s.querySelector('style[data-href~="'+Vs(l.href)+'"]');if(h)return r.instance=h,un(h),h;var m=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),un(h),_n(h,"style",m),Dm(h,l.precedence,s),r.instance=h;case"stylesheet":m=pu(l.href);var v=s.querySelector(Bd(m));if(v)return r.state.loading|=4,r.instance=v,un(v),v;h=zC(l),(m=Qs.get(m))&&Ax(h,m),v=(s.ownerDocument||s).createElement("link"),un(v);var _=v;return _._p=new Promise(function(N,F){_.onload=N,_.onerror=F}),_n(v,"link",h),r.state.loading|=4,Dm(v,l.precedence,s),r.instance=v;case"script":return v=gu(l.src),(m=s.querySelector(Hd(v)))?(r.instance=m,un(m),m):(h=l,(m=Qs.get(v))&&(h=y({},l),_x(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),un(m),_n(m,"link",h),s.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Dm(h,l.precedence,s));return r.instance}function Dm(s,r,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,v=m,_=0;_<h.length;_++){var N=h[_];if(N.dataset.precedence===r)v=N;else if(v!==m)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Ax(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function _x(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Lm=null;function BC(s,r,l){if(Lm===null){var h=new Map,m=Lm=new Map;m.set(l,h)}else m=Lm,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(s))return h;for(h.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var v=l[m];if(!(v[id]||v[bn]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var _=v.getAttribute(r)||"";_=s+_;var N=h.get(_);N?N.push(v):h.set(_,[v])}}return h}function HC(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function Tj(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function VC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function kj(s,r,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=pu(h.href),v=r.querySelector(Bd(m));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Om.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=v,un(v);return}v=r.ownerDocument||r,h=zC(h),(m=Qs.get(m))&&Ax(h,m),v=v.createElement("link"),un(v);var _=v;_._p=new Promise(function(N,F){_.onload=N,_.onerror=F}),_n(v,"link",h),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Om.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Sx=0;function Rj(s,r){return s.stylesheets&&s.count===0&&Pm(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var h=setTimeout(function(){if(s.stylesheets&&Pm(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+r);0<s.imgBytes&&Sx===0&&(Sx=62500*cj());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Pm(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>Sx?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function Om(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var jm=null;function Pm(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,jm=new Map,r.forEach(Nj,s),jm=null,Om.call(s))}function Nj(s,r){if(!(r.state.loading&4)){var l=jm.get(s);if(l)var h=l.get(null);else{l=new Map,jm.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var _=m[v];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),h=_)}h&&l.set(null,h)}m=r.instance,_=m.getAttribute("data-precedence"),v=l.get(_)||h,v===h&&l.set(null,m),l.set(_,m),this.count++,h=Om.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),v?v.parentNode.insertBefore(m,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),r.state.loading|=4}}var Vd={$$typeof:L,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Mj(s,r,l,h,m,v,_,N,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bs(0),this.hiddenUpdates=Bs(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function qC(s,r,l,h,m,v,_,N,F,K,et,rt){return s=new Mj(s,r,l,_,F,K,et,rt,N),r=1,v===!0&&(r|=24),v=vs(3,null,null,r),s.current=v,v.stateNode=s,r=s0(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:h,isDehydrated:l,cache:r},o0(v),s}function GC(s){return s?(s=$c,s):$c}function $C(s,r,l,h,m,v){m=GC(m),h.context===null?h.context=m:h.pendingContext=m,h=za(r),h.payload={element:l},v=v===void 0?null:v,v!==null&&(h.callback=v),l=Ua(s,h,r),l!==null&&(ls(l,s,r),wd(l,s,r))}function XC(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Ex(s,r){XC(s,r),(s=s.alternate)&&XC(s,r)}function YC(s){if(s.tag===13||s.tag===31){var r=Jo(s,67108864);r!==null&&ls(r,s,67108864),Ex(s,67108864)}}function KC(s){if(s.tag===13||s.tag===31){var r=_s();r=xb(r);var l=Jo(s,r);l!==null&&ls(l,s,r),Ex(s,r)}}var Fm=!0;function Dj(s,r,l,h){var m=z.T;z.T=null;var v=q.p;try{q.p=2,Cx(s,r,l,h)}finally{q.p=v,z.T=m}}function Lj(s,r,l,h){var m=z.T;z.T=null;var v=q.p;try{q.p=8,Cx(s,r,l,h)}finally{q.p=v,z.T=m}}function Cx(s,r,l,h){if(Fm){var m=Tx(h);if(m===null)dx(s,r,h,Im,l),QC(s,h);else if(jj(m,s,r,l,h))h.stopPropagation();else if(QC(s,h),r&4&&-1<Oj.indexOf(s)){for(;m!==null;){var v=jc(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var _=gt(v.pendingLanes);if(_!==0){var N=v;for(N.pendingLanes|=2,N.entangledLanes|=2;_;){var F=1<<31-Xn(_);N.entanglements[1]|=F,_&=~F}Bi(v),(oe&6)===0&&(xm=vn()+500,Fd(0))}}break;case 31:case 13:N=Jo(v,2),N!==null&&ls(N,v,2),Am(),Ex(v,2)}if(v=Tx(h),v===null&&dx(s,r,h,Im,l),v===m)break;m=v}m!==null&&h.stopPropagation()}else dx(s,r,h,null,l)}}function Tx(s){return s=Rb(s),kx(s)}var Im=null;function kx(s){if(Im=null,s=Oc(s),s!==null){var r=o(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=c(r),s!==null)return s;s=null}else if(l===31){if(s=u(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Im=s,null}function WC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nd()){case Dc:return 2;case Gn:return 8;case di:case Na:return 32;case Ma:return 268435456;default:return 32}default:return 32}}var Rx=!1,Qa=null,Za=null,Ja=null,qd=new Map,Gd=new Map,to=[],Oj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function QC(s,r){switch(s){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":qd.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gd.delete(r.pointerId)}}function $d(s,r,l,h,m,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},r!==null&&(r=jc(r),r!==null&&YC(r)),s):(s.eventSystemFlags|=h,r=s.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),s)}function jj(s,r,l,h,m){switch(r){case"focusin":return Qa=$d(Qa,s,r,l,h,m),!0;case"dragenter":return Za=$d(Za,s,r,l,h,m),!0;case"mouseover":return Ja=$d(Ja,s,r,l,h,m),!0;case"pointerover":var v=m.pointerId;return qd.set(v,$d(qd.get(v)||null,s,r,l,h,m)),!0;case"gotpointercapture":return v=m.pointerId,Gd.set(v,$d(Gd.get(v)||null,s,r,l,h,m)),!0}return!1}function ZC(s){var r=Oc(s.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){s.blockedOn=r,dS(s.priority,function(){KC(l)});return}}else if(r===31){if(r=u(l),r!==null){s.blockedOn=r,dS(s.priority,function(){KC(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function zm(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Tx(s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);kb=h,l.target.dispatchEvent(h),kb=null}else return r=jc(l),r!==null&&YC(r),s.blockedOn=l,!1;r.shift()}return!0}function JC(s,r,l){zm(s)&&l.delete(r)}function Pj(){Rx=!1,Qa!==null&&zm(Qa)&&(Qa=null),Za!==null&&zm(Za)&&(Za=null),Ja!==null&&zm(Ja)&&(Ja=null),qd.forEach(JC),Gd.forEach(JC)}function Um(s,r){s.blockedOn===r&&(s.blockedOn=null,Rx||(Rx=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Pj)))}var Bm=null;function tT(s){Bm!==s&&(Bm=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Bm===s&&(Bm=null);for(var r=0;r<s.length;r+=3){var l=s[r],h=s[r+1],m=s[r+2];if(typeof h!="function"){if(kx(h||l)===null)continue;break}var v=jc(l);v!==null&&(s.splice(r,3),r-=3,T0(v,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function mu(s){function r(F){return Um(F,s)}Qa!==null&&Um(Qa,s),Za!==null&&Um(Za,s),Ja!==null&&Um(Ja,s),qd.forEach(r),Gd.forEach(r);for(var l=0;l<to.length;l++){var h=to[l];h.blockedOn===s&&(h.blockedOn=null)}for(;0<to.length&&(l=to[0],l.blockedOn===null);)ZC(l),l.blockedOn===null&&to.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],v=l[h+1],_=m[ns]||null;if(typeof v=="function")_||tT(l);else if(_){var N=null;if(v&&v.hasAttribute("formAction")){if(m=v,_=v[ns]||null)N=_.formAction;else if(kx(m)!==null)continue}else N=_.action;typeof N=="function"?l[h+1]=N:(l.splice(h,3),h-=3),tT(l)}}}function eT(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(_){return m=_})},focusReset:"manual",scroll:"manual"})}function r(){m!==null&&(m(),m=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),m!==null&&(m(),m=null)}}}function Nx(s){this._internalRoot=s}Hm.prototype.render=Nx.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(n(409));var l=r.current,h=_s();$C(l,h,s,r,null,null)},Hm.prototype.unmount=Nx.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;$C(s.current,2,null,s,null,null),Am(),r[Lc]=null}};function Hm(s){this._internalRoot=s}Hm.prototype.unstable_scheduleHydration=function(s){if(s){var r=hS();s={blockedOn:null,target:s,priority:r};for(var l=0;l<to.length&&r!==0&&r<to[l].priority;l++);to.splice(l,0,s),l===0&&ZC(s)}};var nT=t.version;if(nT!=="19.2.1")throw Error(n(527,nT,"19.2.1"));q.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=f(r),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var Fj={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vm.isDisabled&&Vm.supportsFiber)try{Xo=Vm.inject(Fj),$n=Vm}catch{}}return Yd.createRoot=function(s,r){if(!a(s))throw Error(n(299));var l=!1,h="",m=cE,v=uE,_=hE;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=qC(s,1,!1,null,null,l,h,null,m,v,_,eT),s[Lc]=r.current,hx(s),new Nx(r)},Yd.hydrateRoot=function(s,r,l){if(!a(s))throw Error(n(299));var h=!1,m="",v=cE,_=uE,N=hE,F=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),r=qC(s,1,!0,r,l??null,h,m,F,v,_,N,eT),r.context=GC(null),l=r.current,h=_s(),h=xb(h),m=za(h),m.callback=null,Ua(l,m,h),l=h,r.current.lanes=l,xr(r,l),Bi(r),s[Lc]=r.current,hx(s),new Hm(r)},Yd.version="19.2.1",Yd}var fT;function Kj(){if(fT)return Ox.exports;fT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Ox.exports=Yj(),Ox.exports}var Wj=Kj();/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pT="popstate";function Qj(i={}){function t(n,a){let{pathname:o,search:c,hash:u}=n.location;return bw("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:Ef(a)}return Jj(t,e,null,i)}function De(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function ci(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Zj(){return Math.random().toString(36).substring(2,10)}function gT(i,t){return{usr:i.state,key:i.key,idx:t}}function bw(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?qh(t):t,state:e,key:t&&t.key||n||Zj()}}function Ef({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function qh(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function Jj(i,t,e,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let C=g(),T=C==null?null:C-f;f=C,d&&d({action:u,location:S.location,delta:T})}function x(C,T){u="PUSH";let R=bw(S.location,C,T);f=g()+1;let L=gT(R,f),j=S.createHref(R);try{c.pushState(L,"",j)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(j)}o&&d&&d({action:u,location:S.location,delta:1})}function w(C,T){u="REPLACE";let R=bw(S.location,C,T);f=g();let L=gT(R,f),j=S.createHref(R);c.replaceState(L,"",j),o&&d&&d({action:u,location:S.location,delta:0})}function A(C){return tP(C)}let S={get action(){return u},get location(){return i(a,c)},listen(C){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(pT,y),d=C,()=>{a.removeEventListener(pT,y),d=null}},createHref(C){return t(a,C)},createURL:A,encodeLocation(C){let T=A(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:w,go(C){return c.go(C)}};return S}function tP(i,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),De(e,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Ef(i);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function uR(i,t,e="/"){return eP(i,t,e,!1)}function eP(i,t,e,n){let a=typeof t=="string"?qh(t):t,o=Sa(a.pathname||"/",e);if(o==null)return null;let c=hR(i);nP(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=fP(o);u=hP(c[d],f,n)}return u}function hR(i,t=[],e=[],n="",a=!1){let o=(c,u,d=a,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;De(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=va([n,g.relativePath]),x=e.concat(g);c.children&&c.children.length>0&&(De(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),hR(c.children,t,x,y,d)),!(c.path==null&&!c.index)&&t.push({path:y,score:cP(y,c.index),routesMeta:x})};return i.forEach((c,u)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))o(c,u);else for(let f of dR(c.path))o(c,u,!0,f)}),t}function dR(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=dR(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...c),u.map(d=>i.startsWith("/")&&d===""?"/":d)}function nP(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:uP(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var sP=/^:[\w-]+$/,iP=3,rP=2,aP=1,oP=10,lP=-2,mT=i=>i==="*";function cP(i,t){let e=i.split("/"),n=e.length;return e.some(mT)&&(n+=lP),t&&(n+=rP),e.filter(a=>!mT(a)).reduce((a,o)=>a+(sP.test(o)?iP:o===""?aP:oP),n)}function uP(i,t){return i.length===t.length&&i.slice(0,-1).every((n,a)=>n===t[a])?i[i.length-1]-t[t.length-1]:0}function hP(i,t,e=!1){let{routesMeta:n}=i,a={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=Yy({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),x=d.route;if(!y&&f&&e&&!n[n.length-1].route.index&&(y=Yy({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:va([o,y.pathname]),pathnameBase:vP(va([o,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(o=va([o,y.pathnameBase]))}return c}function Yy(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=dP(i.path,i.caseSensitive,i.end),a=t.match(e);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},x)=>{if(g==="*"){let A=u[x]||"";c=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const w=u[x];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:i}}function dP(i,t=!1,e=!0){ci(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function fP(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ci(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function Sa(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}var pP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gP=i=>pP.test(i);function mP(i,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof i=="string"?qh(i):i,o;if(e)if(gP(e))o=e;else{if(e.includes("//")){let c=e;e=e.replace(/\/\/+/g,"/"),ci(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${e}`)}e.startsWith("/")?o=yT(e.substring(1),"/"):o=yT(e,t)}else o=t;return{pathname:o,search:bP(n),hash:xP(a)}}function yT(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Ix(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yP(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function u_(i){let t=yP(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function h_(i,t,e,n=!1){let a;typeof i=="string"?a=qh(i):(a={...i},De(!a.pathname||!a.pathname.includes("?"),Ix("?","pathname","search",a)),De(!a.pathname||!a.pathname.includes("#"),Ix("#","pathname","hash",a)),De(!a.search||!a.search.includes("#"),Ix("#","search","hash",a)));let o=i===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=e;else{let y=t.length-1;if(!n&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;a.pathname=x.join("/")}u=y>=0?t[y]:"/"}let d=mP(a,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var va=i=>i.join("/").replace(/\/\/+/g,"/"),vP=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),bP=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,xP=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function wP(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function AP(i){return i.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fR=["POST","PUT","PATCH","DELETE"];new Set(fR);var _P=["GET",...fR];new Set(_P);var Gh=E.createContext(null);Gh.displayName="DataRouter";var Iv=E.createContext(null);Iv.displayName="DataRouterState";E.createContext(!1);var pR=E.createContext({isTransitioning:!1});pR.displayName="ViewTransition";var SP=E.createContext(new Map);SP.displayName="Fetchers";var EP=E.createContext(null);EP.displayName="Await";var ui=E.createContext(null);ui.displayName="Navigation";var gg=E.createContext(null);gg.displayName="Location";var Oi=E.createContext({outlet:null,matches:[],isDataRoute:!1});Oi.displayName="Route";var d_=E.createContext(null);d_.displayName="RouteError";function CP(i,{relative:t}={}){De($h(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=E.useContext(ui),{hash:a,pathname:o,search:c}=mg(i,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:va([e,o])),n.createHref({pathname:u,search:c,hash:a})}function $h(){return E.useContext(gg)!=null}function Bo(){return De($h(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(gg).location}var gR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mR(i){E.useContext(ui).static||E.useLayoutEffect(i)}function Ho(){let{isDataRoute:i}=E.useContext(Oi);return i?UP():TP()}function TP(){De($h(),"useNavigate() may be used only in the context of a <Router> component.");let i=E.useContext(Gh),{basename:t,navigator:e}=E.useContext(ui),{matches:n}=E.useContext(Oi),{pathname:a}=Bo(),o=JSON.stringify(u_(n)),c=E.useRef(!1);return mR(()=>{c.current=!0}),E.useCallback((d,f={})=>{if(ci(c.current,gR),!c.current)return;if(typeof d=="number"){e.go(d);return}let g=h_(d,JSON.parse(o),a,f.relative==="path");i==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:va([t,g.pathname])),(f.replace?e.replace:e.push)(g,f.state,f)},[t,e,o,a,i])}E.createContext(null);function kP(){let{matches:i}=E.useContext(Oi),t=i[i.length-1];return t?t.params:{}}function mg(i,{relative:t}={}){let{matches:e}=E.useContext(Oi),{pathname:n}=Bo(),a=JSON.stringify(u_(e));return E.useMemo(()=>h_(i,JSON.parse(a),n,t==="path"),[i,a,n,t])}function RP(i,t){return yR(i,t)}function yR(i,t,e,n,a){var R;De($h(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=E.useContext(ui),{matches:c}=E.useContext(Oi),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let L=y&&y.path||"";vR(f,!y||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let x=Bo(),w;if(t){let L=typeof t=="string"?qh(t):t;De(g==="/"||((R=L.pathname)==null?void 0:R.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),w=L}else w=x;let A=w.pathname||"/",S=A;if(g!=="/"){let L=g.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(L.length).join("/")}let C=uR(i,{pathname:S});ci(y||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),ci(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=OP(C&&C.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:va([g,o.encodeLocation?o.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:va([g,o.encodeLocation?o.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),c,e,n,a);return t&&T?E.createElement(gg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},T):T}function NP(){let i=zP(),t=wP(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:o},"ErrorBoundary")," or"," ",E.createElement("code",{style:o},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),e?E.createElement("pre",{style:a},e):null,c)}var MP=E.createElement(NP,null),DP=class extends E.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){this.props.onError?this.props.onError(i,t):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?E.createElement(Oi.Provider,{value:this.props.routeContext},E.createElement(d_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LP({routeContext:i,match:t,children:e}){let n=E.useContext(Gh);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Oi.Provider,{value:i},e)}function OP(i,t=[],e=null,n=null,a=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let o=i,c=e==null?void 0:e.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);De(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(e)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:x,errors:w}=e,A=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||A){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=e&&n?(g,y)=>{var x,w;n(g,{location:e.location,params:((w=(x=e.matches)==null?void 0:x[0])==null?void 0:w.params)??{},unstable_pattern:AP(e.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,x)=>{let w,A=!1,S=null,C=null;e&&(w=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||MP,u&&(d<0&&x===0?(vR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,C=null):d===x&&(A=!0,C=y.route.hydrateFallbackElement||null)));let T=t.concat(o.slice(0,x+1)),R=()=>{let L;return w?L=S:A?L=C:y.route.Component?L=E.createElement(y.route.Component,null):y.route.element?L=y.route.element:L=g,E.createElement(LP,{match:y,routeContext:{outlet:g,matches:T,isDataRoute:e!=null},children:L})};return e&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?E.createElement(DP,{location:e.location,revalidation:e.revalidation,component:S,error:w,children:R(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:f}):R()},null)}function f_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jP(i){let t=E.useContext(Gh);return De(t,f_(i)),t}function PP(i){let t=E.useContext(Iv);return De(t,f_(i)),t}function FP(i){let t=E.useContext(Oi);return De(t,f_(i)),t}function p_(i){let t=FP(i),e=t.matches[t.matches.length-1];return De(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function IP(){return p_("useRouteId")}function zP(){var n;let i=E.useContext(d_),t=PP("useRouteError"),e=p_("useRouteError");return i!==void 0?i:(n=t.errors)==null?void 0:n[e]}function UP(){let{router:i}=jP("useNavigate"),t=p_("useNavigate"),e=E.useRef(!1);return mR(()=>{e.current=!0}),E.useCallback(async(a,o={})=>{ci(e.current,gR),e.current&&(typeof a=="number"?await i.navigate(a):await i.navigate(a,{fromRouteId:t,...o}))},[i,t])}var vT={};function vR(i,t,e){!t&&!vT[i]&&(vT[i]=!0,ci(!1,e))}E.memo(BP);function BP({routes:i,future:t,state:e,unstable_onError:n}){return yR(i,void 0,e,n,t)}function Ky({to:i,replace:t,state:e,relative:n}){De($h(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=E.useContext(ui);ci(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=E.useContext(Oi),{pathname:c}=Bo(),u=Ho(),d=h_(i,u_(o),c,n==="path"),f=JSON.stringify(d);return E.useEffect(()=>{u(JSON.parse(f),{replace:t,state:e,relative:n})},[u,f,n,t,e]),null}function so(i){De(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HP({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:o=!1,unstable_useTransitions:c}){De(!$h(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=i.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:u,navigator:a,static:o,unstable_useTransitions:c,future:{}}),[u,a,o,c]);typeof e=="string"&&(e=qh(e));let{pathname:f="/",search:g="",hash:y="",state:x=null,key:w="default"}=e,A=E.useMemo(()=>{let S=Sa(f,u);return S==null?null:{location:{pathname:S,search:g,hash:y,state:x,key:w},navigationType:n}},[u,f,g,y,x,w,n]);return ci(A!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:E.createElement(ui.Provider,{value:d},E.createElement(gg.Provider,{children:t,value:A}))}function VP({children:i,location:t}){return RP(xw(i),t)}function xw(i,t=[]){let e=[];return E.Children.forEach(i,(n,a)=>{if(!E.isValidElement(n))return;let o=[...t,a];if(n.type===E.Fragment){e.push.apply(e,xw(n.props.children,o));return}De(n.type===so,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),De(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=xw(n.props.children,o)),e.push(c)}),e}var uy="get",hy="application/x-www-form-urlencoded";function zv(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function qP(i){return zv(i)&&i.tagName.toLowerCase()==="button"}function GP(i){return zv(i)&&i.tagName.toLowerCase()==="form"}function $P(i){return zv(i)&&i.tagName.toLowerCase()==="input"}function XP(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function YP(i,t){return i.button===0&&(!t||t==="_self")&&!XP(i)}var qm=null;function KP(){if(qm===null)try{new FormData(document.createElement("form"),0),qm=!1}catch{qm=!0}return qm}var WP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zx(i){return i!=null&&!WP.has(i)?(ci(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hy}"`),null):i}function QP(i,t){let e,n,a,o,c;if(GP(i)){let u=i.getAttribute("action");n=u?Sa(u,t):null,e=i.getAttribute("method")||uy,a=zx(i.getAttribute("enctype"))||hy,o=new FormData(i)}else if(qP(i)||$P(i)&&(i.type==="submit"||i.type==="image")){let u=i.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=i.getAttribute("formaction")||u.getAttribute("action");if(n=d?Sa(d,t):null,e=i.getAttribute("formmethod")||u.getAttribute("method")||uy,a=zx(i.getAttribute("formenctype"))||zx(u.getAttribute("enctype"))||hy,o=new FormData(u,i),!KP()){let{name:f,type:g,value:y}=i;if(g==="image"){let x=f?`${f}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else f&&o.append(f,y)}}else{if(zv(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=uy,n=null,a=hy,c=i}return o&&a==="text/plain"&&(c=o,o=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function g_(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function ZP(i,t,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&Sa(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function JP(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function t3(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function e3(i,t,e){let n=await Promise.all(i.map(async a=>{let o=t.routes[a.route.id];if(o){let c=await JP(o,e);return c.links?c.links():[]}return[]}));return r3(n.flat(1).filter(t3).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function bT(i,t,e,n,a,o){let c=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,u=(d,f)=>{var g;return e[f].pathname!==d.pathname||((g=e[f].route.path)==null?void 0:g.endsWith("*"))&&e[f].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,f)=>c(d,f)||u(d,f)):o==="data"?t.filter((d,f)=>{var y;let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((y=e[0])==null?void 0:y.params)||{},nextUrl:new URL(i,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function n3(i,t,{includeHydrateFallback:e}={}){return s3(i.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function s3(i){return[...new Set(i)]}function i3(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function r3(i,t){let e=new Set;return new Set(t),i.reduce((n,a)=>{let o=JSON.stringify(i3(a));return e.has(o)||(e.add(o),n.push({key:o,link:a})),n},[])}function bR(){let i=E.useContext(Gh);return g_(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function a3(){let i=E.useContext(Iv);return g_(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var m_=E.createContext(void 0);m_.displayName="FrameworkContext";function xR(){let i=E.useContext(m_);return g_(i,"You must render this element inside a <HydratedRouter> element"),i}function o3(i,t){let e=E.useContext(m_),[n,a]=E.useState(!1),[o,c]=E.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,x=E.useRef(null);E.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let S=T=>{T.forEach(R=>{c(R.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[i]),E.useEffect(()=>{if(n){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[n]);let w=()=>{a(!0)},A=()=>{a(!1),c(!1)};return e?i!=="intent"?[o,x,{}]:[o,x,{onFocus:Kd(u,w),onBlur:Kd(d,A),onMouseEnter:Kd(f,w),onMouseLeave:Kd(g,A),onTouchStart:Kd(y,w)}]:[!1,x,{}]}function Kd(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function l3({page:i,...t}){let{router:e}=bR(),n=E.useMemo(()=>uR(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?E.createElement(u3,{page:i,matches:n,...t}):null}function c3(i){let{manifest:t,routeModules:e}=xR(),[n,a]=E.useState([]);return E.useEffect(()=>{let o=!1;return e3(i,t,e).then(c=>{o||a(c)}),()=>{o=!0}},[i,t,e]),n}function u3({page:i,matches:t,...e}){let n=Bo(),{manifest:a,routeModules:o}=xR(),{basename:c}=bR(),{loaderData:u,matches:d}=a3(),f=E.useMemo(()=>bT(i,t,d,a,n,"data"),[i,t,d,a,n]),g=E.useMemo(()=>bT(i,t,d,a,n,"assets"),[i,t,d,a,n]),y=E.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let A=new Set,S=!1;if(t.forEach(T=>{var L;let R=a.routes[T.route.id];!R||!R.hasLoader||(!f.some(j=>j.route.id===T.route.id)&&T.route.id in u&&((L=o[T.route.id])!=null&&L.shouldRevalidate)||R.hasClientLoader?S=!0:A.add(T.route.id))}),A.size===0)return[];let C=ZP(i,c,"data");return S&&A.size>0&&C.searchParams.set("_routes",t.filter(T=>A.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[c,u,n,a,f,t,i,o]),x=E.useMemo(()=>n3(g,a),[g,a]),w=c3(g);return E.createElement(E.Fragment,null,y.map(A=>E.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...e})),x.map(A=>E.createElement("link",{key:A,rel:"modulepreload",href:A,...e})),w.map(({key:A,link:S})=>E.createElement("link",{key:A,nonce:e.nonce,...S})))}function h3(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var wR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wR&&(window.__reactRouterVersion="7.10.1")}catch{}function d3({basename:i,children:t,unstable_useTransitions:e,window:n}){let a=E.useRef();a.current==null&&(a.current=Qj({window:n,v5Compat:!0}));let o=a.current,[c,u]=E.useState({action:o.action,location:o.location}),d=E.useCallback(f=>{e===!1?u(f):E.startTransition(()=>u(f))},[e]);return E.useLayoutEffect(()=>o.listen(d),[o,d]),E.createElement(HP,{basename:i,children:t,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:e===!0})}var AR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uv=E.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:o,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...x},w){let{basename:A,unstable_useTransitions:S}=E.useContext(ui),C=typeof f=="string"&&AR.test(f),T,R=!1;if(typeof f=="string"&&C&&(T=f,wR))try{let $=new URL(window.location.href),W=f.startsWith("//")?new URL($.protocol+f):new URL(f),st=Sa(W.pathname,A);W.origin===$.origin&&st!=null?f=st+W.search+W.hash:R=!0}catch{ci(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=CP(f,{relative:a}),[j,I,U]=o3(n,x),O=m3(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:y,unstable_useTransitions:S});function H($){t&&t($),$.defaultPrevented||O($)}let Z=E.createElement("a",{...x,...U,href:T||L,onClick:R||o?t:H,ref:h3(w,I),target:d,"data-discover":!C&&e==="render"?"true":void 0});return j&&!C?E.createElement(E.Fragment,null,Z,E.createElement(l3,{page:L})):Z});Uv.displayName="Link";var f3=E.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:o,to:c,viewTransition:u,children:d,...f},g){let y=mg(c,{relative:f.relative}),x=Bo(),w=E.useContext(Iv),{navigator:A,basename:S}=E.useContext(ui),C=w!=null&&w3(y)&&u===!0,T=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,R=x.pathname,L=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;e||(R=R.toLowerCase(),L=L?L.toLowerCase():null,T=T.toLowerCase()),L&&S&&(L=Sa(L,S)||L);const j=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let I=R===T||!a&&R.startsWith(T)&&R.charAt(j)==="/",U=L!=null&&(L===T||!a&&L.startsWith(T)&&L.charAt(T.length)==="/"),O={isActive:I,isPending:U,isTransitioning:C},H=I?t:void 0,Z;typeof n=="function"?Z=n(O):Z=[n,I?"active":null,U?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let $=typeof o=="function"?o(O):o;return E.createElement(Uv,{...f,"aria-current":H,className:Z,ref:g,style:$,to:c,viewTransition:u},typeof d=="function"?d(O):d)});f3.displayName="NavLink";var p3=E.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:o,method:c=uy,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...x},w)=>{let{unstable_useTransitions:A}=E.useContext(ui),S=b3(),C=x3(u,{relative:f}),T=c.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&AR.test(u),L=j=>{if(d&&d(j),j.defaultPrevented)return;j.preventDefault();let I=j.nativeEvent.submitter,U=(I==null?void 0:I.getAttribute("formmethod"))||c,O=()=>S(I||j.currentTarget,{fetcherKey:t,method:U,navigate:e,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:y});A&&e!==!1?E.startTransition(()=>O()):O()};return E.createElement("form",{ref:w,method:T,action:C,onSubmit:n?d:L,...x,"data-discover":!R&&i==="render"?"true":void 0})});p3.displayName="Form";function g3(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _R(i){let t=E.useContext(Gh);return De(t,g3(i)),t}function m3(i,{target:t,replace:e,state:n,preventScrollReset:a,relative:o,viewTransition:c,unstable_useTransitions:u}={}){let d=Ho(),f=Bo(),g=mg(i,{relative:o});return E.useCallback(y=>{if(YP(y,t)){y.preventDefault();let x=e!==void 0?e:Ef(f)===Ef(g),w=()=>d(i,{replace:x,state:n,preventScrollReset:a,relative:o,viewTransition:c});u?E.startTransition(()=>w()):w()}},[f,d,g,e,n,t,i,a,o,c,u])}var y3=0,v3=()=>`__${String(++y3)}__`;function b3(){let{router:i}=_R("useSubmit"),{basename:t}=E.useContext(ui),e=IP(),n=i.fetch,a=i.navigate;return E.useCallback(async(o,c={})=>{let{action:u,method:d,encType:f,formData:g,body:y}=QP(o,t);if(c.navigate===!1){let x=c.fetcherKey||v3();await n(x,e,c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||u,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,a,t,e])}function x3(i,{relative:t}={}){let{basename:e}=E.useContext(ui),n=E.useContext(Oi);De(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...mg(i||".",{relative:t})},c=Bo();if(i==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!i||i===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:va([e,o.pathname])),Ef(o)}function w3(i,{relative:t}={}){let e=E.useContext(pR);De(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=_R("useViewTransitionState"),a=mg(i,{relative:t});if(!e.isTransitioning)return!1;let o=Sa(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=Sa(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Yy(a.pathname,c)!=null||Yy(a.pathname,o)!=null}var SR=cR();const A3=l_(SR),xT=i=>{let t;const e=new Set,n=(f,g)=>{const y=typeof f=="function"?f(t):f;if(!Object.is(y,t)){const x=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(w=>w(t,x))}},a=()=>t,u={setState:n,getState:a,getInitialState:()=>d,subscribe:f=>(e.add(f),()=>e.delete(f))},d=t=i(n,a,u);return u},_3=(i=>i?xT(i):xT),S3=i=>i;function E3(i,t=S3){const e=mn.useSyncExternalStore(i.subscribe,mn.useCallback(()=>t(i.getState()),[i,t]),mn.useCallback(()=>t(i.getInitialState()),[i,t]));return mn.useDebugValue(e),e}const wT=i=>{const t=_3(i),e=n=>E3(t,n);return Object.assign(e,t),e},ER=(i=>i?wT(i):wT),C3="/api";class T3{constructor(t){Dt(this,"baseUrl");this.baseUrl=t}getToken(){return localStorage.getItem("heytex_token")}async request(t,e={}){const{method:n="GET",body:a,headers:o={}}=e,c=this.getToken(),u={method:n,headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{},...o}};a&&(u.body=JSON.stringify(a));const d=await fetch(`${this.baseUrl}${t}`,u);if(!d.ok){const f=await d.json().catch(()=>({error:"Unknown error"}));throw new Error(f.error||`HTTP error ${d.status}`)}return e.responseType==="blob"?d.blob():d.json()}async login(t,e){const n=await this.request("/auth/login",{method:"POST",body:{email:t,password:e}});return localStorage.setItem("heytex_token",n.token),n}async register(t,e,n){const a=await this.request("/auth/register",{method:"POST",body:{email:t,password:e,name:n}});return localStorage.setItem("heytex_token",a.token),a}async getMe(){return this.request("/auth/me")}logout(){localStorage.removeItem("heytex_token")}async getProjects(){return this.request("/projects")}async getProject(t){return this.request(`/projects/${t}`)}async createProject(t){return this.request("/projects",{method:"POST",body:t})}async updateProject(t,e){return this.request(`/projects/${t}`,{method:"PATCH",body:e})}async deleteProject(t){return this.request(`/projects/${t}`,{method:"DELETE"})}async addCollaborator(t,e,n){return this.request(`/projects/${t}/collaborators`,{method:"POST",body:{email:e,role:n}})}async removeCollaborator(t,e){return this.request(`/projects/${t}/collaborators/${e}`,{method:"DELETE"})}async getFiles(t){return this.request(`/files/project/${t}`)}async getFile(t){return this.request(`/files/${t}`)}async createFile(t){return this.request("/files",{method:"POST",body:t})}async updateFile(t,e){return this.request(`/files/${t}`,{method:"PATCH",body:e})}async deleteFile(t){return this.request(`/files/${t}`,{method:"DELETE"})}async compile(t){return this.request("/compile/latex",{method:"POST",body:{content:t},responseType:"blob"})}async uploadFile(t){return this.request("/files/upload",{method:"POST",body:t})}}const Mn=new T3(C3),Vo=ER(i=>({user:null,isAuthenticated:!1,isLoading:!0,login:async(t,e)=>{const{user:n}=await Mn.login(t,e);i({user:n,isAuthenticated:!0})},register:async(t,e,n)=>{const{user:a}=await Mn.register(t,e,n);i({user:a,isAuthenticated:!0})},logout:()=>{Mn.logout(),i({user:null,isAuthenticated:!1})},checkAuth:async()=>{try{if(!localStorage.getItem("heytex_token")){i({isLoading:!1});return}const{user:e}=await Mn.getMe();i({user:e,isAuthenticated:!0,isLoading:!1})}catch{localStorage.removeItem("heytex_token"),i({user:null,isAuthenticated:!1,isLoading:!1})}}})),CR=ER((i,t)=>({currentProject:null,currentFile:null,files:[],openFiles:[],isSidebarOpen:!0,isPreviewOpen:!0,theme:localStorage.getItem("heytex_theme")||"light",compilationStatus:"idle",compilationError:null,pdfData:null,setCurrentProject:e=>i({currentProject:e}),setCurrentFile:e=>i({currentFile:e}),setFiles:e=>i({files:e}),addOpenFile:e=>{const{openFiles:n}=t();n.find(a=>a.id===e.id)||i({openFiles:[...n,e]}),i({currentFile:e})},removeOpenFile:e=>{const{openFiles:n,currentFile:a}=t(),o=n.filter(c=>c.id!==e);i({openFiles:o}),(a==null?void 0:a.id)===e&&i({currentFile:o[o.length-1]||null})},toggleSidebar:()=>i(e=>({isSidebarOpen:!e.isSidebarOpen})),togglePreview:()=>i(e=>({isPreviewOpen:!e.isPreviewOpen})),toggleTheme:()=>{const e=t().theme==="light"?"dark":"light";localStorage.setItem("heytex_theme",e),document.documentElement.classList.toggle("dark",e==="dark"),i({theme:e})},setCompilationStatus:(e,n)=>i({compilationStatus:e,compilationError:n||null}),setPdfData:e=>i({pdfData:e}),updateFileContent:(e,n)=>{const{files:a,openFiles:o,currentFile:c}=t(),u=d=>d.id===e?{...d,content:n}:d;i({files:a.map(u),openFiles:o.map(u),currentFile:(c==null?void 0:c.id)===e?{...c,content:n}:c})}}));if(typeof window<"u"){const i=localStorage.getItem("heytex_theme")||"light";document.documentElement.classList.toggle("dark",i==="dark")}function TR(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var a=i.length;for(t=0;t<a;t++)i[t]&&(e=TR(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function Xh(){for(var i,t,e=0,n="",a=arguments.length;e<a;e++)(i=arguments[e])&&(t=TR(i))&&(n&&(n+=" "),n+=t);return n}const k3=(i,t)=>{const e=new Array(i.length+t.length);for(let n=0;n<i.length;n++)e[n]=i[n];for(let n=0;n<t.length;n++)e[i.length+n]=t[n];return e},R3=(i,t)=>({classGroupId:i,validator:t}),kR=(i=new Map,t=null,e)=>({nextPart:i,validators:t,classGroupId:e}),Wy="-",AT=[],N3="arbitrary..",M3=i=>{const t=L3(i),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return D3(c);const u=c.split(Wy),d=u[0]===""&&u.length>1?1:0;return RR(u,d,t)},getConflictingClassGroupIds:(c,u)=>{if(u){const d=n[c],f=e[c];return d?f?k3(f,d):d:f||AT}return e[c]||AT}}},RR=(i,t,e)=>{if(i.length-t===0)return e.classGroupId;const a=i[t],o=e.nextPart.get(a);if(o){const f=RR(i,t+1,o);if(f)return f}const c=e.validators;if(c===null)return;const u=t===0?i.join(Wy):i.slice(t).join(Wy),d=c.length;for(let f=0;f<d;f++){const g=c[f];if(g.validator(u))return g.classGroupId}},D3=i=>i.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=i.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?N3+n:void 0})(),L3=i=>{const{theme:t,classGroups:e}=i;return O3(e,t)},O3=(i,t)=>{const e=kR();for(const n in i){const a=i[n];y_(a,e,n,t)}return e},y_=(i,t,e,n)=>{const a=i.length;for(let o=0;o<a;o++){const c=i[o];j3(c,t,e,n)}},j3=(i,t,e,n)=>{if(typeof i=="string"){P3(i,t,e);return}if(typeof i=="function"){F3(i,t,e,n);return}I3(i,t,e,n)},P3=(i,t,e)=>{const n=i===""?t:NR(t,i);n.classGroupId=e},F3=(i,t,e,n)=>{if(z3(i)){y_(i(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(R3(e,i))},I3=(i,t,e,n)=>{const a=Object.entries(i),o=a.length;for(let c=0;c<o;c++){const[u,d]=a[c];y_(d,NR(t,u),e,n)}},NR=(i,t)=>{let e=i;const n=t.split(Wy),a=n.length;for(let o=0;o<a;o++){const c=n[o];let u=e.nextPart.get(c);u||(u=kR(),e.nextPart.set(c,u)),e=u}return e},z3=i=>"isThemeGetter"in i&&i.isThemeGetter===!0,U3=i=>{if(i<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const a=(o,c)=>{e[o]=c,t++,t>i&&(t=0,n=e,e=Object.create(null))};return{get(o){let c=e[o];if(c!==void 0)return c;if((c=n[o])!==void 0)return a(o,c),c},set(o,c){o in e?e[o]=c:a(o,c)}}},ww="!",_T=":",B3=[],ST=(i,t,e,n,a)=>({modifiers:i,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:a}),H3=i=>{const{prefix:t,experimentalParseClassName:e}=i;let n=a=>{const o=[];let c=0,u=0,d=0,f;const g=a.length;for(let S=0;S<g;S++){const C=a[S];if(c===0&&u===0){if(C===_T){o.push(a.slice(d,S)),d=S+1;continue}if(C==="/"){f=S;continue}}C==="["?c++:C==="]"?c--:C==="("?u++:C===")"&&u--}const y=o.length===0?a:a.slice(d);let x=y,w=!1;y.endsWith(ww)?(x=y.slice(0,-1),w=!0):y.startsWith(ww)&&(x=y.slice(1),w=!0);const A=f&&f>d?f-d:void 0;return ST(o,w,x,A)};if(t){const a=t+_T,o=n;n=c=>c.startsWith(a)?o(c.slice(a.length)):ST(B3,!1,c,void 0,!0)}if(e){const a=n;n=o=>e({className:o,parseClassName:a})}return n},V3=i=>{const t=new Map;return i.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let a=[];for(let o=0;o<e.length;o++){const c=e[o],u=c[0]==="[",d=t.has(c);u||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(c)):a.push(c)}return a.length>0&&(a.sort(),n.push(...a)),n}},q3=i=>({cache:U3(i.cacheSize),parseClassName:H3(i),sortModifiers:V3(i),...M3(i)}),G3=/\s+/,$3=(i,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:o}=t,c=[],u=i.trim().split(G3);let d="";for(let f=u.length-1;f>=0;f-=1){const g=u[f],{isExternal:y,modifiers:x,hasImportantModifier:w,baseClassName:A,maybePostfixModifierPosition:S}=e(g);if(y){d=g+(d.length>0?" "+d:d);continue}let C=!!S,T=n(C?A.substring(0,S):A);if(!T){if(!C){d=g+(d.length>0?" "+d:d);continue}if(T=n(A),!T){d=g+(d.length>0?" "+d:d);continue}C=!1}const R=x.length===0?"":x.length===1?x[0]:o(x).join(":"),L=w?R+ww:R,j=L+T;if(c.indexOf(j)>-1)continue;c.push(j);const I=a(T,C);for(let U=0;U<I.length;++U){const O=I[U];c.push(L+O)}d=g+(d.length>0?" "+d:d)}return d},X3=(...i)=>{let t=0,e,n,a="";for(;t<i.length;)(e=i[t++])&&(n=MR(e))&&(a&&(a+=" "),a+=n);return a},MR=i=>{if(typeof i=="string")return i;let t,e="";for(let n=0;n<i.length;n++)i[n]&&(t=MR(i[n]))&&(e&&(e+=" "),e+=t);return e},Y3=(i,...t)=>{let e,n,a,o;const c=d=>{const f=t.reduce((g,y)=>y(g),i());return e=q3(f),n=e.cache.get,a=e.cache.set,o=u,u(d)},u=d=>{const f=n(d);if(f)return f;const g=$3(d,e);return a(d,g),g};return o=c,(...d)=>o(X3(...d))},K3=[],Ze=i=>{const t=e=>e[i]||K3;return t.isThemeGetter=!0,t},DR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,LR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,W3=/^\d+\/\d+$/,Q3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Z3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,J3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,t4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,e4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yu=i=>W3.test(i),It=i=>!!i&&!Number.isNaN(Number(i)),no=i=>!!i&&Number.isInteger(Number(i)),Ux=i=>i.endsWith("%")&&It(i.slice(0,-1)),zr=i=>Q3.test(i),n4=()=>!0,s4=i=>Z3.test(i)&&!J3.test(i),OR=()=>!1,i4=i=>t4.test(i),r4=i=>e4.test(i),a4=i=>!yt(i)&&!vt(i),o4=i=>Yh(i,FR,OR),yt=i=>DR.test(i),dl=i=>Yh(i,IR,s4),Bx=i=>Yh(i,d4,It),ET=i=>Yh(i,jR,OR),l4=i=>Yh(i,PR,r4),Gm=i=>Yh(i,zR,i4),vt=i=>LR.test(i),Wd=i=>Kh(i,IR),c4=i=>Kh(i,f4),CT=i=>Kh(i,jR),u4=i=>Kh(i,FR),h4=i=>Kh(i,PR),$m=i=>Kh(i,zR,!0),Yh=(i,t,e)=>{const n=DR.exec(i);return n?n[1]?t(n[1]):e(n[2]):!1},Kh=(i,t,e=!1)=>{const n=LR.exec(i);return n?n[1]?t(n[1]):e:!1},jR=i=>i==="position"||i==="percentage",PR=i=>i==="image"||i==="url",FR=i=>i==="length"||i==="size"||i==="bg-size",IR=i=>i==="length",d4=i=>i==="number",f4=i=>i==="family-name",zR=i=>i==="shadow",p4=()=>{const i=Ze("color"),t=Ze("font"),e=Ze("text"),n=Ze("font-weight"),a=Ze("tracking"),o=Ze("leading"),c=Ze("breakpoint"),u=Ze("container"),d=Ze("spacing"),f=Ze("radius"),g=Ze("shadow"),y=Ze("inset-shadow"),x=Ze("text-shadow"),w=Ze("drop-shadow"),A=Ze("blur"),S=Ze("perspective"),C=Ze("aspect"),T=Ze("ease"),R=Ze("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],I=()=>[...j(),vt,yt],U=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],H=()=>[vt,yt,d],Z=()=>[yu,"full","auto",...H()],$=()=>[no,"none","subgrid",vt,yt],W=()=>["auto",{span:["full",no,vt,yt]},no,vt,yt],st=()=>[no,"auto",vt,yt],ct=()=>["auto","min","max","fr",vt,yt],lt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],nt=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...H()],q=()=>[yu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],X=()=>[i,vt,yt],_t=()=>[...j(),CT,ET,{position:[vt,yt]}],Ct=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",u4,o4,{size:[vt,yt]}],G=()=>[Ux,Wd,dl],tt=()=>["","none","full",f,vt,yt],ot=()=>["",It,Wd,dl],pt=()=>["solid","dashed","dotted","double"],wt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ht=()=>[It,Ux,CT,ET],Gt=()=>["","none",A,vt,yt],Ft=()=>["none",It,vt,yt],$t=()=>["none",It,vt,yt],ue=()=>[It,vt,yt],cn=()=>[yu,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[zr],breakpoint:[zr],color:[n4],container:[zr],"drop-shadow":[zr],ease:["in","out","in-out"],font:[a4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[zr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[zr],shadow:[zr],spacing:["px",It],text:[zr],"text-shadow":[zr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",yu,yt,vt,C]}],container:["container"],columns:[{columns:[It,yt,vt,u]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:I()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Z()}],"inset-x":[{"inset-x":Z()}],"inset-y":[{"inset-y":Z()}],start:[{start:Z()}],end:[{end:Z()}],top:[{top:Z()}],right:[{right:Z()}],bottom:[{bottom:Z()}],left:[{left:Z()}],visibility:["visible","invisible","collapse"],z:[{z:[no,"auto",vt,yt]}],basis:[{basis:[yu,"full","auto",u,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[It,yu,"auto","initial","none",yt]}],grow:[{grow:["",It,vt,yt]}],shrink:[{shrink:["",It,vt,yt]}],order:[{order:[no,"first","last","none",vt,yt]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":st()}],"col-end":[{"col-end":st()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":st()}],"row-end":[{"row-end":st()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ct()}],"auto-rows":[{"auto-rows":ct()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...lt(),"normal"]}],"justify-items":[{"justify-items":[...nt(),"normal"]}],"justify-self":[{"justify-self":["auto",...nt()]}],"align-content":[{content:["normal",...lt()]}],"align-items":[{items:[...nt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...nt(),{baseline:["","last"]}]}],"place-content":[{"place-content":lt()}],"place-items":[{"place-items":[...nt(),"baseline"]}],"place-self":[{"place-self":["auto",...nt()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[u,"screen",...q()]}],"min-w":[{"min-w":[u,"screen","none",...q()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",e,Wd,dl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,vt,Bx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ux,yt]}],"font-family":[{font:[c4,yt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,vt,yt]}],"line-clamp":[{"line-clamp":[It,"none",vt,Bx]}],leading:[{leading:[o,...H()]}],"list-image":[{"list-image":["none",vt,yt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",vt,yt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pt(),"wavy"]}],"text-decoration-thickness":[{decoration:[It,"from-font","auto",vt,dl]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[It,"auto",vt,yt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",vt,yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",vt,yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_t()}],"bg-repeat":[{bg:Ct()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},no,vt,yt],radial:["",vt,yt],conic:[no,vt,yt]},h4,l4]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:tt()}],"rounded-s":[{"rounded-s":tt()}],"rounded-e":[{"rounded-e":tt()}],"rounded-t":[{"rounded-t":tt()}],"rounded-r":[{"rounded-r":tt()}],"rounded-b":[{"rounded-b":tt()}],"rounded-l":[{"rounded-l":tt()}],"rounded-ss":[{"rounded-ss":tt()}],"rounded-se":[{"rounded-se":tt()}],"rounded-ee":[{"rounded-ee":tt()}],"rounded-es":[{"rounded-es":tt()}],"rounded-tl":[{"rounded-tl":tt()}],"rounded-tr":[{"rounded-tr":tt()}],"rounded-br":[{"rounded-br":tt()}],"rounded-bl":[{"rounded-bl":tt()}],"border-w":[{border:ot()}],"border-w-x":[{"border-x":ot()}],"border-w-y":[{"border-y":ot()}],"border-w-s":[{"border-s":ot()}],"border-w-e":[{"border-e":ot()}],"border-w-t":[{"border-t":ot()}],"border-w-r":[{"border-r":ot()}],"border-w-b":[{"border-b":ot()}],"border-w-l":[{"border-l":ot()}],"divide-x":[{"divide-x":ot()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ot()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pt(),"hidden","none"]}],"divide-style":[{divide:[...pt(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...pt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[It,vt,yt]}],"outline-w":[{outline:["",It,Wd,dl]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",g,$m,Gm]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",y,$m,Gm]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:ot()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[It,dl]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":ot()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",x,$m,Gm]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[It,vt,yt]}],"mix-blend":[{"mix-blend":[...wt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":wt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[It]}],"mask-image-linear-from-pos":[{"mask-linear-from":ht()}],"mask-image-linear-to-pos":[{"mask-linear-to":ht()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":ht()}],"mask-image-t-to-pos":[{"mask-t-to":ht()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":ht()}],"mask-image-r-to-pos":[{"mask-r-to":ht()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":ht()}],"mask-image-b-to-pos":[{"mask-b-to":ht()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":ht()}],"mask-image-l-to-pos":[{"mask-l-to":ht()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":ht()}],"mask-image-x-to-pos":[{"mask-x-to":ht()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":ht()}],"mask-image-y-to-pos":[{"mask-y-to":ht()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[vt,yt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ht()}],"mask-image-radial-to-pos":[{"mask-radial-to":ht()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[It]}],"mask-image-conic-from-pos":[{"mask-conic-from":ht()}],"mask-image-conic-to-pos":[{"mask-conic-to":ht()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_t()}],"mask-repeat":[{mask:Ct()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",vt,yt]}],filter:[{filter:["","none",vt,yt]}],blur:[{blur:Gt()}],brightness:[{brightness:[It,vt,yt]}],contrast:[{contrast:[It,vt,yt]}],"drop-shadow":[{"drop-shadow":["","none",w,$m,Gm]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",It,vt,yt]}],"hue-rotate":[{"hue-rotate":[It,vt,yt]}],invert:[{invert:["",It,vt,yt]}],saturate:[{saturate:[It,vt,yt]}],sepia:[{sepia:["",It,vt,yt]}],"backdrop-filter":[{"backdrop-filter":["","none",vt,yt]}],"backdrop-blur":[{"backdrop-blur":Gt()}],"backdrop-brightness":[{"backdrop-brightness":[It,vt,yt]}],"backdrop-contrast":[{"backdrop-contrast":[It,vt,yt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",It,vt,yt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[It,vt,yt]}],"backdrop-invert":[{"backdrop-invert":["",It,vt,yt]}],"backdrop-opacity":[{"backdrop-opacity":[It,vt,yt]}],"backdrop-saturate":[{"backdrop-saturate":[It,vt,yt]}],"backdrop-sepia":[{"backdrop-sepia":["",It,vt,yt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",vt,yt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[It,"initial",vt,yt]}],ease:[{ease:["linear","initial",T,vt,yt]}],delay:[{delay:[It,vt,yt]}],animate:[{animate:["none",R,vt,yt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,vt,yt]}],"perspective-origin":[{"perspective-origin":I()}],rotate:[{rotate:Ft()}],"rotate-x":[{"rotate-x":Ft()}],"rotate-y":[{"rotate-y":Ft()}],"rotate-z":[{"rotate-z":Ft()}],scale:[{scale:$t()}],"scale-x":[{"scale-x":$t()}],"scale-y":[{"scale-y":$t()}],"scale-z":[{"scale-z":$t()}],"scale-3d":["scale-3d"],skew:[{skew:ue()}],"skew-x":[{"skew-x":ue()}],"skew-y":[{"skew-y":ue()}],transform:[{transform:[vt,yt,"","none","gpu","cpu"]}],"transform-origin":[{origin:I()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:cn()}],"translate-x":[{"translate-x":cn()}],"translate-y":[{"translate-y":cn()}],"translate-z":[{"translate-z":cn()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",vt,yt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",vt,yt]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[It,Wd,dl,Bx]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},g4=Y3(p4);function Fs(...i){return g4(Xh(i))}function TT(i){return new Date(i).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})}function m4(i){return i.slice(i.lastIndexOf(".")+1).toLowerCase()}function UR(i){const t=m4(i);return{tex:"",typ:"",pdf:"",png:"",jpg:"",jpeg:"",gif:"",svg:"",bib:"",txt:"",md:""}[t]||""}/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v4=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),kT=i=>{const t=v4(i);return t.charAt(0).toUpperCase()+t.slice(1)},BR=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),b4=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=E.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:c,...u},d)=>E.createElement("svg",{ref:d,...x4,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:BR("lucide",a),...!o&&!b4(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>E.createElement(f,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=(i,t)=>{const e=E.forwardRef(({className:n,...a},o)=>E.createElement(w4,{ref:o,iconNode:t,className:BR(`lucide-${y4(kT(i))}`,`lucide-${i}`,n),...a}));return e.displayName=kT(i),e};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Aw=Rt("calendar",A4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],S4=Rt("camera",_4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],HR=Rt("check",E4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],T4=Rt("chevron-down",C4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],R4=Rt("chevron-left",k4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],RT=Rt("chevron-right",N4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],D4=Rt("chevron-up",M4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],O4=Rt("circle-alert",L4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],P4=Rt("circle-check-big",j4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],NT=Rt("clock",F4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],z4=Rt("copy",I4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Qy=Rt("download",U4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],H4=Rt("eye-off",B4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MT=Rt("eye",V4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M4 12.15V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-3.35",key:"1wthlu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 16-3 3 3 3",key:"331omg"}],["path",{d:"m9 22 3-3-3-3",key:"lsp7cz"}]],Ea=Rt("file-code-corner",q4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],DT=Rt("file-down",G4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Di=Rt("file-text",$4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Y4=Rt("file",X4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],v_=Rt("folder-open",K4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],VR=Rt("folder",W4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Z4=Rt("hard-drive",Q4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],LT=Rt("info",J4);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],OT=Rt("key",tF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],nF=Rt("layout-grid",eF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],iF=Rt("list",sF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],aF=Rt("loader-circle",rF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],lF=Rt("log-out",oF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],qR=Rt("moon",cF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],hF=Rt("panel-left-close",uF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],fF=Rt("panel-left",dF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],gF=Rt("play",pF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_w=Rt("plus",mF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],vF=Rt("refresh-cw",yF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],GR=Rt("save",bF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],wF=Rt("search",xF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Sw=Rt("share-2",AF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],$R=Rt("shield",_F);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],EF=Rt("sparkles",SF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],XR=Rt("sun",CF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Zy=Rt("trash-2",TF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],RF=Rt("upload",kF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],MF=Rt("user-plus",NF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],YR=Rt("user",DF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Oh=Rt("users",LF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jh=Rt("x",OF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],PF=Rt("zoom-in",jF);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],IF=Rt("zoom-out",FF);function or({className:i,size:t="md"}){const e={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return b.jsx(aF,{className:Fs("animate-spin text-primary",e[t],i)})}function KR({message:i="ang ti..."}){return b.jsx("div",{className:"flex h-full w-full items-center justify-center bg-background",children:b.jsxs("div",{className:"flex flex-col items-center gap-4",children:[b.jsx(or,{size:"lg"}),b.jsx("p",{className:"text-muted-foreground",children:i})]})})}const jT=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,PT=Xh,zF=(i,t)=>e=>{var n;if((t==null?void 0:t.variants)==null)return PT(i,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:a,defaultVariants:o}=t,c=Object.keys(a).map(f=>{const g=e==null?void 0:e[f],y=o==null?void 0:o[f];if(g===null)return null;const x=jT(g)||jT(y);return a[f][x]}),u=e&&Object.entries(e).reduce((f,g)=>{let[y,x]=g;return x===void 0||(f[y]=x),f},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,g)=>{let{class:y,className:x,...w}=g;return Object.entries(w).every(A=>{let[S,C]=A;return Array.isArray(C)?C.includes({...o,...u}[S]):{...o,...u}[S]===C})?[...f,y,x]:f},[]);return PT(i,c,d,e==null?void 0:e.class,e==null?void 0:e.className)},UF=zF("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),te=E.forwardRef(({className:i,variant:t,size:e,...n},a)=>b.jsx("button",{className:Fs(UF({variant:t,size:e,className:i})),ref:a,...n}));te.displayName="Button";const Dn=E.forwardRef(({className:i,type:t,label:e,error:n,...a},o)=>b.jsxs("div",{className:"space-y-1.5",children:[e&&b.jsx("label",{className:"text-sm font-medium text-foreground",children:e}),b.jsx("input",{type:t,className:Fs("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",n&&"border-destructive focus-visible:ring-destructive",i),ref:o,...a}),n&&b.jsx("p",{className:"text-sm text-destructive",children:n})]}));Dn.displayName="Input";function BF(){const i=Ho(),{login:t}=Vo(),[e,n]=E.useState(""),[a,o]=E.useState(""),[c,u]=E.useState(""),[d,f]=E.useState(!1),g=async y=>{y.preventDefault(),u(""),f(!0);try{await t(e,a),i("/dashboard")}catch(x){u(x instanceof Error?x.message:"ng nhp tht bi")}finally{f(!1)}};return b.jsxs("div",{className:"flex min-h-screen",children:[b.jsx("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary/20 via-primary/10 to-background items-center justify-center p-12",children:b.jsxs("div",{className:"max-w-md space-y-6",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-3 rounded-xl bg-primary/20",children:b.jsx(Ea,{className:"h-10 w-10 text-primary"})}),b.jsx("span",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"HeyTeX"})]}),b.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Bin tp LaTeX & Typst chuyn nghip"}),b.jsx("p",{className:"text-lg text-muted-foreground",children:"Tri nghim giao din ging VS Code, bin dch Wasm siu tc, v cng tc thi gian thc vi ng nghip."}),b.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[b.jsx(EF,{className:"h-5 w-5"}),b.jsx("span",{children:"Powered by WebAssembly"})]})]})}),b.jsx("div",{className:"flex w-full lg:w-1/2 items-center justify-center p-8",children:b.jsxs("div",{className:"w-full max-w-md space-y-8",children:[b.jsxs("div",{className:"text-center lg:text-left",children:[b.jsxs("div",{className:"flex items-center gap-2 justify-center lg:hidden mb-8",children:[b.jsx(Ea,{className:"h-8 w-8 text-primary"}),b.jsx("span",{className:"text-2xl font-bold",children:"HeyTeX"})]}),b.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"ng nhp"}),b.jsx("p",{className:"mt-2 text-muted-foreground",children:"Cho mng bn quay li! Vui lng nhp thng tin ng nhp."})]}),b.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c&&b.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:c}),b.jsx(Dn,{label:"Email",type:"email",placeholder:"email@example.com",value:e,onChange:y=>n(y.target.value),required:!0,autoComplete:"email"}),b.jsx(Dn,{label:"Mt khu",type:"password",placeholder:"",value:a,onChange:y=>o(y.target.value),required:!0,autoComplete:"current-password"}),b.jsx(te,{type:"submit",className:"w-full",disabled:d,children:d?b.jsx(or,{size:"sm"}):"ng nhp"})]}),b.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Cha c ti khon?"," ",b.jsx(Uv,{to:"/register",className:"text-primary hover:underline font-medium",children:"ng k ngay"})]})]})})]})}function HF(){const i=Ho(),{register:t}=Vo(),[e,n]=E.useState(""),[a,o]=E.useState(""),[c,u]=E.useState(""),[d,f]=E.useState(""),[g,y]=E.useState(""),[x,w]=E.useState(!1),A=async S=>{if(S.preventDefault(),y(""),c!==d){y("Mt khu xc nhn khng khp");return}if(c.length<6){y("Mt khu phi c t nht 6 k t");return}w(!0);try{await t(a,c,e),i("/dashboard")}catch(C){y(C instanceof Error?C.message:"ng k tht bi")}finally{w(!1)}};return b.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-8",children:b.jsxs("div",{className:"w-full max-w-md space-y-8",children:[b.jsxs("div",{className:"text-center",children:[b.jsxs("div",{className:"flex items-center gap-2 justify-center mb-6",children:[b.jsx(Ea,{className:"h-10 w-10 text-primary"}),b.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"HeyTeX"})]}),b.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"To ti khon mi"}),b.jsx("p",{className:"mt-2 text-muted-foreground",children:"Bt u hnh trnh bin tp ti liu chuyn nghip"})]}),b.jsx("div",{className:"glass rounded-2xl p-8 shadow-xl",children:b.jsxs("form",{onSubmit:A,className:"space-y-5",children:[g&&b.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:g}),b.jsx(Dn,{label:"H v tn",type:"text",placeholder:"Nguyn Vn A",value:e,onChange:S=>n(S.target.value),required:!0,autoComplete:"name"}),b.jsx(Dn,{label:"Email",type:"email",placeholder:"email@example.com",value:a,onChange:S=>o(S.target.value),required:!0,autoComplete:"email"}),b.jsx(Dn,{label:"Mt khu",type:"password",placeholder:"",value:c,onChange:S=>u(S.target.value),required:!0,autoComplete:"new-password"}),b.jsx(Dn,{label:"Xc nhn mt khu",type:"password",placeholder:"",value:d,onChange:S=>f(S.target.value),required:!0,autoComplete:"new-password"}),b.jsx(te,{type:"submit",className:"w-full",disabled:x,children:x?b.jsx(or,{size:"sm"}):"ng k"})]})}),b.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[" c ti khon?"," ",b.jsx(Uv,{to:"/login",className:"text-primary hover:underline font-medium",children:"ng nhp"})]})]})})}function VF({project:i,viewMode:t,onDelete:e,onDownloadZip:n,onDownloadPdf:a,onShowInfo:o}){const c=Ho();return t==="list"?b.jsx("div",{className:"group glass rounded-lg p-4 hover:border-primary/50 transition-all",children:b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("div",{className:`p-3 rounded-lg cursor-pointer ${i.engine==="TYPST"?"bg-cyan-500/20 text-cyan-500":"bg-orange-500/20 text-orange-500"}`,onClick:()=>c(`/editor/${i.id}`),children:b.jsx(Ea,{className:"h-5 w-5"})}),b.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>c(`/editor/${i.id}`),children:[b.jsx("h3",{className:"font-semibold text-foreground truncate",title:i.name,children:i.name}),b.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-1",children:[b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx(NT,{className:"h-3 w-3"}),TT(i.updatedAt)]}),b.jsx("span",{className:`px-2 py-0.5 rounded-full ${i.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:i.engine})]})]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("button",{onClick:u=>{u.stopPropagation(),o(i.id)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Thng tin",children:b.jsx(LT,{className:"h-4 w-4"})}),b.jsx("button",{onClick:u=>{u.stopPropagation(),n(i)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Ti ZIP",children:b.jsx(Qy,{className:"h-4 w-4"})}),b.jsx("button",{onClick:u=>{u.stopPropagation(),a(i)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Ti PDF",children:b.jsx(DT,{className:"h-4 w-4"})}),b.jsx("button",{onClick:u=>{u.stopPropagation(),c(`/editor/${i.id}`)},className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Chia s",children:b.jsx(Sw,{className:"h-4 w-4"})}),b.jsx("div",{className:"w-px h-6 bg-border mx-1"}),b.jsx("button",{onClick:u=>{u.stopPropagation(),e(i.id)},className:"p-2 hover:bg-destructive/20 text-destructive rounded-lg transition-colors",title:"Xa",children:b.jsx(Zy,{className:"h-4 w-4"})})]})]})}):b.jsxs("div",{className:"group relative glass rounded-xl p-5 hover:border-primary/50 transition-all",children:[b.jsxs("div",{className:"cursor-pointer",onClick:()=>c(`/editor/${i.id}`),children:[b.jsx("div",{className:"flex items-start justify-between mb-4",children:b.jsx("div",{className:`p-2 rounded-lg ${i.engine==="TYPST"?"bg-cyan-500/20 text-cyan-500":"bg-orange-500/20 text-orange-500"}`,children:b.jsx(Ea,{className:"h-5 w-5"})})}),b.jsx("h3",{className:"font-semibold text-foreground mb-1 truncate",title:i.name,children:i.name}),b.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-3",children:[b.jsxs("span",{className:"flex items-center gap-1",children:[b.jsx(NT,{className:"h-3 w-3"}),TT(i.updatedAt)]}),b.jsx("span",{className:`px-2 py-0.5 rounded-full ${i.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:i.engine})]})]}),b.jsxs("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[b.jsx("button",{onClick:u=>{u.stopPropagation(),o(i.id)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Thng tin",children:b.jsx(LT,{className:"h-3.5 w-3.5"})}),b.jsx("button",{onClick:u=>{u.stopPropagation(),n(i)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Ti ZIP",children:b.jsx(Qy,{className:"h-3.5 w-3.5"})}),b.jsx("button",{onClick:u=>{u.stopPropagation(),a(i)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Ti PDF",children:b.jsx(DT,{className:"h-3.5 w-3.5"})}),b.jsx("button",{onClick:u=>{u.stopPropagation(),c(`/editor/${i.id}`)},className:"p-1.5 hover:bg-muted rounded-lg transition-colors glass",title:"Chia s",children:b.jsx(Sw,{className:"h-3.5 w-3.5"})}),b.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),b.jsx("button",{onClick:u=>{u.stopPropagation(),e(i.id)},className:"p-1.5 hover:bg-destructive/20 text-destructive rounded-lg transition-colors glass",title:"Xa",children:b.jsx(Zy,{className:"h-3.5 w-3.5"})})]})]})}function Ln(i,t,{checkForDefaultPrevented:e=!0}={}){return function(a){if(i==null||i(a),e===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function FT(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function WR(...i){return t=>{let e=!1;const n=i.map(a=>{const o=FT(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():FT(i[a],null)}}}}function fr(...i){return E.useCallback(WR(...i),i)}function qF(i,t){const e=E.createContext(t),n=o=>{const{children:c,...u}=o,d=E.useMemo(()=>u,Object.values(u));return b.jsx(e.Provider,{value:d,children:c})};n.displayName=i+"Provider";function a(o){const c=E.useContext(e);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${i}\``)}return[n,a]}function Bv(i,t=[]){let e=[];function n(o,c){const u=E.createContext(c),d=e.length;e=[...e,c];const f=y=>{var T;const{scope:x,children:w,...A}=y,S=((T=x==null?void 0:x[i])==null?void 0:T[d])||u,C=E.useMemo(()=>A,Object.values(A));return b.jsx(S.Provider,{value:C,children:w})};f.displayName=o+"Provider";function g(y,x){var S;const w=((S=x==null?void 0:x[i])==null?void 0:S[d])||u,A=E.useContext(w);if(A)return A;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[f,g]}const a=()=>{const o=e.map(c=>E.createContext(c));return function(u){const d=(u==null?void 0:u[i])||o;return E.useMemo(()=>({[`__scope${i}`]:{...u,[i]:d}}),[u,d])}};return a.scopeName=i,[n,GF(a,...t)]}function GF(...i){const t=i[0];if(i.length===1)return t;const e=()=>{const n=i.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const c=n.reduce((u,{useScope:d,scopeName:f})=>{const y=d(o)[`__scope${f}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return e.scopeName=t.scopeName,e}var Cf=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},$F=lR[" useId ".trim().toString()]||(()=>{}),XF=0;function bf(i){const[t,e]=E.useState($F());return Cf(()=>{e(n=>n??String(XF++))},[i]),t?`radix-${t}`:""}var YF=lR[" useInsertionEffect ".trim().toString()]||Cf;function b_({prop:i,defaultProp:t,onChange:e=()=>{},caller:n}){const[a,o,c]=KF({defaultProp:t,onChange:e}),u=i!==void 0,d=u?i:a;{const g=E.useRef(i!==void 0);E.useEffect(()=>{const y=g.current;y!==u&&console.warn(`${n} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,n])}const f=E.useCallback(g=>{var y;if(u){const x=WF(g)?g(i):g;x!==i&&((y=c.current)==null||y.call(c,x))}else o(g)},[u,i,o,c]);return[d,f]}function KF({defaultProp:i,onChange:t}){const[e,n]=E.useState(i),a=E.useRef(e),o=E.useRef(t);return YF(()=>{o.current=t},[t]),E.useEffect(()=>{var c;a.current!==e&&((c=o.current)==null||c.call(o,e),a.current=e)},[e,a]),[e,n,o]}function WF(i){return typeof i=="function"}function Jy(i){const t=QF(i),e=E.forwardRef((n,a)=>{const{children:o,...c}=n,u=E.Children.toArray(o),d=u.find(JF);if(d){const f=d.props.children,g=u.map(y=>y===d?E.Children.count(f)>1?E.Children.only(null):E.isValidElement(f)?f.props.children:null:y);return b.jsx(t,{...c,ref:a,children:E.isValidElement(f)?E.cloneElement(f,void 0,g):null})}return b.jsx(t,{...c,ref:a,children:o})});return e.displayName=`${i}.Slot`,e}function QF(i){const t=E.forwardRef((e,n)=>{const{children:a,...o}=e;if(E.isValidElement(a)){const c=eI(a),u=tI(o,a.props);return a.type!==E.Fragment&&(u.ref=n?WR(n,c):c),E.cloneElement(a,u)}return E.Children.count(a)>1?E.Children.only(null):null});return t.displayName=`${i}.SlotClone`,t}var ZF=Symbol("radix.slottable");function JF(i){return E.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===ZF}function tI(i,t){const e={...t};for(const n in t){const a=i[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?e[n]=(...u)=>{const d=o(...u);return a(...u),d}:a&&(e[n]=a):n==="style"?e[n]={...a,...o}:n==="className"&&(e[n]=[a,o].filter(Boolean).join(" "))}return{...i,...e}}function eI(i){var n,a;let t=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?i.ref:(t=(a=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:a.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?i.props.ref:i.props.ref||i.ref)}var nI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],es=nI.reduce((i,t)=>{const e=Jy(`Primitive.${t}`),n=E.forwardRef((a,o)=>{const{asChild:c,...u}=a,d=c?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(d,{...u,ref:o})});return n.displayName=`Primitive.${t}`,{...i,[t]:n}},{});function sI(i,t){i&&SR.flushSync(()=>i.dispatchEvent(t))}function Ph(i){const t=E.useRef(i);return E.useEffect(()=>{t.current=i}),E.useMemo(()=>(...e)=>{var n;return(n=t.current)==null?void 0:n.call(t,...e)},[])}function iI(i,t=globalThis==null?void 0:globalThis.document){const e=Ph(i);E.useEffect(()=>{const n=a=>{a.key==="Escape"&&e(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[e,t])}var rI="DismissableLayer",Ew="dismissableLayer.update",aI="dismissableLayer.pointerDownOutside",oI="dismissableLayer.focusOutside",IT,QR=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ZR=E.forwardRef((i,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:c,onDismiss:u,...d}=i,f=E.useContext(QR),[g,y]=E.useState(null),x=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=E.useState({}),A=fr(t,O=>y(O)),S=Array.from(f.layers),[C]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),T=S.indexOf(C),R=g?S.indexOf(g):-1,L=f.layersWithOutsidePointerEventsDisabled.size>0,j=R>=T,I=uI(O=>{const H=O.target,Z=[...f.branches].some($=>$.contains(H));!j||Z||(a==null||a(O),c==null||c(O),O.defaultPrevented||u==null||u())},x),U=hI(O=>{const H=O.target;[...f.branches].some($=>$.contains(H))||(o==null||o(O),c==null||c(O),O.defaultPrevented||u==null||u())},x);return iI(O=>{R===f.layers.size-1&&(n==null||n(O),!O.defaultPrevented&&u&&(O.preventDefault(),u()))},x),E.useEffect(()=>{if(g)return e&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(IT=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),zT(),()=>{e&&f.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=IT)}},[g,x,e,f]),E.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),zT())},[g,f]),E.useEffect(()=>{const O=()=>w({});return document.addEventListener(Ew,O),()=>document.removeEventListener(Ew,O)},[]),b.jsx(es.div,{...d,ref:A,style:{pointerEvents:L?j?"auto":"none":void 0,...i.style},onFocusCapture:Ln(i.onFocusCapture,U.onFocusCapture),onBlurCapture:Ln(i.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Ln(i.onPointerDownCapture,I.onPointerDownCapture)})});ZR.displayName=rI;var lI="DismissableLayerBranch",cI=E.forwardRef((i,t)=>{const e=E.useContext(QR),n=E.useRef(null),a=fr(t,n);return E.useEffect(()=>{const o=n.current;if(o)return e.branches.add(o),()=>{e.branches.delete(o)}},[e.branches]),b.jsx(es.div,{...i,ref:a})});cI.displayName=lI;function uI(i,t=globalThis==null?void 0:globalThis.document){const e=Ph(i),n=E.useRef(!1),a=E.useRef(()=>{});return E.useEffect(()=>{const o=u=>{if(u.target&&!n.current){let d=function(){JR(aI,e,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);n.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,e]),{onPointerDownCapture:()=>n.current=!0}}function hI(i,t=globalThis==null?void 0:globalThis.document){const e=Ph(i),n=E.useRef(!1);return E.useEffect(()=>{const a=o=>{o.target&&!n.current&&JR(oI,e,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function zT(){const i=new CustomEvent(Ew);document.dispatchEvent(i)}function JR(i,t,e,{discrete:n}){const a=e.originalEvent.target,o=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:e});t&&a.addEventListener(i,t,{once:!0}),n?sI(a,o):a.dispatchEvent(o)}var Hx="focusScope.autoFocusOnMount",Vx="focusScope.autoFocusOnUnmount",UT={bubbles:!1,cancelable:!0},dI="FocusScope",tN=E.forwardRef((i,t)=>{const{loop:e=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...c}=i,[u,d]=E.useState(null),f=Ph(a),g=Ph(o),y=E.useRef(null),x=fr(t,S=>d(S)),w=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(n){let S=function(L){if(w.paused||!u)return;const j=L.target;u.contains(j)?y.current=j:io(y.current,{select:!0})},C=function(L){if(w.paused||!u)return;const j=L.relatedTarget;j!==null&&(u.contains(j)||io(y.current,{select:!0}))},T=function(L){if(document.activeElement===document.body)for(const I of L)I.removedNodes.length>0&&io(u)};document.addEventListener("focusin",S),document.addEventListener("focusout",C);const R=new MutationObserver(T);return u&&R.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",C),R.disconnect()}}},[n,u,w.paused]),E.useEffect(()=>{if(u){HT.add(w);const S=document.activeElement;if(!u.contains(S)){const T=new CustomEvent(Hx,UT);u.addEventListener(Hx,f),u.dispatchEvent(T),T.defaultPrevented||(fI(vI(eN(u)),{select:!0}),document.activeElement===S&&io(u))}return()=>{u.removeEventListener(Hx,f),setTimeout(()=>{const T=new CustomEvent(Vx,UT);u.addEventListener(Vx,g),u.dispatchEvent(T),T.defaultPrevented||io(S??document.body,{select:!0}),u.removeEventListener(Vx,g),HT.remove(w)},0)}}},[u,f,g,w]);const A=E.useCallback(S=>{if(!e&&!n||w.paused)return;const C=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,T=document.activeElement;if(C&&T){const R=S.currentTarget,[L,j]=pI(R);L&&j?!S.shiftKey&&T===j?(S.preventDefault(),e&&io(L,{select:!0})):S.shiftKey&&T===L&&(S.preventDefault(),e&&io(j,{select:!0})):T===R&&S.preventDefault()}},[e,n,w.paused]);return b.jsx(es.div,{tabIndex:-1,...c,ref:x,onKeyDown:A})});tN.displayName=dI;function fI(i,{select:t=!1}={}){const e=document.activeElement;for(const n of i)if(io(n,{select:t}),document.activeElement!==e)return}function pI(i){const t=eN(i),e=BT(t,i),n=BT(t.reverse(),i);return[e,n]}function eN(i){const t=[],e=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function BT(i,t){for(const e of i)if(!gI(e,{upTo:t}))return e}function gI(i,{upTo:t}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(t!==void 0&&i===t)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function mI(i){return i instanceof HTMLInputElement&&"select"in i}function io(i,{select:t=!1}={}){if(i&&i.focus){const e=document.activeElement;i.focus({preventScroll:!0}),i!==e&&mI(i)&&t&&i.select()}}var HT=yI();function yI(){let i=[];return{add(t){const e=i[0];t!==e&&(e==null||e.pause()),i=VT(i,t),i.unshift(t)},remove(t){var e;i=VT(i,t),(e=i[0])==null||e.resume()}}}function VT(i,t){const e=[...i],n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}function vI(i){return i.filter(t=>t.tagName!=="A")}var bI="Portal",nN=E.forwardRef((i,t)=>{var u;const{container:e,...n}=i,[a,o]=E.useState(!1);Cf(()=>o(!0),[]);const c=e||a&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?A3.createPortal(b.jsx(es.div,{...n,ref:t}),c):null});nN.displayName=bI;function xI(i,t){return E.useReducer((e,n)=>t[e][n]??e,i)}var yg=i=>{const{present:t,children:e}=i,n=wI(t),a=typeof e=="function"?e({present:n.isPresent}):E.Children.only(e),o=fr(n.ref,AI(a));return typeof e=="function"||n.isPresent?E.cloneElement(a,{ref:o}):null};yg.displayName="Presence";function wI(i){const[t,e]=E.useState(),n=E.useRef(null),a=E.useRef(i),o=E.useRef("none"),c=i?"mounted":"unmounted",[u,d]=xI(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=Xm(n.current);o.current=u==="mounted"?f:"none"},[u]),Cf(()=>{const f=n.current,g=a.current;if(g!==i){const x=o.current,w=Xm(f);i?d("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(g&&x!==w?"ANIMATION_OUT":"UNMOUNT"),a.current=i}},[i,d]),Cf(()=>{if(t){let f;const g=t.ownerDocument.defaultView??window,y=w=>{const S=Xm(n.current).includes(CSS.escape(w.animationName));if(w.target===t&&S&&(d("ANIMATION_END"),!a.current)){const C=t.style.animationFillMode;t.style.animationFillMode="forwards",f=g.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=C)})}},x=w=>{w.target===t&&(o.current=Xm(n.current))};return t.addEventListener("animationstart",x),t.addEventListener("animationcancel",y),t.addEventListener("animationend",y),()=>{g.clearTimeout(f),t.removeEventListener("animationstart",x),t.removeEventListener("animationcancel",y),t.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(f=>{n.current=f?getComputedStyle(f):null,e(f)},[])}}function Xm(i){return(i==null?void 0:i.animationName)||"none"}function AI(i){var n,a;let t=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?i.ref:(t=(a=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:a.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?i.props.ref:i.props.ref||i.ref)}var qx=0;function _I(){E.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??qT()),document.body.insertAdjacentElement("beforeend",i[1]??qT()),qx++,()=>{qx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),qx--}},[])}function qT(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var ar=function(){return ar=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ar.apply(this,arguments)};function sN(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(i);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(i,n[a])&&(e[n[a]]=i[n[a]]);return e}function SI(i,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return i.concat(o||Array.prototype.slice.call(t))}var dy="right-scroll-bar-position",fy="width-before-scroll-bar",EI="with-scroll-bars-hidden",CI="--removed-body-scroll-bar-size";function Gx(i,t){return typeof i=="function"?i(t):i&&(i.current=t),i}function TI(i,t){var e=E.useState(function(){return{value:i,callback:t,facade:{get current(){return e.value},set current(n){var a=e.value;a!==n&&(e.value=n,e.callback(n,a))}}}})[0];return e.callback=t,e.facade}var kI=typeof window<"u"?E.useLayoutEffect:E.useEffect,GT=new WeakMap;function RI(i,t){var e=TI(null,function(n){return i.forEach(function(a){return Gx(a,n)})});return kI(function(){var n=GT.get(e);if(n){var a=new Set(n),o=new Set(i),c=e.current;a.forEach(function(u){o.has(u)||Gx(u,null)}),o.forEach(function(u){a.has(u)||Gx(u,c)})}GT.set(e,i)},[i]),e}function NI(i){return i}function MI(i,t){t===void 0&&(t=NI);var e=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:i},useMedium:function(o){var c=t(o,n);return e.push(c),function(){e=e.filter(function(u){return u!==c})}},assignSyncMedium:function(o){for(n=!0;e.length;){var c=e;e=[],c.forEach(o)}e={push:function(u){return o(u)},filter:function(){return e}}},assignMedium:function(o){n=!0;var c=[];if(e.length){var u=e;e=[],u.forEach(o),c=e}var d=function(){var g=c;c=[],g.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),e={push:function(g){c.push(g),f()},filter:function(g){return c=c.filter(g),e}}}};return a}function DI(i){i===void 0&&(i={});var t=MI(null);return t.options=ar({async:!0,ssr:!1},i),t}var iN=function(i){var t=i.sideCar,e=sN(i,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return E.createElement(n,ar({},e))};iN.isSideCarExport=!0;function LI(i,t){return i.useMedium(t),iN}var rN=DI(),$x=function(){},Hv=E.forwardRef(function(i,t){var e=E.useRef(null),n=E.useState({onScrollCapture:$x,onWheelCapture:$x,onTouchMoveCapture:$x}),a=n[0],o=n[1],c=i.forwardProps,u=i.children,d=i.className,f=i.removeScrollBar,g=i.enabled,y=i.shards,x=i.sideCar,w=i.noRelative,A=i.noIsolation,S=i.inert,C=i.allowPinchZoom,T=i.as,R=T===void 0?"div":T,L=i.gapMode,j=sN(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=x,U=RI([e,t]),O=ar(ar({},j),a);return E.createElement(E.Fragment,null,g&&E.createElement(I,{sideCar:rN,removeScrollBar:f,shards:y,noRelative:w,noIsolation:A,inert:S,setCallbacks:o,allowPinchZoom:!!C,lockRef:e,gapMode:L}),c?E.cloneElement(E.Children.only(u),ar(ar({},O),{ref:U})):E.createElement(R,ar({},O,{className:d,ref:U}),u))});Hv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hv.classNames={fullWidth:fy,zeroRight:dy};var OI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jI(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var t=OI();return t&&i.setAttribute("nonce",t),i}function PI(i,t){i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}function FI(i){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(i)}var II=function(){var i=0,t=null;return{add:function(e){i==0&&(t=jI())&&(PI(t,e),FI(t)),i++},remove:function(){i--,!i&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},zI=function(){var i=II();return function(t,e){E.useEffect(function(){return i.add(t),function(){i.remove()}},[t&&e])}},aN=function(){var i=zI(),t=function(e){var n=e.styles,a=e.dynamic;return i(n,a),null};return t},UI={left:0,top:0,right:0,gap:0},Xx=function(i){return parseInt(i||"",10)||0},BI=function(i){var t=window.getComputedStyle(document.body),e=t[i==="padding"?"paddingLeft":"marginLeft"],n=t[i==="padding"?"paddingTop":"marginTop"],a=t[i==="padding"?"paddingRight":"marginRight"];return[Xx(e),Xx(n),Xx(a)]},HI=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return UI;var t=BI(i),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}},VI=aN(),Nu="data-scroll-locked",qI=function(i,t,e,n){var a=i.left,o=i.top,c=i.right,u=i.gap;return e===void 0&&(e="margin"),`
  .`.concat(EI,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(Nu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dy,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(fy,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(dy," .").concat(dy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(fy," .").concat(fy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Nu,`] {
    `).concat(CI,": ").concat(u,`px;
  }
`)},$T=function(){var i=parseInt(document.body.getAttribute(Nu)||"0",10);return isFinite(i)?i:0},GI=function(){E.useEffect(function(){return document.body.setAttribute(Nu,($T()+1).toString()),function(){var i=$T()-1;i<=0?document.body.removeAttribute(Nu):document.body.setAttribute(Nu,i.toString())}},[])},$I=function(i){var t=i.noRelative,e=i.noImportant,n=i.gapMode,a=n===void 0?"margin":n;GI();var o=E.useMemo(function(){return HI(a)},[a]);return E.createElement(VI,{styles:qI(o,!t,a,e?"":"!important")})},Cw=!1;if(typeof window<"u")try{var Ym=Object.defineProperty({},"passive",{get:function(){return Cw=!0,!0}});window.addEventListener("test",Ym,Ym),window.removeEventListener("test",Ym,Ym)}catch{Cw=!1}var vu=Cw?{passive:!1}:!1,XI=function(i){return i.tagName==="TEXTAREA"},oN=function(i,t){if(!(i instanceof Element))return!1;var e=window.getComputedStyle(i);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!XI(i)&&e[t]==="visible")},YI=function(i){return oN(i,"overflowY")},KI=function(i){return oN(i,"overflowX")},XT=function(i,t){var e=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=lN(i,n);if(a){var o=cN(i,n),c=o[1],u=o[2];if(c>u)return!0}n=n.parentNode}while(n&&n!==e.body);return!1},WI=function(i){var t=i.scrollTop,e=i.scrollHeight,n=i.clientHeight;return[t,e,n]},QI=function(i){var t=i.scrollLeft,e=i.scrollWidth,n=i.clientWidth;return[t,e,n]},lN=function(i,t){return i==="v"?YI(t):KI(t)},cN=function(i,t){return i==="v"?WI(t):QI(t)},ZI=function(i,t){return i==="h"&&t==="rtl"?-1:1},JI=function(i,t,e,n,a){var o=ZI(i,window.getComputedStyle(t).direction),c=o*n,u=e.target,d=t.contains(u),f=!1,g=c>0,y=0,x=0;do{if(!u)break;var w=cN(i,u),A=w[0],S=w[1],C=w[2],T=S-C-o*A;(A||T)&&lN(i,u)&&(y+=T,x+=A);var R=u.parentNode;u=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!d&&u!==document.body||d&&(t.contains(u)||t===u));return(g&&Math.abs(y)<1||!g&&Math.abs(x)<1)&&(f=!0),f},Km=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},YT=function(i){return[i.deltaX,i.deltaY]},KT=function(i){return i&&"current"in i?i.current:i},t5=function(i,t){return i[0]===t[0]&&i[1]===t[1]},e5=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},n5=0,bu=[];function s5(i){var t=E.useRef([]),e=E.useRef([0,0]),n=E.useRef(),a=E.useState(n5++)[0],o=E.useState(aN)[0],c=E.useRef(i);E.useEffect(function(){c.current=i},[i]),E.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(a));var S=SI([i.lockRef.current],(i.shards||[]).map(KT),!0).filter(Boolean);return S.forEach(function(C){return C.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),S.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(a))})}}},[i.inert,i.lockRef.current,i.shards]);var u=E.useCallback(function(S,C){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!c.current.allowPinchZoom;var T=Km(S),R=e.current,L="deltaX"in S?S.deltaX:R[0]-T[0],j="deltaY"in S?S.deltaY:R[1]-T[1],I,U=S.target,O=Math.abs(L)>Math.abs(j)?"h":"v";if("touches"in S&&O==="h"&&U.type==="range")return!1;var H=window.getSelection(),Z=H&&H.anchorNode,$=Z?Z===U||Z.contains(U):!1;if($)return!1;var W=XT(O,U);if(!W)return!0;if(W?I=O:(I=O==="v"?"h":"v",W=XT(O,U)),!W)return!1;if(!n.current&&"changedTouches"in S&&(L||j)&&(n.current=I),!I)return!0;var st=n.current||I;return JI(st,C,S,st==="h"?L:j)},[]),d=E.useCallback(function(S){var C=S;if(!(!bu.length||bu[bu.length-1]!==o)){var T="deltaY"in C?YT(C):Km(C),R=t.current.filter(function(I){return I.name===C.type&&(I.target===C.target||C.target===I.shadowParent)&&t5(I.delta,T)})[0];if(R&&R.should){C.cancelable&&C.preventDefault();return}if(!R){var L=(c.current.shards||[]).map(KT).filter(Boolean).filter(function(I){return I.contains(C.target)}),j=L.length>0?u(C,L[0]):!c.current.noIsolation;j&&C.cancelable&&C.preventDefault()}}},[]),f=E.useCallback(function(S,C,T,R){var L={name:S,delta:C,target:T,should:R,shadowParent:i5(T)};t.current.push(L),setTimeout(function(){t.current=t.current.filter(function(j){return j!==L})},1)},[]),g=E.useCallback(function(S){e.current=Km(S),n.current=void 0},[]),y=E.useCallback(function(S){f(S.type,YT(S),S.target,u(S,i.lockRef.current))},[]),x=E.useCallback(function(S){f(S.type,Km(S),S.target,u(S,i.lockRef.current))},[]);E.useEffect(function(){return bu.push(o),i.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:x}),document.addEventListener("wheel",d,vu),document.addEventListener("touchmove",d,vu),document.addEventListener("touchstart",g,vu),function(){bu=bu.filter(function(S){return S!==o}),document.removeEventListener("wheel",d,vu),document.removeEventListener("touchmove",d,vu),document.removeEventListener("touchstart",g,vu)}},[]);var w=i.removeScrollBar,A=i.inert;return E.createElement(E.Fragment,null,A?E.createElement(o,{styles:e5(a)}):null,w?E.createElement($I,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function i5(i){for(var t=null;i!==null;)i instanceof ShadowRoot&&(t=i.host,i=i.host),i=i.parentNode;return t}const r5=LI(rN,s5);var uN=E.forwardRef(function(i,t){return E.createElement(Hv,ar({},i,{ref:t,sideCar:r5}))});uN.classNames=Hv.classNames;var a5=function(i){if(typeof document>"u")return null;var t=Array.isArray(i)?i[0]:i;return t.ownerDocument.body},xu=new WeakMap,Wm=new WeakMap,Qm={},Yx=0,hN=function(i){return i&&(i.host||hN(i.parentNode))},o5=function(i,t){return t.map(function(e){if(i.contains(e))return e;var n=hN(e);return n&&i.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",i,". Doing nothing"),null)}).filter(function(e){return!!e})},l5=function(i,t,e,n){var a=o5(t,Array.isArray(i)?i:[i]);Qm[e]||(Qm[e]=new WeakMap);var o=Qm[e],c=[],u=new Set,d=new Set(a),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};a.forEach(f);var g=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(x){if(u.has(x))g(x);else try{var w=x.getAttribute(n),A=w!==null&&w!=="false",S=(xu.get(x)||0)+1,C=(o.get(x)||0)+1;xu.set(x,S),o.set(x,C),c.push(x),S===1&&A&&Wm.set(x,!0),C===1&&x.setAttribute(e,"true"),A||x.setAttribute(n,"true")}catch(T){console.error("aria-hidden: cannot operate on ",x,T)}})};return g(t),u.clear(),Yx++,function(){c.forEach(function(y){var x=xu.get(y)-1,w=o.get(y)-1;xu.set(y,x),o.set(y,w),x||(Wm.has(y)||y.removeAttribute(n),Wm.delete(y)),w||y.removeAttribute(e)}),Yx--,Yx||(xu=new WeakMap,xu=new WeakMap,Wm=new WeakMap,Qm={})}},c5=function(i,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),a=a5(i);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),l5(n,a,e,"aria-hidden")):function(){return null}},Vv="Dialog",[dN]=Bv(Vv),[u5,ji]=dN(Vv),fN=i=>{const{__scopeDialog:t,children:e,open:n,defaultOpen:a,onOpenChange:o,modal:c=!0}=i,u=E.useRef(null),d=E.useRef(null),[f,g]=b_({prop:n,defaultProp:a??!1,onChange:o,caller:Vv});return b.jsx(u5,{scope:t,triggerRef:u,contentRef:d,contentId:bf(),titleId:bf(),descriptionId:bf(),open:f,onOpenChange:g,onOpenToggle:E.useCallback(()=>g(y=>!y),[g]),modal:c,children:e})};fN.displayName=Vv;var pN="DialogTrigger",h5=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,a=ji(pN,e),o=fr(t,a.triggerRef);return b.jsx(es.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":A_(a.open),...n,ref:o,onClick:Ln(i.onClick,a.onOpenToggle)})});h5.displayName=pN;var x_="DialogPortal",[d5,gN]=dN(x_,{forceMount:void 0}),mN=i=>{const{__scopeDialog:t,forceMount:e,children:n,container:a}=i,o=ji(x_,t);return b.jsx(d5,{scope:t,forceMount:e,children:E.Children.map(n,c=>b.jsx(yg,{present:e||o.open,children:b.jsx(nN,{asChild:!0,container:a,children:c})}))})};mN.displayName=x_;var tv="DialogOverlay",yN=E.forwardRef((i,t)=>{const e=gN(tv,i.__scopeDialog),{forceMount:n=e.forceMount,...a}=i,o=ji(tv,i.__scopeDialog);return o.modal?b.jsx(yg,{present:n||o.open,children:b.jsx(p5,{...a,ref:t})}):null});yN.displayName=tv;var f5=Jy("DialogOverlay.RemoveScroll"),p5=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,a=ji(tv,e);return b.jsx(uN,{as:f5,allowPinchZoom:!0,shards:[a.contentRef],children:b.jsx(es.div,{"data-state":A_(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),mc="DialogContent",vN=E.forwardRef((i,t)=>{const e=gN(mc,i.__scopeDialog),{forceMount:n=e.forceMount,...a}=i,o=ji(mc,i.__scopeDialog);return b.jsx(yg,{present:n||o.open,children:o.modal?b.jsx(g5,{...a,ref:t}):b.jsx(m5,{...a,ref:t})})});vN.displayName=mc;var g5=E.forwardRef((i,t)=>{const e=ji(mc,i.__scopeDialog),n=E.useRef(null),a=fr(t,e.contentRef,n);return E.useEffect(()=>{const o=n.current;if(o)return c5(o)},[]),b.jsx(bN,{...i,ref:a,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ln(i.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=e.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Ln(i.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&o.preventDefault()}),onFocusOutside:Ln(i.onFocusOutside,o=>o.preventDefault())})}),m5=E.forwardRef((i,t)=>{const e=ji(mc,i.__scopeDialog),n=E.useRef(!1),a=E.useRef(!1);return b.jsx(bN,{...i,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,u;(c=i.onCloseAutoFocus)==null||c.call(i,o),o.defaultPrevented||(n.current||(u=e.triggerRef.current)==null||u.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var d,f;(d=i.onInteractOutside)==null||d.call(i,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((f=e.triggerRef.current)==null?void 0:f.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),bN=E.forwardRef((i,t)=>{const{__scopeDialog:e,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...c}=i,u=ji(mc,e),d=E.useRef(null),f=fr(t,d);return _I(),b.jsxs(b.Fragment,{children:[b.jsx(tN,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:b.jsx(ZR,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":A_(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(y5,{titleId:u.titleId}),b.jsx(b5,{contentRef:d,descriptionId:u.descriptionId})]})]})}),w_="DialogTitle",xN=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,a=ji(w_,e);return b.jsx(es.h2,{id:a.titleId,...n,ref:t})});xN.displayName=w_;var wN="DialogDescription",AN=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,a=ji(wN,e);return b.jsx(es.p,{id:a.descriptionId,...n,ref:t})});AN.displayName=wN;var _N="DialogClose",SN=E.forwardRef((i,t)=>{const{__scopeDialog:e,...n}=i,a=ji(_N,e);return b.jsx(es.button,{type:"button",...n,ref:t,onClick:Ln(i.onClick,()=>a.onOpenChange(!1))})});SN.displayName=_N;function A_(i){return i?"open":"closed"}var EN="DialogTitleWarning",[_7,CN]=qF(EN,{contentName:mc,titleName:w_,docsSlug:"dialog"}),y5=({titleId:i})=>{const t=CN(EN),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return E.useEffect(()=>{i&&(document.getElementById(i)||console.error(e))},[e,i]),null},v5="DialogDescriptionWarning",b5=({contentRef:i,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${CN(v5).contentName}}.`;return E.useEffect(()=>{var o;const a=(o=i.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,i,t]),null},x5=fN,w5=mN,TN=yN,kN=vN,RN=xN,NN=AN,A5=SN;const __=x5,_5=w5,MN=E.forwardRef(({className:i,...t},e)=>b.jsx(TN,{ref:e,className:`fixed inset-0 z-50 bg-black/50 backdrop-blur-sm ${i||""}`,...t}));MN.displayName=TN.displayName;const qv=E.forwardRef(({className:i,children:t,...e},n)=>b.jsxs(_5,{children:[b.jsx(MN,{}),b.jsxs(kN,{ref:n,className:`fixed left-[50%] top-[50%] z-50 w-full max-w-lg translate-x-[-50%] translate-y-[-50%] glass rounded-lg border p-6 shadow-lg ${i||""}`,...e,children:[t,b.jsxs(A5,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[b.jsx(jh,{className:"h-4 w-4"}),b.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qv.displayName=kN.displayName;const Gv=({className:i,...t})=>b.jsx("div",{className:`flex flex-col space-y-1.5 text-center sm:text-left ${i||""}`,...t});Gv.displayName="DialogHeader";const $v=E.forwardRef(({className:i,...t},e)=>b.jsx(RN,{ref:e,className:`text-lg font-semibold leading-none tracking-tight ${i||""}`,...t}));$v.displayName=RN.displayName;const DN=E.forwardRef(({className:i,...t},e)=>b.jsx(NN,{ref:e,className:`text-sm text-muted-foreground ${i||""}`,...t}));DN.displayName=NN.displayName;function S5({open:i,onOpenChange:t,stats:e}){if(!e)return null;const n=a=>new Date(a).toLocaleString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return b.jsx(__,{open:i,onOpenChange:t,children:b.jsxs(qv,{className:"sm:max-w-md",children:[b.jsx(Gv,{children:b.jsxs($v,{className:"flex items-center gap-2",children:[b.jsx(Ea,{className:"h-5 w-5"}),"Thng tin d n"]})}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"font-semibold text-lg",children:e.name}),b.jsx("p",{className:"text-sm text-muted-foreground",children:b.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs ${e.engine==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:e.engine})})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4 py-3 border-y",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(Y4,{className:"h-4 w-4 text-muted-foreground"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"Files"}),b.jsx("p",{className:"font-medium",children:e.fileCount})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(VR,{className:"h-4 w-4 text-muted-foreground"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"Folders"}),b.jsx("p",{className:"font-medium",children:e.folderCount})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(Oh,{className:"h-4 w-4 text-muted-foreground"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"Collaborators"}),b.jsx("p",{className:"font-medium",children:e.collaboratorCount})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(Z4,{className:"h-4 w-4 text-muted-foreground"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"Dung lng"}),b.jsx("p",{className:"font-medium",children:e.sizeFormatted})]})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx(Oh,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"Ch d n"}),b.jsx("p",{className:"text-sm font-medium",children:e.owner.name}),b.jsx("p",{className:"text-xs text-muted-foreground",children:e.owner.email})]})]}),b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx(Aw,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"Ngy to"}),b.jsx("p",{className:"text-sm",children:n(e.createdAt)})]})]}),b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx(Aw,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"Truy cp gn nht"}),b.jsx("p",{className:"text-sm",children:n(e.updatedAt)})]})]})]})]})]})})}function E5(i){const t=i+"CollectionProvider",[e,n]=Bv(t),[a,o]=e(t,{collectionRef:{current:null},itemMap:new Map}),c=S=>{const{scope:C,children:T}=S,R=mn.useRef(null),L=mn.useRef(new Map).current;return b.jsx(a,{scope:C,itemMap:L,collectionRef:R,children:T})};c.displayName=t;const u=i+"CollectionSlot",d=Jy(u),f=mn.forwardRef((S,C)=>{const{scope:T,children:R}=S,L=o(u,T),j=fr(C,L.collectionRef);return b.jsx(d,{ref:j,children:R})});f.displayName=u;const g=i+"CollectionItemSlot",y="data-radix-collection-item",x=Jy(g),w=mn.forwardRef((S,C)=>{const{scope:T,children:R,...L}=S,j=mn.useRef(null),I=fr(C,j),U=o(g,T);return mn.useEffect(()=>(U.itemMap.set(j,{ref:j,...L}),()=>void U.itemMap.delete(j))),b.jsx(x,{[y]:"",ref:I,children:R})});w.displayName=g;function A(S){const C=o(i+"CollectionConsumer",S);return mn.useCallback(()=>{const R=C.collectionRef.current;if(!R)return[];const L=Array.from(R.querySelectorAll(`[${y}]`));return Array.from(C.itemMap.values()).sort((U,O)=>L.indexOf(U.ref.current)-L.indexOf(O.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:c,Slot:f,ItemSlot:w},A,n]}var C5=E.createContext(void 0);function LN(i){const t=E.useContext(C5);return i||t||"ltr"}var Kx="rovingFocusGroup.onEntryFocus",T5={bubbles:!1,cancelable:!0},vg="RovingFocusGroup",[Tw,ON,k5]=E5(vg),[R5,jN]=Bv(vg,[k5]),[N5,M5]=R5(vg),PN=E.forwardRef((i,t)=>b.jsx(Tw.Provider,{scope:i.__scopeRovingFocusGroup,children:b.jsx(Tw.Slot,{scope:i.__scopeRovingFocusGroup,children:b.jsx(D5,{...i,ref:t})})}));PN.displayName=vg;var D5=E.forwardRef((i,t)=>{const{__scopeRovingFocusGroup:e,orientation:n,loop:a=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,...y}=i,x=E.useRef(null),w=fr(t,x),A=LN(o),[S,C]=b_({prop:c,defaultProp:u??null,onChange:d,caller:vg}),[T,R]=E.useState(!1),L=Ph(f),j=ON(e),I=E.useRef(!1),[U,O]=E.useState(0);return E.useEffect(()=>{const H=x.current;if(H)return H.addEventListener(Kx,L),()=>H.removeEventListener(Kx,L)},[L]),b.jsx(N5,{scope:e,orientation:n,dir:A,loop:a,currentTabStopId:S,onItemFocus:E.useCallback(H=>C(H),[C]),onItemShiftTab:E.useCallback(()=>R(!0),[]),onFocusableItemAdd:E.useCallback(()=>O(H=>H+1),[]),onFocusableItemRemove:E.useCallback(()=>O(H=>H-1),[]),children:b.jsx(es.div,{tabIndex:T||U===0?-1:0,"data-orientation":n,...y,ref:w,style:{outline:"none",...i.style},onMouseDown:Ln(i.onMouseDown,()=>{I.current=!0}),onFocus:Ln(i.onFocus,H=>{const Z=!I.current;if(H.target===H.currentTarget&&Z&&!T){const $=new CustomEvent(Kx,T5);if(H.currentTarget.dispatchEvent($),!$.defaultPrevented){const W=j().filter(z=>z.focusable),st=W.find(z=>z.active),ct=W.find(z=>z.id===S),nt=[st,ct,...W].filter(Boolean).map(z=>z.ref.current);zN(nt,g)}}I.current=!1}),onBlur:Ln(i.onBlur,()=>R(!1))})})}),FN="RovingFocusGroupItem",IN=E.forwardRef((i,t)=>{const{__scopeRovingFocusGroup:e,focusable:n=!0,active:a=!1,tabStopId:o,children:c,...u}=i,d=bf(),f=o||d,g=M5(FN,e),y=g.currentTabStopId===f,x=ON(e),{onFocusableItemAdd:w,onFocusableItemRemove:A,currentTabStopId:S}=g;return E.useEffect(()=>{if(n)return w(),()=>A()},[n,w,A]),b.jsx(Tw.ItemSlot,{scope:e,id:f,focusable:n,active:a,children:b.jsx(es.span,{tabIndex:y?0:-1,"data-orientation":g.orientation,...u,ref:t,onMouseDown:Ln(i.onMouseDown,C=>{n?g.onItemFocus(f):C.preventDefault()}),onFocus:Ln(i.onFocus,()=>g.onItemFocus(f)),onKeyDown:Ln(i.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){g.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const T=j5(C,g.orientation,g.dir);if(T!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let L=x().filter(j=>j.focusable).map(j=>j.ref.current);if(T==="last")L.reverse();else if(T==="prev"||T==="next"){T==="prev"&&L.reverse();const j=L.indexOf(C.currentTarget);L=g.loop?P5(L,j+1):L.slice(j+1)}setTimeout(()=>zN(L))}}),children:typeof c=="function"?c({isCurrentTabStop:y,hasTabStop:S!=null}):c})})});IN.displayName=FN;var L5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function O5(i,t){return t!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function j5(i,t,e){const n=O5(i.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return L5[n]}function zN(i,t=!1){const e=document.activeElement;for(const n of i)if(n===e||(n.focus({preventScroll:t}),document.activeElement!==e))return}function P5(i,t){return i.map((e,n)=>i[(t+n)%i.length])}var F5=PN,I5=IN,Xv="Tabs",[z5]=Bv(Xv,[jN]),UN=jN(),[U5,S_]=z5(Xv),BN=E.forwardRef((i,t)=>{const{__scopeTabs:e,value:n,onValueChange:a,defaultValue:o,orientation:c="horizontal",dir:u,activationMode:d="automatic",...f}=i,g=LN(u),[y,x]=b_({prop:n,onChange:a,defaultProp:o??"",caller:Xv});return b.jsx(U5,{scope:e,baseId:bf(),value:y,onValueChange:x,orientation:c,dir:g,activationMode:d,children:b.jsx(es.div,{dir:g,"data-orientation":c,...f,ref:t})})});BN.displayName=Xv;var HN="TabsList",VN=E.forwardRef((i,t)=>{const{__scopeTabs:e,loop:n=!0,...a}=i,o=S_(HN,e),c=UN(e);return b.jsx(F5,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:n,children:b.jsx(es.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});VN.displayName=HN;var qN="TabsTrigger",GN=E.forwardRef((i,t)=>{const{__scopeTabs:e,value:n,disabled:a=!1,...o}=i,c=S_(qN,e),u=UN(e),d=YN(c.baseId,n),f=KN(c.baseId,n),g=n===c.value;return b.jsx(I5,{asChild:!0,...u,focusable:!a,active:g,children:b.jsx(es.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:t,onMouseDown:Ln(i.onMouseDown,y=>{!a&&y.button===0&&y.ctrlKey===!1?c.onValueChange(n):y.preventDefault()}),onKeyDown:Ln(i.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(n)}),onFocus:Ln(i.onFocus,()=>{const y=c.activationMode!=="manual";!g&&!a&&y&&c.onValueChange(n)})})})});GN.displayName=qN;var $N="TabsContent",XN=E.forwardRef((i,t)=>{const{__scopeTabs:e,value:n,forceMount:a,children:o,...c}=i,u=S_($N,e),d=YN(u.baseId,n),f=KN(u.baseId,n),g=n===u.value,y=E.useRef(g);return E.useEffect(()=>{const x=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(x)},[]),b.jsx(yg,{present:a||g,children:({present:x})=>b.jsx(es.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!x,id:f,tabIndex:0,...c,ref:t,style:{...i.style,animationDuration:y.current?"0s":void 0},children:x&&o})})});XN.displayName=$N;function YN(i,t){return`${i}-trigger-${t}`}function KN(i,t){return`${i}-content-${t}`}var B5=BN,WN=VN,QN=GN,ZN=XN;const H5=B5,JN=E.forwardRef(({className:i="",...t},e)=>b.jsx(WN,{ref:e,className:`inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground ${i}`,...t}));JN.displayName=WN.displayName;const kw=E.forwardRef(({className:i="",...t},e)=>b.jsx(QN,{ref:e,className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm ${i}`,...t}));kw.displayName=QN.displayName;const Rw=E.forwardRef(({className:i="",...t},e)=>b.jsx(ZN,{ref:e,className:`mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${i}`,...t}));Rw.displayName=ZN.displayName;function V5({open:i,onOpenChange:t,user:e,onUpdate:n}){const[a,o]=E.useState(e.name),[c,u]=E.useState(e.avatar||""),[d,f]=E.useState(!1),[g,y]=E.useState(!1),[x,w]=E.useState(e.avatar||""),[A,S]=E.useState(""),[C,T]=E.useState(""),[R,L]=E.useState(""),[j,I]=E.useState(!1),U=async $=>{var st;const W=(st=$.target.files)==null?void 0:st[0];if(W){if(!W.type.startsWith("image/")){alert("Vui lng chn file nh");return}if(W.size>2*1024*1024){alert("Kch thc nh ti a 2MB");return}f(!0);try{const ct=new FileReader;ct.onload=X=>{var _t;w((_t=X.target)==null?void 0:_t.result)},ct.readAsDataURL(W);const lt=new FormData;lt.append("file",W);const nt=localStorage.getItem("heytex_token"),z=await fetch("/api/upload/avatar",{method:"POST",headers:{Authorization:`Bearer ${nt}`},body:lt});if(!z.ok){const X=await z.json();throw new Error(X.error||"Upload failed")}const q=await z.json();u(q.url)}catch(ct){console.error("Upload error:",ct),alert(ct.message||"Khng th ti nh ln"),w(e.avatar||"")}finally{f(!1)}}},O=async()=>{if(!a.trim()){alert("Vui lng nhp tn");return}y(!0);try{const $=localStorage.getItem("heytex_token"),W=await fetch("/api/auth/me",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify({name:a.trim(),avatar:c||void 0})});if(!W.ok){const st=await W.json();throw new Error(st.error||"Update failed")}n(),t(!1)}catch($){console.error("Update error:",$),alert($.message||"Khng th cp nht thng tin")}finally{y(!1)}},H=async()=>{if(!A||!C||!R){alert("Vui lng in y  thng tin");return}if(C.length<6){alert("Mt khu mi phi c t nht 6 k t");return}if(C!==R){alert("Mt khu mi khng khp");return}I(!0);try{const $=localStorage.getItem("heytex_token"),W=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify({currentPassword:A,newPassword:C})});if(!W.ok){const st=await W.json();throw new Error(st.error||"Change password failed")}alert("i mt khu thnh cng"),S(""),T(""),L("")}catch($){console.error("Change password error:",$),alert($.message||"Khng th i mt khu")}finally{I(!1)}},Z=$=>new Date($).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return b.jsx(__,{open:i,onOpenChange:t,children:b.jsxs(qv,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[b.jsx(Gv,{children:b.jsx($v,{children:"Thng tin c nhn"})}),b.jsxs(H5,{defaultValue:"profile",className:"w-full",children:[b.jsxs(JN,{className:"grid w-full grid-cols-2",children:[b.jsx(kw,{value:"profile",children:"Thng tin"}),b.jsx(kw,{value:"password",children:"i mt khu"})]}),b.jsxs(Rw,{value:"profile",className:"space-y-6 py-4",children:[b.jsxs("div",{className:"flex flex-col items-center gap-4",children:[b.jsxs("div",{className:"relative group",children:[b.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-muted flex items-center justify-center border-2 border-border",children:x?b.jsx("img",{src:x,alt:a,className:"w-full h-full object-cover"}):b.jsx(YR,{className:"w-12 h-12 text-muted-foreground"})}),b.jsx("label",{htmlFor:"avatar-upload",className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:b.jsx(S4,{className:"w-6 h-6 text-white"})}),b.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:U,disabled:d})]}),b.jsx("p",{className:"text-sm text-muted-foreground",children:d?"ang ti ln...":"Click  thay i nh i din"})]}),e.stats&&b.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:b.jsx(Di,{className:"w-5 h-5 text-blue-500"})}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"D n LaTeX"}),b.jsx("p",{className:"text-2xl font-bold",children:e.stats.latexProjects})]})]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:b.jsx(Di,{className:"w-5 h-5 text-purple-500"})}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"D n Typst"}),b.jsx("p",{className:"text-2xl font-bold",children:e.stats.typstProjects})]})]})]}),b.jsxs("div",{className:"space-y-4 p-4 bg-muted/50 rounded-lg",children:[b.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[b.jsx(Aw,{className:"w-4 h-4"}),"Thng tin ti khon"]}),b.jsxs("div",{className:"space-y-2 text-sm",children:[b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-muted-foreground",children:"Ngy ng k:"}),b.jsx("span",{className:"font-medium",children:Z(e.createdAt)})]}),e.lastLoginAt&&b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-muted-foreground",children:"ng nhp cui:"}),b.jsx("span",{className:"font-medium",children:Z(e.lastLoginAt)})]})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{className:"text-sm font-medium",children:"Tn hin th"}),b.jsx(Dn,{value:a,onChange:$=>o($.target.value),placeholder:"Nhp tn ca bn",maxLength:50})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{className:"text-sm font-medium",children:"Email"}),b.jsx(Dn,{value:e.email,disabled:!0,className:"bg-muted cursor-not-allowed"}),b.jsx("p",{className:"text-xs text-muted-foreground",children:"Email khng th thay i"})]}),b.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[b.jsxs(te,{variant:"outline",onClick:()=>t(!1),disabled:g||d,children:[b.jsx(jh,{className:"w-4 h-4 mr-2"}),"Hy"]}),b.jsxs(te,{onClick:O,disabled:g||d||a.trim()===e.name&&c===e.avatar,children:[b.jsx(GR,{className:"w-4 h-4 mr-2"}),g?"ang lu...":"Lu"]})]})]}),b.jsxs(Rw,{value:"password",className:"space-y-6 py-4",children:[b.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:b.jsxs("div",{className:"flex items-start gap-3",children:[b.jsx(OT,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("h3",{className:"font-semibold",children:"i mt khu"}),b.jsx("p",{className:"text-sm text-muted-foreground",children:"m bo mt khu ca bn c t nht 6 k t v kh on"})]})]})}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{className:"text-sm font-medium",children:"Mt khu hin ti"}),b.jsx(Dn,{type:"password",value:A,onChange:$=>S($.target.value),placeholder:"Nhp mt khu hin ti"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{className:"text-sm font-medium",children:"Mt khu mi"}),b.jsx(Dn,{type:"password",value:C,onChange:$=>T($.target.value),placeholder:"Nhp mt khu mi (ti thiu 6 k t)"})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{className:"text-sm font-medium",children:"Xc nhn mt khu mi"}),b.jsx(Dn,{type:"password",value:R,onChange:$=>L($.target.value),placeholder:"Nhp li mt khu mi"})]})]}),b.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[b.jsxs(te,{variant:"outline",onClick:()=>{S(""),T(""),L("")},disabled:j,children:[b.jsx(jh,{className:"w-4 h-4 mr-2"}),"Xa"]}),b.jsxs(te,{onClick:H,disabled:j||!A||!C||!R,children:[b.jsx(OT,{className:"w-4 h-4 mr-2"}),j?"ang i...":"i mt khu"]})]})]})]})]})})}function q5({open:i,onOpenChange:t,onCreate:e}){const[n,a]=E.useState(""),[o,c]=E.useState(null),[u,d]=E.useState(null),[f,g]=E.useState({LATEX:[],TYPST:[]}),[y,x]=E.useState(!1),[w,A]=E.useState(!1);E.useEffect(()=>{i&&S()},[i]);const S=async()=>{x(!0);try{const R=localStorage.getItem("heytex_token"),L=await fetch("/api/templates",{headers:{Authorization:`Bearer ${R}`}});if(L.ok){const j=await L.json();g(j.templates)}}catch(R){console.error("Failed to load templates:",R)}finally{x(!1)}},C=async()=>{if(!(!n.trim()||!o)){A(!0);try{await e({name:n.trim(),engine:o,templateId:u==null?void 0:u.id}),a(""),c(null),d(null),t(!1)}catch(R){console.error("Failed to create project:",R)}finally{A(!1)}}},T=o?f[o]||[]:[];return b.jsx(__,{open:i,onOpenChange:t,children:b.jsxs(qv,{className:"max-w-4xl w-full h-[600px] overflow-hidden flex flex-col",children:[b.jsxs(Gv,{className:"pb-4",children:[b.jsx($v,{children:"To d n mi"}),b.jsx(DN,{children:"Chn engine v template  bt u d n mi"})]}),b.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col gap-4",children:[b.jsx("div",{children:b.jsx(Dn,{value:n,onChange:R=>a(R.target.value),placeholder:"Nhp tn d n...",maxLength:100,autoFocus:!0})}),b.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4 min-h-0",children:[b.jsxs("div",{className:"flex flex-col border rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-4 py-3 bg-muted/50 border-b",children:b.jsx("h3",{className:"text-sm font-semibold",children:"Chn Engine"})}),b.jsx("div",{className:"flex-1 overflow-y-auto",children:y?b.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"ang ti..."}):b.jsxs("div",{className:"divide-y",children:[b.jsxs("button",{type:"button",onClick:()=>{c("TYPST"),d(null)},className:`w-full px-4 py-3 flex items-center justify-between hover:bg-muted/50 transition-colors ${o==="TYPST"?"bg-muted":""}`,children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Di,{className:"w-5 h-5 text-cyan-500"}),b.jsxs("div",{className:"text-left",children:[b.jsx("div",{className:"font-medium",children:"Typst"}),b.jsx("div",{className:"text-xs text-muted-foreground",children:"Nhanh, hin i"})]})]}),o==="TYPST"&&b.jsx(RT,{className:"w-4 h-4 text-muted-foreground"})]}),b.jsxs("button",{type:"button",onClick:()=>{c("LATEX"),d(null)},className:`w-full px-4 py-3 flex items-center justify-between hover:bg-muted/50 transition-colors ${o==="LATEX"?"bg-muted":""}`,children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Di,{className:"w-5 h-5 text-orange-500"}),b.jsxs("div",{className:"text-left",children:[b.jsx("div",{className:"font-medium",children:"LaTeX"}),b.jsx("div",{className:"text-xs text-muted-foreground",children:"Mnh m, truyn thng"})]})]}),o==="LATEX"&&b.jsx(RT,{className:"w-4 h-4 text-muted-foreground"})]})]})})]}),b.jsxs("div",{className:"flex flex-col border rounded-lg overflow-hidden",children:[b.jsx("div",{className:"px-4 py-3 bg-muted/50 border-b",children:b.jsx("h3",{className:"text-sm font-semibold",children:"Chn Template"})}),b.jsx("div",{className:"flex-1 overflow-y-auto",children:o?T.length===0?b.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Khng c template"}):b.jsx("div",{className:"divide-y",children:T.map(R=>b.jsx("button",{type:"button",onClick:()=>d(R),className:`w-full px-4 py-3 flex items-start gap-3 hover:bg-muted/50 transition-colors text-left ${(u==null?void 0:u.id)===R.id?"bg-muted":""}`,children:b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"font-medium flex items-center gap-2",children:[R.name,(u==null?void 0:u.id)===R.id&&b.jsx(HR,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),b.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:R.description})]})},R.id))}):b.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Chn engine  xem templates"})})]})]}),(o||u)&&b.jsx("div",{className:"p-3 bg-muted/50 rounded-lg text-sm",children:b.jsxs("div",{className:"flex items-center gap-4",children:[o&&b.jsxs("div",{children:[b.jsx("span",{className:"text-muted-foreground",children:"Engine:"})," ",b.jsx("span",{className:"font-medium",children:o})]}),u&&b.jsxs("div",{children:[b.jsx("span",{className:"text-muted-foreground",children:"Template:"})," ",b.jsx("span",{className:"font-medium",children:u.name})]})]})})]}),b.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[b.jsxs(te,{variant:"outline",onClick:()=>t(!1),disabled:w,children:[b.jsx(jh,{className:"w-4 h-4 mr-2"}),"Hy"]}),b.jsx(te,{onClick:C,disabled:!n.trim()||!o||w,children:w?"ang to...":"To d n"})]})]})})}function G5(){const i=Ho(),{user:t,logout:e}=Vo(),{theme:n,toggleTheme:a}=CR(),[o,c]=E.useState([]),[u,d]=E.useState(!0),[f,g]=E.useState(!1),[y,x]=E.useState("grid"),[w,A]=E.useState(!1),[S,C]=E.useState(null),[T,R]=E.useState(!1);E.useEffect(()=>{L()},[]);const L=async()=>{try{const{projects:W}=await Mn.getProjects();c(W)}catch(W){console.error("Failed to load projects:",W)}finally{d(!1)}},j=async W=>{try{const{project:st}=await Mn.createProject({name:W.name,engine:W.engine,templateId:W.templateId});c([st,...o]),i(`/editor/${st.id}`)}catch(st){throw console.error("Failed to create project:",st),st}},I=async W=>{if(confirm("Bn c chc mun xa d n ny?"))try{await Mn.deleteProject(W),c(o.filter(st=>st.id!==W))}catch(st){console.error("Failed to delete project:",st)}},U=async W=>{try{const ct=await(await fetch(`/api/projects/${W.id}/download/zip`,{headers:{Authorization:`Bearer ${localStorage.getItem("heytex_token")}`}})).blob(),lt=window.URL.createObjectURL(ct),nt=document.createElement("a");nt.href=lt,nt.download=`${W.name}.zip`,nt.click()}catch(st){console.error("Failed to download ZIP:",st)}},O=async W=>{try{const st=await fetch(`/api/projects/${W.id}/download/pdf`,{headers:{Authorization:`Bearer ${localStorage.getItem("heytex_token")}`}});if(!st.ok){alert("PDF cha c bin dch. Vui lng m d n v bin dch trc.");return}const ct=await st.blob(),lt=window.URL.createObjectURL(ct),nt=document.createElement("a");nt.href=lt,nt.download=`${W.name}.pdf`,nt.click()}catch(st){console.error("Failed to download PDF:",st)}},H=async W=>{try{const ct=await(await fetch(`/api/projects/${W}/stats`,{headers:{Authorization:`Bearer ${localStorage.getItem("heytex_token")}`}})).json();C(ct.stats),A(!0)}catch(st){console.error("Failed to load project stats:",st)}},Z=()=>{e(),i("/login")},$=()=>{window.location.reload()};return u?b.jsx("div",{className:"h-screen flex items-center justify-center",children:b.jsx(or,{size:"lg"})}):b.jsxs("div",{className:"min-h-screen bg-background",children:[b.jsx("header",{className:"sticky top-0 z-50 glass border-b",children:b.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Ea,{className:"h-8 w-8 text-primary"}),b.jsx("span",{className:"text-xl font-bold",children:"HeyTeX"})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[(t==null?void 0:t.isAdmin)&&b.jsxs(te,{variant:"outline",onClick:()=>i("/admin"),children:[b.jsx($R,{className:"h-4 w-4 mr-2"}),"Admin Panel"]}),b.jsx(te,{variant:"ghost",size:"icon",onClick:a,children:n==="dark"?b.jsx(XR,{className:"h-5 w-5"}):b.jsx(qR,{className:"h-5 w-5"})}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("button",{onClick:()=>R(!0),className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center hover:bg-primary/30 transition-colors cursor-pointer",title:"Thng tin c nhn",children:t!=null&&t.avatar?b.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full rounded-full object-cover"}):b.jsx(YR,{className:"h-4 w-4 text-primary"})}),b.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:t==null?void 0:t.name})]}),b.jsx(te,{variant:"ghost",size:"icon",onClick:Z,children:b.jsx(lF,{className:"h-5 w-5"})})]})]})}),b.jsxs("main",{className:"container mx-auto px-6 py-8",children:[b.jsxs("div",{className:"flex items-center justify-between mb-8",children:[b.jsxs("div",{children:[b.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"D n ca ti"}),b.jsxs("p",{className:"text-muted-foreground mt-1",children:[o.length," / 50 d n"]})]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsxs("div",{className:"flex items-center gap-1 p-1 glass rounded-lg",children:[b.jsx("button",{onClick:()=>x("grid"),className:`p-2 rounded transition-colors ${y==="grid"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,title:"Xem dng li",children:b.jsx(nF,{className:"h-4 w-4"})}),b.jsx("button",{onClick:()=>x("list"),className:`p-2 rounded transition-colors ${y==="list"?"bg-primary text-primary-foreground":"hover:bg-muted"}`,title:"Xem dng danh sch",children:b.jsx(iF,{className:"h-4 w-4"})})]}),b.jsxs(te,{onClick:()=>g(!0),className:"gap-2",children:[b.jsx(_w,{className:"h-4 w-4"}),"To d n mi"]})]})]}),o.length===0?b.jsxs("div",{className:"text-center py-16",children:[b.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-muted flex items-center justify-center",children:b.jsx(v_,{className:"h-10 w-10 text-muted-foreground"})}),b.jsx("h3",{className:"text-xl font-medium text-foreground mb-2",children:"Cha c d n no"}),b.jsx("p",{className:"text-muted-foreground mb-6",children:"Bt u bng cch to d n LaTeX hoc Typst u tin ca bn"}),b.jsxs(te,{onClick:()=>g(!0),children:[b.jsx(_w,{className:"h-4 w-4 mr-2"}),"To d n u tin"]})]}):b.jsx("div",{className:y==="grid"?"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"space-y-3",children:o.map(W=>b.jsx(VF,{project:W,viewMode:y,onDelete:I,onDownloadZip:U,onDownloadPdf:O,onShowInfo:H},W.id))})]}),b.jsx(S5,{open:w,onOpenChange:A,stats:S}),b.jsx(q5,{open:f,onOpenChange:g,onCreate:j}),t&&b.jsx(V5,{open:T,onOpenChange:R,user:{id:t.id,name:t.name,email:t.email,avatar:t.avatar,createdAt:t.createdAt||new Date().toISOString(),lastLoginAt:t.lastLoginAt,stats:t.stats},onUpdate:$})]})}const $5="modulepreload",X5=function(i){return"/"+i},WT={},bl=function(t,e,n){let a=Promise.resolve();if(e&&e.length>0){let c=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=c(e.map(f=>{if(f=X5(f),f in WT)return;WT[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const x=document.createElement("link");if(x.rel=g?"stylesheet":$5,g||(x.as="script"),x.crossOrigin="",x.href=f,d&&x.setAttribute("nonce",d),document.head.appendChild(x),g)return new Promise((w,A)=>{x.addEventListener("load",w),x.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})};function QT(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=Array(t);e<t;e++)n[e]=i[e];return n}function Y5(i){if(Array.isArray(i))return i}function K5(i,t,e){return(t=nz(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function W5(i,t){var e=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var n,a,o,c,u=[],d=!0,f=!1;try{if(o=(e=e.call(i)).next,t!==0)for(;!(d=(n=o.call(e)).done)&&(u.push(n.value),u.length!==t);d=!0);}catch(g){f=!0,a=g}finally{try{if(!d&&e.return!=null&&(c=e.return(),Object(c)!==c))return}finally{if(f)throw a}}return u}}function Q5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZT(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,n)}return e}function JT(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(e),!0).forEach(function(n){K5(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ZT(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function Z5(i,t){if(i==null)return{};var e,n,a=J5(i,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(n=0;n<o.length;n++)e=o[n],t.indexOf(e)===-1&&{}.propertyIsEnumerable.call(i,e)&&(a[e]=i[e])}return a}function J5(i,t){if(i==null)return{};var e={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(t.indexOf(n)!==-1)continue;e[n]=i[n]}return e}function tz(i,t){return Y5(i)||W5(i,t)||sz(i,t)||Q5()}function ez(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function nz(i){var t=ez(i,"string");return typeof t=="symbol"?t:t+""}function sz(i,t){if(i){if(typeof i=="string")return QT(i,t);var e={}.toString.call(i).slice(8,-1);return e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set"?Array.from(i):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?QT(i,t):void 0}}function iz(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function tk(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),e.push.apply(e,n)}return e}function ek(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?tk(Object(e),!0).forEach(function(n){iz(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):tk(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function rz(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return function(n){return t.reduceRight(function(a,o){return o(a)},n)}}function ef(i){return function t(){for(var e=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=i.length?i.apply(this,a):function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return t.apply(e,[].concat(a,u))}}}function ev(i){return{}.toString.call(i).includes("Object")}function az(i){return!Object.keys(i).length}function Tf(i){return typeof i=="function"}function oz(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function lz(i,t){return ev(t)||Lo("changeType"),Object.keys(t).some(function(e){return!oz(i,e)})&&Lo("changeField"),t}function cz(i){Tf(i)||Lo("selectorType")}function uz(i){Tf(i)||ev(i)||Lo("handlerType"),ev(i)&&Object.values(i).some(function(t){return!Tf(t)})&&Lo("handlersType")}function hz(i){i||Lo("initialIsRequired"),ev(i)||Lo("initialType"),az(i)&&Lo("initialContent")}function dz(i,t){throw new Error(i[t]||i.default)}var fz={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Lo=ef(dz)(fz),Zm={changes:lz,selector:cz,handler:uz,initial:hz};function pz(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Zm.initial(i),Zm.handler(t);var e={current:i},n=ef(yz)(e,t),a=ef(mz)(e),o=ef(Zm.changes)(i),c=ef(gz)(e);function u(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return Zm.selector(f),f(e.current)}function d(f){rz(n,a,o,c)(f)}return[u,d]}function gz(i,t){return Tf(t)?t(i.current):t}function mz(i,t){return i.current=ek(ek({},i.current),t),t}function yz(i,t,e){return Tf(t)?t(i.current):Object.keys(e).forEach(function(n){var a;return(a=t[n])===null||a===void 0?void 0:a.call(t,i.current[n])}),e}var vz={create:pz},bz={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function xz(i){return function t(){for(var e=this,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.length>=i.length?i.apply(this,a):function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return t.apply(e,[].concat(a,u))}}}function wz(i){return{}.toString.call(i).includes("Object")}function Az(i){return i||nk("configIsRequired"),wz(i)||nk("configType"),i.urls?(_z(),{paths:{vs:i.urls.monacoBase}}):i}function _z(){console.warn(t2.deprecation)}function Sz(i,t){throw new Error(i[t]||i.default)}var t2={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},nk=xz(Sz)(t2),Ez={config:Az},Cz=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(a){return e.reduceRight(function(o,c){return c(o)},a)}};function e2(i,t){return Object.keys(t).forEach(function(e){t[e]instanceof Object&&i[e]&&Object.assign(t[e],e2(i[e],t[e]))}),JT(JT({},i),t)}var Tz={type:"cancelation",msg:"operation is manually canceled"};function Wx(i){var t=!1,e=new Promise(function(n,a){i.then(function(o){return t?a(Tz):n(o)}),i.catch(a)});return e.cancel=function(){return t=!0},e}var kz=["monaco"],Rz=vz.create({config:bz,isInitialized:!1,resolve:null,reject:null,monaco:null}),n2=tz(Rz,2),bg=n2[0],Yv=n2[1];function Nz(i){var t=Ez.config(i),e=t.monaco,n=Z5(t,kz);Yv(function(a){return{config:e2(a.config,n),monaco:e}})}function Mz(){var i=bg(function(t){var e=t.monaco,n=t.isInitialized,a=t.resolve;return{monaco:e,isInitialized:n,resolve:a}});if(!i.isInitialized){if(Yv({isInitialized:!0}),i.monaco)return i.resolve(i.monaco),Wx(Qx);if(window.monaco&&window.monaco.editor)return s2(window.monaco),i.resolve(window.monaco),Wx(Qx);Cz(Dz,Oz)(jz)}return Wx(Qx)}function Dz(i){return document.body.appendChild(i)}function Lz(i){var t=document.createElement("script");return i&&(t.src=i),t}function Oz(i){var t=bg(function(n){var a=n.config,o=n.reject;return{config:a,reject:o}}),e=Lz("".concat(t.config.paths.vs,"/loader.js"));return e.onload=function(){return i()},e.onerror=t.reject,e}function jz(){var i=bg(function(e){var n=e.config,a=e.resolve,o=e.reject;return{config:n,resolve:a,reject:o}}),t=window.require;t.config(i.config),t(["vs/editor/editor.main"],function(e){var n=e.m||e;s2(n),i.resolve(n)},function(e){i.reject(e)})}function s2(i){bg().monaco||Yv({monaco:i})}function Pz(){return bg(function(i){var t=i.monaco;return t})}var Qx=new Promise(function(i,t){return Yv({resolve:i,reject:t})}),i2={config:Nz,init:Mz,__getMonacoInstance:Pz},Fz={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Zx=Fz,Iz={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},zz=Iz;function Uz({children:i}){return mn.createElement("div",{style:zz.container},i)}var Bz=Uz,Hz=Bz;function Vz({width:i,height:t,isEditorReady:e,loading:n,_ref:a,className:o,wrapperProps:c}){return mn.createElement("section",{style:{...Zx.wrapper,width:i,height:t},...c},!e&&mn.createElement(Hz,null,n),mn.createElement("div",{ref:a,style:{...Zx.fullWidth,...!e&&Zx.hide},className:o}))}var qz=Vz,r2=E.memo(qz);function Gz(i){E.useEffect(i,[])}var a2=Gz;function $z(i,t,e=!0){let n=E.useRef(!0);E.useEffect(n.current||!e?()=>{n.current=!1}:i,t)}var Is=$z;function xf(){}function ku(i,t,e,n){return Xz(i,n)||Yz(i,t,e,n)}function Xz(i,t){return i.editor.getModel(o2(i,t))}function Yz(i,t,e,n){return i.editor.createModel(t,e,n?o2(i,n):void 0)}function o2(i,t){return i.Uri.parse(t)}function Kz({original:i,modified:t,language:e,originalLanguage:n,modifiedLanguage:a,originalModelPath:o,modifiedModelPath:c,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:d=!1,theme:f="light",loading:g="Loading...",options:y={},height:x="100%",width:w="100%",className:A,wrapperProps:S={},beforeMount:C=xf,onMount:T=xf}){let[R,L]=E.useState(!1),[j,I]=E.useState(!0),U=E.useRef(null),O=E.useRef(null),H=E.useRef(null),Z=E.useRef(T),$=E.useRef(C),W=E.useRef(!1);a2(()=>{let nt=i2.init();return nt.then(z=>(O.current=z)&&I(!1)).catch(z=>(z==null?void 0:z.type)!=="cancelation"&&console.error("Monaco initialization: error:",z)),()=>U.current?lt():nt.cancel()}),Is(()=>{if(U.current&&O.current){let nt=U.current.getOriginalEditor(),z=ku(O.current,i||"",n||e||"text",o||"");z!==nt.getModel()&&nt.setModel(z)}},[o],R),Is(()=>{if(U.current&&O.current){let nt=U.current.getModifiedEditor(),z=ku(O.current,t||"",a||e||"text",c||"");z!==nt.getModel()&&nt.setModel(z)}},[c],R),Is(()=>{let nt=U.current.getModifiedEditor();nt.getOption(O.current.editor.EditorOption.readOnly)?nt.setValue(t||""):t!==nt.getValue()&&(nt.executeEdits("",[{range:nt.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),nt.pushUndoStop())},[t],R),Is(()=>{var nt,z;(z=(nt=U.current)==null?void 0:nt.getModel())==null||z.original.setValue(i||"")},[i],R),Is(()=>{let{original:nt,modified:z}=U.current.getModel();O.current.editor.setModelLanguage(nt,n||e||"text"),O.current.editor.setModelLanguage(z,a||e||"text")},[e,n,a],R),Is(()=>{var nt;(nt=O.current)==null||nt.editor.setTheme(f)},[f],R),Is(()=>{var nt;(nt=U.current)==null||nt.updateOptions(y)},[y],R);let st=E.useCallback(()=>{var q;if(!O.current)return;$.current(O.current);let nt=ku(O.current,i||"",n||e||"text",o||""),z=ku(O.current,t||"",a||e||"text",c||"");(q=U.current)==null||q.setModel({original:nt,modified:z})},[e,t,a,i,n,o,c]),ct=E.useCallback(()=>{var nt;!W.current&&H.current&&(U.current=O.current.editor.createDiffEditor(H.current,{automaticLayout:!0,...y}),st(),(nt=O.current)==null||nt.editor.setTheme(f),L(!0),W.current=!0)},[y,f,st]);E.useEffect(()=>{R&&Z.current(U.current,O.current)},[R]),E.useEffect(()=>{!j&&!R&&ct()},[j,R,ct]);function lt(){var z,q,X,_t;let nt=(z=U.current)==null?void 0:z.getModel();u||((q=nt==null?void 0:nt.original)==null||q.dispose()),d||((X=nt==null?void 0:nt.modified)==null||X.dispose()),(_t=U.current)==null||_t.dispose()}return mn.createElement(r2,{width:w,height:x,isEditorReady:R,loading:g,_ref:H,className:A,wrapperProps:S})}var Wz=Kz;E.memo(Wz);function Qz(i){let t=E.useRef();return E.useEffect(()=>{t.current=i},[i]),t.current}var Zz=Qz,Jm=new Map;function Jz({defaultValue:i,defaultLanguage:t,defaultPath:e,value:n,language:a,path:o,theme:c="light",line:u,loading:d="Loading...",options:f={},overrideServices:g={},saveViewState:y=!0,keepCurrentModel:x=!1,width:w="100%",height:A="100%",className:S,wrapperProps:C={},beforeMount:T=xf,onMount:R=xf,onChange:L,onValidate:j=xf}){let[I,U]=E.useState(!1),[O,H]=E.useState(!0),Z=E.useRef(null),$=E.useRef(null),W=E.useRef(null),st=E.useRef(R),ct=E.useRef(T),lt=E.useRef(),nt=E.useRef(n),z=Zz(o),q=E.useRef(!1),X=E.useRef(!1);a2(()=>{let P=i2.init();return P.then(G=>(Z.current=G)&&H(!1)).catch(G=>(G==null?void 0:G.type)!=="cancelation"&&console.error("Monaco initialization: error:",G)),()=>$.current?Ct():P.cancel()}),Is(()=>{var G,tt,ot,pt;let P=ku(Z.current,i||n||"",t||a||"",o||e||"");P!==((G=$.current)==null?void 0:G.getModel())&&(y&&Jm.set(z,(tt=$.current)==null?void 0:tt.saveViewState()),(ot=$.current)==null||ot.setModel(P),y&&((pt=$.current)==null||pt.restoreViewState(Jm.get(o))))},[o],I),Is(()=>{var P;(P=$.current)==null||P.updateOptions(f)},[f],I),Is(()=>{!$.current||n===void 0||($.current.getOption(Z.current.editor.EditorOption.readOnly)?$.current.setValue(n):n!==$.current.getValue()&&(X.current=!0,$.current.executeEdits("",[{range:$.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),$.current.pushUndoStop(),X.current=!1))},[n],I),Is(()=>{var G,tt;let P=(G=$.current)==null?void 0:G.getModel();P&&a&&((tt=Z.current)==null||tt.editor.setModelLanguage(P,a))},[a],I),Is(()=>{var P;u!==void 0&&((P=$.current)==null||P.revealLine(u))},[u],I),Is(()=>{var P;(P=Z.current)==null||P.editor.setTheme(c)},[c],I);let _t=E.useCallback(()=>{var P;if(!(!W.current||!Z.current)&&!q.current){ct.current(Z.current);let G=o||e,tt=ku(Z.current,n||i||"",t||a||"",G||"");$.current=(P=Z.current)==null?void 0:P.editor.create(W.current,{model:tt,automaticLayout:!0,...f},g),y&&$.current.restoreViewState(Jm.get(G)),Z.current.editor.setTheme(c),u!==void 0&&$.current.revealLine(u),U(!0),q.current=!0}},[i,t,e,n,a,o,f,g,y,c,u]);E.useEffect(()=>{I&&st.current($.current,Z.current)},[I]),E.useEffect(()=>{!O&&!I&&_t()},[O,I,_t]),nt.current=n,E.useEffect(()=>{var P,G;I&&L&&((P=lt.current)==null||P.dispose(),lt.current=(G=$.current)==null?void 0:G.onDidChangeModelContent(tt=>{X.current||L($.current.getValue(),tt)}))},[I,L]),E.useEffect(()=>{if(I){let P=Z.current.editor.onDidChangeMarkers(G=>{var ot;let tt=(ot=$.current.getModel())==null?void 0:ot.uri;if(tt&&G.find(pt=>pt.path===tt.path)){let pt=Z.current.editor.getModelMarkers({resource:tt});j==null||j(pt)}});return()=>{P==null||P.dispose()}}return()=>{}},[I,j]);function Ct(){var P,G;(P=lt.current)==null||P.dispose(),x?y&&Jm.set(o,$.current.saveViewState()):(G=$.current.getModel())==null||G.dispose(),$.current.dispose()}return mn.createElement(r2,{width:w,height:A,isEditorReady:I,loading:d,_ref:W,className:S,wrapperProps:C})}var tU=Jz,eU=E.memo(tU),nU=eU;const pr=Object.create(null);pr.open="0";pr.close="1";pr.ping="2";pr.pong="3";pr.message="4";pr.upgrade="5";pr.noop="6";const py=Object.create(null);Object.keys(pr).forEach(i=>{py[pr[i]]=i});const Nw={type:"error",data:"parser error"},l2=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",c2=typeof ArrayBuffer=="function",u2=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,E_=({type:i,data:t},e,n)=>l2&&t instanceof Blob?e?n(t):sk(t,n):c2&&(t instanceof ArrayBuffer||u2(t))?e?n(t):sk(new Blob([t]),n):n(pr[i]+(t||"")),sk=(i,t)=>{const e=new FileReader;return e.onload=function(){const n=e.result.split(",")[1];t("b"+(n||""))},e.readAsDataURL(i)};function ik(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}let Jx;function sU(i,t){if(l2&&i.data instanceof Blob)return i.data.arrayBuffer().then(ik).then(t);if(c2&&(i.data instanceof ArrayBuffer||u2(i.data)))return t(ik(i.data));E_(i,!1,e=>{Jx||(Jx=new TextEncoder),t(Jx.encode(e))})}const rk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<rk.length;i++)nf[rk.charCodeAt(i)]=i;const iU=i=>{let t=i.length*.75,e=i.length,n,a=0,o,c,u,d;i[i.length-1]==="="&&(t--,i[i.length-2]==="="&&t--);const f=new ArrayBuffer(t),g=new Uint8Array(f);for(n=0;n<e;n+=4)o=nf[i.charCodeAt(n)],c=nf[i.charCodeAt(n+1)],u=nf[i.charCodeAt(n+2)],d=nf[i.charCodeAt(n+3)],g[a++]=o<<2|c>>4,g[a++]=(c&15)<<4|u>>2,g[a++]=(u&3)<<6|d&63;return f},rU=typeof ArrayBuffer=="function",C_=(i,t)=>{if(typeof i!="string")return{type:"message",data:h2(i,t)};const e=i.charAt(0);return e==="b"?{type:"message",data:aU(i.substring(1),t)}:py[e]?i.length>1?{type:py[e],data:i.substring(1)}:{type:py[e]}:Nw},aU=(i,t)=>{if(rU){const e=iU(i);return h2(e,t)}else return{base64:!0,data:i}},h2=(i,t)=>{switch(t){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}},d2="",oU=(i,t)=>{const e=i.length,n=new Array(e);let a=0;i.forEach((o,c)=>{E_(o,!1,u=>{n[c]=u,++a===e&&t(n.join(d2))})})},lU=(i,t)=>{const e=i.split(d2),n=[];for(let a=0;a<e.length;a++){const o=C_(e[a],t);if(n.push(o),o.type==="error")break}return n};function cU(){return new TransformStream({transform(i,t){sU(i,e=>{const n=e.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}i.data&&typeof i.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(e)})}})}let tw;function ty(i){return i.reduce((t,e)=>t+e.length,0)}function ey(i,t){if(i[0].length===t)return i.shift();const e=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)e[a]=i[0][n++],n===i[0].length&&(i.shift(),n=0);return i.length&&n<i[0].length&&(i[0]=i[0].slice(n)),e}function uU(i,t){tw||(tw=new TextDecoder);const e=[];let n=0,a=-1,o=!1;return new TransformStream({transform(c,u){for(e.push(c);;){if(n===0){if(ty(e)<1)break;const d=ey(e,1);o=(d[0]&128)===128,a=d[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(ty(e)<2)break;const d=ey(e,2);a=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),n=3}else if(n===2){if(ty(e)<8)break;const d=ey(e,8),f=new DataView(d.buffer,d.byteOffset,d.length),g=f.getUint32(0);if(g>Math.pow(2,21)-1){u.enqueue(Nw);break}a=g*Math.pow(2,32)+f.getUint32(4),n=3}else{if(ty(e)<a)break;const d=ey(e,a);u.enqueue(C_(o?d:tw.decode(d),t)),n=0}if(a===0||a>i){u.enqueue(Nw);break}}}})}const f2=4;function Ke(i){if(i)return hU(i)}function hU(i){for(var t in Ke.prototype)i[t]=Ke.prototype[t];return i}Ke.prototype.on=Ke.prototype.addEventListener=function(i,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(t),this};Ke.prototype.once=function(i,t){function e(){this.off(i,e),t.apply(this,arguments)}return e.fn=t,this.on(i,e),this};Ke.prototype.off=Ke.prototype.removeListener=Ke.prototype.removeAllListeners=Ke.prototype.removeEventListener=function(i,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+i];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var n,a=0;a<e.length;a++)if(n=e[a],n===t||n.fn===t){e.splice(a,1);break}return e.length===0&&delete this._callbacks["$"+i],this};Ke.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+i],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,a=e.length;n<a;++n)e[n].apply(this,t)}return this};Ke.prototype.emitReserved=Ke.prototype.emit;Ke.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};Ke.prototype.hasListeners=function(i){return!!this.listeners(i).length};const Kv=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),ii=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),dU="arraybuffer";function p2(i,...t){return t.reduce((e,n)=>(i.hasOwnProperty(n)&&(e[n]=i[n]),e),{})}const fU=ii.setTimeout,pU=ii.clearTimeout;function Wv(i,t){t.useNativeTimers?(i.setTimeoutFn=fU.bind(ii),i.clearTimeoutFn=pU.bind(ii)):(i.setTimeoutFn=ii.setTimeout.bind(ii),i.clearTimeoutFn=ii.clearTimeout.bind(ii))}const gU=1.33;function mU(i){return typeof i=="string"?yU(i):Math.ceil((i.byteLength||i.size)*gU)}function yU(i){let t=0,e=0;for(let n=0,a=i.length;n<a;n++)t=i.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function g2(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function vU(i){let t="";for(let e in i)i.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(i[e]));return t}function bU(i){let t={},e=i.split("&");for(let n=0,a=e.length;n<a;n++){let o=e[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class xU extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class T_ extends Ke{constructor(t){super(),this.writable=!1,Wv(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new xU(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=C_(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const e=vU(t);return e.length?"?"+e:""}}class wU extends T_{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};lU(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,oU(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=g2()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}}let m2=!1;try{m2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const AU=m2;function _U(){}class SU extends wU{constructor(t){if(super(t),typeof location<"u"){const e=location.protocol==="https:";let n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}}class cr extends Ke{constructor(t,e,n){super(),this.createRequest=t,Wv(this,n),this._opts=n,this._method=n.method||"GET",this._uri=e,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const e=p2(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(e);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=cr.requestsCount++,cr.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=_U,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete cr.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}cr.requestsCount=0;cr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ak);else if(typeof addEventListener=="function"){const i="onpagehide"in ii?"pagehide":"unload";addEventListener(i,ak,!1)}}function ak(){for(let i in cr.requests)cr.requests.hasOwnProperty(i)&&cr.requests[i].abort()}const EU=(function(){const i=y2({xdomain:!1});return i&&i.responseType!==null})();class CU extends SU{constructor(t){super(t);const e=t&&t.forceBase64;this.supportsBinary=EU&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new cr(y2,this.uri(),t)}}function y2(i){const t=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||AU))return new XMLHttpRequest}catch{}if(!t)try{return new ii[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const v2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class TU extends T_{get name(){return"websocket"}doOpen(){const t=this.uri(),e=this.opts.protocols,n=v2?{}:p2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],a=e===t.length-1;E_(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}a&&Kv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=g2()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}}const ew=ii.WebSocket||ii.MozWebSocket;class kU extends TU{createSocket(t,e,n){return v2?new ew(t,e,n):e?new ew(t,e):new ew(t)}doWrite(t,e){this.ws.send(e)}}class RU extends T_{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const e=uU(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),a=cU();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const o=()=>{n.read().then(({done:u,value:d})=>{u||(this.onPacket(d),o())}).catch(u=>{})};o();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],a=e===t.length-1;this._writer.write(n).then(()=>{a&&Kv(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const NU={websocket:kU,webtransport:RU,polling:CU},MU=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,DU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Mw(i){if(i.length>8e3)throw"URI too long";const t=i,e=i.indexOf("["),n=i.indexOf("]");e!=-1&&n!=-1&&(i=i.substring(0,e)+i.substring(e,n).replace(/:/g,";")+i.substring(n,i.length));let a=MU.exec(i||""),o={},c=14;for(;c--;)o[DU[c]]=a[c]||"";return e!=-1&&n!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=LU(o,o.path),o.queryKey=OU(o,o.query),o}function LU(i,t){const e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function OU(i,t){const e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,o){a&&(e[a]=o)}),e}const Dw=typeof addEventListener=="function"&&typeof removeEventListener=="function",gy=[];Dw&&addEventListener("offline",()=>{gy.forEach(i=>i())},!1);class Oo extends Ke{constructor(t,e){if(super(),this.binaryType=dU,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(e=t,t=null),t){const n=Mw(t);e.hostname=n.host,e.secure=n.protocol==="https"||n.protocol==="wss",e.port=n.port,n.query&&(e.query=n.query)}else e.host&&(e.hostname=Mw(e.host).host);Wv(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=bU(this.opts.query)),Dw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},gy.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=f2,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Oo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(t);e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Oo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=t.data,this._onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(e+=mU(a)),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Kv(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,e,n){return this._sendPacket("message",t,e,n),this}send(t,e,n){return this._sendPacket("message",t,e,n),this}_sendPacket(t,e,n,a){if(typeof e=="function"&&(a=e,e=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Oo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Dw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=gy.indexOf(this._offlineEventListener);n!==-1&&gy.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this._prevBufferLen=0}}}Oo.protocol=f2;class jU extends Oo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;Oo.priorWebsocketSuccess=!1;const a=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",y=>{if(!n)if(y.type==="pong"&&y.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Oo.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(g(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=e.name,this.emitReserved("upgradeError",x)}}))};function o(){n||(n=!0,g(),e.close(),e=null)}const c=y=>{const x=new Error("probe error: "+y);x.transport=e.name,o(),this.emitReserved("upgradeError",x)};function u(){c("transport closed")}function d(){c("socket closed")}function f(y){e&&y.name!==e.name&&o()}const g=()=>{e.removeListener("open",a),e.removeListener("error",c),e.removeListener("close",u),this.off("close",d),this.off("upgrading",f)};e.once("open",a),e.once("error",c),e.once("close",u),this.once("close",d),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}let PU=class extends jU{constructor(t,e={}){const n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>NU[a]).filter(a=>!!a)),super(t,n)}};function FU(i,t="",e){let n=i;e=e||typeof location<"u"&&location,i==null&&(i=e.protocol+"//"+e.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=e.protocol+i:i=e.host+i),/^(https?|wss?):\/\//.test(i)||(typeof e<"u"?i=e.protocol+"//"+i:i="https://"+i),n=Mw(i)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+t,n.href=n.protocol+"://"+o+(e&&e.port===n.port?"":":"+n.port),n}const IU=typeof ArrayBuffer=="function",zU=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,b2=Object.prototype.toString,UU=typeof Blob=="function"||typeof Blob<"u"&&b2.call(Blob)==="[object BlobConstructor]",BU=typeof File=="function"||typeof File<"u"&&b2.call(File)==="[object FileConstructor]";function k_(i){return IU&&(i instanceof ArrayBuffer||zU(i))||UU&&i instanceof Blob||BU&&i instanceof File}function my(i,t){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let e=0,n=i.length;e<n;e++)if(my(i[e]))return!0;return!1}if(k_(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return my(i.toJSON(),!0);for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&my(i[e]))return!0;return!1}function HU(i){const t=[],e=i.data,n=i;return n.data=Lw(e,t),n.attachments=t.length,{packet:n,buffers:t}}function Lw(i,t){if(!i)return i;if(k_(i)){const e={_placeholder:!0,num:t.length};return t.push(i),e}else if(Array.isArray(i)){const e=new Array(i.length);for(let n=0;n<i.length;n++)e[n]=Lw(i[n],t);return e}else if(typeof i=="object"&&!(i instanceof Date)){const e={};for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=Lw(i[n],t));return e}return i}function VU(i,t){return i.data=Ow(i.data,t),delete i.attachments,i}function Ow(i,t){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<t.length)return t[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=Ow(i[e],t);else if(typeof i=="object")for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=Ow(i[e],t));return i}const qU=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],GU=5;var Qt;(function(i){i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK"})(Qt||(Qt={}));let $U=class{constructor(t){this.replacer=t}encode(t){return(t.type===Qt.EVENT||t.type===Qt.ACK)&&my(t)?this.encodeAsBinary({type:t.type===Qt.EVENT?Qt.BINARY_EVENT:Qt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===Qt.BINARY_EVENT||t.type===Qt.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=HU(t),n=this.encodeAsString(e.packet),a=e.buffers;return a.unshift(n),a}};function ok(i){return Object.prototype.toString.call(i)==="[object Object]"}let XU=class x2 extends Ke{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===Qt.BINARY_EVENT;n||e.type===Qt.BINARY_ACK?(e.type=n?Qt.EVENT:Qt.ACK,this.reconstructor=new YU(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(k_(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(Qt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Qt.BINARY_EVENT||n.type===Qt.BINARY_ACK){const o=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const c=t.substring(o,e);if(c!=Number(c)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(c)}if(t.charAt(e+1)==="/"){const o=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(o,e)}else n.nsp="/";const a=t.charAt(e+1);if(a!==""&&Number(a)==a){const o=e+1;for(;++e;){const c=t.charAt(e);if(c==null||Number(c)!=c){--e;break}if(e===t.length)break}n.id=Number(t.substring(o,e+1))}if(t.charAt(++e)){const o=this.tryParse(t.substr(e));if(x2.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case Qt.CONNECT:return ok(e);case Qt.DISCONNECT:return e===void 0;case Qt.CONNECT_ERROR:return typeof e=="string"||ok(e);case Qt.EVENT:case Qt.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&qU.indexOf(e[0])===-1);case Qt.ACK:case Qt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class YU{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=VU(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const KU=Object.freeze(Object.defineProperty({__proto__:null,Decoder:XU,Encoder:$U,get PacketType(){return Qt},protocol:GU},Symbol.toStringTag,{value:"Module"}));function Mi(i,t,e){return i.on(t,e),function(){i.off(t,e)}}const WU=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class w2 extends Ke{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Mi(t,"open",this.onopen.bind(this)),Mi(t,"packet",this.onpacket.bind(this)),Mi(t,"error",this.onerror.bind(this)),Mi(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,a,o;if(WU.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const c={type:Qt.EVENT,data:e};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const g=this.ids++,y=e.pop();this._registerAckCallback(g,y),c.id=g}const u=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,d=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!u||(d?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,e){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=e;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===t&&this.sendBuffer.splice(u,1);e.call(this,new Error("operation has timed out"))},a),c=(...u)=>{this.io.clearTimeoutFn(o),e.apply(this,u)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...e){return new Promise((n,a)=>{const o=(c,u)=>c?a(c):n(u);o.withError=!0,e.push(o),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...o)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(a)):(this._queue.shift(),e&&e(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Qt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Qt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Qt.EVENT:case Qt.BINARY_EVENT:this.onevent(t);break;case Qt.ACK:case Qt.BINARY_ACK:this.onack(t);break;case Qt.DISCONNECT:this.ondisconnect();break;case Qt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...a){n||(n=!0,e.packet({type:Qt.ACK,id:t,data:a}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Qt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function Wh(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}Wh.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*i);i=(Math.floor(t*10)&1)==0?i-e:i+e}return Math.min(i,this.max)|0};Wh.prototype.reset=function(){this.attempts=0};Wh.prototype.setMin=function(i){this.ms=i};Wh.prototype.setMax=function(i){this.max=i};Wh.prototype.setJitter=function(i){this.jitter=i};class jw extends Ke{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Wv(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Wh({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const a=e.parser||KU;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new PU(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Mi(e,"open",function(){n.onopen(),t&&t()}),o=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),t?t(u):this.maybeReconnectOnOpen()},c=Mi(e,"error",o);if(this._timeout!==!1){const u=this._timeout,d=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),e.close()},u);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(a),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Mi(t,"ping",this.onping.bind(this)),Mi(t,"data",this.ondata.bind(this)),Mi(t,"error",this.onerror.bind(this)),Mi(t,"close",this.onclose.bind(this)),Mi(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){Kv(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new w2(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const n of e)if(this.nsps[n].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Qd={};function yy(i,t){typeof i=="object"&&(t=i,i=void 0),t=t||{};const e=FU(i,t.path||"/socket.io"),n=e.source,a=e.id,o=e.path,c=Qd[a]&&o in Qd[a].nsps,u=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let d;return u?d=new jw(n,t):(Qd[a]||(Qd[a]=new jw(n,t)),d=Qd[a]),e.query&&!t.query&&(t.query=e.queryKey),d.socket(e.path,t)}Object.assign(yy,{Manager:jw,Socket:w2,io:yy,connect:yy});const Li=()=>new Map,Pw=i=>{const t=Li();return i.forEach((e,n)=>{t.set(n,e)}),t},qo=(i,t,e)=>{let n=i.get(t);return n===void 0&&i.set(t,n=e()),n},QU=(i,t)=>{const e=[];for(const[n,a]of i)e.push(t(a,n));return e},ZU=(i,t)=>{for(const[e,n]of i)if(t(n,e))return!0;return!1},Fh=()=>new Set,nw=i=>i[i.length-1],JU=(i,t)=>{for(let e=0;e<t.length;e++)i.push(t[e])},yc=Array.from,tB=Array.isArray;class eB{constructor(){this._observers=Li()}on(t,e){return qo(this._observers,t,Fh).add(e),e}once(t,e){const n=(...a)=>{this.off(t,n),e(...a)};this.on(t,n)}off(t,e){const n=this._observers.get(t);n!==void 0&&(n.delete(e),n.size===0&&this._observers.delete(t))}emit(t,e){return yc((this._observers.get(t)||Li()).values()).forEach(n=>n(...e))}destroy(){this._observers=Li()}}const jo=Math.floor,vy=Math.abs,A2=(i,t)=>i<t?i:t,Tc=(i,t)=>i>t?i:t,_2=i=>i!==0?i<0:1/i<0,lk=1,ck=2,sw=4,iw=8,kf=32,ba=64,Us=128,Qv=31,Fw=63,gc=127,nB=2147483647,S2=Number.MAX_SAFE_INTEGER,sB=Number.isInteger||(i=>typeof i=="number"&&isFinite(i)&&jo(i)===i),iB=i=>i.toLowerCase(),rB=/^\s*/g,aB=i=>i.replace(rB,""),oB=/([A-Z])/g,uk=(i,t)=>aB(i.replace(oB,e=>`${t}${iB(e)}`)),lB=i=>{const t=unescape(encodeURIComponent(i)),e=t.length,n=new Uint8Array(e);for(let a=0;a<e;a++)n[a]=t.codePointAt(a);return n},Rf=typeof TextEncoder<"u"?new TextEncoder:null,cB=i=>Rf.encode(i),uB=Rf?cB:lB;let wf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});wf&&wf.decode(new Uint8Array).length===1&&(wf=null);class xg{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Zv=()=>new xg,hB=i=>{let t=i.cpos;for(let e=0;e<i.bufs.length;e++)t+=i.bufs[e].length;return t},lr=i=>{const t=new Uint8Array(hB(i));let e=0;for(let n=0;n<i.bufs.length;n++){const a=i.bufs[n];t.set(a,e),e+=a.length}return t.set(new Uint8Array(i.cbuf.buffer,0,i.cpos),e),t},dB=(i,t)=>{const e=i.cbuf.length;e-i.cpos<t&&(i.bufs.push(new Uint8Array(i.cbuf.buffer,0,i.cpos)),i.cbuf=new Uint8Array(Tc(e,t)*2),i.cpos=0)},gn=(i,t)=>{const e=i.cbuf.length;i.cpos===e&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(e*2),i.cpos=0),i.cbuf[i.cpos++]=t},Iw=gn,ee=(i,t)=>{for(;t>gc;)gn(i,Us|gc&t),t=jo(t/128);gn(i,gc&t)},R_=(i,t)=>{const e=_2(t);for(e&&(t=-t),gn(i,(t>Fw?Us:0)|(e?ba:0)|Fw&t),t=jo(t/64);t>0;)gn(i,(t>gc?Us:0)|gc&t),t=jo(t/128)},zw=new Uint8Array(3e4),fB=zw.length/3,pB=(i,t)=>{if(t.length<fB){const e=Rf.encodeInto(t,zw).written||0;ee(i,e);for(let n=0;n<e;n++)gn(i,zw[n])}else Ts(i,uB(t))},gB=(i,t)=>{const e=unescape(encodeURIComponent(t)),n=e.length;ee(i,n);for(let a=0;a<n;a++)gn(i,e.codePointAt(a))},Mu=Rf&&Rf.encodeInto?pB:gB,Jv=(i,t)=>{const e=i.cbuf.length,n=i.cpos,a=A2(e-n,t.length),o=t.length-a;i.cbuf.set(t.subarray(0,a),n),i.cpos+=a,o>0&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(Tc(e*2,o)),i.cbuf.set(t.subarray(a)),i.cpos=o)},Ts=(i,t)=>{ee(i,t.byteLength),Jv(i,t)},N_=(i,t)=>{dB(i,t);const e=new DataView(i.cbuf.buffer,i.cpos,t);return i.cpos+=t,e},mB=(i,t)=>N_(i,4).setFloat32(0,t,!1),yB=(i,t)=>N_(i,8).setFloat64(0,t,!1),vB=(i,t)=>N_(i,8).setBigInt64(0,t,!1),hk=new DataView(new ArrayBuffer(4)),bB=i=>(hk.setFloat32(0,i),hk.getFloat32(0)===i),Nf=(i,t)=>{switch(typeof t){case"string":gn(i,119),Mu(i,t);break;case"number":sB(t)&&vy(t)<=nB?(gn(i,125),R_(i,t)):bB(t)?(gn(i,124),mB(i,t)):(gn(i,123),yB(i,t));break;case"bigint":gn(i,122),vB(i,t);break;case"object":if(t===null)gn(i,126);else if(tB(t)){gn(i,117),ee(i,t.length);for(let e=0;e<t.length;e++)Nf(i,t[e])}else if(t instanceof Uint8Array)gn(i,116),Ts(i,t);else{gn(i,118);const e=Object.keys(t);ee(i,e.length);for(let n=0;n<e.length;n++){const a=e[n];Mu(i,a),Nf(i,t[a])}}break;case"boolean":gn(i,t?120:121);break;default:gn(i,127)}};class dk extends xg{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&ee(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const fk=i=>{i.count>0&&(R_(i.encoder,i.count===1?i.s:-i.s),i.count>1&&ee(i.encoder,i.count-2))};class by{constructor(){this.encoder=new xg,this.s=0,this.count=0}write(t){this.s===t?this.count++:(fk(this),this.count=1,this.s=t)}toUint8Array(){return fk(this),lr(this.encoder)}}const pk=i=>{if(i.count>0){const t=i.diff*2+(i.count===1?0:1);R_(i.encoder,t),i.count>1&&ee(i.encoder,i.count-2)}};class rw{constructor(){this.encoder=new xg,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(pk(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return pk(this),lr(this.encoder)}}class xB{constructor(){this.sarr=[],this.s="",this.lensE=new by}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new xg;return this.sarr.push(this.s),this.s="",Mu(t,this.sarr.join("")),Jv(t,this.lensE.toUint8Array()),lr(t)}}const Po=i=>new Error(i),ur=()=>{throw Po("Method unimplemented")},gr=()=>{throw Po("Unexpected case")},E2=Po("Unexpected end of array"),C2=Po("Integer out of Range");class tb{constructor(t){this.arr=t,this.pos=0}}const Qh=i=>new tb(i),wB=i=>i.pos!==i.arr.length,AB=(i,t)=>{const e=new Uint8Array(i.arr.buffer,i.pos+i.arr.byteOffset,t);return i.pos+=t,e},ks=i=>AB(i,Ut(i)),Ih=i=>i.arr[i.pos++],Ut=i=>{let t=0,e=1;const n=i.arr.length;for(;i.pos<n;){const a=i.arr[i.pos++];if(t=t+(a&gc)*e,e*=128,a<Us)return t;if(t>S2)throw C2}throw E2},M_=i=>{let t=i.arr[i.pos++],e=t&Fw,n=64;const a=(t&ba)>0?-1:1;if((t&Us)===0)return a*e;const o=i.arr.length;for(;i.pos<o;){if(t=i.arr[i.pos++],e=e+(t&gc)*n,n*=128,t<Us)return a*e;if(e>S2)throw C2}throw E2},_B=i=>{let t=Ut(i);if(t===0)return"";{let e=String.fromCodePoint(Ih(i));if(--t<100)for(;t--;)e+=String.fromCodePoint(Ih(i));else for(;t>0;){const n=t<1e4?t:1e4,a=i.arr.subarray(i.pos,i.pos+n);i.pos+=n,e+=String.fromCodePoint.apply(null,a),t-=n}return decodeURIComponent(escape(e))}},SB=i=>wf.decode(ks(i)),Du=wf?SB:_B,D_=(i,t)=>{const e=new DataView(i.arr.buffer,i.arr.byteOffset+i.pos,t);return i.pos+=t,e},EB=i=>D_(i,4).getFloat32(0,!1),CB=i=>D_(i,8).getFloat64(0,!1),TB=i=>D_(i,8).getBigInt64(0,!1),kB=[i=>{},i=>null,M_,EB,CB,TB,i=>!1,i=>!0,Du,i=>{const t=Ut(i),e={};for(let n=0;n<t;n++){const a=Du(i);e[a]=Mf(i)}return e},i=>{const t=Ut(i),e=[];for(let n=0;n<t;n++)e.push(Mf(i));return e},ks],Mf=i=>kB[127-Ih(i)](i);class gk extends tb{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),wB(this)?this.count=Ut(this)+1:this.count=-1),this.count--,this.s}}class xy extends tb{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=M_(this);const t=_2(this.s);this.count=1,t&&(this.s=-this.s,this.count=Ut(this)+2)}return this.count--,this.s}}class aw extends tb{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=M_(this),e=t&1;this.diff=jo(t/2),this.count=1,e&&(this.count=Ut(this)+2)}return this.s+=this.diff,this.count--,this.s}}class RB{constructor(t){this.decoder=new xy(t),this.str=Du(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}const NB=crypto.getRandomValues.bind(crypto),T2=()=>NB(new Uint32Array(1))[0],MB="10000000-1000-4000-8000"+-1e11,DB=()=>MB.replace(/[018]/g,i=>(i^T2()&15>>i/4).toString(16)),mk=i=>new Promise(i);Promise.all.bind(Promise);const yk=i=>i===void 0?null:i;class LB{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let k2=new LB,OB=!0;try{typeof localStorage<"u"&&localStorage&&(k2=localStorage,OB=!1)}catch{}const jB=k2,PB=Object.assign,FB=Object.keys,IB=(i,t)=>{for(const e in i)t(i[e],e)},vk=i=>FB(i).length,zB=i=>{for(const t in i)return!1;return!0},UB=(i,t)=>{for(const e in i)if(!t(i[e],e))return!1;return!0},BB=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),HB=(i,t)=>i===t||vk(i)===vk(t)&&UB(i,(e,n)=>(e!==void 0||BB(t,n))&&t[n]===e),VB=Object.freeze,R2=i=>{for(const t in i){const e=i[t];(typeof e=="object"||typeof e=="function")&&R2(i[t])}return VB(i)},L_=(i,t,e=0)=>{try{for(;e<i.length;e++)i[e](...t)}finally{e<i.length&&L_(i,t,e+1)}},qB=i=>i,GB=(i,t)=>t.includes(i);var N2={};const Df=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Hi;const $B=()=>{if(Hi===void 0)if(Df){Hi=Li();const i=process.argv;let t=null;for(let e=0;e<i.length;e++){const n=i[e];n[0]==="-"?(t!==null&&Hi.set(t,""),t=n):t!==null&&(Hi.set(t,n),t=null)}t!==null&&Hi.set(t,"")}else typeof location=="object"?(Hi=Li(),(location.search||"?").slice(1).split("&").forEach(i=>{if(i.length!==0){const[t,e]=i.split("=");Hi.set(`--${uk(t,"-")}`,e),Hi.set(`-${uk(t,"-")}`,e)}})):Hi=Li();return Hi},Uw=i=>$B().has(i),nv=i=>yk(Df?N2[i.toUpperCase().replaceAll("-","_")]:jB.getItem(i)),M2=i=>Uw("--"+i)||nv(i)!==null;M2("production");const XB=Df&&GB(N2.FORCE_COLOR,["true","1","2"]),YB=XB||!Uw("--no-colors")&&!M2("no-color")&&(!Df||process.stdout.isTTY)&&(!Df||Uw("--color")||nv("COLORTERM")!==null||(nv("TERM")||"").includes("color")),KB=i=>new Uint8Array(i),WB=i=>{const t=KB(i.byteLength);return t.set(i),t};class QB{constructor(t,e){this.left=t,this.right=e}}const Ur=(i,t)=>new QB(i,t);typeof DOMParser<"u"&&new DOMParser;const ZB=i=>QU(i,(t,e)=>`${e}:${t};`).join(""),ka=Symbol,D2=ka(),L2=ka(),JB=ka(),t6=ka(),e6=ka(),O2=ka(),n6=ka(),O_=ka(),s6=ka(),i6=i=>{var a;i.length===1&&((a=i[0])==null?void 0:a.constructor)===Function&&(i=i[0]());const t=[],e=[];let n=0;for(;n<i.length;n++){const o=i[n];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)t.push(o);else if(o.constructor===Object)break}for(n>0&&e.push(t.join(""));n<i.length;n++){const o=i[n];o instanceof Symbol||e.push(o)}return e},r6={[D2]:Ur("font-weight","bold"),[L2]:Ur("font-weight","normal"),[JB]:Ur("color","blue"),[e6]:Ur("color","green"),[t6]:Ur("color","grey"),[O2]:Ur("color","red"),[n6]:Ur("color","purple"),[O_]:Ur("color","orange"),[s6]:Ur("color","black")},a6=i=>{var c;i.length===1&&((c=i[0])==null?void 0:c.constructor)===Function&&(i=i[0]());const t=[],e=[],n=Li();let a=[],o=0;for(;o<i.length;o++){const u=i[o],d=r6[u];if(d!==void 0)n.set(d.left,d.right);else{if(u===void 0)break;if(u.constructor===String||u.constructor===Number){const f=ZB(n);o>0||f.length>0?(t.push("%c"+u),e.push(f)):t.push(u)}else break}}for(o>0&&(a=e,a.unshift(t.join("")));o<i.length;o++){const u=i[o];u instanceof Symbol||a.push(u)}return a},j2=YB?a6:i6,o6=(...i)=>{console.log(...j2(i)),P2.forEach(t=>t.print(i))},l6=(...i)=>{console.warn(...j2(i)),i.unshift(O_),P2.forEach(t=>t.print(i))},P2=Fh(),F2=i=>({[Symbol.iterator](){return this},next:i}),c6=(i,t)=>F2(()=>{let e;do e=i.next();while(!e.done&&!t(e.value));return e}),ow=(i,t)=>F2(()=>{const{done:e,value:n}=i.next();return{done:e,value:e?void 0:t(n)}});class j_{constructor(t,e){this.clock=t,this.len=e}}class wg{constructor(){this.clients=new Map}}const I2=(i,t,e)=>t.clients.forEach((n,a)=>{const o=i.doc.store.clients.get(a);if(o!=null){const c=o[o.length-1],u=c.id.clock+c.length;for(let d=0,f=n[d];d<n.length&&f.clock<u;f=n[++d])Y2(i,o,f.clock,f.len,e)}}),u6=(i,t)=>{let e=0,n=i.length-1;for(;e<=n;){const a=jo((e+n)/2),o=i[a],c=o.clock;if(c<=t){if(t<c+o.len)return a;e=a+1}else n=a-1}return null},z2=(i,t)=>{const e=i.clients.get(t.client);return e!==void 0&&u6(e,t.clock)!==null},P_=i=>{i.clients.forEach(t=>{t.sort((a,o)=>a.clock-o.clock);let e,n;for(e=1,n=1;e<t.length;e++){const a=t[n-1],o=t[e];a.clock+a.len>=o.clock?a.len=Tc(a.len,o.clock+o.len-a.clock):(n<e&&(t[n]=o),n++)}t.length=n})},h6=i=>{const t=new wg;for(let e=0;e<i.length;e++)i[e].clients.forEach((n,a)=>{if(!t.clients.has(a)){const o=n.slice();for(let c=e+1;c<i.length;c++)JU(o,i[c].clients.get(a)||[]);t.clients.set(a,o)}});return P_(t),t},sv=(i,t,e,n)=>{qo(i.clients,t,()=>[]).push(new j_(e,n))},d6=()=>new wg,f6=i=>{const t=d6();return i.clients.forEach((e,n)=>{const a=[];for(let o=0;o<e.length;o++){const c=e[o];if(c.deleted){const u=c.id.clock;let d=c.length;if(o+1<e.length)for(let f=e[o+1];o+1<e.length&&f.deleted;f=e[++o+1])d+=f.length;a.push(new j_(u,d))}}a.length>0&&t.clients.set(n,a)}),t},Zh=(i,t)=>{ee(i.restEncoder,t.clients.size),yc(t.clients.entries()).sort((e,n)=>n[0]-e[0]).forEach(([e,n])=>{i.resetDsCurVal(),ee(i.restEncoder,e);const a=n.length;ee(i.restEncoder,a);for(let o=0;o<a;o++){const c=n[o];i.writeDsClock(c.clock),i.writeDsLen(c.len)}})},F_=i=>{const t=new wg,e=Ut(i.restDecoder);for(let n=0;n<e;n++){i.resetDsCurVal();const a=Ut(i.restDecoder),o=Ut(i.restDecoder);if(o>0){const c=qo(t.clients,a,()=>[]);for(let u=0;u<o;u++)c.push(new j_(i.readDsClock(),i.readDsLen()))}}return t},bk=(i,t,e)=>{const n=new wg,a=Ut(i.restDecoder);for(let o=0;o<a;o++){i.resetDsCurVal();const c=Ut(i.restDecoder),u=Ut(i.restDecoder),d=e.clients.get(c)||[],f=yn(e,c);for(let g=0;g<u;g++){const y=i.readDsClock(),x=y+i.readDsLen();if(y<f){f<x&&sv(n,c,f,x-f);let w=mr(d,y),A=d[w];for(!A.deleted&&A.id.clock<y&&(d.splice(w+1,0,uv(t,A,y-A.id.clock)),w++);w<d.length&&(A=d[w++],A.id.clock<x);)A.deleted||(x<A.id.clock+A.length&&d.splice(w,0,uv(t,A,x-A.id.clock)),A.delete(t))}else sv(n,c,y,x-y)}}if(n.clients.size>0){const o=new vc;return ee(o.restEncoder,0),Zh(o,n),o.toUint8Array()}return null},U2=T2;class Jh extends eB{constructor({guid:t=DB(),collectionid:e=null,gc:n=!0,gcFilter:a=()=>!0,meta:o=null,autoLoad:c=!1,shouldLoad:u=!0}={}){super(),this.gc=n,this.gcFilter=a,this.clientID=U2(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new $2,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=u,this.autoLoad=c,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=mk(f=>{this.on("load",()=>{this.isLoaded=!0,f(this)})});const d=()=>mk(f=>{const g=y=>{(y===void 0||y===!0)&&(this.off("sync",g),f())};this.on("sync",g)});this.on("sync",f=>{f===!1&&this.isSynced&&(this.whenSynced=d()),this.isSynced=f===void 0||f===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=d()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Ce(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(yc(this.subdocs).map(t=>t.guid))}transact(t,e=null){return Ce(this,t,e)}get(t,e=On){const n=qo(this.share,t,()=>{const o=new e;return o._integrate(this,null),o}),a=n.constructor;if(e!==On&&a!==e)if(a===On){const o=new e;o._map=n._map,n._map.forEach(c=>{for(;c!==null;c=c.left)c.parent=o}),o._start=n._start;for(let c=o._start;c!==null;c=c.right)c.parent=o;return o._length=n._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return n}getArray(t=""){return this.get(t,Ou)}getText(t=""){return this.get(t,Bh)}getMap(t=""){return this.get(t,Uh)}getXmlElement(t=""){return this.get(t,Hh)}getXmlFragment(t=""){return this.get(t,bc)}toJSON(){const t={};return this.share.forEach((e,n)=>{t[n]=e.toJSON()}),t}destroy(){this.isDestroyed=!0,yc(this.subdocs).forEach(e=>e.destroy());const t=this._item;if(t!==null){this._item=null;const e=t.content;e.doc=new Jh({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Ce(t.parent.doc,n=>{const a=e.doc;t.deleted||n.subdocsAdded.add(a),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class B2{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return Ut(this.restDecoder)}readDsLen(){return Ut(this.restDecoder)}}class H2 extends B2{readLeftID(){return Zt(Ut(this.restDecoder),Ut(this.restDecoder))}readRightID(){return Zt(Ut(this.restDecoder),Ut(this.restDecoder))}readClient(){return Ut(this.restDecoder)}readInfo(){return Ih(this.restDecoder)}readString(){return Du(this.restDecoder)}readParentInfo(){return Ut(this.restDecoder)===1}readTypeRef(){return Ut(this.restDecoder)}readLen(){return Ut(this.restDecoder)}readAny(){return Mf(this.restDecoder)}readBuf(){return WB(ks(this.restDecoder))}readJSON(){return JSON.parse(Du(this.restDecoder))}readKey(){return Du(this.restDecoder)}}class p6{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ut(this.restDecoder),this.dsCurrVal}readDsLen(){const t=Ut(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class zh extends p6{constructor(t){super(t),this.keys=[],Ut(t),this.keyClockDecoder=new aw(ks(t)),this.clientDecoder=new xy(ks(t)),this.leftClockDecoder=new aw(ks(t)),this.rightClockDecoder=new aw(ks(t)),this.infoDecoder=new gk(ks(t),Ih),this.stringDecoder=new RB(ks(t)),this.parentInfoDecoder=new gk(ks(t),Ih),this.typeRefDecoder=new xy(ks(t)),this.lenDecoder=new xy(ks(t))}readLeftID(){return new Lu(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Lu(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Mf(this.restDecoder)}readBuf(){return ks(this.restDecoder)}readJSON(){return Mf(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class g6{constructor(){this.restEncoder=Zv()}toUint8Array(){return lr(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){ee(this.restEncoder,t)}writeDsLen(t){ee(this.restEncoder,t)}}class Ag extends g6{writeLeftID(t){ee(this.restEncoder,t.client),ee(this.restEncoder,t.clock)}writeRightID(t){ee(this.restEncoder,t.client),ee(this.restEncoder,t.clock)}writeClient(t){ee(this.restEncoder,t)}writeInfo(t){Iw(this.restEncoder,t)}writeString(t){Mu(this.restEncoder,t)}writeParentInfo(t){ee(this.restEncoder,t?1:0)}writeTypeRef(t){ee(this.restEncoder,t)}writeLen(t){ee(this.restEncoder,t)}writeAny(t){Nf(this.restEncoder,t)}writeBuf(t){Ts(this.restEncoder,t)}writeJSON(t){Mu(this.restEncoder,JSON.stringify(t))}writeKey(t){Mu(this.restEncoder,t)}}class m6{constructor(){this.restEncoder=Zv(),this.dsCurrVal=0}toUint8Array(){return lr(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,ee(this.restEncoder,e)}writeDsLen(t){t===0&&gr(),ee(this.restEncoder,t-1),this.dsCurrVal+=t}}class vc extends m6{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new rw,this.clientEncoder=new by,this.leftClockEncoder=new rw,this.rightClockEncoder=new rw,this.infoEncoder=new dk(Iw),this.stringEncoder=new xB,this.parentInfoEncoder=new dk(Iw),this.typeRefEncoder=new by,this.lenEncoder=new by}toUint8Array(){const t=Zv();return ee(t,0),Ts(t,this.keyClockEncoder.toUint8Array()),Ts(t,this.clientEncoder.toUint8Array()),Ts(t,this.leftClockEncoder.toUint8Array()),Ts(t,this.rightClockEncoder.toUint8Array()),Ts(t,lr(this.infoEncoder)),Ts(t,this.stringEncoder.toUint8Array()),Ts(t,lr(this.parentInfoEncoder)),Ts(t,this.typeRefEncoder.toUint8Array()),Ts(t,this.lenEncoder.toUint8Array()),Jv(t,lr(this.restEncoder)),lr(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Nf(this.restEncoder,t)}writeBuf(t){Ts(this.restEncoder,t)}writeJSON(t){Nf(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);e===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const y6=(i,t,e,n)=>{n=Tc(n,t[0].id.clock);const a=mr(t,n);ee(i.restEncoder,t.length-a),i.writeClient(e),ee(i.restEncoder,n);const o=t[a];o.write(i,n-o.id.clock);for(let c=a+1;c<t.length;c++)t[c].write(i,0)},I_=(i,t,e)=>{const n=new Map;e.forEach((a,o)=>{yn(t,o)>a&&n.set(o,a)}),z_(t).forEach((a,o)=>{e.has(o)||n.set(o,0)}),ee(i.restEncoder,n.size),yc(n.entries()).sort((a,o)=>o[0]-a[0]).forEach(([a,o])=>{y6(i,t.clients.get(a),a,o)})},v6=(i,t)=>{const e=Li(),n=Ut(i.restDecoder);for(let a=0;a<n;a++){const o=Ut(i.restDecoder),c=new Array(o),u=i.readClient();let d=Ut(i.restDecoder);e.set(u,{i:0,refs:c});for(let f=0;f<o;f++){const g=i.readInfo();switch(Qv&g){case 0:{const y=i.readLen();c[f]=new ri(Zt(u,d),y),d+=y;break}case 10:{const y=Ut(i.restDecoder);c[f]=new ai(Zt(u,d),y),d+=y;break}default:{const y=(g&(ba|Us))===0,x=new on(Zt(u,d),null,(g&Us)===Us?i.readLeftID():null,null,(g&ba)===ba?i.readRightID():null,y?i.readParentInfo()?t.get(i.readString()):i.readLeftID():null,y&&(g&kf)===kf?i.readString():null,fM(i,g));c[f]=x,d+=x.length}}}}return e},b6=(i,t,e)=>{const n=[];let a=yc(e.keys()).sort((w,A)=>w-A);if(a.length===0)return null;const o=()=>{if(a.length===0)return null;let w=e.get(a[a.length-1]);for(;w.refs.length===w.i;)if(a.pop(),a.length>0)w=e.get(a[a.length-1]);else return null;return w};let c=o();if(c===null)return null;const u=new $2,d=new Map,f=(w,A)=>{const S=d.get(w);(S==null||S>A)&&d.set(w,A)};let g=c.refs[c.i++];const y=new Map,x=()=>{for(const w of n){const A=w.id.client,S=e.get(A);S?(S.i--,u.clients.set(A,S.refs.slice(S.i)),e.delete(A),S.i=0,S.refs=[]):u.clients.set(A,[w]),a=a.filter(C=>C!==A)}n.length=0};for(;;){if(g.constructor!==ai){const A=qo(y,g.id.client,()=>yn(t,g.id.client))-g.id.clock;if(A<0)n.push(g),f(g.id.client,g.id.clock-1),x();else{const S=g.getMissing(i,t);if(S!==null){n.push(g);const C=e.get(S)||{refs:[],i:0};if(C.refs.length===C.i)f(S,yn(t,S)),x();else{g=C.refs[C.i++];continue}}else(A===0||A<g.length)&&(g.integrate(i,A),y.set(g.id.client,g.id.clock+g.length))}}if(n.length>0)g=n.pop();else if(c!==null&&c.i<c.refs.length)g=c.refs[c.i++];else{if(c=o(),c===null)break;g=c.refs[c.i++]}}if(u.clients.size>0){const w=new vc;return I_(w,u,new Map),ee(w.restEncoder,0),{missing:d,update:w.toUint8Array()}}return null},x6=(i,t)=>I_(i,t.doc.store,t.beforeState),w6=(i,t,e,n=new zh(i))=>Ce(t,a=>{a.local=!1;let o=!1;const c=a.doc,u=c.store,d=v6(n,c),f=b6(a,u,d),g=u.pendingStructs;if(g){for(const[x,w]of g.missing)if(w<yn(u,x)){o=!0;break}if(f){for(const[x,w]of f.missing){const A=g.missing.get(x);(A==null||A>w)&&g.missing.set(x,w)}g.update=iv([g.update,f.update])}}else u.pendingStructs=f;const y=bk(n,a,u);if(u.pendingDs){const x=new zh(Qh(u.pendingDs));Ut(x.restDecoder);const w=bk(x,a,u);y&&w?u.pendingDs=iv([y,w]):u.pendingDs=y||w}else u.pendingDs=y;if(o){const x=u.pendingStructs.update;u.pendingStructs=null,V2(a.doc,x)}},e,!1),V2=(i,t,e,n=zh)=>{const a=Qh(t);w6(a,i,e,new n(a))},A6=(i,t,e)=>V2(i,t,e,H2),_6=(i,t,e=new Map)=>{I_(i,t.store,e),Zh(i,f6(t.store))},S6=(i,t=new Uint8Array([0]),e=new vc)=>{const n=q2(t);_6(e,i,n);const a=[e.toUint8Array()];if(i.store.pendingDs&&a.push(i.store.pendingDs),i.store.pendingStructs&&a.push(F6(i.store.pendingStructs.update,t)),a.length>1){if(e.constructor===Ag)return j6(a.map((o,c)=>c===0?o:z6(o)));if(e.constructor===vc)return iv(a)}return a[0]},E6=(i,t)=>S6(i,t,new Ag),C6=i=>{const t=new Map,e=Ut(i.restDecoder);for(let n=0;n<e;n++){const a=Ut(i.restDecoder),o=Ut(i.restDecoder);t.set(a,o)}return t},q2=i=>C6(new B2(Qh(i)));class T6{constructor(){this.l=[]}}const xk=()=>new T6,wk=(i,t)=>i.l.push(t),Ak=(i,t)=>{const e=i.l,n=e.length;i.l=e.filter(a=>t!==a),n===i.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},G2=(i,t,e)=>L_(i.l,[t,e]);class Lu{constructor(t,e){this.client=t,this.clock=e}}const ny=(i,t)=>i===t||i!==null&&t!==null&&i.client===t.client&&i.clock===t.clock,Zt=(i,t)=>new Lu(i,t),k6=i=>{for(const[t,e]of i.doc.share.entries())if(e===i)return t;throw gr()},wu=(i,t)=>t===void 0?!i.deleted:t.sv.has(i.id.client)&&(t.sv.get(i.id.client)||0)>i.id.clock&&!z2(t.ds,i.id),Bw=(i,t)=>{const e=qo(i.meta,Bw,Fh),n=i.doc.store;e.has(t)||(t.sv.forEach((a,o)=>{a<yn(n,o)&&Fo(i,Zt(o,a))}),I2(i,t.ds,a=>{}),e.add(t))};class $2{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const z_=i=>{const t=new Map;return i.clients.forEach((e,n)=>{const a=e[e.length-1];t.set(n,a.id.clock+a.length)}),t},yn=(i,t)=>{const e=i.clients.get(t);if(e===void 0)return 0;const n=e[e.length-1];return n.id.clock+n.length},X2=(i,t)=>{let e=i.clients.get(t.id.client);if(e===void 0)e=[],i.clients.set(t.id.client,e);else{const n=e[e.length-1];if(n.id.clock+n.length!==t.id.clock)throw gr()}e.push(t)},mr=(i,t)=>{let e=0,n=i.length-1,a=i[n],o=a.id.clock;if(o===t)return n;let c=jo(t/(o+a.length-1)*n);for(;e<=n;){if(a=i[c],o=a.id.clock,o<=t){if(t<o+a.length)return c;e=c+1}else n=c-1;c=jo((e+n)/2)}throw gr()},R6=(i,t)=>{const e=i.clients.get(t.client);return e[mr(e,t.clock)]},lw=R6,Hw=(i,t,e)=>{const n=mr(t,e),a=t[n];return a.id.clock<e&&a instanceof on?(t.splice(n+1,0,uv(i,a,e-a.id.clock)),n+1):n},Fo=(i,t)=>{const e=i.doc.store.clients.get(t.client);return e[Hw(i,e,t.clock)]},_k=(i,t,e)=>{const n=t.clients.get(e.client),a=mr(n,e.clock),o=n[a];return e.clock!==o.id.clock+o.length-1&&o.constructor!==ri&&n.splice(a+1,0,uv(i,o,e.clock-o.id.clock+1)),o},N6=(i,t,e)=>{const n=i.clients.get(t.id.client);n[mr(n,t.id.clock)]=e},Y2=(i,t,e,n,a)=>{if(n===0)return;const o=e+n;let c=Hw(i,t,e),u;do u=t[c++],o<u.id.clock+u.length&&Hw(i,t,o),a(u);while(c<t.length&&t[c].id.clock<o)};class M6{constructor(t,e,n){this.doc=t,this.deleteSet=new wg,this.beforeState=z_(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Sk=(i,t)=>t.deleteSet.clients.size===0&&!ZU(t.afterState,(e,n)=>t.beforeState.get(n)!==e)?!1:(P_(t.deleteSet),x6(i,t),Zh(i,t.deleteSet),!0),Ek=(i,t,e)=>{const n=t._item;(n===null||n.id.clock<(i.beforeState.get(n.id.client)||0)&&!n.deleted)&&qo(i.changed,t,Fh).add(e)},wy=(i,t)=>{let e=i[t],n=i[t-1],a=t;for(;a>0;e=n,n=i[--a-1]){if(n.deleted===e.deleted&&n.constructor===e.constructor&&n.mergeWith(e)){e instanceof on&&e.parentSub!==null&&e.parent._map.get(e.parentSub)===e&&e.parent._map.set(e.parentSub,n);continue}break}const o=t-a;return o&&i.splice(t+1-o,o),o},D6=(i,t,e)=>{for(const[n,a]of i.clients.entries()){const o=t.clients.get(n);for(let c=a.length-1;c>=0;c--){const u=a[c],d=u.clock+u.len;for(let f=mr(o,u.clock),g=o[f];f<o.length&&g.id.clock<d;g=o[++f]){const y=o[f];if(u.clock+u.len<=y.id.clock)break;y instanceof on&&y.deleted&&!y.keep&&e(y)&&y.gc(t,!1)}}}},L6=(i,t)=>{i.clients.forEach((e,n)=>{const a=t.clients.get(n);for(let o=e.length-1;o>=0;o--){const c=e[o],u=A2(a.length-1,1+mr(a,c.clock+c.len-1));for(let d=u,f=a[d];d>0&&f.id.clock>=c.clock;f=a[d])d-=1+wy(a,d)}})},K2=(i,t)=>{if(t<i.length){const e=i[t],n=e.doc,a=n.store,o=e.deleteSet,c=e._mergeStructs;try{P_(o),e.afterState=z_(e.doc.store),n.emit("beforeObserverCalls",[e,n]);const u=[];e.changed.forEach((d,f)=>u.push(()=>{(f._item===null||!f._item.deleted)&&f._callObserver(e,d)})),u.push(()=>{e.changedParentTypes.forEach((d,f)=>{f._dEH.l.length>0&&(f._item===null||!f._item.deleted)&&(d=d.filter(g=>g.target._item===null||!g.target._item.deleted),d.forEach(g=>{g.currentTarget=f,g._path=null}),d.sort((g,y)=>g.path.length-y.path.length),G2(f._dEH,d,e))})}),u.push(()=>n.emit("afterTransaction",[e,n])),L_(u,[]),e._needFormattingCleanup&&J6(e)}finally{n.gc&&D6(o,a,n.gcFilter),L6(o,a),e.afterState.forEach((g,y)=>{const x=e.beforeState.get(y)||0;if(x!==g){const w=a.clients.get(y),A=Tc(mr(w,x),1);for(let S=w.length-1;S>=A;)S-=1+wy(w,S)}});for(let g=c.length-1;g>=0;g--){const{client:y,clock:x}=c[g].id,w=a.clients.get(y),A=mr(w,x);A+1<w.length&&wy(w,A+1)>1||A>0&&wy(w,A)}if(!e.local&&e.afterState.get(n.clientID)!==e.beforeState.get(n.clientID)&&(o6(O_,D2,"[yjs] ",L2,O2,"Changed the client-id because another client seems to be using it."),n.clientID=U2()),n.emit("afterTransactionCleanup",[e,n]),n._observers.has("update")){const g=new Ag;Sk(g,e)&&n.emit("update",[g.toUint8Array(),e.origin,n,e])}if(n._observers.has("updateV2")){const g=new vc;Sk(g,e)&&n.emit("updateV2",[g.toUint8Array(),e.origin,n,e])}const{subdocsAdded:u,subdocsLoaded:d,subdocsRemoved:f}=e;(u.size>0||f.size>0||d.size>0)&&(u.forEach(g=>{g.clientID=n.clientID,g.collectionid==null&&(g.collectionid=n.collectionid),n.subdocs.add(g)}),f.forEach(g=>n.subdocs.delete(g)),n.emit("subdocs",[{loaded:d,added:u,removed:f},n,e]),f.forEach(g=>g.destroy())),i.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,i])):K2(i,t+1)}}},Ce=(i,t,e=null,n=!0)=>{const a=i._transactionCleanups;let o=!1,c=null;i._transaction===null&&(o=!0,i._transaction=new M6(i,e,n),a.push(i._transaction),a.length===1&&i.emit("beforeAllTransactions",[i]),i.emit("beforeTransaction",[i._transaction,i]));try{c=t(i._transaction)}finally{if(o){const u=i._transaction===a[0];i._transaction=null,u&&K2(a,0)}}return c};function*O6(i){const t=Ut(i.restDecoder);for(let e=0;e<t;e++){const n=Ut(i.restDecoder),a=i.readClient();let o=Ut(i.restDecoder);for(let c=0;c<n;c++){const u=i.readInfo();if(u===10){const d=Ut(i.restDecoder);yield new ai(Zt(a,o),d),o+=d}else if((Qv&u)!==0){const d=(u&(ba|Us))===0,f=new on(Zt(a,o),null,(u&Us)===Us?i.readLeftID():null,null,(u&ba)===ba?i.readRightID():null,d?i.readParentInfo()?i.readString():i.readLeftID():null,d&&(u&kf)===kf?i.readString():null,fM(i,u));yield f,o+=f.length}else{const d=i.readLen();yield new ri(Zt(a,o),d),o+=d}}}}class U_{constructor(t,e){this.gen=O6(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ai);return this.curr}}class B_{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const j6=i=>iv(i,H2,Ag),P6=(i,t)=>{if(i.constructor===ri){const{client:e,clock:n}=i.id;return new ri(Zt(e,n+t),i.length-t)}else if(i.constructor===ai){const{client:e,clock:n}=i.id;return new ai(Zt(e,n+t),i.length-t)}else{const e=i,{client:n,clock:a}=e.id;return new on(Zt(n,a+t),null,Zt(n,a+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},iv=(i,t=zh,e=vc)=>{if(i.length===1)return i[0];const n=i.map(g=>new t(Qh(g)));let a=n.map(g=>new U_(g,!0)),o=null;const c=new e,u=new B_(c);for(;a=a.filter(x=>x.curr!==null),a.sort((x,w)=>{if(x.curr.id.client===w.curr.id.client){const A=x.curr.id.clock-w.curr.id.clock;return A===0?x.curr.constructor===w.curr.constructor?0:x.curr.constructor===ai?1:-1:A}else return w.curr.id.client-x.curr.id.client}),a.length!==0;){const g=a[0],y=g.curr.id.client;if(o!==null){let x=g.curr,w=!1;for(;x!==null&&x.id.clock+x.length<=o.struct.id.clock+o.struct.length&&x.id.client>=o.struct.id.client;)x=g.next(),w=!0;if(x===null||x.id.client!==y||w&&x.id.clock>o.struct.id.clock+o.struct.length)continue;if(y!==o.struct.id.client)lo(u,o.struct,o.offset),o={struct:x,offset:0},g.next();else if(o.struct.id.clock+o.struct.length<x.id.clock)if(o.struct.constructor===ai)o.struct.length=x.id.clock+x.length-o.struct.id.clock;else{lo(u,o.struct,o.offset);const A=x.id.clock-o.struct.id.clock-o.struct.length;o={struct:new ai(Zt(y,o.struct.id.clock+o.struct.length),A),offset:0}}else{const A=o.struct.id.clock+o.struct.length-x.id.clock;A>0&&(o.struct.constructor===ai?o.struct.length-=A:x=P6(x,A)),o.struct.mergeWith(x)||(lo(u,o.struct,o.offset),o={struct:x,offset:0},g.next())}}else o={struct:g.curr,offset:0},g.next();for(let x=g.curr;x!==null&&x.id.client===y&&x.id.clock===o.struct.id.clock+o.struct.length&&x.constructor!==ai;x=g.next())lo(u,o.struct,o.offset),o={struct:x,offset:0}}o!==null&&(lo(u,o.struct,o.offset),o=null),H_(u);const d=n.map(g=>F_(g)),f=h6(d);return Zh(c,f),c.toUint8Array()},F6=(i,t,e=zh,n=vc)=>{const a=q2(t),o=new n,c=new B_(o),u=new e(Qh(i)),d=new U_(u,!1);for(;d.curr;){const g=d.curr,y=g.id.client,x=a.get(y)||0;if(d.curr.constructor===ai){d.next();continue}if(g.id.clock+g.length>x)for(lo(c,g,Tc(x-g.id.clock,0)),d.next();d.curr&&d.curr.id.client===y;)lo(c,d.curr,0),d.next();else for(;d.curr&&d.curr.id.client===y&&d.curr.id.clock+d.curr.length<=x;)d.next()}H_(c);const f=F_(u);return Zh(o,f),o.toUint8Array()},W2=i=>{i.written>0&&(i.clientStructs.push({written:i.written,restEncoder:lr(i.encoder.restEncoder)}),i.encoder.restEncoder=Zv(),i.written=0)},lo=(i,t,e)=>{i.written>0&&i.currClient!==t.id.client&&W2(i),i.written===0&&(i.currClient=t.id.client,i.encoder.writeClient(t.id.client),ee(i.encoder.restEncoder,t.id.clock+e)),t.write(i.encoder,e),i.written++},H_=i=>{W2(i);const t=i.encoder.restEncoder;ee(t,i.clientStructs.length);for(let e=0;e<i.clientStructs.length;e++){const n=i.clientStructs[e];ee(t,n.written),Jv(t,n.restEncoder)}},I6=(i,t,e,n)=>{const a=new e(Qh(i)),o=new U_(a,!1),c=new n,u=new B_(c);for(let f=o.curr;f!==null;f=o.next())lo(u,t(f),0);H_(u);const d=F_(a);return Zh(c,d),c.toUint8Array()},z6=i=>I6(i,qB,zh,Ag),Ck="You must not compute changes after the event-handler fired.";class eb{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=U6(this.currentTarget,this.target))}deletes(t){return z2(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Po(Ck);const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(a=>{if(a!==null){const o=e._map.get(a);let c,u;if(this.adds(o)){let d=o.left;for(;d!==null&&this.adds(d);)d=d.left;if(this.deletes(o))if(d!==null&&this.deletes(d))c="delete",u=nw(d.content.getContent());else return;else d!==null&&this.deletes(d)?(c="update",u=nw(d.content.getContent())):(c="add",u=void 0)}else if(this.deletes(o))c="delete",u=nw(o.content.getContent());else return;t.set(a,{action:c,oldValue:u})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw Po(Ck);const e=this.target,n=Fh(),a=Fh(),o=[];if(t={added:n,deleted:a,delta:o,keys:this.keys},this.transaction.changed.get(e).has(null)){let u=null;const d=()=>{u&&o.push(u)};for(let f=e._start;f!==null;f=f.right)f.deleted?this.deletes(f)&&!this.adds(f)&&((u===null||u.delete===void 0)&&(d(),u={delete:0}),u.delete+=f.length,a.add(f)):this.adds(f)?((u===null||u.insert===void 0)&&(d(),u={insert:[]}),u.insert=u.insert.concat(f.content.getContent()),n.add(f)):((u===null||u.retain===void 0)&&(d(),u={retain:0}),u.retain+=f.length);u!==null&&u.retain===void 0&&d()}this._changes=t}return t}}const U6=(i,t)=>{const e=[];for(;t._item!==null&&t!==i;){if(t._item.parentSub!==null)e.unshift(t._item.parentSub);else{let n=0,a=t._item.parent._start;for(;a!==t._item&&a!==null;)!a.deleted&&a.countable&&(n+=a.length),a=a.right;e.unshift(n)}t=t._item.parent}return e},Vn=()=>{l6("Invalid access: Add Yjs type to a document before reading data.")},Q2=80;let V_=0;class B6{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=V_++}}const H6=i=>{i.timestamp=V_++},Z2=(i,t,e)=>{i.p.marker=!1,i.p=t,t.marker=!0,i.index=e,i.timestamp=V_++},V6=(i,t,e)=>{if(i.length>=Q2){const n=i.reduce((a,o)=>a.timestamp<o.timestamp?a:o);return Z2(n,t,e),n}else{const n=new B6(t,e);return i.push(n),n}},nb=(i,t)=>{if(i._start===null||t===0||i._searchMarker===null)return null;const e=i._searchMarker.length===0?null:i._searchMarker.reduce((o,c)=>vy(t-o.index)<vy(t-c.index)?o:c);let n=i._start,a=0;for(e!==null&&(n=e.p,a=e.index,H6(e));n.right!==null&&a<t;){if(!n.deleted&&n.countable){if(t<a+n.length)break;a+=n.length}n=n.right}for(;n.left!==null&&a>t;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);return e!==null&&vy(e.index-a)<n.parent.length/Q2?(Z2(e,n,a),e):V6(i._searchMarker,n,a)},Lf=(i,t,e)=>{for(let n=i.length-1;n>=0;n--){const a=i[n];if(e>0){let o=a.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(a.index-=o.length);if(o===null||o.marker===!0){i.splice(n,1);continue}a.p=o,o.marker=!0}(t<a.index||e>0&&t===a.index)&&(a.index=Tc(t,a.index+e))}},sb=(i,t,e)=>{const n=i,a=t.changedParentTypes;for(;qo(a,i,()=>[]).push(e),i._item!==null;)i=i._item.parent;G2(n._eH,e,t)};class On{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=xk(),this._dEH=xk(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw ur()}clone(){throw ur()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){wk(this._eH,t)}observeDeep(t){wk(this._dEH,t)}unobserve(t){Ak(this._eH,t)}unobserveDeep(t){Ak(this._dEH,t)}toJSON(){}}const J2=(i,t,e)=>{i.doc??Vn(),t<0&&(t=i._length+t),e<0&&(e=i._length+e);let n=e-t;const a=[];let o=i._start;for(;o!==null&&n>0;){if(o.countable&&!o.deleted){const c=o.content.getContent();if(c.length<=t)t-=c.length;else{for(let u=t;u<c.length&&n>0;u++)a.push(c[u]),n--;t=0}}o=o.right}return a},tM=i=>{i.doc??Vn();const t=[];let e=i._start;for(;e!==null;){if(e.countable&&!e.deleted){const n=e.content.getContent();for(let a=0;a<n.length;a++)t.push(n[a])}e=e.right}return t},Of=(i,t)=>{let e=0,n=i._start;for(i.doc??Vn();n!==null;){if(n.countable&&!n.deleted){const a=n.content.getContent();for(let o=0;o<a.length;o++)t(a[o],e++,i)}n=n.right}},eM=(i,t)=>{const e=[];return Of(i,(n,a)=>{e.push(t(n,a,i))}),e},q6=i=>{let t=i._start,e=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(e===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};e=t.content.getContent(),n=0,t=t.right}const a=e[n++];return e.length<=n&&(e=null),{done:!1,value:a}}}},nM=(i,t)=>{i.doc??Vn();const e=nb(i,t);let n=i._start;for(e!==null&&(n=e.p,t-=e.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},rv=(i,t,e,n)=>{let a=e;const o=i.doc,c=o.clientID,u=o.store,d=e===null?t._start:e.right;let f=[];const g=()=>{f.length>0&&(a=new on(Zt(c,yn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new xc(f)),a.integrate(i,0),f=[])};n.forEach(y=>{if(y===null)f.push(y);else switch(y.constructor){case Number:case Object:case Boolean:case Array:case String:f.push(y);break;default:switch(g(),y.constructor){case Uint8Array:case ArrayBuffer:a=new on(Zt(c,yn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new _g(new Uint8Array(y))),a.integrate(i,0);break;case Jh:a=new on(Zt(c,yn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new Sg(y)),a.integrate(i,0);break;default:if(y instanceof On)a=new on(Zt(c,yn(u,c)),a,a&&a.lastId,d,d&&d.id,t,null,new Ra(y)),a.integrate(i,0);else throw new Error("Unexpected content type in insert operation")}}}),g()},sM=()=>Po("Length exceeded!"),iM=(i,t,e,n)=>{if(e>t._length)throw sM();if(e===0)return t._searchMarker&&Lf(t._searchMarker,e,n.length),rv(i,t,null,n);const a=e,o=nb(t,e);let c=t._start;for(o!==null&&(c=o.p,e-=o.index,e===0&&(c=c.prev,e+=c&&c.countable&&!c.deleted?c.length:0));c!==null;c=c.right)if(!c.deleted&&c.countable){if(e<=c.length){e<c.length&&Fo(i,Zt(c.id.client,c.id.clock+e));break}e-=c.length}return t._searchMarker&&Lf(t._searchMarker,a,n.length),rv(i,t,c,n)},G6=(i,t,e)=>{let a=(t._searchMarker||[]).reduce((o,c)=>c.index>o.index?c:o,{index:0,p:t._start}).p;if(a)for(;a.right;)a=a.right;return rv(i,t,a,e)},rM=(i,t,e,n)=>{if(n===0)return;const a=e,o=n,c=nb(t,e);let u=t._start;for(c!==null&&(u=c.p,e-=c.index);u!==null&&e>0;u=u.right)!u.deleted&&u.countable&&(e<u.length&&Fo(i,Zt(u.id.client,u.id.clock+e)),e-=u.length);for(;n>0&&u!==null;)u.deleted||(n<u.length&&Fo(i,Zt(u.id.client,u.id.clock+n)),u.delete(i),n-=u.length),u=u.right;if(n>0)throw sM();t._searchMarker&&Lf(t._searchMarker,a,-o+n)},av=(i,t,e)=>{const n=t._map.get(e);n!==void 0&&n.delete(i)},q_=(i,t,e,n)=>{const a=t._map.get(e)||null,o=i.doc,c=o.clientID;let u;if(n==null)u=new xc([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:u=new xc([n]);break;case Uint8Array:u=new _g(n);break;case Jh:u=new Sg(n);break;default:if(n instanceof On)u=new Ra(n);else throw new Error("Unexpected content type")}new on(Zt(c,yn(o.store,c)),a,a&&a.lastId,null,null,t,e,u).integrate(i,0)},G_=(i,t)=>{i.doc??Vn();const e=i._map.get(t);return e!==void 0&&!e.deleted?e.content.getContent()[e.length-1]:void 0},aM=i=>{const t={};return i.doc??Vn(),i._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},oM=(i,t)=>{i.doc??Vn();const e=i._map.get(t);return e!==void 0&&!e.deleted},$6=(i,t)=>{const e={};return i._map.forEach((n,a)=>{let o=n;for(;o!==null&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;o!==null&&wu(o,t)&&(e[a]=o.content.getContent()[o.length-1])}),e},sy=i=>(i.doc??Vn(),c6(i._map.entries(),t=>!t[1].deleted));class X6 extends eb{}class Ou extends On{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Ou;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ou}clone(){const t=new Ou;return t.insert(0,this.toArray().map(e=>e instanceof On?e.clone():e)),t}get length(){return this.doc??Vn(),this._length}_callObserver(t,e){super._callObserver(t,e),sb(this,t,new X6(this,t))}insert(t,e){this.doc!==null?Ce(this.doc,n=>{iM(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.doc!==null?Ce(this.doc,e=>{G6(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){this.doc!==null?Ce(this.doc,n=>{rM(n,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return nM(this,t)}toArray(){return tM(this)}slice(t=0,e=this.length){return J2(this,t,e)}toJSON(){return this.map(t=>t instanceof On?t.toJSON():t)}map(t){return eM(this,t)}forEach(t){Of(this,t)}[Symbol.iterator](){return q6(this)}_write(t){t.writeTypeRef(vH)}}const Y6=i=>new Ou;class K6 extends eb{constructor(t,e,n){super(t,e),this.keysChanged=n}}class Uh extends On{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((n,a)=>{this.set(a,n)}),this._prelimContent=null}_copy(){return new Uh}clone(){const t=new Uh;return this.forEach((e,n)=>{t.set(n,e instanceof On?e.clone():e)}),t}_callObserver(t,e){sb(this,t,new K6(this,t,e))}toJSON(){this.doc??Vn();const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const a=e.content.getContent()[e.length-1];t[n]=a instanceof On?a.toJSON():a}}),t}get size(){return[...sy(this)].length}keys(){return ow(sy(this),t=>t[0])}values(){return ow(sy(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return ow(sy(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??Vn(),this._map.forEach((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Ce(this.doc,e=>{av(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return this.doc!==null?Ce(this.doc,n=>{q_(n,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return G_(this,t)}has(t){return oM(this,t)}clear(){this.doc!==null?Ce(this.doc,t=>{this.forEach(function(e,n,a){av(t,a,n)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(bH)}}const W6=i=>new Uh,Do=(i,t)=>i===t||typeof i=="object"&&typeof t=="object"&&i&&t&&HB(i,t);class Vw{constructor(t,e,n,a){this.left=t,this.right=e,this.index=n,this.currentAttributes=a}forward(){switch(this.right===null&&gr(),this.right.content.constructor){case ln:this.right.deleted||td(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Tk=(i,t,e)=>{for(;t.right!==null&&e>0;){switch(t.right.content.constructor){case ln:t.right.deleted||td(t.currentAttributes,t.right.content);break;default:t.right.deleted||(e<t.right.length&&Fo(i,Zt(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},iy=(i,t,e,n)=>{const a=new Map,o=n?nb(t,e):null;if(o){const c=new Vw(o.p.left,o.p,o.index,a);return Tk(i,c,e-o.index)}else{const c=new Vw(null,t._start,0,a);return Tk(i,c,e)}},lM=(i,t,e,n)=>{for(;e.right!==null&&(e.right.deleted===!0||e.right.content.constructor===ln&&Do(n.get(e.right.content.key),e.right.content.value));)e.right.deleted||n.delete(e.right.content.key),e.forward();const a=i.doc,o=a.clientID;n.forEach((c,u)=>{const d=e.left,f=e.right,g=new on(Zt(o,yn(a.store,o)),d,d&&d.lastId,f,f&&f.id,t,null,new ln(u,c));g.integrate(i,0),e.right=g,e.forward()})},td=(i,t)=>{const{key:e,value:n}=t;n===null?i.delete(e):i.set(e,n)},cM=(i,t)=>{for(;i.right!==null;){if(!(i.right.deleted||i.right.content.constructor===ln&&Do(t[i.right.content.key]??null,i.right.content.value)))break;i.forward()}},uM=(i,t,e,n)=>{const a=i.doc,o=a.clientID,c=new Map;for(const u in n){const d=n[u],f=e.currentAttributes.get(u)??null;if(!Do(f,d)){c.set(u,f);const{left:g,right:y}=e;e.right=new on(Zt(o,yn(a.store,o)),g,g&&g.lastId,y,y&&y.id,t,null,new ln(u,d)),e.right.integrate(i,0),e.forward()}}return c},cw=(i,t,e,n,a)=>{e.currentAttributes.forEach((x,w)=>{a[w]===void 0&&(a[w]=null)});const o=i.doc,c=o.clientID;cM(e,a);const u=uM(i,t,e,a),d=n.constructor===String?new yr(n):n instanceof On?new Ra(n):new kc(n);let{left:f,right:g,index:y}=e;t._searchMarker&&Lf(t._searchMarker,e.index,d.getLength()),g=new on(Zt(c,yn(o.store,c)),f,f&&f.lastId,g,g&&g.id,t,null,d),g.integrate(i,0),e.right=g,e.index=y,e.forward(),lM(i,t,e,u)},kk=(i,t,e,n,a)=>{const o=i.doc,c=o.clientID;cM(e,a);const u=uM(i,t,e,a);t:for(;e.right!==null&&(n>0||u.size>0&&(e.right.deleted||e.right.content.constructor===ln));){if(!e.right.deleted)switch(e.right.content.constructor){case ln:{const{key:d,value:f}=e.right.content,g=a[d];if(g!==void 0){if(Do(g,f))u.delete(d);else{if(n===0)break t;u.set(d,f)}e.right.delete(i)}else e.currentAttributes.set(d,f);break}default:n<e.right.length&&Fo(i,Zt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length;break}e.forward()}if(n>0){let d="";for(;n>0;n--)d+=`
`;e.right=new on(Zt(c,yn(o.store,c)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new yr(d)),e.right.integrate(i,0),e.forward()}lM(i,t,e,u)},hM=(i,t,e,n,a)=>{let o=t;const c=Li();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===ln){const f=o.content;c.set(f.key,f)}o=o.right}let u=0,d=!1;for(;t!==o;){if(e===t&&(d=!0),!t.deleted){const f=t.content;switch(f.constructor){case ln:{const{key:g,value:y}=f,x=n.get(g)??null;(c.get(g)!==f||x===y)&&(t.delete(i),u++,!d&&(a.get(g)??null)===y&&x!==y&&(x===null?a.delete(g):a.set(g,x))),!d&&!t.deleted&&td(a,f);break}}}t=t.right}return u},Q6=(i,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===ln){const n=t.content.key;e.has(n)?t.delete(i):e.add(n)}t=t.left}},Z6=i=>{let t=0;return Ce(i.doc,e=>{let n=i._start,a=i._start,o=Li();const c=Pw(o);for(;a;){if(a.deleted===!1)switch(a.content.constructor){case ln:td(c,a.content);break;default:t+=hM(e,n,a,o,c),o=Pw(c),n=a;break}a=a.right}}),t},J6=i=>{const t=new Set,e=i.doc;for(const[n,a]of i.afterState.entries()){const o=i.beforeState.get(n)||0;a!==o&&Y2(i,e.store.clients.get(n),o,a,c=>{!c.deleted&&c.content.constructor===ln&&c.constructor!==ri&&t.add(c.parent)})}Ce(e,n=>{I2(i,i.deleteSet,a=>{if(a instanceof ri||!a.parent._hasFormatting||t.has(a.parent))return;const o=a.parent;a.content.constructor===ln?t.add(o):Q6(n,a)});for(const a of t)Z6(a)})},Rk=(i,t,e)=>{const n=e,a=Pw(t.currentAttributes),o=t.right;for(;e>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Ra:case kc:case yr:e<t.right.length&&Fo(i,Zt(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(i);break}t.forward()}o&&hM(i,o,t.right,a,t.currentAttributes);const c=(t.left||t.right).parent;return c._searchMarker&&Lf(c._searchMarker,t.index,-n+e),t};class tH extends eb{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(a=>{a===null?this.childListChanged=!0:this.keysChanged.add(a)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,e=[];Ce(t,n=>{const a=new Map,o=new Map;let c=this.target._start,u=null;const d={};let f="",g=0,y=0;const x=()=>{if(u!==null){let w=null;switch(u){case"delete":y>0&&(w={delete:y}),y=0;break;case"insert":(typeof f=="object"||f.length>0)&&(w={insert:f},a.size>0&&(w.attributes={},a.forEach((A,S)=>{A!==null&&(w.attributes[S]=A)}))),f="";break;case"retain":g>0&&(w={retain:g},zB(d)||(w.attributes=PB({},d))),g=0;break}w&&e.push(w),u=null}};for(;c!==null;){switch(c.content.constructor){case Ra:case kc:this.adds(c)?this.deletes(c)||(x(),u="insert",f=c.content.getContent()[0],x()):this.deletes(c)?(u!=="delete"&&(x(),u="delete"),y+=1):c.deleted||(u!=="retain"&&(x(),u="retain"),g+=1);break;case yr:this.adds(c)?this.deletes(c)||(u!=="insert"&&(x(),u="insert"),f+=c.content.str):this.deletes(c)?(u!=="delete"&&(x(),u="delete"),y+=c.length):c.deleted||(u!=="retain"&&(x(),u="retain"),g+=c.length);break;case ln:{const{key:w,value:A}=c.content;if(this.adds(c)){if(!this.deletes(c)){const S=a.get(w)??null;Do(S,A)?A!==null&&c.delete(n):(u==="retain"&&x(),Do(A,o.get(w)??null)?delete d[w]:d[w]=A)}}else if(this.deletes(c)){o.set(w,A);const S=a.get(w)??null;Do(S,A)||(u==="retain"&&x(),d[w]=S)}else if(!c.deleted){o.set(w,A);const S=d[w];S!==void 0&&(Do(S,A)?S!==null&&c.delete(n):(u==="retain"&&x(),A===null?delete d[w]:d[w]=A))}c.deleted||(u==="insert"&&x(),td(a,c.content));break}}c=c.right}for(x();e.length>0;){const w=e[e.length-1];if(w.retain!==void 0&&w.attributes===void 0)e.pop();else break}}),this._delta=e}return this._delta}}class Bh extends On{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Vn(),this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new Bh}clone(){const t=new Bh;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new tH(this,t,e);sb(this,t,n),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??Vn();let t="",e=this._start;for(;e!==null;)!e.deleted&&e.countable&&e.content.constructor===yr&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){this.doc!==null?Ce(this.doc,n=>{const a=new Vw(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const c=t[o];if(c.insert!==void 0){const u=!e&&typeof c.insert=="string"&&o===t.length-1&&a.right===null&&c.insert.slice(-1)===`
`?c.insert.slice(0,-1):c.insert;(typeof u!="string"||u.length>0)&&cw(n,this,a,u,c.attributes||{})}else c.retain!==void 0?kk(n,this,a,c.retain,c.attributes||{}):c.delete!==void 0&&Rk(n,a,c.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,n){this.doc??Vn();const a=[],o=new Map,c=this.doc;let u="",d=this._start;function f(){if(u.length>0){const y={};let x=!1;o.forEach((A,S)=>{x=!0,y[S]=A});const w={insert:u};x&&(w.attributes=y),a.push(w),u=""}}const g=()=>{for(;d!==null;){if(wu(d,t)||e!==void 0&&wu(d,e))switch(d.content.constructor){case yr:{const y=o.get("ychange");t!==void 0&&!wu(d,t)?(y===void 0||y.user!==d.id.client||y.type!=="removed")&&(f(),o.set("ychange",n?n("removed",d.id):{type:"removed"})):e!==void 0&&!wu(d,e)?(y===void 0||y.user!==d.id.client||y.type!=="added")&&(f(),o.set("ychange",n?n("added",d.id):{type:"added"})):y!==void 0&&(f(),o.delete("ychange")),u+=d.content.str;break}case Ra:case kc:{f();const y={insert:d.content.getContent()[0]};if(o.size>0){const x={};y.attributes=x,o.forEach((w,A)=>{x[A]=w})}a.push(y);break}case ln:wu(d,t)&&(f(),td(o,d.content));break}d=d.right}f()};return t||e?Ce(c,y=>{t&&Bw(y,t),e&&Bw(y,e),g()},"cleanup"):g(),a}insert(t,e,n){if(e.length<=0)return;const a=this.doc;a!==null?Ce(a,o=>{const c=iy(o,this,t,!n);n||(n={},c.currentAttributes.forEach((u,d)=>{n[d]=u})),cw(o,this,c,e,n)}):this._pending.push(()=>this.insert(t,e,n))}insertEmbed(t,e,n){const a=this.doc;a!==null?Ce(a,o=>{const c=iy(o,this,t,!n);cw(o,this,c,e,n||{})}):this._pending.push(()=>this.insertEmbed(t,e,n||{}))}delete(t,e){if(e===0)return;const n=this.doc;n!==null?Ce(n,a=>{Rk(a,iy(a,this,t,!0),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,n){if(e===0)return;const a=this.doc;a!==null?Ce(a,o=>{const c=iy(o,this,t,!1);c.right!==null&&kk(o,this,c,e,n)}):this._pending.push(()=>this.format(t,e,n))}removeAttribute(t){this.doc!==null?Ce(this.doc,e=>{av(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){this.doc!==null?Ce(this.doc,n=>{q_(n,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return G_(this,t)}getAttributes(){return aM(this)}_write(t){t.writeTypeRef(xH)}}const eH=i=>new Bh;class uw{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??Vn()}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(e)))do if(e=t.content.type,!t.deleted&&(e.constructor===Hh||e.constructor===bc)&&e._start!==null)t=e._start;else for(;t!==null;){const n=t.next;if(n!==null){t=n;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class bc extends On{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new bc}clone(){const t=new bc;return t.insert(0,this.toArray().map(e=>e instanceof On?e.clone():e)),t}get length(){return this.doc??Vn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new uw(this,t)}querySelector(t){t=t.toUpperCase();const n=new uw(this,a=>a.nodeName&&a.nodeName.toUpperCase()===t).next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),yc(new uw(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){sb(this,t,new iH(this,e,t))}toString(){return eM(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const a=t.createDocumentFragment();return n!==void 0&&n._createAssociation(a,this),Of(this,o=>{a.insertBefore(o.toDOM(t,e,n),null)}),a}insert(t,e){this.doc!==null?Ce(this.doc,n=>{iM(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(this.doc!==null)Ce(this.doc,n=>{const a=t&&t instanceof On?t._item:t;rv(n,this,a,e)});else{const n=this._prelimContent,a=t===null?0:n.findIndex(o=>o===t)+1;if(a===0&&t!==null)throw Po("Reference item not found");n.splice(a,0,...e)}}delete(t,e=1){this.doc!==null?Ce(this.doc,n=>{rM(n,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return tM(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return nM(this,t)}slice(t=0,e=this.length){return J2(this,t,e)}forEach(t){Of(this,t)}_write(t){t.writeTypeRef(AH)}}const nH=i=>new bc;class Hh extends bc{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((n,a)=>{this.setAttribute(a,n)}),this._prelimAttrs=null}_copy(){return new Hh(this.nodeName)}clone(){const t=new Hh(this.nodeName),e=this.getAttributes();return IB(e,(n,a)=>{typeof n=="string"&&t.setAttribute(a,n)}),t.insert(0,this.toArray().map(n=>n instanceof On?n.clone():n)),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const u in t)n.push(u);n.sort();const a=n.length;for(let u=0;u<a;u++){const d=n[u];e.push(d+'="'+t[d]+'"')}const o=this.nodeName.toLocaleLowerCase(),c=e.length>0?" "+e.join(" "):"";return`<${o}${c}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Ce(this.doc,e=>{av(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){this.doc!==null?Ce(this.doc,n=>{q_(n,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return G_(this,t)}hasAttribute(t){return oM(this,t)}getAttributes(t){return t?$6(this,t):aM(this)}toDOM(t=document,e={},n){const a=t.createElement(this.nodeName),o=this.getAttributes();for(const c in o){const u=o[c];typeof u=="string"&&a.setAttribute(c,u)}return Of(this,c=>{a.appendChild(c.toDOM(t,e,n))}),n!==void 0&&n._createAssociation(a,this),a}_write(t){t.writeTypeRef(wH),t.writeKey(this.nodeName)}}const sH=i=>new Hh(i.readKey());class iH extends eb{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(a=>{a===null?this.childListChanged=!0:this.attributesChanged.add(a)})}}class ov extends Uh{constructor(t){super(),this.hookName=t}_copy(){return new ov(this.hookName)}clone(){const t=new ov(this.hookName);return this.forEach((e,n)=>{t.set(n,e)}),t}toDOM(t=document,e={},n){const a=e[this.hookName];let o;return a!==void 0?o=a.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(o,this),o}_write(t){t.writeTypeRef(_H),t.writeKey(this.hookName)}}const rH=i=>new ov(i.readKey());class lv extends Bh{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new lv}clone(){const t=new lv;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const a=t.createTextNode(this.toString());return n!==void 0&&n._createAssociation(a,this),a}toString(){return this.toDelta().map(t=>{const e=[];for(const a in t.attributes){const o=[];for(const c in t.attributes[a])o.push({key:c,value:t.attributes[a][c]});o.sort((c,u)=>c.key<u.key?-1:1),e.push({nodeName:a,attrs:o})}e.sort((a,o)=>a.nodeName<o.nodeName?-1:1);let n="";for(let a=0;a<e.length;a++){const o=e[a];n+=`<${o.nodeName}`;for(let c=0;c<o.attrs.length;c++){const u=o.attrs[c];n+=` ${u.key}="${u.value}"`}n+=">"}n+=t.insert;for(let a=e.length-1;a>=0;a--)n+=`</${e[a].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(SH)}}const aH=i=>new lv;class $_{constructor(t,e){this.id=t,this.length=e}get deleted(){throw ur()}mergeWith(t){return!1}write(t,e,n){throw ur()}integrate(t,e){throw ur()}}const oH=0;class ri extends $_{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),X2(t.doc.store,this)}write(t,e){t.writeInfo(oH),t.writeLen(this.length-e)}getMissing(t,e){return null}}class _g{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new _g(this.content)}splice(t){throw ur()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const lH=i=>new _g(i.readBuf());class jf{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new jf(this.len)}splice(t){const e=new jf(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){sv(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const cH=i=>new jf(i.readLen()),dM=(i,t)=>new Jh({guid:i,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Sg{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),t.meta!==null&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Sg(dM(this.doc.guid,this.opts))}splice(t){throw ur()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const uH=i=>new Sg(dM(i.readString(),i.readAny()));class kc{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new kc(this.embed)}splice(t){throw ur()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const hH=i=>new kc(i.readJSON());class ln{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ln(this.key,this.value)}splice(t){throw ur()}mergeWith(t){return!1}integrate(t,e){const n=e.parent;n._searchMarker=null,n._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const dH=i=>new ln(i.readKey(),i.readJSON());class cv{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new cv(this.arr)}splice(t){const e=new cv(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const o=this.arr[a];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const fH=i=>{const t=i.readLen(),e=[];for(let n=0;n<t;n++){const a=i.readString();a==="undefined"?e.push(void 0):e.push(JSON.parse(a))}return new cv(e)},pH=nv("node_env")==="development";class xc{constructor(t){this.arr=t,pH&&R2(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new xc(this.arr)}splice(t){const e=new xc(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const o=this.arr[a];t.writeAny(o)}}getRef(){return 8}}const gH=i=>{const t=i.readLen(),e=[];for(let n=0;n<t;n++)e.push(i.readAny());return new xc(e)};class yr{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new yr(this.str)}splice(t){const e=new yr(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"",e.str=""+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(e===0?this.str:this.str.slice(e))}getRef(){return 4}}const mH=i=>new yr(i.readString()),yH=[Y6,W6,eH,sH,nH,rH,aH],vH=0,bH=1,xH=2,wH=3,AH=4,_H=5,SH=6;class Ra{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ra(this.type._copy())}splice(t){throw ur()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;e!==null;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;e!==null;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(t,!0),n=n.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const EH=i=>new Ra(yH[i.readTypeRef()](i)),uv=(i,t,e)=>{const{client:n,clock:a}=t.id,o=new on(Zt(n,a+e),t,Zt(n,a+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=Zt(t.redone.client,t.redone.clock+e)),t.right=o,o.right!==null&&(o.right.left=o),i._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=e,o};class on extends $_{constructor(t,e,n,a,o,c,u,d){super(t,d.getLength()),this.origin=n,this.left=e,this.right=a,this.rightOrigin=o,this.parent=c,this.parentSub=u,this.redone=null,this.content=d,this.info=this.content.isCountable()?ck:0}set marker(t){(this.info&iw)>0!==t&&(this.info^=iw)}get marker(){return(this.info&iw)>0}get keep(){return(this.info&lk)>0}set keep(t){this.keep!==t&&(this.info^=lk)}get countable(){return(this.info&ck)>0}get deleted(){return(this.info&sw)>0}set deleted(t){this.deleted!==t&&(this.info^=sw)}markDeleted(){this.info|=sw}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=yn(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=yn(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Lu&&this.id.client!==this.parent.client&&this.parent.clock>=yn(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=_k(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Fo(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ri||this.right&&this.right.constructor===ri)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===on?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===on&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Lu){const n=lw(e,this.parent);n.constructor===ri?this.parent=null:this.parent=n.content.type}return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=_k(t,t.doc.store,Zt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,a;if(n!==null)a=n.right;else if(this.parentSub!==null)for(a=this.parent._map.get(this.parentSub)||null;a!==null&&a.left!==null;)a=a.left;else a=this.parent._start;const o=new Set,c=new Set;for(;a!==null&&a!==this.right;){if(c.add(a),o.add(a),ny(this.origin,a.origin)){if(a.id.client<this.id.client)n=a,o.clear();else if(ny(this.rightOrigin,a.rightOrigin))break}else if(a.origin!==null&&c.has(lw(t.doc.store,a.origin)))o.has(lw(t.doc.store,a.origin))||(n=a,o.clear());else break;a=a.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),X2(t.doc.store,this),this.content.integrate(t,this),Ek(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new ri(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Zt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&ny(t.origin,this.lastId)&&this.right===t&&ny(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(n=>{n.p===t&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&this.parentSub===null&&(e._length-=this.length),this.markDeleted(),sv(t.deleteSet,this.id.client,this.id.clock,this.length),Ek(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw gr();this.content.gc(t),e?N6(t,this,new ri(this.id,this.length)):this.content=new jf(this.length)}write(t,e){const n=e>0?Zt(this.id.client,this.id.clock+e-1):this.origin,a=this.rightOrigin,o=this.parentSub,c=this.content.getRef()&Qv|(n===null?0:Us)|(a===null?0:ba)|(o===null?0:kf);if(t.writeInfo(c),n!==null&&t.writeLeftID(n),a!==null&&t.writeRightID(a),n===null&&a===null){const u=this.parent;if(u._item!==void 0){const d=u._item;if(d===null){const f=k6(u);t.writeParentInfo(!0),t.writeString(f)}else t.writeParentInfo(!1),t.writeLeftID(d.id)}else u.constructor===String?(t.writeParentInfo(!0),t.writeString(u)):u.constructor===Lu?(t.writeParentInfo(!1),t.writeLeftID(u)):gr();o!==null&&t.writeString(o)}this.content.write(t,e)}}const fM=(i,t)=>CH[t&Qv](i),CH=[()=>{gr()},cH,fH,lH,mH,hH,dH,EH,gH,uH,()=>{gr()}],TH=10;class ai extends $_{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){gr()}write(t,e){t.writeInfo(TH),ee(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const pM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},gM="__ $YJS$ __";pM[gM]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");pM[gM]=!0;const Nk=["bg-blue-500","bg-green-500","bg-yellow-500","bg-red-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"];function kH(i){return i.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2)}function RH(i){const t=i.split("").reduce((e,n)=>e+n.charCodeAt(0),0);return Nk[t%Nk.length]}function NH({collaborators:i,maxShow:t=5}){const e=i.slice(0,t),n=Math.max(0,i.length-t);return i.length===0?null:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(Oh,{className:"h-4 w-4 text-muted-foreground"}),b.jsxs("div",{className:"flex -space-x-2",children:[e.map(a=>b.jsx("div",{className:`
                            relative h-8 w-8 rounded-full border-2 border-background
                            flex items-center justify-center text-white text-xs font-medium
                            ${RH(a.id)}
                            hover:z-10 hover:scale-110 transition-transform cursor-pointer
                        `,title:`${a.name}${a.email?` (${a.email})`:""}`,children:kH(a.name)},a.id)),n>0&&b.jsxs("div",{className:`
                            relative h-8 w-8 rounded-full border-2 border-background
                            flex items-center justify-center bg-muted text-muted-foreground text-xs font-medium
                            hover:z-10 hover:scale-110 transition-transform cursor-pointer
                        `,title:`+${n} more collaborators`,children:["+",n]})]})]})}function MH(i){var a;const t=[],e=i.split(`
`);let n="main.tex";for(let o=0;o<e.length;o++){const c=e[o],u=c.match(/^\(([^)]+\.(?:tex|sty|cls|def))/);if(u&&(n=u[1]),c.startsWith("!")){const d=c.substring(1).trim();let f,g,y=d;for(let x=o+1;x<Math.min(o+5,e.length);x++){const w=e[x],A=w.match(/^l\.(\d+)\s+(.*)/);if(A&&(f=parseInt(A[1]),g=A[2]),w&&!w.startsWith("!")&&!w.startsWith("l.")&&(y+=`
`+w.trim()),A||x-o>3)break}t.push({type:"error",message:d,line:f,file:n,lineContent:g,fullMessage:y})}if(c.includes("Warning:")||c.includes("warning:")){const d=c.match(/(?:LaTeX|Package|Class)\s+(\w+)?\s*Warning:\s*(.+)/);if(d){const f=d[2],g=c.match(/on input line (\d+)/);t.push({type:"warning",message:f,line:g?parseInt(g[1]):void 0,file:n})}}if(c.includes("File")&&c.includes("not found")){const d=c.match(/File\s+['`"]([^'"]+)[''"]\s+not found/);d&&t.push({type:"error",message:`File not found: ${d[1]}`,file:n,fullMessage:"This file is required but could not be loaded. Make sure it exists in your project or is available in the TeXLive distribution."})}if(c.includes("Package")&&c.includes("not found")){const d=c.match(/Package\s+['`"]?(\w+)['`"]?\s+(?:not found|Error)/i);d&&t.push({type:"error",message:`Package not found: ${d[1]}`,fullMessage:`The package '${d[1]}' is not available. Install it via your TeXLive distribution or remove it from your document.`})}if(c.includes("Undefined control sequence")){const d=(a=e[o+1])==null?void 0:a.match(/\\([a-zA-Z]+)/);t.push({type:"error",message:`Undefined control sequence${d?`: \\${d[1]}`:""}`,line:void 0,file:n,fullMessage:"A command was used that LaTeX doesn't recognize. Check for typos or missing packages."})}}return t}function DH(i){if(i.length===0)return" No errors found";const t=i.filter(a=>a.type==="error").length,e=i.filter(a=>a.type==="warning").length;let n=` Compilation Summary:
`;return n+=`    ${t} error(s)
`,n+=`     ${e} warning(s)

`,i.forEach((a,o)=>{const c=a.type==="error"?"":a.type==="warning"?"":"";n+=`${c} ${a.type.toUpperCase()}`,a.line&&(n+=` at line ${a.line}`),a.file&&a.file!=="main.tex"&&(n+=` in ${a.file}`),n+=`
   ${a.message}
`,a.lineContent&&(n+=`   Code: ${a.lineContent}
`),o<i.length-1&&(n+=`
`)}),n}function LH({isOpen:i,onClose:t,projectId:e,projectName:n,collaborators:a,onCollaboratorAdded:o}){const[c,u]=E.useState(""),[d,f]=E.useState("EDITOR"),[g,y]=E.useState(!1),[x,w]=E.useState(null),[A,S]=E.useState(""),[C,T]=E.useState(!1),R=`${window.location.origin}/editor/${e}`,L=()=>{navigator.clipboard.writeText(R),T(!0),setTimeout(()=>T(!1),2e3)},j=async U=>{U.preventDefault(),S(""),y(!0);try{await Mn.addCollaborator(e,c,d),u(""),o==null||o()}catch(O){S(O.message||"Khng th thm cng tc vin")}finally{y(!1)}},I=async U=>{w(U);try{await Mn.removeCollaborator(e,U),o==null||o()}catch(O){S(O.message||"Khng th xa cng tc vin")}finally{w(null)}};return i?b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"bg-card border rounded-lg shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[b.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(Oh,{className:"h-5 w-5 text-primary"}),b.jsx("h2",{className:"font-semibold",children:"Chia s d n"})]}),b.jsx("button",{onClick:t,className:"p-1 hover:bg-accent rounded",children:b.jsx(jh,{className:"h-5 w-5"})})]}),b.jsxs("div",{className:"p-4 space-y-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-muted-foreground",children:"D n"}),b.jsx("p",{className:"font-medium",children:n})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Link chia s"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{type:"text",value:R,readOnly:!0,className:"flex-1 px-3 py-2 bg-muted border rounded text-sm"}),b.jsx(te,{variant:"outline",size:"sm",onClick:L,className:"gap-2",children:C?b.jsxs(b.Fragment,{children:[b.jsx(HR,{className:"h-4 w-4"})," copy"]}):b.jsxs(b.Fragment,{children:[b.jsx(z4,{className:"h-4 w-4"}),"Copy"]})})]})]}),b.jsxs("form",{onSubmit:j,className:"space-y-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Thm cng tc vin"}),b.jsx("input",{type:"email",value:c,onChange:U=>u(U.target.value),placeholder:"Email ngi dng",className:"w-full px-3 py-2 bg-background border rounded",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quyn truy cp"}),b.jsxs("select",{value:d,onChange:U=>f(U.target.value),className:"w-full px-3 py-2 bg-background border rounded",children:[b.jsx("option",{value:"VIEWER",children:"Viewer (Ch xem)"}),b.jsx("option",{value:"EDITOR",children:"Editor (Chnh sa)"})]})]}),A&&b.jsx("p",{className:"text-sm text-destructive",children:A}),b.jsxs(te,{type:"submit",disabled:g||!c,className:"w-full gap-2",children:[g?b.jsx(or,{size:"sm"}):b.jsx(MF,{className:"h-4 w-4"}),"Thm cng tc vin"]})]}),a.length>0&&b.jsxs("div",{children:[b.jsxs("h3",{className:"text-sm font-medium mb-2",children:["Cng tc vin (",a.length,")"]}),b.jsx("div",{className:"space-y-2",children:a.map(U=>b.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-medium text-sm",children:U.user.name}),b.jsx("p",{className:"text-xs text-muted-foreground",children:U.user.email})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:`text-xs px-2 py-1 rounded ${U.role==="VIEWER"?"bg-blue-500/10 text-blue-500":"bg-green-500/10 text-green-500"}`,children:U.role==="VIEWER"?"Viewer":"Editor"}),b.jsx("button",{onClick:()=>I(U.user.id),disabled:x===U.user.id,className:"p-1 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-50",title:"Xa cng tc vin",children:x===U.user.id?b.jsx(or,{size:"sm"}):b.jsx(Zy,{className:"h-4 w-4"})})]})]},U.id))})]})]})]})}):null}var Af={};Af.d=(i,t)=>{for(var e in t)Af.o(t,e)&&!Af.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};Af.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var Nt=globalThis.pdfjsLib={};Af.d(Nt,{AbortException:()=>Nc,AnnotationEditorLayer:()=>JA,AnnotationEditorParamsType:()=>Mt,AnnotationEditorType:()=>Jt,AnnotationEditorUIManager:()=>Ac,AnnotationLayer:()=>MV,AnnotationMode:()=>co,CMapCompressionType:()=>Gw,ColorPicker:()=>yv,DOMSVGFactory:()=>K_,DrawLayer:()=>s_,FeatureTest:()=>fs,GlobalWorkerOptions:()=>xa,ImageKind:()=>Ay,InvalidPDFException:()=>yM,MissingPDFException:()=>Rc,OPS:()=>yi,Outliner:()=>OA,PDFDataRangeTransport:()=>dD,PDFDateString:()=>SM,PDFWorker:()=>Pu,PasswordResponses:()=>FH,PermissionFlag:()=>PH,PixelsPerInch:()=>Io,RenderingCancelledException:()=>W_,TextLayer:()=>gv,UnexpectedResponseException:()=>ob,Util:()=>At,VerbosityLevel:()=>ib,XfaLayer:()=>pD,build:()=>hV,createValidAbsoluteUrl:()=>BH,fetchData:()=>db,getDocument:()=>nV,getFilenameFromUrl:()=>QH,getPdfFilenameFromUrl:()=>ZH,getXfaPageViewport:()=>JH,isDataScheme:()=>Q_,isPdfFile:()=>Z_,noContextMenu:()=>gs,normalizeUnicode:()=>XH,renderTextLayer:()=>X8,setLayerDimensions:()=>wc,shadow:()=>ne,updateTextLayer:()=>Y8,version:()=>uV});const Hn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),mM=[1,0,0,1,0,0],qw=[.001,0,0,.001,0,0],OH=1e7,hw=1.35,si={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},co={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},jH="pdfjs_internal_editor_",Jt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},PH={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Fn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ay={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Je={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Zd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ib={ERRORS:0,WARNINGS:1,INFOS:5},Gw={NONE:0,BINARY:1},yi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},FH={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let rb=ib.WARNINGS;function IH(i){Number.isInteger(i)&&(rb=i)}function zH(){return rb}function ab(i){rb>=ib.INFOS&&console.log(`Info: ${i}`)}function zt(i){rb>=ib.WARNINGS&&console.log(`Warning: ${i}`)}function be(i){throw new Error(i)}function an(i,t){i||be(t)}function UH(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function BH(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const a=i.match(/\./g);(a==null?void 0:a.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=$H(i)}catch{}}const n=t?new URL(i,t):new URL(i);if(UH(n))return n}catch{}return null}function ne(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Go=(function(){function t(e,n){this.constructor===t&&be("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class $w extends Go{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Xw extends Go{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class yM extends Go{constructor(t){super(t,"InvalidPDFException")}}class Rc extends Go{constructor(t){super(t,"MissingPDFException")}}class ob extends Go{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class HH extends Go{constructor(t){super(t,"FormatError")}}class Nc extends Go{constructor(t){super(t,"AbortException")}}function vM(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&be("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),c=i.subarray(a,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function lb(i){typeof i!="string"&&be("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function VH(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function X_(i){const t=Object.create(null);for(const[e,n]of i)t[e]=n;return t}function qH(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function GH(){try{return new Function(""),!0}catch{return!1}}class fs{static get isLittleEndian(){return ne(this,"isLittleEndian",qH())}static get isEvalSupported(){return ne(this,"isEvalSupported",GH())}static get isOffscreenCanvasSupported(){return ne(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ne(this,"platform",{isMac:navigator.platform.includes("Mac")}):ne(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return ne(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const dw=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Aa,_y,Yw;class At{static makeHexColor(t,e,n){return`#${dw[t]}${dw[e]}${dw[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],a=t[0]*e[1]+t[1]*e[3]+e[5];return[n,a]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],a=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,o=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[a,o]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),a=this.applyTransform(t.slice(2,4),e),o=this.applyTransform([t[0],t[3]],e),c=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],a[0],o[0],c[0]),Math.min(n[1],a[1],o[1],c[1]),Math.max(n[0],a[0],o[0],c[0]),Math.max(n[1],a[1],o[1],c[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],a=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],c=t[2]*e[1]+t[3]*e[3],u=(n+c)/2,d=Math.sqrt((n+c)**2-4*(n*c-o*a))/2,f=u+d||1,g=u-d||1;return[Math.sqrt(f),Math.sqrt(g)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[n,o,a,c]}static bezierBoundingBox(t,e,n,a,o,c,u,d,f){return f?(f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d)):f=[Math.min(t,u),Math.min(e,d),Math.max(t,u),Math.max(e,d)],M(this,Aa,Yw).call(this,t,n,o,u,e,a,c,d,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),M(this,Aa,Yw).call(this,t,n,o,u,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f),f}}Aa=new WeakSet,_y=function(t,e,n,a,o,c,u,d,f,g){if(f<=0||f>=1)return;const y=1-f,x=f*f,w=x*f,A=y*(y*(y*t+3*f*e)+3*x*n)+w*a,S=y*(y*(y*o+3*f*c)+3*x*u)+w*d;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],S)},Yw=function(t,e,n,a,o,c,u,d,f,g,y,x){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&M(this,Aa,_y).call(this,t,e,n,a,o,c,u,d,-y/g,x);return}const w=g**2-4*y*f;if(w<0)return;const A=Math.sqrt(w),S=2*f;M(this,Aa,_y).call(this,t,e,n,a,o,c,u,d,(-g+A)/S,x),M(this,Aa,_y).call(this,t,e,n,a,o,c,u,d,(-g-A)/S,x)},D(At,Aa);function $H(i){return decodeURIComponent(escape(i))}let fw=null,Mk=null;function XH(i){return fw||(fw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Mk=new Map([["","t"]])),i.replaceAll(fw,(t,e,n)=>e?e.normalize("NFKC"):Mk.get(n))}function YH(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let t=0;t<32;t++)i[t]=Math.floor(Math.random()*255);return vM(i)}const bM="pdfjs_internal_id_",Br={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class cb{constructor(){this.constructor===cb&&be("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,o){return"none"}destroy(t=!1){}}var Ff;const iS=class iS{constructor({enableHWA:t=!1}={}){D(this,Ff,!1);this.constructor===iS&&be("Cannot initialize BaseCanvasFactory."),k(this,Ff,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!p(this,Ff)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){be("Abstract method `_createCanvas` called.")}};Ff=new WeakMap;let hv=iS;class ub{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===ub&&be("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?Gw.BINARY:Gw.NONE;return this._fetchData(e,n).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){be("Abstract method `_fetchData` called.")}}class hb{constructor({baseUrl:t=null}){this.constructor===hb&&be("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){be("Abstract method `_fetchData` called.")}}class Y_{constructor(){this.constructor===Y_&&be("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){be("Abstract method `_createSVG` called.")}}const Vr="http://www.w3.org/2000/svg",yl=class yl{};Dt(yl,"CSS",96),Dt(yl,"PDF",72),Dt(yl,"PDF_TO_CSS_UNITS",yl.CSS/yl.PDF);let Io=yl;var xl,qi,Yr,us,bv,wl,bt,In,Au,_u,Sy,xM,Kw,Su,sf,rf,Ww,af;class KH extends cb{constructor({docId:e,ownerDocument:n=globalThis.document}={}){super();D(this,bt);D(this,xl);D(this,qi);D(this,Yr);D(this,us);D(this,bv);D(this,wl,0);k(this,Yr,e),k(this,us,n)}addFilter(e){if(!e)return"none";let n=p(this,bt,In).get(e);if(n)return n;const[a,o,c]=M(this,bt,Sy).call(this,e),u=e.length===1?a:`${a}${o}${c}`;if(n=p(this,bt,In).get(u),n)return p(this,bt,In).set(e,n),n;const d=`g_${p(this,Yr)}_transfer_map_${Ss(this,wl)._++}`,f=`url(#${d})`;p(this,bt,In).set(e,f),p(this,bt,In).set(u,f);const g=M(this,bt,Su).call(this,d);return M(this,bt,rf).call(this,a,o,c,g),f}addHCMFilter(e,n){var A;const a=`${e}-${n}`,o="base";let c=p(this,bt,Au).get(o);if((c==null?void 0:c.key)===a||(c?((A=c.filter)==null||A.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},p(this,bt,Au).set(o,c)),!e||!n))return c.url;const u=M(this,bt,af).call(this,e);e=At.makeHexColor(...u);const d=M(this,bt,af).call(this,n);if(n=At.makeHexColor(...d),p(this,bt,_u).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const f=new Array(256);for(let S=0;S<=255;S++){const C=S/255;f[S]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const g=f.join(","),y=`g_${p(this,Yr)}_hcm_filter`,x=c.filter=M(this,bt,Su).call(this,y);M(this,bt,rf).call(this,g,g,g,x),M(this,bt,Kw).call(this,x);const w=(S,C)=>{const T=u[S]/255,R=d[S]/255,L=new Array(C+1);for(let j=0;j<=C;j++)L[j]=T+j/C*(R-T);return L.join(",")};return M(this,bt,rf).call(this,w(0,5),w(1,5),w(2,5),x),c.url=`url(#${y})`,c.url}addAlphaFilter(e){let n=p(this,bt,In).get(e);if(n)return n;const[a]=M(this,bt,Sy).call(this,[e]),o=`alpha_${a}`;if(n=p(this,bt,In).get(o),n)return p(this,bt,In).set(e,n),n;const c=`g_${p(this,Yr)}_alpha_map_${Ss(this,wl)._++}`,u=`url(#${c})`;p(this,bt,In).set(e,u),p(this,bt,In).set(o,u);const d=M(this,bt,Su).call(this,c);return M(this,bt,Ww).call(this,a,d),u}addLuminosityFilter(e){let n=p(this,bt,In).get(e||"luminosity");if(n)return n;let a,o;if(e?([a]=M(this,bt,Sy).call(this,[e]),o=`luminosity_${a}`):o="luminosity",n=p(this,bt,In).get(o),n)return p(this,bt,In).set(e,n),n;const c=`g_${p(this,Yr)}_luminosity_map_${Ss(this,wl)._++}`,u=`url(#${c})`;p(this,bt,In).set(e,u),p(this,bt,In).set(o,u);const d=M(this,bt,Su).call(this,c);return M(this,bt,xM).call(this,d),e&&M(this,bt,Ww).call(this,a,d),u}addHighlightHCMFilter(e,n,a,o,c){var R;const u=`${n}-${a}-${o}-${c}`;let d=p(this,bt,Au).get(e);if((d==null?void 0:d.key)===u||(d?((R=d.filter)==null||R.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},p(this,bt,Au).set(e,d)),!n||!a))return d.url;const[f,g]=[n,a].map(M(this,bt,af).bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),x=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[w,A]=[o,c].map(M(this,bt,af).bind(this));x<y&&([y,x,w,A]=[x,y,A,w]),p(this,bt,_u).style.color="";const S=(L,j,I)=>{const U=new Array(256),O=(x-y)/I,H=L/255,Z=(j-L)/(255*I);let $=0;for(let W=0;W<=I;W++){const st=Math.round(y+W*O),ct=H+W*Z;for(let lt=$;lt<=st;lt++)U[lt]=ct;$=st+1}for(let W=$;W<256;W++)U[W]=U[$-1];return U.join(",")},C=`g_${p(this,Yr)}_hcm_${e}_filter`,T=d.filter=M(this,bt,Su).call(this,C);return M(this,bt,Kw).call(this,T),M(this,bt,rf).call(this,S(w[0],A[0],5),S(w[1],A[1],5),S(w[2],A[2],5),T),d.url=`url(#${C})`,d.url}destroy(e=!1){e&&p(this,bt,Au).size!==0||(p(this,qi)&&(p(this,qi).parentNode.parentNode.remove(),k(this,qi,null)),p(this,xl)&&(p(this,xl).clear(),k(this,xl,null)),k(this,wl,0))}}xl=new WeakMap,qi=new WeakMap,Yr=new WeakMap,us=new WeakMap,bv=new WeakMap,wl=new WeakMap,bt=new WeakSet,In=function(){return p(this,xl)||k(this,xl,new Map)},Au=function(){return p(this,bv)||k(this,bv,new Map)},_u=function(){if(!p(this,qi)){const e=p(this,us).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=p(this,us).createElementNS(Vr,"svg");a.setAttribute("width",0),a.setAttribute("height",0),k(this,qi,p(this,us).createElementNS(Vr,"defs")),e.append(a),a.append(p(this,qi)),p(this,us).body.append(e)}return p(this,qi)},Sy=function(e){if(e.length===1){const f=e[0],g=new Array(256);for(let x=0;x<256;x++)g[x]=f[x]/255;const y=g.join(",");return[y,y,y]}const[n,a,o]=e,c=new Array(256),u=new Array(256),d=new Array(256);for(let f=0;f<256;f++)c[f]=n[f]/255,u[f]=a[f]/255,d[f]=o[f]/255;return[c.join(","),u.join(","),d.join(",")]},xM=function(e){const n=p(this,us).createElementNS(Vr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Kw=function(e){const n=p(this,us).createElementNS(Vr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Su=function(e){const n=p(this,us).createElementNS(Vr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),p(this,bt,_u).append(n),n},sf=function(e,n,a){const o=p(this,us).createElementNS(Vr,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",a),e.append(o)},rf=function(e,n,a,o){const c=p(this,us).createElementNS(Vr,"feComponentTransfer");o.append(c),M(this,bt,sf).call(this,c,"feFuncR",e),M(this,bt,sf).call(this,c,"feFuncG",n),M(this,bt,sf).call(this,c,"feFuncB",a)},Ww=function(e,n){const a=p(this,us).createElementNS(Vr,"feComponentTransfer");n.append(a),M(this,bt,sf).call(this,a,"feFuncA",e)},af=function(e){return p(this,bt,_u).style.color=e,J_(getComputedStyle(p(this,bt,_u)).getPropertyValue("color"))};class WH extends hv{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}async function db(i,t="text"){if(of(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",i,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class wM extends ub{_fetchData(t,e){return db(t,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):lb(n),compressionType:e}))}}class AM extends hb{_fetchData(t){return db(t,"arraybuffer").then(e=>new Uint8Array(e))}}class K_ extends Y_{_createSVG(t){return document.createElementNS(Vr,t)}}class Eg{constructor({viewBox:t,scale:e,rotation:n,offsetX:a=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=a,this.offsetY=o;const u=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let f,g,y,x;switch(n%=360,n<0&&(n+=360),n){case 180:f=-1,g=0,y=0,x=1;break;case 90:f=0,g=1,y=1,x=0;break;case 270:f=0,g=-1,y=-1,x=0;break;case 0:f=1,g=0,y=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,x=-x);let w,A,S,C;f===0?(w=Math.abs(d-t[1])*e+a,A=Math.abs(u-t[0])*e+o,S=(t[3]-t[1])*e,C=(t[2]-t[0])*e):(w=Math.abs(u-t[0])*e+a,A=Math.abs(d-t[1])*e+o,S=(t[2]-t[0])*e,C=(t[3]-t[1])*e),this.transform=[f*e,g*e,y*e,x*e,w-f*e*u-y*e*d,A-g*e*u-x*e*d],this.width=S,this.height=C}get rawDims(){const{viewBox:t}=this;return ne(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new Eg({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){return At.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=At.applyTransform([t[0],t[1]],this.transform),n=At.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return At.applyInverseTransform([t,e],this.transform)}}class W_ extends Go{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Q_(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Z_(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function QH(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function ZH(i,t="document.pdf"){if(typeof i!="string")return t;if(Q_(i))return zt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=e.exec(i);let o=n.exec(a[1])||n.exec(a[2])||n.exec(a[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||t}class Dk{constructor(){Dt(this,"started",Object.create(null));Dt(this,"times",[])}time(t){t in this.started&&zt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||zt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-a}ms
`);return t.join("")}}function of(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function gs(i){i.preventDefault()}function _M(i){console.log("Deprecated API usage: "+i)}let Lk;class SM{static toDateObject(t){if(!t||typeof t!="string")return null;Lk||(Lk=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=Lk.exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,u+=y):f==="+"&&(c-=g,u-=y),new Date(Date.UTC(n,a,o,c,u,d))}}function JH(i,{scale:t=1,rotation:e=0}){const{width:n,height:a}=i.attributes.style,o=[0,0,parseInt(n),parseInt(a)];return new Eg({viewBox:o,scale:t,rotation:e})}function J_(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(zt(`Not a valid color format: "${i}"`),[0,0,0])}function t8(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,J_(n))}t.remove()}function Pe(i){const{a:t,b:e,c:n,d:a,e:o,f:c}=i.getTransform();return[t,e,n,a,o,c]}function Hr(i){const{a:t,b:e,c:n,d:a,e:o,f:c}=i.getTransform().invertSelf();return[t,e,n,a,o,c]}function wc(i,t,e=!1,n=!0){if(t instanceof Eg){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:c}=i,u=fs.isCSSRoundSupported,d=`var(--scale-factor) * ${a}px`,f=`var(--scale-factor) * ${o}px`,g=u?`round(${d}, 1px)`:`calc(${d})`,y=u?`round(${f}, 1px)`:`calc(${f})`;!e||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}n&&i.setAttribute("data-main-rotation",t.rotation)}var Al,_l,Rs,Sl,xv,EM,Jn,CM,TM,Ey,kM,Zw;const wv=class wv{constructor(t){D(this,Jn);D(this,Al,null);D(this,_l,null);D(this,Rs);D(this,Sl,null);k(this,Rs,t)}render(){const t=k(this,Al,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=p(this,Rs)._uiManager._signal;t.addEventListener("contextmenu",gs,{signal:e}),t.addEventListener("pointerdown",M(wv,xv,EM),{signal:e});const n=k(this,Sl,document.createElement("div"));n.className="buttons",t.append(n);const a=p(this,Rs).toolbarPosition;if(a){const{style:o}=t,c=p(this,Rs)._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return M(this,Jn,kM).call(this),t}hide(){var t;p(this,Al).classList.add("hidden"),(t=p(this,_l))==null||t.hideDropdown()}show(){p(this,Al).classList.remove("hidden")}addAltTextButton(t){M(this,Jn,Ey).call(this,t),p(this,Sl).prepend(t,p(this,Jn,Zw))}addColorPicker(t){k(this,_l,t);const e=t.renderButton();M(this,Jn,Ey).call(this,e),p(this,Sl).prepend(e,p(this,Jn,Zw))}remove(){var t;p(this,Al).remove(),(t=p(this,_l))==null||t.destroy(),k(this,_l,null)}};Al=new WeakMap,_l=new WeakMap,Rs=new WeakMap,Sl=new WeakMap,xv=new WeakSet,EM=function(t){t.stopPropagation()},Jn=new WeakSet,CM=function(t){p(this,Rs)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},TM=function(t){p(this,Rs)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},Ey=function(t){const e=p(this,Rs)._uiManager._signal;t.addEventListener("focusin",M(this,Jn,CM).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",M(this,Jn,TM).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",gs,{signal:e})},kM=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${p(this,Rs).editorType}-button`),M(this,Jn,Ey).call(this,t),t.addEventListener("click",e=>{p(this,Rs)._uiManager.delete()},{signal:p(this,Rs)._uiManager._signal}),p(this,Sl).append(t)},Zw=function(){const t=document.createElement("div");return t.className="divider",t},D(wv,xv);let Qw=wv;var If,El,Cl,zo,RM,NM,MM;class e8{constructor(t){D(this,zo);D(this,If,null);D(this,El,null);D(this,Cl);k(this,Cl,t)}show(t,e,n){const[a,o]=M(this,zo,NM).call(this,e,n),{style:c}=p(this,El)||k(this,El,M(this,zo,RM).call(this));t.append(p(this,El)),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){p(this,El).remove()}}If=new WeakMap,El=new WeakMap,Cl=new WeakMap,zo=new WeakSet,RM=function(){const t=k(this,El,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",gs,{signal:p(this,Cl)._signal});const e=k(this,If,document.createElement("div"));return e.className="buttons",t.append(e),M(this,zo,MM).call(this),t},NM=function(t,e){let n=0,a=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const u=o.x+(e?o.width:0);if(c>n){a=u,n=c;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,n]},MM=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=p(this,Cl)._signal;t.addEventListener("contextmenu",gs,{signal:n}),t.addEventListener("click",()=>{p(this,Cl).highlightSelection("floating_button")},{signal:n}),p(this,If).append(t)};function dv(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}function n8(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var Av;class s8{constructor(){D(this,Av,0)}get id(){return`${jH}${Ss(this,Av)._++}`}}Av=new WeakMap;var zf,_v,Js,Uf,tA;const rS=class rS{constructor(){D(this,Uf);D(this,zf,YH());D(this,_v,0);D(this,Js,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ne(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:o}=t;return M(this,Uf,tA).call(this,`${e}_${n}_${a}_${o}`,t)}async getFromUrl(t){return M(this,Uf,tA).call(this,t,t)}async getFromId(t){p(this,Js)||k(this,Js,new Map);const e=p(this,Js).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=p(this,Js).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){p(this,Js)||k(this,Js,new Map);const e=p(this,Js).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${p(this,zf)}_`)}};zf=new WeakMap,_v=new WeakMap,Js=new WeakMap,Uf=new WeakSet,tA=async function(t,e){p(this,Js)||k(this,Js,new Map);let n=p(this,Js).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${p(this,zf)}_${Ss(this,_v)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await db(e,"blob")):a=n.file=e,a.type==="image/svg+xml"){const o=rS._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},c.onload=async()=>{const y=n.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=g});c.readAsDataURL(a),await d}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){console.error(a),n=null}return p(this,Js).set(t,n),n&&p(this,Js).set(n.id,n),n};let Jw=rS;var fn,uo,Bf,pn;class i8{constructor(t=128){D(this,fn,[]);D(this,uo,!1);D(this,Bf);D(this,pn,-1);k(this,Bf,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&t(),p(this,uo))return;const d={cmd:t,undo:e,post:n,type:o};if(p(this,pn)===-1){p(this,fn).length>0&&(p(this,fn).length=0),k(this,pn,0),p(this,fn).push(d);return}if(c&&p(this,fn)[p(this,pn)].type===o){u&&(d.undo=p(this,fn)[p(this,pn)].undo),p(this,fn)[p(this,pn)]=d;return}const f=p(this,pn)+1;f===p(this,Bf)?p(this,fn).splice(0,1):(k(this,pn,f),f<p(this,fn).length&&p(this,fn).splice(f)),p(this,fn).push(d)}undo(){if(p(this,pn)===-1)return;k(this,uo,!0);const{undo:t,post:e}=p(this,fn)[p(this,pn)];t(),e==null||e(),k(this,uo,!1),k(this,pn,p(this,pn)-1)}redo(){if(p(this,pn)<p(this,fn).length-1){k(this,pn,p(this,pn)+1),k(this,uo,!0);const{cmd:t,post:e}=p(this,fn)[p(this,pn)];t(),e==null||e(),k(this,uo,!1)}}hasSomethingToUndo(){return p(this,pn)!==-1}hasSomethingToRedo(){return p(this,pn)<p(this,fn).length-1}destroy(){k(this,fn,null)}}fn=new WeakMap,uo=new WeakMap,Bf=new WeakMap,pn=new WeakMap;var Sv,DM;class Cg{constructor(t){D(this,Sv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=fs.platform;for(const[n,a,o={}]of t)for(const c of n){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(M(this,Sv,DM).call(this,e));if(!n)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:u=null}}=n;u&&!u(t,e)||(a.bind(t,...c,e)(),o||(e.stopPropagation(),e.preventDefault()))}}Sv=new WeakSet,DM=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Ev=class Ev{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return t8(t),ne(this,"_colors",t)}convert(t){const e=J_(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((o,c)=>o===e[c]))return Ev._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?At.makeHexColor(...e):t}};Dt(Ev,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let eA=Ev;var zu,Ns,tn,En,Uu,Kr,Bu,vi,Hu,Tl,Gi,bi,kl,Hf,Vf,$i,Vu,ho,Xi,Cv,fo,qf,Rl,Gf,qu,Cn,fe,Wr,Nl,$f,Xf,Yf,Kf,Wf,Qf,Zf,Jf,tp,ep,np,sp,ip,po,Yi,Qr,rp,dt,Cy,LM,OM,Ty,jM,PM,FM,nA,IM,sA,iA,zM,Kn,ro,UM,BM,rA,HM,lf,aA;const Ru=class Ru{constructor(t,e,n,a,o,c,u,d,f){D(this,dt);D(this,zu,new AbortController);D(this,Ns,null);D(this,tn,new Map);D(this,En,new Map);D(this,Uu,null);D(this,Kr,null);D(this,Bu,null);D(this,vi,new i8);D(this,Hu,0);D(this,Tl,new Set);D(this,Gi,null);D(this,bi,null);D(this,kl,new Set);D(this,Hf,!1);D(this,Vf,null);D(this,$i,null);D(this,Vu,null);D(this,ho,!1);D(this,Xi,null);D(this,Cv,new s8);D(this,fo,!1);D(this,qf,!1);D(this,Rl,null);D(this,Gf,null);D(this,qu,null);D(this,Cn,Jt.NONE);D(this,fe,new Set);D(this,Wr,null);D(this,Nl,null);D(this,$f,null);D(this,Xf,this.blur.bind(this));D(this,Yf,this.focus.bind(this));D(this,Kf,this.copy.bind(this));D(this,Wf,this.cut.bind(this));D(this,Qf,this.paste.bind(this));D(this,Zf,this.keydown.bind(this));D(this,Jf,this.keyup.bind(this));D(this,tp,this.onEditingAction.bind(this));D(this,ep,this.onPageChanging.bind(this));D(this,np,this.onScaleChanging.bind(this));D(this,sp,this.onRotationChanging.bind(this));D(this,ip,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});D(this,po,[0,0]);D(this,Yi,null);D(this,Qr,null);D(this,rp,null);this._signal=p(this,zu).signal,k(this,Qr,t),k(this,rp,e),k(this,Uu,n),this._eventBus=a,this._eventBus._on("editingaction",p(this,tp)),this._eventBus._on("pagechanging",p(this,ep)),this._eventBus._on("scalechanging",p(this,np)),this._eventBus._on("rotationchanging",p(this,sp)),M(this,dt,jM).call(this),M(this,dt,zM).call(this),M(this,dt,nA).call(this),k(this,Kr,o.annotationStorage),k(this,Vf,o.filterFactory),k(this,Nl,c),k(this,Vu,u||null),k(this,Hf,d),k(this,qu,f||null),this.viewParameters={realScale:Io.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=Ru.prototype,e=c=>p(c,Qr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return ne(this,"_keyboardManager",new Cg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&p(c,Qr).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&p(c,Qr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n;(t=p(this,zu))==null||t.abort(),k(this,zu,null),this._signal=null,this._eventBus._off("editingaction",p(this,tp)),this._eventBus._off("pagechanging",p(this,ep)),this._eventBus._off("scalechanging",p(this,np)),this._eventBus._off("rotationchanging",p(this,sp));for(const a of p(this,En).values())a.destroy();p(this,En).clear(),p(this,tn).clear(),p(this,kl).clear(),k(this,Ns,null),p(this,fe).clear(),p(this,vi).destroy(),(e=p(this,Uu))==null||e.destroy(),(n=p(this,Xi))==null||n.hide(),k(this,Xi,null),p(this,$i)&&(clearTimeout(p(this,$i)),k(this,$i,null)),p(this,Yi)&&(clearTimeout(p(this,Yi)),k(this,Yi,null))}async mlGuess(t){var e;return((e=p(this,qu))==null?void 0:e.guess(t))||null}get hasMLManager(){return!!p(this,qu)}get hcmFilter(){return ne(this,"hcmFilter",p(this,Nl)?p(this,Vf).addHCMFilter(p(this,Nl).foreground,p(this,Nl).background):"none")}get direction(){return ne(this,"direction",getComputedStyle(p(this,Qr)).direction)}get highlightColors(){return ne(this,"highlightColors",p(this,Vu)?new Map(p(this,Vu).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return ne(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){k(this,Gf,t)}editAltText(t){var e;(e=p(this,Uu))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){k(this,Hu,t-1)}focusMainContainer(){p(this,Qr).focus()}findParent(t,e){for(const n of p(this,En).values()){const{x:a,y:o,width:c,height:u}=n.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){p(this,rp).classList.toggle("noUserSelect",t)}addShouldRescale(t){p(this,kl).add(t)}removeShouldRescale(t){p(this,kl).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Io.PDF_TO_CSS_UNITS;for(const e of p(this,kl))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c}=e,u=e.toString(),f=M(this,dt,Cy).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(f);if(g){e.empty(),p(this,Cn)===Jt.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Jt.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const y of p(this,En).values())if(y.hasTextLayer(f)){y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:c,text:u});break}}}addToAnnotationStorage(t){!t.isEmpty()&&p(this,Kr)&&!p(this,Kr).has(t.id)&&p(this,Kr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,p(this,ho)&&(k(this,ho,!1),M(this,dt,Ty).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of p(this,fe))if(e.div.contains(t)){k(this,Rl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!p(this,Rl))return;const[t,e]=p(this,Rl);k(this,Rl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){M(this,dt,nA).call(this),M(this,dt,sA).call(this)}removeEditListeners(){M(this,dt,IM).call(this),M(this,dt,iA).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of p(this,bi))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of p(this,bi))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=p(this,Ns))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of p(this,fe)){const o=a.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of p(this,bi))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){zt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of n){const f=a.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)M(this,dt,rA).call(this,d);M(this,dt,aA).call(this,o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){zt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),p(this,Cn)!==Jt.NONE&&!this.isEditorHandlingKeyboard&&Ru._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,p(this,ho)&&(k(this,ho,!1),M(this,dt,Ty).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(M(this,dt,PM).call(this),M(this,dt,sA).call(this),M(this,dt,Kn).call(this,{isEditing:p(this,Cn)!==Jt.NONE,isEmpty:M(this,dt,lf).call(this),hasSomethingToUndo:p(this,vi).hasSomethingToUndo(),hasSomethingToRedo:p(this,vi).hasSomethingToRedo(),hasSelectedEditor:!1})):(M(this,dt,FM).call(this),M(this,dt,iA).call(this),M(this,dt,Kn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!p(this,bi)){k(this,bi,t);for(const e of p(this,bi))M(this,dt,ro).call(this,e.defaultPropertiesToUpdate)}}getId(){return p(this,Cv).id}get currentLayer(){return p(this,En).get(p(this,Hu))}getLayer(t){return p(this,En).get(t)}get currentPageIndex(){return p(this,Hu)}addLayer(t){p(this,En).set(t.pageIndex,t),p(this,fo)?t.enable():t.disable()}removeLayer(t){p(this,En).delete(t.pageIndex)}updateMode(t,e=null,n=!1){if(p(this,Cn)!==t){if(k(this,Cn,t),t===Jt.NONE){this.setEditingState(!1),M(this,dt,BM).call(this);return}this.setEditingState(!0),M(this,dt,UM).call(this),this.unselectAll();for(const a of p(this,En).values())a.updateMode(t);if(!e&&n){this.addNewEditorFromKeyboard();return}if(e){for(const a of p(this,tn).values())if(a.annotationElementId===e){this.setSelected(a),a.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==p(this,Cn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(p(this,bi)){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor();return;case Mt.HIGHLIGHT_DEFAULT_COLOR:(n=p(this,Gf))==null||n.updateColor(e);break;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(p(this,$f)||k(this,$f,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const a of p(this,fe))a.updateParams(t,e);for(const a of p(this,bi))a.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const c of p(this,tn).values())c.editorType===t&&c.show(e);(((o=p(this,$f))==null?void 0:o.get(Mt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&M(this,dt,ro).call(this,[[Mt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(p(this,qf)!==t){k(this,qf,t);for(const e of p(this,En).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of p(this,tn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return p(this,tn).get(t)}addEditor(t){p(this,tn).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(p(this,$i)&&clearTimeout(p(this,$i)),k(this,$i,setTimeout(()=>{this.focusMainContainer(),k(this,$i,null)},0))),p(this,tn).delete(t.id),this.unselect(t),(!t.annotationElementId||!p(this,Tl).has(t.annotationElementId))&&((e=p(this,Kr))==null||e.remove(t.id))}addDeletedAnnotationElement(t){p(this,Tl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return p(this,Tl).has(t)}removeDeletedAnnotationElement(t){p(this,Tl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){p(this,Ns)!==t&&(k(this,Ns,t),t&&M(this,dt,ro).call(this,t.propertiesToUpdate))}updateUI(t){p(this,dt,HM)===t&&M(this,dt,ro).call(this,t.propertiesToUpdate)}toggleSelected(t){if(p(this,fe).has(t)){p(this,fe).delete(t),t.unselect(),M(this,dt,Kn).call(this,{hasSelectedEditor:this.hasSelection});return}p(this,fe).add(t),t.select(),M(this,dt,ro).call(this,t.propertiesToUpdate),M(this,dt,Kn).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of p(this,fe))e!==t&&e.unselect();p(this,fe).clear(),p(this,fe).add(t),t.select(),M(this,dt,ro).call(this,t.propertiesToUpdate),M(this,dt,Kn).call(this,{hasSelectedEditor:!0})}isSelected(t){return p(this,fe).has(t)}get firstSelectedEditor(){return p(this,fe).values().next().value}unselect(t){t.unselect(),p(this,fe).delete(t),M(this,dt,Kn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return p(this,fe).size!==0}get isEnterHandled(){return p(this,fe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){p(this,vi).undo(),M(this,dt,Kn).call(this,{hasSomethingToUndo:p(this,vi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:M(this,dt,lf).call(this)})}redo(){p(this,vi).redo(),M(this,dt,Kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:p(this,vi).hasSomethingToRedo(),isEmpty:M(this,dt,lf).call(this)})}addCommands(t){p(this,vi).add(t),M(this,dt,Kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:M(this,dt,lf).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...p(this,fe)],e=()=>{for(const a of t)a.remove()},n=()=>{for(const a of t)M(this,dt,rA).call(this,a)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=p(this,Ns))==null||t.commitOrRemove()}hasSomethingToControl(){return p(this,Ns)||this.hasSelection}selectAll(){for(const t of p(this,fe))t.commit();M(this,dt,aA).call(this,p(this,tn).values())}unselectAll(){if(!(p(this,Ns)&&(p(this,Ns).commitOrRemove(),p(this,Cn)!==Jt.NONE))&&this.hasSelection){for(const t of p(this,fe))t.unselect();p(this,fe).clear(),M(this,dt,Kn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;p(this,po)[0]+=t,p(this,po)[1]+=e;const[a,o]=p(this,po),c=[...p(this,fe)],u=1e3;p(this,Yi)&&clearTimeout(p(this,Yi)),k(this,Yi,setTimeout(()=>{k(this,Yi,null),p(this,po)[0]=p(this,po)[1]=0,this.addCommands({cmd:()=>{for(const d of c)p(this,tn).has(d.id)&&d.translateInPage(a,o)},undo:()=>{for(const d of c)p(this,tn).has(d.id)&&d.translateInPage(-a,-o)},mustExec:!1})},u));for(const d of c)d.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(this,Gi,new Map);for(const t of p(this,fe))p(this,Gi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!p(this,Gi))return!1;this.disableUserSelect(!1);const t=p(this,Gi);k(this,Gi,null);let e=!1;for(const[{x:a,y:o,pageIndex:c},u]of t)u.newX=a,u.newY=o,u.newPageIndex=c,e||(e=a!==u.savedX||o!==u.savedY||c!==u.savedPageIndex);if(!e)return!1;const n=(a,o,c,u)=>{if(p(this,tn).has(a.id)){const d=p(this,En).get(u);d?a._setParentAndPosition(d,o,c):(a.pageIndex=u,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:u}]of t)n(a,o,c,u)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:u}]of t)n(a,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(p(this,Gi))for(const n of p(this,Gi).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||p(this,fe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return p(this,Ns)===t}getActive(){return p(this,Ns)}getMode(){return p(this,Cn)}get imageManager(){return ne(this,"imageManager",new Jw)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:a,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,x)=>({x:(g-a)/c,y:1-(f+y-n)/o,width:x/c,height:y/o});break;case"180":u=(f,g,y,x)=>({x:1-(f+y-n)/o,y:1-(g+x-a)/c,width:y/o,height:x/c});break;case"270":u=(f,g,y,x)=>({x:1-(g+x-a)/c,y:(f-n)/o,width:x/c,height:y/o});break;default:u=(f,g,y,x)=>({x:(f-n)/o,y:(g-a)/c,width:y/o,height:x/c});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x,y:w,width:A,height:S}of y.getClientRects())A===0||S===0||d.push(u(x,w,A,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(p(this,Bu)||k(this,Bu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=p(this,Bu))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=p(this,Bu))==null?void 0:a.get(t.data.id);if(!e)return;const n=p(this,Kr).getRawValue(e);n&&(p(this,Cn)===Jt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};zu=new WeakMap,Ns=new WeakMap,tn=new WeakMap,En=new WeakMap,Uu=new WeakMap,Kr=new WeakMap,Bu=new WeakMap,vi=new WeakMap,Hu=new WeakMap,Tl=new WeakMap,Gi=new WeakMap,bi=new WeakMap,kl=new WeakMap,Hf=new WeakMap,Vf=new WeakMap,$i=new WeakMap,Vu=new WeakMap,ho=new WeakMap,Xi=new WeakMap,Cv=new WeakMap,fo=new WeakMap,qf=new WeakMap,Rl=new WeakMap,Gf=new WeakMap,qu=new WeakMap,Cn=new WeakMap,fe=new WeakMap,Wr=new WeakMap,Nl=new WeakMap,$f=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Wf=new WeakMap,Qf=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,tp=new WeakMap,ep=new WeakMap,np=new WeakMap,sp=new WeakMap,ip=new WeakMap,po=new WeakMap,Yi=new WeakMap,Qr=new WeakMap,rp=new WeakMap,dt=new WeakSet,Cy=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},LM=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=M(this,dt,Cy).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(p(this,Xi)||k(this,Xi,new e8(this)),p(this,Xi).show(n,a,this.direction==="ltr"))},OM=function(){var o,c,u;const t=document.getSelection();if(!t||t.isCollapsed){p(this,Wr)&&((o=p(this,Xi))==null||o.hide(),k(this,Wr,null),M(this,dt,Kn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===p(this,Wr))return;if(!M(this,dt,Cy).call(this,t).closest(".textLayer")){p(this,Wr)&&((c=p(this,Xi))==null||c.hide(),k(this,Wr,null),M(this,dt,Kn).call(this,{hasSelectedText:!1}));return}if((u=p(this,Xi))==null||u.hide(),k(this,Wr,e),M(this,dt,Kn).call(this,{hasSelectedText:!0}),!(p(this,Cn)!==Jt.HIGHLIGHT&&p(this,Cn)!==Jt.NONE)&&(p(this,Cn)===Jt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(this,ho,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=this._signal,f=g=>{g.type==="pointerup"&&g.button!==0||(window.removeEventListener("pointerup",f),window.removeEventListener("blur",f),g.type==="pointerup"&&M(this,dt,Ty).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("blur",f,{signal:d})}},Ty=function(t=""){p(this,Cn)===Jt.HIGHLIGHT?this.highlightSelection(t):p(this,Hf)&&M(this,dt,LM).call(this)},jM=function(){document.addEventListener("selectionchange",M(this,dt,OM).bind(this),{signal:this._signal})},PM=function(){const t=this._signal;window.addEventListener("focus",p(this,Yf),{signal:t}),window.addEventListener("blur",p(this,Xf),{signal:t})},FM=function(){window.removeEventListener("focus",p(this,Yf)),window.removeEventListener("blur",p(this,Xf))},nA=function(){const t=this._signal;window.addEventListener("keydown",p(this,Zf),{signal:t}),window.addEventListener("keyup",p(this,Jf),{signal:t})},IM=function(){window.removeEventListener("keydown",p(this,Zf)),window.removeEventListener("keyup",p(this,Jf))},sA=function(){const t=this._signal;document.addEventListener("copy",p(this,Kf),{signal:t}),document.addEventListener("cut",p(this,Wf),{signal:t}),document.addEventListener("paste",p(this,Qf),{signal:t})},iA=function(){document.removeEventListener("copy",p(this,Kf)),document.removeEventListener("cut",p(this,Wf)),document.removeEventListener("paste",p(this,Qf))},zM=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Kn=function(t){Object.entries(t).some(([n,a])=>p(this,ip)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(p(this,ip),t)}),p(this,Cn)===Jt.HIGHLIGHT&&t.hasSelectedEditor===!1&&M(this,dt,ro).call(this,[[Mt.HIGHLIGHT_FREE,!0]]))},ro=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},UM=function(){if(!p(this,fo)){k(this,fo,!0);for(const t of p(this,En).values())t.enable();for(const t of p(this,tn).values())t.enable()}},BM=function(){if(this.unselectAll(),p(this,fo)){k(this,fo,!1);for(const t of p(this,En).values())t.disable();for(const t of p(this,tn).values())t.disable()}},rA=function(t){const e=p(this,En).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},HM=function(){let t=null;for(t of p(this,fe));return t},lf=function(){if(p(this,tn).size===0)return!0;if(p(this,tn).size===1)for(const t of p(this,tn).values())return t.isEmpty();return!1},aA=function(t){for(const e of p(this,fe))e.unselect();p(this,fe).clear();for(const e of t)e.isEmpty()||(p(this,fe).add(e),e.select());M(this,dt,Kn).call(this,{hasSelectedEditor:this.hasSelection})},Dt(Ru,"TRANSLATE_SMALL",1),Dt(Ru,"TRANSLATE_BIG",10);let Ac=Ru;var Zr,Jr,xi,ta,Ms,Gu,wi,ap,oA;const qr=class qr{constructor(t){D(this,ap);D(this,Zr,"");D(this,Jr,!1);D(this,xi,null);D(this,ta,null);D(this,Ms,null);D(this,Gu,!1);D(this,wi,null);k(this,wi,t)}static initialize(t){qr._l10nPromise||(qr._l10nPromise=t)}async render(){const t=k(this,xi,document.createElement("button"));t.className="altText";const e=await qr._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const n=p(this,wi)._uiManager._signal;t.addEventListener("contextmenu",gs,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),p(this,wi)._uiManager.editAltText(p(this,wi))};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(k(this,Gu,!0),a(o))},{signal:n}),await M(this,ap,oA).call(this),t}finish(){p(this,xi)&&(p(this,xi).focus({focusVisible:p(this,Gu)}),k(this,Gu,!1))}isEmpty(){return!p(this,Zr)&&!p(this,Jr)}get data(){return{altText:p(this,Zr),decorative:p(this,Jr)}}set data({altText:t,decorative:e}){p(this,Zr)===t&&p(this,Jr)===e||(k(this,Zr,t),k(this,Jr,e),M(this,ap,oA).call(this))}toggle(t=!1){p(this,xi)&&(!t&&p(this,Ms)&&(clearTimeout(p(this,Ms)),k(this,Ms,null)),p(this,xi).disabled=!t)}destroy(){var t;(t=p(this,xi))==null||t.remove(),k(this,xi,null),k(this,ta,null)}};Zr=new WeakMap,Jr=new WeakMap,xi=new WeakMap,ta=new WeakMap,Ms=new WeakMap,Gu=new WeakMap,wi=new WeakMap,ap=new WeakSet,oA=async function(){var a;const t=p(this,xi);if(!t)return;if(!p(this,Zr)&&!p(this,Jr)){t.classList.remove("done"),(a=p(this,ta))==null||a.remove();return}t.classList.add("done"),qr._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(o=>{t.setAttribute("aria-label",o)});let e=p(this,ta);if(!e){k(this,ta,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const o=e.id=`alt-text-tooltip-${p(this,wi).id}`;t.setAttribute("aria-describedby",o);const c=100,u=p(this,wi)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(p(this,Ms)),k(this,Ms,null)},{once:!0}),t.addEventListener("mouseenter",()=>{k(this,Ms,setTimeout(()=>{k(this,Ms,null),p(this,ta).classList.add("show"),p(this,wi)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:u}),t.addEventListener("mouseleave",()=>{var d;p(this,Ms)&&(clearTimeout(p(this,Ms)),k(this,Ms,null)),(d=p(this,ta))==null||d.classList.remove("show")},{signal:u})}e.innerText=p(this,Jr)?await qr._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):p(this,Zr),e.parentNode||t.append(e);const n=p(this,wi).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},Dt(qr,"_l10nPromise",null);let fv=qr;var Ml,Ai,zn,$u,Dl,Tn,Ll,Xu,Yu,Un,op,Ol,go,lp,jl,ea,Ki,Ku,Wu,ti,cp,Tv,Vt,lA,up,cA,uA,VM,qM,hA,dA,fA,GM,$M,XM,YM,pA,cf;const Ae=class Ae{constructor(t){D(this,Vt);D(this,Ml,null);D(this,Ai,null);D(this,zn,null);D(this,$u,!1);D(this,Dl,!1);D(this,Tn,null);D(this,Ll,null);D(this,Xu,this.focusin.bind(this));D(this,Yu,this.focusout.bind(this));D(this,Un,null);D(this,op,"");D(this,Ol,!1);D(this,go,null);D(this,lp,!1);D(this,jl,!1);D(this,ea,!1);D(this,Ki,null);D(this,Ku,0);D(this,Wu,0);D(this,ti,null);Dt(this,"_initialOptions",Object.create(null));Dt(this,"_isVisible",!0);Dt(this,"_uiManager",null);Dt(this,"_focusEventsAllowed",!0);Dt(this,"_l10nPromise",null);D(this,cp,!1);D(this,Tv,Ae._zIndex++);this.constructor===Ae&&be("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ae.prototype._resizeWithKeyboard,e=Ac.TRANSLATE_SMALL,n=Ac.TRANSLATE_BIG;return ne(this,"_resizerKeyboardManager",new Cg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Ae.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ne(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new r8({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,n){if(Ae._l10nPromise||(Ae._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(o=>[o,t.get(o.replaceAll(/([A-Z])/g,c=>`-${c.toLowerCase()}`))]))),n!=null&&n.strings)for(const o of n.strings)Ae._l10nPromise.set(o,t.get(o));if(Ae._borderLineWidth!==-1)return;const a=getComputedStyle(document.documentElement);Ae._borderLineWidth=parseFloat(a.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){be("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return p(this,cp)}set _isDraggable(t){var e;k(this,cp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=p(this,Tv)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):M(this,Vt,cf).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(p(this,Ol)?k(this,Ol,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[o,c]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/o,this.y=(e+a)/c,this.fixAndSetPosition()}translate(t,e){M(this,Vt,lA).call(this,this.parentDimensions,t,e)}translateInPage(t,e){p(this,go)||k(this,go,[this.x,this.y]),M(this,Vt,lA).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){p(this,go)||k(this,go,[this.x,this.y]);const[n,a]=this.parentDimensions;if(this.x+=t/n,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,d]=this.getBaseTranslation();o+=u,c+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!p(this,go)&&(p(this,go)[0]!==this.x||p(this,go)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Ae,a=n/t,o=n/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:a,y:o,width:c,height:u}=this;if(c*=e,u*=n,a*=e,o*=n,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(e-c,a)),o=Math.max(0,Math.min(n-u,o));break;case 90:a=Math.max(0,Math.min(e-u,a)),o=Math.min(n,Math.max(c,o));break;case 180:a=Math.min(e,Math.max(c,a)),o=Math.min(n,Math.max(u,o));break;case 270:a=Math.min(e,Math.max(u,a)),o=Math.max(0,Math.min(n-c,o));break}this.x=a/=e,this.y=o/=n;const[d,f]=this.getBaseTranslation();a+=d,o+=f;const{style:g}=this.div;g.left=`${(100*a).toFixed(2)}%`,g.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return M(n=Ae,up,cA).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return M(n=Ae,up,cA).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this,a=e*t,o=n*t;return fs.isCSSRoundSupported?[Math.round(a),Math.round(o)]:[a,o]}setDims(t,e){const[n,a]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,p(this,Dl)||(this.div.style.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,a=n.endsWith("%"),o=!p(this,Dl)&&e.endsWith("%");if(a&&o)return;const[c,u]=this.parentDimensions;a||(t.width=`${(100*parseFloat(n)/c).toFixed(2)}%`),!p(this,Dl)&&!o&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=p(this,zn))==null||t.finish()}async addEditToolbar(){return p(this,Un)||p(this,jl)?p(this,Un):(k(this,Un,new Qw(this)),this.div.append(p(this,Un).render()),p(this,zn)&&p(this,Un).addAltTextButton(await p(this,zn).render()),p(this,Un))}removeEditToolbar(){var t;p(this,Un)&&(p(this,Un).remove(),k(this,Un,null),(t=p(this,zn))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){p(this,zn)||(fv.initialize(Ae._l10nPromise),k(this,zn,new fv(this)),p(this,Ml)&&(p(this,zn).data=p(this,Ml),k(this,Ml,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=p(this,zn))==null?void 0:t.data}set altTextData(t){p(this,zn)&&(p(this,zn).data=t)}hasAltText(){var t;return!((t=p(this,zn))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=p(this,$u)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",p(this,Xu),{signal:t}),this.div.addEventListener("focusout",p(this,Yu),{signal:t});const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),dv(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=fs.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(k(this,Ol,!0),this._isDraggable){M(this,Vt,GM).call(this,t);return}M(this,Vt,fA).call(this,t)}moveInDOM(){p(this,Ki)&&clearTimeout(p(this,Ki)),k(this,Ki,setTimeout(()=>{var t;k(this,Ki,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,g=e/a,y=this.x*o,x=this.y*c,w=this.width*o,A=this.height*c;switch(n){case 0:return[y+f+u,c-x-g-A+d,y+f+w+u,c-x-g+d];case 90:return[y+g+u,c-x+f+d,y+g+A+u,c-x+f+w+d];case 180:return[y-f-w+u,c-x+g+d,y-f+u,c-x+g+A+d];case 270:return[y-g-A+u,c-x-f-w+d,y-g+u,c-x-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,o,c]=t,u=o-n,d=c-a;switch(this.rotation){case 0:return[n,e-c,u,d];case 90:return[n,e-a,d,u];case 180:return[o,e-a,u,d];case 270:return[o,e-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){k(this,jl,!0)}disableEditMode(){k(this,jl,!1)}isInEditMode(){return p(this,jl)}shouldGetKeyboardEvents(){return p(this,ea)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,n;const t=this._uiManager._signal;(e=this.div)==null||e.addEventListener("focusin",p(this,Xu),{signal:t}),(n=this.div)==null||n.addEventListener("focusout",p(this,Yu),{signal:t})}rotate(t){}serialize(t=!1,e=null){be("An editor must be serializable")}static deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});a.rotation=t.rotation,k(a,Ml,t.accessibilityData);const[o,c]=a.pageDimensions,[u,d,f,g]=a.getRectInCurrentCoords(t.rect,c);return a.x=u/o,a.y=d/c,a.width=f/o,a.height=g/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",p(this,Xu)),this.div.removeEventListener("focusout",p(this,Yu)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),p(this,Ki)&&(clearTimeout(p(this,Ki)),k(this,Ki,null)),M(this,Vt,cf).call(this),this.removeEditToolbar(),p(this,ti)){for(const t of p(this,ti).values())clearTimeout(t);k(this,ti,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(M(this,Vt,VM).call(this),p(this,Tn).classList.remove("hidden"),dv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),k(this,Ll,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=p(this,Tn).children;if(!p(this,Ai)){k(this,Ai,Array.from(e));const c=M(this,Vt,$M).bind(this),u=M(this,Vt,XM).bind(this),d=this._uiManager._signal;for(const f of p(this,Ai)){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",M(this,Vt,YM).bind(this,g),{signal:d}),Ae._l10nPromise.get(`pdfjs-editor-resizer-label-${g}`).then(y=>f.setAttribute("aria-label",y))}}const n=p(this,Ai)[0];let a=0;for(const c of e){if(c===n)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(p(this,Ai).length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)p(this,Tn).append(p(this,Tn).firstChild);else if(o>a)for(let u=0;u<o-a;u++)p(this,Tn).firstChild.before(p(this,Tn).lastChild);let c=0;for(const u of e){const f=p(this,Ai)[c++].getAttribute("data-resizer-name");Ae._l10nPromise.get(`pdfjs-editor-resizer-label-${f}`).then(g=>u.setAttribute("aria-label",g))}}M(this,Vt,pA).call(this,0),k(this,ea,!0),p(this,Tn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){p(this,ea)&&M(this,Vt,dA).call(this,p(this,op),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){M(this,Vt,cf).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!p(this,Un)){this.addEditToolbar().then(()=>{var n,a;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((a=p(this,Un))==null||a.show())});return}(e=p(this,Un))==null||e.show()}unselect(){var t,e,n,a;(t=p(this,Tn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=p(this,Un))==null||a.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return p(this,lp)}set isEditing(t){k(this,lp,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){k(this,Dl,!0);const n=t/e,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){p(this,ti)||k(this,ti,new Map);const{action:n}=t;let a=p(this,ti).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),p(this,ti).delete(n),p(this,ti).size===0&&k(this,ti,null)},Ae._telemetryTimeout),p(this,ti).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),k(this,$u,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(this,$u,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ml=new WeakMap,Ai=new WeakMap,zn=new WeakMap,$u=new WeakMap,Dl=new WeakMap,Tn=new WeakMap,Ll=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,Un=new WeakMap,op=new WeakMap,Ol=new WeakMap,go=new WeakMap,lp=new WeakMap,jl=new WeakMap,ea=new WeakMap,Ki=new WeakMap,Ku=new WeakMap,Wu=new WeakMap,ti=new WeakMap,cp=new WeakMap,Tv=new WeakMap,Vt=new WeakSet,lA=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this.fixAndSetPosition()},up=new WeakSet,cA=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},uA=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},VM=function(){if(p(this,Tn))return;k(this,Tn,document.createElement("div")),p(this,Tn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");p(this,Tn).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",M(this,Vt,qM).bind(this,n),{signal:e}),a.addEventListener("contextmenu",gs,{signal:e}),a.tabIndex=-1}this.div.prepend(p(this,Tn))},qM=function(t,e){var S;e.preventDefault();const{isMac:n}=fs.platform;if(e.button!==0||e.ctrlKey&&n)return;(S=p(this,zn))==null||S.toggle(!1);const a=M(this,Vt,dA).bind(this,t),o=this._isDraggable;this._isDraggable=!1;const c=this._uiManager._signal,u={passive:!0,capture:!0,signal:c};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",a,u),window.addEventListener("contextmenu",gs,{signal:c});const d=this.x,f=this.y,g=this.width,y=this.height,x=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const A=()=>{var C;this.parent.togglePointerEvents(!0),(C=p(this,zn))==null||C.toggle(!0),this._isDraggable=o,window.removeEventListener("pointerup",A),window.removeEventListener("blur",A),window.removeEventListener("pointermove",a,u),window.removeEventListener("contextmenu",gs),this.parent.div.style.cursor=x,this.div.style.cursor=w,M(this,Vt,hA).call(this,d,f,g,y)};window.addEventListener("pointerup",A,{signal:c}),window.addEventListener("blur",A,{signal:c})},hA=function(t,e,n,a){const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===e&&u===n&&d===a||this.addCommands({cmd:()=>{this.width=u,this.height=d,this.x=o,this.y=c;const[f,g]=this.parentDimensions;this.setDims(f*u,g*d),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=a,this.x=t,this.y=e;const[f,g]=this.parentDimensions;this.setDims(f*n,g*a),this.fixAndSetPosition()},mustExec:!0})},dA=function(t,e){const[n,a]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,f=Ae.MIN_SIZE/n,g=Ae.MIN_SIZE/a,y=q=>Math.round(q*1e4)/1e4,x=M(this,Vt,uA).call(this,this.rotation),w=(q,X)=>[x[0]*q+x[2]*X,x[1]*q+x[3]*X],A=M(this,Vt,uA).call(this,360-this.rotation),S=(q,X)=>[A[0]*q+A[2]*X,A[1]*q+A[3]*X];let C,T,R=!1,L=!1;switch(t){case"topLeft":R=!0,C=(q,X)=>[0,0],T=(q,X)=>[q,X];break;case"topMiddle":C=(q,X)=>[q/2,0],T=(q,X)=>[q/2,X];break;case"topRight":R=!0,C=(q,X)=>[q,0],T=(q,X)=>[0,X];break;case"middleRight":L=!0,C=(q,X)=>[q,X/2],T=(q,X)=>[0,X/2];break;case"bottomRight":R=!0,C=(q,X)=>[q,X],T=(q,X)=>[0,0];break;case"bottomMiddle":C=(q,X)=>[q/2,X],T=(q,X)=>[q/2,0];break;case"bottomLeft":R=!0,C=(q,X)=>[0,X],T=(q,X)=>[q,0];break;case"middleLeft":L=!0,C=(q,X)=>[0,X/2],T=(q,X)=>[q,X/2];break}const j=C(u,d),I=T(u,d);let U=w(...I);const O=y(o+U[0]),H=y(c+U[1]);let Z=1,$=1,[W,st]=this.screenToPageTranslation(e.movementX,e.movementY);if([W,st]=S(W/n,st/a),R){const q=Math.hypot(u,d);Z=$=Math.max(Math.min(Math.hypot(I[0]-j[0]-W,I[1]-j[1]-st)/q,1/u,1/d),f/u,g/d)}else L?Z=Math.max(f,Math.min(1,Math.abs(I[0]-j[0]-W)))/u:$=Math.max(g,Math.min(1,Math.abs(I[1]-j[1]-st)))/d;const ct=y(u*Z),lt=y(d*$);U=w(...T(ct,lt));const nt=O-U[0],z=H-U[1];this.width=ct,this.height=lt,this.x=nt,this.y=z,this.setDims(n*ct,a*lt),this.fixAndSetPosition()},fA=function(t){const{isMac:e}=fs.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},GM=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let n,a;const o=this._uiManager._signal;e&&(this.div.classList.add("moving"),n={passive:!0,capture:!0,signal:o},k(this,Ku,t.clientX),k(this,Wu,t.clientY),a=u=>{const{clientX:d,clientY:f}=u,[g,y]=this.screenToPageTranslation(d-p(this,Ku),f-p(this,Wu));k(this,Ku,d),k(this,Wu,f),this._uiManager.dragSelectedEditors(g,y)},window.addEventListener("pointermove",a,n));const c=()=>{window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",a,n)),k(this,Ol,!1),this._uiManager.endDragSession()||M(this,Vt,fA).call(this,t)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},$M=function(t){Ae._resizerKeyboardManager.exec(this,t)},XM=function(t){var e;p(this,ea)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==p(this,Tn)&&M(this,Vt,cf).call(this)},YM=function(t){k(this,op,p(this,ea)?t:"")},pA=function(t){if(p(this,Ai))for(const e of p(this,Ai))e.tabIndex=t},cf=function(){if(k(this,ea,!1),M(this,Vt,pA).call(this,-1),p(this,Ll)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=p(this,Ll);M(this,Vt,hA).call(this,t,e,n,a),k(this,Ll,null)}},D(Ae,up),Dt(Ae,"_borderLineWidth",-1),Dt(Ae,"_colorManager",new eA),Dt(Ae,"_zIndex",1),Dt(Ae,"_telemetryTimeout",1e3);let pe=Ae;class r8 extends pe{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Ok=3285377520,Zs=4294901760,Vi=65535;class KM{constructor(t){this.h1=t?t&4294967295:Ok,this.h2=t?t&4294967295:Ok}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let S=0,C=t.length;S<C;S++){const T=t.charCodeAt(S);T<=255?e[n++]=T:(e[n++]=T>>>8,e[n++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,o=n-a*4,c=new Uint32Array(e.buffer,0,a);let u=0,d=0,f=this.h1,g=this.h2;const y=3432918353,x=461845907,w=y&Vi,A=x&Vi;for(let S=0;S<a;S++)S&1?(u=c[S],u=u*y&Zs|u*w&Vi,u=u<<15|u>>>17,u=u*x&Zs|u*A&Vi,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[S],d=d*y&Zs|d*w&Vi,d=d<<15|d>>>17,d=d*x&Zs|d*A&Vi,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*y&Zs|u*w&Vi,u=u<<15|u>>>17,u=u*x&Zs|u*A&Vi,a&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Zs|t*36045&Vi,e=e*4283543511&Zs|((e<<16|t>>>16)*2950163797&Zs)>>>16,t^=e>>>1,t=t*444984403&Zs|t*60499&Vi,e=e*3301882366&Zs|((e<<16|t>>>16)*3120437893&Zs)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const gA=Object.freeze({map:null,hash:"",transfer:void 0});var Pl,kn,kv,WM;class tS{constructor(){D(this,kv);D(this,Pl,!1);D(this,kn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=p(this,kn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return p(this,kn).get(t)}remove(t){if(p(this,kn).delete(t),p(this,kn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of p(this,kn).values())if(e instanceof pe)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=p(this,kn).get(t);let a=!1;if(n!==void 0)for(const[o,c]of Object.entries(e))n[o]!==c&&(a=!0,n[o]=c);else a=!0,p(this,kn).set(t,e);a&&M(this,kv,WM).call(this),e instanceof pe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return p(this,kn).has(t)}getAll(){return p(this,kn).size>0?X_(p(this,kn)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return p(this,kn).size}resetModified(){p(this,Pl)&&(k(this,Pl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new QM(this)}get serializable(){if(p(this,kn).size===0)return gA;const t=new Map,e=new KM,n=[],a=Object.create(null);let o=!1;for(const[c,u]of p(this,kn)){const d=u instanceof pe?u.serialize(!1,a):u;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:gA}get editorStats(){let t=null;const e=new Map;for(const n of p(this,kn).values()){if(!(n instanceof pe))continue;const a=n.telemetryFinalData;if(!a)continue;const{type:o}=a;e.has(o)||e.set(o,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const c=t[o]||(t[o]=new Map);for(const[u,d]of Object.entries(a)){if(u==="type")continue;let f=c.get(u);f||(f=new Map,c.set(u,f));const g=f.get(d)??0;f.set(d,g+1)}}for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}}Pl=new WeakMap,kn=new WeakMap,kv=new WeakSet,WM=function(){p(this,Pl)||(k(this,Pl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var hp;class QM extends tS{constructor(e){super();D(this,hp);const{map:n,hash:a,transfer:o}=e.serializable,c=structuredClone(n,o?{transfer:o}:null);k(this,hp,{map:c,hash:a,transfer:o})}get print(){be("Should not call PrintAnnotationStorage.print")}get serializable(){return p(this,hp)}}hp=new WeakMap;var Qu;class a8{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){D(this,Qu,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),p(this,Qu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||p(this,Qu).has(t.loadedName))){if(an(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:a,style:o}=t,c=new FontFace(n,a,o);this.addNativeFontFace(c);try{await c.load(),p(this,Qu).add(n),e==null||e(t)}catch{zt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}be("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw zt(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return ne(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Hn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),ne(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(an(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ne(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(j,I){return j.charCodeAt(I)<<24|j.charCodeAt(I+1)<<16|j.charCodeAt(I+2)<<8|j.charCodeAt(I+3)&255}function a(j,I,U,O){const H=j.substring(0,I),Z=j.substring(I+U);return H+O+Z}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(j,I){if(++f>30){zt("Load test font never loaded."),I();return}if(d.font="30px "+j,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(g.bind(null,j,I))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=a(x,976,y.length,y);const A=16,S=1482184792;let C=n(x,A);for(o=0,c=y.length-3;o<c;o+=4)C=C-S+n(y,o)|0;o<y.length&&(C=C-S+n(y+"XXX",o)|0),x=a(x,A,4,VH(C));const T=`url(data:font/opentype;base64,${btoa(x)});`,R=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(R);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const j of[t.loadedName,y]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=j,L.append(I)}this._document.body.append(L),g(y,()=>{L.remove(),e.complete()})}}Qu=new WeakMap;class o8{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var a;if(!this.data||this.disableFontFace)return null;const t=vM(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let o=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(o+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${o}src:${e}}`}return(a=this._inspectFont)==null||a.call(this,this,e),n}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(o){zt(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(o,c){};const a=[];for(let o=0,c=n.length;o<c;)switch(n[o++]){case Br.BEZIER_CURVE_TO:{const[u,d,f,g,y,x]=n.slice(o,o+6);a.push(w=>w.bezierCurveTo(u,d,f,g,y,x)),o+=6}break;case Br.MOVE_TO:{const[u,d]=n.slice(o,o+2);a.push(f=>f.moveTo(u,d)),o+=2}break;case Br.LINE_TO:{const[u,d]=n.slice(o,o+2);a.push(f=>f.lineTo(u,d)),o+=2}break;case Br.QUADRATIC_CURVE_TO:{const[u,d,f,g]=n.slice(o,o+4);a.push(y=>y.quadraticCurveTo(u,d,f,g)),o+=4}break;case Br.RESTORE:a.push(u=>u.restore());break;case Br.SAVE:a.push(u=>u.save());break;case Br.SCALE:an(a.length===2,"Scale command is only valid at the third position.");break;case Br.TRANSFORM:{const[u,d,f,g,y,x]=n.slice(o,o+6);a.push(w=>w.transform(u,d,f,g,y,x)),o+=6}break;case Br.TRANSLATE:{const[u,d]=n.slice(o,o+2);a.push(f=>f.translate(u,d)),o+=2}break}return this.compiledGlyphs[e]=function(c,u){a[0](c),a[1](c),c.scale(u,-u);for(let d=2,f=a.length;d<f;d++)a[d](c)}}}if(Hn){var mA=Promise.withResolvers(),_f=null;(async()=>{const t=await bl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await bl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await bl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),a=await bl(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:t,http:e,https:n,url:a,canvas:o,path2d:c}))})().then(t=>{_f=t,mA.resolve()},t=>{zt(`loadPackages: ${t}`),_f=new Map,mA.resolve()})}class vr{static get promise(){return mA.promise}static get(t){return _f==null?void 0:_f.get(t)}}const ZM=function(i){return vr.get("fs").promises.readFile(i).then(e=>new Uint8Array(e))};class l8 extends cb{}class c8 extends hv{_createCanvas(t,e){return vr.get("canvas").createCanvas(t,e)}}class u8 extends ub{_fetchData(t,e){return ZM(t).then(n=>({cMapData:n,compressionType:e}))}}class h8 extends hb{_fetchData(t){return ZM(t)}}const Zn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function yA(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),i.clip(a)}class Tg{constructor(){this.constructor===Tg&&be("Cannot initialize BaseShadingPattern.")}getPattern(){be("Abstract method `getPattern` called.")}}class d8 extends Tg{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let o;if(a===Zn.STROKE||a===Zn.FILL){const c=e.current.getClippedPathBoundingBox(a,Pe(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d,!0),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),n=At.transform(n,[1,0,0,1,c[0],c[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),yA(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else yA(t,this._bbox),o=this._createGradient(t);return o}}function pw(i,t,e,n,a,o,c,u){const d=t.coords,f=t.colors,g=i.data,y=i.width*4;let x;d[e+1]>d[n+1]&&(x=e,e=n,n=x,x=o,o=c,c=x),d[n+1]>d[a+1]&&(x=n,n=a,a=x,x=c,c=u,u=x),d[e+1]>d[n+1]&&(x=e,e=n,n=x,x=o,o=c,c=x);const w=(d[e]+t.offsetX)*t.scaleX,A=(d[e+1]+t.offsetY)*t.scaleY,S=(d[n]+t.offsetX)*t.scaleX,C=(d[n+1]+t.offsetY)*t.scaleY,T=(d[a]+t.offsetX)*t.scaleX,R=(d[a+1]+t.offsetY)*t.scaleY;if(A>=R)return;const L=f[o],j=f[o+1],I=f[o+2],U=f[c],O=f[c+1],H=f[c+2],Z=f[u],$=f[u+1],W=f[u+2],st=Math.round(A),ct=Math.round(R);let lt,nt,z,q,X,_t,Ct,P;for(let G=st;G<=ct;G++){if(G<C){const ht=G<A?0:(A-G)/(A-C);lt=w-(w-S)*ht,nt=L-(L-U)*ht,z=j-(j-O)*ht,q=I-(I-H)*ht}else{let ht;G>R?ht=1:C===R?ht=0:ht=(C-G)/(C-R),lt=S-(S-T)*ht,nt=U-(U-Z)*ht,z=O-(O-$)*ht,q=H-(H-W)*ht}let tt;G<A?tt=0:G>R?tt=1:tt=(A-G)/(A-R),X=w-(w-T)*tt,_t=L-(L-Z)*tt,Ct=j-(j-$)*tt,P=I-(I-W)*tt;const ot=Math.round(Math.min(lt,X)),pt=Math.round(Math.max(lt,X));let wt=y*G+ot*4;for(let ht=ot;ht<=pt;ht++)tt=(lt-ht)/(lt-X),tt<0?tt=0:tt>1&&(tt=1),g[wt++]=nt-(nt-_t)*tt|0,g[wt++]=z-(z-Ct)*tt|0,g[wt++]=q-(q-P)*tt|0,g[wt++]=255}}function f8(i,t,e){const n=t.coords,a=t.colors;let o,c;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<f;y++,g++)pw(i,e,n[g],n[g+1],n[g+u],a[g],a[g+1],a[g+u]),pw(i,e,n[g+u+1],n[g+1],n[g+u],a[g+u+1],a[g+1],a[g+u])}break;case"triangles":for(o=0,c=n.length;o<c;o+=3)pw(i,e,n[o],n[o+1],n[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class p8 extends Tg{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),w=f/y,A=g/x,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/w,scaleY:1/A},C=y+4,T=x+4,R=n.getCanvas("mesh",C,T,!1),L=R.context,j=L.createImageData(y,x);if(e){const U=j.data;for(let O=0,H=U.length;O<H;O+=4)U[O]=e[0],U[O+1]=e[1],U[O+2]=e[2],U[O+3]=255}for(const U of this._figures)f8(j,U,S);return L.putImageData(j,2,2),{canvas:R.canvas,offsetX:u-2*w,offsetY:d-2*A,scaleX:w,scaleY:A}}getPattern(t,e,n,a){yA(t,this._bbox);let o;if(a===Zn.SHADING)o=At.singularValueDecompose2dScale(Pe(t));else if(o=At.singularValueDecompose2dScale(e.baseTransform),this.matrix){const u=At.singularValueDecompose2dScale(this.matrix);o=[o[0]*u[0],o[1]*u[1]]}const c=this._createMeshCanvas(o,a===Zn.SHADING?null:this._background,e.cachedCanvases);return a!==Zn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class g8 extends Tg{getPattern(){return"hotpink"}}function m8(i){switch(i[0]){case"RadialAxial":return new d8(i);case"Mesh":return new p8(i);case"Dummy":return new g8}throw new Error(`Unknown IR type: ${i[0]}`)}const jk={COLORED:1,UNCOLORED:2},Rv=class Rv{constructor(t,e,n,a,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=a,this.baseTransform=o}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,a=this.xstep,o=this.ystep,c=this.paintType,u=this.tilingType,d=this.color,f=this.canvasGraphicsFactory;ab("TilingType: "+u);const g=n[0],y=n[1],x=n[2],w=n[3],A=At.singularValueDecompose2dScale(this.matrix),S=At.singularValueDecompose2dScale(this.baseTransform),C=[A[0]*S[0],A[1]*S[1]],T=this.getSizeAndScale(a,this.ctx.canvas.width,C[0]),R=this.getSizeAndScale(o,this.ctx.canvas.height,C[1]),L=t.cachedCanvases.getCanvas("pattern",T.size,R.size,!0),j=L.context,I=f.createCanvasGraphics(j);I.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(I,c,d);let U=g,O=y,H=x,Z=w;return g<0&&(U=0,H+=Math.abs(g)),y<0&&(O=0,Z+=Math.abs(y)),j.translate(-(T.scale*U),-(R.scale*O)),I.transform(T.scale,0,0,R.scale,0,0),j.save(),this.clipBbox(I,U,O,H,Z),I.baseTransform=Pe(I.ctx),I.executeOperatorList(e),I.endDrawing(),{canvas:L.canvas,scaleX:T.scale,scaleY:R.scale,offsetX:U,offsetY:O}}getSizeAndScale(t,e,n){t=Math.abs(t);const a=Math.max(Rv.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=a?o=a:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,a,o){const c=a-e,u=o-n;t.ctx.rect(e,n,c,u),t.current.updateRectMinMax(Pe(t.ctx),[e,n,a,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,o=t.current;switch(e){case jk.COLORED:const c=this.ctx;a.fillStyle=c.fillStyle,a.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case jk.UNCOLORED:const u=At.makeHexColor(n[0],n[1],n[2]);a.fillStyle=u,a.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new HH(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,a){let o=n;a!==Zn.SHADING&&(o=At.transform(o,e.baseTransform),this.matrix&&(o=At.transform(o,this.matrix)));const c=this.createPatternCanvas(e);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(u),d}};Dt(Rv,"MAX_PATTERN_SIZE",3e3);let vA=Rv;function y8({src:i,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=fs.isLittleEndian?4278190080:255,[d,f]=c?[o,u]:[u,o],g=n>>3,y=n&7,x=i.length;e=new Uint32Array(e.buffer);let w=0;for(let A=0;A<a;A++){for(const C=t+g;t<C;t++){const T=t<x?i[t]:255;e[w++]=T&128?f:d,e[w++]=T&64?f:d,e[w++]=T&32?f:d,e[w++]=T&16?f:d,e[w++]=T&8?f:d,e[w++]=T&4?f:d,e[w++]=T&2?f:d,e[w++]=T&1?f:d}if(y===0)continue;const S=t<x?i[t++]:255;for(let C=0;C<y;C++)e[w++]=S&1<<7-C?f:d}return{srcPos:t,destPos:w}}const Pk=16,Fk=100,v8=15,Ik=10,zk=1e3,ds=16;function b8(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(n,a){t.translate(n,a),this.__originalTranslate(n,a)},i.scale=function(n,a){t.scale(n,a),this.__originalScale(n,a)},i.transform=function(n,a,o,c,u,d){t.transform(n,a,o,c,u,d),this.__originalTransform(n,a,o,c,u,d)},i.setTransform=function(n,a,o,c,u,d){t.setTransform(n,a,o,c,u,d),this.__originalSetTransform(n,a,o,c,u,d)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){t.rotate(n),this.__originalRotate(n)},i.clip=function(n){t.clip(n),this.__originalClip(n)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,a,o,c,u){t.bezierCurveTo(e,n,a,o,c,u),this.__originalBezierCurveTo(e,n,a,o,c,u)},i.rect=function(e,n,a,o){t.rect(e,n,a,o),this.__originalRect(e,n,a,o)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class x8{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function ry(i,t,e,n,a,o,c,u,d,f){const[g,y,x,w,A,S]=Pe(i);if(y===0&&x===0){const R=c*g+A,L=Math.round(R),j=u*w+S,I=Math.round(j),U=(c+d)*g+A,O=Math.abs(Math.round(U)-L)||1,H=(u+f)*w+S,Z=Math.abs(Math.round(H)-I)||1;return i.setTransform(Math.sign(g),0,0,Math.sign(w),L,I),i.drawImage(t,e,n,a,o,0,0,O,Z),i.setTransform(g,y,x,w,A,S),[O,Z]}if(g===0&&w===0){const R=u*x+A,L=Math.round(R),j=c*y+S,I=Math.round(j),U=(u+f)*x+A,O=Math.abs(Math.round(U)-L)||1,H=(c+d)*y+S,Z=Math.abs(Math.round(H)-I)||1;return i.setTransform(0,Math.sign(y),Math.sign(x),0,L,I),i.drawImage(t,e,n,a,o,0,0,Z,O),i.setTransform(g,y,x,w,A,S),[Z,O]}i.drawImage(t,e,n,a,o,c,u,d,f);const C=Math.hypot(g,y),T=Math.hypot(x,w);return[C*d,T*f]}function w8(i){const{width:t,height:e}=i;if(t>zk||e>zk)return null;const n=1e3,a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let c=new Uint8Array(o*(e+1)),u,d,f;const g=t+7&-8;let y=new Uint8Array(g*e),x=0;for(const T of i.data){let R=128;for(;R>0;)y[x++]=T&R?0:255,R>>=1}let w=0;for(x=0,y[x]!==0&&(c[0]=1,++w),d=1;d<t;d++)y[x]!==y[x+1]&&(c[d]=y[x]?2:1,++w),x++;for(y[x]!==0&&(c[d]=2,++w),u=1;u<e;u++){x=u*g,f=u*o,y[x-g]!==y[x]&&(c[f]=y[x]?1:8,++w);let T=(y[x]?4:0)+(y[x-g]?8:0);for(d=1;d<t;d++)T=(T>>2)+(y[x+1]?4:0)+(y[x-g+1]?8:0),a[T]&&(c[f+d]=a[T],++w),x++;if(y[x-g]!==y[x]&&(c[f+d]=y[x]?2:4,++w),w>n)return null}for(x=g*(e-1),f=u*o,y[x]!==0&&(c[f]=8,++w),d=1;d<t;d++)y[x]!==y[x+1]&&(c[f+d]=y[x]?4:8,++w),x++;if(y[x]!==0&&(c[f+d]=4,++w),w>n)return null;const A=new Int32Array([0,o,-1,0,-o,0,0,0,1]),S=new Path2D;for(u=0;w&&u<=e;u++){let T=u*o;const R=T+t;for(;T<R&&!c[T];)T++;if(T===R)continue;S.moveTo(T%o,u);const L=T;let j=c[T];do{const I=A[j];do T+=I;while(!c[T]);const U=c[T];U!==5&&U!==10?(j=U,c[T]=0):(j=U&51*j>>4,c[T]&=j>>2|j<<2),S.lineTo(T%o,T/o|0),c[T]||--w}while(L!==T);--u}return y=null,c=null,function(T){T.save(),T.scale(1/t,-1/e),T.translate(0,-e),T.fill(S),T.beginPath(),T.restore()}}class Uk{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=mM,this.textMatrixScale=1,this.fontMatrix=qw,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Fn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=At.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=At.applyTransform(e,t),a=At.applyTransform(e.slice(2),t),o=At.applyTransform([e[0],e[3]],t),c=At.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],a[0],o[0],c[0]),this.minY=Math.min(this.minY,n[1],a[1],o[1],c[1]),this.maxX=Math.max(this.maxX,n[0],a[0],o[0],c[0]),this.maxY=Math.max(this.maxY,n[1],a[1],o[1],c[1])}updateScalingPathMinMax(t,e){At.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,a,o,c,u,d,f,g){const y=At.bezierBoundingBox(e,n,a,o,c,u,d,f,g);g||this.updateRectMinMax(t,y)}getPathBoundingBox(t=Zn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Zn.STROKE){e||be("Stroke bounding box must include transform.");const a=At.singularValueDecompose2dScale(e),o=a[0]*this.lineWidth/2,c=a[1]*this.lineWidth/2;n[0]-=o,n[1]-=c,n[2]+=o,n[3]+=c}return n}updateClipFromPath(){const t=At.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Zn.FILL,e=null){return At.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Bk(i,t){if(typeof ImageData<"u"&&t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%ds,o=(e-a)/ds,c=a===0?o:o+1,u=i.createImageData(n,ds);let d=0,f;const g=t.data,y=u.data;let x,w,A,S;if(t.kind===Ay.GRAYSCALE_1BPP){const C=g.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),R=T.length,L=n+7>>3,j=4294967295,I=fs.isLittleEndian?4278190080:255;for(x=0;x<c;x++){for(A=x<o?ds:a,f=0,w=0;w<A;w++){const U=C-d;let O=0;const H=U>L?n:U*8-7,Z=H&-8;let $=0,W=0;for(;O<Z;O+=8)W=g[d++],T[f++]=W&128?j:I,T[f++]=W&64?j:I,T[f++]=W&32?j:I,T[f++]=W&16?j:I,T[f++]=W&8?j:I,T[f++]=W&4?j:I,T[f++]=W&2?j:I,T[f++]=W&1?j:I;for(;O<H;O++)$===0&&(W=g[d++],$=128),T[f++]=W&$?j:I,$>>=1}for(;f<R;)T[f++]=0;i.putImageData(u,0,x*ds)}}else if(t.kind===Ay.RGBA_32BPP){for(w=0,S=n*ds*4,x=0;x<o;x++)y.set(g.subarray(d,d+S)),d+=S,i.putImageData(u,0,w),w+=ds;x<c&&(S=n*a*4,y.set(g.subarray(d,d+S)),i.putImageData(u,0,w))}else if(t.kind===Ay.RGB_24BPP)for(A=ds,S=n*A,x=0;x<c;x++){for(x>=o&&(A=a,S=n*A),f=0,w=S;w--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;i.putImageData(u,0,x*ds)}else throw new Error(`bad image kind: ${t.kind}`)}function Hk(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%ds,o=(e-a)/ds,c=a===0?o:o+1,u=i.createImageData(n,ds);let d=0;const f=t.data,g=u.data;for(let y=0;y<c;y++){const x=y<o?ds:a;({srcPos:d}=y8({src:f,srcPos:d,dest:g,width:n,height:x,nonBlackColor:0})),i.putImageData(u,0,y*ds)}}function Jd(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function ay(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Hn){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function Vk(i,t){if(t)return!0;const e=At.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Io.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const A8=["butt","round","square"],_8=["miter","round","bevel"],S8={},qk={};var Uo,bA,xA;const aS=class aS{constructor(t,e,n,a,o,{optionalContentConfig:c,markedContentStack:u=null},d,f){D(this,Uo);this.ctx=t,this.current=new Uk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new x8(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Pe(this.compositeCtx))}this.ctx.save(),ay(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Pe(this.ctx)}executeOperatorList(t,e,n,a){const o=t.argsArray,c=t.fnArray;let u=e||0;const d=o.length;if(d===u)return u;const f=d-u>Ik&&typeof n=="function",g=f?Date.now()+v8:0;let y=0;const x=this.commonObjs,w=this.objs;let A;for(;;){if(a!==void 0&&u===a.nextBreakPoint)return a.breakIt(u,n),u;if(A=c[u],A!==yi.dependency)this[A].apply(this,o[u]);else for(const S of o[u]){const C=S.startsWith("g_")?x:w;if(!C.has(S))return C.get(S,n),u}if(u++,u===d)return u;if(f&&++y>Ik){if(Date.now()>g)return n(),u;y=0}}}endDrawing(){M(this,Uo,bA).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),M(this,Uo,xA).call(this)}_scaleImage(t,e){const n=t.width,a=t.height;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=a,f="prescale1",g,y;for(;o>2&&u>1||c>2&&d>1;){let x=u,w=d;o>2&&u>1&&(x=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/x),c>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/w),g=this.cachedCanvases.getCanvas(f,x,w),y=g.context,y.clearRect(0,0,x,w),y.drawImage(t,0,0,u,d,0,0,x,w),t=g.canvas,u=x,d=w,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:a}=t,o=this.current.fillColor,c=this.current.patternFill,u=Pe(e);let d,f,g,y;if((t.bitmap||t.data)&&t.count>1){const H=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(H),d||(d=new Map,this._cachedBitmapsMap.set(H,d));const Z=d.get(f);if(Z&&!c){const $=Math.round(Math.min(u[0],u[2])+u[4]),W=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:Z,offsetX:$,offsetY:W}}g=Z}g||(y=this.cachedCanvases.getCanvas("maskCanvas",n,a),Hk(y.context,t));let x=At.transform(u,[1/n,0,0,-1/a,0,0]);x=At.transform(x,[1,0,0,1,0,-a]);const[w,A,S,C]=At.getAxialAlignedBoundingBox([0,0,n,a],x),T=Math.round(S-w)||1,R=Math.round(C-A)||1,L=this.cachedCanvases.getCanvas("fillCanvas",T,R),j=L.context,I=w,U=A;j.translate(-I,-U),j.transform(...x),g||(g=this._scaleImage(y.canvas,Hr(j)),g=g.img,d&&c&&d.set(f,g)),j.imageSmoothingEnabled=Vk(Pe(j),t.interpolate),ry(j,g,0,0,g.width,g.height,0,0,n,a),j.globalCompositeOperation="source-in";const O=At.transform(Hr(j),[1,0,0,1,-I,-U]);return j.fillStyle=c?o.getPattern(e,this,O,Zn.FILL):o,j.fillRect(0,0,n,a),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,L.canvas)),{canvas:L.canvas,offsetX:Math.round(I),offsetY:Math.round(U)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=A8[t]}setLineJoin(t){this.ctx.lineJoin=_8[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=a.context;const o=this.ctx;o.setTransform(...Pe(this.suspendedCtx)),Jd(this.suspendedCtx,o),b8(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Jd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const o=a[0],c=a[1],u=a[2]-o,d=a[3]-c;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,o,c,u,d,f,g,y){let x=t.canvas,w=d-g,A=f-y;if(c){if(w<0||A<0||w+n>x.width||A+a>x.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,a),T=C.context;T.drawImage(x,-w,-A),c.some(R=>R!==0)&&(T.globalCompositeOperation="destination-atop",T.fillStyle=At.makeHexColor(...c),T.fillRect(0,0,n,a),T.globalCompositeOperation="source-over"),x=C.canvas,w=A=0}else if(c.some(C=>C!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(w,A,n,a),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=At.makeHexColor(...c),t.fillRect(w,A,n,a),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,n,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(x,w,A,n,a,d,f,n,a),e.restore()}save(){this.inSMaskMode?(Jd(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Jd(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,a,o,c){this.ctx.transform(t,e,n,a,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const a=this.ctx,o=this.current;let c=o.x,u=o.y,d,f;const g=Pe(a),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,x=y?n.slice(0):null;for(let w=0,A=0,S=t.length;w<S;w++)switch(t[w]|0){case yi.rectangle:c=e[A++],u=e[A++];const C=e[A++],T=e[A++],R=c+C,L=u+T;a.moveTo(c,u),C===0||T===0?a.lineTo(R,L):(a.lineTo(R,u),a.lineTo(R,L),a.lineTo(c,L)),y||o.updateRectMinMax(g,[c,u,R,L]),a.closePath();break;case yi.moveTo:c=e[A++],u=e[A++],a.moveTo(c,u),y||o.updatePathMinMax(g,c,u);break;case yi.lineTo:c=e[A++],u=e[A++],a.lineTo(c,u),y||o.updatePathMinMax(g,c,u);break;case yi.curveTo:d=c,f=u,c=e[A+4],u=e[A+5],a.bezierCurveTo(e[A],e[A+1],e[A+2],e[A+3],c,u),o.updateCurvePathMinMax(g,d,f,e[A],e[A+1],e[A+2],e[A+3],c,u,x),A+=6;break;case yi.curveTo2:d=c,f=u,a.bezierCurveTo(c,u,e[A],e[A+1],e[A+2],e[A+3]),o.updateCurvePathMinMax(g,d,f,c,u,e[A],e[A+1],e[A+2],e[A+3],x),c=e[A+2],u=e[A+3],A+=4;break;case yi.curveTo3:d=c,f=u,c=e[A+2],u=e[A+3],a.bezierCurveTo(e[A],e[A+1],c,u,c,u),o.updateCurvePathMinMax(g,d,f,e[A],e[A+1],c,u,c,u,x),A+=4;break;case yi.closePath:a.closePath();break}y&&o.updateScalingPathMinMax(g,x),o.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,Hr(e),Zn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;let o=!1;a&&(e.save(),e.fillStyle=n.getPattern(e,this,Hr(e),Zn.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),o&&e.restore(),t&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=S8}eoClip(){this.pendingClip=qk}beginText(){this.current.textMatrix=mM,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const n=this.commonObjs.get(t),a=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=n.fontMatrix||qw,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&zt("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const o=n.loadedName||"sans-serif",c=((g=n.systemFontInfo)==null?void 0:g.css)||`"${o}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const d=n.italic?"italic":"normal";let f=e;e<Pk?f=Pk:e>Fk&&(f=Fk),this.current.fontSizeScale=e/f,this.ctx.font=`${d} ${u} ${f}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,a,o,c){this.current.textMatrix=[t,e,n,a,o,c],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,a){const o=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,f=c.fontSize/c.fontSizeScale,g=d&Fn.FILL_STROKE_MASK,y=!!(d&Fn.ADD_TO_PATH_FLAG),x=c.patternFill&&!u.missingFile;let w;(u.disableFontFace||y||x)&&(w=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||x?(o.save(),o.translate(e,n),o.beginPath(),w(o,f),a&&o.setTransform(...a),(g===Fn.FILL||g===Fn.FILL_STROKE)&&o.fill(),(g===Fn.STROKE||g===Fn.FILL_STROKE)&&o.stroke(),o.restore()):((g===Fn.FILL||g===Fn.FILL_STROKE)&&o.fillText(t,e,n),(g===Fn.STROKE||g===Fn.FILL_STROKE)&&o.strokeText(t,e,n)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pe(o),x:e,y:n,fontSize:f,addToPath:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return ne(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const o=this.ctx,c=e.fontSizeScale,u=e.charSpacing,d=e.wordSpacing,f=e.fontDirection,g=e.textHScale*f,y=t.length,x=n.vertical,w=x?1:-1,A=n.defaultVMetrics,S=a*e.fontMatrix[0],C=e.textRenderingMode===Fn.FILL&&!n.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),f>0?o.scale(g,-1):o.scale(g,1);let T;if(e.patternFill){o.save();const U=e.fillColor.getPattern(o,this,Hr(o),Zn.FILL);T=Pe(o),o.restore(),o.fillStyle=U}let R=e.lineWidth;const L=e.textMatrixScale;if(L===0||R===0){const U=e.textRenderingMode&Fn.FILL_STROKE_MASK;(U===Fn.STROKE||U===Fn.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=L;if(c!==1&&(o.scale(c,c),R/=c),o.lineWidth=R,n.isInvalidPDFjsFont){const U=[];let O=0;for(const H of t)U.push(H.unicode),O+=H.width;o.fillText(U.join(""),0,0),e.x+=O*S*g,o.restore(),this.compose();return}let j=0,I;for(I=0;I<y;++I){const U=t[I];if(typeof U=="number"){j+=w*U*a/1e3;continue}let O=!1;const H=(U.isSpace?d:0)+u,Z=U.fontChar,$=U.accent;let W,st,ct=U.width;if(x){const nt=U.vmetric||A,z=-(U.vmetric?nt[1]:ct*.5)*S,q=nt[2]*S;ct=nt?-nt[0]:ct,W=z/c,st=(j+q)/c}else W=j/c,st=0;if(n.remeasure&&ct>0){const nt=o.measureText(Z).width*1e3/a*c;if(ct<nt&&this.isFontSubpixelAAEnabled){const z=ct/nt;O=!0,o.save(),o.scale(z,1),W/=z}else ct!==nt&&(W+=(ct-nt)/2e3*a/c)}if(this.contentVisible&&(U.isInFont||n.missingFile)){if(C&&!$)o.fillText(Z,W,st);else if(this.paintChar(Z,W,st,T),$){const nt=W+a*$.offset.x/c,z=st-a*$.offset.y/c;this.paintChar($.fontChar,nt,z,T)}}const lt=x?ct*S-H*f:ct*S+H*f;j+=lt,O&&o.restore()}x?e.y-=j:e.x+=j*g,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,a=n.font,o=n.fontSize,c=n.fontDirection,u=a.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,g=n.textHScale*c,y=n.fontMatrix||qw,x=t.length,w=n.textRenderingMode===Fn.INVISIBLE;let A,S,C,T;if(!(w||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(g,c),A=0;A<x;++A){if(S=t[A],typeof S=="number"){T=u*S*o/1e3,this.ctx.translate(T,0),n.x+=T*g;continue}const R=(S.isSpace?f:0)+d,L=a.charProcOperatorList[S.operatorListId];if(!L){zt(`Type3 character "${S.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=S,this.save(),e.scale(o,o),e.transform(...y),this.executeOperatorList(L),this.restore()),C=At.applyTransform([S.width,0],y)[0]*o+R,e.translate(C,0),n.x+=C*g}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,a,o,c){this.ctx.rect(n,a,o-n,c-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],a=this.baseTransform||Pe(this.ctx),o={createCanvasGraphics:c=>new aS(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new vA(t,n,this.ctx,o,a)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const a=At.makeHexColor(t,e,n);this.ctx.strokeStyle=a,this.current.strokeColor=a}setFillRGBColor(t,e,n){const a=At.makeHexColor(t,e,n);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=m8(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Hr(e),Zn.SHADING);const a=Hr(e);if(a){const{width:o,height:c}=e.canvas,[u,d,f,g]=At.getAxialAlignedBoundingBox([0,0,o,c],a);this.ctx.fillRect(u,d,f-u,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){be("Should not call beginInlineImage")}beginImageData(){be("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Pe(this.ctx),e)){const n=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],n,a),this.current.updateRectMinMax(Pe(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||ab("TODO: Support non-isolated groups."),t.knockout&&zt("Knockout groups not supported.");const n=Pe(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=At.getAxialAlignedBoundingBox(t.bbox,Pe(e));const o=[0,0,e.canvas.width,e.canvas.height];a=At.intersect(a,o)||[0,0,0,0];const c=Math.floor(a[0]),u=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-c,1),f=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,f),x=y.context;x.translate(-c,-u),x.transform(...n),t.smask?this.smaskStack.push({canvas:y.canvas,context:x,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(c,u),e.save()),Jd(e,x),this.ctx=x,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=Pe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const o=At.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,n,a,o){if(M(this,Uo,bA).call(this),ay(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const c=e[2]-e[0],u=e[3]-e[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=c,e[3]=u;const[d,f]=At.singularValueDecompose2dScale(Pe(this.ctx)),{viewportScale:g}=this,y=Math.ceil(c*this.outputScaleX*g),x=Math.ceil(u*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,x);const{canvas:w,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(t,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(d,0,0,-f,0,u*f),ay(this.ctx)}else ay(this.ctx),this.ctx.rect(e[0],e[1],c,u),this.ctx.clip(),this.endPath()}this.current=new Uk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),M(this,Uo,xA).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,a=this.processingType3;if(a&&(a.compiled===void 0&&(a.compiled=w8(t)),a.compiled)){a.compiled(n);return}const o=this._createMaskCanvas(t),c=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(c,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,a=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=Pe(u);u.transform(e,n,a,o,0,0);const f=this._createMaskCanvas(t);u.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let g=0,y=c.length;g<y;g+=2){const x=At.transform(d,[e,n,a,o,c[g],c[g+1]]),[w,A]=At.applyTransform([0,0],x);u.drawImage(f.canvas,w,A)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(const o of t){const{data:c,width:u,height:d,transform:f}=o,g=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=g.context;y.save();const x=this.getObject(c,o);Hk(y,x),y.globalCompositeOperation="source-in",y.fillStyle=a?n.getPattern(y,this,Hr(e),Zn.FILL):n,y.fillRect(0,0,u,d),y.restore(),e.save(),e.transform(...f),e.scale(1,-1),ry(e,g.canvas,0,0,u,d,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){zt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,a){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){zt("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let f=0,g=a.length;f<g;f+=2)d.push({transform:[e,0,0,n,a[f],a[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,a=this.ctx;if(this.save(),!Hn){const{filter:u}=a;u!=="none"&&u!==""&&(a.filter="none")}a.scale(1/e,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Bk(d,t),o=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(o,Hr(a));a.imageSmoothingEnabled=Vk(Pe(a),t.interpolate),ry(a,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;Bk(d,t),a=this.applyTransferMapsToCanvas(d)}for(const o of e)n.save(),n.transform(...o.transform),n.scale(1,-1),ry(n,a,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===qk?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Pe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:o}=this.ctx.getTransform();let c,u;if(n===0&&a===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)c=u=1/d;else{const g=d*t;c=u=g<1?1/g:1}else if(t===0)c=1/d,u=1/f;else{const g=d*t,y=f*t;c=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(e*o-n*a),f=Math.hypot(e,n),g=Math.hypot(a,o);if(t===0)c=g/d,u=f/d;else{const y=t*d;c=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[a,o]=this.getScaleForStroking();if(e.lineWidth=n||1,a===1&&o===1){e.stroke();return}const c=e.getLineDash();if(t&&e.save(),e.scale(a,o),c.length>0){const u=Math.max(a,o);e.setLineDash(c.map(d=>d/u)),e.lineDashOffset/=u}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Uo=new WeakSet,bA=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},xA=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let ju=aS;for(const i in yi)ju.prototype[i]!==void 0&&(ju.prototype[yi[i]]=ju.prototype[i]);var dp,fp;class xa{static get workerPort(){return p(this,dp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");k(this,dp,t)}static get workerSrc(){return p(this,fp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");k(this,fp,t)}}dp=new WeakMap,fp=new WeakMap,D(xa,dp,null),D(xa,fp,"");const oy={DATA:1,ERROR:2},Ye={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Es(i){switch(i instanceof Error||typeof i=="object"&&i!==null||be('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Nc(i.message);case"MissingPDFException":return new Rc(i.message);case"PasswordException":return new $w(i.message,i.code);case"UnexpectedResponseException":return new ob(i.message,i.status);case"UnknownErrorException":return new Xw(i.message,i.details);default:return new Xw(i.message,i.toString())}}var hr,JM,tD,ky;class uf{constructor(t,e,n){D(this,hr);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=a=>{const o=a.data;if(o.targetName!==this.sourceName)return;if(o.stream){M(this,hr,tD).call(this,o);return}if(o.callback){const u=o.callbackId,d=this.callbackCapabilities[u];if(!d)throw new Error(`Cannot resolve callback ${u}`);if(delete this.callbackCapabilities[u],o.callback===oy.DATA)d.resolve(o.data);else if(o.callback===oy.ERROR)d.reject(Es(o.reason));else throw new Error("Unexpected callback case");return}const c=this.actionHandler[o.action];if(!c)throw new Error(`Unknown action from worker: ${o.action}`);if(o.callbackId){const u=this.sourceName,d=o.sourceName;new Promise(function(f){f(c(o.data))}).then(function(f){n.postMessage({sourceName:u,targetName:d,callback:oy.DATA,callbackId:o.callbackId,data:f})},function(f){n.postMessage({sourceName:u,targetName:d,callback:oy.ERROR,callbackId:o.callbackId,reason:Es(f)})});return}if(o.streamId){M(this,hr,JM).call(this,o);return}c(o.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,n,a){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:c,targetName:u,stream:Ye.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{an(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:Ye.CANCEL,streamId:o,reason:Es(f)}),g.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}hr=new WeakSet,JM=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=g,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:a,stream:Ye.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ye.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){an(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ye.ERROR,streamId:e,reason:Es(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,new Promise(function(f){f(u(t.data,d))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ye.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:a,stream:Ye.START_COMPLETE,streamId:e,reason:Es(f)})})},tD=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case Ye.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Es(t.reason));break;case Ye.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Es(t.reason));break;case Ye.PULL:if(!u){o.postMessage({sourceName:n,targetName:a,stream:Ye.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,new Promise(function(d){var f;d((f=u.onPull)==null?void 0:f.call(u))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ye.PULL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:n,targetName:a,stream:Ye.PULL_COMPLETE,streamId:e,reason:Es(d)})});break;case Ye.ENQUEUE:if(an(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Ye.CLOSE:if(an(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),M(this,hr,ky).call(this,c,e);break;case Ye.ERROR:an(c,"error should have stream controller"),c.controller.error(Es(t.reason)),M(this,hr,ky).call(this,c,e);break;case Ye.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Es(t.reason)),M(this,hr,ky).call(this,c,e);break;case Ye.CANCEL:if(!u)break;new Promise(function(d){var f;d((f=u.onCancel)==null?void 0:f.call(u,Es(t.reason)))}).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ye.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){o.postMessage({sourceName:n,targetName:a,stream:Ye.CANCEL_COMPLETE,streamId:e,reason:Es(d)})}),u.sinkCapability.reject(Es(t.reason)),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},ky=async function(t,e){var n,a,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var Fl,pp;class E8{constructor({parsedData:t,rawData:e}){D(this,Fl);D(this,pp);k(this,Fl,t),k(this,pp,e)}getRaw(){return p(this,pp)}get(t){return p(this,Fl).get(t)??null}getAll(){return X_(p(this,Fl))}has(t){return p(this,Fl).has(t)}}Fl=new WeakMap,pp=new WeakMap;const ao=Symbol("INTERNAL");var gp,mp,yp,Zu;class C8{constructor(t,{name:e,intent:n,usage:a}){D(this,gp,!1);D(this,mp,!1);D(this,yp,!1);D(this,Zu,!0);k(this,gp,!!(t&si.DISPLAY)),k(this,mp,!!(t&si.PRINT)),this.name=e,this.intent=n,this.usage=a}get visible(){if(p(this,yp))return p(this,Zu);if(!p(this,Zu))return!1;const{print:t,view:e}=this.usage;return p(this,gp)?(e==null?void 0:e.viewState)!=="OFF":p(this,mp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==ao&&be("Internal method `_setVisible` called."),k(this,yp,n),k(this,Zu,e)}}gp=new WeakMap,mp=new WeakMap,yp=new WeakMap,Zu=new WeakMap;var mo,ve,Ju,th,vp,wA;class T8{constructor(t,e=si.DISPLAY){D(this,vp);D(this,mo,null);D(this,ve,new Map);D(this,Ju,null);D(this,th,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,k(this,th,t.order);for(const n of t.groups)p(this,ve).set(n.id,new C8(e,n));if(t.baseState==="OFF")for(const n of p(this,ve).values())n._setVisible(ao,!1);for(const n of t.on)p(this,ve).get(n)._setVisible(ao,!0);for(const n of t.off)p(this,ve).get(n)._setVisible(ao,!1);k(this,Ju,this.getHash())}}isVisible(t){if(p(this,ve).size===0)return!0;if(!t)return ab("Optional content group not defined."),!0;if(t.type==="OCG")return p(this,ve).has(t.id)?p(this,ve).get(t.id).visible:(zt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return M(this,vp,wA).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!p(this,ve).has(e))return zt(`Optional content group not found: ${e}`),!0;if(p(this,ve).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!p(this,ve).has(e))return zt(`Optional content group not found: ${e}`),!0;if(!p(this,ve).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!p(this,ve).has(e))return zt(`Optional content group not found: ${e}`),!0;if(!p(this,ve).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!p(this,ve).has(e))return zt(`Optional content group not found: ${e}`),!0;if(p(this,ve).get(e).visible)return!1}return!0}return zt(`Unknown optional content policy ${t.policy}.`),!0}return zt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const n=p(this,ve).get(t);if(!n){zt(`Optional content group not found: ${t}`);return}n._setVisible(ao,!!e,!0),k(this,mo,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const o=p(this,ve).get(a);if(o)switch(n){case"ON":o._setVisible(ao,!0);break;case"OFF":o._setVisible(ao,!1);break;case"Toggle":o._setVisible(ao,!o.visible);break}}k(this,mo,null)}get hasInitialVisibility(){return p(this,Ju)===null||this.getHash()===p(this,Ju)}getOrder(){return p(this,ve).size?p(this,th)?p(this,th).slice():[...p(this,ve).keys()]:null}getGroups(){return p(this,ve).size>0?X_(p(this,ve)):null}getGroup(t){return p(this,ve).get(t)||null}getHash(){if(p(this,mo)!==null)return p(this,mo);const t=new KM;for(const[e,n]of p(this,ve))t.update(`${e}:${n.visible}`);return k(this,mo,t.hexdigest())}}mo=new WeakMap,ve=new WeakMap,Ju=new WeakMap,th=new WeakMap,vp=new WeakSet,wA=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const o=t[a];let c;if(Array.isArray(o))c=M(this,vp,wA).call(this,o);else if(p(this,ve).has(o))c=p(this,ve).get(o).visible;else return zt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class k8{constructor(t,{disableRange:e=!1,disableStream:n=!1}){an(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});an(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||o.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){an(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new R8(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new N8(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class R8{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=Z_(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class N8{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function M8(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let g=u(e);return g=unescape(g),g=d(g),g=f(g),o(g)}if(e=c(i),e){const g=f(e);return o(g)}if(e=n("filename","i").exec(i),e){e=e[1];let g=u(e);return g=f(g),o(g)}function n(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const x=new TextDecoder(g,{fatal:!0}),w=lb(y);y=x.decode(w),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function c(g){const y=[];let x;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=w.exec(g))!==null;){let[,S,C,T]=x;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[C,T]}const A=[];for(let S=0;S<y.length&&S in y;++S){let[C,T]=y[S];T=u(T),C&&(T=unescape(T),S===0&&(T=d(T))),A.push(T)}return A.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let x=0;x<y.length;++x){const w=y[x].indexOf('"');w!==-1&&(y[x]=y[x].slice(0,w),y.length=x+1),y[x]=y[x].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const x=g.slice(0,y),A=g.slice(y+1).replace(/^[^']*'/,"");return a(x,A)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,x,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),a(x,A);try{A=atob(A)}catch{}return a(x,A)})}return""}function eS({getResponseHeader:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(i("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||n||!t||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function nS(i){const t=i("Content-Disposition");if(t){let e=M8(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Z_(e))return e}return null}function fb(i,t){return i===404||i===0&&t.startsWith("file:")?new Rc('Missing PDF "'+t+'".'):new ob(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function eD(i){return i===200||i===206}function nD(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function sD(i){const t=new Headers;for(const e in i){const n=i[e];n!==void 0&&t.append(e,n)}return t}function iD(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(zt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Gk{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return an(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new D8(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new L8(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class D8{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=sD(this._stream.httpHeaders);const n=e.url;fetch(n,nD(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!eD(a.status))throw fb(a.status,n);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=d=>a.headers.get(d),{allowRangeRequests:c,suggestedLength:u}=eS({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=nS(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Nc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:iD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class L8{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController,this._headers=sD(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const o=a.url;fetch(o,nD(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!eD(c.status))throw fb(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:iD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const gw=200,mw=206;function O8(i){const t=i.response;return typeof t!="string"?t:lb(t).buffer}class j8{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const a={begin:t,end:e};for(const o in n)a[o]=n[o];return this.request(a)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const c=this.httpHeaders[o];c!==void 0&&e.setRequestHeader(o,c)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=mw):a.expectedStatus=gw,e.responseType="arraybuffer",t.onError&&(e.onerror=function(o){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){var d,f,g;const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){(d=n.onError)==null||d.call(n,a.status);return}const o=a.status||gw;if(!(o===gw&&n.expectedStatus===mw)&&o!==n.expectedStatus){(f=n.onError)==null||f.call(n,a.status);return}const u=O8(a);if(o===mw){const y=a.getResponseHeader("Content-Range"),x=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);n.onDone({begin:parseInt(x[1],10),chunk:u})}else u?n.onDone({begin:0,chunk:u}):(g=n.onError)==null||g.call(n,a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class P8{constructor(t){this._source=t,this._manager=new j8(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return an(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new F8(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new I8(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class F8{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=c=>e.getResponseHeader(c),{allowRangeRequests:a,suggestedLength:o}=eS({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=nS(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=fb(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I8{constructor(t,e,n){this._manager=t;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=fb(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const rD=/^file:\/\/\/[a-zA-Z]:\//;function z8(i){const t=vr.get("url"),e=t.parse(i);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(i)?t.parse(`file:///${i}`):(e.host||(e.protocol="file:"),e)}class U8{constructor(t){this.source=t,this.url=z8(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return an(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new V8(this):new B8(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new q8(this,t,e):new H8(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class aD{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Nc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class oD{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function pv(i,t){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:t}}class B8 extends aD{constructor(t){super(t);const e=n=>{if(n.statusCode===404){const u=new Rc(`Missing PDF "${this._url}".`);this._storedError=u,this._headersCapability.reject(u);return}this._headersCapability.resolve(),this._setReadableStream(n);const a=u=>this._readableStream.headers[u.toLowerCase()],{allowRangeRequests:o,suggestedLength:c}=eS({getResponseHeader:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=nS(a)};if(this._request=null,this._url.protocol==="http:"){const n=vr.get("http");this._request=n.request(pv(this._url,t.httpHeaders),e)}else{const n=vr.get("https");this._request=n.request(pv(this._url,t.httpHeaders),e)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class H8 extends oD{constructor(t,e,n){super(t),this._httpHeaders={};for(const o in t.httpHeaders){const c=t.httpHeaders[o];c!==void 0&&(this._httpHeaders[o]=c)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const a=o=>{if(o.statusCode===404){const c=new Rc(`Missing PDF "${this._url}".`);this._storedError=c;return}this._setReadableStream(o)};if(this._request=null,this._url.protocol==="http:"){const o=vr.get("http");this._request=o.request(pv(this._url,this._httpHeaders),a)}else{const o=vr.get("https");this._request=o.request(pv(this._url,this._httpHeaders),a)}this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class V8 extends aD{constructor(t){super(t);let e=decodeURIComponent(this._url.path);rD.test(this._url.href)&&(e=e.replace(/^\//,""));const n=vr.get("fs");n.promises.lstat(e).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(e)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=new Rc(`Missing PDF "${e}".`)),this._storedError=a,this._headersCapability.reject(a)})}}class q8 extends oD{constructor(t,e,n){super(t);let a=decodeURIComponent(this._url.path);rD.test(this._url.href)&&(a=a.replace(/^\//,""));const o=vr.get("fs");this._setReadableStream(o.createReadStream(a,{start:e,end:n-1}))}}const G8=1e5,cs=30,$8=.8;var aR,yo,hs,bp,xp,Il,na,wp,Ap,zl,eh,nh,vo,sh,_p,ih,Ul,Sp,Ep,rn,Bl,Hl,bo,rh,Ca,lD,cD,AA,dr,Ry,uD,hD;let gv=(rn=class{constructor({textContentSource:t,container:e,viewport:n}){D(this,Ca);D(this,yo,Promise.withResolvers());D(this,hs,null);D(this,bp,!1);D(this,xp,!!((aR=globalThis.FontInspector)!=null&&aR.enabled));D(this,Il,null);D(this,na,null);D(this,wp,0);D(this,Ap,0);D(this,zl,null);D(this,eh,null);D(this,nh,0);D(this,vo,0);D(this,sh,Object.create(null));D(this,_p,[]);D(this,ih,null);D(this,Ul,[]);D(this,Sp,new WeakMap);D(this,Ep,null);var d;if(t instanceof ReadableStream)k(this,ih,t);else if(typeof t=="object")k(this,ih,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');k(this,hs,k(this,eh,e)),k(this,vo,n.scale*(globalThis.devicePixelRatio||1)),k(this,nh,n.rotation),k(this,na,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:o,pageX:c,pageY:u}=n.rawDims;k(this,Ep,[1,0,0,-1,-c,u+o]),k(this,Ap,a),k(this,wp,o),M(d=rn,dr,uD).call(d),wc(e,n),p(this,yo).promise.catch(()=>{}).then(()=>{p(rn,rh).delete(this),k(this,na,null),k(this,sh,null)})}render(){const t=()=>{p(this,zl).read().then(({value:e,done:n})=>{if(n){p(this,yo).resolve();return}p(this,Il)??k(this,Il,e.lang),Object.assign(p(this,sh),e.styles),M(this,Ca,lD).call(this,e.items),t()},p(this,yo).reject)};return k(this,zl,p(this,ih).getReader()),p(rn,rh).add(this),t(),p(this,yo).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*(globalThis.devicePixelRatio||1),a=t.rotation;if(a!==p(this,nh)&&(e==null||e(),k(this,nh,a),wc(p(this,eh),{rotation:a})),n!==p(this,vo)){e==null||e(),k(this,vo,n);const c={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:M(o=rn,dr,Ry).call(o,p(this,Il))};for(const u of p(this,Ul))c.properties=p(this,Sp).get(u),c.div=u,M(this,Ca,AA).call(this,c)}}cancel(){var e;const t=new Nc("TextLayer task cancelled.");(e=p(this,zl))==null||e.cancel(t).catch(()=>{}),k(this,zl,null),p(this,yo).reject(t)}get textDivs(){return p(this,Ul)}get textContentItemsStr(){return p(this,_p)}static cleanup(){if(!(p(this,rh).size>0)){p(this,Bl).clear();for(const{canvas:t}of p(this,Hl).values())t.remove();p(this,Hl).clear()}}},yo=new WeakMap,hs=new WeakMap,bp=new WeakMap,xp=new WeakMap,Il=new WeakMap,na=new WeakMap,wp=new WeakMap,Ap=new WeakMap,zl=new WeakMap,eh=new WeakMap,nh=new WeakMap,vo=new WeakMap,sh=new WeakMap,_p=new WeakMap,ih=new WeakMap,Ul=new WeakMap,Sp=new WeakMap,Ep=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,bo=new WeakMap,rh=new WeakMap,Ca=new WeakSet,lD=function(t){var a,o;if(p(this,bp))return;(o=p(this,na)).ctx??(o.ctx=M(a=rn,dr,Ry).call(a,p(this,Il)));const e=p(this,Ul),n=p(this,_p);for(const c of t){if(e.length>G8){zt("Ignoring additional textDivs for performance reasons."),k(this,bp,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=p(this,hs);k(this,hs,document.createElement("span")),p(this,hs).classList.add("markedContent"),c.id!==null&&p(this,hs).setAttribute("id",`${c.id}`),u.append(p(this,hs))}else c.type==="endMarkedContent"&&k(this,hs,p(this,hs).parentNode);continue}n.push(c.str),M(this,Ca,cD).call(this,c)}},cD=function(t){var S;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};p(this,Ul).push(e);const a=At.transform(p(this,Ep),t.transform);let o=Math.atan2(a[1],a[0]);const c=p(this,sh)[t.fontName];c.vertical&&(o+=Math.PI/2);const u=p(this,xp)&&c.fontSubstitution||c.fontFamily,d=Math.hypot(a[2],a[3]),f=d*M(S=rn,dr,hD).call(S,u,p(this,Il));let g,y;o===0?(g=a[4],y=a[5]-f):(g=a[4]+f*Math.sin(o),y=a[5]-f*Math.cos(o));const x="calc(var(--scale-factor)*",w=e.style;p(this,hs)===p(this,eh)?(w.left=`${(100*g/p(this,Ap)).toFixed(2)}%`,w.top=`${(100*y/p(this,wp)).toFixed(2)}%`):(w.left=`${x}${g.toFixed(2)}px)`,w.top=`${x}${y.toFixed(2)}px)`),w.fontSize=`${x}${(p(rn,bo)*d).toFixed(2)}px)`,w.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,p(this,xp)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const C=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);C!==T&&Math.max(C,T)/Math.min(C,T)>1.5&&(A=!0)}if(A&&(n.canvasWidth=c.vertical?t.height:t.width),p(this,Sp).set(e,n),p(this,na).div=e,p(this,na).properties=n,M(this,Ca,AA).call(this,p(this,na)),n.hasText&&p(this,hs).append(e),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),p(this,hs).append(C)}},AA=function(t){const{div:e,properties:n,ctx:a,prevFontSize:o,prevFontFamily:c}=t,{style:u}=e;let d="";if(p(rn,bo)>1&&(d=`scale(${1/p(rn,bo)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=u,{canvasWidth:g,fontSize:y}=n;(o!==y||c!==f)&&(a.font=`${y*p(this,vo)}px ${f}`,t.prevFontSize=y,t.prevFontFamily=f);const{width:x}=a.measureText(e.textContent);x>0&&(d=`scaleX(${g*p(this,vo)/x}) ${d}`)}n.angle!==0&&(d=`rotate(${n.angle}deg) ${d}`),d.length>0&&(u.transform=d)},dr=new WeakSet,Ry=function(t=null){let e=p(this,Hl).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),p(this,Hl).set(t,e)}return e},uD=function(){if(p(this,bo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.textContent="X",document.body.append(t),k(this,bo,t.getBoundingClientRect().height),t.remove()},hD=function(t,e){const n=p(this,Bl).get(t);if(n)return n;const a=M(this,dr,Ry).call(this,e),o=a.font;a.canvas.width=a.canvas.height=cs,a.font=`${cs}px ${t}`;const c=a.measureText("");let u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);if(u){const y=u/(u+d);return p(this,Bl).set(t,y),a.canvas.width=a.canvas.height=0,a.font=o,y}a.strokeStyle="red",a.clearRect(0,0,cs,cs),a.strokeText("g",0,0);let f=a.getImageData(0,0,cs,cs).data;d=0;for(let y=f.length-1-3;y>=0;y-=4)if(f[y]>0){d=Math.ceil(y/4/cs);break}a.clearRect(0,0,cs,cs),a.strokeText("A",0,cs),f=a.getImageData(0,0,cs,cs).data,u=0;for(let y=0,x=f.length;y<x;y+=4)if(f[y]>0){u=cs-Math.floor(y/4/cs);break}a.canvas.width=a.canvas.height=0,a.font=o;const g=u?u/(u+d):$8;return p(this,Bl).set(t,g),g},D(rn,dr),D(rn,Bl,new Map),D(rn,Hl,new Map),D(rn,bo,null),D(rn,rh,new Set),rn);function X8(){_M("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:i,container:t,viewport:e,...n}=arguments[0],a=Object.keys(n);a.length>0&&zt("Ignoring `renderTextLayer` parameters: "+a.join(", "));const o=new gv({textContentSource:i,container:t,viewport:e}),{textDivs:c,textContentItemsStr:u}=o;return{promise:o.render(),textDivs:c,textContentItemsStr:u}}function Y8(){_M("`updateTextLayer`, please use `TextLayer` instead.")}class Pf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(o){var d;if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(Pf.shouldBuildText(u))(d=o==null?void 0:o.attributes)!=null&&d.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const f of o.children)a(f)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const K8=65536,W8=100,Q8=5e3,Z8=Hn?c8:WH,J8=Hn?u8:wM,tV=Hn?l8:KH,eV=Hn?h8:AM;function nV(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new _A,{docId:e}=t,n=i.url?sV(i.url):null,a=i.data?iV(i.data):null,o=i.httpHeaders||null,c=i.withCredentials===!0,u=i.password??null,d=i.range instanceof dD?i.range:null,f=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:K8;let g=i.worker instanceof Pu?i.worker:null;const y=i.verbosity,x=typeof i.docBaseUrl=="string"&&!Q_(i.docBaseUrl)?i.docBaseUrl:null,w=typeof i.cMapUrl=="string"?i.cMapUrl:null,A=i.cMapPacked!==!1,S=i.CMapReaderFactory||J8,C=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,T=i.StandardFontDataFactory||eV,R=i.stopAtErrors!==!0,L=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,j=i.isEvalSupported!==!1,I=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Hn,U=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,O=typeof i.disableFontFace=="boolean"?i.disableFontFace:Hn,H=i.fontExtraProperties===!0,Z=i.enableXfa===!0,$=i.ownerDocument||globalThis.document,W=i.disableRange===!0,st=i.disableStream===!0,ct=i.disableAutoFetch===!0,lt=i.pdfBug===!0,nt=i.enableHWA===!0,z=d?d.length:i.length??NaN,q=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Hn&&!O,X=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:S===wM&&T===AM&&w&&C&&of(w,document.baseURI)&&of(C,document.baseURI),_t=i.canvasFactory||new Z8({ownerDocument:$,enableHWA:nt}),Ct=i.filterFactory||new tV({docId:e,ownerDocument:$}),P=null;IH(y);const G={canvasFactory:_t,filterFactory:Ct};if(X||(G.cMapReaderFactory=new S({baseUrl:w,isCompressed:A}),G.standardFontDataFactory=new T({baseUrl:C})),!g){const pt={verbosity:y,port:xa.workerPort};g=pt.port?Pu.fromPort(pt):new Pu(pt),t._worker=g}const tt={docId:e,apiVersion:"4.4.168",data:a,password:u,disableAutoFetch:ct,rangeChunkSize:f,length:z,docBaseUrl:x,enableXfa:Z,evaluatorOptions:{maxImageSize:L,disableFontFace:O,ignoreErrors:R,isEvalSupported:j,isOffscreenCanvasSupported:I,canvasMaxAreaInBytes:U,fontExtraProperties:H,useSystemFonts:q,cMapUrl:X?w:null,standardFontDataUrl:X?C:null}},ot={disableFontFace:O,fontExtraProperties:H,ownerDocument:$,pdfBug:lt,styleElement:P,loadingParams:{disableAutoFetch:ct,enableXfa:Z}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const pt=g.messageHandler.sendWithPromise("GetDocRequest",tt,a?[a.buffer]:null);let wt;if(d)wt=new k8(d,{disableRange:W,disableStream:st});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");wt=(Gt=>Hn?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&of(Gt.url)?new Gk(Gt):new U8(Gt):of(Gt.url)?new Gk(Gt):new P8(Gt))({url:n,length:z,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:W,disableStream:st})}return pt.then(ht=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Gt=new uf(e,ht,g.port),Ft=new lV(Gt,t,wt,ot,G);t._transport=Ft,Gt.send("Ready",null)})}).catch(t._capability.reject),t}function sV(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Hn&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function iV(i){if(Hn&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return lb(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function $k(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Nv;const Mv=class Mv{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Ss(Mv,Nv)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Nv=new WeakMap,D(Mv,Nv,0);let _A=Mv,dD=class{constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){be("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class rV{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ne(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var xo,sa,oi,Eu,Ny;class aV{constructor(t,e,n,a=!1){D(this,oi);D(this,xo,null);D(this,sa,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new Dk:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new fD,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}={}){return new Eg({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ne(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:a=co.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:g=null}){var L,j;(L=this._stats)==null||L.time("Overall");const y=this._transport.getRenderingIntent(n,a,g),{renderingIntent:x,cacheKey:w}=y;k(this,sa,!1),M(this,oi,Ny).call(this),u||(u=this._transport.getOptionalContentConfig(x));let A=this._intentStates.get(w);A||(A=Object.create(null),this._intentStates.set(w,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const S=!!(x&si.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(j=this._stats)==null||j.time("Page Request"),this._pumpOperatorList(y));const C=I=>{var U;A.renderTasks.delete(T),(this._maybeCleanupAfterRender||S)&&k(this,sa,!0),M(this,oi,Eu).call(this,!S),I?(T.capability.reject(I),this._abortOperatorList({intentState:A,reason:I instanceof Error?I:new Error(I)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new EA({callback:C,params:{canvasContext:t,viewport:e,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:f});(A.renderTasks||(A.renderTasks=new Set)).add(T);const R=T.task;return Promise.all([A.displayReadyCapability.promise,u]).then(([I,U])=>{var O;if(this.destroyed){C();return}if((O=this._stats)==null||O.time("Rendering"),!(U.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:I,optionalContentConfig:U}),T.operatorListChanged()}).catch(C),R}getOperatorList({intent:t="display",annotationMode:e=co.ENABLE,printAnnotationStorage:n=null}={}){var d;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(t,e,n,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Pf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function o(){c.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),k(this,sa,!1),M(this,oi,Ny).call(this),Promise.all(t)}cleanup(t=!1){k(this,sa,!0);const e=M(this,oi,Eu).call(this,!1);return t&&e&&this._stats&&(this._stats=new Dk),e}_startRenderPage(t,e){var a,o;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&M(this,oi,Eu).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n}){const{map:a,transfer:o}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a},o).getReader(),d=this._intentStates.get(e);d.streamReader=u;const f=()=>{u.read().then(({value:g,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,d),f())},g=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();M(this,oi,Eu).call(this,!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(g);else if(d.opListReadCapability)d.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof W_){let a=W8;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Nc(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}xo=new WeakMap,sa=new WeakMap,oi=new WeakSet,Eu=function(t=!1){if(M(this,oi,Ny).call(this),!p(this,sa)||this.destroyed)return!1;if(t)return k(this,xo,setTimeout(()=>{k(this,xo,null),M(this,oi,Eu).call(this,!1)},Q8)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(this,sa,!1),!0},Ny=function(){p(this,xo)&&(clearTimeout(p(this,xo)),k(this,xo,null))};var Vl,Dv;class oV{constructor(){D(this,Vl,new Set);D(this,Dv,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};p(this,Dv).then(()=>{for(const a of p(this,Vl))a.call(this,n)})}addEventListener(t,e){p(this,Vl).add(e)}removeEventListener(t,e){p(this,Vl).delete(e)}terminate(){p(this,Vl).clear()}}Vl=new WeakMap,Dv=new WeakMap;const Xr={isWorkerDisabled:!1,fakeWorkerId:0};Hn&&(Xr.isWorkerDisabled=!0,xa.workerSrc||(xa.workerSrc="./pdf.worker.mjs")),Xr.isSameOrigin=function(i,t){let e;try{if(e=new URL(i),!e.origin||e.origin==="null")return!1}catch{return!1}const n=new URL(t,e);return e.origin===n.origin},Xr.createCDNWrapper=function(i){const t=`await import("${i}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var ql,ah,My,oh,Dy;const Cs=class Cs{constructor({name:t=null,port:e=null,verbosity:n=zH()}={}){D(this,ah);var a;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((a=p(Cs,ql))!=null&&a.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(p(Cs,ql)||k(Cs,ql,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return Hn?Promise.all([vr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new uf("main","worker",t),this._messageHandler.on("ready",function(){}),M(this,ah,My).call(this)}_initialize(){if(Xr.isWorkerDisabled||p(Cs,oh,Dy)){this._setupFakeWorker();return}let{workerSrc:t}=Cs;try{Xr.isSameOrigin(window.location.href,t)||(t=Xr.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new uf("main","worker",e),a=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||a()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}this._messageHandler=n,this._port=e,this._webWorker=e,M(this,ah,My).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};c();return}catch{ab("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Xr.isWorkerDisabled||(zt("Setting up fake worker."),Xr.isWorkerDisabled=!0),Cs._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new oV;this._port=e;const n=`fake${Xr.fakeWorkerId++}`,a=new uf(n+"_worker",n,e);t.setup(a,e),this._messageHandler=new uf(n,n+"_worker",e),M(this,ah,My).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=p(Cs,ql))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=p(this,ql))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Cs(t)}static get workerSrc(){if(xa.workerSrc)return xa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ne(this,"_setupFakeWorkerGlobal",(async()=>p(this,oh,Dy)?p(this,oh,Dy):(await import(this.workerSrc)).WorkerMessageHandler)())}};ql=new WeakMap,ah=new WeakSet,My=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},oh=new WeakSet,Dy=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},D(Cs,oh),D(Cs,ql);let Pu=Cs;var ia,Wi,lh,ch,Qi,Gl,hf;class lV{constructor(t,e,n,a,o){D(this,Gl);D(this,ia,new Map);D(this,Wi,new Map);D(this,lh,new Map);D(this,ch,new Map);D(this,Qi,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new fD,this.fontLoader=new a8({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ne(this,"annotationStorage",new tS)}getRenderingIntent(t,e=co.ENABLE,n=null,a=!1){let o=si.DISPLAY,c=gA;switch(t){case"any":o=si.ANY;break;case"display":break;case"print":o=si.PRINT;break;default:zt(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case co.DISABLE:o+=si.ANNOTATIONS_DISABLE;break;case co.ENABLE:break;case co.ENABLE_FORMS:o+=si.ANNOTATIONS_FORMS;break;case co.ENABLE_STORAGE:o+=si.ANNOTATIONS_STORAGE,c=(o&si.PRINT&&n instanceof QM?n:this.annotationStorage).serializable;break;default:zt(`getRenderingIntent - invalid annotationMode: ${e}`)}return a&&(o+=si.OPLIST),{renderingIntent:o,cacheKey:`${o}_${c.hash}`,annotationStorageSerializable:c}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=p(this,Qi))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of p(this,Wi).values())t.push(a._destroy());p(this,Wi).clear(),p(this,lh).clear(),p(this,ch).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a;this.commonObjs.clear(),this.fontLoader.clear(),p(this,ia).clear(),this.filterFactory.destroy(),gv.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new Nc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{an(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){a.close();return}an(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",n=>{const a=Promise.withResolvers(),o=this._fullReader;return o.headersReady.then(()=>{var c;(!o.isStreamingSupported||!o.isRangeSupported)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),o.onProgress=u=>{var d;(d=e.onProgress)==null||d.call(e,{loaded:u.loaded,total:u.total})}),a.resolve({isStreamingSupported:o.isStreamingSupported,isRangeSupported:o.isRangeSupported,contentLength:o.contentLength})},a.reject),a.promise}),t.on("GetRangeReader",(n,a)=>{an(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){a.close();return}an(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new rV(n,this))}),t.on("DocException",function(n){let a;switch(n.name){case"PasswordException":a=new $w(n.message,n.code);break;case"InvalidPDFException":a=new yM(n.message);break;case"MissingPDFException":a=new Rc(n.message);break;case"UnexpectedResponseException":a=new ob(n.message,n.status);break;case"UnknownErrorException":a=new Xw(n.message,n.details);break;default:be("DocException - expected a valid Error.")}e._capability.reject(a)}),t.on("PasswordRequest",n=>{if(k(this,Qi,Promise.withResolvers()),e.onPassword){const a=o=>{o instanceof Error?p(this,Qi).reject(o):p(this,Qi).resolve({password:o})};try{e.onPassword(a,n.code)}catch(o){p(this,Qi).reject(o)}}else p(this,Qi).reject(new $w(n.message,n.code));return p(this,Qi).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;p(this,Wi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,o])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":const{disableFontFace:u,fontExtraProperties:d,pdfBug:f}=this._params;if("error"in o){const w=o.error;zt(`Error during font loading: ${w}`),this.commonObjs.resolve(n,w);break}const g=f&&((c=globalThis.FontInspector)!=null&&c.enabled)?(w,A)=>globalThis.FontInspector.fontAdded(w,A):null,y=new o8(o,{disableFontFace:u,inspectFont:g});this.fontLoader.bind(y).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&y.data&&(y.data=null),this.commonObjs.resolve(n,y)});break;case"CopyLocalImage":const{imageRef:x}=o;an(x,"The imageRef must be defined.");for(const w of p(this,Wi).values())for(const[,A]of w.objs)if((A==null?void 0:A.ref)===x)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,o,c])=>{var d;if(this.destroyed)return;const u=p(this,Wi).get(a);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=c==null?void 0:c.bitmap)==null||d.close();return}switch(o){case"Image":u.objs.resolve(n,c),(c==null?void 0:c.dataLen)>OH&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&zt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=p(this,lh).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&p(this,ch).set(o.refStr,t);const c=new aV(e,o,this,this._params.pdfBug);return p(this,Wi).set(e,c),c});return p(this,lh).set(e,a),a}getPageIndex(t){return $k(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return M(this,Gl,hf).call(this,"GetFieldObjects")}hasJSActions(){return M(this,Gl,hf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return M(this,Gl,hf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return M(this,Gl,hf).call(this,"GetOptionalContentConfig").then(e=>new T8(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=p(this,ia).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var o,c;return{info:a[0],metadata:a[1]?new E8(a[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return p(this,ia).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of p(this,Wi).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),p(this,ia).clear(),this.filterFactory.destroy(!0),gv.cleanup()}}cachedPageNumber(t){if(!$k(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return p(this,ch).get(e)??null}}ia=new WeakMap,Wi=new WeakMap,lh=new WeakMap,ch=new WeakMap,Qi=new WeakMap,Gl=new WeakSet,hf=function(t,e=null){const n=p(this,ia).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return p(this,ia).set(t,a),a};const ly=Symbol("INITIAL_DATA");var _i,Cp,SA;class fD{constructor(){D(this,Cp);D(this,_i,Object.create(null))}get(t,e=null){if(e){const a=M(this,Cp,SA).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=p(this,_i)[t];if(!n||n.data===ly)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=p(this,_i)[t];return!!e&&e.data!==ly}resolve(t,e=null){const n=M(this,Cp,SA).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in p(this,_i)){const{data:n}=p(this,_i)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}k(this,_i,Object.create(null))}*[Symbol.iterator](){for(const t in p(this,_i)){const{data:e}=p(this,_i)[t];e!==ly&&(yield[t,e])}}}_i=new WeakMap,Cp=new WeakSet,SA=function(t){var e;return(e=p(this,_i))[t]||(e[t]={...Promise.withResolvers(),data:ly})};var wo;class cV{constructor(t){D(this,wo,null);k(this,wo,t),this.onContinue=null}get promise(){return p(this,wo).capability.promise}cancel(t=0){p(this,wo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=p(this,wo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=p(this,wo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}wo=new WeakMap;var Ao,$l;const vl=class vl{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:x=null}){D(this,Ao,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new cV(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var u,d;if(this.cancelled)return;if(this._canvas){if(p(vl,$l).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");p(vl,$l).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:a,transform:o,background:c}=this.params;this.gfx=new ju(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),p(this,Ao)&&(window.cancelAnimationFrame(p(this,Ao)),k(this,Ao,null)),p(vl,$l).delete(this._canvas),this.callback(t||new W_(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(this,Ao,window.requestAnimationFrame(()=>{k(this,Ao,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),p(vl,$l).delete(this._canvas),this.callback())))}};Ao=new WeakMap,$l=new WeakMap,D(vl,$l,new WeakSet);let EA=vl;const uV="4.4.168",hV="19fbc8998";function Xk(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function tf(i){return Math.max(0,Math.min(255,255*i))}class Yk{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=tf(t),[t,t,t]}static G_HTML([t]){const e=Xk(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(tf)}static RGB_HTML(t){return`#${t.map(Xk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[tf(1-Math.min(1,t+a)),tf(1-Math.min(1,n+a)),tf(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,o=1-e,c=1-n,u=Math.min(a,o,c);return["CMYK",a,o,c,u]}}class pD{static setupStorage(t,e,n,a,o){const c=a.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of n.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:o}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){var y,x;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,o=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:n});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const w=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=w}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const w=document.createTextNode(a.value);c.append(w),u&&Pf.shouldBuildText(a.name)&&f.push(w)}return{textDivs:f}}const g=[[a,-1,c]];for(;g.length>0;){const[w,A,S]=g.at(-1);if(A+1===w.children.length){g.pop();continue}const C=w.children[++g.at(-1)[1]];if(C===null)continue;const{name:T}=C;if(T==="#text"){const L=document.createTextNode(C.value);f.push(L),S.append(L);continue}const R=(y=C==null?void 0:C.attributes)!=null&&y.xmlns?document.createElementNS(C.attributes.xmlns,T):document.createElement(T);if(S.append(R),C.attributes&&this.setAttributes({html:R,element:C,storage:e,intent:o,linkService:n}),((x=C.children)==null?void 0:x.length)>0)g.push([C,-1,R]);else if(C.value){const L=document.createTextNode(C.value);u&&Pf.shouldBuildText(T)&&f.push(L),R.append(L)}}for(const w of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const kg=1e3,dV=9,_c=new WeakSet;function wa(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class fV{static create(t){switch(t.data.annotationType){case Je.LINK:return new gD(t);case Je.TEXT:return new pV(t);case Je.WIDGET:switch(t.data.fieldType){case"Tx":return new gV(t);case"Btn":return t.data.radioButton?new vD(t):t.data.checkBox?new yV(t):new vV(t);case"Ch":return new bV(t);case"Sig":return new mV(t)}return new Mc(t);case Je.POPUP:return new TA(t);case Je.FREETEXT:return new _D(t);case Je.LINE:return new wV(t);case Je.SQUARE:return new AV(t);case Je.CIRCLE:return new _V(t);case Je.POLYLINE:return new SD(t);case Je.CARET:return new EV(t);case Je.INK:return new ED(t);case Je.POLYGON:return new SV(t);case Je.HIGHLIGHT:return new CV(t);case Je.UNDERLINE:return new TV(t);case Je.SQUIGGLY:return new kV(t);case Je.STRIKEOUT:return new RV(t);case Je.STAMP:return new CD(t);case Je.FILEATTACHMENT:return new NV(t);default:return new Ve(t)}}}var Xl,uh,hh,Tp,CA;const oS=class oS{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){D(this,Tp);D(this,Xl,null);D(this,uh,!1);D(this,hh,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get hasPopupData(){return oS._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;p(this,Xl)||k(this,Xl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&M(this,Tp,CA).call(this,e),(n=p(this,hh))==null||n.popup.updateEdited(t)}resetEdited(){var t;p(this,Xl)&&(M(this,Tp,CA).call(this,p(this,Xl).rect),(t=p(this,hh))==null||t.popup.resetEdited(),k(this,Xl,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof Mc||(o.tabIndex=kg);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,e.popupRef&&o.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof TA){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=wa(e.rect);if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(S>0||C>0){const R=`calc(${S}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;c.borderRadius=R}else if(this instanceof vD){const R=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;c.borderRadius=R}switch(e.borderStyle.style){case Zd.SOLID:c.borderStyle="solid";break;case Zd.DASHED:c.borderStyle="dashed";break;case Zd.BEVELED:zt("Unimplemented border style: beveled");break;case Zd.INSET:zt("Unimplemented border style: inset");break;case Zd.UNDERLINE:c.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(k(this,uh,!0),c.borderColor=At.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):c.borderWidth=0}const f=At.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:y,pageX:x,pageY:w}=a.rawDims;c.left=`${100*(f[0]-x)/g}%`,c.top=`${100*(f[1]-w)/y}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(c.width=`${100*u/g}%`,c.height=`${100*d/y}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims,{width:o,height:c}=wa(this.data.rect);let u,d;t%180===0?(u=100*o/n,d=100*c/a):(u=100*c/n,d=100*o/a),e.style.width=`${u}%`,e.style.height=`${d}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const o=a.detail[e],c=o[0],u=o.slice(1);a.target.style[n]=Yk[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:Yk[`${c}_rgb`](u)})};return ne(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const o=t[a]||n[a];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,o]of Object.entries(e)){const c=n[a];if(c){const u={detail:{[a]:o},target:t};c(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,C,T,R]=t.subarray(2,6);if(a===S&&o===C&&e===T&&n===R)return}const{style:c}=this.container;let u;if(p(this,uh)){const{borderColor:S,borderWidth:C}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=a-e,f=o-n,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const x=g.createElement("defs");y.append(x);const w=g.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),x.append(w);for(let S=2,C=t.length;S<C;S+=8){const T=t[S],R=t[S+1],L=t[S+2],j=t[S+3],I=g.createElement("rect"),U=(L-e)/d,O=(o-R)/f,H=(T-L)/d,Z=(R-j)/f;I.setAttribute("x",U),I.setAttribute("y",O),I.setAttribute("width",H),I.setAttribute("height",Z),w.append(I),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${O}" width="${H}" height="${Z}"/>`)}p(this,uh)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const n=k(this,hh,new TA({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){be("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:c,exportValues:u}of a){if(o===-1||c===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!_c.has(f)){zt(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:d,domElement:f})}return n}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==e&&_c.has(a)&&n.push({id:c,exportValue:o,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Xl=new WeakMap,uh=new WeakMap,hh=new WeakMap,Tp=new WeakSet,CA=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...t);const{width:f,height:g}=wa(t);e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*f/o}%`,e.height=`${100*g/c}%`):this.setRotation(a)};let Ve=oS;var zs,pl,mD,yD;class gD extends Ve{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});D(this,zs);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(a,e.action),o=!0):e.attachment?(M(this,zs,mD).call(this,a,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(M(this,zs,yD).call(this,a,e.setOCGState),o=!0):e.dest?(this._bindLink(a,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),o=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(a,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(a),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&M(this,zs,pl).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),M(this,zs,pl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const c=a.get(o);c&&(e[c]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),M(this,zs,pl).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),M(this,zs,pl).call(this),!this._fieldObjects){zt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var y;a==null||a();const{fields:o,refs:c,include:u}=n,d=[];if(o.length!==0||c.length!==0){const x=new Set(c);for(const w of o){const A=this._fieldObjects[w]||[];for(const{id:S}of A)x.add(S)}for(const w of Object.values(this._fieldObjects))for(const A of w)x.has(A.id)===u&&d.push(A)}else for(const x of Object.values(this._fieldObjects))d.push(...x);const f=this.annotationStorage,g=[];for(const x of d){const{id:w}=x;switch(g.push(w),x.type){case"text":{const S=x.defaultValue||"";f.setValue(w,{value:S});break}case"checkbox":case"radiobutton":{const S=x.defaultValue===x.exportValues;f.setValue(w,{value:S});break}case"combobox":case"listbox":{const S=x.defaultValue||"";f.setValue(w,{value:S});break}default:continue}const A=document.querySelector(`[data-element-id="${w}"]`);if(A){if(!_c.has(A)){zt(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}zs=new WeakSet,pl=function(){this.container.setAttribute("data-internal-link","")},mD=function(e,n,a=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,a),!1},M(this,zs,pl).call(this)},yD=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),M(this,zs,pl).call(this)};class pV extends Ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Mc extends Ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return fs.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,o){n.includes("mouse")?t.addEventListener(n,c=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{var u;if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}}))})}_setEventListeners(t,e,n,a){var o,c,u;for(const[d,f]of n)(f==="Action"||(o=this.data.actions)!=null&&o[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,f,a),f==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":At.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||dV,o=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(hw*a))||1,y=f/g;c=Math.min(a,d(y/hw))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,d(f/hw))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=At.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class gV extends Mc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),o.setValue(c.id,{[a]:n})}render(){var a,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let u=c.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let f=c.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const g={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),_c.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=kg,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",x=>{t.setValue(e,{value:x.target.value}),this.setPropertyOnSiblings(n,"value",x.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",x=>{const w=this.data.defaultFieldValue??"";n.value=g.userValue=w,g.formattedValue=null});let y=x=>{const{formattedValue:w}=g;w!=null&&(x.target.value=w),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{var S;if(g.focused)return;const{target:A}=w;g.userValue&&(A.value=g.userValue),g.lastCommittedValue=A.value,g.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const A={value(S){g.userValue=S.detail.value??"",t.setValue(e,{value:g.userValue.toString()}),S.target.value=g.userValue},formattedValue(S){const{formattedValue:C}=S.detail;g.formattedValue=C,C!=null&&S.target!==document.activeElement&&(S.target.value=C),t.setValue(e,{formattedValue:C})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var L;const{charLimit:C}=S.detail,{target:T}=S;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let R=g.userValue;!R||R.length<=C||(R=R.slice(0,C),T.value=g.userValue=R,t.setValue(e,{value:R}),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(A,w)}),n.addEventListener("keydown",w=>{var C;g.commitKey=1;let A=-1;if(w.key==="Escape"?A=0:w.key==="Enter"&&!this.data.multiLine?A=2:w.key==="Tab"&&(g.commitKey=3),A===-1)return;const{value:S}=w.target;g.lastCommittedValue!==S&&(g.lastCommittedValue=S,g.userValue=S,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:A,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const x=y;y=null,n.addEventListener("blur",w=>{var S,C;if(!g.focused||!w.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(g.focused=!1);const{value:A}=w.target;g.userValue=A,g.lastCommittedValue!==A&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:g.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}})),x(w)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",w=>{var I;g.lastCommittedValue=null;const{data:A,target:S}=w,{value:C,selectionStart:T,selectionEnd:R}=S;let L=T,j=R;switch(w.inputType){case"deleteWordBackward":{const U=C.substring(0,T).match(/\w*[^\w]*$/);U&&(L-=U[0].length);break}case"deleteWordForward":{const U=C.substring(T).match(/^[^\w]*\w*/);U&&(j+=U[0].length);break}case"deleteContentBackward":T===R&&(L-=1);break;case"deleteContentForward":T===R&&(j+=1);break}w.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:A||"",willCommit:!1,selStart:L,selEnd:j}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class mV extends Mc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class yV extends Mc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return _c.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=kg,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class vD extends Mc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(_c.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=kg,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const x=g&&y.id===n;y.domElement&&(y.domElement.checked=x),t.setValue(y.id,{value:x})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class vV extends gD{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class bV extends Mc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");_c.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=kg;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const x of a.options)x.selected=x.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,n.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),c=()=>{g.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=g=>{const y=g?"value":"textContent",{options:x,multiple:w}=a;return w?Array.prototype.filter.call(x,A=>A.selected).map(A=>A[y]):x.selectedIndex===-1?null:x[x.selectedIndex][y]};let d=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(x){c==null||c();const w=x.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const S of a.options)S.selected=A.has(S.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(x){a.multiple=!0},remove(x){const w=a.options,A=x.detail.remove;w[A].selected=!1,a.remove(A),w.length>0&&Array.prototype.findIndex.call(w,C=>C.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:u(!0),items:f(x)}),d=u(!1)},clear(x){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(x){const{index:w,displayValue:A,exportValue:S}=x.detail.insert,C=a.children[w],T=document.createElement("option");T.textContent=A,T.value=S,C?C.before(T):a.append(T),t.setValue(e,{value:u(!0),items:f(x)}),d=u(!1)},items(x){const{items:w}=x.detail;for(;a.length!==0;)a.remove(0);for(const A of w){const{displayValue:S,exportValue:C}=A,T=document.createElement("option");T.textContent=S,T.value=C,a.append(T)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(x)}),d=u(!1)},indices(x){const w=new Set(x.detail.indices);for(const A of x.target.options)A.selected=w.has(A.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{var w;const y=u(!0),x=u(!1);t.setValue(e,{value:y}),g.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:x,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class TA extends Ve{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Ve._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new xV({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${bM}${n}`).join(",")),this.container}}var dh,Lv,Ov,fh,Yl,ze,ra,Kl,kp,Rp,ph,aa,Si,oa,Np,la,Mp,Wl,Ql,xe,Ly,kA,bD,xD,wD,AD,Oy,jy,RA;class xV{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:f,parentRect:g,open:y}){D(this,xe);D(this,dh,M(this,xe,wD).bind(this));D(this,Lv,M(this,xe,RA).bind(this));D(this,Ov,M(this,xe,jy).bind(this));D(this,fh,M(this,xe,Oy).bind(this));D(this,Yl,null);D(this,ze,null);D(this,ra,null);D(this,Kl,null);D(this,kp,null);D(this,Rp,null);D(this,ph,null);D(this,aa,!1);D(this,Si,null);D(this,oa,null);D(this,Np,null);D(this,la,null);D(this,Mp,null);D(this,Wl,null);D(this,Ql,!1);var x;k(this,ze,t),k(this,Mp,a),k(this,ra,c),k(this,la,u),k(this,Rp,d),k(this,Yl,e),k(this,Np,f),k(this,ph,g),k(this,kp,n),k(this,Kl,SM.toDateObject(o)),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup());for(const w of this.trigger)w.addEventListener("click",p(this,fh)),w.addEventListener("mouseenter",p(this,Ov)),w.addEventListener("mouseleave",p(this,Lv)),w.classList.add("popupTriggerArea");for(const w of n)(x=w.container)==null||x.addEventListener("keydown",p(this,dh));p(this,ze).hidden=!0,y&&M(this,xe,Oy).call(this)}render(){if(p(this,Si))return;const t=k(this,Si,document.createElement("div"));if(t.className="popup",p(this,Yl)){const o=t.style.outlineColor=At.makeHexColor(...p(this,Yl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=At.makeHexColor(...p(this,Yl).map(u=>Math.floor(.7*(255-u)+u)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=p(this,Mp),t.append(e),p(this,Kl)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),o.setAttribute("data-l10n-args",JSON.stringify({date:p(this,Kl).toLocaleDateString(),time:p(this,Kl).toLocaleTimeString()})),e.append(o)}const a=p(this,xe,Ly);if(a)pD.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(p(this,ra));t.append(o)}p(this,ze).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let o=0,c=a.length;o<c;++o){const u=a[o];n.append(document.createTextNode(u)),o<c-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;p(this,Wl)||k(this,Wl,{contentsObj:p(this,ra),richText:p(this,la)}),t&&k(this,oa,null),e&&(k(this,la,M(this,xe,xD).call(this,e)),k(this,ra,null)),(n=p(this,Si))==null||n.remove(),k(this,Si,null)}resetEdited(){var t;p(this,Wl)&&({contentsObj:Ss(this,ra)._,richText:Ss(this,la)._}=p(this,Wl),k(this,Wl,null),(t=p(this,Si))==null||t.remove(),k(this,Si,null),k(this,oa,null))}forceHide(){k(this,Ql,this.isVisible),p(this,Ql)&&(p(this,ze).hidden=!0)}maybeShow(){p(this,Ql)&&(p(this,Si)||M(this,xe,jy).call(this),k(this,Ql,!1),p(this,ze).hidden=!1)}get isVisible(){return p(this,ze).hidden===!1}}dh=new WeakMap,Lv=new WeakMap,Ov=new WeakMap,fh=new WeakMap,Yl=new WeakMap,ze=new WeakMap,ra=new WeakMap,Kl=new WeakMap,kp=new WeakMap,Rp=new WeakMap,ph=new WeakMap,aa=new WeakMap,Si=new WeakMap,oa=new WeakMap,Np=new WeakMap,la=new WeakMap,Mp=new WeakMap,Wl=new WeakMap,Ql=new WeakMap,xe=new WeakSet,Ly=function(){const t=p(this,la),e=p(this,ra);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&p(this,la).html||null},kA=function(){var t,e,n;return((n=(e=(t=p(this,xe,Ly))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},bD=function(){var t,e,n;return((n=(e=(t=p(this,xe,Ly))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},xD=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:p(this,xe,bD),fontSize:p(this,xe,kA)?`calc(${p(this,xe,kA)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return n},wD=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&p(this,aa))&&M(this,xe,Oy).call(this)},AD=function(){if(p(this,oa)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:o}}}=p(this,Rp);let c=!!p(this,ph),u=c?p(this,ph):p(this,Np);for(const A of p(this,kp))if(!u||At.intersect(A.data.rect,u)!==null){u=A.data.rect,c=!0;break}const d=At.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=c?u[2]-u[0]+5:0,y=d[0]+g,x=d[1];k(this,oa,[100*(y-a)/e,100*(x-o)/n]);const{style:w}=p(this,ze);w.left=`${p(this,oa)[0]}%`,w.top=`${p(this,oa)[1]}%`},Oy=function(){k(this,aa,!p(this,aa)),p(this,aa)?(M(this,xe,jy).call(this),p(this,ze).addEventListener("click",p(this,fh)),p(this,ze).addEventListener("keydown",p(this,dh))):(M(this,xe,RA).call(this),p(this,ze).removeEventListener("click",p(this,fh)),p(this,ze).removeEventListener("keydown",p(this,dh)))},jy=function(){p(this,Si)||this.render(),this.isVisible?p(this,aa)&&p(this,ze).classList.add("focused"):(M(this,xe,AD).call(this),p(this,ze).hidden=!1,p(this,ze).style.zIndex=parseInt(p(this,ze).style.zIndex)+1e3)},RA=function(){p(this,ze).classList.remove("focused"),!(p(this,aa)||!this.isVisible)&&(p(this,ze).hidden=!0,p(this,ze).style.zIndex=parseInt(p(this,ze).style.zIndex)-1e3)};class _D extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Jt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Dp;class wV extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});D(this,Dp,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:a}=wa(e.rect),o=this.svgFactory.create(n,a,!0),c=k(this,Dp,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Dp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dp=new WeakMap;var Lp;class AV extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});D(this,Lp,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:a}=wa(e.rect),o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,u=k(this,Lp,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",n-c),u.setAttribute("height",a-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Lp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lp=new WeakMap;var Op;class _V extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});D(this,Op,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:a}=wa(e.rect),o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,u=k(this,Op,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",a/2),u.setAttribute("rx",n/2-c/2),u.setAttribute("ry",a/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Op)}addHighlightArea(){this.container.classList.add("highlightArea")}}Op=new WeakMap;var jp;class SD extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});D(this,jp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:o}}=this;if(!n)return this.container;const{width:c,height:u}=wa(e),d=this.svgFactory.create(c,u,!0);let f=[];for(let y=0,x=n.length;y<x;y+=2){const w=n[y]-e[0],A=e[3]-n[y+1];f.push(`${w},${A}`)}f=f.join(" ");const g=k(this,jp,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",f),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,jp)}addHighlightArea(){this.container.classList.add("highlightArea")}}jp=new WeakMap;class SV extends SD{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class EV extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Pp;class ED extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});D(this,Pp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Jt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:a,popupRef:o}}=this,{width:c,height:u}=wa(e),d=this.svgFactory.create(c,u,!0);for(const f of n){let g=[];for(let x=0,w=f.length;x<w;x+=2){const A=f[x]-e[0],S=e[3]-f[x+1];g.push(`${A},${S}`)}g=g.join(" ");const y=this.svgFactory.createElement(this.svgElementName);p(this,Pp).push(y),y.setAttribute("points",g),y.setAttribute("stroke-width",a.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),!o&&this.hasPopupData&&this._createPopup(),d.append(y)}return this.container.append(d),this.container}getElementsToTriggerPopup(){return p(this,Pp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pp=new WeakMap;class CV extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class TV extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class kV extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class RV extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class CD extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Fp,Ip,NA;class NV extends Ve{constructor(e){var a;super(e,{isRenderable:!0});D(this,Ip);D(this,Fp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",M(this,Ip,NA).bind(this)),k(this,Fp,a);const{isMac:o}=fs.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&M(this,Ip,NA).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return p(this,Fp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fp=new WeakMap,Ip=new WeakSet,NA=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var zp,Zl,gh,Ec,TD,MA,oR;let MV=(oR=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:o,viewport:c}){D(this,Ec);D(this,zp,null);D(this,Zl,null);D(this,gh,new Map);this.div=t,k(this,zp,e),k(this,Zl,n),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a}async render(t){var c;const{annotations:e}=t,n=this.div;wc(n,this.viewport);const a=new Map,o={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new K_,annotationStorage:t.annotationStorage||new tS,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===Je.POPUP;if(d){const y=a.get(u.id);if(!y)continue;o.elements=y}else{const{width:y,height:x}=wa(u.rect);if(y<=0||x<=0)continue}o.data=u;const f=fV.create(o);if(!f.isRenderable)continue;if(!d&&u.popupRef){const y=a.get(u.popupRef);y?y.push(f):a.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),M(this,Ec,TD).call(this,g,u.id),f.annotationEditorType>0&&(p(this,gh).set(f.data.id,f),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(f))}M(this,Ec,MA).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,wc(e,{rotation:t.rotation}),M(this,Ec,MA).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(p(this,gh).values())}getEditableAnnotation(t){return p(this,gh).get(t)}},zp=new WeakMap,Zl=new WeakMap,gh=new WeakMap,Ec=new WeakSet,TD=function(t,e){var a;const n=t.firstChild||t;n.id=`${bM}${e}`,this.div.append(t),(a=p(this,zp))==null||a.moveElementInDOM(this.div,t,n,!1)},MA=function(){if(!p(this,Zl))return;const t=this.div;for(const[e,n]of p(this,Zl)){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;n.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):a.append(n)}p(this,Zl).clear()},oR);const cy=/\r\n?|\n/g;var Up,Bp,Hp,Vp,qp,Ei,Ds,Gp,Ls,mh,We,kD,RD,ND,Py,_a,Fy,Iy,MD,LA,DD;const Ee=class Ee extends pe{constructor(e){super({...e,name:"freeTextEditor"});D(this,We);D(this,Up,this.editorDivBlur.bind(this));D(this,Bp,this.editorDivFocus.bind(this));D(this,Hp,this.editorDivInput.bind(this));D(this,Vp,this.editorDivKeydown.bind(this));D(this,qp,this.editorDivPaste.bind(this));D(this,Ei);D(this,Ds,"");D(this,Gp,`${this.id}-editor`);D(this,Ls);D(this,mh,null);k(this,Ei,e.color||Ee._defaultColor||pe._defaultLineColor),k(this,Ls,e.fontSize||Ee._defaultFontSize)}static get _keyboardManager(){const e=Ee.prototype,n=c=>c.isEmpty(),a=Ac.TRANSLATE_SMALL,o=Ac.TRANSLATE_BIG;return ne(this,"_keyboardManager",new Cg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){pe.initialize(e,n,{strings:["pdfjs-free-text-default-content"]});const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Mt.FREETEXT_SIZE:Ee._defaultFontSize=n;break;case Mt.FREETEXT_COLOR:Ee._defaultColor=n;break}}updateParams(e,n){switch(e){case Mt.FREETEXT_SIZE:M(this,We,kD).call(this,n);break;case Mt.FREETEXT_COLOR:M(this,We,RD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,Ee._defaultFontSize],[Mt.FREETEXT_COLOR,Ee._defaultColor||pe._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,p(this,Ls)],[Mt.FREETEXT_COLOR,p(this,Ei)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ee._internalPadding*e,-(Ee._internalPadding+p(this,Ls))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Jt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",p(this,Vp),{signal:e}),this.editorDiv.addEventListener("focus",p(this,Bp),{signal:e}),this.editorDiv.addEventListener("blur",p(this,Up),{signal:e}),this.editorDiv.addEventListener("input",p(this,Hp),{signal:e}),this.editorDiv.addEventListener("paste",p(this,qp),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",p(this,Gp)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",p(this,Vp)),this.editorDiv.removeEventListener("focus",p(this,Bp)),this.editorDiv.removeEventListener("blur",p(this,Up)),this.editorDiv.removeEventListener("input",p(this,Hp)),this.editorDiv.removeEventListener("paste",p(this,qp)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=p(this,Ds),n=k(this,Ds,M(this,We,ND).call(this).trimEnd());if(e===n)return;const a=o=>{if(k(this,Ds,o),!o){this.remove();return}M(this,We,Iy).call(this),this._uiManager.rebuild(this),M(this,We,Py).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),M(this,We,Py).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ee._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",p(this,Gp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),pe._l10nPromise.get("pdfjs-free-text-default-content").then(o=>{var c;return(c=this.editorDiv)==null?void 0:c.setAttribute("default-content",o)}),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${p(this,Ls)}px * var(--scale-factor))`,a.color=p(this,Ei),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),dv(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=p(this,mh);let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[g,y]=this.pageDimensions,[x,w]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=e+(u[0]-x)/g,S=n+this.height-(u[1]-w)/y;break;case 90:A=e+(u[0]-x)/g,S=n-(u[1]-w)/y,[d,f]=[f,-d];break;case 180:A=e-this.width+(u[0]-x)/g,S=n-(u[1]-w)/y,[d,f]=[-d,-f];break;case 270:A=e+(u[0]-x-this.height*y)/g,S=n+(u[1]-w-this.width*g)/y,[d,f]=[-f,d];break}this.setAt(A*o,S*c,d,f)}else this.setAt(e*o,n*c,this.width*o,this.height*c);M(this,We,Iy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var A,S,C;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const o=M(A=Ee,_a,LA).call(A,n.getData("text")||"").replaceAll(cy,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:d,startOffset:f}=u,g=[],y=[];if(d.nodeType===Node.TEXT_NODE){const T=d.parentElement;if(y.push(d.nodeValue.slice(f).replaceAll(cy,"")),T!==this.editorDiv){let R=g;for(const L of this.editorDiv.childNodes){if(L===T){R=y;continue}R.push(M(S=Ee,_a,Fy).call(S,L))}}g.push(d.nodeValue.slice(0,f).replaceAll(cy,""))}else if(d===this.editorDiv){let T=g,R=0;for(const L of this.editorDiv.childNodes)R++===f&&(T=y),T.push(M(C=Ee,_a,Fy).call(C,L))}k(this,Ds,`${g.join(`
`)}${o}${y.join(`
`)}`),M(this,We,Iy).call(this);const x=new Range;let w=g.reduce((T,R)=>T+R.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const R=T.nodeValue.length;if(w<=R){x.setStart(T,w),x.setEnd(T,w);break}w-=R}c.removeAllRanges(),c.addRange(x)}get contentDiv(){return this.editorDiv}static deserialize(e,n,a){var u;let o=null;if(e instanceof _D){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:g,rotation:y,id:x},textContent:w,textPosition:A,parent:{page:{pageNumber:S}}}=e;if(!w||w.length===0)return null;o=e={annotationType:Jt.FREETEXT,color:Array.from(f),fontSize:d,value:w.join(`
`),position:A,pageIndex:S-1,rect:g.slice(0),rotation:y,id:x,deleted:!1}}const c=super.deserialize(e,n,a);return k(c,Ls,e.fontSize),k(c,Ei,At.makeHexColor(...e.color)),k(c,Ds,M(u=Ee,_a,LA).call(u,e.value)),c.annotationElementId=e.id||null,k(c,mh,o),c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=Ee._internalPadding*this.parentScale,a=this.getRect(n,n),o=pe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:p(this,Ei)),c={annotationType:Jt.FREETEXT,color:o,fontSize:p(this,Ls),value:M(this,We,MD).call(this),pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!M(this,We,DD).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:a}=n;a.fontSize=`calc(${p(this,Ls)}px * var(--scale-factor))`,a.color=p(this,Ei),n.replaceChildren();for(const c of p(this,Ds).split(`
`)){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),n.append(u)}const o=Ee._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:p(this,Ds)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Up=new WeakMap,Bp=new WeakMap,Hp=new WeakMap,Vp=new WeakMap,qp=new WeakMap,Ei=new WeakMap,Ds=new WeakMap,Gp=new WeakMap,Ls=new WeakMap,mh=new WeakMap,We=new WeakSet,kD=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-p(this,Ls))*this.parentScale),k(this,Ls,o),M(this,We,Py).call(this)},a=p(this,Ls);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},RD=function(e){const n=o=>{k(this,Ei,this.editorDiv.style.color=o)},a=p(this,Ei);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ND=function(){var n;const e=[];this.editorDiv.normalize();for(const a of this.editorDiv.childNodes)e.push(M(n=Ee,_a,Fy).call(n,a));return e.join(`
`)},Py=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,u=c.style.display,d=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),a=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},_a=new WeakSet,Fy=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(cy,"")},Iy=function(){if(this.editorDiv.replaceChildren(),!!p(this,Ds))for(const e of p(this,Ds).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},MD=function(){return p(this,Ds).replaceAll(""," ")},LA=function(e){return e.replaceAll(" ","")},DD=function(e){const{value:n,fontSize:a,color:o,pageIndex:c}=p(this,mh);return this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((u,d)=>u!==o[d])||e.pageIndex!==c},D(Ee,_a),Dt(Ee,"_freeTextDefaultContent",""),Dt(Ee,"_internalPadding",0),Dt(Ee,"_defaultColor",null),Dt(Ee,"_defaultFontSize",10),Dt(Ee,"_type","freetext"),Dt(Ee,"_editorType",Jt.FREETEXT);let DA=Ee;var $p,_o,Ci,ts,LD,zy,OD,jD,jA;class OA{constructor(t,e=0,n=0,a=!0){D(this,ts);D(this,$p);D(this,_o,[]);D(this,Ci,[]);let o=1/0,c=-1/0,u=1/0,d=-1/0;const f=10**-4;for(const{x:C,y:T,width:R,height:L}of t){const j=Math.floor((C-e)/f)*f,I=Math.ceil((C+R+e)/f)*f,U=Math.floor((T-e)/f)*f,O=Math.ceil((T+L+e)/f)*f,H=[j,U,O,!0],Z=[I,U,O,!1];p(this,_o).push(H,Z),o=Math.min(o,j),c=Math.max(c,I),u=Math.min(u,U),d=Math.max(d,O)}const g=c-o+2*n,y=d-u+2*n,x=o-n,w=u-n,A=p(this,_o).at(a?-1:-2),S=[A[0],A[2]];for(const C of p(this,_o)){const[T,R,L]=C;C[0]=(T-x)/g,C[1]=(R-w)/y,C[2]=(L-w)/y}k(this,$p,{x,y:w,width:g,height:y,lastPoint:S})}getOutlines(){p(this,_o).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of p(this,_o))e[3]?(t.push(...M(this,ts,jA).call(this,e)),M(this,ts,OD).call(this,e)):(M(this,ts,jD).call(this,e),t.push(...M(this,ts,jA).call(this,e)));return M(this,ts,LD).call(this,t)}}$p=new WeakMap,_o=new WeakMap,Ci=new WeakMap,ts=new WeakSet,LD=function(t){const e=[],n=new Set;for(const c of t){const[u,d,f]=c;e.push([u,d,c],[u,f,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const a=[];let o;for(;n.size>0;){const c=n.values().next().value;let[u,d,f,g,y]=c;n.delete(c);let x=u,w=d;for(o=[u,f],a.push(o);;){let A;if(n.has(g))A=g;else if(n.has(y))A=y;else break;n.delete(A),[u,d,f,g,y]=A,x!==u&&(o.push(x,w,u,w===d?d:f),x=u),w=w===d?f:d}o.push(x,w)}return new DV(a,p(this,$p))},zy=function(t){const e=p(this,Ci);let n=0,a=e.length-1;for(;n<=a;){const o=n+a>>1,c=e[o][0];if(c===t)return o;c<t?n=o+1:a=o-1}return a+1},OD=function([,t,e]){const n=M(this,ts,zy).call(this,t);p(this,Ci).splice(n,0,[t,e])},jD=function([,t,e]){const n=M(this,ts,zy).call(this,t);for(let a=n;a<p(this,Ci).length;a++){const[o,c]=p(this,Ci)[a];if(o!==t)break;if(o===t&&c===e){p(this,Ci).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[o,c]=p(this,Ci)[a];if(o!==t)break;if(o===t&&c===e){p(this,Ci).splice(a,1);return}}},jA=function(t){const[e,n,a]=t,o=[[e,n,a]],c=M(this,ts,zy).call(this,a);for(let u=0;u<c;u++){const[d,f]=p(this,Ci)[u];for(let g=0,y=o.length;g<y;g++){const[,x,w]=o[g];if(!(f<=x||w<=d)){if(x>=d){if(w>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,w>f&&o.push([e,f,w])}}}return o};class PD{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof FA}}var Xp,yh;class DV extends PD{constructor(e,n){super();D(this,Xp);D(this,yh);k(this,yh,e),k(this,Xp,n)}toSVGPath(){const e=[];for(const n of p(this,yh)){let[a,o]=n;e.push(`M${a} ${o}`);for(let c=2;c<n.length;c+=2){const u=n[c],d=n[c+1];u===a?(e.push(`V${d}`),o=d):d===o&&(e.push(`H${u}`),a=u)}e.push("Z")}return e.join(" ")}serialize([e,n,a,o],c){const u=[],d=a-e,f=o-n;for(const g of p(this,yh)){const y=new Array(g.length);for(let x=0;x<g.length;x+=2)y[x]=e+g[x]*d,y[x+1]=o-g[x+1]*f;u.push(y)}return u}get box(){return p(this,Xp)}}Xp=new WeakMap,yh=new WeakMap;var Zi,ca,vh,bh,Ji,Wt,Jl,tc,Yp,Kp,xh,wh,So,Wp,jv,Pv,Qp,PA;const Gr=class Gr{constructor({x:t,y:e},n,a,o,c,u=0){D(this,Qp);D(this,Zi);D(this,ca,[]);D(this,vh);D(this,bh);D(this,Ji,[]);D(this,Wt,new Float64Array(18));D(this,Jl);D(this,tc);D(this,Yp);D(this,Kp);D(this,xh);D(this,wh);D(this,So,[]);k(this,Zi,n),k(this,wh,o*a),k(this,bh,c),p(this,Wt).set([NaN,NaN,NaN,NaN,t,e],6),k(this,vh,u),k(this,Kp,p(Gr,Wp)*a),k(this,Yp,p(Gr,Pv)*a),k(this,xh,a),p(this,So).push(t,e)}get free(){return!0}isEmpty(){return isNaN(p(this,Wt)[8])}add({x:t,y:e}){var Z;k(this,Jl,t),k(this,tc,e);const[n,a,o,c]=p(this,Zi);let[u,d,f,g]=p(this,Wt).subarray(8,12);const y=t-f,x=e-g,w=Math.hypot(y,x);if(w<p(this,Yp))return!1;const A=w-p(this,Kp),S=A/w,C=S*y,T=S*x;let R=u,L=d;u=f,d=g,f+=C,g+=T,(Z=p(this,So))==null||Z.push(t,e);const j=-T/A,I=C/A,U=j*p(this,wh),O=I*p(this,wh);return p(this,Wt).set(p(this,Wt).subarray(2,8),0),p(this,Wt).set([f+U,g+O],4),p(this,Wt).set(p(this,Wt).subarray(14,18),12),p(this,Wt).set([f-U,g-O],16),isNaN(p(this,Wt)[6])?(p(this,Ji).length===0&&(p(this,Wt).set([u+U,d+O],2),p(this,Ji).push(NaN,NaN,NaN,NaN,(u+U-n)/o,(d+O-a)/c),p(this,Wt).set([u-U,d-O],14),p(this,ca).push(NaN,NaN,NaN,NaN,(u-U-n)/o,(d-O-a)/c)),p(this,Wt).set([R,L,u,d,f,g],6),!this.isEmpty()):(p(this,Wt).set([R,L,u,d,f,g],6),Math.abs(Math.atan2(L-d,R-u)-Math.atan2(T,C))<Math.PI/2?([u,d,f,g]=p(this,Wt).subarray(2,6),p(this,Ji).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((d+g)/2-a)/c),[u,d,R,L]=p(this,Wt).subarray(14,18),p(this,ca).push(NaN,NaN,NaN,NaN,((R+u)/2-n)/o,((L+d)/2-a)/c),!0):([R,L,u,d,f,g]=p(this,Wt).subarray(0,6),p(this,Ji).push(((R+5*u)/6-n)/o,((L+5*d)/6-a)/c,((5*u+f)/6-n)/o,((5*d+g)/6-a)/c,((u+f)/2-n)/o,((d+g)/2-a)/c),[f,g,u,d,R,L]=p(this,Wt).subarray(12,18),p(this,ca).push(((R+5*u)/6-n)/o,((L+5*d)/6-a)/c,((5*u+f)/6-n)/o,((5*d+g)/6-a)/c,((u+f)/2-n)/o,((d+g)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=p(this,Ji),e=p(this,ca),n=p(this,Wt).subarray(4,6),a=p(this,Wt).subarray(16,18),[o,c,u,d]=p(this,Zi),[f,g,y,x]=M(this,Qp,PA).call(this);if(isNaN(p(this,Wt)[6])&&!this.isEmpty())return`M${(p(this,Wt)[2]-o)/u} ${(p(this,Wt)[3]-c)/d} L${(p(this,Wt)[4]-o)/u} ${(p(this,Wt)[5]-c)/d} L${f} ${g} L${y} ${x} L${(p(this,Wt)[16]-o)/u} ${(p(this,Wt)[17]-c)/d} L${(p(this,Wt)[14]-o)/u} ${(p(this,Wt)[15]-c)/d} Z`;const w=[];w.push(`M${t[4]} ${t[5]}`);for(let A=6;A<t.length;A+=6)isNaN(t[A])?w.push(`L${t[A+4]} ${t[A+5]}`):w.push(`C${t[A]} ${t[A+1]} ${t[A+2]} ${t[A+3]} ${t[A+4]} ${t[A+5]}`);w.push(`L${(n[0]-o)/u} ${(n[1]-c)/d} L${f} ${g} L${y} ${x} L${(a[0]-o)/u} ${(a[1]-c)/d}`);for(let A=e.length-6;A>=6;A-=6)isNaN(e[A])?w.push(`L${e[A+4]} ${e[A+5]}`):w.push(`C${e[A]} ${e[A+1]} ${e[A+2]} ${e[A+3]} ${e[A+4]} ${e[A+5]}`);return w.push(`L${e[4]} ${e[5]} Z`),w.join(" ")}getOutlines(){var T;const t=p(this,Ji),e=p(this,ca),n=p(this,Wt),a=n.subarray(4,6),o=n.subarray(16,18),[c,u,d,f]=p(this,Zi),g=new Float64Array((((T=p(this,So))==null?void 0:T.length)??0)+2);for(let R=0,L=g.length-2;R<L;R+=2)g[R]=(p(this,So)[R]-c)/d,g[R+1]=(p(this,So)[R+1]-u)/f;g[g.length-2]=(p(this,Jl)-c)/d,g[g.length-1]=(p(this,tc)-u)/f;const[y,x,w,A]=M(this,Qp,PA).call(this);if(isNaN(n[6])&&!this.isEmpty()){const R=new Float64Array(36);return R.set([NaN,NaN,NaN,NaN,(n[2]-c)/d,(n[3]-u)/f,NaN,NaN,NaN,NaN,(n[4]-c)/d,(n[5]-u)/f,NaN,NaN,NaN,NaN,y,x,NaN,NaN,NaN,NaN,w,A,NaN,NaN,NaN,NaN,(n[16]-c)/d,(n[17]-u)/f,NaN,NaN,NaN,NaN,(n[14]-c)/d,(n[15]-u)/f],0),new FA(R,g,p(this,Zi),p(this,xh),p(this,vh),p(this,bh))}const S=new Float64Array(p(this,Ji).length+24+p(this,ca).length);let C=t.length;for(let R=0;R<C;R+=2){if(isNaN(t[R])){S[R]=S[R+1]=NaN;continue}S[R]=t[R],S[R+1]=t[R+1]}S.set([NaN,NaN,NaN,NaN,(a[0]-c)/d,(a[1]-u)/f,NaN,NaN,NaN,NaN,y,x,NaN,NaN,NaN,NaN,w,A,NaN,NaN,NaN,NaN,(o[0]-c)/d,(o[1]-u)/f],C),C+=24;for(let R=e.length-6;R>=6;R-=6)for(let L=0;L<6;L+=2){if(isNaN(e[R+L])){S[C]=S[C+1]=NaN,C+=2;continue}S[C]=e[R+L],S[C+1]=e[R+L+1],C+=2}return S.set([NaN,NaN,NaN,NaN,e[4],e[5]],C),new FA(S,g,p(this,Zi),p(this,xh),p(this,vh),p(this,bh))}};Zi=new WeakMap,ca=new WeakMap,vh=new WeakMap,bh=new WeakMap,Ji=new WeakMap,Wt=new WeakMap,Jl=new WeakMap,tc=new WeakMap,Yp=new WeakMap,Kp=new WeakMap,xh=new WeakMap,wh=new WeakMap,So=new WeakMap,Wp=new WeakMap,jv=new WeakMap,Pv=new WeakMap,Qp=new WeakSet,PA=function(){const t=p(this,Wt).subarray(4,6),e=p(this,Wt).subarray(16,18),[n,a,o,c]=p(this,Zi);return[(p(this,Jl)+(t[0]-e[0])/2-n)/o,(p(this,tc)+(t[1]-e[1])/2-a)/c,(p(this,Jl)+(e[0]-t[0])/2-n)/o,(p(this,tc)+(e[1]-t[1])/2-a)/c]},D(Gr,Wp,8),D(Gr,jv,2),D(Gr,Pv,p(Gr,Wp)+p(Gr,jv));let mv=Gr;var Ah,ec,ua,Zp,Os,Jp,He,ps,df,ff,FD;class FA extends PD{constructor(e,n,a,o,c,u){super();D(this,ps);D(this,Ah);D(this,ec,null);D(this,ua);D(this,Zp);D(this,Os);D(this,Jp);D(this,He);k(this,He,e),k(this,Os,n),k(this,Ah,a),k(this,Jp,o),k(this,ua,c),k(this,Zp,u),M(this,ps,FD).call(this,u);const{x:d,y:f,width:g,height:y}=p(this,ec);for(let x=0,w=e.length;x<w;x+=2)e[x]=(e[x]-d)/g,e[x+1]=(e[x+1]-f)/y;for(let x=0,w=n.length;x<w;x+=2)n[x]=(n[x]-d)/g,n[x+1]=(n[x+1]-f)/y}toSVGPath(){const e=[`M${p(this,He)[4]} ${p(this,He)[5]}`];for(let n=6,a=p(this,He).length;n<a;n+=6){if(isNaN(p(this,He)[n])){e.push(`L${p(this,He)[n+4]} ${p(this,He)[n+5]}`);continue}e.push(`C${p(this,He)[n]} ${p(this,He)[n+1]} ${p(this,He)[n+2]} ${p(this,He)[n+3]} ${p(this,He)[n+4]} ${p(this,He)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,o],c){const u=a-e,d=o-n;let f,g;switch(c){case 0:f=M(this,ps,df).call(this,p(this,He),e,o,u,-d),g=M(this,ps,df).call(this,p(this,Os),e,o,u,-d);break;case 90:f=M(this,ps,ff).call(this,p(this,He),e,n,u,d),g=M(this,ps,ff).call(this,p(this,Os),e,n,u,d);break;case 180:f=M(this,ps,df).call(this,p(this,He),a,n,-u,d),g=M(this,ps,df).call(this,p(this,Os),a,n,-u,d);break;case 270:f=M(this,ps,ff).call(this,p(this,He),a,o,-u,-d),g=M(this,ps,ff).call(this,p(this,Os),a,o,-u,-d);break}return{outline:Array.from(f),points:[Array.from(g)]}}get box(){return p(this,ec)}getNewOutline(e,n){const{x:a,y:o,width:c,height:u}=p(this,ec),[d,f,g,y]=p(this,Ah),x=c*g,w=u*y,A=a*g+d,S=o*y+f,C=new mv({x:p(this,Os)[0]*x+A,y:p(this,Os)[1]*w+S},p(this,Ah),p(this,Jp),e,p(this,Zp),n??p(this,ua));for(let T=2;T<p(this,Os).length;T+=2)C.add({x:p(this,Os)[T]*x+A,y:p(this,Os)[T+1]*w+S});return C.getOutlines()}}Ah=new WeakMap,ec=new WeakMap,ua=new WeakMap,Zp=new WeakMap,Os=new WeakMap,Jp=new WeakMap,He=new WeakMap,ps=new WeakSet,df=function(e,n,a,o,c){const u=new Float64Array(e.length);for(let d=0,f=e.length;d<f;d+=2)u[d]=n+e[d]*o,u[d+1]=a+e[d+1]*c;return u},ff=function(e,n,a,o,c){const u=new Float64Array(e.length);for(let d=0,f=e.length;d<f;d+=2)u[d]=n+e[d+1]*o,u[d+1]=a+e[d]*c;return u},FD=function(e){const n=p(this,He);let a=n[4],o=n[5],c=a,u=o,d=a,f=o,g=a,y=o;const x=e?Math.max:Math.min;for(let T=6,R=n.length;T<R;T+=6){if(isNaN(n[T]))c=Math.min(c,n[T+4]),u=Math.min(u,n[T+5]),d=Math.max(d,n[T+4]),f=Math.max(f,n[T+5]),y<n[T+5]?(g=n[T+4],y=n[T+5]):y===n[T+5]&&(g=x(g,n[T+4]));else{const L=At.bezierBoundingBox(a,o,...n.slice(T,T+6));c=Math.min(c,L[0]),u=Math.min(u,L[1]),d=Math.max(d,L[2]),f=Math.max(f,L[3]),y<L[3]?(g=L[2],y=L[3]):y===L[3]&&(g=x(g,L[2]))}a=n[T+4],o=n[T+5]}const w=c-p(this,ua),A=u-p(this,ua),S=d-c+2*p(this,ua),C=f-u+2*p(this,ua);k(this,ec,{x:w,y:A,width:S,height:C,lastPoint:[g,y]})};var tg,eg,Ti,nc,_h,en,ng,Sh,sg,ig,ki,Eh,Se,IA,zA,ID,gl,zD,oo;const $r=class $r{constructor({editor:t=null,uiManager:e=null}){D(this,Se);D(this,tg,M(this,Se,ID).bind(this));D(this,eg,M(this,Se,zD).bind(this));D(this,Ti,null);D(this,nc,null);D(this,_h);D(this,en,null);D(this,ng,!1);D(this,Sh,!1);D(this,sg,null);D(this,ig);D(this,ki,null);D(this,Eh);var n;t?(k(this,Sh,!1),k(this,Eh,Mt.HIGHLIGHT_COLOR),k(this,sg,t)):(k(this,Sh,!0),k(this,Eh,Mt.HIGHLIGHT_DEFAULT_COLOR)),k(this,ki,(t==null?void 0:t._uiManager)||e),k(this,ig,p(this,ki)._eventBus),k(this,_h,(t==null?void 0:t.color)||((n=p(this,ki))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return ne(this,"_keyboardManager",new Cg([[["Escape","mac+Escape"],$r.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],$r.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],$r.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],$r.prototype._moveToPrevious],[["Home","mac+Home"],$r.prototype._moveToBeginning],[["End","mac+End"],$r.prototype._moveToEnd]]))}renderButton(){const t=k(this,Ti,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=p(this,ki)._signal;t.addEventListener("click",M(this,Se,gl).bind(this),{signal:e}),t.addEventListener("keydown",p(this,tg),{signal:e});const n=k(this,nc,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=p(this,_h),t.append(n),t}renderMainDropdown(){const t=k(this,en,M(this,Se,IA).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===p(this,Ti)){M(this,Se,gl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&M(this,Se,zA).call(this,e,t)}_moveToNext(t){var e,n;if(!p(this,Se,oo)){M(this,Se,gl).call(this,t);return}if(t.target===p(this,Ti)){(e=p(this,en).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=p(this,en))==null?void 0:e.firstChild)||t.target===p(this,Ti)){p(this,Se,oo)&&this._hideDropdownFromKeyboard();return}p(this,Se,oo)||M(this,Se,gl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!p(this,Se,oo)){M(this,Se,gl).call(this,t);return}(e=p(this,en).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!p(this,Se,oo)){M(this,Se,gl).call(this,t);return}(e=p(this,en).lastChild)==null||e.focus()}hideDropdown(){var t;(t=p(this,en))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",p(this,eg))}_hideDropdownFromKeyboard(){var t;if(!p(this,Sh)){if(!p(this,Se,oo)){(t=p(this,sg))==null||t.unselect();return}this.hideDropdown(),p(this,Ti).focus({preventScroll:!0,focusVisible:p(this,ng)})}}updateColor(t){if(p(this,nc)&&(p(this,nc).style.backgroundColor=t),!p(this,en))return;const e=p(this,ki).highlightColors.values();for(const n of p(this,en).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=p(this,Ti))==null||t.remove(),k(this,Ti,null),k(this,nc,null),(e=p(this,en))==null||e.remove(),k(this,en,null)}};tg=new WeakMap,eg=new WeakMap,Ti=new WeakMap,nc=new WeakMap,_h=new WeakMap,en=new WeakMap,ng=new WeakMap,Sh=new WeakMap,sg=new WeakMap,ig=new WeakMap,ki=new WeakMap,Eh=new WeakMap,Se=new WeakSet,IA=function(){const t=document.createElement("div"),e=p(this,ki)._signal;t.addEventListener("contextmenu",gs,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,a]of p(this,ki).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=n,o.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${n}`);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.setAttribute("aria-selected",a===p(this,_h)),o.addEventListener("click",M(this,Se,zA).bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",p(this,tg),{signal:e}),t},zA=function(t,e){e.stopPropagation(),p(this,ig).dispatch("switchannotationeditorparams",{source:this,type:p(this,Eh),value:t})},ID=function(t){$r._keyboardManager.exec(this,t)},gl=function(t){if(p(this,Se,oo)){this.hideDropdown();return}if(k(this,ng,t.detail===0),window.addEventListener("pointerdown",p(this,eg),{signal:p(this,ki)._signal}),p(this,en)){p(this,en).classList.remove("hidden");return}const e=k(this,en,M(this,Se,IA).call(this));p(this,Ti).append(e)},zD=function(t){var e;(e=p(this,en))!=null&&e.contains(t.target)||this.hideDropdown()},oo=function(){return p(this,en)&&!p(this,en).classList.contains("hidden")};let yv=$r;var Ch,rg,Eo,sc,Th,ei,ag,og,ic,Ri,Wn,js,Fv,kh,rc,nn,Rh,tr,lg,qt,UA,BA,UD,BD,HD,HA,pf,li,Cu,VD,Uy,gf,qD,GD,$D,XD;const le=class le extends pe{constructor(e){super({...e,name:"highlightEditor"});D(this,qt);D(this,Ch,null);D(this,rg,0);D(this,Eo);D(this,sc,null);D(this,Th,null);D(this,ei,null);D(this,ag,null);D(this,og,0);D(this,ic,null);D(this,Ri,null);D(this,Wn,null);D(this,js,!1);D(this,Fv,M(this,qt,VD).bind(this));D(this,kh,null);D(this,rc);D(this,nn,null);D(this,Rh,"");D(this,tr);D(this,lg,"");this.color=e.color||le._defaultColor,k(this,tr,e.thickness||le._defaultThickness),k(this,rc,e.opacity||le._defaultOpacity),k(this,Eo,e.boxes||null),k(this,lg,e.methodOfCreation||""),k(this,Rh,e.text||""),this._isDraggable=!1,e.highlightId>-1?(k(this,js,!0),M(this,qt,BA).call(this,e),M(this,qt,pf).call(this)):(k(this,Ch,e.anchorNode),k(this,rg,e.anchorOffset),k(this,ag,e.focusNode),k(this,og,e.focusOffset),M(this,qt,UA).call(this),M(this,qt,pf).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=le.prototype;return ne(this,"_keyboardManager",new Cg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:p(this,js)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:p(this,tr),methodOfCreation:p(this,lg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;pe.initialize(e,n),le._defaultColor||(le._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Mt.HIGHLIGHT_DEFAULT_COLOR:le._defaultColor=n;break;case Mt.HIGHLIGHT_THICKNESS:le._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return p(this,kh)}updateParams(e,n){switch(e){case Mt.HIGHLIGHT_COLOR:M(this,qt,UD).call(this,n);break;case Mt.HIGHLIGHT_THICKNESS:M(this,qt,BD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_DEFAULT_COLOR,le._defaultColor],[Mt.HIGHLIGHT_THICKNESS,le._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||le._defaultColor],[Mt.HIGHLIGHT_THICKNESS,p(this,tr)||le._defaultThickness],[Mt.HIGHLIGHT_FREE,p(this,js)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(k(this,Th,new yv({editor:this})),e.addColorPicker(p(this,Th))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(M(this,qt,gf).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,M(this,qt,gf).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){M(this,qt,HA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(M(this,qt,pf).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?M(this,qt,HA).call(this):e&&(M(this,qt,pf).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,c,u;const{drawLayer:n}=this.parent;let a;p(this,js)?(e=(e-this.rotation+360)%360,a=M(o=le,li,Cu).call(o,p(this,Ri).box,e)):a=M(c=le,li,Cu).call(c,this,e),n.rotate(p(this,Wn),e),n.rotate(p(this,nn),e),n.updateBox(p(this,Wn),a),n.updateBox(p(this,nn),M(u=le,li,Cu).call(u,p(this,ei).box,e))}render(){if(this.div)return this.div;const e=super.render();p(this,Rh)&&(e.setAttribute("aria-label",p(this,Rh)),e.setAttribute("role","mark")),p(this,js)?e.classList.add("free"):this.div.addEventListener("keydown",p(this,Fv),{signal:this._uiManager._signal});const n=k(this,ic,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=p(this,sc);const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),dv(this,p(this,ic),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(p(this,nn),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(p(this,nn),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:M(this,qt,Uy).call(this,!0);break;case 1:case 3:M(this,qt,Uy).call(this,!1);break}}select(){var e,n;super.select(),p(this,nn)&&((e=this.parent)==null||e.drawLayer.removeClass(p(this,nn),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(p(this,nn),"selected"))}unselect(){var e;super.unselect(),p(this,nn)&&((e=this.parent)==null||e.drawLayer.removeClass(p(this,nn),"selected"),p(this,js)||M(this,qt,Uy).call(this,!1))}get _mustFixPosition(){return!p(this,js)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(p(this,Wn),e),this.parent.drawLayer.show(p(this,nn),e))}static startHighlighting(e,n,{target:a,x:o,y:c}){const{x:u,y:d,width:f,height:g}=a.getBoundingClientRect(),y=C=>{M(this,li,$D).call(this,e,C)},x=e._signal,w={capture:!0,passive:!1,signal:x},A=C=>{C.preventDefault(),C.stopPropagation()},S=C=>{a.removeEventListener("pointermove",y),window.removeEventListener("blur",S),window.removeEventListener("pointerup",S),window.removeEventListener("pointerdown",A,w),window.removeEventListener("contextmenu",gs),M(this,li,XD).call(this,e,C)};window.addEventListener("blur",S,{signal:x}),window.addEventListener("pointerup",S,{signal:x}),window.addEventListener("pointerdown",A,w),window.addEventListener("contextmenu",gs,{signal:x}),a.addEventListener("pointermove",y,{signal:x}),this._freeHighlight=new mv({x:o,y:c},[u,d,f,g],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,n,a){var S;const o=super.deserialize(e,n,a),{rect:[c,u,d,f],color:g,quadPoints:y}=e;o.color=At.makeHexColor(...g),k(o,rc,e.opacity);const[x,w]=o.pageDimensions;o.width=(d-c)/x,o.height=(f-u)/w;const A=k(o,Eo,[]);for(let C=0;C<y.length;C+=8)A.push({x:(y[4]-d)/x,y:(f-(1-y[C+5]))/w,width:(y[C+2]-y[C])/x,height:(y[C+5]-y[C+1])/w});return M(S=o,qt,UA).call(S),o}serialize(e=!1){if(this.isEmpty()||e)return null;const n=this.getRect(0,0),a=pe._colorManager.convert(this.color);return{annotationType:Jt.HIGHLIGHT,color:a,opacity:p(this,rc),thickness:p(this,tr),quadPoints:M(this,qt,qD).call(this),outlines:M(this,qt,GD).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:M(this,qt,gf).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Ch=new WeakMap,rg=new WeakMap,Eo=new WeakMap,sc=new WeakMap,Th=new WeakMap,ei=new WeakMap,ag=new WeakMap,og=new WeakMap,ic=new WeakMap,Ri=new WeakMap,Wn=new WeakMap,js=new WeakMap,Fv=new WeakMap,kh=new WeakMap,rc=new WeakMap,nn=new WeakMap,Rh=new WeakMap,tr=new WeakMap,lg=new WeakMap,qt=new WeakSet,UA=function(){const e=new OA(p(this,Eo),.001);k(this,Ri,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=p(this,Ri).box;const n=new OA(p(this,Eo),.0025,.001,this._uiManager.direction==="ltr");k(this,ei,n.getOutlines());const{lastPoint:a}=p(this,ei).box;k(this,kh,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},BA=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var y,x;if(k(this,Ri,e),k(this,ei,e.getNewOutline(p(this,tr)/2+1.5,.0025)),n>=0)k(this,Wn,n),k(this,sc,a),this.parent.drawLayer.finalizeLine(n,e),k(this,nn,this.parent.drawLayer.highlightOutline(p(this,ei)));else if(this.parent){const w=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(p(this,Wn),e),this.parent.drawLayer.updateBox(p(this,Wn),M(y=le,li,Cu).call(y,p(this,Ri).box,(w-this.rotation+360)%360)),this.parent.drawLayer.updateLine(p(this,nn),p(this,ei)),this.parent.drawLayer.updateBox(p(this,nn),M(x=le,li,Cu).call(x,p(this,ei).box,w))}const{x:c,y:u,width:d,height:f}=e.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=d,this.height=f;break;case 90:{const[w,A]=this.parentDimensions;this.x=u,this.y=1-c,this.width=d*A/w,this.height=f*w/A;break}case 180:this.x=1-c,this.y=1-u,this.width=d,this.height=f;break;case 270:{const[w,A]=this.parentDimensions;this.x=1-u,this.y=c,this.width=d*A/w,this.height=f*w/A;break}}const{lastPoint:g}=p(this,ei).box;k(this,kh,[(g[0]-c)/d,(g[1]-u)/f])},UD=function(e){const n=o=>{var c,u;this.color=o,(c=this.parent)==null||c.drawLayer.changeColor(p(this,Wn),o),(u=p(this,Th))==null||u.updateColor(o)},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},BD=function(e){const n=p(this,tr),a=o=>{k(this,tr,o),M(this,qt,HD).call(this,o)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},HD=function(e){if(!p(this,js))return;M(this,qt,BA).call(this,{highlightOutlines:p(this,Ri).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,a]=this.parentDimensions;this.setDims(this.width*n,this.height*a)},HA=function(){p(this,Wn)===null||!this.parent||(this.parent.drawLayer.remove(p(this,Wn)),k(this,Wn,null),this.parent.drawLayer.remove(p(this,nn)),k(this,nn,null))},pf=function(e=this.parent){p(this,Wn)===null&&({id:Ss(this,Wn)._,clipPathId:Ss(this,sc)._}=e.drawLayer.highlight(p(this,Ri),this.color,p(this,rc)),k(this,nn,e.drawLayer.highlightOutline(p(this,ei))),p(this,ic)&&(p(this,ic).style.clipPath=p(this,sc)))},li=new WeakSet,Cu=function({x:e,y:n,width:a,height:o},c){switch(c){case 90:return{x:1-n-o,y:e,width:o,height:a};case 180:return{x:1-e-a,y:1-n-o,width:a,height:o};case 270:return{x:n,y:1-e-a,width:o,height:a}}return{x:e,y:n,width:a,height:o}},VD=function(e){le._keyboardManager.exec(this,e)},Uy=function(e){if(!p(this,Ch))return;const n=window.getSelection();e?n.setPosition(p(this,Ch),p(this,rg)):n.setPosition(p(this,ag),p(this,og))},gf=function(){return p(this,js)?this.rotation:0},qD=function(){if(p(this,js))return null;const[e,n]=this.pageDimensions,a=p(this,Eo),o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:d,width:f,height:g}of a){const y=u*e,x=(1-d-g)*n;o[c]=o[c+4]=y,o[c+1]=o[c+3]=x,o[c+2]=o[c+6]=y+f*e,o[c+5]=o[c+7]=x+g*n,c+=8}return o},GD=function(e){return p(this,Ri).serialize(e,M(this,qt,gf).call(this))},$D=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},XD=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},D(le,li),Dt(le,"_defaultColor",null),Dt(le,"_defaultOpacity",1),Dt(le,"_defaultThickness",12),Dt(le,"_l10nPromise"),Dt(le,"_type","highlight"),Dt(le,"_editorType",Jt.HIGHLIGHT),Dt(le,"_freeHighlightId",-1),Dt(le,"_freeHighlight",null),Dt(le,"_freeHighlightClipId","");let vv=le;var ac,oc,cg,ug,hg,lc,er,ha,ni,cc,uc,da,hc,dc,Co,ft,YD,KD,WD,QD,qA,ZD,GA,JD,tL,eL,nL,sL,ml,$A,By,Hy,Tu,XA,Vy,Ta,iL,YA,rL,aL,KA,qy,mf;const je=class je extends pe{constructor(e){super({...e,name:"inkEditor"});D(this,ft);D(this,ac,0);D(this,oc,0);D(this,cg,this.canvasPointermove.bind(this));D(this,ug,this.canvasPointerleave.bind(this));D(this,hg,this.canvasPointerup.bind(this));D(this,lc,this.canvasPointerdown.bind(this));D(this,er,null);D(this,ha,new Path2D);D(this,ni,!1);D(this,cc,!1);D(this,uc,!1);D(this,da,null);D(this,hc,0);D(this,dc,0);D(this,Co,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){pe.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Mt.INK_THICKNESS:je._defaultThickness=n;break;case Mt.INK_COLOR:je._defaultColor=n;break;case Mt.INK_OPACITY:je._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case Mt.INK_THICKNESS:M(this,ft,YD).call(this,n);break;case Mt.INK_COLOR:M(this,ft,KD).call(this,n);break;case Mt.INK_OPACITY:M(this,ft,WD).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.INK_THICKNESS,je._defaultThickness],[Mt.INK_COLOR,je._defaultColor||pe._defaultLineColor],[Mt.INK_OPACITY,Math.round(je._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Mt.INK_THICKNESS,this.thickness||je._defaultThickness],[Mt.INK_COLOR,this.color||je._defaultColor||pe._defaultLineColor],[Mt.INK_OPACITY,Math.round(100*(this.opacity??je._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(M(this,ft,By).call(this),M(this,ft,Hy).call(this)),this.isAttachedToDOM||(this.parent.add(this),M(this,ft,Tu).call(this)),M(this,ft,mf).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,p(this,er)&&(clearTimeout(p(this,er)),k(this,er,null)),(e=p(this,da))==null||e.disconnect(),k(this,da,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,a=this.width*e,o=this.height*n;this.setDimensions(a,o)}enableEditMode(){p(this,ni)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",p(this,lc),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",p(this,lc)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){p(this,ni)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),k(this,ni,!0),this.div.classList.add("disabled"),M(this,ft,mf).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||p(this,ni)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),M(this,ft,ZD).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),M(this,ft,GA).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),M(this,ft,$A).call(this,e)}canvasPointerleave(e){M(this,ft,$A).call(this,e)}get isResizable(){return!this.isEmpty()&&p(this,ni)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[a,o,c,u]=M(this,ft,QD).call(this);if(this.setAt(a,o,0,0),this.setDims(c,u),M(this,ft,By).call(this),this.width){const[d,f]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*f),this.setAt(e*d,n*f,this.width*d,this.height*f),k(this,uc,!0),M(this,ft,Tu).call(this),this.setDims(this.width*d,this.height*f),M(this,ft,ml).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return M(this,ft,Hy).call(this),this.div}setDimensions(e,n){const a=Math.round(e),o=Math.round(n);if(p(this,hc)===a&&p(this,dc)===o)return;k(this,hc,a),k(this,dc,o),this.canvas.style.visibility="hidden";const[c,u]=this.parentDimensions;this.width=e/c,this.height=n/u,this.fixAndSetPosition(),p(this,ni)&&M(this,ft,XA).call(this,e,n),M(this,ft,Tu).call(this),M(this,ft,ml).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,n,a){var C,T,R;if(e instanceof ED)return null;const o=super.deserialize(e,n,a);o.thickness=e.thickness,o.color=At.makeHexColor(...e.color),o.opacity=e.opacity;const[c,u]=o.pageDimensions,d=o.width*c,f=o.height*u,g=o.parentScale,y=e.thickness/2;k(o,ni,!0),k(o,hc,Math.round(d)),k(o,dc,Math.round(f));const{paths:x,rect:w,rotation:A}=e;for(let{bezier:L}of x){L=M(C=je,Ta,rL).call(C,L,w,A);const j=[];o.paths.push(j);let I=g*(L[0]-y),U=g*(L[1]-y);for(let H=2,Z=L.length;H<Z;H+=6){const $=g*(L[H]-y),W=g*(L[H+1]-y),st=g*(L[H+2]-y),ct=g*(L[H+3]-y),lt=g*(L[H+4]-y),nt=g*(L[H+5]-y);j.push([[I,U],[$,W],[st,ct],[lt,nt]]),I=lt,U=nt}const O=M(this,Ta,iL).call(this,j);o.bezierPath2D.push(O)}const S=M(T=o,ft,KA).call(T);return k(o,oc,Math.max(pe.MIN_SIZE,S[2]-S[0])),k(o,ac,Math.max(pe.MIN_SIZE,S[3]-S[1])),M(R=o,ft,XA).call(R,d,f),o}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=pe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Jt.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:M(this,ft,aL).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ac=new WeakMap,oc=new WeakMap,cg=new WeakMap,ug=new WeakMap,hg=new WeakMap,lc=new WeakMap,er=new WeakMap,ha=new WeakMap,ni=new WeakMap,cc=new WeakMap,uc=new WeakMap,da=new WeakMap,hc=new WeakMap,dc=new WeakMap,Co=new WeakMap,ft=new WeakSet,YD=function(e){const n=o=>{this.thickness=o,M(this,ft,mf).call(this)},a=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},KD=function(e){const n=o=>{this.color=o,M(this,ft,ml).call(this)},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},WD=function(e){const n=o=>{this.opacity=o,M(this,ft,ml).call(this)};e/=100;const a=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},QD=function(){const{parentRotation:e,parentDimensions:[n,a]}=this;switch(e){case 90:return[0,a,a,n];case 180:return[n,a,n,a];case 270:return[n,0,a,n];default:return[0,0,n,a]}},qA=function(){const{ctx:e,color:n,opacity:a,thickness:o,parentScale:c,scaleFactor:u}=this;e.lineWidth=o*c/u,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${n8(a)}`},ZD=function(e,n){const a=this._uiManager._signal;this.canvas.addEventListener("contextmenu",gs,{signal:a}),this.canvas.addEventListener("pointerleave",p(this,ug),{signal:a}),this.canvas.addEventListener("pointermove",p(this,cg),{signal:a}),this.canvas.addEventListener("pointerup",p(this,hg),{signal:a}),this.canvas.removeEventListener("pointerdown",p(this,lc)),this.isEditing=!0,p(this,uc)||(k(this,uc,!0),M(this,ft,Tu).call(this),this.thickness||(this.thickness=je._defaultThickness),this.color||(this.color=je._defaultColor||pe._defaultLineColor),this.opacity??(this.opacity=je._defaultOpacity)),this.currentPath.push([e,n]),k(this,cc,!1),M(this,ft,qA).call(this),k(this,Co,()=>{M(this,ft,eL).call(this),p(this,Co)&&window.requestAnimationFrame(p(this,Co))}),window.requestAnimationFrame(p(this,Co))},GA=function(e,n){const[a,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===a&&n===o)return;const c=this.currentPath;let u=p(this,ha);if(c.push([e,n]),k(this,cc,!0),c.length<=2){u.moveTo(...c[0]),u.lineTo(e,n);return}c.length===3&&(k(this,ha,u=new Path2D),u.moveTo(...c[0])),M(this,ft,nL).call(this,u,...c.at(-3),...c.at(-2),e,n)},JD=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);p(this,ha).lineTo(...e)},tL=function(e,n){k(this,Co,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),M(this,ft,GA).call(this,e,n),M(this,ft,JD).call(this);let a;if(this.currentPath.length!==1)a=M(this,ft,sL).call(this);else{const f=[e,n];a=[[f,f.slice(),f.slice(),f]]}const o=p(this,ha),c=this.currentPath;this.currentPath=[],k(this,ha,new Path2D);const u=()=>{this.allRawPaths.push(c),this.paths.push(a),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(M(this,ft,By).call(this),M(this,ft,Hy).call(this)),M(this,ft,mf).call(this))};this.addCommands({cmd:u,undo:d,mustExec:!0})},eL=function(){if(!p(this,cc))return;k(this,cc,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),a=n.map(u=>u[0]),o=n.map(u=>u[1]);Math.min(...a)-e,Math.max(...a)+e,Math.min(...o)-e,Math.max(...o)+e;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)c.stroke(u);c.stroke(p(this,ha)),c.restore()},nL=function(e,n,a,o,c,u,d){const f=(n+o)/2,g=(a+c)/2,y=(o+u)/2,x=(c+d)/2;e.bezierCurveTo(f+2*(o-f)/3,g+2*(c-g)/3,y+2*(o-y)/3,x+2*(c-x)/3,y,x)},sL=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let a,[o,c]=e[0];for(a=1;a<e.length-2;a++){const[w,A]=e[a],[S,C]=e[a+1],T=(w+S)/2,R=(A+C)/2,L=[o+2*(w-o)/3,c+2*(A-c)/3],j=[T+2*(w-T)/3,R+2*(A-R)/3];n.push([[o,c],L,j,[T,R]]),[o,c]=[T,R]}const[u,d]=e[a],[f,g]=e[a+1],y=[o+2*(u-o)/3,c+2*(d-c)/3],x=[f+2*(u-f)/3,g+2*(d-g)/3];return n.push([[o,c],y,x,[f,g]]),n},ml=function(){if(this.isEmpty()){M(this,ft,Vy).call(this);return}M(this,ft,qA).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),M(this,ft,Vy).call(this);for(const a of this.bezierPath2D)n.stroke(a)},$A=function(e){this.canvas.removeEventListener("pointerleave",p(this,ug)),this.canvas.removeEventListener("pointermove",p(this,cg)),this.canvas.removeEventListener("pointerup",p(this,hg)),this.canvas.addEventListener("pointerdown",p(this,lc),{signal:this._uiManager._signal}),p(this,er)&&clearTimeout(p(this,er)),k(this,er,setTimeout(()=>{k(this,er,null),this.canvas.removeEventListener("contextmenu",gs)},10)),M(this,ft,tL).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},By=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Hy=function(){k(this,da,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),p(this,da).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=p(this,da))==null||e.disconnect(),k(this,da,null)},{once:!0})},Tu=function(){if(!p(this,uc))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),M(this,ft,Vy).call(this)},XA=function(e,n){const a=M(this,ft,qy).call(this),o=(e-a)/p(this,oc),c=(n-a)/p(this,ac);this.scaleFactor=Math.min(o,c)},Vy=function(){const e=M(this,ft,qy).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Ta=new WeakSet,iL=function(e){const n=new Path2D;for(let a=0,o=e.length;a<o;a++){const[c,u,d,f]=e[a];a===0&&n.moveTo(...c),n.bezierCurveTo(u[0],u[1],d[0],d[1],f[0],f[1])}return n},YA=function(e,n,a){const[o,c,u,d]=n;switch(a){case 0:for(let f=0,g=e.length;f<g;f+=2)e[f]+=o,e[f+1]=d-e[f+1];break;case 90:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=e[f+1]+o,e[f+1]=y+c}break;case 180:for(let f=0,g=e.length;f<g;f+=2)e[f]=u-e[f],e[f+1]+=c;break;case 270:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=u-e[f+1],e[f+1]=d-y}break;default:throw new Error("Invalid rotation")}return e},rL=function(e,n,a){const[o,c,u,d]=n;switch(a){case 0:for(let f=0,g=e.length;f<g;f+=2)e[f]-=o,e[f+1]=d-e[f+1];break;case 90:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=e[f+1]-c,e[f+1]=y-o}break;case 180:for(let f=0,g=e.length;f<g;f+=2)e[f]=u-e[f],e[f+1]-=c;break;case 270:for(let f=0,g=e.length;f<g;f+=2){const y=e[f];e[f]=d-e[f+1],e[f+1]=u-y}break;default:throw new Error("Invalid rotation")}return e},aL=function(e,n,a,o){var g,y;const c=[],u=this.thickness/2,d=e*n+u,f=e*a+u;for(const x of this.paths){const w=[],A=[];for(let S=0,C=x.length;S<C;S++){const[T,R,L,j]=x[S];if(T[0]===j[0]&&T[1]===j[1]&&C===1){const ct=e*T[0]+d,lt=e*T[1]+f;w.push(ct,lt),A.push(ct,lt);break}const I=e*T[0]+d,U=e*T[1]+f,O=e*R[0]+d,H=e*R[1]+f,Z=e*L[0]+d,$=e*L[1]+f,W=e*j[0]+d,st=e*j[1]+f;S===0&&(w.push(I,U),A.push(I,U)),w.push(O,H,Z,$,W,st),A.push(O,H),S===C-1&&A.push(W,st)}c.push({bezier:M(g=je,Ta,YA).call(g,w,o,this.rotation),points:M(y=je,Ta,YA).call(y,A,o,this.rotation)})}return c},KA=function(){let e=1/0,n=-1/0,a=1/0,o=-1/0;for(const c of this.paths)for(const[u,d,f,g]of c){const y=At.bezierBoundingBox(...u,...d,...f,...g);e=Math.min(e,y[0]),a=Math.min(a,y[1]),n=Math.max(n,y[2]),o=Math.max(o,y[3])}return[e,a,n,o]},qy=function(){return p(this,ni)?Math.ceil(this.thickness*this.parentScale):0},mf=function(e=!1){if(this.isEmpty())return;if(!p(this,ni)){M(this,ft,ml).call(this);return}const n=M(this,ft,KA).call(this),a=M(this,ft,qy).call(this);k(this,oc,Math.max(pe.MIN_SIZE,n[2]-n[0])),k(this,ac,Math.max(pe.MIN_SIZE,n[3]-n[1]));const o=Math.ceil(a+p(this,oc)*this.scaleFactor),c=Math.ceil(a+p(this,ac)*this.scaleFactor),[u,d]=this.parentDimensions;this.width=o/u,this.height=c/d,this.setAspectRatio(o,c);const f=this.translationX,g=this.translationY;this.translationX=-n[0],this.translationY=-n[1],M(this,ft,Tu).call(this),M(this,ft,ml).call(this),k(this,hc,o),k(this,dc,c),this.setDims(o,c);const y=e?a/this.scaleFactor/2:0;this.translate(f-this.translationX-y,g-this.translationY-y)},D(je,Ta),Dt(je,"_defaultColor",null),Dt(je,"_defaultOpacity",1),Dt(je,"_defaultThickness",1),Dt(je,"_type","ink"),Dt(je,"_editorType",Jt.INK);let VA=je;var Rn,Nn,To,fa,ko,Nh,nr,pa,sr,Ni,dg,re,yf,vf,Gy,QA,oL,lL,ZA,$y,cL;const Sf=class Sf extends pe{constructor(e){super({...e,name:"stampEditor"});D(this,re);D(this,Rn,null);D(this,Nn,null);D(this,To,null);D(this,fa,null);D(this,ko,null);D(this,Nh,"");D(this,nr,null);D(this,pa,null);D(this,sr,null);D(this,Ni,!1);D(this,dg,!1);k(this,fa,e.bitmapUrl),k(this,ko,e.bitmapFile)}static initialize(e,n){pe.initialize(e,n)}static get supportedTypes(){return ne(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return ne(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(Jt.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,n;p(this,Nn)&&(k(this,Rn,null),this._uiManager.imageManager.deleteId(p(this,Nn)),(e=p(this,nr))==null||e.remove(),k(this,nr,null),(n=p(this,pa))==null||n.disconnect(),k(this,pa,null),p(this,sr)&&(clearTimeout(p(this,sr)),k(this,sr,null))),super.remove()}rebuild(){if(!this.parent){p(this,Nn)&&M(this,re,Gy).call(this);return}super.rebuild(),this.div!==null&&(p(this,Nn)&&p(this,nr)===null&&M(this,re,Gy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(p(this,To)||p(this,Rn)||p(this,fa)||p(this,ko)||p(this,Nn))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),p(this,Rn)?M(this,re,QA).call(this):M(this,re,Gy).call(this),this.width){const[a,o]=this.parentDimensions;this.setAt(e*a,n*o,this.width*a,this.height*o)}return this.div}getImageForAltText(){return p(this,nr)}static deserialize(e,n,a){if(e instanceof CD)return null;const o=super.deserialize(e,n,a),{rect:c,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:g}=e;d&&a.imageManager.isValidId(d)?k(o,Nn,d):k(o,fa,u),k(o,Ni,f);const[y,x]=o.pageDimensions;return o.width=(c[2]-c[0])/y,o.height=(c[3]-c[1])/x,g&&(o.altTextData=g),o}serialize(e=!1,n=null){if(this.isEmpty())return null;const a={annotationType:Jt.STAMP,bitmapId:p(this,Nn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:p(this,Ni),structTreeParentId:this._structTreeParentId};if(e)return a.bitmapUrl=M(this,re,$y).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:o,altText:c}=this.altTextData;if(!o&&c&&(a.accessibilityData={type:"Figure",alt:c}),n===null)return a;n.stamps||(n.stamps=new Map);const u=p(this,Ni)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(p(this,Nn)))n.stamps.set(p(this,Nn),{area:u,serialized:a}),a.bitmap=M(this,re,$y).call(this,!1);else if(p(this,Ni)){const d=n.stamps.get(p(this,Nn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=M(this,re,$y).call(this,!1))}return a}};Rn=new WeakMap,Nn=new WeakMap,To=new WeakMap,fa=new WeakMap,ko=new WeakMap,Nh=new WeakMap,nr=new WeakMap,pa=new WeakMap,sr=new WeakMap,Ni=new WeakMap,dg=new WeakMap,re=new WeakSet,yf=function(e,n=!1){if(!e){this.remove();return}k(this,Rn,e.bitmap),n||(k(this,Nn,e.id),k(this,Ni,e.isSvg)),e.file&&k(this,Nh,e.file.name),M(this,re,QA).call(this)},vf=function(){k(this,To,null),this._uiManager.enableWaiting(!1),p(this,nr)&&this.div.focus()},Gy=function(){if(p(this,Nn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(p(this,Nn)).then(a=>M(this,re,yf).call(this,a,!0)).finally(()=>M(this,re,vf).call(this));return}if(p(this,fa)){const a=p(this,fa);k(this,fa,null),this._uiManager.enableWaiting(!0),k(this,To,this._uiManager.imageManager.getFromUrl(a).then(o=>M(this,re,yf).call(this,o)).finally(()=>M(this,re,vf).call(this)));return}if(p(this,ko)){const a=p(this,ko);k(this,ko,null),this._uiManager.enableWaiting(!0),k(this,To,this._uiManager.imageManager.getFromFile(a).then(o=>M(this,re,yf).call(this,o)).finally(()=>M(this,re,vf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Sf.supportedTypesStr;const n=this._uiManager._signal;k(this,To,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);M(this,re,yf).call(this,o)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>M(this,re,vf).call(this))),e.click()},QA=function(){const{div:e}=this;let{width:n,height:a}=p(this,Rn);const[o,c]=this.pageDimensions,u=.75;if(this.width)n=this.width*o,a=this.height*c;else if(n>u*o||a>u*c){const y=Math.min(u*o/n,u*c/a);n*=y,a*=y}const[d,f]=this.parentDimensions;this.setDims(n*d/o,a*f/c),this._uiManager.enableWaiting(!1);const g=k(this,nr,document.createElement("canvas"));e.append(g),e.hidden=!1,M(this,re,ZA).call(this,n,a),M(this,re,cL).call(this),p(this,dg)||(this.parent.addUndoableEditor(this),k(this,dg,!0)),this._reportTelemetry({action:"inserted_image"}),p(this,Nh)&&g.setAttribute("aria-label",p(this,Nh))},oL=function(e,n){var u;const[a,o]=this.parentDimensions;this.width=e/a,this.height=n/o,this.setDims(e,n),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,p(this,sr)!==null&&clearTimeout(p(this,sr)),k(this,sr,setTimeout(()=>{k(this,sr,null),M(this,re,ZA).call(this,e,n)},200))},lL=function(e,n){const{width:a,height:o}=p(this,Rn);let c=a,u=o,d=p(this,Rn);for(;c>2*e||u>2*n;){const f=c,g=u;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(c,u);y.getContext("2d").drawImage(d,0,0,f,g,0,0,c,u),d=y.transferToImageBitmap()}return d},ZA=function(e,n){e=Math.ceil(e),n=Math.ceil(n);const a=p(this,nr);if(!a||a.width===e&&a.height===n)return;a.width=e,a.height=n;const o=p(this,Ni)?p(this,Rn):M(this,re,lL).call(this,e,n);if(this._uiManager.hasMLManager&&!this.hasAltText()){const d=new OffscreenCanvas(e,n).getContext("2d");d.drawImage(o,0,0,o.width,o.height,0,0,e,n),this._uiManager.mlGuess({service:"image-to-text",request:{data:d.getImageData(0,0,e,n).data,width:e,height:n,channels:4}}).then(f=>{const g=(f==null?void 0:f.output)||"";this.parent&&g&&!this.hasAltText()&&(this.altTextData={altText:g,decorative:!1})})}const c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(o,0,0,o.width,o.height,0,0,e,n)},$y=function(e){if(e){if(p(this,Ni)){const o=this._uiManager.imageManager.getSvgUrl(p(this,Nn));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=p(this,Rn),n.getContext("2d").drawImage(p(this,Rn),0,0),n.toDataURL()}if(p(this,Ni)){const[n,a]=this.pageDimensions,o=Math.round(this.width*n*Io.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*Io.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,c);return u.getContext("2d").drawImage(p(this,Rn),0,0,p(this,Rn).width,p(this,Rn).height,0,0,o,c),u.transferToImageBitmap()}return structuredClone(p(this,Rn))},cL=function(){this._uiManager._signal&&(k(this,pa,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&M(this,re,oL).call(this,n.width,n.height)})),p(this,pa).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=p(this,pa))==null||e.disconnect(),k(this,pa,null)},{once:!0}))},Dt(Sf,"_type","stamp"),Dt(Sf,"_editorType",Jt.STAMP);let WA=Sf;var fc,Mh,ir,pc,ga,ma,ya,Ps,Ro,Dh,Lh,Qn,Et,No,jn,uL,t_,e_,n_,Xy;const mi=class mi{constructor({uiManager:t,pageIndex:e,div:n,accessibilityManager:a,annotationLayer:o,drawLayer:c,textLayer:u,viewport:d,l10n:f}){D(this,jn);D(this,fc);D(this,Mh,!1);D(this,ir,null);D(this,pc,null);D(this,ga,null);D(this,ma,null);D(this,ya,null);D(this,Ps,new Map);D(this,Ro,!1);D(this,Dh,!1);D(this,Lh,!1);D(this,Qn,null);D(this,Et);const g=[...p(mi,No).values()];if(!mi._initialized){mi._initialized=!0;for(const y of g)y.initialize(f,t)}t.registerEditorTypes(g),k(this,Et,t),this.pageIndex=e,this.div=n,k(this,fc,a),k(this,ir,o),this.viewport=d,k(this,Qn,u),this.drawLayer=c,p(this,Et).addLayer(this)}get isEmpty(){return p(this,Ps).size===0}get isInvisible(){return this.isEmpty&&p(this,Et).getMode()===Jt.NONE}updateToolbar(t){p(this,Et).updateToolbar(t)}updateMode(t=p(this,Et).getMode()){switch(M(this,jn,Xy).call(this),t){case Jt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Jt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Jt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of p(mi,No).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=p(this,Qn))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(p(this,Et).getMode()!==Jt.INK)return;if(!t){for(const n of p(this,Ps).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){p(this,Et).setEditingState(t)}addCommands(t){p(this,Et).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=p(this,ir))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of p(this,Ps).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(p(this,Et).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!p(this,ir))return;const e=p(this,ir).getEditableAnnotations();for(const n of e){if(n.hide(),p(this,Et).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}}disable(){var a;k(this,Lh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of p(this,Ps).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(a=this.getEditableAnnotation(o.annotationElementId))==null||a.show(),o.remove()}if(p(this,ir)){const o=p(this,ir).getEditableAnnotations();for(const c of o){const{id:u}=c.data;if(p(this,Et).isDeletedAnnotationElement(u))continue;let d=e.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=t.get(u),d&&(p(this,Et).addChangedExistingAnnotation(d),d.renderAnnotationElement(c),d.show(!1)),c.show()}}M(this,jn,Xy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of p(mi,No).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),k(this,Lh,!1)}getEditableAnnotation(t){var e;return((e=p(this,ir))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){p(this,Et).getActive()!==t&&p(this,Et).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=p(this,Qn))!=null&&t.div&&!p(this,ma)&&(k(this,ma,M(this,jn,uL).bind(this)),p(this,Qn).div.addEventListener("pointerdown",p(this,ma),{signal:p(this,Et)._signal}),p(this,Qn).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=p(this,Qn))!=null&&t.div&&p(this,ma)&&(p(this,Qn).div.removeEventListener("pointerdown",p(this,ma)),k(this,ma,null),p(this,Qn).div.classList.remove("highlighting"))}enableClick(){if(p(this,ga))return;const t=p(this,Et)._signal;k(this,ga,this.pointerdown.bind(this)),k(this,pc,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",p(this,ga),{signal:t}),this.div.addEventListener("pointerup",p(this,pc),{signal:t})}disableClick(){p(this,ga)&&(this.div.removeEventListener("pointerdown",p(this,ga)),this.div.removeEventListener("pointerup",p(this,pc)),k(this,ga,null),k(this,pc,null))}attach(t){p(this,Ps).set(t.id,t);const{annotationElementId:e}=t;e&&p(this,Et).isDeletedAnnotationElement(e)&&p(this,Et).removeDeletedAnnotationElement(t)}detach(t){var e;p(this,Ps).delete(t.id),(e=p(this,fc))==null||e.removePointerInTextLayer(t.contentDiv),!p(this,Lh)&&t.annotationElementId&&p(this,Et).addDeletedAnnotationElement(t)}remove(t){this.detach(t),p(this,Et).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,p(this,Dh)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(p(this,Et).addDeletedAnnotationElement(t.annotationElementId),pe.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),p(this,Et).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),p(this,Et).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!p(this,ya)&&(t._focusEventsAllowed=!1,k(this,ya,setTimeout(()=>{k(this,ya,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:p(this,Et)._signal}),e.focus())},0))),t._structTreeParentId=(n=p(this,fc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return p(this,Et).getId()}get _signal(){return p(this,Et)._signal}canCreateNewEmptyEditor(){var t;return(t=p(this,jn,t_))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){p(this,Et).updateToolbar(t),p(this,Et).updateMode(t);const{offsetX:n,offsetY:a}=M(this,jn,n_).call(this),o=this.getNextId(),c=M(this,jn,e_).call(this,{parent:this,id:o,x:n,y:a,uiManager:p(this,Et),isCentered:!0,...e});c&&this.add(c)}deserialize(t){var e;return((e=p(mi,No).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,p(this,Et)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),o=M(this,jn,e_).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:p(this,Et),isCentered:e,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(M(this,jn,n_).call(this),!0)}setSelected(t){p(this,Et).setSelected(t)}toggleSelected(t){p(this,Et).toggleSelected(t)}isSelected(t){return p(this,Et).isSelected(t)}unselect(t){p(this,Et).unselect(t)}pointerup(t){const{isMac:e}=fs.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&p(this,Ro)){if(k(this,Ro,!1),!p(this,Mh)){k(this,Mh,!0);return}if(p(this,Et).getMode()===Jt.STAMP){p(this,Et).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(p(this,Et).getMode()===Jt.HIGHLIGHT&&this.enableTextSelection(),p(this,Ro)){k(this,Ro,!1);return}const{isMac:e}=fs.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;k(this,Ro,!0);const n=p(this,Et).getActive();k(this,Mh,!n||n.isEmpty())}findNewParent(t,e,n){const a=p(this,Et).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}destroy(){var t,e;((t=p(this,Et).getActive())==null?void 0:t.parent)===this&&(p(this,Et).commitOrRemove(),p(this,Et).setActiveEditor(null)),p(this,ya)&&(clearTimeout(p(this,ya)),k(this,ya,null));for(const n of p(this,Ps).values())(e=p(this,fc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,p(this,Ps).clear(),p(this,Et).removeLayer(this)}render({viewport:t}){this.viewport=t,wc(this.div,t);for(const e of p(this,Et).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){p(this,Et).commitOrRemove(),M(this,jn,Xy).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,wc(this.div,{rotation:n}),e!==n)for(const a of p(this,Ps).values())a.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return p(this,Et).viewParameters.realScale}};fc=new WeakMap,Mh=new WeakMap,ir=new WeakMap,pc=new WeakMap,ga=new WeakMap,ma=new WeakMap,ya=new WeakMap,Ps=new WeakMap,Ro=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,Qn=new WeakMap,Et=new WeakMap,No=new WeakMap,jn=new WeakSet,uL=function(t){if(p(this,Et).unselectAll(),t.target===p(this,Qn).div){const{isMac:e}=fs.platform;if(t.button!==0||t.ctrlKey&&e)return;p(this,Et).showAllEditors("highlight",!0,!0),p(this,Qn).div.classList.add("free"),vv.startHighlighting(this,p(this,Et).direction==="ltr",t),p(this,Qn).div.addEventListener("pointerup",()=>{p(this,Qn).div.classList.remove("free")},{once:!0,signal:p(this,Et)._signal}),t.preventDefault()}},t_=function(){return p(mi,No).get(p(this,Et).getMode())},e_=function(t){const e=p(this,jn,t_);return e?new e.prototype.constructor(t):null},n_=function(){const{x:t,y:e,width:n,height:a}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+a),f=(o+u)/2-t,g=(c+d)/2-e,[y,x]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:x}},Xy=function(){k(this,Dh,!0);for(const t of p(this,Ps).values())t.isEmpty()&&t.remove();k(this,Dh,!1)},Dt(mi,"_initialized",!1),D(mi,No,new Map([DA,VA,WA,vv].map(t=>[t._editorType,t])));let JA=mi;var rr,fg,sn,Mo,pg,i_,Cc,r_,hL;const Sn=class Sn{constructor({pageIndex:t}){D(this,Cc);D(this,rr,null);D(this,fg,0);D(this,sn,new Map);D(this,Mo,new Map);this.pageIndex=t}setParent(t){if(!p(this,rr)){k(this,rr,t);return}if(p(this,rr)!==t){if(p(this,sn).size>0)for(const e of p(this,sn).values())e.remove(),t.append(e);k(this,rr,t)}}static get _svgFactory(){return ne(this,"_svgFactory",new K_)}highlight(t,e,n,a=!1){const o=Ss(this,fg)._++,c=M(this,Cc,r_).call(this,t.box);c.classList.add("highlight"),t.free&&c.classList.add("free");const u=Sn._svgFactory.createElement("defs");c.append(u);const d=Sn._svgFactory.createElement("path");u.append(d);const f=`path_p${this.pageIndex}_${o}`;d.setAttribute("id",f),d.setAttribute("d",t.toSVGPath()),a&&p(this,Mo).set(o,d);const g=M(this,Cc,hL).call(this,u,f),y=Sn._svgFactory.createElement("use");return c.append(y),c.setAttribute("fill",e),c.setAttribute("fill-opacity",n),y.setAttribute("href",`#${f}`),p(this,sn).set(o,c),{id:o,clipPathId:`url(#${g})`}}highlightOutline(t){const e=Ss(this,fg)._++,n=M(this,Cc,r_).call(this,t.box);n.classList.add("highlightOutline");const a=Sn._svgFactory.createElement("defs");n.append(a);const o=Sn._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${e}`;o.setAttribute("id",c),o.setAttribute("d",t.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t.free){n.classList.add("free");const g=Sn._svgFactory.createElement("mask");a.append(g),u=`mask_p${this.pageIndex}_${e}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const y=Sn._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const x=Sn._svgFactory.createElement("use");g.append(x),x.setAttribute("href",`#${c}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const d=Sn._svgFactory.createElement("use");n.append(d),d.setAttribute("href",`#${c}`),u&&d.setAttribute("mask",`url(#${u})`);const f=d.cloneNode();return n.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),p(this,sn).set(e,n),e}finalizeLine(t,e){const n=p(this,Mo).get(t);p(this,Mo).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){p(this,sn).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),p(this,Mo).delete(t)}updatePath(t,e){p(this,Mo).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;M(n=Sn,pg,i_).call(n,p(this,sn).get(t),e)}show(t,e){p(this,sn).get(t).classList.toggle("hidden",!e)}rotate(t,e){p(this,sn).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){p(this,sn).get(t).setAttribute("fill",e)}changeOpacity(t,e){p(this,sn).get(t).setAttribute("fill-opacity",e)}addClass(t,e){p(this,sn).get(t).classList.add(e)}removeClass(t,e){p(this,sn).get(t).classList.remove(e)}remove(t){p(this,rr)!==null&&(p(this,sn).get(t).remove(),p(this,sn).delete(t))}destroy(){k(this,rr,null);for(const t of p(this,sn).values())t.remove();p(this,sn).clear()}};rr=new WeakMap,fg=new WeakMap,sn=new WeakMap,Mo=new WeakMap,pg=new WeakSet,i_=function(t,{x:e=0,y:n=0,width:a=1,height:o=1}={}){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*o}%`},Cc=new WeakSet,r_=function(t){var n;const e=Sn._svgFactory.create(1,1,!0);return p(this,rr).append(e),e.setAttribute("aria-hidden",!0),M(n=Sn,pg,i_).call(n,e,t),e},hL=function(t,e){const n=Sn._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Sn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a},D(Sn,pg);let s_=Sn;var LV=Nt.AbortException,OV=Nt.AnnotationEditorLayer,jV=Nt.AnnotationEditorParamsType,PV=Nt.AnnotationEditorType,FV=Nt.AnnotationEditorUIManager,dL=Nt.AnnotationLayer,fL=Nt.AnnotationMode,IV=Nt.CMapCompressionType,zV=Nt.ColorPicker,UV=Nt.DOMSVGFactory,BV=Nt.DrawLayer,HV=Nt.FeatureTest,sS=Nt.GlobalWorkerOptions,VV=Nt.ImageKind,qV=Nt.InvalidPDFException,GV=Nt.MissingPDFException,$V=Nt.OPS,XV=Nt.Outliner,YV=Nt.PDFDataRangeTransport,KV=Nt.PDFDateString,WV=Nt.PDFWorker,QV=Nt.PasswordResponses,ZV=Nt.PermissionFlag,JV=Nt.PixelsPerInch,tq=Nt.RenderingCancelledException,pL=Nt.TextLayer,eq=Nt.UnexpectedResponseException,nq=Nt.Util,sq=Nt.VerbosityLevel,iq=Nt.XfaLayer,rq=Nt.build,aq=Nt.createValidAbsoluteUrl,oq=Nt.fetchData,gL=Nt.getDocument,lq=Nt.getFilenameFromUrl,cq=Nt.getPdfFilenameFromUrl,uq=Nt.getXfaPageViewport,hq=Nt.isDataScheme,dq=Nt.isPdfFile,fq=Nt.noContextMenu,pq=Nt.normalizeUnicode,gq=Nt.renderTextLayer,mq=Nt.setLayerDimensions,yq=Nt.shadow,vq=Nt.updateTextLayer,bq=Nt.version;const xq=Object.freeze(Object.defineProperty({__proto__:null,AbortException:LV,AnnotationEditorLayer:OV,AnnotationEditorParamsType:jV,AnnotationEditorType:PV,AnnotationEditorUIManager:FV,AnnotationLayer:dL,AnnotationMode:fL,CMapCompressionType:IV,ColorPicker:zV,DOMSVGFactory:UV,DrawLayer:BV,FeatureTest:HV,GlobalWorkerOptions:sS,ImageKind:VV,InvalidPDFException:qV,MissingPDFException:GV,OPS:$V,Outliner:XV,PDFDataRangeTransport:YV,PDFDateString:KV,PDFWorker:WV,PasswordResponses:QV,PermissionFlag:ZV,PixelsPerInch:JV,RenderingCancelledException:tq,TextLayer:pL,UnexpectedResponseException:eq,Util:nq,VerbosityLevel:sq,XfaLayer:iq,build:rq,createValidAbsoluteUrl:aq,fetchData:oq,getDocument:gL,getFilenameFromUrl:lq,getPdfFilenameFromUrl:cq,getXfaPageViewport:uq,isDataScheme:hq,isPdfFile:dq,noContextMenu:fq,normalizeUnicode:pq,renderTextLayer:gq,setLayerDimensions:mq,shadow:yq,updateTextLayer:vq,version:bq},Symbol.toStringTag,{value:"Module"}));var dn=function(i,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return i.concat(o||Array.prototype.slice.call(t))},wq=["onCopy","onCut","onPaste"],Aq=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],_q=["onFocus","onBlur"],Sq=["onInput","onInvalid","onReset","onSubmit"],Eq=["onLoad","onError"],Cq=["onKeyDown","onKeyPress","onKeyUp"],Tq=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],kq=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Rq=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Nq=["onSelect"],Mq=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Dq=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Lq=["onScroll"],Oq=["onWheel"],jq=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Pq=["onTransitionEnd"],Fq=["onToggle"],Iq=["onChange"],zq=dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn(dn([],wq,!0),Aq,!0),_q,!0),Sq,!0),Eq,!0),Cq,!0),Tq,!0),kq,!0),Rq,!0),Nq,!0),Mq,!0),Dq,!0),Lq,!0),Oq,!0),jq,!0),Pq,!0),Iq,!0),Fq,!0);function mL(i,t){var e={};return zq.forEach(function(n){var a=i[n];a&&(t?e[n]=(function(o){return a(o,t(n))}):e[n]=a)}),e}function Rg(i){var t=!1,e=new Promise(function(n,a){i.then(function(o){return!t&&n(o)}).catch(function(o){return!t&&a(o)})});return{promise:e,cancel:function(){t=!0}}}var Uq="Invariant failed";function _e(i,t){if(!i)throw new Error(Uq)}var yw,Kk;function Bq(){if(Kk)return yw;Kk=1;var i=function(){};return yw=i,yw}var Hq=Bq();const Bn=l_(Hq);var Wk=Object.prototype.hasOwnProperty;function Qk(i,t,e){for(e of i.keys())if(Fu(e,t))return e}function Fu(i,t){var e,n,a;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((n=i.length)===t.length)for(;n--&&Fu(i[n],t[n]););return n===-1}if(e===Set){if(i.size!==t.size)return!1;for(n of i)if(a=n,a&&typeof a=="object"&&(a=Qk(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(n of i)if(a=n[0],a&&typeof a=="object"&&(a=Qk(t,a),!a)||!Fu(n[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((n=i.byteLength)===t.byteLength)for(;n--&&i.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===t.byteLength)for(;n--&&i[n]===t[n];);return n===-1}if(!e||typeof i=="object"){n=0;for(e in i)if(Wk.call(i,e)&&++n&&!Wk.call(t,e)||!(e in t)||!Fu(i[e],t[e]))return!1;return Object.keys(t).length===n}}return i!==i&&t!==t}const yL=E.createContext(null);function Iu({children:i,type:t}){return b.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:i})}const Vq="noopener noreferrer nofollow";class qq{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return _e(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){_e(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{_e(this.pdfDocument),_e(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{_e(Array.isArray(e));const n=e[0];new Promise(a=>{_e(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{a(o)}).catch(()=>{_e(!1)}):typeof n=="number"?a(n):_e(!1)}).then(a=>{const o=a+1;_e(this.pdfViewer),_e(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;_e(this.pdfViewer),_e(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||Vq,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Zk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},pb=typeof window<"u",vL=pb&&window.location.protocol==="file:";function Gq(i){return typeof i<"u"}function fl(i){return Gq(i)&&i!==null}function $q(i){return typeof i=="string"}function Xq(i){return i instanceof ArrayBuffer}function Yq(i){return _e(pb),i instanceof Blob}function a_(i){return $q(i)&&/^data:/.test(i)}function Jk(i){_e(a_(i));const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function Kq(){return pb&&window.devicePixelRatio||1}const bL="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function tR(){Bn(!vL,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${bL}`)}function Wq(){Bn(!vL,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${bL}`)}function Sc(i){i!=null&&i.cancel&&i.cancel()}function o_(i,t){return Object.defineProperty(i,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function Qq(i){return i.name==="RenderingCancelledException"}function Zq(i){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function Jq(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function Vh(){return E.useReducer(Jq,{value:void 0,error:void 0})}var t7=function(i,t,e,n){function a(o){return o instanceof e?o:new e(function(c){c(o)})}return new(e||(e=Promise))(function(o,c){function u(g){try{f(n.next(g))}catch(y){c(y)}}function d(g){try{f(n.throw(g))}catch(y){c(y)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((n=n.apply(i,t||[])).next())})},eR=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(i);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(i,n[a])&&(e[n[a]]=i[n[a]]);return e};const{PDFDataRangeTransport:e7}=xq,n7=(i,t)=>{switch(t){case Zk.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case Zk.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function nR(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const s7=E.forwardRef(function(t,e){var{children:n,className:a,error:o="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:u,file:d,inputRef:f,imageResourcesPath:g,loading:y="Loading PDF",noData:x="No PDF file specified.",onItemClick:w,onLoadError:A,onLoadProgress:S,onLoadSuccess:C,onPassword:T=n7,onSourceError:R,onSourceSuccess:L,options:j,renderMode:I,rotate:U}=t,O=eR(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[H,Z]=Vh(),{value:$,error:W}=H,[st,ct]=Vh(),{value:lt,error:nt}=st,z=E.useRef(new qq),q=E.useRef([]),X=E.useRef(void 0),_t=E.useRef(void 0);d&&d!==X.current&&nR(d)&&(Bn(!Fu(d,X.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),X.current=d),j&&j!==_t.current&&(Bn(!Fu(j,_t.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),_t.current=j);const Ct=E.useRef({scrollPageIntoView:ae=>{const{dest:ce,pageNumber:Le,pageIndex:Ne=Le-1}=ae;if(w){w({dest:ce,pageIndex:Ne,pageNumber:Le});return}const qn=q.current[Ne];if(qn){qn.scrollIntoView();return}Bn(!1,`An internal link leading to page ${Le} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});E.useImperativeHandle(e,()=>({linkService:z,pages:q,viewer:Ct}),[]);function P(){L&&L()}function G(){W&&(Bn(!1,W.toString()),R&&R(W))}function tt(){Z({type:"RESET"})}E.useEffect(tt,[d,Z]);const ot=E.useCallback(()=>t7(this,void 0,void 0,function*(){if(!d)return null;if(typeof d=="string")return a_(d)?{data:Jk(d)}:(tR(),{url:d});if(d instanceof e7)return{range:d};if(Xq(d))return{data:d};if(pb&&Yq(d))return{data:yield Zq(d)};if(_e(typeof d=="object"),_e(nR(d)),"url"in d&&typeof d.url=="string"){if(a_(d.url)){const{url:ae}=d,ce=eR(d,["url"]),Le=Jk(ae);return Object.assign({data:Le},ce)}tR()}return d}),[d]);E.useEffect(()=>{const ae=Rg(ot());return ae.promise.then(ce=>{Z({type:"RESOLVE",value:ce})}).catch(ce=>{Z({type:"REJECT",error:ce})}),()=>{Sc(ae)}},[ot,Z]),E.useEffect(()=>{if(!(typeof $>"u")){if($===!1){G();return}P()}},[$]);function pt(){lt&&(C&&C(lt),q.current=new Array(lt.numPages),z.current.setDocument(lt))}function wt(){nt&&(Bn(!1,nt.toString()),A&&A(nt))}E.useEffect(function(){ct({type:"RESET"})},[ct,$]),E.useEffect(function(){if(!$)return;const ce=j?Object.assign(Object.assign({},$),j):$,Le=gL(ce);S&&(Le.onProgress=S),T&&(Le.onPassword=T);const Ne=Le,qn=Ne.promise.then(hi=>{ct({type:"RESOLVE",value:hi})}).catch(hi=>{Ne.destroyed||ct({type:"REJECT",error:hi})});return()=>{qn.finally(()=>Ne.destroy())}},[j,ct,$]),E.useEffect(()=>{if(!(typeof lt>"u")){if(lt===!1){wt();return}pt()}},[lt]),E.useEffect(function(){z.current.setViewer(Ct.current),z.current.setExternalLinkRel(c),z.current.setExternalLinkTarget(u)},[c,u]);const ht=E.useCallback((ae,ce)=>{q.current[ae]=ce},[]),Gt=E.useCallback(ae=>{delete q.current[ae]},[]),Ft=E.useMemo(()=>({imageResourcesPath:g,linkService:z.current,onItemClick:w,pdf:lt,registerPage:ht,renderMode:I,rotate:U,unregisterPage:Gt}),[g,w,lt,ht,I,U,Gt]),$t=E.useMemo(()=>mL(O,()=>lt),[O,lt]);function ue(){return b.jsx(yL.Provider,{value:Ft,children:n})}function cn(){return d?lt==null?b.jsx(Iu,{type:"loading",children:typeof y=="function"?y():y}):lt===!1?b.jsx(Iu,{type:"error",children:typeof o=="function"?o():o}):ue():b.jsx(Iu,{type:"no-data",children:typeof x=="function"?x():x})}return b.jsx("div",Object.assign({className:Xh("react-pdf__Document",a),ref:f,style:{"--scale-factor":"1"}},$t,{children:cn()}))});function xL(){return E.useContext(yL)}function wL(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(o){e.forEach(function(c){typeof c=="function"?c(o):c&&(c.current=o)})}}const AL=E.createContext(null),_L={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},i7=/^H(\d+)$/;function r7(i){return i in _L}function gb(i){return"children"in i}function SL(i){return gb(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function a7(i){const t={};if(gb(i)){const{role:e}=i,n=e.match(i7);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(r7(e)){const a=_L[e];a&&(t.role=a)}}return t}function EL(i){const t={};if(gb(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),SL(i)){const[e]=i.children;if(e){const n=EL(e);return Object.assign(Object.assign({},t),n)}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function o7(i){return i?Object.assign(Object.assign({},a7(i)),EL(i)):null}function CL({className:i,node:t}){const e=E.useMemo(()=>o7(t),[t]),n=E.useMemo(()=>!gb(t)||SL(t)?null:t.children.map((a,o)=>b.jsx(CL,{node:a},o)),[t]);return b.jsx("span",Object.assign({className:i},e,{children:n}))}function mb(){return E.useContext(AL)}function l7(){const i=mb();_e(i);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[n,a]=Vh(),{value:o,error:c}=n,{customTextRenderer:u,page:d}=i;function f(){o&&e&&e(o)}function g(){c&&(Bn(!1,c.toString()),t&&t(c))}return E.useEffect(function(){a({type:"RESET"})},[a,d]),E.useEffect(function(){if(u||!d)return;const x=Rg(d.getStructTree()),w=x;return x.promise.then(A=>{a({type:"RESOLVE",value:A})}).catch(A=>{a({type:"REJECT",error:A})}),()=>Sc(w)},[u,d,a]),E.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}f()}},[o]),o?b.jsx(CL,{className:"react-pdf__Page__structTree structTree",node:o}):null}const sR=fL;function c7(i){const t=mb();_e(t);const e=Object.assign(Object.assign({},t),i),{_className:n,canvasBackground:a,devicePixelRatio:o=Kq(),onRenderError:c,onRenderSuccess:u,page:d,renderForms:f,renderTextLayer:g,rotate:y,scale:x}=e,{canvasRef:w}=i;_e(d);const A=E.useRef(null);function S(){d&&u&&u(o_(d,x))}function C(j){Qq(j)||(Bn(!1,j.toString()),c&&c(j))}const T=E.useMemo(()=>d.getViewport({scale:x*o,rotation:y}),[o,d,y,x]),R=E.useMemo(()=>d.getViewport({scale:x,rotation:y}),[d,y,x]);E.useEffect(function(){if(!d)return;d.cleanup();const{current:I}=A;if(!I)return;I.width=T.width,I.height=T.height,I.style.width=`${Math.floor(R.width)}px`,I.style.height=`${Math.floor(R.height)}px`,I.style.visibility="hidden";const U={annotationMode:f?sR.ENABLE_FORMS:sR.ENABLE,canvasContext:I.getContext("2d",{alpha:!1}),viewport:T};a&&(U.background=a);const O=d.render(U),H=O;return O.promise.then(()=>{I.style.visibility="",S()}).catch(C),()=>Sc(H)},[a,d,f,T,R]);const L=E.useCallback(()=>{const{current:j}=A;j&&(j.width=0,j.height=0)},[]);return E.useEffect(()=>L,[L]),b.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:wL(w,A),style:{display:"block",userSelect:"none"},children:g?b.jsx(l7,{}):null})}function u7(i){return"str"in i}function h7(){const i=mb();_e(i);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:c,pageIndex:u,pageNumber:d,rotate:f,scale:g}=i;_e(c);const[y,x]=Vh(),{value:w,error:A}=y,S=E.useRef(null),C=E.useRef(void 0);Bn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function T(){w&&n&&n(w)}function R(){A&&(Bn(!1,A.toString()),e&&e(A))}E.useEffect(function(){x({type:"RESET"})},[c,x]),E.useEffect(function(){if(!c)return;const Z=Rg(c.getTextContent()),$=Z;return Z.promise.then(W=>{x({type:"RESOLVE",value:W})}).catch(W=>{x({type:"REJECT",error:W})}),()=>Sc($)},[c,x]),E.useEffect(()=>{if(w!==void 0){if(w===!1){R();return}T()}},[w]);const L=E.useCallback(()=>{o&&o()},[o]),j=E.useCallback(H=>{Bn(!1,H.toString()),a&&a(H)},[a]);function I(){const H=C.current;H&&H.classList.add("active")}function U(){const H=C.current;H&&H.classList.remove("active")}const O=E.useMemo(()=>c.getViewport({scale:g,rotation:f}),[c,f,g]);return E.useLayoutEffect(function(){if(!c||!w)return;const{current:Z}=S;if(!Z)return;Z.innerHTML="";const $=c.streamTextContent({includeMarkedContent:!0}),W={container:Z,textContentSource:$,viewport:O},st=new pL(W),ct=st;return st.render().then(()=>{const lt=document.createElement("div");lt.className="endOfContent",Z.append(lt),C.current=lt;const nt=Z.querySelectorAll('[role="presentation"]');if(t){let z=0;w.items.forEach((q,X)=>{if(!u7(q))return;const _t=nt[z];if(!_t)return;const Ct=t(Object.assign({pageIndex:u,pageNumber:d,itemIndex:X},q));_t.innerHTML=Ct,z+=q.str&&q.hasEOL?2:1})}L()}).catch(j),()=>Sc(ct)},[t,j,L,c,u,d,w,O]),b.jsx("div",{className:Xh("react-pdf__Page__textContent","textLayer"),onMouseUp:U,onMouseDown:I,ref:S})}function d7(){const i=xL(),t=mb();_e(t);const e=Object.assign(Object.assign({},i),t),{imageResourcesPath:n,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:f,pdf:g,renderForms:y,rotate:x,scale:w=1}=e;_e(g),_e(f),_e(a);const[A,S]=Vh(),{value:C,error:T}=A,R=E.useRef(null);Bn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function L(){C&&c&&c(C)}function j(){T&&(Bn(!1,T.toString()),o&&o(T))}E.useEffect(function(){S({type:"RESET"})},[S,f]),E.useEffect(function(){if(!f)return;const Z=Rg(f.getAnnotations()),$=Z;return Z.promise.then(W=>{S({type:"RESOLVE",value:W})}).catch(W=>{S({type:"REJECT",error:W})}),()=>{Sc($)}},[S,f]),E.useEffect(()=>{if(C!==void 0){if(C===!1){j();return}L()}},[C]);function I(){d&&d()}function U(H){Bn(!1,`${H}`),u&&u(H)}const O=E.useMemo(()=>f.getViewport({scale:w,rotation:x}),[f,x,w]);return E.useEffect(function(){if(!g||!f||!a||!C)return;const{current:Z}=R;if(!Z)return;const $=O.clone({dontFlip:!0}),W={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:Z,l10n:null,page:f,viewport:$},st={annotations:C,annotationStorage:g.annotationStorage,div:Z,imageResourcesPath:n,linkService:a,page:f,renderForms:y,viewport:$};Z.innerHTML="";try{new dL(W).render(st),I()}catch(ct){U(ct)}return()=>{}},[C,n,a,f,g,y,O]),b.jsx("div",{className:Xh("react-pdf__Page__annotations","annotationLayer"),ref:R})}var f7=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(i);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(i,n[a])&&(e[n[a]]=i[n[a]]);return e};const iR=1;function p7(i){const t=xL(),e=Object.assign(Object.assign({},t),i),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:c,children:u,className:d,customRenderer:f,customTextRenderer:g,devicePixelRatio:y,error:x="Failed to load the page.",height:w,inputRef:A,loading:S="Loading page",noData:C="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:L,onGetStructTreeSuccess:j,onGetTextError:I,onGetTextSuccess:U,onLoadError:O,onLoadSuccess:H,onRenderAnnotationLayerError:Z,onRenderAnnotationLayerSuccess:$,onRenderError:W,onRenderSuccess:st,onRenderTextLayerError:ct,onRenderTextLayerSuccess:lt,pageIndex:nt,pageNumber:z,pdf:q,registerPage:X,renderAnnotationLayer:_t=!0,renderForms:Ct=!1,renderMode:P="canvas",renderTextLayer:G=!0,rotate:tt,scale:ot=iR,unregisterPage:pt,width:wt}=e,ht=f7(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Gt,Ft]=Vh(),{value:$t,error:ue}=Gt,cn=E.useRef(null);_e(q);const ae=fl(z)?z-1:nt??null,ce=z??(fl(nt)?nt+1:null),Le=tt??($t?$t.rotate:null),Ne=E.useMemo(()=>{if(!$t)return null;let Gn=1;const di=ot??iR;if(wt||w){const Na=$t.getViewport({scale:1,rotation:Le});wt?Gn=wt/Na.width:w&&(Gn=w/Na.height)}return di*Gn},[w,$t,Le,ot,wt]);E.useEffect(function(){return()=>{fl(ae)&&a&&pt&&pt(ae)}},[a,q,ae,pt]);function qn(){if(H){if(!$t||!Ne)return;H(o_($t,Ne))}if(a&&X){if(!fl(ae)||!cn.current)return;X(ae,cn.current)}}function hi(){ue&&(Bn(!1,ue.toString()),O&&O(ue))}E.useEffect(function(){Ft({type:"RESET"})},[Ft,q,ae]),E.useEffect(function(){if(!q||!ce)return;const di=Rg(q.getPage(ce)),Na=di;return di.promise.then(Ma=>{Ft({type:"RESOLVE",value:Ma})}).catch(Ma=>{Ft({type:"REJECT",error:Ma})}),()=>Sc(Na)},[Ft,q,ce]),E.useEffect(()=>{if($t!==void 0){if($t===!1){hi();return}qn()}},[$t,Ne]);const Pi=E.useMemo(()=>$t&&fl(ae)&&ce&&fl(Le)&&fl(Ne)?{_className:n,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:L,onGetStructTreeSuccess:j,onGetTextError:I,onGetTextSuccess:U,onRenderAnnotationLayerError:Z,onRenderAnnotationLayerSuccess:$,onRenderError:W,onRenderSuccess:st,onRenderTextLayerError:ct,onRenderTextLayerSuccess:lt,page:$t,pageIndex:ae,pageNumber:ce,renderForms:Ct,renderTextLayer:G,rotate:Le,scale:Ne}:null,[n,o,g,y,T,R,L,j,I,U,Z,$,W,st,ct,lt,$t,ae,ce,Ct,G,Le,Ne]),br=E.useMemo(()=>mL(ht,()=>$t&&(Ne?o_($t,Ne):void 0)),[ht,$t,Ne]),ms=`${ae}@${Ne}/${Le}`;function ed(){switch(P){case"custom":return _e(f),b.jsx(f,{},`${ms}_custom`);case"none":return null;case"canvas":default:return b.jsx(c7,{canvasRef:c},`${ms}_canvas`)}}function $o(){return G?b.jsx(h7,{},`${ms}_text`):null}function vn(){return _t?b.jsx(d7,{},`${ms}_annotations`):null}function nd(){return b.jsxs(AL.Provider,{value:Pi,children:[ed(),$o(),vn(),u]})}function Dc(){return ce?q===null||$t===void 0||$t===null?b.jsx(Iu,{type:"loading",children:typeof S=="function"?S():S}):q===!1||$t===!1?b.jsx(Iu,{type:"error",children:typeof x=="function"?x():x}):nd():b.jsx(Iu,{type:"no-data",children:typeof C=="function"?C():C})}return b.jsx("div",Object.assign({className:Xh(n,d),"data-page-number":ce,ref:wL(A,cn),style:{"--scale-factor":`${Ne}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},br,{children:Dc()}))}Wq();sS.workerSrc="pdf.worker.mjs";sS.workerSrc=new URL("/assets/pdf.worker.min-DGf6LXVo.mjs",import.meta.url).toString();function g7({pdfUrl:i}){const[t,e]=E.useState(0),[n,a]=E.useState(1),[o,c]=E.useState(1),[u,d]=E.useState(null),f=E.useRef(null);function g({numPages:T}){console.log("[PDFViewer] PDF loaded successfully, pages:",T),e(T),a(1),d(null)}function y(T){console.error("[PDFViewer] Failed to load PDF:",T),d(T.message||"Failed to load PDF")}const x=()=>{const T=Math.max(n-1,1);a(T),A(T)},w=()=>{const T=Math.min(n+1,t);a(T),A(T)},A=T=>{const R=document.getElementById(`pdf-page-${T}`);R&&f.current&&R.scrollIntoView({behavior:"smooth",block:"start"})},S=()=>{c(T=>Math.min(T+.2,3))},C=()=>{c(T=>Math.max(T-.2,.5))};return b.jsxs("div",{className:"w-full h-full flex flex-col bg-gray-50 dark:bg-gray-900 relative",children:[b.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shrink-0 sticky top-0 z-50 shadow-sm",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:x,disabled:n<=1,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Trang trc ()",children:b.jsx(D4,{className:"h-5 w-5"})}),b.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 min-w-[60px] text-center font-medium",children:[n," / ",t||""]}),b.jsx("button",{onClick:w,disabled:n>=t,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Trang sau ()",children:b.jsx(T4,{className:"h-5 w-5"})})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:C,disabled:o<=.5,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Thu nh ()",children:b.jsx(IF,{className:"h-5 w-5"})}),b.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 min-w-[50px] text-center font-medium",children:[Math.round(o*100),"%"]}),b.jsx("button",{onClick:S,disabled:o>=3,className:"h-8 w-8 p-0 inline-flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Phng to (+)",children:b.jsx(PF,{className:"h-5 w-5"})})]})]}),b.jsx("div",{ref:f,className:"flex-1 overflow-y-auto overflow-x-hidden flex flex-col items-center py-4 px-2 bg-gray-100 dark:bg-gray-900",style:{scrollBehavior:"smooth"},children:u?b.jsxs("div",{className:"text-center p-8",children:[b.jsx("div",{className:"text-destructive text-lg mb-2",children:"Failed to load PDF"}),b.jsx("div",{className:"text-sm text-muted-foreground",children:u}),b.jsxs("div",{className:"text-xs text-muted-foreground mt-4",children:["URL: ",i.substring(0,50),"..."]})]}):b.jsx(s7,{file:i,onLoadSuccess:g,onLoadError:y,loading:b.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-2"}),b.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading PDF..."})]}),error:b.jsx("div",{className:"text-center p-8 text-destructive",children:"Error rendering PDF"}),children:Array.from(new Array(t),(T,R)=>b.jsx("div",{id:`pdf-page-${R+1}`,className:"mb-4",children:b.jsx(p7,{pageNumber:R+1,scale:o,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-lg"})},`page_${R+1}`))})})]})}const m7="/api";function y7({projectId:i,targetPath:t="/",onClose:e,onSuccess:n,onUploadComplete:a}){const[o,c]=E.useState([]),[u,d]=E.useState(!1),[f,g]=E.useState(!1),y=E.useRef(null),x=E.useRef(null),w=E.useCallback(O=>{O.preventDefault(),O.stopPropagation(),d(!0)},[]),A=E.useCallback(O=>{O.preventDefault(),O.stopPropagation(),O.currentTarget===O.target&&d(!1)},[]),S=E.useCallback(O=>{O.preventDefault(),O.stopPropagation()},[]),C=E.useCallback(async O=>{O.preventDefault(),O.stopPropagation(),d(!1);const H=Array.from(O.dataTransfer.files),Z=Array.from(O.dataTransfer.items),$=[];if(Z.length>0&&Z[0].webkitGetAsEntry!==void 0){for(let st=0;st<Z.length;st++){const ct=Z[st];if(ct.kind==="file"||ct.kind===""){const lt=ct.webkitGetAsEntry();if(lt)try{const nt=await T(lt);$.push(...nt)}catch(nt){console.error("[Upload] Error processing entry:",lt==null?void 0:lt.name,nt)}else{const nt=ct.getAsFile();nt&&$.push(nt)}}}$.length<H.length&&($.length=0,$.push(...H))}else $.push(...H);L($)},[]),T=async(O,H="")=>new Promise((Z,$)=>{if(O.isFile)O.file(W=>{const st=H+W.name,ct=new File([W],st,{type:W.type});ct.relativePath=st,Z([ct])},$);else if(O.isDirectory){const W=O.createReader(),st=[],ct=()=>{W.readEntries(async lt=>{if(lt.length===0){const nt=[];for(const z of st){const q=await T(z,H+O.name+"/");nt.push(...q)}Z(nt)}else st.push(...lt),ct()},$)};ct()}else Z([])}),R=O=>{const H=O.target.files;if(H){const $=Array.from(H).map(W=>(W.webkitRelativePath&&(W.relativePath=W.webkitRelativePath),W));L($)}},L=O=>{const H=O.map(Z=>({file:Z,progress:0,status:"pending"}));c(Z=>[...Z,...H])},j=O=>{c(H=>H.filter((Z,$)=>$!==O))},I=async()=>{g(!0);const O=[],H=localStorage.getItem("heytex_token");for(let $=0;$<o.length;$++){const W=o[$];try{c(z=>{const q=[...z];return q[$]={...q[$],status:"uploading",progress:0},q});const st=new FormData;st.append("files",W.file),st.append("projectId",i);const ct=W.file.relativePath||W.file.name;st.append("relativePath",ct),st.append("targetPath",t);const lt=await fetch(`${m7}/upload/files`,{method:"POST",headers:{...H?{Authorization:`Bearer ${H}`}:{}},body:st});if(!lt.ok){const z=await lt.json().catch(()=>({error:"Upload failed"}));throw new Error(z.error||"Upload failed")}const nt=await lt.json();nt.files&&nt.files.length>0&&O.push(...nt.files),c(z=>{const q=[...z];return q[$]={...q[$],status:"success",progress:100},q})}catch(st){c(ct=>{const lt=[...ct];return lt[$]={...lt[$],status:"error",error:st instanceof Error?st.message:"Upload failed"},lt})}}g(!1),O.length>0&&(n==null||n(),a==null||a(O)),o.every(($,W)=>{const st=o[W];return(st==null?void 0:st.status)==="success"})&&setTimeout(e,1e3)},U=O=>{if(O===0)return"0 Bytes";const H=1024,Z=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(O)/Math.log(H));return Math.round(O/Math.pow(H,$)*100)/100+" "+Z[$]};return b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-[90%] max-w-2xl max-h-[80vh] flex flex-col shadow-xl",onClick:O=>O.stopPropagation(),children:[b.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200 dark:border-gray-700",children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t==="/"?"Upload Files":`Upload to ${t}`}),b.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:b.jsx(jh,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})})]}),b.jsxs("div",{className:"flex-1 p-5 overflow-y-auto",children:[b.jsxs("div",{className:`
                            border-2 border-dashed rounded-lg p-10 text-center cursor-pointer
                            transition-all duration-200
                            ${u?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900/50 hover:border-blue-400 hover:bg-blue-50/50"}
                        `,onDragEnter:w,onDragLeave:A,onDragOver:S,onDrop:C,onClick:()=>{var O;return(O=y.current)==null?void 0:O.click()},children:[b.jsx(RF,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),b.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-2",children:u?"Drop files or folders here":"Drag & drop files or folders here"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Supports multiple files, folders, and ZIP archives"}),b.jsxs("div",{className:"flex gap-2 justify-center",onClick:O=>O.stopPropagation(),children:[b.jsx("button",{onClick:()=>{var O;return(O=y.current)==null?void 0:O.click()},className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Select Files"}),b.jsx("button",{onClick:()=>{var O;return(O=x.current)==null?void 0:O.click()},className:"px-4 py-2 text-sm bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors",children:"Select Folder"})]}),b.jsx("input",{ref:y,type:"file",multiple:!0,onChange:R,className:"hidden"}),b.jsx("input",{ref:x,type:"file",webkitdirectory:"",directory:"",multiple:!0,onChange:R,className:"hidden"})]}),o.length>0&&b.jsxs("div",{className:"mt-6",children:[b.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:["Selected Files (",o.length,")"]}),b.jsx("div",{className:"space-y-2",children:o.map((O,H)=>b.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[b.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[b.jsx(Di,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:O.file.relativePath||O.file.name}),b.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:U(O.file.size)})]})]}),b.jsxs("div",{className:"flex items-center gap-3",children:[O.status==="uploading"&&b.jsx("div",{className:"w-24 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:b.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${O.progress}%`}})}),O.status==="success"&&b.jsx(P4,{className:"h-5 w-5 text-green-500"}),O.status==="error"&&b.jsx("div",{title:O.error,children:b.jsx(O4,{className:"h-5 w-5 text-red-500"})}),O.status==="pending"&&b.jsx("button",{onClick:()=>j(H),disabled:f,className:"px-3 py-1 text-xs font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded disabled:opacity-50",children:"Remove"})]})]},H))})]})]}),b.jsxs("div",{className:"flex items-center justify-end gap-3 p-5 border-t border-gray-200 dark:border-gray-700",children:[b.jsx("button",{onClick:e,disabled:f,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg disabled:opacity-50 transition-colors",children:"Cancel"}),b.jsx("button",{onClick:()=>{o.every(H=>H.status==="success"||H.status==="error")&&!f?e():I()},disabled:o.length===0||f,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.every(H=>H.status==="success"||H.status==="error")&&!f?"Close":f?"Uploading...":`Upload ${o.length} file${o.length!==1?"s":""}`})]})]})})}const v7="/";function b7(){const{projectId:i}=kP(),t=Ho(),{user:e}=Vo(),{currentProject:n,setCurrentProject:a,currentFile:o,setCurrentFile:c,files:u,setFiles:d,openFiles:f,addOpenFile:g,removeOpenFile:y,isSidebarOpen:x,toggleSidebar:w,isPreviewOpen:A,togglePreview:S,theme:C,toggleTheme:T,compilationStatus:R,compilationError:L,setCompilationStatus:j,pdfData:I,setPdfData:U,updateFileContent:O}=CR(),[H,Z]=E.useState(!0),[$,W]=E.useState(!1),[st,ct]=E.useState(new Set(["/"])),[lt,nt]=E.useState([]),[z,q]=E.useState(!1),[X,_t]=E.useState(!1),[Ct,P]=E.useState(null),[G,tt]=E.useState(null),[ot,pt]=E.useState(null),[wt,ht]=E.useState("pdf"),[Gt,Ft]=E.useState(""),[$t,ue]=E.useState(""),cn=E.useRef(null),[ae,ce]=E.useState(256),[Le,Ne]=E.useState(50),[qn,hi]=E.useState(null),Pi=E.useRef(null),br=E.useRef(null),ms=E.useRef(null),ed=E.useRef(null),$o=E.useRef(null);E.useEffect(()=>{if(!i)return;(async()=>{var ut;try{const{project:gt}=await Mn.getProject(i);a(gt),d(gt.files||[]);const jt=(ut=gt.files)==null?void 0:ut.find(kt=>kt.path===`/${gt.mainFile}`);jt&&g(jt)}catch(gt){console.error("Failed to load project:",gt),t("/dashboard")}finally{Z(!1)}})()},[i]),E.useEffect(()=>{R==="compiling"&&cn.current&&cn.current.scrollIntoView({behavior:"smooth"})},[$t,R]),E.useEffect(()=>{if(!o||!sd()){pt(null);return}(async()=>{try{const ut=localStorage.getItem("heytex_token"),gt=await fetch(`/api/files/${o.id}/content`,{headers:{...ut?{Authorization:`Bearer ${ut}`}:{}}});if(!gt.ok)throw new Error("Failed to load image");const jt=await gt.blob(),kt=URL.createObjectURL(jt);return pt(kt),()=>{kt&&URL.revokeObjectURL(kt)}}catch(ut){console.error("Error loading image:",ut),pt(null)}})()},[o==null?void 0:o.id]),E.useEffect(()=>{if(!o||!n||!e)return;const at=yy(v7,{path:"/collab",transports:["websocket"]});Pi.current=at;const ut=new Jh;ms.current=ut;const gt=`project:${n.id}:${o.path}`;return at.on("connect",()=>{console.log("Connected to collaboration server"),at.emit("join-room",{docName:gt,user:{id:e.id,name:e.name}})}),at.on("sync",jt=>{console.log("Received sync message")}),at.on("update",jt=>{A6(ut,new Uint8Array(jt))}),at.on("current-users",jt=>{const kt=Array.from(new Map(jt.map(Oe=>[Oe.id,Oe])).values());nt(kt)}),at.on("user-joined",jt=>{nt(kt=>[...kt.filter(Te=>Te.id!==jt.id),jt])}),at.on("user-left",jt=>{nt(kt=>kt.filter(Oe=>Oe.id!==jt))}),()=>{(at.connected||at.io.engine)&&at.disconnect(),Pi.current=null,ms.current=null}},[o==null?void 0:o.id,n==null?void 0:n.id,e]);const vn=(at,ut)=>{ed.current=at,ut.languages.register({id:"latex"}),ut.languages.register({id:"typst"}),ut.languages.setMonarchTokensProvider("latex",{tokenizer:{root:[[/\\[a-zA-Z@]+/,"keyword"],[/\\[^a-zA-Z@]/,"keyword"],[/%.*$/,"comment"],[/\{/,"delimiter.curly"],[/\}/,"delimiter.curly"],[/\[/,"delimiter.square"],[/\]/,"delimiter.square"],[/\$\$/,"string","@displaymath"],[/\$/,"string","@inlinemath"],[/\\begin\{[^}]+\}/,"keyword.control"],[/\\end\{[^}]+\}/,"keyword.control"]],inlinemath:[[/[^$]+/,"string"],[/\$/,"string","@pop"]],displaymath:[[/[^$]+/,"string"],[/\$\$/,"string","@pop"]]}}),ut.languages.setMonarchTokensProvider("typst",{tokenizer:{root:[[/#[a-zA-Z]+/,"keyword"],[/\/\/.*$/,"comment"],[/\/\*/,"comment","@comment"],[/\[/,"delimiter.square"],[/\]/,"delimiter.square"],[/\{/,"delimiter.curly"],[/\}/,"delimiter.curly"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string"]],comment:[[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],string:[[/[^\\"]+/,"string"],[/"/,"string","@pop"]]}}),o!=null&&o.content&&at.setValue(o.content)},nd=at=>{var ut;if(!(!o||at===void 0)&&(O(o.id,at),$o.current&&clearTimeout($o.current),$o.current=setTimeout(async()=>{await di(o.id,at)},1500),ms.current&&((ut=Pi.current)!=null&&ut.connected))){const gt=E6(ms.current);Pi.current.emit("update",gt)}},Dc=E.useRef(null),Gn=E.useRef(null);E.useRef(null),E.useEffect(()=>((async()=>{console.log(" [HeyTeX v2] Skipping WASM XeTeX/Dvipdfmx engines; using server-side TeXLive compilation");try{const{TypstCompilerEngine:ut}=await bl(async()=>{const{TypstCompilerEngine:jt}=await import("./TypstCompilerEngine-pRJlCa9l.js");return{TypstCompilerEngine:jt}},[]),gt=new ut;Gn.current=gt,console.log("TypstCompilerEngine initialized")}catch(ut){console.error("Failed to init TypstCompilerEngine:",ut)}})(),()=>{Dc.current,Gn.current&&Gn.current.terminate()}),[]),E.useEffect(()=>{if((n==null?void 0:n.engine)!=="LATEX")return;const at=async()=>{try{const{compilationAPI:gt}=await bl(async()=>{const{compilationAPI:kt}=await import("./compilation-CsLgiDcZ.js");return{compilationAPI:kt}},[]),jt=await gt.getStats();tt(jt.stats)}catch(gt){console.error("[Queue Stats] Failed to fetch:",gt)}};at();const ut=setInterval(at,3e3);return()=>clearInterval(ut)},[n==null?void 0:n.engine]);const di=async(at,ut)=>{W(!0);try{await Mn.updateFile(at,{content:ut})}catch(gt){console.error("Failed to save:",gt)}finally{W(!1)}},Na=async()=>{if(o!=null&&o.content){j("compiling"),ue("");try{if(((n==null?void 0:n.engine)||"LATEX")==="TYPST"){if(ue(` Starting Typst compilation...
`),!Gn.current)throw new Error("Typst engine not ready");ue(gt=>gt+" Compiling "+o.name+`...
`);const ut=await Gn.current.compile("main.typ",{"main.typ":o.content},"pdf");if(ut.output){ue(kt=>kt+` Compilation successful!
`);const gt=new Blob([ut.output],{type:"application/pdf"}),jt=URL.createObjectURL(gt);U(jt),j("success")}else throw new Error("No output from Typst")}else{ue(` Starting LaTeX compilation on server...
`);const{compilationAPI:ut}=await bl(async()=>{const{compilationAPI:kt}=await import("./compilation-CsLgiDcZ.js");return{compilationAPI:kt}},[]);console.log("[Compile] Submitting job to server..."),ue(kt=>kt+` Submitting ${o.name} to compilation queue...
`);const gt=await ut.submitJob(o.name,o.content,n==null?void 0:n.id);console.log("[Compile] Job submitted:",gt.jobId,`Queue: ${gt.stats.queued}, Compiling: ${gt.stats.compiling}`),ue(kt=>kt+` Job submitted: ${gt.jobId}
 Queue stats: ${gt.stats.compiling} compiling, ${gt.stats.queued} queued
 Waiting for compilation to complete...
`);const jt=await ut.pollJobStatus(gt.jobId,kt=>{console.log("[Compile] Job status:",kt.job.status,kt.job.queuePosition?`Position: ${kt.job.queuePosition}`:""),kt.job.queuePosition!==void 0&&kt.job.queuePosition>0?ue(Oe=>{var Bs;const Te=Oe.split(`
`);return(Bs=Te[Te.length-2])!=null&&Bs.includes("Queue position:")&&Te.splice(-2,1),Te.join(`
`)+` Queue position: ${kt.job.queuePosition}
`}):kt.job.status==="compiling"&&ue(Oe=>Oe.includes(" Compiling...")?Oe:Oe+` Compiling... (running xelatex 3 times)

`)},kt=>{console.log("[Compile] Log update, length:",kt.length);const Te=kt.split(`
`).slice(-50).join(`
`);ue(Bs=>Bs.split(`
`).slice(0,5).join(`
`)+`

 LaTeX Output:
`+Te)});if(jt.job.status==="completed"){console.log("[Compile] Downloading PDF..."),ue(Te=>Te+` Downloading PDF output...
`);const kt=await ut.getPDF(gt.jobId),Oe=URL.createObjectURL(kt);U(Oe),ue(Te=>Te+` Compilation completed successfully!
 PDF size: ${(kt.size/1024).toFixed(2)} KB
`),j("success"),console.log("[Compile] PDF ready");try{const Te=await ut.getLog(gt.jobId);Ft(Te||"No log available")}catch(Te){console.warn("[Compile] Failed to get log:",Te)}}else if(jt.job.status==="failed"){ue(Bs=>Bs+` Compilation failed!
`);const kt=await ut.getLog(gt.jobId);Ft(kt||"No log available");const Oe=MH(kt),Te=DH(Oe);j("error",Te||jt.job.error||"Compilation failed"),ht("logs")}}}catch(at){console.error("[Compile] Error:",at);const ut=at instanceof Error?at.message:"Unknown error";ue(gt=>gt+`
 Error: ${ut}
`),j("error",ut),ht("logs")}}},Ma=at=>{ct(ut=>{const gt=new Set(ut);return gt.has(at)?gt.delete(at):gt.add(at),gt})},yb=async()=>{const at=prompt("Enter file name (e.g., main.tex or document.typ):");if(!(!at||!n))try{const{file:ut}=await Mn.createFile({projectId:n.id,name:at,path:`/${at}`,content:""});d([...u,ut]),g(ut)}catch(ut){console.error("Failed to create file:",ut),alert("Failed to create file")}},vb=async()=>{const at=prompt("Enter folder name:");if(!(!at||!n))try{const{file:ut}=await Mn.createFile({projectId:n.id,name:at,path:`/${at}`,isFolder:!0});d([...u,ut])}catch(ut){console.error("Failed to create folder:",ut),alert("Failed to create folder")}},Xo=()=>{_t(!0)},$n=async at=>{const ut=at.target.files;if(!(!ut||ut.length===0||!n)){for(const gt of Array.from(ut))try{const jt=new FileReader,kt=await new Promise((Te,Bs)=>{jt.onload=()=>{const xr=jt.result,Mg=xr.split(",")[1]||xr;Te(Mg)},jt.onerror=Bs,jt.readAsDataURL(gt)}),{file:Oe}=await Mn.uploadFile({projectId:n.id,path:`/${gt.name}`,name:gt.name,mimeType:gt.type||"application/octet-stream",data:kt});d([...u,Oe]),(gt.name.endsWith(".tex")||gt.name.endsWith(".typ")||gt.name.endsWith(".txt"))&&g(Oe)}catch(jt){console.error(`Failed to upload ${gt.name}:`,jt),alert(`Failed to upload ${gt.name}`)}br.current&&(br.current.value="")}},Fi=async()=>{if(!o){alert("Please select a file to rename");return}const at=prompt("Enter new name:",o.name);if(!(!at||at===o.name))try{await Mn.updateFile(o.id,{name:at});const ut=u.map(gt=>gt.id===o.id?{...gt,name:at}:gt);d(ut),o.id===o.id&&c({...o,name:at})}catch(ut){console.error("Failed to rename file:",ut),alert("Failed to rename file")}},Xn=async()=>{if(!o){alert("Please select a file to delete");return}if(confirm(`Are you sure you want to delete "${o.name}"?`))try{await Mn.deleteFile(o.id);const at=u.filter(ut=>ut.id!==o.id);d(at),y(o.id),f.length>1?c(f[0]):c(null)}catch(at){console.error("Failed to delete file:",at),alert("Failed to delete file")}},Ng=at=>ut=>{ut.preventDefault(),hi(at)};E.useEffect(()=>{if(!qn)return;const at=gt=>{if(qn==="sidebar"){const jt=Math.max(200,Math.min(500,gt.clientX));ce(jt)}else if(qn==="editor"){const jt=document.querySelector(".editor-preview-container");if(jt){const kt=jt.getBoundingClientRect(),Oe=gt.clientX-kt.left,Te=Math.max(30,Math.min(70,Oe/kt.width*100));Ne(Te)}}},ut=()=>{hi(null)};return document.addEventListener("mousemove",at),document.addEventListener("mouseup",ut),()=>{document.removeEventListener("mousemove",at),document.removeEventListener("mouseup",ut)}},[qn]);const bb=()=>{var ut;if(!o)return"plaintext";const at=(ut=o.name.split(".").pop())==null?void 0:ut.toLowerCase();return at==="tex"?"latex":at==="typ"?"typst":at==="bib"||at==="bbl"?"bibtex":at==="md"?"markdown":at==="json"?"json":at==="yaml"||at==="yml"?"yaml":at==="xml"?"xml":at==="html"?"html":at==="css"?"css":at==="js"?"javascript":at==="ts"?"typescript":at==="py"?"python":"plaintext"},sd=()=>{var ut;if(!o)return!1;const at=(ut=o.name.split(".").pop())==null?void 0:ut.toLowerCase();return["png","jpg","jpeg","gif","svg","webp","bmp","ico"].includes(at||"")},Yo=()=>o?o.name.toLowerCase().endsWith(".pdf"):!1;return H?b.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:b.jsx(or,{size:"lg"})}):b.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[b.jsxs("header",{className:"h-12 flex items-center justify-between px-4 border-b bg-card shrink-0",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(te,{variant:"ghost",size:"icon",onClick:()=>t("/dashboard"),children:b.jsx(R4,{className:"h-5 w-5"})}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(Ea,{className:"h-5 w-5 text-primary"}),b.jsx("span",{className:"font-medium",children:n==null?void 0:n.name}),b.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${(n==null?void 0:n.engine)==="TYPST"?"bg-cyan-500/10 text-cyan-500":"bg-orange-500/10 text-orange-500"}`,children:n==null?void 0:n.engine})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs(te,{size:"sm",onClick:Na,disabled:R==="compiling"||(n==null?void 0:n.engine)==="LATEX"&&!!(G&&G.available===0),className:"gap-2",title:G&&G.available===0?"Server ang y, vui lng ch...":void 0,children:[R==="compiling"?b.jsx(or,{size:"sm"}):b.jsx(gF,{className:"h-4 w-4"}),"Bin dch"]}),b.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[$?b.jsx(or,{size:"sm"}):b.jsx(GR,{className:"h-4 w-4"}),b.jsx("span",{children:$?"ang lu...":" lu"})]}),b.jsxs(te,{variant:"outline",size:"sm",onClick:()=>q(!0),className:"gap-2",children:[b.jsx(Sw,{className:"h-4 w-4"}),"Chia s"]}),(n==null?void 0:n.engine)==="LATEX"&&G&&b.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground border rounded px-2 py-1",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),b.jsxs("span",{children:[G.compiling," ang dch"]})]}),G.queued>0&&b.jsxs(b.Fragment,{children:[b.jsx("span",{children:""}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),b.jsxs("span",{children:[G.queued," ang ch"]})]})]})]}),b.jsx(NH,{collaborators:lt,maxShow:5}),b.jsx(te,{variant:"ghost",size:"icon",onClick:T,children:C==="dark"?b.jsx(XR,{className:"h-4 w-4"}):b.jsx(qR,{className:"h-4 w-4"})})]})]}),b.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[b.jsx("input",{ref:br,type:"file",multiple:!0,className:"hidden",onChange:$n}),b.jsx("aside",{style:{width:x?`${ae}px`:"0"},className:Fs("border-r bg-card flex flex-col transition-all duration-200 shrink-0",!x&&"border-r-0"),children:x&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"px-2 py-1.5 border-b flex items-center justify-between gap-1",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"New file",onClick:yb,children:b.jsx(Di,{className:"h-4 w-4"})}),b.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"New folder",onClick:vb,children:b.jsx(v_,{className:"h-4 w-4"})}),b.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Upload",onClick:Xo,children:b.jsx(Qy,{className:"h-4 w-4 rotate-180"})})]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7",title:"Rename",onClick:Fi,children:b.jsx(Ea,{className:"h-4 w-4"})}),b.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:text-destructive",title:"Delete",onClick:Xn,children:b.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),b.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:u.filter(at=>!at.path.includes("/",1)||at.path.split("/").length===2).map(at=>b.jsx(TL,{file:at,files:u,isExpanded:st.has(at.path),onToggle:Ma,onSelect:ut=>{ut.isFolder?(P(ut),c(null)):(P(null),g(ut))},selectedFileId:o==null?void 0:o.id,selectedFolderId:Ct==null?void 0:Ct.id,expandedFolders:st,level:0},at.id))})]})}),x&&b.jsx("div",{onMouseDown:Ng("sidebar"),className:Fs("w-1 hover:w-1.5 bg-border hover:bg-primary/50 cursor-col-resize transition-all shrink-0",qn==="sidebar"&&"bg-primary w-1.5")}),b.jsx("button",{onClick:w,className:"w-5 h-full flex items-center justify-center hover:bg-muted transition-colors shrink-0",children:x?b.jsx(hF,{className:"h-4 w-4 text-muted-foreground"}):b.jsx(fF,{className:"h-4 w-4 text-muted-foreground"})}),b.jsxs("div",{className:"flex-1 flex overflow-hidden editor-preview-container",children:[b.jsxs("div",{style:{width:A?`${Le}%`:"100%"},className:"flex flex-col min-w-0 transition-all duration-200",children:[b.jsx("div",{className:"h-9 flex items-center border-b bg-card/50 overflow-x-auto shrink-0",children:f.map(at=>b.jsxs("div",{onClick:()=>c(at),className:Fs("flex items-center gap-2 px-3 h-full border-r cursor-pointer group",(o==null?void 0:o.id)===at.id?"bg-background border-b-2 border-b-primary":"hover:bg-muted/50"),children:[b.jsx("span",{className:"text-sm",children:UR(at.name)}),b.jsx("span",{className:"text-sm truncate max-w-32",children:at.name}),b.jsx("button",{onClick:ut=>{ut.stopPropagation(),y(at.id)},className:"opacity-0 group-hover:opacity-100 hover:text-destructive",children:""})]},at.id))}),b.jsx("div",{className:"flex-1 min-h-0",children:o?b.jsx(b.Fragment,{children:sd()?b.jsx("div",{className:"h-full flex items-center justify-center bg-muted/10 p-4 overflow-auto",children:b.jsxs("div",{className:"text-center",children:[ot?b.jsx("img",{src:ot,alt:o.name,className:"max-w-full max-h-full object-contain rounded shadow-lg"}):b.jsxs("div",{className:"text-muted-foreground",children:[b.jsx(or,{size:"lg"}),b.jsx("p",{className:"mt-4",children:"Loading image..."})]}),b.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:o.name}),b.jsx("p",{className:"text-xs text-muted-foreground",children:o.size?`${(o.size/1024).toFixed(2)} KB`:""})]})}):Yo()?b.jsx("div",{className:"h-full flex items-center justify-center bg-muted/10",children:b.jsxs("div",{className:"text-center text-muted-foreground",children:[b.jsx(Di,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),b.jsx("p",{children:"PDF preview not yet implemented"}),b.jsx("p",{className:"text-sm mt-2",children:o.name})]})}):b.jsx(nU,{height:"100%",language:bb(),value:o.content||"",onChange:nd,onMount:vn,theme:C==="dark"?"vs-dark":"light",options:{fontSize:14,fontFamily:"JetBrains Mono, Consolas, monospace",minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!0,automaticLayout:!0,scrollBeyondLastLine:!1,padding:{top:16},bracketPairColorization:{enabled:!0},matchBrackets:"always",colorDecorators:!0,renderWhitespace:"selection",occurrencesHighlight:"multiFile",readOnly:sd()||Yo()}})}):b.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:b.jsxs("div",{className:"text-center",children:[b.jsx(Di,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),b.jsx("p",{children:"Chn mt file  bt u bin tp"})]})})})]}),b.jsx("button",{onClick:S,className:"w-5 h-full flex items-center justify-center hover:bg-muted transition-colors shrink-0 border-x",children:A?b.jsx(H4,{className:"h-4 w-4 text-muted-foreground"}):b.jsx(MT,{className:"h-4 w-4 text-muted-foreground"})}),A&&b.jsx("div",{onMouseDown:Ng("editor"),className:Fs("w-1 hover:w-1.5 bg-border hover:bg-primary/50 cursor-col-resize transition-all shrink-0",qn==="editor"&&"bg-primary w-1.5")}),A&&b.jsxs("div",{style:{width:`${100-Le}%`},className:"flex flex-col bg-muted/30 min-w-0",children:[b.jsxs("div",{className:"h-9 flex items-center justify-between px-4 border-b bg-card/50 shrink-0",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("button",{onClick:()=>ht("pdf"),className:Fs("px-3 py-1 text-sm font-medium rounded transition-colors",wt==="pdf"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:"PDF"}),b.jsx("button",{onClick:()=>ht("logs"),className:Fs("px-3 py-1 text-sm font-medium rounded transition-colors",wt==="logs"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:"Logs & Output"})]}),b.jsxs(te,{variant:"ghost",size:"sm",className:"h-7 gap-2",disabled:!I,children:[b.jsx(Qy,{className:"h-3 w-3"}),"Export"]})]}),b.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto",children:R==="compiling"?b.jsx("div",{className:"w-full h-full flex flex-col p-4",children:b.jsx("div",{className:"flex-1 border rounded-lg overflow-auto bg-card",children:b.jsxs("div",{className:"p-4",children:[b.jsx("pre",{className:"font-mono text-sm whitespace-pre-wrap text-foreground",children:$t||`Initializing...
`}),b.jsx("div",{ref:cn})]})})}):wt==="logs"?b.jsxs("div",{className:"w-full h-full overflow-auto p-4",children:[b.jsxs("div",{className:Fs("border rounded-lg p-4 mb-4",R==="error"?"bg-destructive/10 border-destructive/30":"bg-muted/50 border-border"),children:[b.jsx("h3",{className:Fs("text-lg font-semibold mb-2",R==="error"?"text-destructive":"text-foreground"),children:R==="error"?" Compilation Failed":" Compilation Log"}),R==="error"&&L&&b.jsx("div",{className:"mb-4",children:b.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden",children:[b.jsx("div",{className:"bg-muted px-4 py-2 border-b font-semibold text-sm",children:" Error Details"}),b.jsx("pre",{className:"p-4 text-sm font-mono whitespace-pre-wrap overflow-auto max-h-96",children:L})]})})]}),b.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden",children:[b.jsxs("div",{className:"bg-muted px-4 py-2 border-b font-semibold text-sm flex items-center justify-between",children:[b.jsx("span",{children:" Full Compilation Log"}),b.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Gt)},className:"text-xs px-2 py-1 bg-primary/10 hover:bg-primary/20 rounded",children:"Copy to clipboard"})]}),b.jsx("pre",{className:"p-4 text-xs font-mono whitespace-pre-wrap overflow-auto max-h-[600px] bg-gray-900 text-gray-100",children:Gt||"No logs available. Compile your document to see logs."})]})]}):R==="error"?b.jsxs("div",{className:"text-center text-muted-foreground p-8",children:[b.jsx("div",{className:"text-destructive text-lg mb-4",children:" Compilation Failed"}),b.jsx("p",{className:"mb-4",children:'Check the "Logs & Output" tab for details'}),b.jsx(te,{onClick:()=>ht("logs"),variant:"outline",children:"View Logs"})]}):I?b.jsx(g7,{pdfUrl:I}):b.jsxs("div",{className:"text-center text-muted-foreground",children:[b.jsx(MT,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),b.jsx("p",{children:'Nhn "Bin dch"  xem kt qu'})]})})]})]})]}),b.jsxs("footer",{className:"h-6 flex items-center justify-between px-4 border-t bg-card text-xs text-muted-foreground shrink-0",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("span",{children:n==null?void 0:n.engine}),b.jsx("span",{children:o==null?void 0:o.path})]}),b.jsx("div",{className:"flex items-center gap-4",children:b.jsxs("span",{className:Fs("flex items-center gap-1",R==="success"&&"text-green-500",R==="error"&&"text-destructive"),children:[R==="idle"&&" Sn sng",R==="compiling"&&" ang bin dch",R==="success"&&" Thnh cng",R==="error"&&" Li"]})})]}),z&&n&&b.jsx(LH,{isOpen:z,onClose:()=>q(!1),projectId:n.id,projectName:n.name,collaborators:n.collaborators||[],onCollaboratorAdded:async()=>{if(i){const{project:at}=await Mn.getProject(i);a(at)}}}),X&&n&&b.jsx(y7,{projectId:n.id,targetPath:(Ct==null?void 0:Ct.path)||"/",onClose:()=>_t(!1),onUploadComplete:at=>{d([...u,...at]);const ut=at.find(gt=>gt.name.endsWith(".tex")||gt.name.endsWith(".typ")||gt.name.endsWith(".txt"));ut&&g(ut)}})]})}function TL({file:i,files:t,isExpanded:e,onToggle:n,onSelect:a,selectedFileId:o,selectedFolderId:c,expandedFolders:u,level:d}){const f=t.filter(y=>(y.path.substring(0,y.path.lastIndexOf("/"))||"/")===i.path&&y.id!==i.id),g=i.isFolder?c===i.id:o===i.id;return b.jsxs("div",{children:[b.jsxs("div",{onClick:()=>{i.isFolder&&n(i.path),a(i)},className:Fs("flex items-center gap-2 px-2 py-1 rounded cursor-pointer text-sm",g?"bg-primary/20 text-primary":"hover:bg-muted"),style:{paddingLeft:`${d*12+8}px`},children:[i.isFolder?e?b.jsx(v_,{className:"h-4 w-4 text-yellow-500"}):b.jsx(VR,{className:"h-4 w-4 text-yellow-500"}):b.jsx("span",{children:UR(i.name)}),b.jsx("span",{className:"truncate",children:i.name})]}),i.isFolder&&e&&f.map(y=>b.jsx(TL,{file:y,files:t,isExpanded:u.has(y.path),onToggle:n,onSelect:a,selectedFileId:o,selectedFolderId:c,expandedFolders:u,level:d+1},y.id))]})}function x7(){const i=Ho(),{user:t}=Vo(),[e,n]=E.useState([]),[a,o]=E.useState(null),[c,u]=E.useState(""),[d,f]=E.useState(!0),[g,y]=E.useState(!1),[x,w]=E.useState({email:"",password:"",name:"",isAdmin:!1});E.useEffect(()=>{if(!(t!=null&&t.isAdmin)){i("/dashboard");return}A()},[t,i]);const A=async()=>{f(!0);try{const R=localStorage.getItem("heytex_token"),[L,j]=await Promise.all([fetch("/api/admin/users",{headers:{Authorization:`Bearer ${R}`}}),fetch("/api/admin/stats",{headers:{Authorization:`Bearer ${R}`}})]);if(L.ok){const I=await L.json();n(I.users)}if(j.ok){const I=await j.json();o(I.stats)}}catch(R){console.error("Failed to load admin data:",R)}finally{f(!1)}},S=async()=>{if(!x.email||!x.password||!x.name){alert("Vui lng in y  thng tin");return}try{const R=localStorage.getItem("heytex_token"),L=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify(x)});if(L.ok)y(!1),w({email:"",password:"",name:"",isAdmin:!1}),A();else{const j=await L.json();alert(j.error||"Khng th to user")}}catch(R){console.error("Failed to create user:",R),alert("C li xy ra")}},C=async R=>{if(confirm("Bn c chc mun xa user ny? Tt c d n ca h cng s b xa."))try{const L=localStorage.getItem("heytex_token"),j=await fetch(`/api/admin/users/${R}`,{method:"DELETE",headers:{Authorization:`Bearer ${L}`}});if(j.ok)A();else{const I=await j.json();alert(I.error||"Khng th xa user")}}catch(L){console.error("Failed to delete user:",L),alert("C li xy ra")}},T=e.filter(R=>R.email.toLowerCase().includes(c.toLowerCase())||R.name.toLowerCase().includes(c.toLowerCase()));return t!=null&&t.isAdmin?b.jsxs("div",{className:"min-h-screen bg-slate-50",children:[b.jsx("div",{className:"border-b border-slate-200 bg-white shadow-sm",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx($R,{className:"w-6 h-6 text-yellow-600"}),b.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Admin Panel"})]}),b.jsx(te,{variant:"outline",onClick:()=>i("/dashboard"),children:"V Dashboard"})]})}),b.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a&&b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[b.jsx("div",{className:"bg-white rounded-lg p-6 border border-slate-200 shadow-sm",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Oh,{className:"w-5 h-5 text-blue-600"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-slate-600",children:"Tng Users"}),b.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.totalUsers})]})]})}),b.jsx("div",{className:"bg-white rounded-lg p-6 border border-slate-200 shadow-sm",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Di,{className:"w-5 h-5 text-green-600"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-slate-600",children:"Tng D n"}),b.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.totalProjects})]})]})}),b.jsx("div",{className:"bg-white rounded-lg p-6 border border-slate-200 shadow-sm",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Di,{className:"w-5 h-5 text-orange-600"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-slate-600",children:"LaTeX"}),b.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.latexProjects})]})]})}),b.jsx("div",{className:"bg-white rounded-lg p-6 border border-slate-200 shadow-sm",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Di,{className:"w-5 h-5 text-cyan-600"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm text-slate-600",children:"Typst"}),b.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.typstProjects})]})]})})]}),b.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-6",children:[b.jsxs("div",{className:"flex items-center justify-between mb-6",children:[b.jsxs("h2",{className:"text-xl font-semibold text-slate-900 flex items-center gap-2",children:[b.jsx(Oh,{className:"w-5 h-5"}),"Qun l Users"]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs(te,{variant:"outline",onClick:A,disabled:d,children:[b.jsx(vF,{className:`w-4 h-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]}),b.jsxs(te,{onClick:()=>y(!0),children:[b.jsx(_w,{className:"w-4 h-4 mr-2"}),"To User"]})]})]}),b.jsx("div",{className:"mb-4",children:b.jsxs("div",{className:"relative",children:[b.jsx(wF,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),b.jsx(Dn,{type:"text",placeholder:"Tm kim theo email hoc tn...",value:c,onChange:R=>u(R.target.value),className:"pl-10"})]})}),d?b.jsx("div",{className:"text-center py-12 text-slate-500",children:"ang ti..."}):b.jsxs("div",{className:"overflow-x-auto",children:[b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"border-b border-slate-200",children:[b.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-700",children:"Avatar"}),b.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-700",children:"Tn"}),b.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-700",children:"Email"}),b.jsx("th",{className:"text-center py-3 px-4 text-sm font-medium text-slate-700",children:"D n"}),b.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-slate-700",children:"To lc"}),b.jsx("th",{className:"text-center py-3 px-4 text-sm font-medium text-slate-700",children:"Hnh ng"})]})}),b.jsx("tbody",{children:T.map(R=>b.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[b.jsx("td",{className:"py-3 px-4",children:b.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-medium overflow-hidden",children:R.avatar?b.jsx("img",{src:R.avatar,alt:R.name,className:"w-full h-full object-cover"}):b.jsx("span",{children:R.name.charAt(0).toUpperCase()})})}),b.jsx("td",{className:"py-3 px-4 text-sm text-slate-900 font-medium",children:R.name}),b.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:R.email}),b.jsx("td",{className:"py-3 px-4 text-sm text-center text-slate-900 font-medium",children:R.projectCount||0}),b.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:R.createdAt?new Date(R.createdAt).toLocaleDateString("vi-VN"):"-"}),b.jsx("td",{className:"py-3 px-4 text-center",children:R.id!==t.id&&b.jsx(te,{variant:"outline",size:"sm",onClick:()=>C(R.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:b.jsx(Zy,{className:"w-4 h-4"})})})]},R.id))})]}),T.length===0&&b.jsx("div",{className:"text-center py-12 text-slate-500",children:"Khng tm thy user no"})]})]})]}),g&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:b.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-xl p-6 w-full max-w-md",children:[b.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"To User Mi"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-slate-700 font-medium block mb-2",children:"Email"}),b.jsx(Dn,{type:"email",value:x.email,onChange:R=>w({...x,email:R.target.value}),placeholder:"user@example.com"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-slate-700 font-medium block mb-2",children:"Mt khu"}),b.jsx(Dn,{type:"password",value:x.password,onChange:R=>w({...x,password:R.target.value}),placeholder:"Ti thiu 6 k t"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-sm text-slate-700 font-medium block mb-2",children:"Tn"}),b.jsx(Dn,{type:"text",value:x.name,onChange:R=>w({...x,name:R.target.value}),placeholder:"Tn y "})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{type:"checkbox",checked:x.isAdmin,onChange:R=>w({...x,isAdmin:R.target.checked}),id:"isAdmin",className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),b.jsx("label",{htmlFor:"isAdmin",className:"text-sm text-slate-700",children:"Admin user"})]})]}),b.jsxs("div",{className:"flex gap-2 mt-6",children:[b.jsx(te,{variant:"outline",onClick:()=>{y(!1),w({email:"",password:"",name:"",isAdmin:!1})},className:"flex-1",children:"Hy"}),b.jsx(te,{onClick:S,className:"flex-1",children:"To"})]})]})})]}):null}function vw({children:i}){const{isAuthenticated:t,isLoading:e}=Vo();return e?b.jsx(KR,{message:"ang xc thc..."}):t?b.jsx(b.Fragment,{children:i}):b.jsx(Ky,{to:"/login",replace:!0})}function rR({children:i}){const{isAuthenticated:t,isLoading:e}=Vo();return e?b.jsx(KR,{message:"ang ti..."}):t?b.jsx(Ky,{to:"/dashboard",replace:!0}):b.jsx(b.Fragment,{children:i})}function w7(){const{checkAuth:i}=Vo();return E.useEffect(()=>{i()},[i]),b.jsx(d3,{children:b.jsxs(VP,{children:[b.jsx(so,{path:"/login",element:b.jsx(rR,{children:b.jsx(BF,{})})}),b.jsx(so,{path:"/register",element:b.jsx(rR,{children:b.jsx(HF,{})})}),b.jsx(so,{path:"/dashboard",element:b.jsx(vw,{children:b.jsx(G5,{})})}),b.jsx(so,{path:"/admin",element:b.jsx(vw,{children:b.jsx(x7,{})})}),b.jsx(so,{path:"/editor/:projectId",element:b.jsx(vw,{children:b.jsx(b7,{})})}),b.jsx(so,{path:"/",element:b.jsx(Ky,{to:"/dashboard",replace:!0})}),b.jsx(so,{path:"*",element:b.jsx(Ky,{to:"/dashboard",replace:!0})})]})})}Wj.createRoot(document.getElementById("root")).render(b.jsx(E.StrictMode,{children:b.jsx(w7,{})}));
//# sourceMappingURL=index-BB8A0WZf.js.map
